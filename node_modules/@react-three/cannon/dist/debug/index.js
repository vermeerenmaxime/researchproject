import { createContext, useEffect, useState, useRef, useCallback, useLayoutEffect, useMemo, useContext, Suspense } from 'react';
import { useThree, useFrame } from '@react-three/fiber';
import { Vector3, Quaternion as Quaternion$1, Matrix4, InstancedMesh, MeshBasicMaterial, SphereGeometry, BoxGeometry, PlaneGeometry, Mesh, CylinderGeometry, BufferGeometry, Float32BufferAttribute, Scene, Object3D, Euler, MathUtils, DynamicDrawUsage } from 'three';
import { jsx, jsxs } from 'react/jsx-runtime';

const atomicNames = ['allowSleep', 'angularDamping', 'collisionFilterGroup', 'collisionFilterMask', 'collisionResponse', 'fixedRotation', 'isTrigger', 'linearDamping', 'mass', 'material', 'sleepSpeedLimit', 'sleepTimeLimit', 'userData'];
const vectorNames = ['angularFactor', 'angularVelocity', 'linearFactor', 'position', 'velocity'];
const subscriptionNames = [...atomicNames, ...vectorNames, 'quaternion', 'sliding'];
const context = /*#__PURE__*/createContext({});
const debugContext = /*#__PURE__*/createContext(null);

function useUpdateWorldPropsEffect(_ref) {
  let {
    axisIndex,
    broadphase,
    gravity,
    iterations,
    step,
    tolerance,
    worker
  } = _ref;
  useEffect(() => void worker.postMessage({
    op: 'setAxisIndex',
    props: axisIndex
  }), [axisIndex]);
  useEffect(() => void worker.postMessage({
    op: 'setBroadphase',
    props: broadphase
  }), [broadphase]);
  useEffect(() => void worker.postMessage({
    op: 'setGravity',
    props: gravity
  }), [gravity]);
  useEffect(() => void worker.postMessage({
    op: 'setIterations',
    props: iterations
  }), [iterations]);
  useEffect(() => void worker.postMessage({
    op: 'setStep',
    props: step
  }), [step]);
  useEffect(() => void worker.postMessage({
    op: 'setTolerance',
    props: tolerance
  }), [tolerance]);
}

function decodeBase64(base64, enableUnicode) {
    var binaryString = atob(base64);
    if (enableUnicode) {
        var binaryView = new Uint8Array(binaryString.length);
        for (var i = 0, n = binaryString.length; i < n; ++i) {
            binaryView[i] = binaryString.charCodeAt(i);
        }
        return String.fromCharCode.apply(null, new Uint16Array(binaryView.buffer));
    }
    return binaryString;
}

function createURL(base64, sourcemapArg, enableUnicodeArg) {
    var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;
    var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;
    var source = decodeBase64(base64, enableUnicode);
    var start = source.indexOf('\n', 10) + 1;
    var body = source.substring(start) + (sourcemap ? '\/\/# sourceMappingURL=' + sourcemap : '');
    var blob = new Blob([body], { type: 'application/javascript' });
    return URL.createObjectURL(blob);
}

function createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {
    var url;
    return function WorkerFactory(options) {
        url = url || createURL(base64, sourcemapArg, enableUnicodeArg);
        return new Worker(url, options);
    };
}

var WorkerFactory = createBase64WorkerFactory('Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogUmVjb3JkcyB3aGF0IG9iamVjdHMgYXJlIGNvbGxpZGluZyB3aXRoIGVhY2ggb3RoZXIKICAgKi8KICAvKioKICAgKiBBIDN4MyBtYXRyaXguCiAgICogQXV0aG9yZWQgYnkge0BsaW5rIGh0dHA6Ly9naXRodWIuY29tL3NjaHRlcHBlLyBzY2h0ZXBwZX0KICAgKi8KCgogIGNsYXNzIE1hdDMgewogICAgLyoqCiAgICAgKiBBIHZlY3RvciBvZiBsZW5ndGggOSwgY29udGFpbmluZyBhbGwgbWF0cml4IGVsZW1lbnRzLgogICAgICovCgogICAgLyoqCiAgICAgKiBAcGFyYW0gZWxlbWVudHMgQSB2ZWN0b3Igb2YgbGVuZ3RoIDksIGNvbnRhaW5pbmcgYWxsIG1hdHJpeCBlbGVtZW50cy4KICAgICAqLwogICAgY29uc3RydWN0b3IoZWxlbWVudHMpIHsKICAgICAgaWYgKGVsZW1lbnRzID09PSB2b2lkIDApIHsKICAgICAgICBlbGVtZW50cyA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTsKICAgICAgfQoKICAgICAgdGhpcy5lbGVtZW50cyA9IHZvaWQgMDsKICAgICAgdGhpcy5lbGVtZW50cyA9IGVsZW1lbnRzOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBtYXRyaXggdG8gaWRlbnRpdHkKICAgICAqIEB0b2RvIFNob3VsZCBwZXJoYXBzIGJlIHJlbmFtZWQgdG8gYHNldElkZW50aXR5KClgIHRvIGJlIG1vcmUgY2xlYXIuCiAgICAgKiBAdG9kbyBDcmVhdGUgYW5vdGhlciBmdW5jdGlvbiB0aGF0IGltbWVkaWF0ZWx5IGNyZWF0ZXMgYW4gaWRlbnRpdHkgbWF0cml4IGVnLiBgZXllKClgCiAgICAgKi8KCgogICAgaWRlbnRpdHkoKSB7CiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBlWzBdID0gMTsKICAgICAgZVsxXSA9IDA7CiAgICAgIGVbMl0gPSAwOwogICAgICBlWzNdID0gMDsKICAgICAgZVs0XSA9IDE7CiAgICAgIGVbNV0gPSAwOwogICAgICBlWzZdID0gMDsKICAgICAgZVs3XSA9IDA7CiAgICAgIGVbOF0gPSAxOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgYWxsIGVsZW1lbnRzIHRvIHplcm8KICAgICAqLwoKCiAgICBzZXRaZXJvKCkgewogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgZVswXSA9IDA7CiAgICAgIGVbMV0gPSAwOwogICAgICBlWzJdID0gMDsKICAgICAgZVszXSA9IDA7CiAgICAgIGVbNF0gPSAwOwogICAgICBlWzVdID0gMDsKICAgICAgZVs2XSA9IDA7CiAgICAgIGVbN10gPSAwOwogICAgICBlWzhdID0gMDsKICAgIH0KICAgIC8qKgogICAgICogU2V0cyB0aGUgbWF0cml4IGRpYWdvbmFsIGVsZW1lbnRzIGZyb20gYSBWZWMzCiAgICAgKi8KCgogICAgc2V0VHJhY2UodmVjdG9yKSB7CiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBlWzBdID0gdmVjdG9yLng7CiAgICAgIGVbNF0gPSB2ZWN0b3IueTsKICAgICAgZVs4XSA9IHZlY3Rvci56OwogICAgfQogICAgLyoqCiAgICAgKiBHZXRzIHRoZSBtYXRyaXggZGlhZ29uYWwgZWxlbWVudHMKICAgICAqLwoKCiAgICBnZXRUcmFjZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIHRhcmdldC54ID0gZVswXTsKICAgICAgdGFyZ2V0LnkgPSBlWzRdOwogICAgICB0YXJnZXQueiA9IGVbOF07CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIE1hdHJpeC1WZWN0b3IgbXVsdGlwbGljYXRpb24KICAgICAqIEBwYXJhbSB2IFRoZSB2ZWN0b3IgdG8gbXVsdGlwbHkgd2l0aAogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCwgdGFyZ2V0IHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICB2bXVsdCh2LCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGNvbnN0IHggPSB2Lng7CiAgICAgIGNvbnN0IHkgPSB2Lnk7CiAgICAgIGNvbnN0IHogPSB2Lno7CiAgICAgIHRhcmdldC54ID0gZVswXSAqIHggKyBlWzFdICogeSArIGVbMl0gKiB6OwogICAgICB0YXJnZXQueSA9IGVbM10gKiB4ICsgZVs0XSAqIHkgKyBlWzVdICogejsKICAgICAgdGFyZ2V0LnogPSBlWzZdICogeCArIGVbN10gKiB5ICsgZVs4XSAqIHo7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIE1hdHJpeC1zY2FsYXIgbXVsdGlwbGljYXRpb24KICAgICAqLwoKCiAgICBzbXVsdChzKSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5lbGVtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMuZWxlbWVudHNbaV0gKj0gczsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBNYXRyaXggbXVsdGlwbGljYXRpb24KICAgICAqIEBwYXJhbSBtYXRyaXggTWF0cml4IHRvIG11bHRpcGx5IHdpdGggZnJvbSBsZWZ0IHNpZGUuCiAgICAgKi8KCgogICAgbW11bHQobWF0cml4LCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IE1hdDMoKTsKICAgICAgfQoKICAgICAgY29uc3QgQSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGNvbnN0IEIgPSBtYXRyaXguZWxlbWVudHM7CiAgICAgIGNvbnN0IFQgPSB0YXJnZXQuZWxlbWVudHM7CiAgICAgIGNvbnN0IGExMSA9IEFbMF0sCiAgICAgICAgICAgIGExMiA9IEFbMV0sCiAgICAgICAgICAgIGExMyA9IEFbMl0sCiAgICAgICAgICAgIGEyMSA9IEFbM10sCiAgICAgICAgICAgIGEyMiA9IEFbNF0sCiAgICAgICAgICAgIGEyMyA9IEFbNV0sCiAgICAgICAgICAgIGEzMSA9IEFbNl0sCiAgICAgICAgICAgIGEzMiA9IEFbN10sCiAgICAgICAgICAgIGEzMyA9IEFbOF07CiAgICAgIGNvbnN0IGIxMSA9IEJbMF0sCiAgICAgICAgICAgIGIxMiA9IEJbMV0sCiAgICAgICAgICAgIGIxMyA9IEJbMl0sCiAgICAgICAgICAgIGIyMSA9IEJbM10sCiAgICAgICAgICAgIGIyMiA9IEJbNF0sCiAgICAgICAgICAgIGIyMyA9IEJbNV0sCiAgICAgICAgICAgIGIzMSA9IEJbNl0sCiAgICAgICAgICAgIGIzMiA9IEJbN10sCiAgICAgICAgICAgIGIzMyA9IEJbOF07CiAgICAgIFRbMF0gPSBhMTEgKiBiMTEgKyBhMTIgKiBiMjEgKyBhMTMgKiBiMzE7CiAgICAgIFRbMV0gPSBhMTEgKiBiMTIgKyBhMTIgKiBiMjIgKyBhMTMgKiBiMzI7CiAgICAgIFRbMl0gPSBhMTEgKiBiMTMgKyBhMTIgKiBiMjMgKyBhMTMgKiBiMzM7CiAgICAgIFRbM10gPSBhMjEgKiBiMTEgKyBhMjIgKiBiMjEgKyBhMjMgKiBiMzE7CiAgICAgIFRbNF0gPSBhMjEgKiBiMTIgKyBhMjIgKiBiMjIgKyBhMjMgKiBiMzI7CiAgICAgIFRbNV0gPSBhMjEgKiBiMTMgKyBhMjIgKiBiMjMgKyBhMjMgKiBiMzM7CiAgICAgIFRbNl0gPSBhMzEgKiBiMTEgKyBhMzIgKiBiMjEgKyBhMzMgKiBiMzE7CiAgICAgIFRbN10gPSBhMzEgKiBiMTIgKyBhMzIgKiBiMjIgKyBhMzMgKiBiMzI7CiAgICAgIFRbOF0gPSBhMzEgKiBiMTMgKyBhMzIgKiBiMjMgKyBhMzMgKiBiMzM7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFNjYWxlIGVhY2ggY29sdW1uIG9mIHRoZSBtYXRyaXgKICAgICAqLwoKCiAgICBzY2FsZSh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgTWF0MygpOwogICAgICB9CgogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgY29uc3QgdCA9IHRhcmdldC5lbGVtZW50czsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSAzOyBpKyspIHsKICAgICAgICB0WzMgKiBpICsgMF0gPSB2ZWN0b3IueCAqIGVbMyAqIGkgKyAwXTsKICAgICAgICB0WzMgKiBpICsgMV0gPSB2ZWN0b3IueSAqIGVbMyAqIGkgKyAxXTsKICAgICAgICB0WzMgKiBpICsgMl0gPSB2ZWN0b3IueiAqIGVbMyAqIGkgKyAyXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU29sdmUgQXg9YgogICAgICogQHBhcmFtIGIgVGhlIHJpZ2h0IGhhbmQgc2lkZQogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbC4gVGFyZ2V0IHZlY3RvciB0byBzYXZlIGluLgogICAgICogQHJldHVybiBUaGUgc29sdXRpb24geAogICAgICogQHRvZG8gc2hvdWxkIHJldXNlIGFycmF5cwogICAgICovCgoKICAgIHNvbHZlKGIsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICAvLyBDb25zdHJ1Y3QgZXF1YXRpb25zCiAgICAgIGNvbnN0IG5yID0gMzsgLy8gbnVtIHJvd3MKCiAgICAgIGNvbnN0IG5jID0gNDsgLy8gbnVtIGNvbHMKCiAgICAgIGNvbnN0IGVxbnMgPSBbXTsKICAgICAgbGV0IGk7CiAgICAgIGxldCBqOwoKICAgICAgZm9yIChpID0gMDsgaSA8IG5yICogbmM7IGkrKykgewogICAgICAgIGVxbnMucHVzaCgwKTsKICAgICAgfQoKICAgICAgZm9yIChpID0gMDsgaSA8IDM7IGkrKykgewogICAgICAgIGZvciAoaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIGVxbnNbaSArIG5jICogal0gPSB0aGlzLmVsZW1lbnRzW2kgKyAzICogal07CiAgICAgICAgfQogICAgICB9CgogICAgICBlcW5zWzMgKyA0ICogMF0gPSBiLng7CiAgICAgIGVxbnNbMyArIDQgKiAxXSA9IGIueTsKICAgICAgZXFuc1szICsgNCAqIDJdID0gYi56OyAvLyBDb21wdXRlIHJpZ2h0IHVwcGVyIHRyaWFuZ3VsYXIgdmVyc2lvbiBvZiB0aGUgbWF0cml4IC0gR2F1c3MgZWxpbWluYXRpb24KCiAgICAgIGxldCBuID0gMzsKICAgICAgY29uc3QgayA9IG47CiAgICAgIGxldCBucDsKICAgICAgY29uc3Qga3AgPSA0OyAvLyBudW0gcm93cwoKICAgICAgbGV0IHA7CgogICAgICBkbyB7CiAgICAgICAgaSA9IGsgLSBuOwoKICAgICAgICBpZiAoZXFuc1tpICsgbmMgKiBpXSA9PT0gMCkgewogICAgICAgICAgLy8gdGhlIHBpdm90IGlzIG51bGwsIHN3YXAgbGluZXMKICAgICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7CiAgICAgICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGpdICE9PSAwKSB7CiAgICAgICAgICAgICAgbnAgPSBrcDsKCiAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgLy8gZG8gbGlnbmUoIGkgKSA9IGxpZ25lKCBpICkgKyBsaWduZSggayApCiAgICAgICAgICAgICAgICBwID0ga3AgLSBucDsKICAgICAgICAgICAgICAgIGVxbnNbcCArIG5jICogaV0gKz0gZXFuc1twICsgbmMgKiBqXTsKICAgICAgICAgICAgICB9IHdoaWxlICgtLW5wKTsKCiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldICE9PSAwKSB7CiAgICAgICAgICBmb3IgKGogPSBpICsgMTsgaiA8IGs7IGorKykgewogICAgICAgICAgICBjb25zdCBtdWx0aXBsaWVyID0gZXFuc1tpICsgbmMgKiBqXSAvIGVxbnNbaSArIG5jICogaV07CiAgICAgICAgICAgIG5wID0ga3A7CgogICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgLy8gZG8gbGlnbmUoIGsgKSA9IGxpZ25lKCBrICkgLSBtdWx0aXBsaWVyICogbGlnbmUoIGkgKQogICAgICAgICAgICAgIHAgPSBrcCAtIG5wOwogICAgICAgICAgICAgIGVxbnNbcCArIG5jICogal0gPSBwIDw9IGkgPyAwIDogZXFuc1twICsgbmMgKiBqXSAtIGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyOwogICAgICAgICAgICB9IHdoaWxlICgtLW5wKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gd2hpbGUgKC0tbik7IC8vIEdldCB0aGUgc29sdXRpb24KCgogICAgICB0YXJnZXQueiA9IGVxbnNbMiAqIG5jICsgM10gLyBlcW5zWzIgKiBuYyArIDJdOwogICAgICB0YXJnZXQueSA9IChlcW5zWzEgKiBuYyArIDNdIC0gZXFuc1sxICogbmMgKyAyXSAqIHRhcmdldC56KSAvIGVxbnNbMSAqIG5jICsgMV07CiAgICAgIHRhcmdldC54ID0gKGVxbnNbMCAqIG5jICsgM10gLSBlcW5zWzAgKiBuYyArIDJdICogdGFyZ2V0LnogLSBlcW5zWzAgKiBuYyArIDFdICogdGFyZ2V0LnkpIC8gZXFuc1swICogbmMgKyAwXTsKCiAgICAgIGlmIChpc05hTih0YXJnZXQueCkgfHwgaXNOYU4odGFyZ2V0LnkpIHx8IGlzTmFOKHRhcmdldC56KSB8fCB0YXJnZXQueCA9PT0gSW5maW5pdHkgfHwgdGFyZ2V0LnkgPT09IEluZmluaXR5IHx8IHRhcmdldC56ID09PSBJbmZpbml0eSkgewogICAgICAgIHRocm93ICJDb3VsZCBub3Qgc29sdmUgZXF1YXRpb24hIEdvdCB4PVsiICsgdGFyZ2V0LnRvU3RyaW5nKCkgKyAiXSwgYj1bIiArIGIudG9TdHJpbmcoKSArICJdLCBBPVsiICsgdGhpcy50b1N0cmluZygpICsgIl0iOwogICAgICB9CgogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYW4gZWxlbWVudCBpbiB0aGUgbWF0cml4IGJ5IGluZGV4LiBJbmRleCBzdGFydHMgYXQgMCwgbm90IDEhISEKICAgICAqIEBwYXJhbSB2YWx1ZSBJZiBwcm92aWRlZCwgdGhlIG1hdHJpeCBlbGVtZW50IHdpbGwgYmUgc2V0IHRvIHRoaXMgdmFsdWUuCiAgICAgKi8KCgogICAgZShyb3csIGNvbHVtbiwgdmFsdWUpIHsKICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50c1tjb2x1bW4gKyAzICogcm93XTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBTZXQgdmFsdWUKICAgICAgICB0aGlzLmVsZW1lbnRzW2NvbHVtbiArIDMgKiByb3ddID0gdmFsdWU7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ29weSBhbm90aGVyIG1hdHJpeCBpbnRvIHRoaXMgbWF0cml4IG9iamVjdC4KICAgICAqLwoKCiAgICBjb3B5KG1hdHJpeCkgewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hdHJpeC5lbGVtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgIHRoaXMuZWxlbWVudHNbaV0gPSBtYXRyaXguZWxlbWVudHNbaV07CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBtYXRyaXguCiAgICAgKi8KCgogICAgdG9TdHJpbmcoKSB7CiAgICAgIGxldCByID0gJyc7CiAgICAgIGNvbnN0IHNlcCA9ICcsJzsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgOTsgaSsrKSB7CiAgICAgICAgciArPSB0aGlzLmVsZW1lbnRzW2ldICsgc2VwOwogICAgICB9CgogICAgICByZXR1cm4gcjsKICAgIH0KICAgIC8qKgogICAgICogcmV2ZXJzZSB0aGUgbWF0cml4CiAgICAgKiBAcGFyYW0gdGFyZ2V0IFRhcmdldCBtYXRyaXggdG8gc2F2ZSBpbi4KICAgICAqIEByZXR1cm4gVGhlIHNvbHV0aW9uIHgKICAgICAqLwoKCiAgICByZXZlcnNlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgTWF0MygpOwogICAgICB9CgogICAgICAvLyBDb25zdHJ1Y3QgZXF1YXRpb25zCiAgICAgIGNvbnN0IG5yID0gMzsgLy8gbnVtIHJvd3MKCiAgICAgIGNvbnN0IG5jID0gNjsgLy8gbnVtIGNvbHMKCiAgICAgIGNvbnN0IGVxbnMgPSByZXZlcnNlX2VxbnM7CiAgICAgIGxldCBpOwogICAgICBsZXQgajsKCiAgICAgIGZvciAoaSA9IDA7IGkgPCAzOyBpKyspIHsKICAgICAgICBmb3IgKGogPSAwOyBqIDwgMzsgaisrKSB7CiAgICAgICAgICBlcW5zW2kgKyBuYyAqIGpdID0gdGhpcy5lbGVtZW50c1tpICsgMyAqIGpdOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZXFuc1szICsgNiAqIDBdID0gMTsKICAgICAgZXFuc1szICsgNiAqIDFdID0gMDsKICAgICAgZXFuc1szICsgNiAqIDJdID0gMDsKICAgICAgZXFuc1s0ICsgNiAqIDBdID0gMDsKICAgICAgZXFuc1s0ICsgNiAqIDFdID0gMTsKICAgICAgZXFuc1s0ICsgNiAqIDJdID0gMDsKICAgICAgZXFuc1s1ICsgNiAqIDBdID0gMDsKICAgICAgZXFuc1s1ICsgNiAqIDFdID0gMDsKICAgICAgZXFuc1s1ICsgNiAqIDJdID0gMTsgLy8gQ29tcHV0ZSByaWdodCB1cHBlciB0cmlhbmd1bGFyIHZlcnNpb24gb2YgdGhlIG1hdHJpeCAtIEdhdXNzIGVsaW1pbmF0aW9uCgogICAgICBsZXQgbiA9IDM7CiAgICAgIGNvbnN0IGsgPSBuOwogICAgICBsZXQgbnA7CiAgICAgIGNvbnN0IGtwID0gbmM7IC8vIG51bSByb3dzCgogICAgICBsZXQgcDsKCiAgICAgIGRvIHsKICAgICAgICBpID0gayAtIG47CgogICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldID09PSAwKSB7CiAgICAgICAgICAvLyB0aGUgcGl2b3QgaXMgbnVsbCwgc3dhcCBsaW5lcwogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgaWYgKGVxbnNbaSArIG5jICogal0gIT09IDApIHsKICAgICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAvLyBkbyBsaW5lKCBpICkgPSBsaW5lKCBpICkgKyBsaW5lKCBrICkKICAgICAgICAgICAgICAgIHAgPSBrcCAtIG5wOwogICAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBpXSArPSBlcW5zW3AgKyBuYyAqIGpdOwogICAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gIT09IDApIHsKICAgICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTsKICAgICAgICAgICAgbnAgPSBrcDsKCiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAvLyBkbyBsaW5lKCBrICkgPSBsaW5lKCBrICkgLSBtdWx0aXBsaWVyICogbGluZSggaSApCiAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBqXSA9IHAgPD0gaSA/IDAgOiBlcW5zW3AgKyBuYyAqIGpdIC0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSB3aGlsZSAoLS1uKTsgLy8gZWxpbWluYXRlIHRoZSB1cHBlciBsZWZ0IHRyaWFuZ2xlIG9mIHRoZSBtYXRyaXgKCgogICAgICBpID0gMjsKCiAgICAgIGRvIHsKICAgICAgICBqID0gaSAtIDE7CgogICAgICAgIGRvIHsKICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTsKICAgICAgICAgIG5wID0gbmM7CgogICAgICAgICAgZG8gewogICAgICAgICAgICBwID0gbmMgLSBucDsKICAgICAgICAgICAgZXFuc1twICsgbmMgKiBqXSA9IGVxbnNbcCArIG5jICogal0gLSBlcW5zW3AgKyBuYyAqIGldICogbXVsdGlwbGllcjsKICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICAgIH0gd2hpbGUgKGotLSk7CiAgICAgIH0gd2hpbGUgKC0taSk7IC8vIG9wZXJhdGlvbnMgb24gdGhlIGRpYWdvbmFsCgoKICAgICAgaSA9IDI7CgogICAgICBkbyB7CiAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IDEgLyBlcW5zW2kgKyBuYyAqIGldOwogICAgICAgIG5wID0gbmM7CgogICAgICAgIGRvIHsKICAgICAgICAgIHAgPSBuYyAtIG5wOwogICAgICAgICAgZXFuc1twICsgbmMgKiBpXSA9IGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyOwogICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICB9IHdoaWxlIChpLS0pOwoKICAgICAgaSA9IDI7CgogICAgICBkbyB7CiAgICAgICAgaiA9IDI7CgogICAgICAgIGRvIHsKICAgICAgICAgIHAgPSBlcW5zW25yICsgaiArIG5jICogaV07CgogICAgICAgICAgaWYgKGlzTmFOKHApIHx8IHAgPT09IEluZmluaXR5KSB7CiAgICAgICAgICAgIHRocm93ICJDb3VsZCBub3QgcmV2ZXJzZSEgQT1bIiArIHRoaXMudG9TdHJpbmcoKSArICJdIjsKICAgICAgICAgIH0KCiAgICAgICAgICB0YXJnZXQuZShpLCBqLCBwKTsKICAgICAgICB9IHdoaWxlIChqLS0pOwogICAgICB9IHdoaWxlIChpLS0pOwoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBtYXRyaXggZnJvbSBhIHF1YXRlcmlvbgogICAgICovCgoKICAgIHNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocSkgewogICAgICBjb25zdCB4ID0gcS54OwogICAgICBjb25zdCB5ID0gcS55OwogICAgICBjb25zdCB6ID0gcS56OwogICAgICBjb25zdCB3ID0gcS53OwogICAgICBjb25zdCB4MiA9IHggKyB4OwogICAgICBjb25zdCB5MiA9IHkgKyB5OwogICAgICBjb25zdCB6MiA9IHogKyB6OwogICAgICBjb25zdCB4eCA9IHggKiB4MjsKICAgICAgY29uc3QgeHkgPSB4ICogeTI7CiAgICAgIGNvbnN0IHh6ID0geCAqIHoyOwogICAgICBjb25zdCB5eSA9IHkgKiB5MjsKICAgICAgY29uc3QgeXogPSB5ICogejI7CiAgICAgIGNvbnN0IHp6ID0geiAqIHoyOwogICAgICBjb25zdCB3eCA9IHcgKiB4MjsKICAgICAgY29uc3Qgd3kgPSB3ICogeTI7CiAgICAgIGNvbnN0IHd6ID0gdyAqIHoyOwogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgZVszICogMCArIDBdID0gMSAtICh5eSArIHp6KTsKICAgICAgZVszICogMCArIDFdID0geHkgLSB3ejsKICAgICAgZVszICogMCArIDJdID0geHogKyB3eTsKICAgICAgZVszICogMSArIDBdID0geHkgKyB3ejsKICAgICAgZVszICogMSArIDFdID0gMSAtICh4eCArIHp6KTsKICAgICAgZVszICogMSArIDJdID0geXogLSB3eDsKICAgICAgZVszICogMiArIDBdID0geHogLSB3eTsKICAgICAgZVszICogMiArIDFdID0geXogKyB3eDsKICAgICAgZVszICogMiArIDJdID0gMSAtICh4eCArIHl5KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zcG9zZSB0aGUgbWF0cml4CiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0LgogICAgICogQHJldHVybiBUaGUgdGFyZ2V0IE1hdDMsIG9yIGEgbmV3IE1hdDMgaWYgdGFyZ2V0IHdhcyBvbWl0dGVkLgogICAgICovCgoKICAgIHRyYW5zcG9zZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IE1hdDMoKTsKICAgICAgfQoKICAgICAgY29uc3QgTSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGNvbnN0IFQgPSB0YXJnZXQuZWxlbWVudHM7CiAgICAgIGxldCB0bXA7IC8vU2V0IGRpYWdvbmFscwoKICAgICAgVFswXSA9IE1bMF07CiAgICAgIFRbNF0gPSBNWzRdOwogICAgICBUWzhdID0gTVs4XTsKICAgICAgdG1wID0gTVsxXTsKICAgICAgVFsxXSA9IE1bM107CiAgICAgIFRbM10gPSB0bXA7CiAgICAgIHRtcCA9IE1bMl07CiAgICAgIFRbMl0gPSBNWzZdOwogICAgICBUWzZdID0gdG1wOwogICAgICB0bXAgPSBNWzVdOwogICAgICBUWzVdID0gTVs3XTsKICAgICAgVFs3XSA9IHRtcDsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgfQoKICBjb25zdCByZXZlcnNlX2VxbnMgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF07CiAgLyoqCiAgICogMy1kaW1lbnNpb25hbCB2ZWN0b3IKICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCB2ID0gbmV3IFZlYzMoMSwgMiwgMykKICAgKiAgICAgY29uc29sZS5sb2coJ3g9JyArIHYueCkgLy8geD0xCiAgICovCgogIGNsYXNzIFZlYzMgewogICAgY29uc3RydWN0b3IoeCwgeSwgeikgewogICAgICBpZiAoeCA9PT0gdm9pZCAwKSB7CiAgICAgICAgeCA9IDAuMDsKICAgICAgfQoKICAgICAgaWYgKHkgPT09IHZvaWQgMCkgewogICAgICAgIHkgPSAwLjA7CiAgICAgIH0KCiAgICAgIGlmICh6ID09PSB2b2lkIDApIHsKICAgICAgICB6ID0gMC4wOwogICAgICB9CgogICAgICB0aGlzLnggPSB2b2lkIDA7CiAgICAgIHRoaXMueSA9IHZvaWQgMDsKICAgICAgdGhpcy56ID0gdm9pZCAwOwogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3IgY3Jvc3MgcHJvZHVjdAogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbi4KICAgICAqLwoKCiAgICBjcm9zcyh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB2eCA9IHZlY3Rvci54OwogICAgICBjb25zdCB2eSA9IHZlY3Rvci55OwogICAgICBjb25zdCB2eiA9IHZlY3Rvci56OwogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICB0YXJnZXQueCA9IHkgKiB2eiAtIHogKiB2eTsKICAgICAgdGFyZ2V0LnkgPSB6ICogdnggLSB4ICogdno7CiAgICAgIHRhcmdldC56ID0geCAqIHZ5IC0geSAqIHZ4OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHZlY3RvcnMnIDMgZWxlbWVudHMKICAgICAqLwoKCiAgICBzZXQoeCwgeSwgeikgewogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogU2V0IGFsbCBjb21wb25lbnRzIG9mIHRoZSB2ZWN0b3IgdG8gemVyby4KICAgICAqLwoKCiAgICBzZXRaZXJvKCkgewogICAgICB0aGlzLnggPSB0aGlzLnkgPSB0aGlzLnogPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3IgYWRkaXRpb24KICAgICAqLwoKCiAgICB2YWRkKHZlY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQpIHsKICAgICAgICB0YXJnZXQueCA9IHZlY3Rvci54ICsgdGhpcy54OwogICAgICAgIHRhcmdldC55ID0gdmVjdG9yLnkgKyB0aGlzLnk7CiAgICAgICAgdGFyZ2V0LnogPSB2ZWN0b3IueiArIHRoaXMuejsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbmV3IFZlYzModGhpcy54ICsgdmVjdG9yLngsIHRoaXMueSArIHZlY3Rvci55LCB0aGlzLnogKyB2ZWN0b3Iueik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVmVjdG9yIHN1YnRyYWN0aW9uCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluLgogICAgICovCgoKICAgIHZzdWIodmVjdG9yLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCkgewogICAgICAgIHRhcmdldC54ID0gdGhpcy54IC0gdmVjdG9yLng7CiAgICAgICAgdGFyZ2V0LnkgPSB0aGlzLnkgLSB2ZWN0b3IueTsKICAgICAgICB0YXJnZXQueiA9IHRoaXMueiAtIHZlY3Rvci56OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBuZXcgVmVjMyh0aGlzLnggLSB2ZWN0b3IueCwgdGhpcy55IC0gdmVjdG9yLnksIHRoaXMueiAtIHZlY3Rvci56KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGNyb3NzIHByb2R1Y3QgbWF0cml4IGFfY3Jvc3MgZnJvbSBhIHZlY3Rvciwgc3VjaCB0aGF0IGEgeCBiID0gYV9jcm9zcyAqIGIgPSBjCiAgICAgKgogICAgICogU2VlIHtAbGluayBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci9UREJEMjQvVlQwNi9sZWN0dXJlcy9MZWN0dXJlNi5wZGYgVW1lw6UgVW5pdmVyc2l0eSBMZWN0dXJlfQogICAgICovCgoKICAgIGNyb3NzbWF0KCkgewogICAgICByZXR1cm4gbmV3IE1hdDMoWzAsIC10aGlzLnosIHRoaXMueSwgdGhpcy56LCAwLCAtdGhpcy54LCAtdGhpcy55LCB0aGlzLngsIDBdKTsKICAgIH0KICAgIC8qKgogICAgICogTm9ybWFsaXplIHRoZSB2ZWN0b3IuIE5vdGUgdGhhdCB0aGlzIGNoYW5nZXMgdGhlIHZhbHVlcyBpbiB0aGUgdmVjdG9yLgogICAgICAqIEByZXR1cm4gUmV0dXJucyB0aGUgbm9ybSBvZiB0aGUgdmVjdG9yCiAgICAgKi8KCgogICAgbm9ybWFsaXplKCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBuID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7CgogICAgICBpZiAobiA+IDAuMCkgewogICAgICAgIGNvbnN0IGludk4gPSAxIC8gbjsKICAgICAgICB0aGlzLnggKj0gaW52TjsKICAgICAgICB0aGlzLnkgKj0gaW52TjsKICAgICAgICB0aGlzLnogKj0gaW52TjsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBNYWtlIHNvbWV0aGluZyB1cAogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICB9CgogICAgICByZXR1cm4gbjsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSB2ZXJzaW9uIG9mIHRoaXMgdmVjdG9yIHRoYXQgaXMgb2YgbGVuZ3RoIDEuCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluCiAgICAgKiBAcmV0dXJuIFJldHVybnMgdGhlIHVuaXQgdmVjdG9yCiAgICAgKi8KCgogICAgdW5pdCh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgbGV0IG5pbnYgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKCiAgICAgIGlmIChuaW52ID4gMC4wKSB7CiAgICAgICAgbmludiA9IDEuMCAvIG5pbnY7CiAgICAgICAgdGFyZ2V0LnggPSB4ICogbmludjsKICAgICAgICB0YXJnZXQueSA9IHkgKiBuaW52OwogICAgICAgIHRhcmdldC56ID0geiAqIG5pbnY7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGFyZ2V0LnggPSAxOwogICAgICAgIHRhcmdldC55ID0gMDsKICAgICAgICB0YXJnZXQueiA9IDA7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgbGVuZ3RoIG9mIHRoZSB2ZWN0b3IKICAgICAqLwoKCiAgICBsZW5ndGgoKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBzcXVhcmVkIGxlbmd0aCBvZiB0aGUgdmVjdG9yLgogICAgICovCgoKICAgIGxlbmd0aFNxdWFyZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmRvdCh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGRpc3RhbmNlIGZyb20gdGhpcyBwb2ludCB0byBhbm90aGVyIHBvaW50CiAgICAgKi8KCgogICAgZGlzdGFuY2VUbyhwKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIGNvbnN0IHB4ID0gcC54OwogICAgICBjb25zdCBweSA9IHAueTsKICAgICAgY29uc3QgcHogPSBwLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHNxdWFyZWQgZGlzdGFuY2UgZnJvbSB0aGlzIHBvaW50IHRvIGFub3RoZXIgcG9pbnQKICAgICAqLwoKCiAgICBkaXN0YW5jZVNxdWFyZWQocCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBweCA9IHAueDsKICAgICAgY29uc3QgcHkgPSBwLnk7CiAgICAgIGNvbnN0IHB6ID0gcC56OwogICAgICByZXR1cm4gKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSBhbGwgdGhlIGNvbXBvbmVudHMgb2YgdGhlIHZlY3RvciB3aXRoIGEgc2NhbGFyLgogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBzY2FsZShzY2FsYXIsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICB0YXJnZXQueCA9IHNjYWxhciAqIHg7CiAgICAgIHRhcmdldC55ID0gc2NhbGFyICogeTsKICAgICAgdGFyZ2V0LnogPSBzY2FsYXIgKiB6OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgdmVjdG9yIHdpdGggYW4gb3RoZXIgdmVjdG9yLCBjb21wb25lbnQtd2lzZS4KICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHZlY3RvciB0byBzYXZlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgdm11bCh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IHZlY3Rvci54ICogdGhpcy54OwogICAgICB0YXJnZXQueSA9IHZlY3Rvci55ICogdGhpcy55OwogICAgICB0YXJnZXQueiA9IHZlY3Rvci56ICogdGhpcy56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTY2FsZSBhIHZlY3RvciBhbmQgYWRkIGl0IHRvIHRoaXMgdmVjdG9yLiBTYXZlIHRoZSByZXN1bHQgaW4gInRhcmdldCIuICh0YXJnZXQgPSB0aGlzICsgdmVjdG9yICogc2NhbGFyKQogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBhZGRTY2FsZWRWZWN0b3Ioc2NhbGFyLCB2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IHRoaXMueCArIHNjYWxhciAqIHZlY3Rvci54OwogICAgICB0YXJnZXQueSA9IHRoaXMueSArIHNjYWxhciAqIHZlY3Rvci55OwogICAgICB0YXJnZXQueiA9IHRoaXMueiArIHNjYWxhciAqIHZlY3Rvci56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgZG90IHByb2R1Y3QKICAgICAqIEBwYXJhbSB2ZWN0b3IKICAgICAqLwoKCiAgICBkb3QodmVjdG9yKSB7CiAgICAgIHJldHVybiB0aGlzLnggKiB2ZWN0b3IueCArIHRoaXMueSAqIHZlY3Rvci55ICsgdGhpcy56ICogdmVjdG9yLno7CiAgICB9CgogICAgaXNaZXJvKCkgewogICAgICByZXR1cm4gdGhpcy54ID09PSAwICYmIHRoaXMueSA9PT0gMCAmJiB0aGlzLnogPT09IDA7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgdGhlIHZlY3RvciBwb2ludCBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uLgogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbgogICAgICovCgoKICAgIG5lZ2F0ZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnggPSAtdGhpcy54OwogICAgICB0YXJnZXQueSA9IC10aGlzLnk7CiAgICAgIHRhcmdldC56ID0gLXRoaXMuejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0d28gYXJ0aWZpY2lhbCB0YW5nZW50cyB0byB0aGUgdmVjdG9yCiAgICAgKiBAcGFyYW0gdDEgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBmaXJzdCB0YW5nZW50IGluCiAgICAgKiBAcGFyYW0gdDIgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBzZWNvbmQgdGFuZ2VudCBpbgogICAgICovCgoKICAgIHRhbmdlbnRzKHQxLCB0MikgewogICAgICBjb25zdCBub3JtID0gdGhpcy5sZW5ndGgoKTsKCiAgICAgIGlmIChub3JtID4gMC4wKSB7CiAgICAgICAgY29uc3QgbiA9IFZlYzNfdGFuZ2VudHNfbjsKICAgICAgICBjb25zdCBpbm9ybSA9IDEgLyBub3JtOwogICAgICAgIG4uc2V0KHRoaXMueCAqIGlub3JtLCB0aGlzLnkgKiBpbm9ybSwgdGhpcy56ICogaW5vcm0pOwogICAgICAgIGNvbnN0IHJhbmRWZWMgPSBWZWMzX3RhbmdlbnRzX3JhbmRWZWM7CgogICAgICAgIGlmIChNYXRoLmFicyhuLngpIDwgMC45KSB7CiAgICAgICAgICByYW5kVmVjLnNldCgxLCAwLCAwKTsKICAgICAgICAgIG4uY3Jvc3MocmFuZFZlYywgdDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByYW5kVmVjLnNldCgwLCAxLCAwKTsKICAgICAgICAgIG4uY3Jvc3MocmFuZFZlYywgdDEpOwogICAgICAgIH0KCiAgICAgICAgbi5jcm9zcyh0MSwgdDIpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRoZSBub3JtYWwgbGVuZ3RoIGlzIHplcm8sIG1ha2Ugc29tZXRoaW5nIHVwCiAgICAgICAgdDEuc2V0KDEsIDAsIDApOwogICAgICAgIHQyLnNldCgwLCAxLCAwKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0byBhIG1vcmUgcmVhZGFibGUgZm9ybWF0CiAgICAgKi8KCgogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiB0aGlzLnggKyAiLCIgKyB0aGlzLnkgKyAiLCIgKyB0aGlzLno7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnRzIHRvIGFuIGFycmF5CiAgICAgKi8KCgogICAgdG9BcnJheSgpIHsKICAgICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueSwgdGhpcy56XTsKICAgIH0KICAgIC8qKgogICAgICogQ29waWVzIHZhbHVlIG9mIHNvdXJjZSB0byB0aGlzIHZlY3Rvci4KICAgICAqLwoKCiAgICBjb3B5KHZlY3RvcikgewogICAgICB0aGlzLnggPSB2ZWN0b3IueDsKICAgICAgdGhpcy55ID0gdmVjdG9yLnk7CiAgICAgIHRoaXMueiA9IHZlY3Rvci56OwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogRG8gYSBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byB2ZWN0b3JzCiAgICAgKiBAcGFyYW0gdCBBIG51bWJlciBiZXR3ZWVuIDAgYW5kIDEuIDAgd2lsbCBtYWtlIHRoaXMgZnVuY3Rpb24gcmV0dXJuIHUsIGFuZCAxIHdpbGwgbWFrZSBpdCByZXR1cm4gdi4gTnVtYmVycyBpbiBiZXR3ZWVuIHdpbGwgZ2VuZXJhdGUgYSB2ZWN0b3IgaW4gYmV0d2VlbiB0aGVtLgogICAgICovCgoKICAgIGxlcnAodmVjdG9yLCB0LCB0YXJnZXQpIHsKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgdGFyZ2V0LnggPSB4ICsgKHZlY3Rvci54IC0geCkgKiB0OwogICAgICB0YXJnZXQueSA9IHkgKyAodmVjdG9yLnkgLSB5KSAqIHQ7CiAgICAgIHRhcmdldC56ID0geiArICh2ZWN0b3IueiAtIHopICogdDsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYSB2ZWN0b3IgZXF1YWxzIGlzIGFsbW9zdCBlcXVhbCB0byBhbm90aGVyIG9uZS4KICAgICAqLwoKCiAgICBhbG1vc3RFcXVhbHModmVjdG9yLCBwcmVjaXNpb24pIHsKICAgICAgaWYgKHByZWNpc2lvbiA9PT0gdm9pZCAwKSB7CiAgICAgICAgcHJlY2lzaW9uID0gMWUtNjsKICAgICAgfQoKICAgICAgaWYgKE1hdGguYWJzKHRoaXMueCAtIHZlY3Rvci54KSA+IHByZWNpc2lvbiB8fCBNYXRoLmFicyh0aGlzLnkgLSB2ZWN0b3IueSkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy56IC0gdmVjdG9yLnopID4gcHJlY2lzaW9uKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYSB2ZWN0b3IgaXMgYWxtb3N0IHplcm8KICAgICAqLwoKCiAgICBhbG1vc3RaZXJvKHByZWNpc2lvbikgewogICAgICBpZiAocHJlY2lzaW9uID09PSB2b2lkIDApIHsKICAgICAgICBwcmVjaXNpb24gPSAxZS02OwogICAgICB9CgogICAgICBpZiAoTWF0aC5hYnModGhpcy54KSA+IHByZWNpc2lvbiB8fCBNYXRoLmFicyh0aGlzLnkpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueikgPiBwcmVjaXNpb24pIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgdmVjdG9yIGlzIGFudGktcGFyYWxsZWwgdG8gYW5vdGhlciB2ZWN0b3IuCiAgICAgKiBAcGFyYW0gcHJlY2lzaW9uIFNldCB0byB6ZXJvIGZvciBleGFjdCBjb21wYXJpc29ucwogICAgICovCgoKICAgIGlzQW50aXBhcmFsbGVsVG8odmVjdG9yLCBwcmVjaXNpb24pIHsKICAgICAgdGhpcy5uZWdhdGUoYW50aXBfbmVnKTsKICAgICAgcmV0dXJuIGFudGlwX25lZy5hbG1vc3RFcXVhbHModmVjdG9yLCBwcmVjaXNpb24pOwogICAgfQogICAgLyoqCiAgICAgKiBDbG9uZSB0aGUgdmVjdG9yCiAgICAgKi8KCgogICAgY2xvbmUoKSB7CiAgICAgIHJldHVybiBuZXcgVmVjMyh0aGlzLngsIHRoaXMueSwgdGhpcy56KTsKICAgIH0KCiAgfQoKICBWZWMzLlpFUk8gPSB2b2lkIDA7CiAgVmVjMy5VTklUX1ggPSB2b2lkIDA7CiAgVmVjMy5VTklUX1kgPSB2b2lkIDA7CiAgVmVjMy5VTklUX1ogPSB2b2lkIDA7CiAgVmVjMy5aRVJPID0gbmV3IFZlYzMoMCwgMCwgMCk7CiAgVmVjMy5VTklUX1ggPSBuZXcgVmVjMygxLCAwLCAwKTsKICBWZWMzLlVOSVRfWSA9IG5ldyBWZWMzKDAsIDEsIDApOwogIFZlYzMuVU5JVF9aID0gbmV3IFZlYzMoMCwgMCwgMSk7CiAgY29uc3QgVmVjM190YW5nZW50c19uID0gbmV3IFZlYzMoKTsKICBjb25zdCBWZWMzX3RhbmdlbnRzX3JhbmRWZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFudGlwX25lZyA9IG5ldyBWZWMzKCk7CiAgLyoqCiAgICogQXhpcyBhbGlnbmVkIGJvdW5kaW5nIGJveCBjbGFzcy4KICAgKi8KCiAgY2xhc3MgQUFCQiB7CiAgICAvKioKICAgICAqIFRoZSBsb3dlciBib3VuZCBvZiB0aGUgYm91bmRpbmcgYm94CiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSB1cHBlciBib3VuZCBvZiB0aGUgYm91bmRpbmcgYm94CiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5sb3dlckJvdW5kID0gdm9pZCAwOwogICAgICB0aGlzLnVwcGVyQm91bmQgPSB2b2lkIDA7CiAgICAgIHRoaXMubG93ZXJCb3VuZCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMudXBwZXJCb3VuZCA9IG5ldyBWZWMzKCk7CgogICAgICBpZiAob3B0aW9ucy5sb3dlckJvdW5kKSB7CiAgICAgICAgdGhpcy5sb3dlckJvdW5kLmNvcHkob3B0aW9ucy5sb3dlckJvdW5kKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMudXBwZXJCb3VuZCkgewogICAgICAgIHRoaXMudXBwZXJCb3VuZC5jb3B5KG9wdGlvbnMudXBwZXJCb3VuZCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBBQUJCIGJvdW5kcyBmcm9tIGEgc2V0IG9mIHBvaW50cy4KICAgICAqIEBwYXJhbSBwb2ludHMgQW4gYXJyYXkgb2YgVmVjMydzLgogICAgICogQHJldHVybiBUaGUgc2VsZiBvYmplY3QKICAgICAqLwoKCiAgICBzZXRGcm9tUG9pbnRzKHBvaW50cywgcG9zaXRpb24sIHF1YXRlcm5pb24sIHNraW5TaXplKSB7CiAgICAgIGNvbnN0IGwgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IHEgPSBxdWF0ZXJuaW9uOyAvLyBTZXQgdG8gdGhlIGZpcnN0IHBvaW50CgogICAgICBsLmNvcHkocG9pbnRzWzBdKTsKCiAgICAgIGlmIChxKSB7CiAgICAgICAgcS52bXVsdChsLCBsKTsKICAgICAgfQoKICAgICAgdS5jb3B5KGwpOwoKICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBsZXQgcCA9IHBvaW50c1tpXTsKCiAgICAgICAgaWYgKHEpIHsKICAgICAgICAgIHEudm11bHQocCwgdG1wJDEpOwogICAgICAgICAgcCA9IHRtcCQxOwogICAgICAgIH0KCiAgICAgICAgaWYgKHAueCA+IHUueCkgewogICAgICAgICAgdS54ID0gcC54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHAueCA8IGwueCkgewogICAgICAgICAgbC54ID0gcC54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHAueSA+IHUueSkgewogICAgICAgICAgdS55ID0gcC55OwogICAgICAgIH0KCiAgICAgICAgaWYgKHAueSA8IGwueSkgewogICAgICAgICAgbC55ID0gcC55OwogICAgICAgIH0KCiAgICAgICAgaWYgKHAueiA+IHUueikgewogICAgICAgICAgdS56ID0gcC56OwogICAgICAgIH0KCiAgICAgICAgaWYgKHAueiA8IGwueikgewogICAgICAgICAgbC56ID0gcC56OwogICAgICAgIH0KICAgICAgfSAvLyBBZGQgb2Zmc2V0CgoKICAgICAgaWYgKHBvc2l0aW9uKSB7CiAgICAgICAgcG9zaXRpb24udmFkZChsLCBsKTsKICAgICAgICBwb3NpdGlvbi52YWRkKHUsIHUpOwogICAgICB9CgogICAgICBpZiAoc2tpblNpemUpIHsKICAgICAgICBsLnggLT0gc2tpblNpemU7CiAgICAgICAgbC55IC09IHNraW5TaXplOwogICAgICAgIGwueiAtPSBza2luU2l6ZTsKICAgICAgICB1LnggKz0gc2tpblNpemU7CiAgICAgICAgdS55ICs9IHNraW5TaXplOwogICAgICAgIHUueiArPSBza2luU2l6ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvcHkgYm91bmRzIGZyb20gYW4gQUFCQiB0byB0aGlzIEFBQkIKICAgICAqIEBwYXJhbSBhYWJiIFNvdXJjZSB0byBjb3B5IGZyb20KICAgICAqIEByZXR1cm4gVGhlIHRoaXMgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5CiAgICAgKi8KCgogICAgY29weShhYWJiKSB7CiAgICAgIHRoaXMubG93ZXJCb3VuZC5jb3B5KGFhYmIubG93ZXJCb3VuZCk7CiAgICAgIHRoaXMudXBwZXJCb3VuZC5jb3B5KGFhYmIudXBwZXJCb3VuZCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBDbG9uZSBhbiBBQUJCCiAgICAgKi8KCgogICAgY2xvbmUoKSB7CiAgICAgIHJldHVybiBuZXcgQUFCQigpLmNvcHkodGhpcyk7CiAgICB9CiAgICAvKioKICAgICAqIEV4dGVuZCB0aGlzIEFBQkIgc28gdGhhdCBpdCBjb3ZlcnMgdGhlIGdpdmVuIEFBQkIgdG9vLgogICAgICovCgoKICAgIGV4dGVuZChhYWJiKSB7CiAgICAgIHRoaXMubG93ZXJCb3VuZC54ID0gTWF0aC5taW4odGhpcy5sb3dlckJvdW5kLngsIGFhYmIubG93ZXJCb3VuZC54KTsKICAgICAgdGhpcy51cHBlckJvdW5kLnggPSBNYXRoLm1heCh0aGlzLnVwcGVyQm91bmQueCwgYWFiYi51cHBlckJvdW5kLngpOwogICAgICB0aGlzLmxvd2VyQm91bmQueSA9IE1hdGgubWluKHRoaXMubG93ZXJCb3VuZC55LCBhYWJiLmxvd2VyQm91bmQueSk7CiAgICAgIHRoaXMudXBwZXJCb3VuZC55ID0gTWF0aC5tYXgodGhpcy51cHBlckJvdW5kLnksIGFhYmIudXBwZXJCb3VuZC55KTsKICAgICAgdGhpcy5sb3dlckJvdW5kLnogPSBNYXRoLm1pbih0aGlzLmxvd2VyQm91bmQueiwgYWFiYi5sb3dlckJvdW5kLnopOwogICAgICB0aGlzLnVwcGVyQm91bmQueiA9IE1hdGgubWF4KHRoaXMudXBwZXJCb3VuZC56LCBhYWJiLnVwcGVyQm91bmQueik7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gQUFCQiBvdmVybGFwcyB0aGlzIEFBQkIuCiAgICAgKi8KCgogICAgb3ZlcmxhcHMoYWFiYikgewogICAgICBjb25zdCBsMSA9IHRoaXMubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdTEgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IGwyID0gYWFiYi5sb3dlckJvdW5kOwogICAgICBjb25zdCB1MiA9IGFhYmIudXBwZXJCb3VuZDsgLy8gICAgICBsMiAgICAgICAgdTIKICAgICAgLy8gICAgICB8LS0tLS0tLS0tfAogICAgICAvLyB8LS0tLS0tLS18CiAgICAgIC8vIGwxICAgICAgIHUxCgogICAgICBjb25zdCBvdmVybGFwc1ggPSBsMi54IDw9IHUxLnggJiYgdTEueCA8PSB1Mi54IHx8IGwxLnggPD0gdTIueCAmJiB1Mi54IDw9IHUxLng7CiAgICAgIGNvbnN0IG92ZXJsYXBzWSA9IGwyLnkgPD0gdTEueSAmJiB1MS55IDw9IHUyLnkgfHwgbDEueSA8PSB1Mi55ICYmIHUyLnkgPD0gdTEueTsKICAgICAgY29uc3Qgb3ZlcmxhcHNaID0gbDIueiA8PSB1MS56ICYmIHUxLnogPD0gdTIueiB8fCBsMS56IDw9IHUyLnogJiYgdTIueiA8PSB1MS56OwogICAgICByZXR1cm4gb3ZlcmxhcHNYICYmIG92ZXJsYXBzWSAmJiBvdmVybGFwc1o7CiAgICB9IC8vIE1vc3RseSBmb3IgZGVidWdnaW5nCgoKICAgIHZvbHVtZSgpIHsKICAgICAgY29uc3QgbCA9IHRoaXMubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdSA9IHRoaXMudXBwZXJCb3VuZDsKICAgICAgcmV0dXJuICh1LnggLSBsLngpICogKHUueSAtIGwueSkgKiAodS56IC0gbC56KTsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBBQUJCIGlzIGZ1bGx5IGNvbnRhaW5lZCBpbiB0aGlzIEFBQkIuCiAgICAgKi8KCgogICAgY29udGFpbnMoYWFiYikgewogICAgICBjb25zdCBsMSA9IHRoaXMubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdTEgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IGwyID0gYWFiYi5sb3dlckJvdW5kOwogICAgICBjb25zdCB1MiA9IGFhYmIudXBwZXJCb3VuZDsgLy8gICAgICBsMiAgICAgICAgdTIKICAgICAgLy8gICAgICB8LS0tLS0tLS0tfAogICAgICAvLyB8LS0tLS0tLS0tLS0tLS0tfAogICAgICAvLyBsMSAgICAgICAgICAgICAgdTEKCiAgICAgIHJldHVybiBsMS54IDw9IGwyLnggJiYgdTEueCA+PSB1Mi54ICYmIGwxLnkgPD0gbDIueSAmJiB1MS55ID49IHUyLnkgJiYgbDEueiA8PSBsMi56ICYmIHUxLnogPj0gdTIuejsKICAgIH0KCiAgICBnZXRDb3JuZXJzKGEsIGIsIGMsIGQsIGUsIGYsIGcsIGgpIHsKICAgICAgY29uc3QgbCA9IHRoaXMubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdSA9IHRoaXMudXBwZXJCb3VuZDsKICAgICAgYS5jb3B5KGwpOwogICAgICBiLnNldCh1LngsIGwueSwgbC56KTsKICAgICAgYy5zZXQodS54LCB1LnksIGwueik7CiAgICAgIGQuc2V0KGwueCwgdS55LCB1LnopOwogICAgICBlLnNldCh1LngsIGwueSwgdS56KTsKICAgICAgZi5zZXQobC54LCB1LnksIGwueik7CiAgICAgIGcuc2V0KGwueCwgbC55LCB1LnopOwogICAgICBoLmNvcHkodSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgcmVwcmVzZW50YXRpb24gb2YgYW4gQUFCQiBpbiBhbm90aGVyIGZyYW1lLgogICAgICogQHJldHVybiBUaGUgInRhcmdldCIgQUFCQiBvYmplY3QuCiAgICAgKi8KCgogICAgdG9Mb2NhbEZyYW1lKGZyYW1lLCB0YXJnZXQpIHsKICAgICAgY29uc3QgY29ybmVycyA9IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzOwogICAgICBjb25zdCBhID0gY29ybmVyc1swXTsKICAgICAgY29uc3QgYiA9IGNvcm5lcnNbMV07CiAgICAgIGNvbnN0IGMgPSBjb3JuZXJzWzJdOwogICAgICBjb25zdCBkID0gY29ybmVyc1szXTsKICAgICAgY29uc3QgZSA9IGNvcm5lcnNbNF07CiAgICAgIGNvbnN0IGYgPSBjb3JuZXJzWzVdOwogICAgICBjb25zdCBnID0gY29ybmVyc1s2XTsKICAgICAgY29uc3QgaCA9IGNvcm5lcnNbN107IC8vIEdldCBjb3JuZXJzIGluIGN1cnJlbnQgZnJhbWUKCiAgICAgIHRoaXMuZ2V0Q29ybmVycyhhLCBiLCBjLCBkLCBlLCBmLCBnLCBoKTsgLy8gVHJhbnNmb3JtIHRoZW0gdG8gbmV3IGxvY2FsIGZyYW1lCgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gODsgaSsrKSB7CiAgICAgICAgY29uc3QgY29ybmVyID0gY29ybmVyc1tpXTsKICAgICAgICBmcmFtZS5wb2ludFRvTG9jYWwoY29ybmVyLCBjb3JuZXIpOwogICAgICB9CgogICAgICByZXR1cm4gdGFyZ2V0LnNldEZyb21Qb2ludHMoY29ybmVycyk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgcmVwcmVzZW50YXRpb24gb2YgYW4gQUFCQiBpbiB0aGUgZ2xvYmFsIGZyYW1lLgogICAgICogQHJldHVybiBUaGUgInRhcmdldCIgQUFCQiBvYmplY3QuCiAgICAgKi8KCgogICAgdG9Xb3JsZEZyYW1lKGZyYW1lLCB0YXJnZXQpIHsKICAgICAgY29uc3QgY29ybmVycyA9IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzOwogICAgICBjb25zdCBhID0gY29ybmVyc1swXTsKICAgICAgY29uc3QgYiA9IGNvcm5lcnNbMV07CiAgICAgIGNvbnN0IGMgPSBjb3JuZXJzWzJdOwogICAgICBjb25zdCBkID0gY29ybmVyc1szXTsKICAgICAgY29uc3QgZSA9IGNvcm5lcnNbNF07CiAgICAgIGNvbnN0IGYgPSBjb3JuZXJzWzVdOwogICAgICBjb25zdCBnID0gY29ybmVyc1s2XTsKICAgICAgY29uc3QgaCA9IGNvcm5lcnNbN107IC8vIEdldCBjb3JuZXJzIGluIGN1cnJlbnQgZnJhbWUKCiAgICAgIHRoaXMuZ2V0Q29ybmVycyhhLCBiLCBjLCBkLCBlLCBmLCBnLCBoKTsgLy8gVHJhbnNmb3JtIHRoZW0gdG8gbmV3IGxvY2FsIGZyYW1lCgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gODsgaSsrKSB7CiAgICAgICAgY29uc3QgY29ybmVyID0gY29ybmVyc1tpXTsKICAgICAgICBmcmFtZS5wb2ludFRvV29ybGQoY29ybmVyLCBjb3JuZXIpOwogICAgICB9CgogICAgICByZXR1cm4gdGFyZ2V0LnNldEZyb21Qb2ludHMoY29ybmVycyk7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBBQUJCIGlzIGhpdCBieSBhIHJheS4KICAgICAqLwoKCiAgICBvdmVybGFwc1JheShyYXkpIHsKICAgICAgY29uc3QgewogICAgICAgIGRpcmVjdGlvbiwKICAgICAgICBmcm9tCiAgICAgIH0gPSByYXk7IC8vIGNvbnN0IHQgPSAwCiAgICAgIC8vIHJheS5kaXJlY3Rpb24gaXMgdW5pdCBkaXJlY3Rpb24gdmVjdG9yIG9mIHJheQoKICAgICAgY29uc3QgZGlyRnJhY1ggPSAxIC8gZGlyZWN0aW9uLng7CiAgICAgIGNvbnN0IGRpckZyYWNZID0gMSAvIGRpcmVjdGlvbi55OwogICAgICBjb25zdCBkaXJGcmFjWiA9IDEgLyBkaXJlY3Rpb24uejsgLy8gdGhpcy5sb3dlckJvdW5kIGlzIHRoZSBjb3JuZXIgb2YgQUFCQiB3aXRoIG1pbmltYWwgY29vcmRpbmF0ZXMgLSBsZWZ0IGJvdHRvbSwgcnQgaXMgbWF4aW1hbCBjb3JuZXIKCiAgICAgIGNvbnN0IHQxID0gKHRoaXMubG93ZXJCb3VuZC54IC0gZnJvbS54KSAqIGRpckZyYWNYOwogICAgICBjb25zdCB0MiA9ICh0aGlzLnVwcGVyQm91bmQueCAtIGZyb20ueCkgKiBkaXJGcmFjWDsKICAgICAgY29uc3QgdDMgPSAodGhpcy5sb3dlckJvdW5kLnkgLSBmcm9tLnkpICogZGlyRnJhY1k7CiAgICAgIGNvbnN0IHQ0ID0gKHRoaXMudXBwZXJCb3VuZC55IC0gZnJvbS55KSAqIGRpckZyYWNZOwogICAgICBjb25zdCB0NSA9ICh0aGlzLmxvd2VyQm91bmQueiAtIGZyb20ueikgKiBkaXJGcmFjWjsKICAgICAgY29uc3QgdDYgPSAodGhpcy51cHBlckJvdW5kLnogLSBmcm9tLnopICogZGlyRnJhY1o7IC8vIGNvbnN0IHRtaW4gPSBNYXRoLm1heChNYXRoLm1heChNYXRoLm1pbih0MSwgdDIpLCBNYXRoLm1pbih0MywgdDQpKSk7CiAgICAgIC8vIGNvbnN0IHRtYXggPSBNYXRoLm1pbihNYXRoLm1pbihNYXRoLm1heCh0MSwgdDIpLCBNYXRoLm1heCh0MywgdDQpKSk7CgogICAgICBjb25zdCB0bWluID0gTWF0aC5tYXgoTWF0aC5tYXgoTWF0aC5taW4odDEsIHQyKSwgTWF0aC5taW4odDMsIHQ0KSksIE1hdGgubWluKHQ1LCB0NikpOwogICAgICBjb25zdCB0bWF4ID0gTWF0aC5taW4oTWF0aC5taW4oTWF0aC5tYXgodDEsIHQyKSwgTWF0aC5tYXgodDMsIHQ0KSksIE1hdGgubWF4KHQ1LCB0NikpOyAvLyBpZiB0bWF4IDwgMCwgcmF5IChsaW5lKSBpcyBpbnRlcnNlY3RpbmcgQUFCQiwgYnV0IHdob2xlIEFBQkIgaXMgYmVoaW5nIHVzCgogICAgICBpZiAodG1heCA8IDApIHsKICAgICAgICAvL3QgPSB0bWF4OwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSAvLyBpZiB0bWluID4gdG1heCwgcmF5IGRvZXNuJ3QgaW50ZXJzZWN0IEFBQkIKCgogICAgICBpZiAodG1pbiA+IHRtYXgpIHsKICAgICAgICAvL3QgPSB0bWF4OwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogIH0KCiAgY29uc3QgdG1wJDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwogIC8qKgogICAqIENvbGxpc2lvbiAibWF0cml4Ii4KICAgKiBJdCdzIGFjdHVhbGx5IGEgdHJpYW5ndWxhci1zaGFwZWQgYXJyYXkgb2Ygd2hldGhlciB0d28gYm9kaWVzIGFyZSB0b3VjaGluZyB0aGlzIHN0ZXAsIGZvciByZWZlcmVuY2UgbmV4dCBzdGVwCiAgICovCgogIGNsYXNzIEFycmF5Q29sbGlzaW9uTWF0cml4IHsKICAgIC8qKgogICAgICogVGhlIG1hdHJpeCBzdG9yYWdlLgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5tYXRyaXggPSB2b2lkIDA7CiAgICAgIHRoaXMubWF0cml4ID0gW107CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBlbGVtZW50CiAgICAgKi8KCgogICAgZ2V0KGJpLCBiaikgewogICAgICBsZXQgewogICAgICAgIGluZGV4OiBpCiAgICAgIH0gPSBiaTsKICAgICAgbGV0IHsKICAgICAgICBpbmRleDogagogICAgICB9ID0gYmo7CgogICAgICBpZiAoaiA+IGkpIHsKICAgICAgICBjb25zdCB0ZW1wID0gajsKICAgICAgICBqID0gaTsKICAgICAgICBpID0gdGVtcDsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMubWF0cml4WyhpICogKGkgKyAxKSA+PiAxKSArIGogLSAxXTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IGFuIGVsZW1lbnQKICAgICAqLwoKCiAgICBzZXQoYmksIGJqLCB2YWx1ZSkgewogICAgICBsZXQgewogICAgICAgIGluZGV4OiBpCiAgICAgIH0gPSBiaTsKICAgICAgbGV0IHsKICAgICAgICBpbmRleDogagogICAgICB9ID0gYmo7CgogICAgICBpZiAoaiA+IGkpIHsKICAgICAgICBjb25zdCB0ZW1wID0gajsKICAgICAgICBqID0gaTsKICAgICAgICBpID0gdGVtcDsKICAgICAgfQoKICAgICAgdGhpcy5tYXRyaXhbKGkgKiAoaSArIDEpID4+IDEpICsgaiAtIDFdID0gdmFsdWUgPyAxIDogMDsKICAgIH0KICAgIC8qKgogICAgICogU2V0cyBhbGwgZWxlbWVudHMgdG8gemVybwogICAgICovCgoKICAgIHJlc2V0KCkgewogICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHRoaXMubWF0cml4Lmxlbmd0aDsgaSAhPT0gbDsgaSsrKSB7CiAgICAgICAgdGhpcy5tYXRyaXhbaV0gPSAwOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFNldHMgdGhlIG1heCBudW1iZXIgb2Ygb2JqZWN0cwogICAgICovCgoKICAgIHNldE51bU9iamVjdHMobikgewogICAgICB0aGlzLm1hdHJpeC5sZW5ndGggPSBuICogKG4gLSAxKSA+PiAxOwogICAgfQoKICB9CiAgLyoqCiAgICogQmFzZSBjbGFzcyBmb3Igb2JqZWN0cyB0aGF0IGRpc3BhdGNoZXMgZXZlbnRzLgogICAqLwoKCiAgY2xhc3MgRXZlbnRUYXJnZXQgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMuX2xpc3RlbmVycyA9IHZvaWQgMDsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyCiAgICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS4KICAgICAqLwoKCiAgICBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7CiAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHRoaXMuX2xpc3RlbmVycyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7CgogICAgICBpZiAobGlzdGVuZXJzW3R5cGVdID09PSB1bmRlZmluZWQpIHsKICAgICAgICBsaXN0ZW5lcnNbdHlwZV0gPSBbXTsKICAgICAgfQoKICAgICAgaWYgKCFsaXN0ZW5lcnNbdHlwZV0uaW5jbHVkZXMobGlzdGVuZXIpKSB7CiAgICAgICAgbGlzdGVuZXJzW3R5cGVdLnB1c2gobGlzdGVuZXIpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYW4gZXZlbnQgbGlzdGVuZXIgaXMgYWRkZWQKICAgICAqLwoKCiAgICBoYXNFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7CiAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwoKICAgICAgaWYgKGxpc3RlbmVyc1t0eXBlXSAhPT0gdW5kZWZpbmVkICYmIGxpc3RlbmVyc1t0eXBlXS5pbmNsdWRlcyhsaXN0ZW5lcikpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiBhbnkgZXZlbnQgbGlzdGVuZXIgb2YgdGhlIGdpdmVuIHR5cGUgaXMgYWRkZWQKICAgICAqLwoKCiAgICBoYXNBbnlFdmVudExpc3RlbmVyKHR5cGUpIHsKICAgICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7CiAgICAgIHJldHVybiBsaXN0ZW5lcnNbdHlwZV0gIT09IHVuZGVmaW5lZDsKICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIGFuIGV2ZW50IGxpc3RlbmVyCiAgICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS4KICAgICAqLwoKCiAgICByZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7CiAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CgogICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7CgogICAgICBpZiAobGlzdGVuZXJzW3R5cGVdID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgY29uc3QgaW5kZXggPSBsaXN0ZW5lcnNbdHlwZV0uaW5kZXhPZihsaXN0ZW5lcik7CgogICAgICBpZiAoaW5kZXggIT09IC0xKSB7CiAgICAgICAgbGlzdGVuZXJzW3R5cGVdLnNwbGljZShpbmRleCwgMSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBFbWl0IGFuIGV2ZW50LgogICAgICogQHJldHVybiBUaGUgc2VsZiBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuCiAgICAgKi8KCgogICAgZGlzcGF0Y2hFdmVudChldmVudCkgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwogICAgICBjb25zdCBsaXN0ZW5lckFycmF5ID0gbGlzdGVuZXJzW2V2ZW50LnR5cGVdOwoKICAgICAgaWYgKGxpc3RlbmVyQXJyYXkgIT09IHVuZGVmaW5lZCkgewogICAgICAgIGV2ZW50LnRhcmdldCA9IHRoaXM7CgogICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gbGlzdGVuZXJBcnJheS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICAgIGxpc3RlbmVyQXJyYXlbaV0uY2FsbCh0aGlzLCBldmVudCk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgfQogIC8qKgogICAqIEEgUXVhdGVybmlvbiBkZXNjcmliZXMgYSByb3RhdGlvbiBpbiAzRCBzcGFjZS4gVGhlIFF1YXRlcm5pb24gaXMgbWF0aGVtYXRpY2FsbHkgZGVmaW5lZCBhcyBRID0geCppICsgeSpqICsgeiprICsgdywgd2hlcmUgKGksaixrKSBhcmUgaW1hZ2luYXJ5IGJhc2lzIHZlY3RvcnMuICh4LHkseikgY2FuIGJlIHNlZW4gYXMgYSB2ZWN0b3IgcmVsYXRlZCB0byB0aGUgYXhpcyBvZiByb3RhdGlvbiwgd2hpbGUgdGhlIHJlYWwgbXVsdGlwbGllciwgdywgaXMgcmVsYXRlZCB0byB0aGUgYW1vdW50IG9mIHJvdGF0aW9uLgogICAqIEBwYXJhbSB4IE11bHRpcGxpZXIgb2YgdGhlIGltYWdpbmFyeSBiYXNpcyB2ZWN0b3IgaS4KICAgKiBAcGFyYW0geSBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGouCiAgICogQHBhcmFtIHogTXVsdGlwbGllciBvZiB0aGUgaW1hZ2luYXJ5IGJhc2lzIHZlY3RvciBrLgogICAqIEBwYXJhbSB3IE11bHRpcGxpZXIgb2YgdGhlIHJlYWwgcGFydC4KICAgKiBAc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUXVhdGVybmlvbgogICAqLwoKCiAgY2xhc3MgUXVhdGVybmlvbiB7CiAgICBjb25zdHJ1Y3Rvcih4LCB5LCB6LCB3KSB7CiAgICAgIGlmICh4ID09PSB2b2lkIDApIHsKICAgICAgICB4ID0gMDsKICAgICAgfQoKICAgICAgaWYgKHkgPT09IHZvaWQgMCkgewogICAgICAgIHkgPSAwOwogICAgICB9CgogICAgICBpZiAoeiA9PT0gdm9pZCAwKSB7CiAgICAgICAgeiA9IDA7CiAgICAgIH0KCiAgICAgIGlmICh3ID09PSB2b2lkIDApIHsKICAgICAgICB3ID0gMTsKICAgICAgfQoKICAgICAgdGhpcy54ID0gdm9pZCAwOwogICAgICB0aGlzLnkgPSB2b2lkIDA7CiAgICAgIHRoaXMueiA9IHZvaWQgMDsKICAgICAgdGhpcy53ID0gdm9pZCAwOwogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgICB0aGlzLncgPSB3OwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHZhbHVlIG9mIHRoZSBxdWF0ZXJuaW9uLgogICAgICovCgoKICAgIHNldCh4LCB5LCB6LCB3KSB7CiAgICAgIHRoaXMueCA9IHg7CiAgICAgIHRoaXMueSA9IHk7CiAgICAgIHRoaXMueiA9IHo7CiAgICAgIHRoaXMudyA9IHc7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IHRvIGEgcmVhZGFibGUgZm9ybWF0CiAgICAgKiBAcmV0dXJuICJ4LHkseix3IgogICAgICovCgoKICAgIHRvU3RyaW5nKCkgewogICAgICByZXR1cm4gdGhpcy54ICsgIiwiICsgdGhpcy55ICsgIiwiICsgdGhpcy56ICsgIiwiICsgdGhpcy53OwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IHRvIGFuIEFycmF5CiAgICAgKiBAcmV0dXJuIFt4LCB5LCB6LCB3XQogICAgICovCgoKICAgIHRvQXJyYXkoKSB7CiAgICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnksIHRoaXMueiwgdGhpcy53XTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBxdWF0ZXJuaW9uIGNvbXBvbmVudHMgZ2l2ZW4gYW4gYXhpcyBhbmQgYW4gYW5nbGUgaW4gcmFkaWFucy4KICAgICAqLwoKCiAgICBzZXRGcm9tQXhpc0FuZ2xlKHZlY3RvciwgYW5nbGUpIHsKICAgICAgY29uc3QgcyA9IE1hdGguc2luKGFuZ2xlICogMC41KTsKICAgICAgdGhpcy54ID0gdmVjdG9yLnggKiBzOwogICAgICB0aGlzLnkgPSB2ZWN0b3IueSAqIHM7CiAgICAgIHRoaXMueiA9IHZlY3Rvci56ICogczsKICAgICAgdGhpcy53ID0gTWF0aC5jb3MoYW5nbGUgKiAwLjUpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydHMgdGhlIHF1YXRlcm5pb24gdG8gWyBheGlzLCBhbmdsZSBdIHJlcHJlc2VudGF0aW9uLgogICAgICogQHBhcmFtIHRhcmdldEF4aXMgQSB2ZWN0b3Igb2JqZWN0IHRvIHJldXNlIGZvciBzdG9yaW5nIHRoZSBheGlzLgogICAgICogQHJldHVybiBBbiBhcnJheSwgZmlyc3QgZWxlbWVudCBpcyB0aGUgYXhpcyBhbmQgdGhlIHNlY29uZCBpcyB0aGUgYW5nbGUgaW4gcmFkaWFucy4KICAgICAqLwoKCiAgICB0b0F4aXNBbmdsZSh0YXJnZXRBeGlzKSB7CiAgICAgIGlmICh0YXJnZXRBeGlzID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXRBeGlzID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGhpcy5ub3JtYWxpemUoKTsgLy8gaWYgdz4xIGFjb3MgYW5kIHNxcnQgd2lsbCBwcm9kdWNlIGVycm9ycywgdGhpcyBjYW50IGhhcHBlbiBpZiBxdWF0ZXJuaW9uIGlzIG5vcm1hbGlzZWQKCiAgICAgIGNvbnN0IGFuZ2xlID0gMiAqIE1hdGguYWNvcyh0aGlzLncpOwogICAgICBjb25zdCBzID0gTWF0aC5zcXJ0KDEgLSB0aGlzLncgKiB0aGlzLncpOyAvLyBhc3N1bWluZyBxdWF0ZXJuaW9uIG5vcm1hbGlzZWQgdGhlbiB3IGlzIGxlc3MgdGhhbiAxLCBzbyB0ZXJtIGFsd2F5cyBwb3NpdGl2ZS4KCiAgICAgIGlmIChzIDwgMC4wMDEpIHsKICAgICAgICAvLyB0ZXN0IHRvIGF2b2lkIGRpdmlkZSBieSB6ZXJvLCBzIGlzIGFsd2F5cyBwb3NpdGl2ZSBkdWUgdG8gc3FydAogICAgICAgIC8vIGlmIHMgY2xvc2UgdG8gemVybyB0aGVuIGRpcmVjdGlvbiBvZiBheGlzIG5vdCBpbXBvcnRhbnQKICAgICAgICB0YXJnZXRBeGlzLnggPSB0aGlzLng7IC8vIGlmIGl0IGlzIGltcG9ydGFudCB0aGF0IGF4aXMgaXMgbm9ybWFsaXNlZCB0aGVuIHJlcGxhY2Ugd2l0aCB4PTE7IHk9ej0wOwoKICAgICAgICB0YXJnZXRBeGlzLnkgPSB0aGlzLnk7CiAgICAgICAgdGFyZ2V0QXhpcy56ID0gdGhpcy56OwogICAgICB9IGVsc2UgewogICAgICAgIHRhcmdldEF4aXMueCA9IHRoaXMueCAvIHM7IC8vIG5vcm1hbGlzZSBheGlzCgogICAgICAgIHRhcmdldEF4aXMueSA9IHRoaXMueSAvIHM7CiAgICAgICAgdGFyZ2V0QXhpcy56ID0gdGhpcy56IC8gczsKICAgICAgfQoKICAgICAgcmV0dXJuIFt0YXJnZXRBeGlzLCBhbmdsZV07CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiB2YWx1ZSBnaXZlbiB0d28gdmVjdG9ycy4gVGhlIHJlc3VsdGluZyByb3RhdGlvbiB3aWxsIGJlIHRoZSBuZWVkZWQgcm90YXRpb24gdG8gcm90YXRlIHUgdG8gdi4KICAgICAqLwoKCiAgICBzZXRGcm9tVmVjdG9ycyh1LCB2KSB7CiAgICAgIGlmICh1LmlzQW50aXBhcmFsbGVsVG8odikpIHsKICAgICAgICBjb25zdCB0MSA9IHNmdl90MTsKICAgICAgICBjb25zdCB0MiA9IHNmdl90MjsKICAgICAgICB1LnRhbmdlbnRzKHQxLCB0Mik7CiAgICAgICAgdGhpcy5zZXRGcm9tQXhpc0FuZ2xlKHQxLCBNYXRoLlBJKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBhID0gdS5jcm9zcyh2KTsKICAgICAgICB0aGlzLnggPSBhLng7CiAgICAgICAgdGhpcy55ID0gYS55OwogICAgICAgIHRoaXMueiA9IGEuejsKICAgICAgICB0aGlzLncgPSBNYXRoLnNxcnQodS5sZW5ndGgoKSAqKiAyICogdi5sZW5ndGgoKSAqKiAyKSArIHUuZG90KHYpOwogICAgICAgIHRoaXMubm9ybWFsaXplKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgcXVhdGVybmlvbiB3aXRoIGFuIG90aGVyIHF1YXRlcm5pb24uCiAgICAgKi8KCgogICAgbXVsdChxdWF0LCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgfQoKICAgICAgY29uc3QgYXggPSB0aGlzLng7CiAgICAgIGNvbnN0IGF5ID0gdGhpcy55OwogICAgICBjb25zdCBheiA9IHRoaXMuejsKICAgICAgY29uc3QgYXcgPSB0aGlzLnc7CiAgICAgIGNvbnN0IGJ4ID0gcXVhdC54OwogICAgICBjb25zdCBieSA9IHF1YXQueTsKICAgICAgY29uc3QgYnogPSBxdWF0Lno7CiAgICAgIGNvbnN0IGJ3ID0gcXVhdC53OwogICAgICB0YXJnZXQueCA9IGF4ICogYncgKyBhdyAqIGJ4ICsgYXkgKiBieiAtIGF6ICogYnk7CiAgICAgIHRhcmdldC55ID0gYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBiejsKICAgICAgdGFyZ2V0LnogPSBheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4OwogICAgICB0YXJnZXQudyA9IGF3ICogYncgLSBheCAqIGJ4IC0gYXkgKiBieSAtIGF6ICogYno7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgaW52ZXJzZSBxdWF0ZXJuaW9uIHJvdGF0aW9uLgogICAgICovCgoKICAgIGludmVyc2UodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIGNvbnN0IHcgPSB0aGlzLnc7CiAgICAgIHRoaXMuY29uanVnYXRlKHRhcmdldCk7CiAgICAgIGNvbnN0IGlub3JtMiA9IDEgLyAoeCAqIHggKyB5ICogeSArIHogKiB6ICsgdyAqIHcpOwogICAgICB0YXJnZXQueCAqPSBpbm9ybTI7CiAgICAgIHRhcmdldC55ICo9IGlub3JtMjsKICAgICAgdGFyZ2V0LnogKj0gaW5vcm0yOwogICAgICB0YXJnZXQudyAqPSBpbm9ybTI7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgcXVhdGVybmlvbiBjb25qdWdhdGUKICAgICAqLwoKCiAgICBjb25qdWdhdGUodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIHRhcmdldC54ID0gLXRoaXMueDsKICAgICAgdGFyZ2V0LnkgPSAtdGhpcy55OwogICAgICB0YXJnZXQueiA9IC10aGlzLno7CiAgICAgIHRhcmdldC53ID0gdGhpcy53OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBOb3JtYWxpemUgdGhlIHF1YXRlcm5pb24uIE5vdGUgdGhhdCB0aGlzIGNoYW5nZXMgdGhlIHZhbHVlcyBvZiB0aGUgcXVhdGVybmlvbi4KICAgICAqLwoKCiAgICBub3JtYWxpemUoKSB7CiAgICAgIGxldCBsID0gTWF0aC5zcXJ0KHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSArIHRoaXMueiAqIHRoaXMueiArIHRoaXMudyAqIHRoaXMudyk7CgogICAgICBpZiAobCA9PT0gMCkgewogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICAgIHRoaXMudyA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbCA9IDEgLyBsOwogICAgICAgIHRoaXMueCAqPSBsOwogICAgICAgIHRoaXMueSAqPSBsOwogICAgICAgIHRoaXMueiAqPSBsOwogICAgICAgIHRoaXMudyAqPSBsOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQXBwcm94aW1hdGlvbiBvZiBxdWF0ZXJuaW9uIG5vcm1hbGl6YXRpb24uIFdvcmtzIGJlc3Qgd2hlbiBxdWF0IGlzIGFscmVhZHkgYWxtb3N0LW5vcm1hbGl6ZWQuCiAgICAgKiBAYXV0aG9yIHVucGhhc2VkLCBodHRwczovL2dpdGh1Yi5jb20vdW5waGFzZWQKICAgICAqLwoKCiAgICBub3JtYWxpemVGYXN0KCkgewogICAgICBjb25zdCBmID0gKDMuMCAtICh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkgKyB0aGlzLnogKiB0aGlzLnogKyB0aGlzLncgKiB0aGlzLncpKSAvIDIuMDsKCiAgICAgIGlmIChmID09PSAwKSB7CiAgICAgICAgdGhpcy54ID0gMDsKICAgICAgICB0aGlzLnkgPSAwOwogICAgICAgIHRoaXMueiA9IDA7CiAgICAgICAgdGhpcy53ID0gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnggKj0gZjsKICAgICAgICB0aGlzLnkgKj0gZjsKICAgICAgICB0aGlzLnogKj0gZjsKICAgICAgICB0aGlzLncgKj0gZjsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIE11bHRpcGx5IHRoZSBxdWF0ZXJuaW9uIGJ5IGEgdmVjdG9yCiAgICAgKi8KCgogICAgdm11bHQodiwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHggPSB2Lng7CiAgICAgIGNvbnN0IHkgPSB2Lnk7CiAgICAgIGNvbnN0IHogPSB2Lno7CiAgICAgIGNvbnN0IHF4ID0gdGhpcy54OwogICAgICBjb25zdCBxeSA9IHRoaXMueTsKICAgICAgY29uc3QgcXogPSB0aGlzLno7CiAgICAgIGNvbnN0IHF3ID0gdGhpcy53OyAvLyBxKnYKCiAgICAgIGNvbnN0IGl4ID0gcXcgKiB4ICsgcXkgKiB6IC0gcXogKiB5OwogICAgICBjb25zdCBpeSA9IHF3ICogeSArIHF6ICogeCAtIHF4ICogejsKICAgICAgY29uc3QgaXogPSBxdyAqIHogKyBxeCAqIHkgLSBxeSAqIHg7CiAgICAgIGNvbnN0IGl3ID0gLXF4ICogeCAtIHF5ICogeSAtIHF6ICogejsKICAgICAgdGFyZ2V0LnggPSBpeCAqIHF3ICsgaXcgKiAtcXggKyBpeSAqIC1xeiAtIGl6ICogLXF5OwogICAgICB0YXJnZXQueSA9IGl5ICogcXcgKyBpdyAqIC1xeSArIGl6ICogLXF4IC0gaXggKiAtcXo7CiAgICAgIHRhcmdldC56ID0gaXogKiBxdyArIGl3ICogLXF6ICsgaXggKiAtcXkgLSBpeSAqIC1xeDsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogQ29waWVzIHZhbHVlIG9mIHNvdXJjZSB0byB0aGlzIHF1YXRlcm5pb24uCiAgICAgKiBAcmV0dXJuIHRoaXMKICAgICAqLwoKCiAgICBjb3B5KHF1YXQpIHsKICAgICAgdGhpcy54ID0gcXVhdC54OwogICAgICB0aGlzLnkgPSBxdWF0Lnk7CiAgICAgIHRoaXMueiA9IHF1YXQuejsKICAgICAgdGhpcy53ID0gcXVhdC53OwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCB0aGUgcXVhdGVybmlvbiB0byBldWxlciBhbmdsZSByZXByZXNlbnRhdGlvbi4gT3JkZXI6IFlaWCwgYXMgdGhpcyBwYWdlIGRlc2NyaWJlczogaHR0cHM6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL3N0YW5kYXJkcy9pbmRleC5odG0KICAgICAqIEBwYXJhbSBvcmRlciBUaHJlZS1jaGFyYWN0ZXIgc3RyaW5nLCBkZWZhdWx0cyB0byAiWVpYIgogICAgICovCgoKICAgIHRvRXVsZXIodGFyZ2V0LCBvcmRlcikgewogICAgICBpZiAob3JkZXIgPT09IHZvaWQgMCkgewogICAgICAgIG9yZGVyID0gJ1laWCc7CiAgICAgIH0KCiAgICAgIGxldCBoZWFkaW5nOwogICAgICBsZXQgYXR0aXR1ZGU7CiAgICAgIGxldCBiYW5rOwogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCB3ID0gdGhpcy53OwoKICAgICAgc3dpdGNoIChvcmRlcikgewogICAgICAgIGNhc2UgJ1laWCc6CiAgICAgICAgICBjb25zdCB0ZXN0ID0geCAqIHkgKyB6ICogdzsKCiAgICAgICAgICBpZiAodGVzdCA+IDAuNDk5KSB7CiAgICAgICAgICAgIC8vIHNpbmd1bGFyaXR5IGF0IG5vcnRoIHBvbGUKICAgICAgICAgICAgaGVhZGluZyA9IDIgKiBNYXRoLmF0YW4yKHgsIHcpOwogICAgICAgICAgICBhdHRpdHVkZSA9IE1hdGguUEkgLyAyOwogICAgICAgICAgICBiYW5rID0gMDsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodGVzdCA8IC0wLjQ5OSkgewogICAgICAgICAgICAvLyBzaW5ndWxhcml0eSBhdCBzb3V0aCBwb2xlCiAgICAgICAgICAgIGhlYWRpbmcgPSAtMiAqIE1hdGguYXRhbjIoeCwgdyk7CiAgICAgICAgICAgIGF0dGl0dWRlID0gLU1hdGguUEkgLyAyOwogICAgICAgICAgICBiYW5rID0gMDsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoaGVhZGluZyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgIGNvbnN0IHNxeCA9IHggKiB4OwogICAgICAgICAgICBjb25zdCBzcXkgPSB5ICogeTsKICAgICAgICAgICAgY29uc3Qgc3F6ID0geiAqIHo7CiAgICAgICAgICAgIGhlYWRpbmcgPSBNYXRoLmF0YW4yKDIgKiB5ICogdyAtIDIgKiB4ICogeiwgMSAtIDIgKiBzcXkgLSAyICogc3F6KTsgLy8gSGVhZGluZwoKICAgICAgICAgICAgYXR0aXR1ZGUgPSBNYXRoLmFzaW4oMiAqIHRlc3QpOyAvLyBhdHRpdHVkZQoKICAgICAgICAgICAgYmFuayA9IE1hdGguYXRhbjIoMiAqIHggKiB3IC0gMiAqIHkgKiB6LCAxIC0gMiAqIHNxeCAtIDIgKiBzcXopOyAvLyBiYW5rCiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkV1bGVyIG9yZGVyICIgKyBvcmRlciArICIgbm90IHN1cHBvcnRlZCB5ZXQuIik7CiAgICAgIH0KCiAgICAgIHRhcmdldC55ID0gaGVhZGluZzsKICAgICAgdGFyZ2V0LnogPSBhdHRpdHVkZTsKICAgICAgdGFyZ2V0LnggPSBiYW5rOwogICAgfQogICAgLyoqCiAgICAgKiBAcGFyYW0gb3JkZXIgVGhlIG9yZGVyIHRvIGFwcGx5IGFuZ2xlczogJ1hZWicgb3IgJ1lYWicgb3IgYW55IG90aGVyIGNvbWJpbmF0aW9uLgogICAgICoKICAgICAqIFNlZSB7QGxpbmsgaHR0cHM6Ly93d3cubWF0aHdvcmtzLmNvbS9tYXRsYWJjZW50cmFsL2ZpbGVleGNoYW5nZS8yMDY5Ni1mdW5jdGlvbi10by1jb252ZXJ0LWJldHdlZW4tZGNtLWV1bGVyLWFuZ2xlcy1xdWF0ZXJuaW9ucy1hbmQtZXVsZXItdmVjdG9ycyBNYXRoV29ya3N9IHJlZmVyZW5jZQogICAgICovCgoKICAgIHNldEZyb21FdWxlcih4LCB5LCB6LCBvcmRlcikgewogICAgICBpZiAob3JkZXIgPT09IHZvaWQgMCkgewogICAgICAgIG9yZGVyID0gJ1hZWic7CiAgICAgIH0KCiAgICAgIGNvbnN0IGMxID0gTWF0aC5jb3MoeCAvIDIpOwogICAgICBjb25zdCBjMiA9IE1hdGguY29zKHkgLyAyKTsKICAgICAgY29uc3QgYzMgPSBNYXRoLmNvcyh6IC8gMik7CiAgICAgIGNvbnN0IHMxID0gTWF0aC5zaW4oeCAvIDIpOwogICAgICBjb25zdCBzMiA9IE1hdGguc2luKHkgLyAyKTsKICAgICAgY29uc3QgczMgPSBNYXRoLnNpbih6IC8gMik7CgogICAgICBpZiAob3JkZXIgPT09ICdYWVonKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgKyBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzIC0gczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWVhaJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyArIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzIC0gczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMzsKICAgICAgfSBlbHNlIGlmIChvcmRlciA9PT0gJ1pYWScpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzICsgczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyArIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdaWVgnKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzIC0gYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyArIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWVpYJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyArIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgKyBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzIC0gczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMzsKICAgICAgfSBlbHNlIGlmIChvcmRlciA9PT0gJ1haWScpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzIC0gczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyArIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICAgIGNsb25lKCkgewogICAgICByZXR1cm4gbmV3IFF1YXRlcm5pb24odGhpcy54LCB0aGlzLnksIHRoaXMueiwgdGhpcy53KTsKICAgIH0KICAgIC8qKgogICAgICogUGVyZm9ybXMgYSBzcGhlcmljYWwgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gcXVhdAogICAgICoKICAgICAqIEBwYXJhbSB0b1F1YXQgc2Vjb25kIG9wZXJhbmQKICAgICAqIEBwYXJhbSB0IGludGVycG9sYXRpb24gYW1vdW50IGJldHdlZW4gdGhlIHNlbGYgcXVhdGVybmlvbiBhbmQgdG9RdWF0CiAgICAgKiBAcGFyYW0gdGFyZ2V0IEEgcXVhdGVybmlvbiB0byBzdG9yZSB0aGUgcmVzdWx0IGluLiBJZiBub3QgcHJvdmlkZWQsIGEgbmV3IG9uZSB3aWxsIGJlIGNyZWF0ZWQuCiAgICAgKiBAcmV0dXJucyB7UXVhdGVybmlvbn0gVGhlICJ0YXJnZXQiIG9iamVjdAogICAgICovCgoKICAgIHNsZXJwKHRvUXVhdCwgdCwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4ID0gdGhpcy54OwogICAgICBjb25zdCBheSA9IHRoaXMueTsKICAgICAgY29uc3QgYXogPSB0aGlzLno7CiAgICAgIGNvbnN0IGF3ID0gdGhpcy53OwogICAgICBsZXQgYnggPSB0b1F1YXQueDsKICAgICAgbGV0IGJ5ID0gdG9RdWF0Lnk7CiAgICAgIGxldCBieiA9IHRvUXVhdC56OwogICAgICBsZXQgYncgPSB0b1F1YXQudzsKICAgICAgbGV0IG9tZWdhOwogICAgICBsZXQgY29zb207CiAgICAgIGxldCBzaW5vbTsKICAgICAgbGV0IHNjYWxlMDsKICAgICAgbGV0IHNjYWxlMTsgLy8gY2FsYyBjb3NpbmUKCiAgICAgIGNvc29tID0gYXggKiBieCArIGF5ICogYnkgKyBheiAqIGJ6ICsgYXcgKiBidzsgLy8gYWRqdXN0IHNpZ25zIChpZiBuZWNlc3NhcnkpCgogICAgICBpZiAoY29zb20gPCAwLjApIHsKICAgICAgICBjb3NvbSA9IC1jb3NvbTsKICAgICAgICBieCA9IC1ieDsKICAgICAgICBieSA9IC1ieTsKICAgICAgICBieiA9IC1iejsKICAgICAgICBidyA9IC1idzsKICAgICAgfSAvLyBjYWxjdWxhdGUgY29lZmZpY2llbnRzCgoKICAgICAgaWYgKDEuMCAtIGNvc29tID4gMC4wMDAwMDEpIHsKICAgICAgICAvLyBzdGFuZGFyZCBjYXNlIChzbGVycCkKICAgICAgICBvbWVnYSA9IE1hdGguYWNvcyhjb3NvbSk7CiAgICAgICAgc2lub20gPSBNYXRoLnNpbihvbWVnYSk7CiAgICAgICAgc2NhbGUwID0gTWF0aC5zaW4oKDEuMCAtIHQpICogb21lZ2EpIC8gc2lub207CiAgICAgICAgc2NhbGUxID0gTWF0aC5zaW4odCAqIG9tZWdhKSAvIHNpbm9tOwogICAgICB9IGVsc2UgewogICAgICAgIC8vICJmcm9tIiBhbmQgInRvIiBxdWF0ZXJuaW9ucyBhcmUgdmVyeSBjbG9zZQogICAgICAgIC8vICAuLi4gc28gd2UgY2FuIGRvIGEgbGluZWFyIGludGVycG9sYXRpb24KICAgICAgICBzY2FsZTAgPSAxLjAgLSB0OwogICAgICAgIHNjYWxlMSA9IHQ7CiAgICAgIH0gLy8gY2FsY3VsYXRlIGZpbmFsIHZhbHVlcwoKCiAgICAgIHRhcmdldC54ID0gc2NhbGUwICogYXggKyBzY2FsZTEgKiBieDsKICAgICAgdGFyZ2V0LnkgPSBzY2FsZTAgKiBheSArIHNjYWxlMSAqIGJ5OwogICAgICB0YXJnZXQueiA9IHNjYWxlMCAqIGF6ICsgc2NhbGUxICogYno7CiAgICAgIHRhcmdldC53ID0gc2NhbGUwICogYXcgKyBzY2FsZTEgKiBidzsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogUm90YXRlIGFuIGFic29sdXRlIG9yaWVudGF0aW9uIHF1YXRlcm5pb24gZ2l2ZW4gYW4gYW5ndWxhciB2ZWxvY2l0eSBhbmQgYSB0aW1lIHN0ZXAuCiAgICAgKi8KCgogICAgaW50ZWdyYXRlKGFuZ3VsYXJWZWxvY2l0eSwgZHQsIGFuZ3VsYXJGYWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB9CgogICAgICBjb25zdCBheCA9IGFuZ3VsYXJWZWxvY2l0eS54ICogYW5ndWxhckZhY3Rvci54LAogICAgICAgICAgICBheSA9IGFuZ3VsYXJWZWxvY2l0eS55ICogYW5ndWxhckZhY3Rvci55LAogICAgICAgICAgICBheiA9IGFuZ3VsYXJWZWxvY2l0eS56ICogYW5ndWxhckZhY3Rvci56LAogICAgICAgICAgICBieCA9IHRoaXMueCwKICAgICAgICAgICAgYnkgPSB0aGlzLnksCiAgICAgICAgICAgIGJ6ID0gdGhpcy56LAogICAgICAgICAgICBidyA9IHRoaXMudzsKICAgICAgY29uc3QgaGFsZl9kdCA9IGR0ICogMC41OwogICAgICB0YXJnZXQueCArPSBoYWxmX2R0ICogKGF4ICogYncgKyBheSAqIGJ6IC0gYXogKiBieSk7CiAgICAgIHRhcmdldC55ICs9IGhhbGZfZHQgKiAoYXkgKiBidyArIGF6ICogYnggLSBheCAqIGJ6KTsKICAgICAgdGFyZ2V0LnogKz0gaGFsZl9kdCAqIChheiAqIGJ3ICsgYXggKiBieSAtIGF5ICogYngpOwogICAgICB0YXJnZXQudyArPSBoYWxmX2R0ICogKC1heCAqIGJ4IC0gYXkgKiBieSAtIGF6ICogYnopOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQoKICB9CgogIGNvbnN0IHNmdl90MSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc2Z2X3QyID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBUaGUgYXZhaWxhYmxlIHNoYXBlIHR5cGVzLgogICAqLwoKICBjb25zdCBTSEFQRV9UWVBFUyA9IHsKICAgIC8qKiBTUEhFUkUgKi8KICAgIFNQSEVSRTogMSwKCiAgICAvKiogUExBTkUgKi8KICAgIFBMQU5FOiAyLAoKICAgIC8qKiBCT1ggKi8KICAgIEJPWDogNCwKCiAgICAvKiogQ09NUE9VTkQgKi8KICAgIENPTVBPVU5EOiA4LAoKICAgIC8qKiBDT05WRVhQT0xZSEVEUk9OICovCiAgICBDT05WRVhQT0xZSEVEUk9OOiAxNiwKCiAgICAvKiogSEVJR0hURklFTEQgKi8KICAgIEhFSUdIVEZJRUxEOiAzMiwKCiAgICAvKiogUEFSVElDTEUgKi8KICAgIFBBUlRJQ0xFOiA2NCwKCiAgICAvKiogQ1lMSU5ERVIgKi8KICAgIENZTElOREVSOiAxMjgsCgogICAgLyoqIFRSSU1FU0ggKi8KICAgIFRSSU1FU0g6IDI1NgogIH07CiAgLyoqCiAgICogU2hhcGVUeXBlCiAgICovCgogIC8qKgogICAqIEJhc2UgY2xhc3MgZm9yIHNoYXBlcwogICAqLwoKICBjbGFzcyBTaGFwZSB7CiAgICAvKioKICAgICAqIElkZW50aWZpZXIgb2YgdGhlIFNoYXBlLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgdHlwZSBvZiB0aGlzIHNoYXBlLiBNdXN0IGJlIHNldCB0byBhbiBpbnQgPiAwIGJ5IHN1YmNsYXNzZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBsb2NhbCBib3VuZGluZyBzcGhlcmUgcmFkaXVzIG9mIHRoaXMgc2hhcGUuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gcHJvZHVjZSBjb250YWN0IGZvcmNlcyB3aGVuIGluIGNvbnRhY3Qgd2l0aCBvdGhlciBib2RpZXMuIE5vdGUgdGhhdCBjb250YWN0cyB3aWxsIGJlIGdlbmVyYXRlZCwgYnV0IHRoZXkgd2lsbCBiZSBkaXNhYmxlZC4KICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBPcHRpb25hbCBtYXRlcmlhbCBvZiB0aGUgc2hhcGUgdGhhdCByZWd1bGF0ZXMgY29udGFjdCBwcm9wZXJ0aWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYm9keSB0byB3aGljaCB0aGUgc2hhcGUgaXMgYWRkZWQgdG8uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCB0aGUgU2hhcGUgdHlwZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5pZCA9IHZvaWQgMDsKICAgICAgdGhpcy50eXBlID0gdm9pZCAwOwogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpc2lvblJlc3BvbnNlID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB2b2lkIDA7CiAgICAgIHRoaXMubWF0ZXJpYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMuYm9keSA9IHZvaWQgMDsKICAgICAgdGhpcy5pZCA9IFNoYXBlLmlkQ291bnRlcisrOwogICAgICB0aGlzLnR5cGUgPSBvcHRpb25zLnR5cGUgfHwgMDsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IDA7CiAgICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlID8gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA6IHRydWU7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgOiAtMTsKICAgICAgdGhpcy5tYXRlcmlhbCA9IG9wdGlvbnMubWF0ZXJpYWwgPyBvcHRpb25zLm1hdGVyaWFsIDogbnVsbDsKICAgICAgdGhpcy5ib2R5ID0gbnVsbDsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgdGhlIGJvdW5kaW5nIHNwaGVyZSByYWRpdXMuCiAgICAgKiBUaGUgcmVzdWx0IGlzIHN0b3JlZCBpbiB0aGUgcHJvcGVydHkgYC5ib3VuZGluZ1NwaGVyZVJhZGl1c2AKICAgICAqLwoKCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhyb3cgImNvbXB1dGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2hhcGUgdHlwZSAiICsgdGhpcy50eXBlOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHZvbHVtZSBvZiB0aGlzIHNoYXBlCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICB0aHJvdyAidm9sdW1lKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICIgKyB0aGlzLnR5cGU7CiAgICB9CiAgICAvKioKICAgICAqIENhbGN1bGF0ZXMgdGhlIGluZXJ0aWEgaW4gdGhlIGxvY2FsIGZyYW1lIGZvciB0aGlzIHNoYXBlLgogICAgICogQHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbW9tZW50c19vZl9pbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICB0aHJvdyAiY2FsY3VsYXRlTG9jYWxJbmVydGlhKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICIgKyB0aGlzLnR5cGU7CiAgICB9CiAgICAvKioKICAgICAqIEB0b2RvIHVzZSBhYnN0cmFjdCBmb3IgdGhlc2Uga2luZCBvZiBtZXRob2RzCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgdGhyb3cgImNhbGN1bGF0ZVdvcmxkQUFCQigpIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2hhcGUgdHlwZSAiICsgdGhpcy50eXBlOwogICAgfQoKICB9CgogIFNoYXBlLmlkQ291bnRlciA9IDA7CiAgU2hhcGUudHlwZXMgPSBTSEFQRV9UWVBFUzsKICAvKioKICAgKiBUcmFuc2Zvcm1hdGlvbiB1dGlsaXRpZXMuCiAgICovCgogIGNsYXNzIFRyYW5zZm9ybSB7CiAgICAvKioKICAgICAqIHBvc2l0aW9uCiAgICAgKi8KCiAgICAvKioKICAgICAqIHF1YXRlcm5pb24KICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLnBvc2l0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLnF1YXRlcm5pb24gPSB2b2lkIDA7CiAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwoKICAgICAgaWYgKG9wdGlvbnMucG9zaXRpb24pIHsKICAgICAgICB0aGlzLnBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnF1YXRlcm5pb24pIHsKICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIGdsb2JhbCBwb2ludCBpbiBsb2NhbCB0cmFuc2Zvcm0gY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgcG9pbnRUb0xvY2FsKHdvcmxkUG9pbnQsIHJlc3VsdCkgewogICAgICByZXR1cm4gVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHRoaXMucG9zaXRpb24sIHRoaXMucXVhdGVybmlvbiwgd29ybGRQb2ludCwgcmVzdWx0KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgbG9jYWwgcG9pbnQgaW4gZ2xvYmFsIHRyYW5zZm9ybSBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBwb2ludFRvV29ybGQobG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIHJldHVybiBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5wb3NpdGlvbiwgdGhpcy5xdWF0ZXJuaW9uLCBsb2NhbFBvaW50LCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb1dvcmxkRnJhbWUKICAgICAqLwoKCiAgICB2ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24udm11bHQobG9jYWxWZWN0b3IsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHBvaW50VG9Mb2NhbEZyYW1lCiAgICAgKi8KCgogICAgc3RhdGljIHBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCB3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgd29ybGRQb2ludC52c3ViKHBvc2l0aW9uLCByZXN1bHQpOwogICAgICBxdWF0ZXJuaW9uLmNvbmp1Z2F0ZSh0bXBRdWF0JDEpOwogICAgICB0bXBRdWF0JDEudm11bHQocmVzdWx0LCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBwb2ludFRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyBwb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdGVybmlvbiwgbG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHF1YXRlcm5pb24udm11bHQobG9jYWxQb2ludCwgcmVzdWx0KTsKICAgICAgcmVzdWx0LnZhZGQocG9zaXRpb24sIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHZlY3RvclRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyB2ZWN0b3JUb1dvcmxkRnJhbWUocXVhdGVybmlvbiwgbG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBxdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb0xvY2FsRnJhbWUKICAgICAqLwoKCiAgICBzdGF0aWMgdmVjdG9yVG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCB3b3JsZFZlY3RvciwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHF1YXRlcm5pb24udyAqPSAtMTsKICAgICAgcXVhdGVybmlvbi52bXVsdCh3b3JsZFZlY3RvciwgcmVzdWx0KTsKICAgICAgcXVhdGVybmlvbi53ICo9IC0xOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CgogIGNvbnN0IHRtcFF1YXQkMSA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgLyoqCiAgICogQSBzZXQgb2YgcG9seWdvbnMgZGVzY3JpYmluZyBhIGNvbnZleCBzaGFwZS4KICAgKgogICAqIFRoZSBzaGFwZSBNVVNUIGJlIGNvbnZleCBmb3IgdGhlIGNvZGUgdG8gd29yayBwcm9wZXJseS4gTm8gcG9seWdvbnMgbWF5IGJlIGNvcGxhbmFyIChjb250YWluZWQKICAgKiBpbiB0aGUgc2FtZSAzRCBwbGFuZSksIGluc3RlYWQgdGhlc2Ugc2hvdWxkIGJlIG1lcmdlZCBpbnRvIG9uZSBwb2x5Z29uLgogICAqCiAgICogQGF1dGhvciBxaWFvIC8gaHR0cHM6Ly9naXRodWIuY29tL3FpYW8gKG9yaWdpbmFsIGF1dGhvciwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9xaWFvL3RocmVlLmpzL2NvbW1pdC84NTAyNmYwYzc2OWU0MDAwMTQ4YTY3ZDQ1YTllOWI5YzUxMDg4MzZmKQogICAqIEBhdXRob3Igc2NodGVwcGUgLyBodHRwczovL2dpdGh1Yi5jb20vc2NodGVwcGUKICAgKiBAc2VlIGh0dHBzOi8vd3d3LmFsdGRldmJsb2dhZGF5LmNvbS8yMDExLzA1LzEzL2NvbnRhY3QtZ2VuZXJhdGlvbi1iZXR3ZWVuLTNkLWNvbnZleC1tZXNoZXMvCiAgICoKICAgKiBAdG9kbyBNb3ZlIHRoZSBjbGlwcGluZyBmdW5jdGlvbnMgdG8gQ29udGFjdEdlbmVyYXRvcj8KICAgKiBAdG9kbyBBdXRvbWF0aWNhbGx5IG1lcmdlIGNvcGxhbmFyIHBvbHlnb25zIGluIGNvbnN0cnVjdG9yLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGNvbnZleFNoYXBlID0gbmV3IENBTk5PTi5Db252ZXhQb2x5aGVkcm9uKHsgdmVydGljZXMsIGZhY2VzIH0pCiAgICogICAgIGNvbnN0IGNvbnZleEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY29udmV4U2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShjb252ZXhCb2R5KQogICAqLwoKICBjbGFzcyBDb252ZXhQb2x5aGVkcm9uIGV4dGVuZHMgU2hhcGUgewogICAgLyoqIHZlcnRpY2VzICovCgogICAgLyoqCiAgICAgKiBBcnJheSBvZiBpbnRlZ2VyIGFycmF5cywgaW5kaWNhdGluZyB3aGljaCB2ZXJ0aWNlcyBlYWNoIGZhY2UgY29uc2lzdHMgb2YKICAgICAqLwoKICAgIC8qKiBmYWNlTm9ybWFscyAqLwoKICAgIC8qKiB3b3JsZFZlcnRpY2VzICovCgogICAgLyoqIHdvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSAqLwoKICAgIC8qKiB3b3JsZEZhY2VOb3JtYWxzICovCgogICAgLyoqIHdvcmxkRmFjZU5vcm1hbHNOZWVkc1VwZGF0ZSAqLwoKICAgIC8qKgogICAgICogSWYgZ2l2ZW4sIHRoZXNlIGxvY2FsbHkgZGVmaW5lZCwgbm9ybWFsaXplZCBheGVzIGFyZSB0aGUgb25seSBvbmVzIGJlaW5nIGNoZWNrZWQgd2hlbiBkb2luZyBzZXBhcmF0aW5nIGF4aXMgY2hlY2suCiAgICAgKi8KCiAgICAvKiogdW5pcXVlRWRnZXMgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSB2ZXJ0aWNlcyBBbiBhcnJheSBvZiBWZWMzJ3MKICAgICAqIEBwYXJhbSBmYWNlcyBBcnJheSBvZiBpbnRlZ2VyIGFycmF5cywgZGVzY3JpYmluZyB3aGljaCB2ZXJ0aWNlcyB0aGF0IGlzIGluY2x1ZGVkIGluIGVhY2ggZmFjZS4KICAgICAqLwogICAgY29uc3RydWN0b3IocHJvcHMpIHsKICAgICAgaWYgKHByb3BzID09PSB2b2lkIDApIHsKICAgICAgICBwcm9wcyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCB7CiAgICAgICAgdmVydGljZXMgPSBbXSwKICAgICAgICBmYWNlcyA9IFtdLAogICAgICAgIG5vcm1hbHMgPSBbXSwKICAgICAgICBheGVzLAogICAgICAgIGJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgIH0gPSBwcm9wczsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04KICAgICAgfSk7CiAgICAgIHRoaXMudmVydGljZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuZmFjZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuZmFjZU5vcm1hbHMgPSB2b2lkIDA7CiAgICAgIHRoaXMud29ybGRWZXJ0aWNlcyA9IHZvaWQgMDsKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSB2b2lkIDA7CiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFscyA9IHZvaWQgMDsKICAgICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB2b2lkIDA7CiAgICAgIHRoaXMudW5pcXVlQXhlcyA9IHZvaWQgMDsKICAgICAgdGhpcy51bmlxdWVFZGdlcyA9IHZvaWQgMDsKICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzOwogICAgICB0aGlzLmZhY2VzID0gZmFjZXM7CiAgICAgIHRoaXMuZmFjZU5vcm1hbHMgPSBub3JtYWxzOwoKICAgICAgaWYgKHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5jb21wdXRlTm9ybWFscygpOwogICAgICB9CgogICAgICBpZiAoIWJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBib3VuZGluZ1NwaGVyZVJhZGl1czsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzID0gW107IC8vIFdvcmxkIHRyYW5zZm9ybWVkIHZlcnNpb24gb2YgLnZlcnRpY2VzCgogICAgICB0aGlzLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFscyA9IFtdOyAvLyBXb3JsZCB0cmFuc2Zvcm1lZCB2ZXJzaW9uIG9mIC5mYWNlTm9ybWFscwoKICAgICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLnVuaXF1ZUF4ZXMgPSBheGVzID8gYXhlcy5zbGljZSgpIDogbnVsbDsKICAgICAgdGhpcy51bmlxdWVFZGdlcyA9IFtdOwogICAgICB0aGlzLmNvbXB1dGVFZGdlcygpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB1bmlxdWVFZGdlcwogICAgICovCgoKICAgIGNvbXB1dGVFZGdlcygpIHsKICAgICAgY29uc3QgZmFjZXMgPSB0aGlzLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIGNvbnN0IGVkZ2VzID0gdGhpcy51bmlxdWVFZGdlczsKICAgICAgZWRnZXMubGVuZ3RoID0gMDsKICAgICAgY29uc3QgZWRnZSA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBmYWNlID0gZmFjZXNbaV07CiAgICAgICAgY29uc3QgbnVtVmVydGljZXMgPSBmYWNlLmxlbmd0aDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IG51bVZlcnRpY2VzOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGsgPSAoaiArIDEpICUgbnVtVmVydGljZXM7CiAgICAgICAgICB2ZXJ0aWNlc1tmYWNlW2pdXS52c3ViKHZlcnRpY2VzW2ZhY2Vba11dLCBlZGdlKTsKICAgICAgICAgIGVkZ2Uubm9ybWFsaXplKCk7CiAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKCiAgICAgICAgICBmb3IgKGxldCBwID0gMDsgcCAhPT0gZWRnZXMubGVuZ3RoOyBwKyspIHsKICAgICAgICAgICAgaWYgKGVkZ2VzW3BdLmFsbW9zdEVxdWFscyhlZGdlKSB8fCBlZGdlc1twXS5hbG1vc3RFcXVhbHMoZWRnZSkpIHsKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICAgIGVkZ2VzLnB1c2goZWRnZS5jbG9uZSgpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFscyBvZiB0aGUgZmFjZXMuCiAgICAgKiBXaWxsIHJldXNlIGV4aXN0aW5nIFZlYzMgb2JqZWN0cyBpbiB0aGUgYGZhY2VOb3JtYWxzYCBhcnJheSBpZiB0aGV5IGV4aXN0LgogICAgICovCgoKICAgIGNvbXB1dGVOb3JtYWxzKCkgewogICAgICB0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aCA9IHRoaXMuZmFjZXMubGVuZ3RoOyAvLyBHZW5lcmF0ZSBub3JtYWxzCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBDaGVjayBzbyBhbGwgdmVydGljZXMgZXhpc3RzIGZvciB0aGlzIGZhY2UKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZmFjZXNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmICghdGhpcy52ZXJ0aWNlc1t0aGlzLmZhY2VzW2ldW2pdXSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlZlcnRleCAiICsgdGhpcy5mYWNlc1tpXVtqXSArICIgbm90IGZvdW5kISIpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgY29uc3QgbiA9IHRoaXMuZmFjZU5vcm1hbHNbaV0gfHwgbmV3IFZlYzMoKTsKICAgICAgICB0aGlzLmdldEZhY2VOb3JtYWwoaSwgbik7CiAgICAgICAgbi5uZWdhdGUobik7CiAgICAgICAgdGhpcy5mYWNlTm9ybWFsc1tpXSA9IG47CiAgICAgICAgY29uc3QgdmVydGV4ID0gdGhpcy52ZXJ0aWNlc1t0aGlzLmZhY2VzW2ldWzBdXTsKCiAgICAgICAgaWYgKG4uZG90KHZlcnRleCkgPCAwKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCIuZmFjZU5vcm1hbHNbIiArIGkgKyAiXSA9IFZlYzMoIiArIG4udG9TdHJpbmcoKSArICIpIGxvb2tzIGxpa2UgaXQgcG9pbnRzIGludG8gdGhlIHNoYXBlPyBUaGUgdmVydGljZXMgZm9sbG93LiBNYWtlIHN1cmUgdGhleSBhcmUgb3JkZXJlZCBDQ1cgYXJvdW5kIHRoZSBub3JtYWwsIHVzaW5nIHRoZSByaWdodCBoYW5kIHJ1bGUuIik7CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmZhY2VzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGNvbnNvbGUud2FybigiLnZlcnRpY2VzWyIgKyB0aGlzLmZhY2VzW2ldW2pdICsgIl0gPSBWZWMzKCIgKyB0aGlzLnZlcnRpY2VzW3RoaXMuZmFjZXNbaV1bal1dLnRvU3RyaW5nKCkgKyAiKSIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlIHRoZSBub3JtYWwgb2YgYSBmYWNlIGZyb20gaXRzIHZlcnRpY2VzCiAgICAgKi8KCgogICAgZ2V0RmFjZU5vcm1hbChpLCB0YXJnZXQpIHsKICAgICAgY29uc3QgZiA9IHRoaXMuZmFjZXNbaV07CiAgICAgIGNvbnN0IHZhID0gdGhpcy52ZXJ0aWNlc1tmWzBdXTsKICAgICAgY29uc3QgdmIgPSB0aGlzLnZlcnRpY2VzW2ZbMV1dOwogICAgICBjb25zdCB2YyA9IHRoaXMudmVydGljZXNbZlsyXV07CiAgICAgIENvbnZleFBvbHloZWRyb24uY29tcHV0ZU5vcm1hbCh2YSwgdmIsIHZjLCB0YXJnZXQpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgZmFjZSBub3JtYWwgZ2l2ZW4gMyB2ZXJ0aWNlcwogICAgICovCgoKICAgIHN0YXRpYyBjb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCkgewogICAgICBjb25zdCBjYiA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGFiID0gbmV3IFZlYzMoKTsKICAgICAgdmIudnN1Yih2YSwgYWIpOwogICAgICB2Yy52c3ViKHZiLCBjYik7CiAgICAgIGNiLmNyb3NzKGFiLCB0YXJnZXQpOwoKICAgICAgaWYgKCF0YXJnZXQuaXNaZXJvKCkpIHsKICAgICAgICB0YXJnZXQubm9ybWFsaXplKCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtIG1pbkRpc3QgQ2xhbXAgZGlzdGFuY2UKICAgICAqIEBwYXJhbSByZXN1bHQgVGhlIGFuIGFycmF5IG9mIGNvbnRhY3QgcG9pbnQgb2JqZWN0cywgc2VlIGNsaXBGYWNlQWdhaW5zdEh1bGwKICAgICAqLwoKCiAgICBjbGlwQWdhaW5zdEh1bGwocG9zQSwgcXVhdEEsIGh1bGxCLCBwb3NCLCBxdWF0Qiwgc2VwYXJhdGluZ05vcm1hbCwgbWluRGlzdCwgbWF4RGlzdCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IFdvcmxkTm9ybWFsID0gbmV3IFZlYzMoKTsKICAgICAgbGV0IGNsb3Nlc3RGYWNlQiA9IC0xOwogICAgICBsZXQgZG1heCA9IC1OdW1iZXIuTUFYX1ZBTFVFOwoKICAgICAgZm9yIChsZXQgZmFjZSA9IDA7IGZhY2UgPCBodWxsQi5mYWNlcy5sZW5ndGg7IGZhY2UrKykgewogICAgICAgIFdvcmxkTm9ybWFsLmNvcHkoaHVsbEIuZmFjZU5vcm1hbHNbZmFjZV0pOwogICAgICAgIHF1YXRCLnZtdWx0KFdvcmxkTm9ybWFsLCBXb3JsZE5vcm1hbCk7CiAgICAgICAgY29uc3QgZCA9IFdvcmxkTm9ybWFsLmRvdChzZXBhcmF0aW5nTm9ybWFsKTsKCiAgICAgICAgaWYgKGQgPiBkbWF4KSB7CiAgICAgICAgICBkbWF4ID0gZDsKICAgICAgICAgIGNsb3Nlc3RGYWNlQiA9IGZhY2U7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCB3b3JsZFZlcnRzQjEgPSBbXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaHVsbEIuZmFjZXNbY2xvc2VzdEZhY2VCXS5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGIgPSBodWxsQi52ZXJ0aWNlc1todWxsQi5mYWNlc1tjbG9zZXN0RmFjZUJdW2ldXTsKICAgICAgICBjb25zdCB3b3JsZGIgPSBuZXcgVmVjMygpOwogICAgICAgIHdvcmxkYi5jb3B5KGIpOwogICAgICAgIHF1YXRCLnZtdWx0KHdvcmxkYiwgd29ybGRiKTsKICAgICAgICBwb3NCLnZhZGQod29ybGRiLCB3b3JsZGIpOwogICAgICAgIHdvcmxkVmVydHNCMS5wdXNoKHdvcmxkYik7CiAgICAgIH0KCiAgICAgIGlmIChjbG9zZXN0RmFjZUIgPj0gMCkgewogICAgICAgIHRoaXMuY2xpcEZhY2VBZ2FpbnN0SHVsbChzZXBhcmF0aW5nTm9ybWFsLCBwb3NBLCBxdWF0QSwgd29ybGRWZXJ0c0IxLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEZpbmQgdGhlIHNlcGFyYXRpbmcgYXhpcyBiZXR3ZWVuIHRoaXMgaHVsbCBhbmQgYW5vdGhlcgogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IHZlY3RvciB0byBzYXZlIHRoZSBheGlzIGluCiAgICAgKiBAcmV0dXJuIFJldHVybnMgZmFsc2UgaWYgYSBzZXBhcmF0aW9uIGlzIGZvdW5kLCBlbHNlIHRydWUKICAgICAqLwoKCiAgICBmaW5kU2VwYXJhdGluZ0F4aXMoaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0QiwgdGFyZ2V0LCBmYWNlTGlzdEEsIGZhY2VMaXN0QikgewogICAgICBjb25zdCBmYWNlQU5vcm1hbFdTMyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IFdvcmxkbm9ybWFsMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGRlbHRhQyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkRWRnZTAgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCB3b3JsZEVkZ2UxID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgQ3Jvc3MgPSBuZXcgVmVjMygpOwogICAgICBsZXQgZG1pbiA9IE51bWJlci5NQVhfVkFMVUU7CiAgICAgIGNvbnN0IGh1bGxBID0gdGhpczsKCiAgICAgIGlmICghaHVsbEEudW5pcXVlQXhlcykgewogICAgICAgIGNvbnN0IG51bUZhY2VzQSA9IGZhY2VMaXN0QSA/IGZhY2VMaXN0QS5sZW5ndGggOiBodWxsQS5mYWNlcy5sZW5ndGg7IC8vIFRlc3QgZmFjZSBub3JtYWxzIGZyb20gaHVsbEEKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1GYWNlc0E7IGkrKykgewogICAgICAgICAgY29uc3QgZmkgPSBmYWNlTGlzdEEgPyBmYWNlTGlzdEFbaV0gOiBpOyAvLyBHZXQgd29ybGQgZmFjZSBub3JtYWwKCiAgICAgICAgICBmYWNlQU5vcm1hbFdTMy5jb3B5KGh1bGxBLmZhY2VOb3JtYWxzW2ZpXSk7CiAgICAgICAgICBxdWF0QS52bXVsdChmYWNlQU5vcm1hbFdTMywgZmFjZUFOb3JtYWxXUzMpOwogICAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKGZhY2VBTm9ybWFsV1MzLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKTsKCiAgICAgICAgICBpZiAoZCA9PT0gZmFsc2UpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChkIDwgZG1pbikgewogICAgICAgICAgICBkbWluID0gZDsKICAgICAgICAgICAgdGFyZ2V0LmNvcHkoZmFjZUFOb3JtYWxXUzMpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBUZXN0IHVuaXF1ZSBheGVzCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGh1bGxBLnVuaXF1ZUF4ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIC8vIEdldCB3b3JsZCBheGlzCiAgICAgICAgICBxdWF0QS52bXVsdChodWxsQS51bmlxdWVBeGVzW2ldLCBmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICBjb25zdCBkID0gaHVsbEEudGVzdFNlcEF4aXMoZmFjZUFOb3JtYWxXUzMsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgIGlmIChkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICAgIGRtaW4gPSBkOwogICAgICAgICAgICB0YXJnZXQuY29weShmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoIWh1bGxCLnVuaXF1ZUF4ZXMpIHsKICAgICAgICAvLyBUZXN0IGZhY2Ugbm9ybWFscyBmcm9tIGh1bGxCCiAgICAgICAgY29uc3QgbnVtRmFjZXNCID0gZmFjZUxpc3RCID8gZmFjZUxpc3RCLmxlbmd0aCA6IGh1bGxCLmZhY2VzLmxlbmd0aDsKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1GYWNlc0I7IGkrKykgewogICAgICAgICAgY29uc3QgZmkgPSBmYWNlTGlzdEIgPyBmYWNlTGlzdEJbaV0gOiBpOwogICAgICAgICAgV29ybGRub3JtYWwxLmNvcHkoaHVsbEIuZmFjZU5vcm1hbHNbZmldKTsKICAgICAgICAgIHF1YXRCLnZtdWx0KFdvcmxkbm9ybWFsMSwgV29ybGRub3JtYWwxKTsKICAgICAgICAgIGNvbnN0IGQgPSBodWxsQS50ZXN0U2VwQXhpcyhXb3JsZG5vcm1hbDEsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgIGlmIChkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICAgIGRtaW4gPSBkOwogICAgICAgICAgICB0YXJnZXQuY29weShXb3JsZG5vcm1hbDEpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBUZXN0IHVuaXF1ZSBheGVzIGluIEIKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gaHVsbEIudW5pcXVlQXhlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgcXVhdEIudm11bHQoaHVsbEIudW5pcXVlQXhlc1tpXSwgV29ybGRub3JtYWwxKTsKICAgICAgICAgIGNvbnN0IGQgPSBodWxsQS50ZXN0U2VwQXhpcyhXb3JsZG5vcm1hbDEsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgIGlmIChkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICAgIGRtaW4gPSBkOwogICAgICAgICAgICB0YXJnZXQuY29weShXb3JsZG5vcm1hbDEpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBUZXN0IGVkZ2VzCgoKICAgICAgZm9yIChsZXQgZTAgPSAwOyBlMCAhPT0gaHVsbEEudW5pcXVlRWRnZXMubGVuZ3RoOyBlMCsrKSB7CiAgICAgICAgLy8gR2V0IHdvcmxkIGVkZ2UKICAgICAgICBxdWF0QS52bXVsdChodWxsQS51bmlxdWVFZGdlc1tlMF0sIHdvcmxkRWRnZTApOwoKICAgICAgICBmb3IgKGxldCBlMSA9IDA7IGUxICE9PSBodWxsQi51bmlxdWVFZGdlcy5sZW5ndGg7IGUxKyspIHsKICAgICAgICAgIC8vIEdldCB3b3JsZCBlZGdlIDIKICAgICAgICAgIHF1YXRCLnZtdWx0KGh1bGxCLnVuaXF1ZUVkZ2VzW2UxXSwgd29ybGRFZGdlMSk7CiAgICAgICAgICB3b3JsZEVkZ2UwLmNyb3NzKHdvcmxkRWRnZTEsIENyb3NzKTsKCiAgICAgICAgICBpZiAoIUNyb3NzLmFsbW9zdFplcm8oKSkgewogICAgICAgICAgICBDcm9zcy5ub3JtYWxpemUoKTsKICAgICAgICAgICAgY29uc3QgZGlzdCA9IGh1bGxBLnRlc3RTZXBBeGlzKENyb3NzLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKTsKCiAgICAgICAgICAgIGlmIChkaXN0ID09PSBmYWxzZSkgewogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGRpc3QgPCBkbWluKSB7CiAgICAgICAgICAgICAgZG1pbiA9IGRpc3Q7CiAgICAgICAgICAgICAgdGFyZ2V0LmNvcHkoQ3Jvc3MpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBwb3NCLnZzdWIocG9zQSwgZGVsdGFDKTsKCiAgICAgIGlmIChkZWx0YUMuZG90KHRhcmdldCkgPiAwLjApIHsKICAgICAgICB0YXJnZXQubmVnYXRlKHRhcmdldCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBUZXN0IHNlcGFyYXRpbmcgYXhpcyBhZ2FpbnN0IHR3byBodWxscy4gQm90aCBodWxscyBhcmUgcHJvamVjdGVkIG9udG8gdGhlIGF4aXMgYW5kIHRoZSBvdmVybGFwIHNpemUgaXMgcmV0dXJuZWQgaWYgdGhlcmUgaXMgb25lLgogICAgICogQHJldHVybiBUaGUgb3ZlcmxhcCBkZXB0aCwgb3IgRkFMU0UgaWYgbm8gcGVuZXRyYXRpb24uCiAgICAgKi8KCgogICAgdGVzdFNlcEF4aXMoYXhpcywgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0QikgewogICAgICBjb25zdCBodWxsQSA9IHRoaXM7CiAgICAgIENvbnZleFBvbHloZWRyb24ucHJvamVjdChodWxsQSwgYXhpcywgcG9zQSwgcXVhdEEsIG1heG1pbkEpOwogICAgICBDb252ZXhQb2x5aGVkcm9uLnByb2plY3QoaHVsbEIsIGF4aXMsIHBvc0IsIHF1YXRCLCBtYXhtaW5CKTsKICAgICAgY29uc3QgbWF4QSA9IG1heG1pbkFbMF07CiAgICAgIGNvbnN0IG1pbkEgPSBtYXhtaW5BWzFdOwogICAgICBjb25zdCBtYXhCID0gbWF4bWluQlswXTsKICAgICAgY29uc3QgbWluQiA9IG1heG1pbkJbMV07CgogICAgICBpZiAobWF4QSA8IG1pbkIgfHwgbWF4QiA8IG1pbkEpIHsKICAgICAgICByZXR1cm4gZmFsc2U7IC8vIFNlcGFyYXRlZAogICAgICB9CgogICAgICBjb25zdCBkMCA9IG1heEEgLSBtaW5COwogICAgICBjb25zdCBkMSA9IG1heEIgLSBtaW5BOwogICAgICBjb25zdCBkZXB0aCA9IGQwIDwgZDEgPyBkMCA6IGQxOwogICAgICByZXR1cm4gZGVwdGg7CiAgICB9CiAgICAvKioKICAgICAqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYQogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgLy8gQXBwcm94aW1hdGUgd2l0aCBib3ggaW5lcnRpYQogICAgICAvLyBFeGFjdCBpbmVydGlhIGNhbGN1bGF0aW9uIGlzIG92ZXJraWxsLCBidXQgc2VlIGh0dHA6Ly9nZW9tZXRyaWN0b29scy5jb20vRG9jdW1lbnRhdGlvbi9Qb2x5aGVkcmFsTWFzc1Byb3BlcnRpZXMucGRmIGZvciB0aGUgY29ycmVjdCB3YXkgdG8gZG8gaXQKICAgICAgY29uc3QgYWFiYm1heCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGFhYmJtaW4gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmNvbXB1dGVMb2NhbEFBQkIoYWFiYm1pbiwgYWFiYm1heCk7CiAgICAgIGNvbnN0IHggPSBhYWJibWF4LnggLSBhYWJibWluLng7CiAgICAgIGNvbnN0IHkgPSBhYWJibWF4LnkgLSBhYWJibWluLnk7CiAgICAgIGNvbnN0IHogPSBhYWJibWF4LnogLSBhYWJibWluLno7CiAgICAgIHRhcmdldC54ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHkgKiAyICogeSArIDIgKiB6ICogMiAqIHopOwogICAgICB0YXJnZXQueSA9IDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB4ICogMiAqIHggKyAyICogeiAqIDIgKiB6KTsKICAgICAgdGFyZ2V0LnogPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHggKiAyICogeCk7CiAgICB9CiAgICAvKioKICAgICAqIEBwYXJhbSBmYWNlX2kgSW5kZXggb2YgdGhlIGZhY2UKICAgICAqLwoKCiAgICBnZXRQbGFuZUNvbnN0YW50T2ZGYWNlKGZhY2VfaSkgewogICAgICBjb25zdCBmID0gdGhpcy5mYWNlc1tmYWNlX2ldOwogICAgICBjb25zdCBuID0gdGhpcy5mYWNlTm9ybWFsc1tmYWNlX2ldOwogICAgICBjb25zdCB2ID0gdGhpcy52ZXJ0aWNlc1tmWzBdXTsKICAgICAgY29uc3QgYyA9IC1uLmRvdCh2KTsKICAgICAgcmV0dXJuIGM7CiAgICB9CiAgICAvKioKICAgICAqIENsaXAgYSBmYWNlIGFnYWluc3QgYSBodWxsLgogICAgICogQHBhcmFtIHdvcmxkVmVydHNCMSBBbiBhcnJheSBvZiBWZWMzIHdpdGggdmVydGljZXMgaW4gdGhlIHdvcmxkIGZyYW1lLgogICAgICogQHBhcmFtIG1pbkRpc3QgRGlzdGFuY2UgY2xhbXBpbmcKICAgICAqIEBwYXJhbSBBcnJheSByZXN1bHQgQXJyYXkgdG8gc3RvcmUgcmVzdWx0aW5nIGNvbnRhY3QgcG9pbnRzIGluLiBXaWxsIGJlIG9iamVjdHMgd2l0aCBwcm9wZXJ0aWVzOiBwb2ludCwgZGVwdGgsIG5vcm1hbC4gVGhlc2UgYXJlIHJlcHJlc2VudGVkIGluIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICovCgoKICAgIGNsaXBGYWNlQWdhaW5zdEh1bGwoc2VwYXJhdGluZ05vcm1hbCwgcG9zQSwgcXVhdEEsIHdvcmxkVmVydHNCMSwgbWluRGlzdCwgbWF4RGlzdCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IGZhY2VBTm9ybWFsV1MgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBlZGdlMCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IFdvcmxkRWRnZTAgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCB3b3JsZFBsYW5lQW5vcm1hbDEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBwbGFuZU5vcm1hbFdTMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkQTEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBsb2NhbFBsYW5lTm9ybWFsID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGxhbmVOb3JtYWxXUyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGh1bGxBID0gdGhpczsKICAgICAgY29uc3Qgd29ybGRWZXJ0c0IyID0gW107CiAgICAgIGNvbnN0IHBWdHhJbiA9IHdvcmxkVmVydHNCMTsKICAgICAgY29uc3QgcFZ0eE91dCA9IHdvcmxkVmVydHNCMjsKICAgICAgbGV0IGNsb3Nlc3RGYWNlQSA9IC0xOwogICAgICBsZXQgZG1pbiA9IE51bWJlci5NQVhfVkFMVUU7IC8vIEZpbmQgdGhlIGZhY2Ugd2l0aCBub3JtYWwgY2xvc2VzdCB0byB0aGUgc2VwYXJhdGluZyBheGlzCgogICAgICBmb3IgKGxldCBmYWNlID0gMDsgZmFjZSA8IGh1bGxBLmZhY2VzLmxlbmd0aDsgZmFjZSsrKSB7CiAgICAgICAgZmFjZUFOb3JtYWxXUy5jb3B5KGh1bGxBLmZhY2VOb3JtYWxzW2ZhY2VdKTsKICAgICAgICBxdWF0QS52bXVsdChmYWNlQU5vcm1hbFdTLCBmYWNlQU5vcm1hbFdTKTsKICAgICAgICBjb25zdCBkID0gZmFjZUFOb3JtYWxXUy5kb3Qoc2VwYXJhdGluZ05vcm1hbCk7CgogICAgICAgIGlmIChkIDwgZG1pbikgewogICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICBjbG9zZXN0RmFjZUEgPSBmYWNlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKGNsb3Nlc3RGYWNlQSA8IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gR2V0IHRoZSBmYWNlIGFuZCBjb25zdHJ1Y3QgY29ubmVjdGVkIGZhY2VzCgoKICAgICAgY29uc3QgcG9seUEgPSBodWxsQS5mYWNlc1tjbG9zZXN0RmFjZUFdOwogICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcyA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBodWxsQS5mYWNlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaHVsbEEuZmFjZXNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmICgKICAgICAgICAgIC8qIFNoYXJpbmcgYSB2ZXJ0ZXgqLwogICAgICAgICAgcG9seUEuaW5kZXhPZihodWxsQS5mYWNlc1tpXVtqXSkgIT09IC0xICYmCiAgICAgICAgICAvKiBOb3QgdGhlIG9uZSB3ZSBhcmUgbG9va2luZyBmb3IgY29ubmVjdGlvbnMgZnJvbSAqLwogICAgICAgICAgaSAhPT0gY2xvc2VzdEZhY2VBICYmCiAgICAgICAgICAvKiBOb3QgYWxyZWFkeSBhZGRlZCAqLwogICAgICAgICAgcG9seUEuY29ubmVjdGVkRmFjZXMuaW5kZXhPZihpKSA9PT0gLTEpIHsKICAgICAgICAgICAgcG9seUEuY29ubmVjdGVkRmFjZXMucHVzaChpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gLy8gQ2xpcCB0aGUgcG9seWdvbiB0byB0aGUgYmFjayBvZiB0aGUgcGxhbmVzIG9mIGFsbCBmYWNlcyBvZiBodWxsIEEsCiAgICAgIC8vIHRoYXQgYXJlIGFkamFjZW50IHRvIHRoZSB3aXRuZXNzIGZhY2UKCgogICAgICBjb25zdCBudW1WZXJ0aWNlc0EgPSBwb2x5QS5sZW5ndGg7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVZlcnRpY2VzQTsgaSsrKSB7CiAgICAgICAgY29uc3QgYSA9IGh1bGxBLnZlcnRpY2VzW3BvbHlBW2ldXTsKICAgICAgICBjb25zdCBiID0gaHVsbEEudmVydGljZXNbcG9seUFbKGkgKyAxKSAlIG51bVZlcnRpY2VzQV1dOwogICAgICAgIGEudnN1YihiLCBlZGdlMCk7CiAgICAgICAgV29ybGRFZGdlMC5jb3B5KGVkZ2UwKTsKICAgICAgICBxdWF0QS52bXVsdChXb3JsZEVkZ2UwLCBXb3JsZEVkZ2UwKTsKICAgICAgICBwb3NBLnZhZGQoV29ybGRFZGdlMCwgV29ybGRFZGdlMCk7CiAgICAgICAgd29ybGRQbGFuZUFub3JtYWwxLmNvcHkodGhpcy5mYWNlTm9ybWFsc1tjbG9zZXN0RmFjZUFdKTsKICAgICAgICBxdWF0QS52bXVsdCh3b3JsZFBsYW5lQW5vcm1hbDEsIHdvcmxkUGxhbmVBbm9ybWFsMSk7CiAgICAgICAgcG9zQS52YWRkKHdvcmxkUGxhbmVBbm9ybWFsMSwgd29ybGRQbGFuZUFub3JtYWwxKTsKICAgICAgICBXb3JsZEVkZ2UwLmNyb3NzKHdvcmxkUGxhbmVBbm9ybWFsMSwgcGxhbmVOb3JtYWxXUzEpOwogICAgICAgIHBsYW5lTm9ybWFsV1MxLm5lZ2F0ZShwbGFuZU5vcm1hbFdTMSk7CiAgICAgICAgd29ybGRBMS5jb3B5KGEpOwogICAgICAgIHF1YXRBLnZtdWx0KHdvcmxkQTEsIHdvcmxkQTEpOwogICAgICAgIHBvc0EudmFkZCh3b3JsZEExLCB3b3JsZEExKTsKICAgICAgICBjb25zdCBvdGhlckZhY2UgPSBwb2x5QS5jb25uZWN0ZWRGYWNlc1tpXTsKICAgICAgICBsb2NhbFBsYW5lTm9ybWFsLmNvcHkodGhpcy5mYWNlTm9ybWFsc1tvdGhlckZhY2VdKTsKICAgICAgICBjb25zdCBsb2NhbFBsYW5lRXEgPSB0aGlzLmdldFBsYW5lQ29uc3RhbnRPZkZhY2Uob3RoZXJGYWNlKTsKICAgICAgICBwbGFuZU5vcm1hbFdTLmNvcHkobG9jYWxQbGFuZU5vcm1hbCk7CiAgICAgICAgcXVhdEEudm11bHQocGxhbmVOb3JtYWxXUywgcGxhbmVOb3JtYWxXUyk7CiAgICAgICAgY29uc3QgcGxhbmVFcVdTID0gbG9jYWxQbGFuZUVxIC0gcGxhbmVOb3JtYWxXUy5kb3QocG9zQSk7IC8vIENsaXAgZmFjZSBhZ2FpbnN0IG91ciBjb25zdHJ1Y3RlZCBwbGFuZQoKICAgICAgICB0aGlzLmNsaXBGYWNlQWdhaW5zdFBsYW5lKHBWdHhJbiwgcFZ0eE91dCwgcGxhbmVOb3JtYWxXUywgcGxhbmVFcVdTKTsgLy8gVGhyb3cgYXdheSBhbGwgY2xpcHBlZCBwb2ludHMsIGJ1dCBzYXZlIHRoZSByZW1haW5pbmcgdW50aWwgbmV4dCBjbGlwCgogICAgICAgIHdoaWxlIChwVnR4SW4ubGVuZ3RoKSB7CiAgICAgICAgICBwVnR4SW4uc2hpZnQoKTsKICAgICAgICB9CgogICAgICAgIHdoaWxlIChwVnR4T3V0Lmxlbmd0aCkgewogICAgICAgICAgcFZ0eEluLnB1c2gocFZ0eE91dC5zaGlmdCgpKTsKICAgICAgICB9CiAgICAgIH0gLy8gb25seSBrZWVwIGNvbnRhY3QgcG9pbnRzIHRoYXQgYXJlIGJlaGluZCB0aGUgd2l0bmVzcyBmYWNlCgoKICAgICAgbG9jYWxQbGFuZU5vcm1hbC5jb3B5KHRoaXMuZmFjZU5vcm1hbHNbY2xvc2VzdEZhY2VBXSk7CiAgICAgIGNvbnN0IGxvY2FsUGxhbmVFcSA9IHRoaXMuZ2V0UGxhbmVDb25zdGFudE9mRmFjZShjbG9zZXN0RmFjZUEpOwogICAgICBwbGFuZU5vcm1hbFdTLmNvcHkobG9jYWxQbGFuZU5vcm1hbCk7CiAgICAgIHF1YXRBLnZtdWx0KHBsYW5lTm9ybWFsV1MsIHBsYW5lTm9ybWFsV1MpOwogICAgICBjb25zdCBwbGFuZUVxV1MgPSBsb2NhbFBsYW5lRXEgLSBwbGFuZU5vcm1hbFdTLmRvdChwb3NBKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcFZ0eEluLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IGRlcHRoID0gcGxhbmVOb3JtYWxXUy5kb3QocFZ0eEluW2ldKSArIHBsYW5lRXFXUzsgLy8gPz8/CgogICAgICAgIGlmIChkZXB0aCA8PSBtaW5EaXN0KSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiY2xhbXBlZDogZGVwdGg9IiArIGRlcHRoICsgIiB0byBtaW5EaXN0PSIgKyBtaW5EaXN0KTsKICAgICAgICAgIGRlcHRoID0gbWluRGlzdDsKICAgICAgICB9CgogICAgICAgIGlmIChkZXB0aCA8PSBtYXhEaXN0KSB7CiAgICAgICAgICBjb25zdCBwb2ludCA9IHBWdHhJbltpXTsKCiAgICAgICAgICBpZiAoZGVwdGggPD0gMWUtNikgewogICAgICAgICAgICBjb25zdCBwID0gewogICAgICAgICAgICAgIHBvaW50LAogICAgICAgICAgICAgIG5vcm1hbDogcGxhbmVOb3JtYWxXUywKICAgICAgICAgICAgICBkZXB0aAogICAgICAgICAgICB9OwogICAgICAgICAgICByZXN1bHQucHVzaChwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2xpcCBhIGZhY2UgaW4gYSBodWxsIGFnYWluc3QgdGhlIGJhY2sgb2YgYSBwbGFuZS4KICAgICAqIEBwYXJhbSBwbGFuZUNvbnN0YW50IFRoZSBjb25zdGFudCBpbiB0aGUgbWF0aGVtYXRpY2FsIHBsYW5lIGVxdWF0aW9uCiAgICAgKi8KCgogICAgY2xpcEZhY2VBZ2FpbnN0UGxhbmUoaW5WZXJ0aWNlcywgb3V0VmVydGljZXMsIHBsYW5lTm9ybWFsLCBwbGFuZUNvbnN0YW50KSB7CiAgICAgIGxldCBuX2RvdF9maXJzdDsKICAgICAgbGV0IG5fZG90X2xhc3Q7CiAgICAgIGNvbnN0IG51bVZlcnRzID0gaW5WZXJ0aWNlcy5sZW5ndGg7CgogICAgICBpZiAobnVtVmVydHMgPCAyKSB7CiAgICAgICAgcmV0dXJuIG91dFZlcnRpY2VzOwogICAgICB9CgogICAgICBsZXQgZmlyc3RWZXJ0ZXggPSBpblZlcnRpY2VzW2luVmVydGljZXMubGVuZ3RoIC0gMV07CiAgICAgIGxldCBsYXN0VmVydGV4ID0gaW5WZXJ0aWNlc1swXTsKICAgICAgbl9kb3RfZmlyc3QgPSBwbGFuZU5vcm1hbC5kb3QoZmlyc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgIGZvciAobGV0IHZpID0gMDsgdmkgPCBudW1WZXJ0czsgdmkrKykgewogICAgICAgIGxhc3RWZXJ0ZXggPSBpblZlcnRpY2VzW3ZpXTsKICAgICAgICBuX2RvdF9sYXN0ID0gcGxhbmVOb3JtYWwuZG90KGxhc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgICAgaWYgKG5fZG90X2ZpcnN0IDwgMCkgewogICAgICAgICAgaWYgKG5fZG90X2xhc3QgPCAwKSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kIDwgMCwgc28gb3V0cHV0IGxhc3RWZXJ0ZXgKICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIG5ld3YuY29weShsYXN0VmVydGV4KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kID49IDAsIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24KICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIGZpcnN0VmVydGV4LmxlcnAobGFzdFZlcnRleCwgbl9kb3RfZmlyc3QgLyAobl9kb3RfZmlyc3QgLSBuX2RvdF9sYXN0KSwgbmV3dik7CiAgICAgICAgICAgIG91dFZlcnRpY2VzLnB1c2gobmV3dik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChuX2RvdF9sYXN0IDwgMCkgewogICAgICAgICAgICAvLyBTdGFydCA+PSAwLCBlbmQgPCAwIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24gYW5kIGVuZAogICAgICAgICAgICBjb25zdCBuZXd2ID0gbmV3IFZlYzMoKTsKICAgICAgICAgICAgZmlyc3RWZXJ0ZXgubGVycChsYXN0VmVydGV4LCBuX2RvdF9maXJzdCAvIChuX2RvdF9maXJzdCAtIG5fZG90X2xhc3QpLCBuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChsYXN0VmVydGV4KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZpcnN0VmVydGV4ID0gbGFzdFZlcnRleDsKICAgICAgICBuX2RvdF9maXJzdCA9IG5fZG90X2xhc3Q7CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXRWZXJ0aWNlczsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgLndvcmxkVmVydGljZXNgIGFuZCBzZXRzIGAud29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlYCB0byBmYWxzZS4KICAgICAqLwoKCiAgICBjb21wdXRlV29ybGRWZXJ0aWNlcyhwb3NpdGlvbiwgcXVhdCkgewogICAgICB3aGlsZSAodGhpcy53b3JsZFZlcnRpY2VzLmxlbmd0aCA8IHRoaXMudmVydGljZXMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy53b3JsZFZlcnRpY2VzLnB1c2gobmV3IFZlYzMoKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3Qgd29ybGRWZXJ0cyA9IHRoaXMud29ybGRWZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgcXVhdC52bXVsdCh2ZXJ0c1tpXSwgd29ybGRWZXJ0c1tpXSk7CiAgICAgICAgcG9zaXRpb24udmFkZCh3b3JsZFZlcnRzW2ldLCB3b3JsZFZlcnRzW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KCiAgICBjb21wdXRlTG9jYWxBQUJCKGFhYmJtaW4sIGFhYmJtYXgpIHsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBhYWJibWluLnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTsKICAgICAgYWFiYm1heC5zZXQoLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFLCAtTnVtYmVyLk1BWF9WQUxVRSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gdmVydGljZXNbaV07CgogICAgICAgIGlmICh2LnggPCBhYWJibWluLngpIHsKICAgICAgICAgIGFhYmJtaW4ueCA9IHYueDsKICAgICAgICB9IGVsc2UgaWYgKHYueCA+IGFhYmJtYXgueCkgewogICAgICAgICAgYWFiYm1heC54ID0gdi54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHYueSA8IGFhYmJtaW4ueSkgewogICAgICAgICAgYWFiYm1pbi55ID0gdi55OwogICAgICAgIH0gZWxzZSBpZiAodi55ID4gYWFiYm1heC55KSB7CiAgICAgICAgICBhYWJibWF4LnkgPSB2Lnk7CiAgICAgICAgfQoKICAgICAgICBpZiAodi56IDwgYWFiYm1pbi56KSB7CiAgICAgICAgICBhYWJibWluLnogPSB2Lno7CiAgICAgICAgfSBlbHNlIGlmICh2LnogPiBhYWJibWF4LnopIHsKICAgICAgICAgIGFhYmJtYXgueiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgd29ybGRWZXJ0aWNlc2AgYW5kIHNldHMgYHdvcmxkVmVydGljZXNOZWVkc1VwZGF0ZWAgdG8gZmFsc2UuCiAgICAgKi8KCgogICAgY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocXVhdCkgewogICAgICBjb25zdCBOID0gdGhpcy5mYWNlTm9ybWFscy5sZW5ndGg7CgogICAgICB3aGlsZSAodGhpcy53b3JsZEZhY2VOb3JtYWxzLmxlbmd0aCA8IE4pIHsKICAgICAgICB0aGlzLndvcmxkRmFjZU5vcm1hbHMucHVzaChuZXcgVmVjMygpKTsKICAgICAgfQoKICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMuZmFjZU5vcm1hbHM7CiAgICAgIGNvbnN0IHdvcmxkTm9ybWFscyA9IHRoaXMud29ybGRGYWNlTm9ybWFsczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBxdWF0LnZtdWx0KG5vcm1hbHNbaV0sIHdvcmxkTm9ybWFsc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIEFzc3VtZSBwb2ludHMgYXJlIGRpc3RyaWJ1dGVkIHdpdGggbG9jYWwgKDAsMCwwKSBhcyBjZW50ZXIKICAgICAgbGV0IG1heDIgPSAwOwogICAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBub3JtMiA9IHZlcnRzW2ldLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgICAgaWYgKG5vcm0yID4gbWF4MikgewogICAgICAgICAgbWF4MiA9IG5vcm0yOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBsZXQgbWlueDsKICAgICAgbGV0IG1pbnk7CiAgICAgIGxldCBtaW56OwogICAgICBsZXQgbWF4eDsKICAgICAgbGV0IG1heHk7CiAgICAgIGxldCBtYXh6OwogICAgICBsZXQgdGVtcFdvcmxkVmVydGV4ID0gbmV3IFZlYzMoKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0ZW1wV29ybGRWZXJ0ZXguY29weSh2ZXJ0c1tpXSk7CiAgICAgICAgcXVhdC52bXVsdCh0ZW1wV29ybGRWZXJ0ZXgsIHRlbXBXb3JsZFZlcnRleCk7CiAgICAgICAgcG9zLnZhZGQodGVtcFdvcmxkVmVydGV4LCB0ZW1wV29ybGRWZXJ0ZXgpOwogICAgICAgIGNvbnN0IHYgPSB0ZW1wV29ybGRWZXJ0ZXg7CgogICAgICAgIGlmIChtaW54ID09PSB1bmRlZmluZWQgfHwgdi54IDwgbWlueCkgewogICAgICAgICAgbWlueCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh4ID09PSB1bmRlZmluZWQgfHwgdi54ID4gbWF4eCkgewogICAgICAgICAgbWF4eCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtaW55ID09PSB1bmRlZmluZWQgfHwgdi55IDwgbWlueSkgewogICAgICAgICAgbWlueSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh5ID09PSB1bmRlZmluZWQgfHwgdi55ID4gbWF4eSkgewogICAgICAgICAgbWF4eSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtaW56ID09PSB1bmRlZmluZWQgfHwgdi56IDwgbWlueikgewogICAgICAgICAgbWlueiA9IHYuejsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh6ID09PSB1bmRlZmluZWQgfHwgdi56ID4gbWF4eikgewogICAgICAgICAgbWF4eiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1pbi5zZXQobWlueCwgbWlueSwgbWlueik7CiAgICAgIG1heC5zZXQobWF4eCwgbWF4eSwgbWF4eik7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhcHByb3hpbWF0ZSBjb252ZXggdm9sdW1lCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgLyAzLjA7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBhdmVyYWdlIG9mIGFsbCB0aGUgdmVydGljZXMgcG9zaXRpb25zCiAgICAgKi8KCgogICAgZ2V0QXZlcmFnZVBvaW50TG9jYWwodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0YXJnZXQudmFkZCh2ZXJ0c1tpXSwgdGFyZ2V0KTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNjYWxlKDEgLyB2ZXJ0cy5sZW5ndGgsIHRhcmdldCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zZm9ybSBhbGwgbG9jYWwgcG9pbnRzLiBXaWxsIGNoYW5nZSB0aGUgLnZlcnRpY2VzCiAgICAgKi8KCgogICAgdHJhbnNmb3JtQWxsUG9pbnRzKG9mZnNldCwgcXVhdCkgewogICAgICBjb25zdCBuID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7CiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsgLy8gQXBwbHkgcm90YXRpb24KCiAgICAgIGlmIChxdWF0KSB7CiAgICAgICAgLy8gUm90YXRlIHZlcnRpY2VzCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tpXTsKICAgICAgICAgIHF1YXQudm11bHQodiwgdik7CiAgICAgICAgfSAvLyBSb3RhdGUgZmFjZSBub3JtYWxzCgoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLmZhY2VOb3JtYWxzW2ldOwogICAgICAgICAgcXVhdC52bXVsdCh2LCB2KTsKICAgICAgICB9CiAgICAgICAgLyoKICAgICAgICAgICAgICAvLyBSb3RhdGUgZWRnZXMKICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLnVuaXF1ZUVkZ2VzLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMudW5pcXVlRWRnZXNbaV07CiAgICAgICAgICAgICAgICAgIHF1YXQudm11bHQodix2KTsKICAgICAgICAgICAgICB9Ki8KCiAgICAgIH0gLy8gQXBwbHkgb2Zmc2V0CgoKICAgICAgaWYgKG9mZnNldCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICBjb25zdCB2ID0gdmVydHNbaV07CiAgICAgICAgICB2LnZhZGQob2Zmc2V0LCB2KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2tzIHdoZXRoZXIgcCBpcyBpbnNpZGUgdGhlIHBvbHloZWRyYS4gTXVzdCBiZSBpbiBsb2NhbCBjb29yZHMuCiAgICAgKiBUaGUgcG9pbnQgbGllcyBvdXRzaWRlIG9mIHRoZSBjb252ZXggaHVsbCBvZiB0aGUgb3RoZXIgcG9pbnRzIGlmIGFuZCBvbmx5IGlmIHRoZSBkaXJlY3Rpb24KICAgICAqIG9mIGFsbCB0aGUgdmVjdG9ycyBmcm9tIGl0IHRvIHRob3NlIG90aGVyIHBvaW50cyBhcmUgb24gbGVzcyB0aGFuIG9uZSBoYWxmIG9mIGEgc3BoZXJlIGFyb3VuZCBpdC4KICAgICAqIEBwYXJhbSBwIEEgcG9pbnQgZ2l2ZW4gaW4gbG9jYWwgY29vcmRpbmF0ZXMKICAgICAqLwoKCiAgICBwb2ludElzSW5zaWRlKHApIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCBmYWNlcyA9IHRoaXMuZmFjZXM7CiAgICAgIGNvbnN0IG5vcm1hbHMgPSB0aGlzLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBwb2ludEluc2lkZSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuZ2V0QXZlcmFnZVBvaW50TG9jYWwocG9pbnRJbnNpZGUpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZhY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IG4gPSBub3JtYWxzW2ldOwogICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tmYWNlc1tpXVswXV07IC8vIFdlIG9ubHkgbmVlZCBvbmUgcG9pbnQgaW4gdGhlIGZhY2UKICAgICAgICAvLyBUaGlzIGRvdCBwcm9kdWN0IGRldGVybWluZXMgd2hpY2ggc2lkZSBvZiB0aGUgZWRnZSB0aGUgcG9pbnQgaXMKCiAgICAgICAgY29uc3QgdlRvUCA9IG5ldyBWZWMzKCk7CiAgICAgICAgcC52c3ViKHYsIHZUb1ApOwogICAgICAgIGNvbnN0IHIxID0gbi5kb3QodlRvUCk7CiAgICAgICAgY29uc3QgdlRvUG9pbnRJbnNpZGUgPSBuZXcgVmVjMygpOwogICAgICAgIHBvaW50SW5zaWRlLnZzdWIodiwgdlRvUG9pbnRJbnNpZGUpOwogICAgICAgIGNvbnN0IHIyID0gbi5kb3QodlRvUG9pbnRJbnNpZGUpOwoKICAgICAgICBpZiAocjEgPCAwICYmIHIyID4gMCB8fCByMSA+IDAgJiYgcjIgPCAwKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIEVuY291bnRlcmVkIHNvbWUgb3RoZXIgc2lnbi4gRXhpdC4KICAgICAgICB9CiAgICAgIH0gLy8gSWYgd2UgZ290IGhlcmUsIGFsbCBkb3QgcHJvZHVjdHMgd2VyZSBvZiB0aGUgc2FtZSBzaWduLgoKCiAgICAgIHJldHVybiAtMTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IG1heCBhbmQgbWluIGRvdCBwcm9kdWN0IG9mIGEgY29udmV4IGh1bGwgYXQgcG9zaXRpb24gKHBvcyxxdWF0KSBwcm9qZWN0ZWQgb250byBhbiBheGlzLgogICAgICogUmVzdWx0cyBhcmUgc2F2ZWQgaW4gdGhlIGFycmF5IG1heG1pbi4KICAgICAqIEBwYXJhbSByZXN1bHQgcmVzdWx0WzBdIGFuZCByZXN1bHRbMV0gd2lsbCBiZSBzZXQgdG8gbWF4aW11bSBhbmQgbWluaW11bSwgcmVzcGVjdGl2ZWx5LgogICAgICovCgoKICAgIHN0YXRpYyBwcm9qZWN0KHNoYXBlLCBheGlzLCBwb3MsIHF1YXQsIHJlc3VsdCkgewogICAgICBjb25zdCBuID0gc2hhcGUudmVydGljZXMubGVuZ3RoOwogICAgICBjb25zdCBsb2NhbEF4aXMgPSBwcm9qZWN0X2xvY2FsQXhpczsKICAgICAgbGV0IG1heCA9IDA7CiAgICAgIGxldCBtaW4gPSAwOwogICAgICBjb25zdCBsb2NhbE9yaWdpbiA9IHByb2plY3RfbG9jYWxPcmlnaW47CiAgICAgIGNvbnN0IHZzID0gc2hhcGUudmVydGljZXM7CiAgICAgIGxvY2FsT3JpZ2luLnNldFplcm8oKTsgLy8gVHJhbnNmb3JtIHRoZSBheGlzIHRvIGxvY2FsCgogICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Mb2NhbEZyYW1lKHBvcywgcXVhdCwgYXhpcywgbG9jYWxBeGlzKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvcywgcXVhdCwgbG9jYWxPcmlnaW4sIGxvY2FsT3JpZ2luKTsKICAgICAgY29uc3QgYWRkID0gbG9jYWxPcmlnaW4uZG90KGxvY2FsQXhpcyk7CiAgICAgIG1pbiA9IG1heCA9IHZzWzBdLmRvdChsb2NhbEF4aXMpOwoKICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBuOyBpKyspIHsKICAgICAgICBjb25zdCB2YWwgPSB2c1tpXS5kb3QobG9jYWxBeGlzKTsKCiAgICAgICAgaWYgKHZhbCA+IG1heCkgewogICAgICAgICAgbWF4ID0gdmFsOwogICAgICAgIH0KCiAgICAgICAgaWYgKHZhbCA8IG1pbikgewogICAgICAgICAgbWluID0gdmFsOwogICAgICAgIH0KICAgICAgfQoKICAgICAgbWluIC09IGFkZDsKICAgICAgbWF4IC09IGFkZDsKCiAgICAgIGlmIChtaW4gPiBtYXgpIHsKICAgICAgICAvLyBJbmNvbnNpc3RlbnQgLSBzd2FwCiAgICAgICAgY29uc3QgdGVtcCA9IG1pbjsKICAgICAgICBtaW4gPSBtYXg7CiAgICAgICAgbWF4ID0gdGVtcDsKICAgICAgfSAvLyBPdXRwdXQKCgogICAgICByZXN1bHRbMF0gPSBtYXg7CiAgICAgIHJlc3VsdFsxXSA9IG1pbjsKICAgIH0KCiAgfQoKICBjb25zdCBtYXhtaW5BID0gW107CiAgY29uc3QgbWF4bWluQiA9IFtdOwogIGNvbnN0IHByb2plY3RfbG9jYWxBeGlzID0gbmV3IFZlYzMoKTsKICBjb25zdCBwcm9qZWN0X2xvY2FsT3JpZ2luID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBBIDNkIGJveCBzaGFwZS4KICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCBzaXplID0gMQogICAqICAgICBjb25zdCBoYWxmRXh0ZW50cyA9IG5ldyBDQU5OT04uVmVjMyhzaXplLCBzaXplLCBzaXplKQogICAqICAgICBjb25zdCBib3hTaGFwZSA9IG5ldyBDQU5OT04uQm94KGhhbGZFeHRlbnRzKQogICAqICAgICBjb25zdCBib3hCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsgbWFzczogMSwgc2hhcGU6IGJveFNoYXBlIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoYm94Qm9keSkKICAgKi8KCiAgY2xhc3MgQm94IGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiBUaGUgaGFsZiBleHRlbnRzIG9mIHRoZSBib3guCiAgICAgKi8KCiAgICAvKioKICAgICAqIFVzZWQgYnkgdGhlIGNvbnRhY3QgZ2VuZXJhdG9yIHRvIG1ha2UgY29udGFjdHMgd2l0aCBvdGhlciBjb252ZXggcG9seWhlZHJhIGZvciBleGFtcGxlLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihoYWxmRXh0ZW50cykgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuQk9YCiAgICAgIH0pOwogICAgICB0aGlzLmhhbGZFeHRlbnRzID0gdm9pZCAwOwogICAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5oYWxmRXh0ZW50cyA9IGhhbGZFeHRlbnRzOwogICAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IG51bGw7CiAgICAgIHRoaXMudXBkYXRlQ29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyB0aGUgbG9jYWwgY29udmV4IHBvbHloZWRyb24gcmVwcmVzZW50YXRpb24gdXNlZCBmb3Igc29tZSBjb2xsaXNpb25zLgogICAgICovCgoKICAgIHVwZGF0ZUNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbigpIHsKICAgICAgY29uc3Qgc3ggPSB0aGlzLmhhbGZFeHRlbnRzLng7CiAgICAgIGNvbnN0IHN5ID0gdGhpcy5oYWxmRXh0ZW50cy55OwogICAgICBjb25zdCBzeiA9IHRoaXMuaGFsZkV4dGVudHMuejsKICAgICAgY29uc3QgViA9IFZlYzM7CiAgICAgIGNvbnN0IHZlcnRpY2VzID0gW25ldyBWKC1zeCwgLXN5LCAtc3opLCBuZXcgVihzeCwgLXN5LCAtc3opLCBuZXcgVihzeCwgc3ksIC1zeiksIG5ldyBWKC1zeCwgc3ksIC1zeiksIG5ldyBWKC1zeCwgLXN5LCBzeiksIG5ldyBWKHN4LCAtc3ksIHN6KSwgbmV3IFYoc3gsIHN5LCBzeiksIG5ldyBWKC1zeCwgc3ksIHN6KV07CiAgICAgIGNvbnN0IGZhY2VzID0gW1szLCAyLCAxLCAwXSwgLy8gLXoKICAgICAgWzQsIDUsIDYsIDddLCAvLyAregogICAgICBbNSwgNCwgMCwgMV0sIC8vIC15CiAgICAgIFsyLCAzLCA3LCA2XSwgLy8gK3kKICAgICAgWzAsIDQsIDcsIDNdLCAvLyAteAogICAgICBbMSwgMiwgNiwgNV0gLy8gK3gKICAgICAgXTsKICAgICAgY29uc3QgYXhlcyA9IFtuZXcgVigwLCAwLCAxKSwgbmV3IFYoMCwgMSwgMCksIG5ldyBWKDEsIDAsIDApXTsKICAgICAgY29uc3QgaCA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKHsKICAgICAgICB2ZXJ0aWNlcywKICAgICAgICBmYWNlcywKICAgICAgICBheGVzCiAgICAgIH0pOwogICAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IGg7CiAgICAgIGgubWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsOwogICAgfQogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgdGhlIGluZXJ0aWEgb2YgdGhlIGJveC4KICAgICAqLwoKCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIEJveC5jYWxjdWxhdGVJbmVydGlhKHRoaXMuaGFsZkV4dGVudHMsIG1hc3MsIHRhcmdldCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogICAgc3RhdGljIGNhbGN1bGF0ZUluZXJ0aWEoaGFsZkV4dGVudHMsIG1hc3MsIHRhcmdldCkgewogICAgICBjb25zdCBlID0gaGFsZkV4dGVudHM7CiAgICAgIHRhcmdldC54ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueSAqIDIgKiBlLnkgKyAyICogZS56ICogMiAqIGUueik7CiAgICAgIHRhcmdldC55ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueCAqIDIgKiBlLnggKyAyICogZS56ICogMiAqIGUueik7CiAgICAgIHRhcmdldC56ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueSAqIDIgKiBlLnkgKyAyICogZS54ICogMiAqIGUueCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgYm94IDYgc2lkZSBub3JtYWxzCiAgICAgKiBAcGFyYW0gc2l4VGFyZ2V0VmVjdG9ycyBBbiBhcnJheSBvZiA2IHZlY3RvcnMsIHRvIHN0b3JlIHRoZSByZXN1bHRpbmcgc2lkZSBub3JtYWxzIGluLgogICAgICogQHBhcmFtIHF1YXQgT3JpZW50YXRpb24gdG8gYXBwbHkgdG8gdGhlIG5vcm1hbCB2ZWN0b3JzLiBJZiBub3QgcHJvdmlkZWQsIHRoZSB2ZWN0b3JzIHdpbGwgYmUgaW4gcmVzcGVjdCB0byB0aGUgbG9jYWwgZnJhbWUuCiAgICAgKi8KCgogICAgZ2V0U2lkZU5vcm1hbHMoc2l4VGFyZ2V0VmVjdG9ycywgcXVhdCkgewogICAgICBjb25zdCBzaWRlcyA9IHNpeFRhcmdldFZlY3RvcnM7CiAgICAgIGNvbnN0IGV4ID0gdGhpcy5oYWxmRXh0ZW50czsKICAgICAgc2lkZXNbMF0uc2V0KGV4LngsIDAsIDApOwogICAgICBzaWRlc1sxXS5zZXQoMCwgZXgueSwgMCk7CiAgICAgIHNpZGVzWzJdLnNldCgwLCAwLCBleC56KTsKICAgICAgc2lkZXNbM10uc2V0KC1leC54LCAwLCAwKTsKICAgICAgc2lkZXNbNF0uc2V0KDAsIC1leC55LCAwKTsKICAgICAgc2lkZXNbNV0uc2V0KDAsIDAsIC1leC56KTsKCiAgICAgIGlmIChxdWF0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gc2lkZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHF1YXQudm11bHQoc2lkZXNbaV0sIHNpZGVzW2ldKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBzaWRlczsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgdm9sdW1lIG9mIHRoZSBib3guCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gOC4wICogdGhpcy5oYWxmRXh0ZW50cy54ICogdGhpcy5oYWxmRXh0ZW50cy55ICogdGhpcy5oYWxmRXh0ZW50cy56OwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cwogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gdGhpcy5oYWxmRXh0ZW50cy5sZW5ndGgoKTsKICAgIH0KICAgIC8qKgogICAgICogZm9yRWFjaFdvcmxkQ29ybmVyCiAgICAgKi8KCgogICAgZm9yRWFjaFdvcmxkQ29ybmVyKHBvcywgcXVhdCwgY2FsbGJhY2spIHsKICAgICAgY29uc3QgZSA9IHRoaXMuaGFsZkV4dGVudHM7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSBbW2UueCwgZS55LCBlLnpdLCBbLWUueCwgZS55LCBlLnpdLCBbLWUueCwgLWUueSwgZS56XSwgWy1lLngsIC1lLnksIC1lLnpdLCBbZS54LCAtZS55LCAtZS56XSwgW2UueCwgZS55LCAtZS56XSwgWy1lLngsIGUueSwgLWUuel0sIFtlLngsIC1lLnksIGUuel1dOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3JuZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgd29ybGRDb3JuZXJUZW1wUG9zLnNldChjb3JuZXJzW2ldWzBdLCBjb3JuZXJzW2ldWzFdLCBjb3JuZXJzW2ldWzJdKTsKICAgICAgICBxdWF0LnZtdWx0KHdvcmxkQ29ybmVyVGVtcFBvcywgd29ybGRDb3JuZXJUZW1wUG9zKTsKICAgICAgICBwb3MudmFkZCh3b3JsZENvcm5lclRlbXBQb3MsIHdvcmxkQ29ybmVyVGVtcFBvcyk7CiAgICAgICAgY2FsbGJhY2sod29ybGRDb3JuZXJUZW1wUG9zLngsIHdvcmxkQ29ybmVyVGVtcFBvcy55LCB3b3JsZENvcm5lclRlbXBQb3Mueik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuaGFsZkV4dGVudHM7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbMF0uc2V0KGUueCwgZS55LCBlLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzFdLnNldCgtZS54LCBlLnksIGUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbMl0uc2V0KC1lLngsIC1lLnksIGUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbM10uc2V0KC1lLngsIC1lLnksIC1lLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzRdLnNldChlLngsIC1lLnksIC1lLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzVdLnNldChlLngsIGUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbNl0uc2V0KC1lLngsIGUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbN10uc2V0KGUueCwgLWUueSwgZS56KTsKICAgICAgY29uc3Qgd2MgPSB3b3JsZENvcm5lcnNUZW1wWzBdOwogICAgICBxdWF0LnZtdWx0KHdjLCB3Yyk7CiAgICAgIHBvcy52YWRkKHdjLCB3Yyk7CiAgICAgIG1heC5jb3B5KHdjKTsKICAgICAgbWluLmNvcHkod2MpOwoKICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCA4OyBpKyspIHsKICAgICAgICBjb25zdCB3YyA9IHdvcmxkQ29ybmVyc1RlbXBbaV07CiAgICAgICAgcXVhdC52bXVsdCh3Yywgd2MpOwogICAgICAgIHBvcy52YWRkKHdjLCB3Yyk7CiAgICAgICAgY29uc3QgeCA9IHdjLng7CiAgICAgICAgY29uc3QgeSA9IHdjLnk7CiAgICAgICAgY29uc3QgeiA9IHdjLno7CgogICAgICAgIGlmICh4ID4gbWF4LngpIHsKICAgICAgICAgIG1heC54ID0geDsKICAgICAgICB9CgogICAgICAgIGlmICh5ID4gbWF4LnkpIHsKICAgICAgICAgIG1heC55ID0geTsKICAgICAgICB9CgogICAgICAgIGlmICh6ID4gbWF4LnopIHsKICAgICAgICAgIG1heC56ID0gejsKICAgICAgICB9CgogICAgICAgIGlmICh4IDwgbWluLngpIHsKICAgICAgICAgIG1pbi54ID0geDsKICAgICAgICB9CgogICAgICAgIGlmICh5IDwgbWluLnkpIHsKICAgICAgICAgIG1pbi55ID0geTsKICAgICAgICB9CgogICAgICAgIGlmICh6IDwgbWluLnopIHsKICAgICAgICAgIG1pbi56ID0gejsKICAgICAgICB9CiAgICAgIH0gLy8gR2V0IGVhY2ggYXhpcyBtYXgKICAgICAgLy8gbWluLnNldChJbmZpbml0eSxJbmZpbml0eSxJbmZpbml0eSk7CiAgICAgIC8vIG1heC5zZXQoLUluZmluaXR5LC1JbmZpbml0eSwtSW5maW5pdHkpOwogICAgICAvLyB0aGlzLmZvckVhY2hXb3JsZENvcm5lcihwb3MscXVhdCxmdW5jdGlvbih4LHkseil7CiAgICAgIC8vICAgICBpZih4ID4gbWF4LngpewogICAgICAvLyAgICAgICAgIG1heC54ID0geDsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGlmKHkgPiBtYXgueSl7CiAgICAgIC8vICAgICAgICAgbWF4LnkgPSB5OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeiA+IG1heC56KXsKICAgICAgLy8gICAgICAgICBtYXgueiA9IHo7CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBpZih4IDwgbWluLngpewogICAgICAvLyAgICAgICAgIG1pbi54ID0geDsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGlmKHkgPCBtaW4ueSl7CiAgICAgIC8vICAgICAgICAgbWluLnkgPSB5OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeiA8IG1pbi56KXsKICAgICAgLy8gICAgICAgICBtaW4ueiA9IHo7CiAgICAgIC8vICAgICB9CiAgICAgIC8vIH0pOwoKICAgIH0KCiAgfQoKICBjb25zdCB3b3JsZENvcm5lclRlbXBQb3MgPSBuZXcgVmVjMygpOwogIGNvbnN0IHdvcmxkQ29ybmVyc1RlbXAgPSBbbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKV07CiAgLyoqCiAgICogQk9EWV9UWVBFUwogICAqLwoKICBjb25zdCBCT0RZX1RZUEVTID0gewogICAgLyoqIERZTkFNSUMgKi8KICAgIERZTkFNSUM6IDEsCgogICAgLyoqIFNUQVRJQyAqLwogICAgU1RBVElDOiAyLAoKICAgIC8qKiBLSU5FTUFUSUMgKi8KICAgIEtJTkVNQVRJQzogNAogIH07CiAgLyoqCiAgICogQm9keVR5cGUKICAgKi8KCiAgLyoqCiAgICogQk9EWV9TTEVFUF9TVEFURVMKICAgKi8KCiAgY29uc3QgQk9EWV9TTEVFUF9TVEFURVMgPSB7CiAgICAvKiogQVdBS0UgKi8KICAgIEFXQUtFOiAwLAoKICAgIC8qKiBTTEVFUFkgKi8KICAgIFNMRUVQWTogMSwKCiAgICAvKiogU0xFRVBJTkcgKi8KICAgIFNMRUVQSU5HOiAyCiAgfTsKICAvKioKICAgKiBCb2R5U2xlZXBTdGF0ZQogICAqLwoKICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBhbGwgYm9keSB0eXBlcy4KICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCBzaGFwZSA9IG5ldyBDQU5OT04uU3BoZXJlKDEpCiAgICogICAgIGNvbnN0IGJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoewogICAqICAgICAgIG1hc3M6IDEsCiAgICogICAgICAgc2hhcGUsCiAgICogICAgIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoYm9keSkKICAgKi8KCiAgY2xhc3MgQm9keSBleHRlbmRzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciB0d28gYm9kaWVzIGNvbGxpZGUuIFRoaXMgZXZlbnQgaXMgZGlzcGF0Y2hlZCBvbiBlYWNoCiAgICAgKiBvZiB0aGUgdHdvIGJvZGllcyBpbnZvbHZlZCBpbiB0aGUgY29sbGlzaW9uLgogICAgICogQGV2ZW50IGNvbGxpZGUKICAgICAqIEBwYXJhbSBib2R5IFRoZSBib2R5IHRoYXQgd2FzIGludm9sdmVkIGluIHRoZSBjb2xsaXNpb24uCiAgICAgKiBAcGFyYW0gY29udGFjdCBUaGUgZGV0YWlscyBvZiB0aGUgY29sbGlzaW9uLgogICAgICovCgogICAgLyoqCiAgICAgKiBBIGR5bmFtaWMgYm9keSBpcyBmdWxseSBzaW11bGF0ZWQuIENhbiBiZSBtb3ZlZCBtYW51YWxseSBieSB0aGUgdXNlciwgYnV0IG5vcm1hbGx5IHRoZXkgbW92ZSBhY2NvcmRpbmcgdG8gZm9yY2VzLiBBIGR5bmFtaWMgYm9keSBjYW4gY29sbGlkZSB3aXRoIGFsbCBib2R5IHR5cGVzLiBBIGR5bmFtaWMgYm9keSBhbHdheXMgaGFzIGZpbml0ZSwgbm9uLXplcm8gbWFzcy4KICAgICAqLwoKICAgIC8qKgogICAgICogQSBzdGF0aWMgYm9keSBkb2VzIG5vdCBtb3ZlIGR1cmluZyBzaW11bGF0aW9uIGFuZCBiZWhhdmVzIGFzIGlmIGl0IGhhcyBpbmZpbml0ZSBtYXNzLiBTdGF0aWMgYm9kaWVzIGNhbiBiZSBtb3ZlZCBtYW51YWxseSBieSBzZXR0aW5nIHRoZSBwb3NpdGlvbiBvZiB0aGUgYm9keS4gVGhlIHZlbG9jaXR5IG9mIGEgc3RhdGljIGJvZHkgaXMgYWx3YXlzIHplcm8uIFN0YXRpYyBib2RpZXMgZG8gbm90IGNvbGxpZGUgd2l0aCBvdGhlciBzdGF0aWMgb3Iga2luZW1hdGljIGJvZGllcy4KICAgICAqLwoKICAgIC8qKgogICAgICogQSBraW5lbWF0aWMgYm9keSBtb3ZlcyB1bmRlciBzaW11bGF0aW9uIGFjY29yZGluZyB0byBpdHMgdmVsb2NpdHkuIFRoZXkgZG8gbm90IHJlc3BvbmQgdG8gZm9yY2VzLiBUaGV5IGNhbiBiZSBtb3ZlZCBtYW51YWxseSwgYnV0IG5vcm1hbGx5IGEga2luZW1hdGljIGJvZHkgaXMgbW92ZWQgYnkgc2V0dGluZyBpdHMgdmVsb2NpdHkuIEEga2luZW1hdGljIGJvZHkgYmVoYXZlcyBhcyBpZiBpdCBoYXMgaW5maW5pdGUgbWFzcy4gS2luZW1hdGljIGJvZGllcyBkbyBub3QgY29sbGlkZSB3aXRoIG90aGVyIHN0YXRpYyBvciBraW5lbWF0aWMgYm9kaWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBBV0FLRQogICAgICovCgogICAgLyoqCiAgICAgKiBTTEVFUFkKICAgICAqLwoKICAgIC8qKgogICAgICogU0xFRVBJTkcKICAgICAqLwoKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciBhIHNsZWVwaW5nIGJvZHkgaGFzIHdva2VuIHVwLgogICAgICogQGV2ZW50IHdha2V1cAogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgZ29uZSBpbiB0byB0aGUgc2xlZXB5IHN0YXRlLgogICAgICogQGV2ZW50IHNsZWVweQogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgZmFsbGVuIGFzbGVlcC4KICAgICAqIEBldmVudCBzbGVlcAogICAgICovCgogICAgLyoqCiAgICAgKiBJZGVudGlmaWVyIG9mIHRoZSBib2R5LgogICAgICovCgogICAgLyoqCiAgICAgKiBQb3NpdGlvbiBvZiBib2R5IGluIFdvcmxkLmJvZGllcy4gVXBkYXRlZCBieSBXb3JsZCBhbmQgdXNlZCBpbiBBcnJheUNvbGxpc2lvbk1hdHJpeC4KICAgICAqLwoKICAgIC8qKgogICAgICogUmVmZXJlbmNlIHRvIHRoZSB3b3JsZCB0aGUgYm9keSBpcyBsaXZpbmcgaW4uCiAgICAgKi8KCiAgICAvKioKICAgICAqIENhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgaXMgdXNlZCBCRUZPUkUgc3RlcHBpbmcgdGhlIHN5c3RlbS4gVXNlIGl0IHRvIGFwcGx5IGZvcmNlcywgZm9yIGV4YW1wbGUuIEluc2lkZSB0aGUgZnVuY3Rpb24sICJ0aGlzIiB3aWxsIHJlZmVyIHRvIHRoaXMgQm9keSBvYmplY3QuIERlcHJlY2F0ZWQgLSB1c2UgV29ybGQgZXZlbnRzIGluc3RlYWQuCiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgV29ybGQgZXZlbnRzIGluc3RlYWQKICAgICAqLwoKICAgIC8qKgogICAgICogQ2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIEFGVEVSIHN0ZXBwaW5nIHRoZSBzeXN0ZW0uIEluc2lkZSB0aGUgZnVuY3Rpb24sICJ0aGlzIiB3aWxsIHJlZmVyIHRvIHRoaXMgQm9keSBvYmplY3QuIERlcHJlY2F0ZWQgLSB1c2UgV29ybGQgZXZlbnRzIGluc3RlYWQuCiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgV29ybGQgZXZlbnRzIGluc3RlYWQKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGNvbGxpc2lvbiBncm91cCB0aGUgYm9keSBiZWxvbmdzIHRvLgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgY29sbGlzaW9uIGdyb3VwIHRoZSBib2R5IGNhbiBjb2xsaWRlIHdpdGguCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBXaGV0aGVyIHRvIHByb2R1Y2UgY29udGFjdCBmb3JjZXMgd2hlbiBpbiBjb250YWN0IHdpdGggb3RoZXIgYm9kaWVzLiBOb3RlIHRoYXQgY29udGFjdHMgd2lsbCBiZSBnZW5lcmF0ZWQsIGJ1dCB0aGV5IHdpbGwgYmUgZGlzYWJsZWQgLSBpLmUuICJjb2xsaWRlIiBldmVudHMgd2lsbCBiZSByYWlzZWQsIGJ1dCBmb3JjZXMgd2lsbCBub3QgYmUgYWx0ZXJlZC4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgc3BhY2UgcG9zaXRpb24gb2YgdGhlIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEludGVycG9sYXRlZCBwb3NpdGlvbiBvZiB0aGUgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogSW5pdGlhbCBwb3NpdGlvbiBvZiB0aGUgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgc3BhY2UgdmVsb2NpdHkgb2YgdGhlIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEluaXRpYWwgdmVsb2NpdHkgb2YgdGhlIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIExpbmVhciBmb3JjZSBvbiB0aGUgYm9keSBpbiB3b3JsZCBzcGFjZS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIG1hc3Mgb2YgdGhlIGJvZHkuCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBwaHlzaWNzIG1hdGVyaWFsIG9mIHRoZSBib2R5LiBJdCBkZWZpbmVzIHRoZSBib2R5IGludGVyYWN0aW9uIHdpdGggb3RoZXIgYm9kaWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBIb3cgbXVjaCB0byBkYW1wIHRoZSBib2R5IHZlbG9jaXR5IGVhY2ggc3RlcC4gSXQgY2FuIGdvIGZyb20gMCB0byAxLgogICAgICogQGRlZmF1bHQgMC4wMQogICAgICovCgogICAgLyoqCiAgICAgKiBPbmUgb2Y6IGBCb2R5LkRZTkFNSUNgLCBgQm9keS5TVEFUSUNgIGFuZCBgQm9keS5LSU5FTUFUSUNgLgogICAgICovCgogICAgLyoqCiAgICAgKiBJZiB0cnVlLCB0aGUgYm9keSB3aWxsIGF1dG9tYXRpY2FsbHkgZmFsbCB0byBzbGVlcC4KICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogQ3VycmVudCBzbGVlcCBzdGF0ZS4KICAgICAqLwoKICAgIC8qKgogICAgICogSWYgdGhlIHNwZWVkICh0aGUgbm9ybSBvZiB0aGUgdmVsb2NpdHkpIGlzIHNtYWxsZXIgdGhhbiB0aGlzIHZhbHVlLCB0aGUgYm9keSBpcyBjb25zaWRlcmVkIHNsZWVweS4KICAgICAqIEBkZWZhdWx0IDAuMQogICAgICovCgogICAgLyoqCiAgICAgKiBJZiB0aGUgYm9keSBoYXMgYmVlbiBzbGVlcHkgZm9yIHRoaXMgc2xlZXBUaW1lTGltaXQgc2Vjb25kcywgaXQgaXMgY29uc2lkZXJlZCBzbGVlcGluZy4KICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgc3BhY2Ugcm90YXRpb25hbCBmb3JjZSBvbiB0aGUgYm9keSwgYXJvdW5kIGNlbnRlciBvZiBtYXNzLgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBzcGFjZSBvcmllbnRhdGlvbiBvZiB0aGUgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogSW5pdGlhbCBxdWF0ZXJuaW9uIG9mIHRoZSBib2R5LgogICAgICovCgogICAgLyoqCiAgICAgKiBJbnRlcnBvbGF0ZWQgb3JpZW50YXRpb24gb2YgdGhlIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFuZ3VsYXIgdmVsb2NpdHkgb2YgdGhlIGJvZHksIGluIHdvcmxkIHNwYWNlLiBUaGluayBvZiB0aGUgYW5ndWxhciB2ZWxvY2l0eSBhcyBhIHZlY3Rvciwgd2hpY2ggdGhlIGJvZHkgcm90YXRlcyBhcm91bmQuIFRoZSBsZW5ndGggb2YgdGhpcyB2ZWN0b3IgZGV0ZXJtaW5lcyBob3cgZmFzdCAoaW4gcmFkaWFucyBwZXIgc2Vjb25kKSB0aGUgYm9keSByb3RhdGVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBJbml0aWFsIGFuZ3VsYXIgdmVsb2NpdHkgb2YgdGhlIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIExpc3Qgb2YgU2hhcGVzIHRoYXQgaGF2ZSBiZWVuIGFkZGVkIHRvIHRoZSBib2R5LgogICAgICovCgogICAgLyoqCiAgICAgKiBQb3NpdGlvbiBvZiBlYWNoIFNoYXBlIGluIHRoZSBib2R5LCBnaXZlbiBpbiBsb2NhbCBCb2R5IHNwYWNlLgogICAgICovCgogICAgLyoqCiAgICAgKiBPcmllbnRhdGlvbiBvZiBlYWNoIFNoYXBlLCBnaXZlbiBpbiBsb2NhbCBCb2R5IHNwYWNlLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgaW5lcnRpYSBvZiB0aGUgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogU2V0IHRvIHRydWUgaWYgeW91IGRvbid0IHdhbnQgdGhlIGJvZHkgdG8gcm90YXRlLiBNYWtlIHN1cmUgdG8gcnVuIC51cGRhdGVNYXNzUHJvcGVydGllcygpIGlmIHlvdSBjaGFuZ2UgdGhpcyBhZnRlciB0aGUgYm9keSBjcmVhdGlvbi4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIEhvdyBtdWNoIHRvIGRhbXAgdGhlIGJvZHkgYW5ndWxhciB2ZWxvY2l0eSBlYWNoIHN0ZXAuIEl0IGNhbiBnbyBmcm9tIDAgdG8gMS4KICAgICAqIEBkZWZhdWx0IDAuMDEKICAgICAqLwoKICAgIC8qKgogICAgICogVXNlIHRoaXMgcHJvcGVydHkgdG8gbGltaXQgdGhlIG1vdGlvbiBhbG9uZyBhbnkgd29ybGQgYXhpcy4gKDEsMSwxKSB3aWxsIGFsbG93IG1vdGlvbiBhbG9uZyBhbGwgYXhlcyB3aGlsZSAoMCwwLDApIGFsbG93cyBub25lLgogICAgICovCgogICAgLyoqCiAgICAgKiBVc2UgdGhpcyBwcm9wZXJ0eSB0byBsaW1pdCB0aGUgcm90YXRpb25hbCBtb3Rpb24gYWxvbmcgYW55IHdvcmxkIGF4aXMuICgxLDEsMSkgd2lsbCBhbGxvdyByb3RhdGlvbiBhbG9uZyBhbGwgYXhlcyB3aGlsZSAoMCwwLDApIGFsbG93cyBub25lLgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBzcGFjZSBib3VuZGluZyBib3ggb2YgdGhlIGJvZHkgYW5kIGl0cyBzaGFwZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEluZGljYXRlcyBpZiB0aGUgQUFCQiBuZWVkcyB0byBiZSB1cGRhdGVkIGJlZm9yZSB1c2UuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRvdGFsIGJvdW5kaW5nIHJhZGl1cyBvZiB0aGUgQm9keSBpbmNsdWRpbmcgaXRzIHNoYXBlcywgcmVsYXRpdmUgdG8gYm9keS5wb3NpdGlvbi4KICAgICAqLwoKICAgIC8qKgogICAgICogV2hlbiB0cnVlIHRoZSBib2R5IGJlaGF2ZXMgbGlrZSBhIHRyaWdnZXIuIEl0IGRvZXMgbm90IGNvbGxpZGUKICAgICAqIHdpdGggb3RoZXIgYm9kaWVzIGJ1dCBjb2xsaXNpb24gZXZlbnRzIGFyZSBzdGlsbCB0cmlnZ2VyZWQuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuaWQgPSB2b2lkIDA7CiAgICAgIHRoaXMuaW5kZXggPSB2b2lkIDA7CiAgICAgIHRoaXMud29ybGQgPSB2b2lkIDA7CiAgICAgIHRoaXMucHJlU3RlcCA9IHZvaWQgMDsKICAgICAgdGhpcy5wb3N0U3RlcCA9IHZvaWQgMDsKICAgICAgdGhpcy52bGFtYmRhID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB2b2lkIDA7CiAgICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSB2b2lkIDA7CiAgICAgIHRoaXMucG9zaXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRQb3NpdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5pbml0UG9zaXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMudmVsb2NpdHkgPSB2b2lkIDA7CiAgICAgIHRoaXMuaW5pdFZlbG9jaXR5ID0gdm9pZCAwOwogICAgICB0aGlzLmZvcmNlID0gdm9pZCAwOwogICAgICB0aGlzLm1hc3MgPSB2b2lkIDA7CiAgICAgIHRoaXMuaW52TWFzcyA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXRlcmlhbCA9IHZvaWQgMDsKICAgICAgdGhpcy5saW5lYXJEYW1waW5nID0gdm9pZCAwOwogICAgICB0aGlzLnR5cGUgPSB2b2lkIDA7CiAgICAgIHRoaXMuYWxsb3dTbGVlcCA9IHZvaWQgMDsKICAgICAgdGhpcy5zbGVlcFN0YXRlID0gdm9pZCAwOwogICAgICB0aGlzLnNsZWVwU3BlZWRMaW1pdCA9IHZvaWQgMDsKICAgICAgdGhpcy5zbGVlcFRpbWVMaW1pdCA9IHZvaWQgMDsKICAgICAgdGhpcy50aW1lTGFzdFNsZWVweSA9IHZvaWQgMDsKICAgICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gdm9pZCAwOwogICAgICB0aGlzLnRvcnF1ZSA9IHZvaWQgMDsKICAgICAgdGhpcy5xdWF0ZXJuaW9uID0gdm9pZCAwOwogICAgICB0aGlzLmluaXRRdWF0ZXJuaW9uID0gdm9pZCAwOwogICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRRdWF0ZXJuaW9uID0gdm9pZCAwOwogICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eSA9IHZvaWQgMDsKICAgICAgdGhpcy5pbml0QW5ndWxhclZlbG9jaXR5ID0gdm9pZCAwOwogICAgICB0aGlzLnNoYXBlcyA9IHZvaWQgMDsKICAgICAgdGhpcy5zaGFwZU9mZnNldHMgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2hhcGVPcmllbnRhdGlvbnMgPSB2b2lkIDA7CiAgICAgIHRoaXMuaW5lcnRpYSA9IHZvaWQgMDsKICAgICAgdGhpcy5pbnZJbmVydGlhID0gdm9pZCAwOwogICAgICB0aGlzLmludkluZXJ0aWFXb3JsZCA9IHZvaWQgMDsKICAgICAgdGhpcy5pbnZNYXNzU29sdmUgPSB2b2lkIDA7CiAgICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlID0gdm9pZCAwOwogICAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlID0gdm9pZCAwOwogICAgICB0aGlzLmZpeGVkUm90YXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuYW5ndWxhckRhbXBpbmcgPSB2b2lkIDA7CiAgICAgIHRoaXMubGluZWFyRmFjdG9yID0gdm9pZCAwOwogICAgICB0aGlzLmFuZ3VsYXJGYWN0b3IgPSB2b2lkIDA7CiAgICAgIHRoaXMuYWFiYiA9IHZvaWQgMDsKICAgICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSB2b2lkIDA7CiAgICAgIHRoaXMuYm91bmRpbmdSYWRpdXMgPSB2b2lkIDA7CiAgICAgIHRoaXMud2xhbWJkYSA9IHZvaWQgMDsKICAgICAgdGhpcy5pc1RyaWdnZXIgPSB2b2lkIDA7CiAgICAgIHRoaXMuaWQgPSBCb2R5LmlkQ291bnRlcisrOwogICAgICB0aGlzLmluZGV4ID0gLTE7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLnByZVN0ZXAgPSBudWxsOwogICAgICB0aGlzLnBvc3RTdGVwID0gbnVsbDsKICAgICAgdGhpcy52bGFtYmRhID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IHR5cGVvZiBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwID09PSAnbnVtYmVyJyA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyR3JvdXAgOiAxOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrID09PSAnbnVtYmVyJyA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xOwogICAgICB0aGlzLmNvbGxpc2lvblJlc3BvbnNlID0gdHlwZW9mIG9wdGlvbnMuY29sbGlzaW9uUmVzcG9uc2UgPT09ICdib29sZWFuJyA/IG9wdGlvbnMuY29sbGlzaW9uUmVzcG9uc2UgOiB0cnVlOwogICAgICB0aGlzLnBvc2l0aW9uID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRQb3NpdGlvbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaW5pdFBvc2l0aW9uID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLnBvc2l0aW9uKSB7CiAgICAgICAgdGhpcy5wb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pOwogICAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pOwogICAgICAgIHRoaXMuaW50ZXJwb2xhdGVkUG9zaXRpb24uY29weShvcHRpb25zLnBvc2l0aW9uKTsKICAgICAgICB0aGlzLmluaXRQb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pOwogICAgICB9CgogICAgICB0aGlzLnZlbG9jaXR5ID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLnZlbG9jaXR5KSB7CiAgICAgICAgdGhpcy52ZWxvY2l0eS5jb3B5KG9wdGlvbnMudmVsb2NpdHkpOwogICAgICB9CgogICAgICB0aGlzLmluaXRWZWxvY2l0eSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuZm9yY2UgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBtYXNzID0gdHlwZW9mIG9wdGlvbnMubWFzcyA9PT0gJ251bWJlcicgPyBvcHRpb25zLm1hc3MgOiAwOwogICAgICB0aGlzLm1hc3MgPSBtYXNzOwogICAgICB0aGlzLmludk1hc3MgPSBtYXNzID4gMCA/IDEuMCAvIG1hc3MgOiAwOwogICAgICB0aGlzLm1hdGVyaWFsID0gb3B0aW9ucy5tYXRlcmlhbCB8fCBudWxsOwogICAgICB0aGlzLmxpbmVhckRhbXBpbmcgPSB0eXBlb2Ygb3B0aW9ucy5saW5lYXJEYW1waW5nID09PSAnbnVtYmVyJyA/IG9wdGlvbnMubGluZWFyRGFtcGluZyA6IDAuMDE7CiAgICAgIHRoaXMudHlwZSA9IG1hc3MgPD0gMC4wID8gQm9keS5TVEFUSUMgOiBCb2R5LkRZTkFNSUM7CgogICAgICBpZiAodHlwZW9mIG9wdGlvbnMudHlwZSA9PT0gdHlwZW9mIEJvZHkuU1RBVElDKSB7CiAgICAgICAgdGhpcy50eXBlID0gb3B0aW9ucy50eXBlOwogICAgICB9CgogICAgICB0aGlzLmFsbG93U2xlZXAgPSB0eXBlb2Ygb3B0aW9ucy5hbGxvd1NsZWVwICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYWxsb3dTbGVlcCA6IHRydWU7CiAgICAgIHRoaXMuc2xlZXBTdGF0ZSA9IEJvZHkuQVdBS0U7CiAgICAgIHRoaXMuc2xlZXBTcGVlZExpbWl0ID0gdHlwZW9mIG9wdGlvbnMuc2xlZXBTcGVlZExpbWl0ICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuc2xlZXBTcGVlZExpbWl0IDogMC4xOwogICAgICB0aGlzLnNsZWVwVGltZUxpbWl0ID0gdHlwZW9mIG9wdGlvbnMuc2xlZXBUaW1lTGltaXQgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5zbGVlcFRpbWVMaW1pdCA6IDE7CiAgICAgIHRoaXMudGltZUxhc3RTbGVlcHkgPSAwOwogICAgICB0aGlzLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSBmYWxzZTsKICAgICAgdGhpcy50b3JxdWUgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB0aGlzLmluaXRRdWF0ZXJuaW9uID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgdGhpcy5wcmV2aW91c1F1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB0aGlzLmludGVycG9sYXRlZFF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwoKICAgICAgaWYgKG9wdGlvbnMucXVhdGVybmlvbikgewogICAgICAgIHRoaXMucXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7CiAgICAgICAgdGhpcy5pbml0UXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7CiAgICAgICAgdGhpcy5wcmV2aW91c1F1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICAgIHRoaXMuaW50ZXJwb2xhdGVkUXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7CiAgICAgIH0KCiAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5ID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLmFuZ3VsYXJWZWxvY2l0eSkgewogICAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LmNvcHkob3B0aW9ucy5hbmd1bGFyVmVsb2NpdHkpOwogICAgICB9CgogICAgICB0aGlzLmluaXRBbmd1bGFyVmVsb2NpdHkgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnNoYXBlcyA9IFtdOwogICAgICB0aGlzLnNoYXBlT2Zmc2V0cyA9IFtdOwogICAgICB0aGlzLnNoYXBlT3JpZW50YXRpb25zID0gW107CiAgICAgIHRoaXMuaW5lcnRpYSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaW52SW5lcnRpYSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkID0gbmV3IE1hdDMoKTsKICAgICAgdGhpcy5pbnZNYXNzU29sdmUgPSAwOwogICAgICB0aGlzLmludkluZXJ0aWFTb2x2ZSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkU29sdmUgPSBuZXcgTWF0MygpOwogICAgICB0aGlzLmZpeGVkUm90YXRpb24gPSB0eXBlb2Ygb3B0aW9ucy5maXhlZFJvdGF0aW9uICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuZml4ZWRSb3RhdGlvbiA6IGZhbHNlOwogICAgICB0aGlzLmFuZ3VsYXJEYW1waW5nID0gdHlwZW9mIG9wdGlvbnMuYW5ndWxhckRhbXBpbmcgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5hbmd1bGFyRGFtcGluZyA6IDAuMDE7CiAgICAgIHRoaXMubGluZWFyRmFjdG9yID0gbmV3IFZlYzMoMSwgMSwgMSk7CgogICAgICBpZiAob3B0aW9ucy5saW5lYXJGYWN0b3IpIHsKICAgICAgICB0aGlzLmxpbmVhckZhY3Rvci5jb3B5KG9wdGlvbnMubGluZWFyRmFjdG9yKTsKICAgICAgfQoKICAgICAgdGhpcy5hbmd1bGFyRmFjdG9yID0gbmV3IFZlYzMoMSwgMSwgMSk7CgogICAgICBpZiAob3B0aW9ucy5hbmd1bGFyRmFjdG9yKSB7CiAgICAgICAgdGhpcy5hbmd1bGFyRmFjdG9yLmNvcHkob3B0aW9ucy5hbmd1bGFyRmFjdG9yKTsKICAgICAgfQoKICAgICAgdGhpcy5hYWJiID0gbmV3IEFBQkIoKTsKICAgICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLmJvdW5kaW5nUmFkaXVzID0gMDsKICAgICAgdGhpcy53bGFtYmRhID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pc1RyaWdnZXIgPSBCb29sZWFuKG9wdGlvbnMuaXNUcmlnZ2VyKTsKCiAgICAgIGlmIChvcHRpb25zLnNoYXBlKSB7CiAgICAgICAgdGhpcy5hZGRTaGFwZShvcHRpb25zLnNoYXBlKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVNYXNzUHJvcGVydGllcygpOwogICAgfQogICAgLyoqCiAgICAgKiBXYWtlIHRoZSBib2R5IHVwLgogICAgICovCgoKICAgIHdha2VVcCgpIHsKICAgICAgY29uc3QgcHJldlN0YXRlID0gdGhpcy5zbGVlcFN0YXRlOwogICAgICB0aGlzLnNsZWVwU3RhdGUgPSBCb2R5LkFXQUtFOwogICAgICB0aGlzLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSBmYWxzZTsKCiAgICAgIGlmIChwcmV2U3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoQm9keS53YWtldXBFdmVudCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogRm9yY2UgYm9keSBzbGVlcAogICAgICovCgoKICAgIHNsZWVwKCkgewogICAgICB0aGlzLnNsZWVwU3RhdGUgPSBCb2R5LlNMRUVQSU5HOwogICAgICB0aGlzLnZlbG9jaXR5LnNldCgwLCAwLCAwKTsKICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkuc2V0KDAsIDAsIDApOwogICAgICB0aGlzLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogQ2FsbGVkIGV2ZXJ5IHRpbWVzdGVwIHRvIHVwZGF0ZSBpbnRlcm5hbCBzbGVlcCB0aW1lciBhbmQgY2hhbmdlIHNsZWVwIHN0YXRlIGlmIG5lZWRlZC4KICAgICAqIEBwYXJhbSB0aW1lIFRoZSB3b3JsZCB0aW1lIGluIHNlY29uZHMKICAgICAqLwoKCiAgICBzbGVlcFRpY2sodGltZSkgewogICAgICBpZiAodGhpcy5hbGxvd1NsZWVwKSB7CiAgICAgICAgY29uc3Qgc2xlZXBTdGF0ZSA9IHRoaXMuc2xlZXBTdGF0ZTsKICAgICAgICBjb25zdCBzcGVlZFNxdWFyZWQgPSB0aGlzLnZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKSArIHRoaXMuYW5ndWxhclZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKTsKICAgICAgICBjb25zdCBzcGVlZExpbWl0U3F1YXJlZCA9IHRoaXMuc2xlZXBTcGVlZExpbWl0ICoqIDI7CgogICAgICAgIGlmIChzbGVlcFN0YXRlID09PSBCb2R5LkFXQUtFICYmIHNwZWVkU3F1YXJlZCA8IHNwZWVkTGltaXRTcXVhcmVkKSB7CiAgICAgICAgICB0aGlzLnNsZWVwU3RhdGUgPSBCb2R5LlNMRUVQWTsgLy8gU2xlZXB5CgogICAgICAgICAgdGhpcy50aW1lTGFzdFNsZWVweSA9IHRpbWU7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoQm9keS5zbGVlcHlFdmVudCk7CiAgICAgICAgfSBlbHNlIGlmIChzbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQWSAmJiBzcGVlZFNxdWFyZWQgPiBzcGVlZExpbWl0U3F1YXJlZCkgewogICAgICAgICAgdGhpcy53YWtlVXAoKTsgLy8gV2FrZSB1cAogICAgICAgIH0gZWxzZSBpZiAoc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUFkgJiYgdGltZSAtIHRoaXMudGltZUxhc3RTbGVlcHkgPiB0aGlzLnNsZWVwVGltZUxpbWl0KSB7CiAgICAgICAgICB0aGlzLnNsZWVwKCk7IC8vIFNsZWVwaW5nCgogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KEJvZHkuc2xlZXBFdmVudCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIElmIHRoZSBib2R5IGlzIHNsZWVwaW5nLCBpdCBzaG91bGQgYmUgaW1tb3ZhYmxlIC8gaGF2ZSBpbmZpbml0ZSBtYXNzIGR1cmluZyBzb2x2ZS4gV2Ugc29sdmUgaXQgYnkgaGF2aW5nIGEgc2VwYXJhdGUgInNvbHZlIG1hc3MiLgogICAgICovCgoKICAgIHVwZGF0ZVNvbHZlTWFzc1Byb3BlcnRpZXMoKSB7CiAgICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgfHwgdGhpcy50eXBlID09PSBCb2R5LktJTkVNQVRJQykgewogICAgICAgIHRoaXMuaW52TWFzc1NvbHZlID0gMDsKICAgICAgICB0aGlzLmludkluZXJ0aWFTb2x2ZS5zZXRaZXJvKCk7CiAgICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZS5zZXRaZXJvKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pbnZNYXNzU29sdmUgPSB0aGlzLmludk1hc3M7CiAgICAgICAgdGhpcy5pbnZJbmVydGlhU29sdmUuY29weSh0aGlzLmludkluZXJ0aWEpOwogICAgICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkU29sdmUuY29weSh0aGlzLmludkluZXJ0aWFXb3JsZCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCBhIHdvcmxkIHBvaW50IHRvIGxvY2FsIGJvZHkgZnJhbWUuCiAgICAgKi8KCgogICAgcG9pbnRUb0xvY2FsRnJhbWUod29ybGRQb2ludCwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHdvcmxkUG9pbnQudnN1Yih0aGlzLnBvc2l0aW9uLCByZXN1bHQpOwogICAgICB0aGlzLnF1YXRlcm5pb24uY29uanVnYXRlKCkudm11bHQocmVzdWx0LCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IGEgd29ybGQgdmVjdG9yIHRvIGxvY2FsIGJvZHkgZnJhbWUuCiAgICAgKi8KCgogICAgdmVjdG9yVG9Mb2NhbEZyYW1lKHdvcmxkVmVjdG9yLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGhpcy5xdWF0ZXJuaW9uLmNvbmp1Z2F0ZSgpLnZtdWx0KHdvcmxkVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IGEgbG9jYWwgYm9keSBwb2ludCB0byB3b3JsZCBmcmFtZS4KICAgICAqLwoKCiAgICBwb2ludFRvV29ybGRGcmFtZShsb2NhbFBvaW50LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGhpcy5xdWF0ZXJuaW9uLnZtdWx0KGxvY2FsUG9pbnQsIHJlc3VsdCk7CiAgICAgIHJlc3VsdC52YWRkKHRoaXMucG9zaXRpb24sIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgYSBsb2NhbCBib2R5IHBvaW50IHRvIHdvcmxkIGZyYW1lLgogICAgICovCgoKICAgIHZlY3RvclRvV29ybGRGcmFtZShsb2NhbFZlY3RvciwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMucXVhdGVybmlvbi52bXVsdChsb2NhbFZlY3RvciwgcmVzdWx0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGEgc2hhcGUgdG8gdGhlIGJvZHkgd2l0aCBhIGxvY2FsIG9mZnNldCBhbmQgb3JpZW50YXRpb24uCiAgICAgKiBAcmV0dXJuIFRoZSBib2R5IG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS4KICAgICAqLwoKCiAgICBhZGRTaGFwZShzaGFwZSwgX29mZnNldCwgX29yaWVudGF0aW9uKSB7CiAgICAgIGNvbnN0IG9mZnNldCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IG9yaWVudGF0aW9uID0gbmV3IFF1YXRlcm5pb24oKTsKCiAgICAgIGlmIChfb2Zmc2V0KSB7CiAgICAgICAgb2Zmc2V0LmNvcHkoX29mZnNldCk7CiAgICAgIH0KCiAgICAgIGlmIChfb3JpZW50YXRpb24pIHsKICAgICAgICBvcmllbnRhdGlvbi5jb3B5KF9vcmllbnRhdGlvbik7CiAgICAgIH0KCiAgICAgIHRoaXMuc2hhcGVzLnB1c2goc2hhcGUpOwogICAgICB0aGlzLnNoYXBlT2Zmc2V0cy5wdXNoKG9mZnNldCk7CiAgICAgIHRoaXMuc2hhcGVPcmllbnRhdGlvbnMucHVzaChvcmllbnRhdGlvbik7CiAgICAgIHRoaXMudXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1JhZGl1cygpOwogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHNoYXBlLmJvZHkgPSB0aGlzOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIGEgc2hhcGUgZnJvbSB0aGUgYm9keS4KICAgICAqIEByZXR1cm4gVGhlIGJvZHkgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIHJlbW92ZVNoYXBlKHNoYXBlKSB7CiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zaGFwZXMuaW5kZXhPZihzaGFwZSk7CgogICAgICBpZiAoaW5kZXggPT09IC0xKSB7CiAgICAgICAgY29uc29sZS53YXJuKCdTaGFwZSBkb2VzIG5vdCBiZWxvbmcgdG8gdGhlIGJvZHknKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgdGhpcy5zaGFwZXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgdGhpcy5zaGFwZU9mZnNldHMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdSYWRpdXMoKTsKICAgICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICBzaGFwZS5ib2R5ID0gbnVsbDsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYm91bmRpbmcgcmFkaXVzIG9mIHRoZSBib2R5LiBTaG91bGQgYmUgZG9uZSBpZiBhbnkgb2YgdGhlIHNoYXBlcyBhcmUgY2hhbmdlZC4KICAgICAqLwoKCiAgICB1cGRhdGVCb3VuZGluZ1JhZGl1cygpIHsKICAgICAgY29uc3Qgc2hhcGVzID0gdGhpcy5zaGFwZXM7CiAgICAgIGNvbnN0IHNoYXBlT2Zmc2V0cyA9IHRoaXMuc2hhcGVPZmZzZXRzOwogICAgICBjb25zdCBOID0gc2hhcGVzLmxlbmd0aDsKICAgICAgbGV0IHJhZGl1cyA9IDA7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbaV07CiAgICAgICAgc2hhcGUudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgICAgICBjb25zdCBvZmZzZXQgPSBzaGFwZU9mZnNldHNbaV0ubGVuZ3RoKCk7CiAgICAgICAgY29uc3QgciA9IHNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzOwoKICAgICAgICBpZiAob2Zmc2V0ICsgciA+IHJhZGl1cykgewogICAgICAgICAgcmFkaXVzID0gb2Zmc2V0ICsgcjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuYm91bmRpbmdSYWRpdXMgPSByYWRpdXM7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZXMgdGhlIC5hYWJiCiAgICAgKi8KCgogICAgdXBkYXRlQUFCQigpIHsKICAgICAgY29uc3Qgc2hhcGVzID0gdGhpcy5zaGFwZXM7CiAgICAgIGNvbnN0IHNoYXBlT2Zmc2V0cyA9IHRoaXMuc2hhcGVPZmZzZXRzOwogICAgICBjb25zdCBzaGFwZU9yaWVudGF0aW9ucyA9IHRoaXMuc2hhcGVPcmllbnRhdGlvbnM7CiAgICAgIGNvbnN0IE4gPSBzaGFwZXMubGVuZ3RoOwogICAgICBjb25zdCBvZmZzZXQgPSB0bXBWZWM7CiAgICAgIGNvbnN0IG9yaWVudGF0aW9uID0gdG1wUXVhdDsKICAgICAgY29uc3QgYm9keVF1YXQgPSB0aGlzLnF1YXRlcm5pb247CiAgICAgIGNvbnN0IGFhYmIgPSB0aGlzLmFhYmI7CiAgICAgIGNvbnN0IHNoYXBlQUFCQiA9IHVwZGF0ZUFBQkJfc2hhcGVBQUJCOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IHNoYXBlID0gc2hhcGVzW2ldOyAvLyBHZXQgc2hhcGUgd29ybGQgcG9zaXRpb24KCiAgICAgICAgYm9keVF1YXQudm11bHQoc2hhcGVPZmZzZXRzW2ldLCBvZmZzZXQpOwogICAgICAgIG9mZnNldC52YWRkKHRoaXMucG9zaXRpb24sIG9mZnNldCk7IC8vIEdldCBzaGFwZSB3b3JsZCBxdWF0ZXJuaW9uCgogICAgICAgIGJvZHlRdWF0Lm11bHQoc2hhcGVPcmllbnRhdGlvbnNbaV0sIG9yaWVudGF0aW9uKTsgLy8gR2V0IHNoYXBlIEFBQkIKCiAgICAgICAgc2hhcGUuY2FsY3VsYXRlV29ybGRBQUJCKG9mZnNldCwgb3JpZW50YXRpb24sIHNoYXBlQUFCQi5sb3dlckJvdW5kLCBzaGFwZUFBQkIudXBwZXJCb3VuZCk7CgogICAgICAgIGlmIChpID09PSAwKSB7CiAgICAgICAgICBhYWJiLmNvcHkoc2hhcGVBQUJCKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWFiYi5leHRlbmQoc2hhcGVBQUJCKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSBgLmluZXJ0aWFXb3JsZGAgYW5kIGAuaW52SW5lcnRpYVdvcmxkYAogICAgICovCgoKICAgIHVwZGF0ZUluZXJ0aWFXb3JsZChmb3JjZSkgewogICAgICBjb25zdCBJID0gdGhpcy5pbnZJbmVydGlhOwogICAgICBpZiAoSS54ID09PSBJLnkgJiYgSS55ID09PSBJLnogJiYgIWZvcmNlKSA7ZWxzZSB7CiAgICAgICAgY29uc3QgbTEgPSB1aXdfbTE7CiAgICAgICAgY29uc3QgbTIgPSB1aXdfbTI7CiAgICAgICAgbTEuc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbih0aGlzLnF1YXRlcm5pb24pOwogICAgICAgIG0xLnRyYW5zcG9zZShtMik7CiAgICAgICAgbTEuc2NhbGUoSSwgbTEpOwogICAgICAgIG0xLm1tdWx0KG0yLCB0aGlzLmludkluZXJ0aWFXb3JsZCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQXBwbHkgZm9yY2UgdG8gYSBwb2ludCBvZiB0aGUgYm9keS4gVGhpcyBjb3VsZCBmb3IgZXhhbXBsZSBiZSBhIHBvaW50IG9uIHRoZSBCb2R5IHN1cmZhY2UuCiAgICAgKiBBcHBseWluZyBmb3JjZSB0aGlzIHdheSB3aWxsIGFkZCB0byBCb2R5LmZvcmNlIGFuZCBCb2R5LnRvcnF1ZS4KICAgICAqIEBwYXJhbSBmb3JjZSBUaGUgYW1vdW50IG9mIGZvcmNlIHRvIGFkZC4KICAgICAqIEBwYXJhbSByZWxhdGl2ZVBvaW50IEEgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIHRvIGFwcGx5IHRoZSBmb3JjZSBvbi4KICAgICAqLwoKCiAgICBhcHBseUZvcmNlKGZvcmNlLCByZWxhdGl2ZVBvaW50KSB7CiAgICAgIGlmIChyZWxhdGl2ZVBvaW50ID09PSB2b2lkIDApIHsKICAgICAgICByZWxhdGl2ZVBvaW50ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgLy8gTmVlZGVkPwogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICB0aGlzLndha2VVcCgpOwogICAgICB9IC8vIENvbXB1dGUgcHJvZHVjZWQgcm90YXRpb25hbCBmb3JjZQoKCiAgICAgIGNvbnN0IHJvdEZvcmNlID0gQm9keV9hcHBseUZvcmNlX3JvdEZvcmNlOwogICAgICByZWxhdGl2ZVBvaW50LmNyb3NzKGZvcmNlLCByb3RGb3JjZSk7IC8vIEFkZCBsaW5lYXIgZm9yY2UKCiAgICAgIHRoaXMuZm9yY2UudmFkZChmb3JjZSwgdGhpcy5mb3JjZSk7IC8vIEFkZCByb3RhdGlvbmFsIGZvcmNlCgogICAgICB0aGlzLnRvcnF1ZS52YWRkKHJvdEZvcmNlLCB0aGlzLnRvcnF1ZSk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IGZvcmNlIHRvIGEgbG9jYWwgcG9pbnQgaW4gdGhlIGJvZHkuCiAgICAgKiBAcGFyYW0gZm9yY2UgVGhlIGZvcmNlIHZlY3RvciB0byBhcHBseSwgZGVmaW5lZCBsb2NhbGx5IGluIHRoZSBib2R5IGZyYW1lLgogICAgICogQHBhcmFtIGxvY2FsUG9pbnQgQSBsb2NhbCBwb2ludCBpbiB0aGUgYm9keSB0byBhcHBseSB0aGUgZm9yY2Ugb24uCiAgICAgKi8KCgogICAgYXBwbHlMb2NhbEZvcmNlKGxvY2FsRm9yY2UsIGxvY2FsUG9pbnQpIHsKICAgICAgaWYgKGxvY2FsUG9pbnQgPT09IHZvaWQgMCkgewogICAgICAgIGxvY2FsUG9pbnQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkRm9yY2UgPSBCb2R5X2FwcGx5TG9jYWxGb3JjZV93b3JsZEZvcmNlOwogICAgICBjb25zdCByZWxhdGl2ZVBvaW50V29ybGQgPSBCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQ7IC8vIFRyYW5zZm9ybSB0aGUgZm9yY2UgdmVjdG9yIHRvIHdvcmxkIHNwYWNlCgogICAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbEZvcmNlLCB3b3JsZEZvcmNlKTsKICAgICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxQb2ludCwgcmVsYXRpdmVQb2ludFdvcmxkKTsKICAgICAgdGhpcy5hcHBseUZvcmNlKHdvcmxkRm9yY2UsIHJlbGF0aXZlUG9pbnRXb3JsZCk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IHRvcnF1ZSB0byB0aGUgYm9keS4KICAgICAqIEBwYXJhbSB0b3JxdWUgVGhlIGFtb3VudCBvZiB0b3JxdWUgdG8gYWRkLgogICAgICovCgoKICAgIGFwcGx5VG9ycXVlKHRvcnF1ZSkgewogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICB0aGlzLndha2VVcCgpOwogICAgICB9IC8vIEFkZCByb3RhdGlvbmFsIGZvcmNlCgoKICAgICAgdGhpcy50b3JxdWUudmFkZCh0b3JxdWUsIHRoaXMudG9ycXVlKTsKICAgIH0KICAgIC8qKgogICAgICogQXBwbHkgaW1wdWxzZSB0byBhIHBvaW50IG9mIHRoZSBib2R5LiBUaGlzIGNvdWxkIGZvciBleGFtcGxlIGJlIGEgcG9pbnQgb24gdGhlIEJvZHkgc3VyZmFjZS4KICAgICAqIEFuIGltcHVsc2UgaXMgYSBmb3JjZSBhZGRlZCB0byBhIGJvZHkgZHVyaW5nIGEgc2hvcnQgcGVyaW9kIG9mIHRpbWUgKGltcHVsc2UgPSBmb3JjZSAqIHRpbWUpLgogICAgICogSW1wdWxzZXMgd2lsbCBiZSBhZGRlZCB0byBCb2R5LnZlbG9jaXR5IGFuZCBCb2R5LmFuZ3VsYXJWZWxvY2l0eS4KICAgICAqIEBwYXJhbSBpbXB1bHNlIFRoZSBhbW91bnQgb2YgaW1wdWxzZSB0byBhZGQuCiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQb2ludCBBIHBvaW50IHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgbWFzcyB0byBhcHBseSB0aGUgZm9yY2Ugb24uCiAgICAgKi8KCgogICAgYXBwbHlJbXB1bHNlKGltcHVsc2UsIHJlbGF0aXZlUG9pbnQpIHsKICAgICAgaWYgKHJlbGF0aXZlUG9pbnQgPT09IHZvaWQgMCkgewogICAgICAgIHJlbGF0aXZlUG9pbnQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICB0aGlzLndha2VVcCgpOwogICAgICB9IC8vIENvbXB1dGUgcG9pbnQgcG9zaXRpb24gcmVsYXRpdmUgdG8gdGhlIGJvZHkgY2VudGVyCgoKICAgICAgY29uc3QgciA9IHJlbGF0aXZlUG9pbnQ7IC8vIENvbXB1dGUgcHJvZHVjZWQgY2VudHJhbCBpbXB1bHNlIHZlbG9jaXR5CgogICAgICBjb25zdCB2ZWxvID0gQm9keV9hcHBseUltcHVsc2VfdmVsbzsKICAgICAgdmVsby5jb3B5KGltcHVsc2UpOwogICAgICB2ZWxvLnNjYWxlKHRoaXMuaW52TWFzcywgdmVsbyk7IC8vIEFkZCBsaW5lYXIgaW1wdWxzZQoKICAgICAgdGhpcy52ZWxvY2l0eS52YWRkKHZlbG8sIHRoaXMudmVsb2NpdHkpOyAvLyBDb21wdXRlIHByb2R1Y2VkIHJvdGF0aW9uYWwgaW1wdWxzZSB2ZWxvY2l0eQoKICAgICAgY29uc3Qgcm90VmVsbyA9IEJvZHlfYXBwbHlJbXB1bHNlX3JvdFZlbG87CiAgICAgIHIuY3Jvc3MoaW1wdWxzZSwgcm90VmVsbyk7CiAgICAgIC8qCiAgICAgICByb3RWZWxvLnggKj0gdGhpcy5pbnZJbmVydGlhLng7CiAgICAgICByb3RWZWxvLnkgKj0gdGhpcy5pbnZJbmVydGlhLnk7CiAgICAgICByb3RWZWxvLnogKj0gdGhpcy5pbnZJbmVydGlhLno7CiAgICAgICAqLwoKICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGQudm11bHQocm90VmVsbywgcm90VmVsbyk7IC8vIEFkZCByb3RhdGlvbmFsIEltcHVsc2UKCiAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LnZhZGQocm90VmVsbywgdGhpcy5hbmd1bGFyVmVsb2NpdHkpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSBsb2NhbGx5LWRlZmluZWQgaW1wdWxzZSB0byBhIGxvY2FsIHBvaW50IGluIHRoZSBib2R5LgogICAgICogQHBhcmFtIGZvcmNlIFRoZSBmb3JjZSB2ZWN0b3IgdG8gYXBwbHksIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgYm9keSBmcmFtZS4KICAgICAqIEBwYXJhbSBsb2NhbFBvaW50IEEgbG9jYWwgcG9pbnQgaW4gdGhlIGJvZHkgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLgogICAgICovCgoKICAgIGFwcGx5TG9jYWxJbXB1bHNlKGxvY2FsSW1wdWxzZSwgbG9jYWxQb2ludCkgewogICAgICBpZiAobG9jYWxQb2ludCA9PT0gdm9pZCAwKSB7CiAgICAgICAgbG9jYWxQb2ludCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnR5cGUgIT09IEJvZHkuRFlOQU1JQykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3Qgd29ybGRJbXB1bHNlID0gQm9keV9hcHBseUxvY2FsSW1wdWxzZV93b3JsZEltcHVsc2U7CiAgICAgIGNvbnN0IHJlbGF0aXZlUG9pbnRXb3JsZCA9IEJvZHlfYXBwbHlMb2NhbEltcHVsc2VfcmVsYXRpdmVQb2ludDsgLy8gVHJhbnNmb3JtIHRoZSBmb3JjZSB2ZWN0b3IgdG8gd29ybGQgc3BhY2UKCiAgICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsSW1wdWxzZSwgd29ybGRJbXB1bHNlKTsKICAgICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxQb2ludCwgcmVsYXRpdmVQb2ludFdvcmxkKTsKICAgICAgdGhpcy5hcHBseUltcHVsc2Uod29ybGRJbXB1bHNlLCByZWxhdGl2ZVBvaW50V29ybGQpOwogICAgfQogICAgLyoqCiAgICAgKiBTaG91bGQgYmUgY2FsbGVkIHdoZW5ldmVyIHlvdSBjaGFuZ2UgdGhlIGJvZHkgc2hhcGUgb3IgbWFzcy4KICAgICAqLwoKCiAgICB1cGRhdGVNYXNzUHJvcGVydGllcygpIHsKICAgICAgY29uc3QgaGFsZkV4dGVudHMgPSBCb2R5X3VwZGF0ZU1hc3NQcm9wZXJ0aWVzX2hhbGZFeHRlbnRzOwogICAgICB0aGlzLmludk1hc3MgPSB0aGlzLm1hc3MgPiAwID8gMS4wIC8gdGhpcy5tYXNzIDogMDsKICAgICAgY29uc3QgSSA9IHRoaXMuaW5lcnRpYTsKICAgICAgY29uc3QgZml4ZWQgPSB0aGlzLmZpeGVkUm90YXRpb247IC8vIEFwcHJveGltYXRlIHdpdGggQUFCQiBib3gKCiAgICAgIHRoaXMudXBkYXRlQUFCQigpOwogICAgICBoYWxmRXh0ZW50cy5zZXQoKHRoaXMuYWFiYi51cHBlckJvdW5kLnggLSB0aGlzLmFhYmIubG93ZXJCb3VuZC54KSAvIDIsICh0aGlzLmFhYmIudXBwZXJCb3VuZC55IC0gdGhpcy5hYWJiLmxvd2VyQm91bmQueSkgLyAyLCAodGhpcy5hYWJiLnVwcGVyQm91bmQueiAtIHRoaXMuYWFiYi5sb3dlckJvdW5kLnopIC8gMik7CiAgICAgIEJveC5jYWxjdWxhdGVJbmVydGlhKGhhbGZFeHRlbnRzLCB0aGlzLm1hc3MsIEkpOwogICAgICB0aGlzLmludkluZXJ0aWEuc2V0KEkueCA+IDAgJiYgIWZpeGVkID8gMS4wIC8gSS54IDogMCwgSS55ID4gMCAmJiAhZml4ZWQgPyAxLjAgLyBJLnkgOiAwLCBJLnogPiAwICYmICFmaXhlZCA/IDEuMCAvIEkueiA6IDApOwogICAgICB0aGlzLnVwZGF0ZUluZXJ0aWFXb3JsZCh0cnVlKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHdvcmxkIHZlbG9jaXR5IG9mIGEgcG9pbnQgaW4gdGhlIGJvZHkuCiAgICAgKiBAcGFyYW0gd29ybGRQb2ludAogICAgICogQHBhcmFtIHJlc3VsdAogICAgICogQHJldHVybiBUaGUgcmVzdWx0IHZlY3Rvci4KICAgICAqLwoKCiAgICBnZXRWZWxvY2l0eUF0V29ybGRQb2ludCh3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgY29uc3QgciA9IG5ldyBWZWMzKCk7CiAgICAgIHdvcmxkUG9pbnQudnN1Yih0aGlzLnBvc2l0aW9uLCByKTsKICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkuY3Jvc3MociwgcmVzdWx0KTsKICAgICAgdGhpcy52ZWxvY2l0eS52YWRkKHJlc3VsdCwgcmVzdWx0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogTW92ZSB0aGUgYm9keSBmb3J3YXJkIGluIHRpbWUuCiAgICAgKiBAcGFyYW0gZHQgVGltZSBzdGVwCiAgICAgKiBAcGFyYW0gcXVhdE5vcm1hbGl6ZSBTZXQgdG8gdHJ1ZSB0byBub3JtYWxpemUgdGhlIGJvZHkgcXVhdGVybmlvbgogICAgICogQHBhcmFtIHF1YXROb3JtYWxpemVGYXN0IElmIHRoZSBxdWF0ZXJuaW9uIHNob3VsZCBiZSBub3JtYWxpemVkIHVzaW5nICJmYXN0IiBxdWF0ZXJuaW9uIG5vcm1hbGl6YXRpb24KICAgICAqLwoKCiAgICBpbnRlZ3JhdGUoZHQsIHF1YXROb3JtYWxpemUsIHF1YXROb3JtYWxpemVGYXN0KSB7CiAgICAgIC8vIFNhdmUgcHJldmlvdXMgcG9zaXRpb24KICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uLmNvcHkodGhpcy5wb3NpdGlvbik7CiAgICAgIHRoaXMucHJldmlvdXNRdWF0ZXJuaW9uLmNvcHkodGhpcy5xdWF0ZXJuaW9uKTsKCiAgICAgIGlmICghKHRoaXMudHlwZSA9PT0gQm9keS5EWU5BTUlDIHx8IHRoaXMudHlwZSA9PT0gQm9keS5LSU5FTUFUSUMpIHx8IHRoaXMuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORykgewogICAgICAgIC8vIE9ubHkgZm9yIGR5bmFtaWMKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlbG8gPSB0aGlzLnZlbG9jaXR5OwogICAgICBjb25zdCBhbmd1bGFyVmVsbyA9IHRoaXMuYW5ndWxhclZlbG9jaXR5OwogICAgICBjb25zdCBwb3MgPSB0aGlzLnBvc2l0aW9uOwogICAgICBjb25zdCBmb3JjZSA9IHRoaXMuZm9yY2U7CiAgICAgIGNvbnN0IHRvcnF1ZSA9IHRoaXMudG9ycXVlOwogICAgICBjb25zdCBxdWF0ID0gdGhpcy5xdWF0ZXJuaW9uOwogICAgICBjb25zdCBpbnZNYXNzID0gdGhpcy5pbnZNYXNzOwogICAgICBjb25zdCBpbnZJbmVydGlhID0gdGhpcy5pbnZJbmVydGlhV29ybGQ7CiAgICAgIGNvbnN0IGxpbmVhckZhY3RvciA9IHRoaXMubGluZWFyRmFjdG9yOwogICAgICBjb25zdCBpTWR0ID0gaW52TWFzcyAqIGR0OwogICAgICB2ZWxvLnggKz0gZm9yY2UueCAqIGlNZHQgKiBsaW5lYXJGYWN0b3IueDsKICAgICAgdmVsby55ICs9IGZvcmNlLnkgKiBpTWR0ICogbGluZWFyRmFjdG9yLnk7CiAgICAgIHZlbG8ueiArPSBmb3JjZS56ICogaU1kdCAqIGxpbmVhckZhY3Rvci56OwogICAgICBjb25zdCBlID0gaW52SW5lcnRpYS5lbGVtZW50czsKICAgICAgY29uc3QgYW5ndWxhckZhY3RvciA9IHRoaXMuYW5ndWxhckZhY3RvcjsKICAgICAgY29uc3QgdHggPSB0b3JxdWUueCAqIGFuZ3VsYXJGYWN0b3IueDsKICAgICAgY29uc3QgdHkgPSB0b3JxdWUueSAqIGFuZ3VsYXJGYWN0b3IueTsKICAgICAgY29uc3QgdHogPSB0b3JxdWUueiAqIGFuZ3VsYXJGYWN0b3IuejsKICAgICAgYW5ndWxhclZlbG8ueCArPSBkdCAqIChlWzBdICogdHggKyBlWzFdICogdHkgKyBlWzJdICogdHopOwogICAgICBhbmd1bGFyVmVsby55ICs9IGR0ICogKGVbM10gKiB0eCArIGVbNF0gKiB0eSArIGVbNV0gKiB0eik7CiAgICAgIGFuZ3VsYXJWZWxvLnogKz0gZHQgKiAoZVs2XSAqIHR4ICsgZVs3XSAqIHR5ICsgZVs4XSAqIHR6KTsgLy8gVXNlIG5ldyB2ZWxvY2l0eSAgLSBsZWFwIGZyb2cKCiAgICAgIHBvcy54ICs9IHZlbG8ueCAqIGR0OwogICAgICBwb3MueSArPSB2ZWxvLnkgKiBkdDsKICAgICAgcG9zLnogKz0gdmVsby56ICogZHQ7CiAgICAgIHF1YXQuaW50ZWdyYXRlKHRoaXMuYW5ndWxhclZlbG9jaXR5LCBkdCwgdGhpcy5hbmd1bGFyRmFjdG9yLCBxdWF0KTsKCiAgICAgIGlmIChxdWF0Tm9ybWFsaXplKSB7CiAgICAgICAgaWYgKHF1YXROb3JtYWxpemVGYXN0KSB7CiAgICAgICAgICBxdWF0Lm5vcm1hbGl6ZUZhc3QoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcXVhdC5ub3JtYWxpemUoKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTsgLy8gVXBkYXRlIHdvcmxkIGluZXJ0aWEKCiAgICAgIHRoaXMudXBkYXRlSW5lcnRpYVdvcmxkKCk7CiAgICB9CgogIH0KCiAgQm9keS5pZENvdW50ZXIgPSAwOwogIEJvZHkuQ09MTElERV9FVkVOVF9OQU1FID0gJ2NvbGxpZGUnOwogIEJvZHkuRFlOQU1JQyA9IEJPRFlfVFlQRVMuRFlOQU1JQzsKICBCb2R5LlNUQVRJQyA9IEJPRFlfVFlQRVMuU1RBVElDOwogIEJvZHkuS0lORU1BVElDID0gQk9EWV9UWVBFUy5LSU5FTUFUSUM7CiAgQm9keS5BV0FLRSA9IEJPRFlfU0xFRVBfU1RBVEVTLkFXQUtFOwogIEJvZHkuU0xFRVBZID0gQk9EWV9TTEVFUF9TVEFURVMuU0xFRVBZOwogIEJvZHkuU0xFRVBJTkcgPSBCT0RZX1NMRUVQX1NUQVRFUy5TTEVFUElORzsKICBCb2R5Lndha2V1cEV2ZW50ID0gewogICAgdHlwZTogJ3dha2V1cCcKICB9OwogIEJvZHkuc2xlZXB5RXZlbnQgPSB7CiAgICB0eXBlOiAnc2xlZXB5JwogIH07CiAgQm9keS5zbGVlcEV2ZW50ID0gewogICAgdHlwZTogJ3NsZWVwJwogIH07CiAgY29uc3QgdG1wVmVjID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBRdWF0ID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCB1cGRhdGVBQUJCX3NoYXBlQUFCQiA9IG5ldyBBQUJCKCk7CiAgY29uc3QgdWl3X20xID0gbmV3IE1hdDMoKTsKICBjb25zdCB1aXdfbTIgPSBuZXcgTWF0MygpOwogIGNvbnN0IEJvZHlfYXBwbHlGb3JjZV9yb3RGb3JjZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUxvY2FsRm9yY2Vfd29ybGRGb3JjZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUxvY2FsRm9yY2VfcmVsYXRpdmVQb2ludFdvcmxkID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5SW1wdWxzZV92ZWxvID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5SW1wdWxzZV9yb3RWZWxvID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5TG9jYWxJbXB1bHNlX3dvcmxkSW1wdWxzZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQm9keV9hcHBseUxvY2FsSW1wdWxzZV9yZWxhdGl2ZVBvaW50ID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X3VwZGF0ZU1hc3NQcm9wZXJ0aWVzX2hhbGZFeHRlbnRzID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBicm9hZHBoYXNlIGltcGxlbWVudGF0aW9ucwogICAqIEBhdXRob3Igc2NodGVwcGUKICAgKi8KCiAgY2xhc3MgQnJvYWRwaGFzZSB7CiAgICAvKioKICAgICAqIFRoZSB3b3JsZCB0byBzZWFyY2ggZm9yIGNvbGxpc2lvbnMgaW4uCiAgICAgKi8KCiAgICAvKioKICAgICAqIElmIHNldCB0byB0cnVlLCB0aGUgYnJvYWRwaGFzZSB1c2VzIGJvdW5kaW5nIGJveGVzIGZvciBpbnRlcnNlY3Rpb24gdGVzdHMsIGVsc2UgaXQgdXNlcyBib3VuZGluZyBzcGhlcmVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBTZXQgdG8gdHJ1ZSBpZiB0aGUgb2JqZWN0cyBpbiB0aGUgd29ybGQgbW92ZWQuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLndvcmxkID0gdm9pZCAwOwogICAgICB0aGlzLnVzZUJvdW5kaW5nQm94ZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGlydHkgPSB2b2lkIDA7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLnVzZUJvdW5kaW5nQm94ZXMgPSBmYWxzZTsKICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgY29sbGlzaW9uIHBhaXJzIGZyb20gdGhlIHdvcmxkCiAgICAgKiBAcGFyYW0gd29ybGQgVGhlIHdvcmxkIHRvIHNlYXJjaCBpbgogICAgICogQHBhcmFtIHAxIEVtcHR5IGFycmF5IHRvIGJlIGZpbGxlZCB3aXRoIGJvZHkgb2JqZWN0cwogICAgICogQHBhcmFtIHAyIEVtcHR5IGFycmF5IHRvIGJlIGZpbGxlZCB3aXRoIGJvZHkgb2JqZWN0cwogICAgICovCgoKICAgIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwMSwgcDIpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb2xsaXNpb25QYWlycyBub3QgaW1wbGVtZW50ZWQgZm9yIHRoaXMgQnJvYWRQaGFzZSBjbGFzcyEnKTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYSBib2R5IHBhaXIgbmVlZHMgdG8gYmUgaW50ZXJzZWN0aW9uIHRlc3RlZCBhdCBhbGwuCiAgICAgKi8KCgogICAgbmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYm9keUEsIGJvZHlCKSB7CiAgICAgIC8vIENoZWNrIGNvbGxpc2lvbiBmaWx0ZXIgbWFza3MKICAgICAgaWYgKChib2R5QS5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlCLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwIHx8IChib2R5Qi5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlBLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IC8vIENoZWNrIHR5cGVzCgoKICAgICAgaWYgKCgoYm9keUEudHlwZSAmIEJvZHkuU1RBVElDKSAhPT0gMCB8fCBib2R5QS5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSAmJiAoKGJvZHlCLnR5cGUgJiBCb2R5LlNUQVRJQykgIT09IDAgfHwgYm9keUIuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORykpIHsKICAgICAgICAvLyBCb3RoIGJvZGllcyBhcmUgc3RhdGljIG9yIHNsZWVwaW5nLiBTa2lwLgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyB2b2x1bWVzIG9mIHR3byBib2RpZXMgaW50ZXJzZWN0LgogICAgICovCgoKICAgIGludGVyc2VjdGlvblRlc3QoYm9keUEsIGJvZHlCLCBwYWlyczEsIHBhaXJzMikgewogICAgICBpZiAodGhpcy51c2VCb3VuZGluZ0JveGVzKSB7CiAgICAgICAgdGhpcy5kb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRvQm91bmRpbmdTcGhlcmVCcm9hZHBoYXNlKGJvZHlBLCBib2R5QiwgcGFpcnMxLCBwYWlyczIpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyBzcGhlcmVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy4KICAgICAqIEBwYXJhbSBwYWlyczEgYm9keUEgaXMgYXBwZW5kZWQgdG8gdGhpcyBhcnJheSBpZiBpbnRlcnNlY3Rpb24KICAgICAqIEBwYXJhbSBwYWlyczIgYm9keUIgaXMgYXBwZW5kZWQgdG8gdGhpcyBhcnJheSBpZiBpbnRlcnNlY3Rpb24KICAgICAqLwoKCiAgICBkb0JvdW5kaW5nU3BoZXJlQnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGNvbnN0IHIgPSBCcm9hZHBoYXNlX2NvbGxpc2lvblBhaXJzX3I7CiAgICAgIGJvZHlCLnBvc2l0aW9uLnZzdWIoYm9keUEucG9zaXRpb24sIHIpOwogICAgICBjb25zdCBib3VuZGluZ1JhZGl1c1N1bTIgPSAoYm9keUEuYm91bmRpbmdSYWRpdXMgKyBib2R5Qi5ib3VuZGluZ1JhZGl1cykgKiogMjsKICAgICAgY29uc3Qgbm9ybTIgPSByLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgIGlmIChub3JtMiA8IGJvdW5kaW5nUmFkaXVzU3VtMikgewogICAgICAgIHBhaXJzMS5wdXNoKGJvZHlBKTsKICAgICAgICBwYWlyczIucHVzaChib2R5Qik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIGJveGVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy4KICAgICAqLwoKCiAgICBkb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGlmIChib2R5QS5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICBib2R5QS51cGRhdGVBQUJCKCk7CiAgICAgIH0KCiAgICAgIGlmIChib2R5Qi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICBib2R5Qi51cGRhdGVBQUJCKCk7CiAgICAgIH0gLy8gQ2hlY2sgQUFCQiAvIEFBQkIKCgogICAgICBpZiAoYm9keUEuYWFiYi5vdmVybGFwcyhib2R5Qi5hYWJiKSkgewogICAgICAgIHBhaXJzMS5wdXNoKGJvZHlBKTsKICAgICAgICBwYWlyczIucHVzaChib2R5Qik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlcyBkdXBsaWNhdGUgcGFpcnMgZnJvbSB0aGUgcGFpciBhcnJheXMuCiAgICAgKi8KCgogICAgbWFrZVBhaXJzVW5pcXVlKHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGNvbnN0IHQgPSBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV90ZW1wOwogICAgICBjb25zdCBwMSA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AxOwogICAgICBjb25zdCBwMiA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AyOwogICAgICBjb25zdCBOID0gcGFpcnMxLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBwMVtpXSA9IHBhaXJzMVtpXTsKICAgICAgICBwMltpXSA9IHBhaXJzMltpXTsKICAgICAgfQoKICAgICAgcGFpcnMxLmxlbmd0aCA9IDA7CiAgICAgIHBhaXJzMi5sZW5ndGggPSAwOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGlkMSA9IHAxW2ldLmlkOwogICAgICAgIGNvbnN0IGlkMiA9IHAyW2ldLmlkOwogICAgICAgIGNvbnN0IGtleSA9IGlkMSA8IGlkMiA/IGlkMSArICIsIiArIGlkMiA6IGlkMiArICIsIiArIGlkMTsKICAgICAgICB0W2tleV0gPSBpOwogICAgICAgIHQua2V5cy5wdXNoKGtleSk7CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0LmtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBrZXkgPSB0LmtleXMucG9wKCk7CiAgICAgICAgY29uc3QgcGFpckluZGV4ID0gdFtrZXldOwogICAgICAgIHBhaXJzMS5wdXNoKHAxW3BhaXJJbmRleF0pOwogICAgICAgIHBhaXJzMi5wdXNoKHAyW3BhaXJJbmRleF0pOwogICAgICAgIGRlbGV0ZSB0W2tleV07CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVG8gYmUgaW1wbGVtZW50ZWQgYnkgc3ViY2Fzc2VzCiAgICAgKi8KCgogICAgc2V0V29ybGQod29ybGQpIHt9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyBzcGhlcmVzIG9mIHR3byBib2RpZXMgb3ZlcmxhcC4KICAgICAqLwoKCiAgICBzdGF0aWMgYm91bmRpbmdTcGhlcmVDaGVjayhib2R5QSwgYm9keUIpIHsKICAgICAgY29uc3QgZGlzdCA9IG5ldyBWZWMzKCk7IC8vIGJzY19kaXN0OwoKICAgICAgYm9keUEucG9zaXRpb24udnN1Yihib2R5Qi5wb3NpdGlvbiwgZGlzdCk7CiAgICAgIGNvbnN0IHNhID0gYm9keUEuc2hhcGVzWzBdOwogICAgICBjb25zdCBzYiA9IGJvZHlCLnNoYXBlc1swXTsKICAgICAgcmV0dXJuIE1hdGgucG93KHNhLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2IuYm91bmRpbmdTcGhlcmVSYWRpdXMsIDIpID4gZGlzdC5sZW5ndGhTcXVhcmVkKCk7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYWxsIHRoZSBib2RpZXMgd2l0aGluIHRoZSBBQUJCLgogICAgICovCgoKICAgIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0KSB7CiAgICAgIGNvbnNvbGUud2FybignLmFhYmJRdWVyeSBpcyBub3QgaW1wbGVtZW50ZWQgaW4gdGhpcyBCcm9hZHBoYXNlIHN1YmNsYXNzLicpOwogICAgICByZXR1cm4gW107CiAgICB9CgogIH0gLy8gVGVtcCBvYmplY3RzCgoKICBjb25zdCBCcm9hZHBoYXNlX2NvbGxpc2lvblBhaXJzX3IgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3RlbXAgPSB7CiAgICBrZXlzOiBbXQogIH07CiAgY29uc3QgQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDEgPSBbXTsKICBjb25zdCBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV9wMiA9IFtdOwoKICBuZXcgVmVjMygpOwogIC8qKgogICAqIE5haXZlIGJyb2FkcGhhc2UgaW1wbGVtZW50YXRpb24sIHVzZWQgaW4gbGFjayBvZiBiZXR0ZXIgb25lcy4KICAgKgogICAqIFRoZSBuYWl2ZSBicm9hZHBoYXNlIGxvb2tzIGF0IGFsbCBwb3NzaWJsZSBwYWlycyB3aXRob3V0IHJlc3RyaWN0aW9uLCB0aGVyZWZvcmUgaXQgaGFzIGNvbXBsZXhpdHkgTl4yIF8od2hpY2ggaXMgYmFkKV8KICAgKi8KCiAgY2xhc3MgTmFpdmVCcm9hZHBoYXNlIGV4dGVuZHMgQnJvYWRwaGFzZSB7CiAgICAvKioKICAgICAqIEB0b2RvIFJlbW92ZSB1c2VsZXNzIGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcigpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYWxsIHRoZSBjb2xsaXNpb24gcGFpcnMgaW4gdGhlIHBoeXNpY3Mgd29ybGQKICAgICAqLwoKCiAgICBjb2xsaXNpb25QYWlycyh3b3JsZCwgcGFpcnMxLCBwYWlyczIpIHsKICAgICAgY29uc3QgYm9kaWVzID0gd29ybGQuYm9kaWVzOwogICAgICBjb25zdCBuID0gYm9kaWVzLmxlbmd0aDsKICAgICAgbGV0IGJpOwogICAgICBsZXQgYmo7IC8vIE5haXZlIE5eMiBmdHchCgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gbjsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IGk7IGorKykgewogICAgICAgICAgYmkgPSBib2RpZXNbaV07CiAgICAgICAgICBiaiA9IGJvZGllc1tqXTsKCiAgICAgICAgICBpZiAoIXRoaXMubmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYmksIGJqKSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmludGVyc2VjdGlvblRlc3QoYmksIGJqLCBwYWlyczEsIHBhaXJzMik7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYWxsIHRoZSBib2RpZXMgd2l0aGluIGFuIEFBQkIuCiAgICAgKiBAcGFyYW0gcmVzdWx0IEFuIGFycmF5IHRvIHN0b3JlIHJlc3VsdGluZyBib2RpZXMgaW4uCiAgICAgKi8KCgogICAgYWFiYlF1ZXJ5KHdvcmxkLCBhYWJiLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gW107CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd29ybGQuYm9kaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IHdvcmxkLmJvZGllc1tpXTsKCiAgICAgICAgaWYgKGIuYWFiYk5lZWRzVXBkYXRlKSB7CiAgICAgICAgICBiLnVwZGF0ZUFBQkIoKTsKICAgICAgICB9IC8vIFVnbHkgaGFjayB1bnRpbCBCb2R5IGdldHMgYWFiYgoKCiAgICAgICAgaWYgKGIuYWFiYi5vdmVybGFwcyhhYWJiKSkgewogICAgICAgICAgcmVzdWx0LnB1c2goYik7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CiAgLyoqCiAgICogU3RvcmFnZSBmb3IgUmF5IGNhc3RpbmcgZGF0YQogICAqLwoKCiAgY2xhc3MgUmF5Y2FzdFJlc3VsdCB7CiAgICAvKioKICAgICAqIHJheUZyb21Xb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiByYXlUb1dvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIGhpdE5vcm1hbFdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIGhpdFBvaW50V29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogaGFzSGl0CiAgICAgKi8KCiAgICAvKioKICAgICAqIHNoYXBlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGJvZHkKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGluZGV4IG9mIHRoZSBoaXQgdHJpYW5nbGUsIGlmIHRoZSBoaXQgc2hhcGUgd2FzIGEgdHJpbWVzaAogICAgICovCgogICAgLyoqCiAgICAgKiBEaXN0YW5jZSB0byB0aGUgaGl0LiBXaWxsIGJlIHNldCB0byAtMSBpZiB0aGVyZSB3YXMgbm8gaGl0CiAgICAgKi8KCiAgICAvKioKICAgICAqIElmIHRoZSByYXkgc2hvdWxkIHN0b3AgdHJhdmVyc2luZyB0aGUgYm9kaWVzCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLnJheUZyb21Xb3JsZCA9IHZvaWQgMDsKICAgICAgdGhpcy5yYXlUb1dvcmxkID0gdm9pZCAwOwogICAgICB0aGlzLmhpdE5vcm1hbFdvcmxkID0gdm9pZCAwOwogICAgICB0aGlzLmhpdFBvaW50V29ybGQgPSB2b2lkIDA7CiAgICAgIHRoaXMuaGFzSGl0ID0gdm9pZCAwOwogICAgICB0aGlzLnNoYXBlID0gdm9pZCAwOwogICAgICB0aGlzLmJvZHkgPSB2b2lkIDA7CiAgICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gdm9pZCAwOwogICAgICB0aGlzLmRpc3RhbmNlID0gdm9pZCAwOwogICAgICB0aGlzLnNob3VsZFN0b3AgPSB2b2lkIDA7CiAgICAgIHRoaXMucmF5RnJvbVdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5yYXlUb1dvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5oaXROb3JtYWxXb3JsZCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaGl0UG9pbnRXb3JsZCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuaGFzSGl0ID0gZmFsc2U7CiAgICAgIHRoaXMuc2hhcGUgPSBudWxsOwogICAgICB0aGlzLmJvZHkgPSBudWxsOwogICAgICB0aGlzLmhpdEZhY2VJbmRleCA9IC0xOwogICAgICB0aGlzLmRpc3RhbmNlID0gLTE7CiAgICAgIHRoaXMuc2hvdWxkU3RvcCA9IGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBSZXNldCBhbGwgcmVzdWx0IGRhdGEuCiAgICAgKi8KCgogICAgcmVzZXQoKSB7CiAgICAgIHRoaXMucmF5RnJvbVdvcmxkLnNldFplcm8oKTsKICAgICAgdGhpcy5yYXlUb1dvcmxkLnNldFplcm8oKTsKICAgICAgdGhpcy5oaXROb3JtYWxXb3JsZC5zZXRaZXJvKCk7CiAgICAgIHRoaXMuaGl0UG9pbnRXb3JsZC5zZXRaZXJvKCk7CiAgICAgIHRoaXMuaGFzSGl0ID0gZmFsc2U7CiAgICAgIHRoaXMuc2hhcGUgPSBudWxsOwogICAgICB0aGlzLmJvZHkgPSBudWxsOwogICAgICB0aGlzLmhpdEZhY2VJbmRleCA9IC0xOwogICAgICB0aGlzLmRpc3RhbmNlID0gLTE7CiAgICAgIHRoaXMuc2hvdWxkU3RvcCA9IGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBhYm9ydAogICAgICovCgoKICAgIGFib3J0KCkgewogICAgICB0aGlzLnNob3VsZFN0b3AgPSB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgcmVzdWx0IGRhdGEuCiAgICAgKi8KCgogICAgc2V0KHJheUZyb21Xb3JsZCwgcmF5VG9Xb3JsZCwgaGl0Tm9ybWFsV29ybGQsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBkaXN0YW5jZSkgewogICAgICB0aGlzLnJheUZyb21Xb3JsZC5jb3B5KHJheUZyb21Xb3JsZCk7CiAgICAgIHRoaXMucmF5VG9Xb3JsZC5jb3B5KHJheVRvV29ybGQpOwogICAgICB0aGlzLmhpdE5vcm1hbFdvcmxkLmNvcHkoaGl0Tm9ybWFsV29ybGQpOwogICAgICB0aGlzLmhpdFBvaW50V29ybGQuY29weShoaXRQb2ludFdvcmxkKTsKICAgICAgdGhpcy5zaGFwZSA9IHNoYXBlOwogICAgICB0aGlzLmJvZHkgPSBib2R5OwogICAgICB0aGlzLmRpc3RhbmNlID0gZGlzdGFuY2U7CiAgICB9CgogIH0KCiAgbGV0IF9TaGFwZSR0eXBlcyRTUEhFUkUsIF9TaGFwZSR0eXBlcyRQTEFORSwgX1NoYXBlJHR5cGVzJEJPWCwgX1NoYXBlJHR5cGVzJENZTElOREVSLCBfU2hhcGUkdHlwZXMkQ09OVkVYUE8sIF9TaGFwZSR0eXBlcyRIRUlHSFRGSSwgX1NoYXBlJHR5cGVzJFRSSU1FU0g7CiAgLyoqCiAgICogUkFZX01PREVTCiAgICovCgoKICBjb25zdCBSQVlfTU9ERVMgPSB7CiAgICAvKiogQ0xPU0VTVCAqLwogICAgQ0xPU0VTVDogMSwKCiAgICAvKiogQU5ZICovCiAgICBBTlk6IDIsCgogICAgLyoqIEFMTCAqLwogICAgQUxMOiA0CiAgfTsKICAvKioKICAgKiBSYXlNb2RlCiAgICovCgogIF9TaGFwZSR0eXBlcyRTUEhFUkUgPSBTaGFwZS50eXBlcy5TUEhFUkU7CiAgX1NoYXBlJHR5cGVzJFBMQU5FID0gU2hhcGUudHlwZXMuUExBTkU7CiAgX1NoYXBlJHR5cGVzJEJPWCA9IFNoYXBlLnR5cGVzLkJPWDsKICBfU2hhcGUkdHlwZXMkQ1lMSU5ERVIgPSBTaGFwZS50eXBlcy5DWUxJTkRFUjsKICBfU2hhcGUkdHlwZXMkQ09OVkVYUE8gPSBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OOwogIF9TaGFwZSR0eXBlcyRIRUlHSFRGSSA9IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxEOwogIF9TaGFwZSR0eXBlcyRUUklNRVNIID0gU2hhcGUudHlwZXMuVFJJTUVTSDsKICAvKioKICAgKiBBIGxpbmUgaW4gM0Qgc3BhY2UgdGhhdCBpbnRlcnNlY3RzIGJvZGllcyBhbmQgcmV0dXJuIHBvaW50cy4KICAgKi8KCiAgY2xhc3MgUmF5IHsKICAgIC8qKgogICAgICogZnJvbQogICAgICovCgogICAgLyoqCiAgICAgKiB0bwogICAgICovCgogICAgLyoqCiAgICAgKiBkaXJlY3Rpb24KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHByZWNpc2lvbiBvZiB0aGUgcmF5LiBVc2VkIHdoZW4gY2hlY2tpbmcgcGFyYWxsZWxpdHkgZXRjLgogICAgICogQGRlZmF1bHQgMC4wMDAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byBgZmFsc2VgIGlmIHlvdSBkb24ndCB3YW50IHRoZSBSYXkgdG8gdGFrZSBgY29sbGlzaW9uUmVzcG9uc2VgIGZsYWdzIGludG8gYWNjb3VudCBvbiBib2RpZXMgYW5kIHNoYXBlcy4KICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogSWYgc2V0IHRvIGB0cnVlYCwgdGhlIHJheSBza2lwcyBhbnkgaGl0cyB3aXRoIG5vcm1hbC5kb3QocmF5RGlyZWN0aW9uKSA8IDAuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBjb2xsaXNpb25GaWx0ZXJNYXNrCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBjb2xsaXNpb25GaWx0ZXJHcm91cAogICAgICogQGRlZmF1bHQgLTEKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGludGVyc2VjdGlvbiBtb2RlLiBTaG91bGQgYmUgUmF5LkFOWSwgUmF5LkFMTCBvciBSYXkuQ0xPU0VTVC4KICAgICAqIEBkZWZhdWx0IFJBWS5BTlkKICAgICAqLwoKICAgIC8qKgogICAgICogQ3VycmVudCByZXN1bHQgb2JqZWN0LgogICAgICovCgogICAgLyoqCiAgICAgKiBXaWxsIGJlIHNldCB0byBgdHJ1ZWAgZHVyaW5nIGludGVyc2VjdFdvcmxkKCkgaWYgdGhlIHJheSBoaXQgYW55dGhpbmcuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFVzZXItcHJvdmlkZWQgcmVzdWx0IGNhbGxiYWNrLiBXaWxsIGJlIHVzZWQgaWYgbW9kZSBpcyBSYXkuQUxMLgogICAgICovCgogICAgLyoqCiAgICAgKiBDTE9TRVNUCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFOWQogICAgICovCgogICAgLyoqCiAgICAgKiBBTEwKICAgICAqLwogICAgZ2V0IFtfU2hhcGUkdHlwZXMkU1BIRVJFXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdFNwaGVyZTsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRQTEFORV0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RQbGFuZTsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRCT1hdKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0Qm94OwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJENZTElOREVSXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdENvbnZleDsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRDT05WRVhQT10oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXg7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkSEVJR0hURkldKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0SGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkVFJJTUVTSF0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RUcmltZXNoOwogICAgfQoKICAgIGNvbnN0cnVjdG9yKGZyb20sIHRvKSB7CiAgICAgIGlmIChmcm9tID09PSB2b2lkIDApIHsKICAgICAgICBmcm9tID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKHRvID09PSB2b2lkIDApIHsKICAgICAgICB0byA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMuZnJvbSA9IHZvaWQgMDsKICAgICAgdGhpcy50byA9IHZvaWQgMDsKICAgICAgdGhpcy5kaXJlY3Rpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMucHJlY2lzaW9uID0gdm9pZCAwOwogICAgICB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2tpcEJhY2tmYWNlcyA9IHZvaWQgMDsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gdm9pZCAwOwogICAgICB0aGlzLm1vZGUgPSB2b2lkIDA7CiAgICAgIHRoaXMucmVzdWx0ID0gdm9pZCAwOwogICAgICB0aGlzLmhhc0hpdCA9IHZvaWQgMDsKICAgICAgdGhpcy5jYWxsYmFjayA9IHZvaWQgMDsKICAgICAgdGhpcy5mcm9tID0gZnJvbS5jbG9uZSgpOwogICAgICB0aGlzLnRvID0gdG8uY2xvbmUoKTsKICAgICAgdGhpcy5kaXJlY3Rpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnByZWNpc2lvbiA9IDAuMDAwMTsKICAgICAgdGhpcy5jaGVja0NvbGxpc2lvblJlc3BvbnNlID0gdHJ1ZTsKICAgICAgdGhpcy5za2lwQmFja2ZhY2VzID0gZmFsc2U7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzayA9IC0xOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gLTE7CiAgICAgIHRoaXMubW9kZSA9IFJheS5BTlk7CiAgICAgIHRoaXMucmVzdWx0ID0gbmV3IFJheWNhc3RSZXN1bHQoKTsKICAgICAgdGhpcy5oYXNIaXQgPSBmYWxzZTsKCiAgICAgIHRoaXMuY2FsbGJhY2sgPSByZXN1bHQgPT4ge307CiAgICB9CiAgICAvKioKICAgICAqIERvIGl0ZXJzZWN0aW9uIGFnYWluc3QgYWxsIGJvZGllcyBpbiB0aGUgZ2l2ZW4gV29ybGQuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIHJheSBoaXQgYW55dGhpbmcsIG90aGVyd2lzZSBmYWxzZS4KICAgICAqLwoKCiAgICBpbnRlcnNlY3RXb3JsZCh3b3JsZCwgb3B0aW9ucykgewogICAgICB0aGlzLm1vZGUgPSBvcHRpb25zLm1vZGUgfHwgUmF5LkFOWTsKICAgICAgdGhpcy5yZXN1bHQgPSBvcHRpb25zLnJlc3VsdCB8fCBuZXcgUmF5Y2FzdFJlc3VsdCgpOwogICAgICB0aGlzLnNraXBCYWNrZmFjZXMgPSAhIW9wdGlvbnMuc2tpcEJhY2tmYWNlczsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gdHlwZW9mIG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgOiAtMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IHR5cGVvZiBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyR3JvdXAgOiAtMTsKICAgICAgdGhpcy5jaGVja0NvbGxpc2lvblJlc3BvbnNlID0gdHlwZW9mIG9wdGlvbnMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgOiB0cnVlOwoKICAgICAgaWYgKG9wdGlvbnMuZnJvbSkgewogICAgICAgIHRoaXMuZnJvbS5jb3B5KG9wdGlvbnMuZnJvbSk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnRvKSB7CiAgICAgICAgdGhpcy50by5jb3B5KG9wdGlvbnMudG8pOwogICAgICB9CgogICAgICB0aGlzLmNhbGxiYWNrID0gb3B0aW9ucy5jYWxsYmFjayB8fCAoKCkgPT4ge30pOwoKICAgICAgdGhpcy5oYXNIaXQgPSBmYWxzZTsKICAgICAgdGhpcy5yZXN1bHQucmVzZXQoKTsKICAgICAgdGhpcy51cGRhdGVEaXJlY3Rpb24oKTsKICAgICAgdGhpcy5nZXRBQUJCKHRtcEFBQkIkMSk7CiAgICAgIHRtcEFycmF5Lmxlbmd0aCA9IDA7CiAgICAgIHdvcmxkLmJyb2FkcGhhc2UuYWFiYlF1ZXJ5KHdvcmxkLCB0bXBBQUJCJDEsIHRtcEFycmF5KTsKICAgICAgdGhpcy5pbnRlcnNlY3RCb2RpZXModG1wQXJyYXkpOwogICAgICByZXR1cm4gdGhpcy5oYXNIaXQ7CiAgICB9CiAgICAvKioKICAgICAqIFNob290IGEgcmF5IGF0IGEgYm9keSwgZ2V0IGJhY2sgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGhpdC4KICAgICAqIEBkZXByZWNhdGVkIEBwYXJhbSByZXN1bHQgc2V0IHRoZSByZXN1bHQgcHJvcGVydHkgb2YgdGhlIFJheSBpbnN0ZWFkLgogICAgICovCgoKICAgIGludGVyc2VjdEJvZHkoYm9keSwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICB0aGlzLnJlc3VsdCA9IHJlc3VsdDsKICAgICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpOwogICAgICB9CgogICAgICBjb25zdCBjaGVja0NvbGxpc2lvblJlc3BvbnNlID0gdGhpcy5jaGVja0NvbGxpc2lvblJlc3BvbnNlOwoKICAgICAgaWYgKGNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgJiYgIWJvZHkuY29sbGlzaW9uUmVzcG9uc2UpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICgodGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHkuY29sbGlzaW9uRmlsdGVyTWFzaykgPT09IDAgfHwgKGJvZHkuY29sbGlzaW9uRmlsdGVyR3JvdXAgJiB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCB4aSA9IGludGVyc2VjdEJvZHlfeGk7CiAgICAgIGNvbnN0IHFpID0gaW50ZXJzZWN0Qm9keV9xaTsKCiAgICAgIGZvciAobGV0IGkgPSAwLCBOID0gYm9keS5zaGFwZXMubGVuZ3RoOyBpIDwgTjsgaSsrKSB7CiAgICAgICAgY29uc3Qgc2hhcGUgPSBib2R5LnNoYXBlc1tpXTsKCiAgICAgICAgaWYgKGNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgJiYgIXNoYXBlLmNvbGxpc2lvblJlc3BvbnNlKSB7CiAgICAgICAgICBjb250aW51ZTsgLy8gU2tpcAogICAgICAgIH0KCiAgICAgICAgYm9keS5xdWF0ZXJuaW9uLm11bHQoYm9keS5zaGFwZU9yaWVudGF0aW9uc1tpXSwgcWkpOwogICAgICAgIGJvZHkucXVhdGVybmlvbi52bXVsdChib2R5LnNoYXBlT2Zmc2V0c1tpXSwgeGkpOwogICAgICAgIHhpLnZhZGQoYm9keS5wb3NpdGlvbiwgeGkpOwogICAgICAgIHRoaXMuaW50ZXJzZWN0U2hhcGUoc2hhcGUsIHFpLCB4aSwgYm9keSk7CgogICAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2hvb3QgYSByYXkgYXQgYW4gYXJyYXkgYm9kaWVzLCBnZXQgYmFjayBpbmZvcm1hdGlvbiBhYm91dCB0aGUgaGl0LgogICAgICogQHBhcmFtIGJvZGllcyBBbiBhcnJheSBvZiBCb2R5IG9iamVjdHMuCiAgICAgKiBAZGVwcmVjYXRlZCBAcGFyYW0gcmVzdWx0IHNldCB0aGUgcmVzdWx0IHByb3BlcnR5IG9mIHRoZSBSYXkgaW5zdGVhZC4KICAgICAqCiAgICAgKi8KCgogICAgaW50ZXJzZWN0Qm9kaWVzKGJvZGllcywgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICB0aGlzLnJlc3VsdCA9IHJlc3VsdDsKICAgICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpOwogICAgICB9CgogICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGJvZGllcy5sZW5ndGg7ICF0aGlzLnJlc3VsdC5zaG91bGRTdG9wICYmIGkgPCBsOyBpKyspIHsKICAgICAgICB0aGlzLmludGVyc2VjdEJvZHkoYm9kaWVzW2ldKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGVzIHRoZSBkaXJlY3Rpb24gdmVjdG9yLgogICAgICovCgoKICAgIHVwZGF0ZURpcmVjdGlvbigpIHsKICAgICAgdGhpcy50by52c3ViKHRoaXMuZnJvbSwgdGhpcy5kaXJlY3Rpb24pOwogICAgICB0aGlzLmRpcmVjdGlvbi5ub3JtYWxpemUoKTsKICAgIH0KCiAgICBpbnRlcnNlY3RTaGFwZShzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHkpIHsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsgLy8gQ2hlY2tpbmcgYm91bmRpbmdTcGhlcmUKCiAgICAgIGNvbnN0IGRpc3RhbmNlID0gZGlzdGFuY2VGcm9tSW50ZXJzZWN0aW9uKGZyb20sIHRoaXMuZGlyZWN0aW9uLCBwb3NpdGlvbik7CgogICAgICBpZiAoZGlzdGFuY2UgPiBzaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgaW50ZXJzZWN0TWV0aG9kID0gdGhpc1tzaGFwZS50eXBlXTsKCiAgICAgIGlmIChpbnRlcnNlY3RNZXRob2QpIHsKICAgICAgICBpbnRlcnNlY3RNZXRob2QuY2FsbCh0aGlzLCBzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHNoYXBlKTsKICAgICAgfQogICAgfQoKICAgIF9pbnRlcnNlY3RCb3goYm94LCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0Q29udmV4KGJveC5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlKTsKICAgIH0KCiAgICBfaW50ZXJzZWN0UGxhbmUoc2hhcGUsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlKSB7CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5kaXJlY3Rpb247IC8vIEdldCBwbGFuZSBub3JtYWwKCiAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gbmV3IFZlYzMoMCwgMCwgMSk7CiAgICAgIHF1YXQudm11bHQod29ybGROb3JtYWwsIHdvcmxkTm9ybWFsKTsKICAgICAgY29uc3QgbGVuID0gbmV3IFZlYzMoKTsKICAgICAgZnJvbS52c3ViKHBvc2l0aW9uLCBsZW4pOwogICAgICBjb25zdCBwbGFuZVRvRnJvbSA9IGxlbi5kb3Qod29ybGROb3JtYWwpOwogICAgICB0by52c3ViKHBvc2l0aW9uLCBsZW4pOwogICAgICBjb25zdCBwbGFuZVRvVG8gPSBsZW4uZG90KHdvcmxkTm9ybWFsKTsKCiAgICAgIGlmIChwbGFuZVRvRnJvbSAqIHBsYW5lVG9UbyA+IDApIHsKICAgICAgICAvLyAiZnJvbSIgYW5kICJ0byIgYXJlIG9uIHRoZSBzYW1lIHNpZGUgb2YgdGhlIHBsYW5lLi4uIGJhaWwgb3V0CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoZnJvbS5kaXN0YW5jZVRvKHRvKSA8IHBsYW5lVG9Gcm9tKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCBuX2RvdF9kaXIgPSB3b3JsZE5vcm1hbC5kb3QoZGlyZWN0aW9uKTsKCiAgICAgIGlmIChNYXRoLmFicyhuX2RvdF9kaXIpIDwgdGhpcy5wcmVjaXNpb24pIHsKICAgICAgICAvLyBObyBpbnRlcnNlY3Rpb24KICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHBsYW5lUG9pbnRUb0Zyb20gPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBkaXJfc2NhbGVkX3dpdGhfdCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGhpdFBvaW50V29ybGQgPSBuZXcgVmVjMygpOwogICAgICBmcm9tLnZzdWIocG9zaXRpb24sIHBsYW5lUG9pbnRUb0Zyb20pOwogICAgICBjb25zdCB0ID0gLXdvcmxkTm9ybWFsLmRvdChwbGFuZVBvaW50VG9Gcm9tKSAvIG5fZG90X2RpcjsKICAgICAgZGlyZWN0aW9uLnNjYWxlKHQsIGRpcl9zY2FsZWRfd2l0aF90KTsKICAgICAgZnJvbS52YWRkKGRpcl9zY2FsZWRfd2l0aF90LCBoaXRQb2ludFdvcmxkKTsKICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24od29ybGROb3JtYWwsIGhpdFBvaW50V29ybGQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIC0xKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSB3b3JsZCBBQUJCIG9mIHRoZSByYXkuCiAgICAgKi8KCgogICAgZ2V0QUFCQihhYWJiKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBsb3dlckJvdW5kLAogICAgICAgIHVwcGVyQm91bmQKICAgICAgfSA9IGFhYmI7CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgbG93ZXJCb3VuZC54ID0gTWF0aC5taW4odG8ueCwgZnJvbS54KTsKICAgICAgbG93ZXJCb3VuZC55ID0gTWF0aC5taW4odG8ueSwgZnJvbS55KTsKICAgICAgbG93ZXJCb3VuZC56ID0gTWF0aC5taW4odG8ueiwgZnJvbS56KTsKICAgICAgdXBwZXJCb3VuZC54ID0gTWF0aC5tYXgodG8ueCwgZnJvbS54KTsKICAgICAgdXBwZXJCb3VuZC55ID0gTWF0aC5tYXgodG8ueSwgZnJvbS55KTsKICAgICAgdXBwZXJCb3VuZC56ID0gTWF0aC5tYXgodG8ueiwgZnJvbS56KTsKICAgIH0KCiAgICBfaW50ZXJzZWN0SGVpZ2h0ZmllbGQoc2hhcGUsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlKSB7CiAgICAgIHNoYXBlLmRhdGE7CiAgICAgIHNoYXBlLmVsZW1lbnRTaXplOyAvLyBDb252ZXJ0IHRoZSByYXkgdG8gbG9jYWwgaGVpZ2h0ZmllbGQgY29vcmRpbmF0ZXMKCiAgICAgIGNvbnN0IGxvY2FsUmF5ID0gaW50ZXJzZWN0SGVpZ2h0ZmllbGRfbG9jYWxSYXk7IC8vbmV3IFJheSh0aGlzLmZyb20sIHRoaXMudG8pOwoKICAgICAgbG9jYWxSYXkuZnJvbS5jb3B5KHRoaXMuZnJvbSk7CiAgICAgIGxvY2FsUmF5LnRvLmNvcHkodGhpcy50byk7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgbG9jYWxSYXkuZnJvbSwgbG9jYWxSYXkuZnJvbSk7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgbG9jYWxSYXkudG8sIGxvY2FsUmF5LnRvKTsKICAgICAgbG9jYWxSYXkudXBkYXRlRGlyZWN0aW9uKCk7IC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdAoKICAgICAgY29uc3QgaW5kZXggPSBpbnRlcnNlY3RIZWlnaHRmaWVsZF9pbmRleDsKICAgICAgbGV0IGlNaW5YOwogICAgICBsZXQgaU1pblk7CiAgICAgIGxldCBpTWF4WDsKICAgICAgbGV0IGlNYXhZOyAvLyBTZXQgdG8gbWF4CgogICAgICBpTWluWCA9IGlNaW5ZID0gMDsKICAgICAgaU1heFggPSBpTWF4WSA9IHNoYXBlLmRhdGEubGVuZ3RoIC0gMTsKICAgICAgY29uc3QgYWFiYiA9IG5ldyBBQUJCKCk7CiAgICAgIGxvY2FsUmF5LmdldEFBQkIoYWFiYik7CiAgICAgIHNoYXBlLmdldEluZGV4T2ZQb3NpdGlvbihhYWJiLmxvd2VyQm91bmQueCwgYWFiYi5sb3dlckJvdW5kLnksIGluZGV4LCB0cnVlKTsKICAgICAgaU1pblggPSBNYXRoLm1heChpTWluWCwgaW5kZXhbMF0pOwogICAgICBpTWluWSA9IE1hdGgubWF4KGlNaW5ZLCBpbmRleFsxXSk7CiAgICAgIHNoYXBlLmdldEluZGV4T2ZQb3NpdGlvbihhYWJiLnVwcGVyQm91bmQueCwgYWFiYi51cHBlckJvdW5kLnksIGluZGV4LCB0cnVlKTsKICAgICAgaU1heFggPSBNYXRoLm1pbihpTWF4WCwgaW5kZXhbMF0gKyAxKTsKICAgICAgaU1heFkgPSBNYXRoLm1pbihpTWF4WSwgaW5kZXhbMV0gKyAxKTsKCiAgICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8IGlNYXhYOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPCBpTWF4WTsgaisrKSB7CiAgICAgICAgICBpZiAodGhpcy5yZXN1bHQuc2hvdWxkU3RvcCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CgogICAgICAgICAgc2hhcGUuZ2V0QWFiYkF0SW5kZXgoaSwgaiwgYWFiYik7CgogICAgICAgICAgaWYgKCFhYWJiLm92ZXJsYXBzUmF5KGxvY2FsUmF5KSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0gLy8gTG93ZXIgdHJpYW5nbGUKCgogICAgICAgICAgc2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgZmFsc2UpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBzaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICB0aGlzLl9pbnRlcnNlY3RDb252ZXgoc2hhcGUucGlsbGFyQ29udmV4LCBxdWF0LCB3b3JsZFBpbGxhck9mZnNldCwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgaW50ZXJzZWN0Q29udmV4T3B0aW9ucyk7CgogICAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfSAvLyBVcHBlciB0cmlhbmdsZQoKCiAgICAgICAgICBzaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCB0cnVlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdCwgc2hhcGUucGlsbGFyT2Zmc2V0LCB3b3JsZFBpbGxhck9mZnNldCk7CgogICAgICAgICAgdGhpcy5faW50ZXJzZWN0Q29udmV4KHNoYXBlLnBpbGxhckNvbnZleCwgcXVhdCwgd29ybGRQaWxsYXJPZmZzZXQsIGJvZHksIHJlcG9ydGVkU2hhcGUsIGludGVyc2VjdENvbnZleE9wdGlvbnMpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIF9pbnRlcnNlY3RTcGhlcmUoc3BoZXJlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkgewogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IHIgPSBzcGhlcmUucmFkaXVzOwogICAgICBjb25zdCBhID0gKHRvLnggLSBmcm9tLngpICoqIDIgKyAodG8ueSAtIGZyb20ueSkgKiogMiArICh0by56IC0gZnJvbS56KSAqKiAyOwogICAgICBjb25zdCBiID0gMiAqICgodG8ueCAtIGZyb20ueCkgKiAoZnJvbS54IC0gcG9zaXRpb24ueCkgKyAodG8ueSAtIGZyb20ueSkgKiAoZnJvbS55IC0gcG9zaXRpb24ueSkgKyAodG8ueiAtIGZyb20ueikgKiAoZnJvbS56IC0gcG9zaXRpb24ueikpOwogICAgICBjb25zdCBjID0gKGZyb20ueCAtIHBvc2l0aW9uLngpICoqIDIgKyAoZnJvbS55IC0gcG9zaXRpb24ueSkgKiogMiArIChmcm9tLnogLSBwb3NpdGlvbi56KSAqKiAyIC0gciAqKiAyOwogICAgICBjb25zdCBkZWx0YSA9IGIgKiogMiAtIDQgKiBhICogYzsKICAgICAgY29uc3QgaW50ZXJzZWN0aW9uUG9pbnQgPSBSYXlfaW50ZXJzZWN0U3BoZXJlX2ludGVyc2VjdGlvblBvaW50OwogICAgICBjb25zdCBub3JtYWwgPSBSYXlfaW50ZXJzZWN0U3BoZXJlX25vcm1hbDsKCiAgICAgIGlmIChkZWx0YSA8IDApIHsKICAgICAgICAvLyBObyBpbnRlcnNlY3Rpb24KICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZiAoZGVsdGEgPT09IDApIHsKICAgICAgICAvLyBzaW5nbGUgaW50ZXJzZWN0aW9uIHBvaW50CiAgICAgICAgZnJvbS5sZXJwKHRvLCBkZWx0YSwgaW50ZXJzZWN0aW9uUG9pbnQpOwogICAgICAgIGludGVyc2VjdGlvblBvaW50LnZzdWIocG9zaXRpb24sIG5vcm1hbCk7CiAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKG5vcm1hbCwgaW50ZXJzZWN0aW9uUG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIC0xKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBkMSA9ICgtYiAtIE1hdGguc3FydChkZWx0YSkpIC8gKDIgKiBhKTsKICAgICAgICBjb25zdCBkMiA9ICgtYiArIE1hdGguc3FydChkZWx0YSkpIC8gKDIgKiBhKTsKCiAgICAgICAgaWYgKGQxID49IDAgJiYgZDEgPD0gMSkgewogICAgICAgICAgZnJvbS5sZXJwKHRvLCBkMSwgaW50ZXJzZWN0aW9uUG9pbnQpOwogICAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQudnN1Yihwb3NpdGlvbiwgbm9ybWFsKTsKICAgICAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKG5vcm1hbCwgaW50ZXJzZWN0aW9uUG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIC0xKTsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoZDIgPj0gMCAmJiBkMiA8PSAxKSB7CiAgICAgICAgICBmcm9tLmxlcnAodG8sIGQyLCBpbnRlcnNlY3Rpb25Qb2ludCk7CiAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludC52c3ViKHBvc2l0aW9uLCBub3JtYWwpOwogICAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3Rpb25Qb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIF9pbnRlcnNlY3RDb252ZXgoc2hhcGUsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlLCBvcHRpb25zKSB7CiAgICAgIGNvbnN0IG5vcm1hbCA9IGludGVyc2VjdENvbnZleF9ub3JtYWw7CiAgICAgIGNvbnN0IHZlY3RvciA9IGludGVyc2VjdENvbnZleF92ZWN0b3I7CiAgICAgIGNvbnN0IGZhY2VMaXN0ID0gb3B0aW9ucyAmJiBvcHRpb25zLmZhY2VMaXN0IHx8IG51bGw7IC8vIENoZWNraW5nIGZhY2VzCgogICAgICBjb25zdCBmYWNlcyA9IHNoYXBlLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHNoYXBlLnZlcnRpY2VzOwogICAgICBjb25zdCBub3JtYWxzID0gc2hhcGUuZmFjZU5vcm1hbHM7CiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uOwogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IGZyb21Ub0Rpc3RhbmNlID0gZnJvbS5kaXN0YW5jZVRvKHRvKTsKICAgICAgY29uc3QgTmZhY2VzID0gZmFjZUxpc3QgPyBmYWNlTGlzdC5sZW5ndGggOiBmYWNlcy5sZW5ndGg7CiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucmVzdWx0OwoKICAgICAgZm9yIChsZXQgaiA9IDA7ICFyZXN1bHQuc2hvdWxkU3RvcCAmJiBqIDwgTmZhY2VzOyBqKyspIHsKICAgICAgICBjb25zdCBmaSA9IGZhY2VMaXN0ID8gZmFjZUxpc3Rbal0gOiBqOwogICAgICAgIGNvbnN0IGZhY2UgPSBmYWNlc1tmaV07CiAgICAgICAgY29uc3QgZmFjZU5vcm1hbCA9IG5vcm1hbHNbZmldOwogICAgICAgIGNvbnN0IHEgPSBxdWF0OwogICAgICAgIGNvbnN0IHggPSBwb3NpdGlvbjsgLy8gZGV0ZXJtaW5lIGlmIHJheSBpbnRlcnNlY3RzIHRoZSBwbGFuZSBvZiB0aGUgZmFjZQogICAgICAgIC8vIG5vdGU6IHRoaXMgd29ya3MgcmVnYXJkbGVzcyBvZiB0aGUgZGlyZWN0aW9uIG9mIHRoZSBmYWNlIG5vcm1hbAogICAgICAgIC8vIEdldCBwbGFuZSBwb2ludCBpbiB3b3JsZCBjb29yZGluYXRlcy4uLgoKICAgICAgICB2ZWN0b3IuY29weSh2ZXJ0aWNlc1tmYWNlWzBdXSk7CiAgICAgICAgcS52bXVsdCh2ZWN0b3IsIHZlY3Rvcik7CiAgICAgICAgdmVjdG9yLnZhZGQoeCwgdmVjdG9yKTsgLy8gLi4uYnV0IG1ha2UgaXQgcmVsYXRpdmUgdG8gdGhlIHJheSBmcm9tLiBXZSdsbCBmaXggdGhpcyBsYXRlci4KCiAgICAgICAgdmVjdG9yLnZzdWIoZnJvbSwgdmVjdG9yKTsgLy8gR2V0IHBsYW5lIG5vcm1hbAoKICAgICAgICBxLnZtdWx0KGZhY2VOb3JtYWwsIG5vcm1hbCk7IC8vIElmIHRoaXMgZG90IHByb2R1Y3QgaXMgbmVnYXRpdmUsIHdlIGhhdmUgc29tZXRoaW5nIGludGVyZXN0aW5nCgogICAgICAgIGNvbnN0IGRvdCA9IGRpcmVjdGlvbi5kb3Qobm9ybWFsKTsgLy8gQmFpbCBvdXQgaWYgcmF5IGFuZCBwbGFuZSBhcmUgcGFyYWxsZWwKCiAgICAgICAgaWYgKE1hdGguYWJzKGRvdCkgPCB0aGlzLnByZWNpc2lvbikgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSAvLyBjYWxjIGRpc3RhbmNlIHRvIHBsYW5lCgoKICAgICAgICBjb25zdCBzY2FsYXIgPSBub3JtYWwuZG90KHZlY3RvcikgLyBkb3Q7IC8vIGlmIG5lZ2F0aXZlIGRpc3RhbmNlLCB0aGVuIHBsYW5lIGlzIGJlaGluZCByYXkKCiAgICAgICAgaWYgKHNjYWxhciA8IDApIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gLy8gaWYgKGRvdCA8IDApIHsKICAgICAgICAvLyBJbnRlcnNlY3Rpb24gcG9pbnQgaXMgZnJvbSArIGRpcmVjdGlvbiAqIHNjYWxhcgoKCiAgICAgICAgZGlyZWN0aW9uLnNjYWxlKHNjYWxhciwgaW50ZXJzZWN0UG9pbnQpOwogICAgICAgIGludGVyc2VjdFBvaW50LnZhZGQoZnJvbSwgaW50ZXJzZWN0UG9pbnQpOyAvLyBhIGlzIHRoZSBwb2ludCB3ZSBjb21wYXJlIHBvaW50cyBiIGFuZCBjIHdpdGguCgogICAgICAgIGEuY29weSh2ZXJ0aWNlc1tmYWNlWzBdXSk7CiAgICAgICAgcS52bXVsdChhLCBhKTsKICAgICAgICB4LnZhZGQoYSwgYSk7CgogICAgICAgIGZvciAobGV0IGkgPSAxOyAhcmVzdWx0LnNob3VsZFN0b3AgJiYgaSA8IGZhY2UubGVuZ3RoIC0gMTsgaSsrKSB7CiAgICAgICAgICAvLyBUcmFuc2Zvcm0gMyB2ZXJ0aWNlcyB0byB3b3JsZCBjb29yZHMKICAgICAgICAgIGIuY29weSh2ZXJ0aWNlc1tmYWNlW2ldXSk7CiAgICAgICAgICBjLmNvcHkodmVydGljZXNbZmFjZVtpICsgMV1dKTsKICAgICAgICAgIHEudm11bHQoYiwgYik7CiAgICAgICAgICBxLnZtdWx0KGMsIGMpOwogICAgICAgICAgeC52YWRkKGIsIGIpOwogICAgICAgICAgeC52YWRkKGMsIGMpOwogICAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBpbnRlcnNlY3RQb2ludC5kaXN0YW5jZVRvKGZyb20pOwoKICAgICAgICAgIGlmICghKFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGEsIGIsIGMpIHx8IFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGIsIGEsIGMpKSB8fCBkaXN0YW5jZSA+IGZyb21Ub0Rpc3RhbmNlKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKG5vcm1hbCwgaW50ZXJzZWN0UG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIGZpKTsKICAgICAgICB9IC8vIH0KCiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQHRvZG8gT3B0aW1pemUgYnkgdHJhbnNmb3JtaW5nIHRoZSB3b3JsZCB0byBsb2NhbCBzcGFjZSBmaXJzdC4KICAgICAqIEB0b2RvIFVzZSBPY3RyZWUgbG9va3VwCiAgICAgKi8KCgogICAgX2ludGVyc2VjdFRyaW1lc2gobWVzaCwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUsIG9wdGlvbnMpIHsKICAgICAgY29uc3Qgbm9ybWFsID0gaW50ZXJzZWN0VHJpbWVzaF9ub3JtYWw7CiAgICAgIGNvbnN0IHRyaWFuZ2xlcyA9IGludGVyc2VjdFRyaW1lc2hfdHJpYW5nbGVzOwogICAgICBjb25zdCB0cmVlVHJhbnNmb3JtID0gaW50ZXJzZWN0VHJpbWVzaF90cmVlVHJhbnNmb3JtOwogICAgICBjb25zdCB2ZWN0b3IgPSBpbnRlcnNlY3RDb252ZXhfdmVjdG9yOwogICAgICBjb25zdCBsb2NhbERpcmVjdGlvbiA9IGludGVyc2VjdFRyaW1lc2hfbG9jYWxEaXJlY3Rpb247CiAgICAgIGNvbnN0IGxvY2FsRnJvbSA9IGludGVyc2VjdFRyaW1lc2hfbG9jYWxGcm9tOwogICAgICBjb25zdCBsb2NhbFRvID0gaW50ZXJzZWN0VHJpbWVzaF9sb2NhbFRvOwogICAgICBjb25zdCB3b3JsZEludGVyc2VjdFBvaW50ID0gaW50ZXJzZWN0VHJpbWVzaF93b3JsZEludGVyc2VjdFBvaW50OwogICAgICBjb25zdCB3b3JsZE5vcm1hbCA9IGludGVyc2VjdFRyaW1lc2hfd29ybGROb3JtYWw7IC8vIENoZWNraW5nIGZhY2VzCgogICAgICBjb25zdCBpbmRpY2VzID0gbWVzaC5pbmRpY2VzOwogICAgICBtZXNoLnZlcnRpY2VzOyAvLyBjb25zdCBub3JtYWxzID0gbWVzaC5mYWNlTm9ybWFscwoKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbjsKICAgICAgdHJlZVRyYW5zZm9ybS5wb3NpdGlvbi5jb3B5KHBvc2l0aW9uKTsKICAgICAgdHJlZVRyYW5zZm9ybS5xdWF0ZXJuaW9uLmNvcHkocXVhdCk7IC8vIFRyYW5zZm9ybSByYXkgdG8gbG9jYWwgc3BhY2UhCgogICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBkaXJlY3Rpb24sIGxvY2FsRGlyZWN0aW9uKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBmcm9tLCBsb2NhbEZyb20pOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIHRvLCBsb2NhbFRvKTsKICAgICAgbG9jYWxUby54ICo9IG1lc2guc2NhbGUueDsKICAgICAgbG9jYWxUby55ICo9IG1lc2guc2NhbGUueTsKICAgICAgbG9jYWxUby56ICo9IG1lc2guc2NhbGUuejsKICAgICAgbG9jYWxGcm9tLnggKj0gbWVzaC5zY2FsZS54OwogICAgICBsb2NhbEZyb20ueSAqPSBtZXNoLnNjYWxlLnk7CiAgICAgIGxvY2FsRnJvbS56ICo9IG1lc2guc2NhbGUuejsKICAgICAgbG9jYWxUby52c3ViKGxvY2FsRnJvbSwgbG9jYWxEaXJlY3Rpb24pOwogICAgICBsb2NhbERpcmVjdGlvbi5ub3JtYWxpemUoKTsKICAgICAgY29uc3QgZnJvbVRvRGlzdGFuY2VTcXVhcmVkID0gbG9jYWxGcm9tLmRpc3RhbmNlU3F1YXJlZChsb2NhbFRvKTsKICAgICAgbWVzaC50cmVlLnJheVF1ZXJ5KHRoaXMsIHRyZWVUcmFuc2Zvcm0sIHRyaWFuZ2xlcyk7CgogICAgICBmb3IgKGxldCBpID0gMCwgTiA9IHRyaWFuZ2xlcy5sZW5ndGg7ICF0aGlzLnJlc3VsdC5zaG91bGRTdG9wICYmIGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IHRyaWFuZ2xlc0luZGV4ID0gdHJpYW5nbGVzW2ldOwogICAgICAgIG1lc2guZ2V0Tm9ybWFsKHRyaWFuZ2xlc0luZGV4LCBub3JtYWwpOyAvLyBkZXRlcm1pbmUgaWYgcmF5IGludGVyc2VjdHMgdGhlIHBsYW5lIG9mIHRoZSBmYWNlCiAgICAgICAgLy8gbm90ZTogdGhpcyB3b3JrcyByZWdhcmRsZXNzIG9mIHRoZSBkaXJlY3Rpb24gb2YgdGhlIGZhY2Ugbm9ybWFsCiAgICAgICAgLy8gR2V0IHBsYW5lIHBvaW50IGluIHdvcmxkIGNvb3JkaW5hdGVzLi4uCgogICAgICAgIG1lc2guZ2V0VmVydGV4KGluZGljZXNbdHJpYW5nbGVzSW5kZXggKiAzXSwgYSk7IC8vIC4uLmJ1dCBtYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSByYXkgZnJvbS4gV2UnbGwgZml4IHRoaXMgbGF0ZXIuCgogICAgICAgIGEudnN1Yihsb2NhbEZyb20sIHZlY3Rvcik7IC8vIElmIHRoaXMgZG90IHByb2R1Y3QgaXMgbmVnYXRpdmUsIHdlIGhhdmUgc29tZXRoaW5nIGludGVyZXN0aW5nCgogICAgICAgIGNvbnN0IGRvdCA9IGxvY2FsRGlyZWN0aW9uLmRvdChub3JtYWwpOyAvLyBCYWlsIG91dCBpZiByYXkgYW5kIHBsYW5lIGFyZSBwYXJhbGxlbAogICAgICAgIC8vIGlmIChNYXRoLmFicyggZG90ICkgPCB0aGlzLnByZWNpc2lvbil7CiAgICAgICAgLy8gICAgIGNvbnRpbnVlOwogICAgICAgIC8vIH0KICAgICAgICAvLyBjYWxjIGRpc3RhbmNlIHRvIHBsYW5lCgogICAgICAgIGNvbnN0IHNjYWxhciA9IG5vcm1hbC5kb3QodmVjdG9yKSAvIGRvdDsgLy8gaWYgbmVnYXRpdmUgZGlzdGFuY2UsIHRoZW4gcGxhbmUgaXMgYmVoaW5kIHJheQoKICAgICAgICBpZiAoc2NhbGFyIDwgMCkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSAvLyBJbnRlcnNlY3Rpb24gcG9pbnQgaXMgZnJvbSArIGRpcmVjdGlvbiAqIHNjYWxhcgoKCiAgICAgICAgbG9jYWxEaXJlY3Rpb24uc2NhbGUoc2NhbGFyLCBpbnRlcnNlY3RQb2ludCk7CiAgICAgICAgaW50ZXJzZWN0UG9pbnQudmFkZChsb2NhbEZyb20sIGludGVyc2VjdFBvaW50KTsgLy8gR2V0IHRyaWFuZ2xlIHZlcnRpY2VzCgogICAgICAgIG1lc2guZ2V0VmVydGV4KGluZGljZXNbdHJpYW5nbGVzSW5kZXggKiAzICsgMV0sIGIpOwogICAgICAgIG1lc2guZ2V0VmVydGV4KGluZGljZXNbdHJpYW5nbGVzSW5kZXggKiAzICsgMl0sIGMpOwogICAgICAgIGNvbnN0IHNxdWFyZWREaXN0YW5jZSA9IGludGVyc2VjdFBvaW50LmRpc3RhbmNlU3F1YXJlZChsb2NhbEZyb20pOwoKICAgICAgICBpZiAoIShSYXkucG9pbnRJblRyaWFuZ2xlKGludGVyc2VjdFBvaW50LCBiLCBhLCBjKSB8fCBSYXkucG9pbnRJblRyaWFuZ2xlKGludGVyc2VjdFBvaW50LCBhLCBiLCBjKSkgfHwgc3F1YXJlZERpc3RhbmNlID4gZnJvbVRvRGlzdGFuY2VTcXVhcmVkKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IC8vIHRyYW5zZm9ybSBpbnRlcnNlY3Rwb2ludCBhbmQgbm9ybWFsIHRvIHdvcmxkCgoKICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHF1YXQsIG5vcm1hbCwgd29ybGROb3JtYWwpOwogICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdCwgaW50ZXJzZWN0UG9pbnQsIHdvcmxkSW50ZXJzZWN0UG9pbnQpOwogICAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKHdvcmxkTm9ybWFsLCB3b3JsZEludGVyc2VjdFBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCB0cmlhbmdsZXNJbmRleCk7CiAgICAgIH0KCiAgICAgIHRyaWFuZ2xlcy5sZW5ndGggPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIGludGVyc2VjdGlvbnMgc2hvdWxkIGNvbnRpbnVlCiAgICAgKi8KCgogICAgcmVwb3J0SW50ZXJzZWN0aW9uKG5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGhpdEZhY2VJbmRleCkgewogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IGRpc3RhbmNlID0gZnJvbS5kaXN0YW5jZVRvKGhpdFBvaW50V29ybGQpOwogICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDsgLy8gU2tpcCBiYWNrIGZhY2VzPwoKICAgICAgaWYgKHRoaXMuc2tpcEJhY2tmYWNlcyAmJiBub3JtYWwuZG90KHRoaXMuZGlyZWN0aW9uKSA+IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHJlc3VsdC5oaXRGYWNlSW5kZXggPSB0eXBlb2YgaGl0RmFjZUluZGV4ICE9PSAndW5kZWZpbmVkJyA/IGhpdEZhY2VJbmRleCA6IC0xOwoKICAgICAgc3dpdGNoICh0aGlzLm1vZGUpIHsKICAgICAgICBjYXNlIFJheS5BTEw6CiAgICAgICAgICB0aGlzLmhhc0hpdCA9IHRydWU7CiAgICAgICAgICByZXN1bHQuc2V0KGZyb20sIHRvLCBub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBkaXN0YW5jZSk7CiAgICAgICAgICByZXN1bHQuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuY2FsbGJhY2socmVzdWx0KTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIFJheS5DTE9TRVNUOgogICAgICAgICAgLy8gU3RvcmUgaWYgY2xvc2VyIHRoYW4gY3VycmVudCBjbG9zZXN0CiAgICAgICAgICBpZiAoZGlzdGFuY2UgPCByZXN1bHQuZGlzdGFuY2UgfHwgIXJlc3VsdC5oYXNIaXQpIHsKICAgICAgICAgICAgdGhpcy5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgICByZXN1bHQuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgICAgcmVzdWx0LnNldChmcm9tLCB0bywgbm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpOwogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIFJheS5BTlk6CiAgICAgICAgICAvLyBSZXBvcnQgYW5kIHN0b3AuCiAgICAgICAgICB0aGlzLmhhc0hpdCA9IHRydWU7CiAgICAgICAgICByZXN1bHQuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgIHJlc3VsdC5zZXQoZnJvbSwgdG8sIG5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKTsKICAgICAgICAgIHJlc3VsdC5zaG91bGRTdG9wID0gdHJ1ZTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEFzIHBlciAiQmFyeWNlbnRyaWMgVGVjaG5pcXVlIiBhcyBuYW1lZAogICAgICoge0BsaW5rIGh0dHBzOi8vd3d3LmJsYWNrcGF3bi5jb20vdGV4dHMvcG9pbnRpbnBvbHkvZGVmYXVsdC5odG1sIGhlcmV9IGJ1dCB3aXRob3V0IHRoZSBkaXZpc2lvbgogICAgICovCgoKICAgIHN0YXRpYyBwb2ludEluVHJpYW5nbGUocCwgYSwgYiwgYykgewogICAgICBjLnZzdWIoYSwgdjApOwogICAgICBiLnZzdWIoYSwgdjEpOwogICAgICBwLnZzdWIoYSwgdjIpOwogICAgICBjb25zdCBkb3QwMCA9IHYwLmRvdCh2MCk7CiAgICAgIGNvbnN0IGRvdDAxID0gdjAuZG90KHYxKTsKICAgICAgY29uc3QgZG90MDIgPSB2MC5kb3QodjIpOwogICAgICBjb25zdCBkb3QxMSA9IHYxLmRvdCh2MSk7CiAgICAgIGNvbnN0IGRvdDEyID0gdjEuZG90KHYyKTsKICAgICAgbGV0IHU7CiAgICAgIGxldCB2OwogICAgICByZXR1cm4gKHUgPSBkb3QxMSAqIGRvdDAyIC0gZG90MDEgKiBkb3QxMikgPj0gMCAmJiAodiA9IGRvdDAwICogZG90MTIgLSBkb3QwMSAqIGRvdDAyKSA+PSAwICYmIHUgKyB2IDwgZG90MDAgKiBkb3QxMSAtIGRvdDAxICogZG90MDE7CiAgICB9CgogIH0KCiAgUmF5LkNMT1NFU1QgPSBSQVlfTU9ERVMuQ0xPU0VTVDsKICBSYXkuQU5ZID0gUkFZX01PREVTLkFOWTsKICBSYXkuQUxMID0gUkFZX01PREVTLkFMTDsKICBjb25zdCB0bXBBQUJCJDEgPSBuZXcgQUFCQigpOwogIGNvbnN0IHRtcEFycmF5ID0gW107CiAgY29uc3QgdjEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHYyID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RCb2R5X3hpID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RCb2R5X3FpID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCBpbnRlcnNlY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Q29udmV4T3B0aW9ucyA9IHsKICAgIGZhY2VMaXN0OiBbMF0KICB9OwogIGNvbnN0IHdvcmxkUGlsbGFyT2Zmc2V0ID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RIZWlnaHRmaWVsZF9sb2NhbFJheSA9IG5ldyBSYXkoKTsKICBjb25zdCBpbnRlcnNlY3RIZWlnaHRmaWVsZF9pbmRleCA9IFtdOwogIGNvbnN0IFJheV9pbnRlcnNlY3RTcGhlcmVfaW50ZXJzZWN0aW9uUG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IFJheV9pbnRlcnNlY3RTcGhlcmVfbm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RDb252ZXhfbm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RDb252ZXhfdmVjdG9yID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF9sb2NhbERpcmVjdGlvbiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF9sb2NhbEZyb20gPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfbG9jYWxUbyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF93b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF93b3JsZEludGVyc2VjdFBvaW50ID0gbmV3IFZlYzMoKTsKICBuZXcgQUFCQigpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfdHJpYW5nbGVzID0gW107CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF90cmVlVHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSgpOwogIGNvbnN0IHYwID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3QgPSBuZXcgVmVjMygpOwoKICBmdW5jdGlvbiBkaXN0YW5jZUZyb21JbnRlcnNlY3Rpb24oZnJvbSwgZGlyZWN0aW9uLCBwb3NpdGlvbikgewogICAgLy8gdjAgaXMgdmVjdG9yIGZyb20gZnJvbSB0byBwb3NpdGlvbgogICAgcG9zaXRpb24udnN1Yihmcm9tLCB2MCk7CiAgICBjb25zdCBkb3QgPSB2MC5kb3QoZGlyZWN0aW9uKTsgLy8gaW50ZXJzZWN0ID0gZGlyZWN0aW9uKmRvdCArIGZyb20KCiAgICBkaXJlY3Rpb24uc2NhbGUoZG90LCBpbnRlcnNlY3QpOwogICAgaW50ZXJzZWN0LnZhZGQoZnJvbSwgaW50ZXJzZWN0KTsKICAgIGNvbnN0IGRpc3RhbmNlID0gcG9zaXRpb24uZGlzdGFuY2VUbyhpbnRlcnNlY3QpOwogICAgcmV0dXJuIGRpc3RhbmNlOwogIH0KICAvKioKICAgKiBTd2VlcCBhbmQgcHJ1bmUgYnJvYWRwaGFzZSBhbG9uZyBvbmUgYXhpcy4KICAgKi8KCgogIGNsYXNzIFNBUEJyb2FkcGhhc2UgZXh0ZW5kcyBCcm9hZHBoYXNlIHsKICAgIC8qKgogICAgICogTGlzdCBvZiBib2RpZXMgY3VycmVudGx5IGluIHRoZSBicm9hZHBoYXNlLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgd29ybGQgdG8gc2VhcmNoIGluLgogICAgICovCgogICAgLyoqCiAgICAgKiBBeGlzIHRvIHNvcnQgdGhlIGJvZGllcyBhbG9uZy4KICAgICAqIFNldCB0byAwIGZvciB4IGF4aXMsIGFuZCAxIGZvciB5IGF4aXMuCiAgICAgKiBGb3IgYmVzdCBwZXJmb3JtYW5jZSwgcGljayB0aGUgYXhpcyB3aGVyZSBib2RpZXMgYXJlIG1vc3QgZGlzdHJpYnV0ZWQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZHMgb2YgdHdvIGJvZGllcyBvdmVybGFwLCBhbG9uZyB0aGUgZ2l2ZW4gU0FQIGF4aXMuCiAgICAgKi8KICAgIHN0YXRpYyBjaGVja0JvdW5kcyhiaSwgYmosIGF4aXNJbmRleCkgewogICAgICBsZXQgYmlQb3M7CiAgICAgIGxldCBialBvczsKCiAgICAgIGlmIChheGlzSW5kZXggPT09IDApIHsKICAgICAgICBiaVBvcyA9IGJpLnBvc2l0aW9uLng7CiAgICAgICAgYmpQb3MgPSBiai5wb3NpdGlvbi54OwogICAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMSkgewogICAgICAgIGJpUG9zID0gYmkucG9zaXRpb24ueTsKICAgICAgICBialBvcyA9IGJqLnBvc2l0aW9uLnk7CiAgICAgIH0gZWxzZSBpZiAoYXhpc0luZGV4ID09PSAyKSB7CiAgICAgICAgYmlQb3MgPSBiaS5wb3NpdGlvbi56OwogICAgICAgIGJqUG9zID0gYmoucG9zaXRpb24uejsKICAgICAgfQoKICAgICAgY29uc3QgcmkgPSBiaS5ib3VuZGluZ1JhZGl1cywKICAgICAgICAgICAgcmogPSBiai5ib3VuZGluZ1JhZGl1cywKICAgICAgICAgICAgYm91bmRBMiA9IGJpUG9zICsgcmksCiAgICAgICAgICAgIGJvdW5kQjEgPSBialBvcyAtIHJqOwogICAgICByZXR1cm4gYm91bmRCMSA8IGJvdW5kQTI7CiAgICB9IC8vIE5vdGU6IHRoZXNlIGFyZSBpZGVudGljYWwsIHNhdmUgZm9yIHgveS96IGxvd2VyYm91bmQKCiAgICAvKioKICAgICAqIGluc2VydGlvblNvcnRYCiAgICAgKi8KCgogICAgc3RhdGljIGluc2VydGlvblNvcnRYKGEpIHsKICAgICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIGNvbnN0IHYgPSBhW2ldOwogICAgICAgIGxldCBqOwoKICAgICAgICBmb3IgKGogPSBpIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC54IDw9IHYuYWFiYi5sb3dlckJvdW5kLngpIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgYVtqICsgMV0gPSBhW2pdOwogICAgICAgIH0KCiAgICAgICAgYVtqICsgMV0gPSB2OwogICAgICB9CgogICAgICByZXR1cm4gYTsKICAgIH0KICAgIC8qKgogICAgICogaW5zZXJ0aW9uU29ydFkKICAgICAqLwoKCiAgICBzdGF0aWMgaW5zZXJ0aW9uU29ydFkoYSkgewogICAgICBmb3IgKGxldCBpID0gMSwgbCA9IGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IGFbaV07CiAgICAgICAgbGV0IGo7CgogICAgICAgIGZvciAoaiA9IGkgLSAxOyBqID49IDA7IGotLSkgewogICAgICAgICAgaWYgKGFbal0uYWFiYi5sb3dlckJvdW5kLnkgPD0gdi5hYWJiLmxvd2VyQm91bmQueSkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBhW2ogKyAxXSA9IGFbal07CiAgICAgICAgfQoKICAgICAgICBhW2ogKyAxXSA9IHY7CiAgICAgIH0KCiAgICAgIHJldHVybiBhOwogICAgfQogICAgLyoqCiAgICAgKiBpbnNlcnRpb25Tb3J0WgogICAgICovCgoKICAgIHN0YXRpYyBpbnNlcnRpb25Tb3J0WihhKSB7CiAgICAgIGZvciAobGV0IGkgPSAxLCBsID0gYS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gYVtpXTsKICAgICAgICBsZXQgajsKCiAgICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgICAgICBpZiAoYVtqXS5hYWJiLmxvd2VyQm91bmQueiA8PSB2LmFhYmIubG93ZXJCb3VuZC56KSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGFbaiArIDFdID0gYVtqXTsKICAgICAgICB9CgogICAgICAgIGFbaiArIDFdID0gdjsKICAgICAgfQoKICAgICAgcmV0dXJuIGE7CiAgICB9CgogICAgY29uc3RydWN0b3Iod29ybGQpIHsKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5heGlzTGlzdCA9IHZvaWQgMDsKICAgICAgdGhpcy53b3JsZCA9IHZvaWQgMDsKICAgICAgdGhpcy5heGlzSW5kZXggPSB2b2lkIDA7CiAgICAgIHRoaXMuX2FkZEJvZHlIYW5kbGVyID0gdm9pZCAwOwogICAgICB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlciA9IHZvaWQgMDsKICAgICAgdGhpcy5heGlzTGlzdCA9IFtdOwogICAgICB0aGlzLndvcmxkID0gbnVsbDsKICAgICAgdGhpcy5heGlzSW5kZXggPSAwOwogICAgICBjb25zdCBheGlzTGlzdCA9IHRoaXMuYXhpc0xpc3Q7CgogICAgICB0aGlzLl9hZGRCb2R5SGFuZGxlciA9IGV2ZW50ID0+IHsKICAgICAgICBheGlzTGlzdC5wdXNoKGV2ZW50LmJvZHkpOwogICAgICB9OwoKICAgICAgdGhpcy5fcmVtb3ZlQm9keUhhbmRsZXIgPSBldmVudCA9PiB7CiAgICAgICAgY29uc3QgaWR4ID0gYXhpc0xpc3QuaW5kZXhPZihldmVudC5ib2R5KTsKCiAgICAgICAgaWYgKGlkeCAhPT0gLTEpIHsKICAgICAgICAgIGF4aXNMaXN0LnNwbGljZShpZHgsIDEpOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGlmICh3b3JsZCkgewogICAgICAgIHRoaXMuc2V0V29ybGQod29ybGQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENoYW5nZSB0aGUgd29ybGQKICAgICAqLwoKCiAgICBzZXRXb3JsZCh3b3JsZCkgewogICAgICAvLyBDbGVhciB0aGUgb2xkIGF4aXMgYXJyYXkKICAgICAgdGhpcy5heGlzTGlzdC5sZW5ndGggPSAwOyAvLyBBZGQgYWxsIGJvZGllcyBmcm9tIHRoZSBuZXcgd29ybGQKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd29ybGQuYm9kaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5heGlzTGlzdC5wdXNoKHdvcmxkLmJvZGllc1tpXSk7CiAgICAgIH0gLy8gUmVtb3ZlIG9sZCBoYW5kbGVycywgaWYgYW55CgoKICAgICAgd29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWRkQm9keScsIHRoaXMuX2FkZEJvZHlIYW5kbGVyKTsKICAgICAgd29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVtb3ZlQm9keScsIHRoaXMuX3JlbW92ZUJvZHlIYW5kbGVyKTsgLy8gQWRkIGhhbmRsZXJzIHRvIHVwZGF0ZSB0aGUgbGlzdCBvZiBib2RpZXMuCgogICAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdhZGRCb2R5JywgdGhpcy5fYWRkQm9keUhhbmRsZXIpOwogICAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdyZW1vdmVCb2R5JywgdGhpcy5fcmVtb3ZlQm9keUhhbmRsZXIpOwogICAgICB0aGlzLndvcmxkID0gd29ybGQ7CiAgICAgIHRoaXMuZGlydHkgPSB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDb2xsZWN0IGFsbCBjb2xsaXNpb24gcGFpcnMKICAgICAqLwoKCiAgICBjb2xsaXNpb25QYWlycyh3b3JsZCwgcDEsIHAyKSB7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYXhpc0xpc3Q7CiAgICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoOwogICAgICBjb25zdCBheGlzSW5kZXggPSB0aGlzLmF4aXNJbmRleDsKICAgICAgbGV0IGk7CiAgICAgIGxldCBqOwoKICAgICAgaWYgKHRoaXMuZGlydHkpIHsKICAgICAgICB0aGlzLnNvcnRMaXN0KCk7CiAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlOwogICAgICB9IC8vIExvb2sgdGhyb3VnaCB0aGUgbGlzdAoKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldOwoKICAgICAgICBmb3IgKGogPSBpICsgMTsgaiA8IE47IGorKykgewogICAgICAgICAgY29uc3QgYmogPSBib2RpZXNbal07CgogICAgICAgICAgaWYgKCF0aGlzLm5lZWRCcm9hZHBoYXNlQ29sbGlzaW9uKGJpLCBiaikpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKCFTQVBCcm9hZHBoYXNlLmNoZWNrQm91bmRzKGJpLCBiaiwgYXhpc0luZGV4KSkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmludGVyc2VjdGlvblRlc3QoYmksIGJqLCBwMSwgcDIpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHNvcnRMaXN0KCkgewogICAgICBjb25zdCBheGlzTGlzdCA9IHRoaXMuYXhpc0xpc3Q7CiAgICAgIGNvbnN0IGF4aXNJbmRleCA9IHRoaXMuYXhpc0luZGV4OwogICAgICBjb25zdCBOID0gYXhpc0xpc3QubGVuZ3RoOyAvLyBVcGRhdGUgQUFCQnMKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGF4aXNMaXN0W2ldOwoKICAgICAgICBpZiAoYmkuYWFiYk5lZWRzVXBkYXRlKSB7CiAgICAgICAgICBiaS51cGRhdGVBQUJCKCk7CiAgICAgICAgfQogICAgICB9IC8vIFNvcnQgdGhlIGxpc3QKCgogICAgICBpZiAoYXhpc0luZGV4ID09PSAwKSB7CiAgICAgICAgU0FQQnJvYWRwaGFzZS5pbnNlcnRpb25Tb3J0WChheGlzTGlzdCk7CiAgICAgIH0gZWxzZSBpZiAoYXhpc0luZGV4ID09PSAxKSB7CiAgICAgICAgU0FQQnJvYWRwaGFzZS5pbnNlcnRpb25Tb3J0WShheGlzTGlzdCk7CiAgICAgIH0gZWxzZSBpZiAoYXhpc0luZGV4ID09PSAyKSB7CiAgICAgICAgU0FQQnJvYWRwaGFzZS5pbnNlcnRpb25Tb3J0WihheGlzTGlzdCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgdGhlIHZhcmlhbmNlIG9mIHRoZSBib2R5IHBvc2l0aW9ucyBhbmQgZXN0aW1hdGVzIHRoZSBiZXN0IGF4aXMgdG8gdXNlLgogICAgICogV2lsbCBhdXRvbWF0aWNhbGx5IHNldCBwcm9wZXJ0eSBgYXhpc0luZGV4YC4KICAgICAqLwoKCiAgICBhdXRvRGV0ZWN0QXhpcygpIHsKICAgICAgbGV0IHN1bVggPSAwOwogICAgICBsZXQgc3VtWDIgPSAwOwogICAgICBsZXQgc3VtWSA9IDA7CiAgICAgIGxldCBzdW1ZMiA9IDA7CiAgICAgIGxldCBzdW1aID0gMDsKICAgICAgbGV0IHN1bVoyID0gMDsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5heGlzTGlzdDsKICAgICAgY29uc3QgTiA9IGJvZGllcy5sZW5ndGg7CiAgICAgIGNvbnN0IGludk4gPSAxIC8gTjsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiID0gYm9kaWVzW2ldOwogICAgICAgIGNvbnN0IGNlbnRlclggPSBiLnBvc2l0aW9uLng7CiAgICAgICAgc3VtWCArPSBjZW50ZXJYOwogICAgICAgIHN1bVgyICs9IGNlbnRlclggKiBjZW50ZXJYOwogICAgICAgIGNvbnN0IGNlbnRlclkgPSBiLnBvc2l0aW9uLnk7CiAgICAgICAgc3VtWSArPSBjZW50ZXJZOwogICAgICAgIHN1bVkyICs9IGNlbnRlclkgKiBjZW50ZXJZOwogICAgICAgIGNvbnN0IGNlbnRlclogPSBiLnBvc2l0aW9uLno7CiAgICAgICAgc3VtWiArPSBjZW50ZXJaOwogICAgICAgIHN1bVoyICs9IGNlbnRlclogKiBjZW50ZXJaOwogICAgICB9CgogICAgICBjb25zdCB2YXJpYW5jZVggPSBzdW1YMiAtIHN1bVggKiBzdW1YICogaW52TjsKICAgICAgY29uc3QgdmFyaWFuY2VZID0gc3VtWTIgLSBzdW1ZICogc3VtWSAqIGludk47CiAgICAgIGNvbnN0IHZhcmlhbmNlWiA9IHN1bVoyIC0gc3VtWiAqIHN1bVogKiBpbnZOOwoKICAgICAgaWYgKHZhcmlhbmNlWCA+IHZhcmlhbmNlWSkgewogICAgICAgIGlmICh2YXJpYW5jZVggPiB2YXJpYW5jZVopIHsKICAgICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5heGlzSW5kZXggPSAyOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh2YXJpYW5jZVkgPiB2YXJpYW5jZVopIHsKICAgICAgICB0aGlzLmF4aXNJbmRleCA9IDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5heGlzSW5kZXggPSAyOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYWxsIHRoZSBib2RpZXMgd2l0aGluIGFuIEFBQkIuCiAgICAgKiBAcGFyYW0gcmVzdWx0IEFuIGFycmF5IHRvIHN0b3JlIHJlc3VsdGluZyBib2RpZXMgaW4uCiAgICAgKi8KCgogICAgYWFiYlF1ZXJ5KHdvcmxkLCBhYWJiLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gW107CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmRpcnR5KSB7CiAgICAgICAgdGhpcy5zb3J0TGlzdCgpOwogICAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTsKICAgICAgfQoKICAgICAgY29uc3QgYXhpc0luZGV4ID0gdGhpcy5heGlzSW5kZXg7CiAgICAgIGxldCBheGlzID0gJ3gnOwoKICAgICAgaWYgKGF4aXNJbmRleCA9PT0gMSkgewogICAgICAgIGF4aXMgPSAneSc7CiAgICAgIH0KCiAgICAgIGlmIChheGlzSW5kZXggPT09IDIpIHsKICAgICAgICBheGlzID0gJ3onOwogICAgICB9CgogICAgICBjb25zdCBheGlzTGlzdCA9IHRoaXMuYXhpc0xpc3Q7CiAgICAgIGFhYmIubG93ZXJCb3VuZFtheGlzXTsKICAgICAgYWFiYi51cHBlckJvdW5kW2F4aXNdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBheGlzTGlzdC5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGIgPSBheGlzTGlzdFtpXTsKCiAgICAgICAgaWYgKGIuYWFiYk5lZWRzVXBkYXRlKSB7CiAgICAgICAgICBiLnVwZGF0ZUFBQkIoKTsKICAgICAgICB9CgogICAgICAgIGlmIChiLmFhYmIub3ZlcmxhcHMoYWFiYikpIHsKICAgICAgICAgIHJlc3VsdC5wdXNoKGIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgfQoKICBjbGFzcyBVdGlscyB7CiAgICAvKioKICAgICAqIEV4dGVuZCBhbiBvcHRpb25zIG9iamVjdCB3aXRoIGRlZmF1bHQgdmFsdWVzLgogICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIG9wdGlvbnMgb2JqZWN0LiBNYXkgYmUgZmFsc3k6IGluIHRoaXMgY2FzZSwgYSBuZXcgb2JqZWN0IGlzIGNyZWF0ZWQgYW5kIHJldHVybmVkLgogICAgICogQHBhcmFtIGRlZmF1bHRzIEFuIG9iamVjdCBjb250YWluaW5nIGRlZmF1bHQgdmFsdWVzLgogICAgICogQHJldHVybiBUaGUgbW9kaWZpZWQgb3B0aW9ucyBvYmplY3QuCiAgICAgKi8KICAgIHN0YXRpYyBkZWZhdWx0cyhvcHRpb25zLCBkZWZhdWx0cykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBmb3IgKGxldCBrZXkgaW4gZGVmYXVsdHMpIHsKICAgICAgICBpZiAoIShrZXkgaW4gb3B0aW9ucykpIHsKICAgICAgICAgIG9wdGlvbnNba2V5XSA9IGRlZmF1bHRzW2tleV07CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gb3B0aW9uczsKICAgIH0KCiAgfQogIC8qKgogICAqIENvbnN0cmFpbnQgYmFzZSBjbGFzcwogICAqLwoKCiAgY2xhc3MgQ29uc3RyYWludCB7CiAgICAvKioKICAgICAqIEVxdWF0aW9ucyB0byBiZSBzb2x2ZWQgaW4gdGhpcyBjb25zdHJhaW50LgogICAgICovCgogICAgLyoqCiAgICAgKiBCb2R5IEEuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEJvZHkgQi4KICAgICAqLwoKICAgIC8qKgogICAgICogU2V0IHRvIGZhbHNlIGlmIHlvdSBkb24ndCB3YW50IHRoZSBib2RpZXMgdG8gY29sbGlkZSB3aGVuIHRoZXkgYXJlIGNvbm5lY3RlZC4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHRoaXMuZXF1YXRpb25zID0gdm9pZCAwOwogICAgICB0aGlzLmJvZHlBID0gdm9pZCAwOwogICAgICB0aGlzLmJvZHlCID0gdm9pZCAwOwogICAgICB0aGlzLmlkID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSB2b2lkIDA7CiAgICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7CiAgICAgICAgY29sbGlkZUNvbm5lY3RlZDogdHJ1ZSwKICAgICAgICB3YWtlVXBCb2RpZXM6IHRydWUKICAgICAgfSk7CiAgICAgIHRoaXMuZXF1YXRpb25zID0gW107CiAgICAgIHRoaXMuYm9keUEgPSBib2R5QTsKICAgICAgdGhpcy5ib2R5QiA9IGJvZHlCOwogICAgICB0aGlzLmlkID0gQ29uc3RyYWludC5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gb3B0aW9ucy5jb2xsaWRlQ29ubmVjdGVkOwoKICAgICAgaWYgKG9wdGlvbnMud2FrZVVwQm9kaWVzKSB7CiAgICAgICAgaWYgKGJvZHlBKSB7CiAgICAgICAgICBib2R5QS53YWtlVXAoKTsKICAgICAgICB9CgogICAgICAgIGlmIChib2R5QikgewogICAgICAgICAgYm9keUIud2FrZVVwKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSBhbGwgdGhlIGVxdWF0aW9ucyB3aXRoIGRhdGEuCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IoJ21ldGhvZCB1cGRhdGUoKSBub3QgaW1wbG1lbWVudGVkIGluIHRoaXMgQ29uc3RyYWludCBzdWJjbGFzcyEnKTsKICAgIH0KICAgIC8qKgogICAgICogRW5hYmxlcyBhbGwgZXF1YXRpb25zIGluIHRoZSBjb25zdHJhaW50LgogICAgICovCgoKICAgIGVuYWJsZSgpIHsKICAgICAgY29uc3QgZXFzID0gdGhpcy5lcXVhdGlvbnM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVxcy5sZW5ndGg7IGkrKykgewogICAgICAgIGVxc1tpXS5lbmFibGVkID0gdHJ1ZTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBEaXNhYmxlcyBhbGwgZXF1YXRpb25zIGluIHRoZSBjb25zdHJhaW50LgogICAgICovCgoKICAgIGRpc2FibGUoKSB7CiAgICAgIGNvbnN0IGVxcyA9IHRoaXMuZXF1YXRpb25zOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBlcXNbaV0uZW5hYmxlZCA9IGZhbHNlOwogICAgICB9CiAgICB9CgogIH0KCiAgQ29uc3RyYWludC5pZENvdW50ZXIgPSAwOwogIC8qKgogICAqIEFuIGVsZW1lbnQgY29udGFpbmluZyA2IGVudHJpZXMsIDMgc3BhdGlhbCBhbmQgMyByb3RhdGlvbmFsIGRlZ3JlZXMgb2YgZnJlZWRvbS4KICAgKi8KCiAgY2xhc3MgSmFjb2JpYW5FbGVtZW50IHsKICAgIC8qKgogICAgICogc3BhdGlhbAogICAgICovCgogICAgLyoqCiAgICAgKiByb3RhdGlvbmFsCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLnNwYXRpYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMucm90YXRpb25hbCA9IHZvaWQgMDsKICAgICAgdGhpcy5zcGF0aWFsID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5yb3RhdGlvbmFsID0gbmV3IFZlYzMoKTsKICAgIH0KICAgIC8qKgogICAgICogTXVsdGlwbHkgd2l0aCBvdGhlciBKYWNvYmlhbkVsZW1lbnQKICAgICAqLwoKCiAgICBtdWx0aXBseUVsZW1lbnQoZWxlbWVudCkgewogICAgICByZXR1cm4gZWxlbWVudC5zcGF0aWFsLmRvdCh0aGlzLnNwYXRpYWwpICsgZWxlbWVudC5yb3RhdGlvbmFsLmRvdCh0aGlzLnJvdGF0aW9uYWwpOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB3aXRoIHR3byB2ZWN0b3JzCiAgICAgKi8KCgogICAgbXVsdGlwbHlWZWN0b3JzKHNwYXRpYWwsIHJvdGF0aW9uYWwpIHsKICAgICAgcmV0dXJuIHNwYXRpYWwuZG90KHRoaXMuc3BhdGlhbCkgKyByb3RhdGlvbmFsLmRvdCh0aGlzLnJvdGF0aW9uYWwpOwogICAgfQoKICB9CiAgLyoqCiAgICogRXF1YXRpb24gYmFzZSBjbGFzcy4KICAgKgogICAqIGBhYCwgYGJgIGFuZCBgZXBzYCBhcmUge0BsaW5rIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyLzVEVjA1OC9WVDE1L2xlY3R1cmVzL1NQT09LbGFibm90ZXMucGRmIFNQT09LfSBwYXJhbWV0ZXJzIHRoYXQgZGVmYXVsdCB0byBgMC4wYC4gU2VlIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vc2NodGVwcGUvY2Fubm9uLmpzL2lzc3Vlcy8yMzgjaXNzdWVjb21tZW50LTE0NzE3MjMyNyB0aGlzIGV4Y2hhbmdlfSBmb3IgbW9yZSBkZXRhaWxzIG9uIENhbm5vbidzIHBoeXNpY3MgaW1wbGVtZW50YXRpb24uCiAgICovCgoKICBjbGFzcyBFcXVhdGlvbiB7CiAgICAvKioKICAgICAqIE1pbmltdW0gKHJlYWQ6IG5lZ2F0aXZlIG1heCkgZm9yY2UgdG8gYmUgYXBwbGllZCBieSB0aGUgY29uc3RyYWludC4KICAgICAqLwoKICAgIC8qKgogICAgICogTWF4aW11bSAocmVhZDogcG9zaXRpdmUgbWF4KSBmb3JjZSB0byBiZSBhcHBsaWVkIGJ5IHRoZSBjb25zdHJhaW50LgogICAgICovCgogICAgLyoqCiAgICAgKiBTUE9PSyBwYXJhbWV0ZXIKICAgICAqLwoKICAgIC8qKgogICAgICogU1BPT0sgcGFyYW1ldGVyCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNQT09LIHBhcmFtZXRlcgogICAgICovCgogICAgLyoqCiAgICAgKiBBIG51bWJlciwgcHJvcG9ydGlvbmFsIHRvIHRoZSBmb3JjZSBhZGRlZCB0byB0aGUgYm9kaWVzLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihiaSwgYmosIG1pbkZvcmNlLCBtYXhGb3JjZSkgewogICAgICBpZiAobWluRm9yY2UgPT09IHZvaWQgMCkgewogICAgICAgIG1pbkZvcmNlID0gLTFlNjsKICAgICAgfQoKICAgICAgaWYgKG1heEZvcmNlID09PSB2b2lkIDApIHsKICAgICAgICBtYXhGb3JjZSA9IDFlNjsKICAgICAgfQoKICAgICAgdGhpcy5pZCA9IHZvaWQgMDsKICAgICAgdGhpcy5taW5Gb3JjZSA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXhGb3JjZSA9IHZvaWQgMDsKICAgICAgdGhpcy5iaSA9IHZvaWQgMDsKICAgICAgdGhpcy5iaiA9IHZvaWQgMDsKICAgICAgdGhpcy5zaSA9IHZvaWQgMDsKICAgICAgdGhpcy5zaiA9IHZvaWQgMDsKICAgICAgdGhpcy5hID0gdm9pZCAwOwogICAgICB0aGlzLmIgPSB2b2lkIDA7CiAgICAgIHRoaXMuZXBzID0gdm9pZCAwOwogICAgICB0aGlzLmphY29iaWFuRWxlbWVudEEgPSB2b2lkIDA7CiAgICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QiA9IHZvaWQgMDsKICAgICAgdGhpcy5lbmFibGVkID0gdm9pZCAwOwogICAgICB0aGlzLm11bHRpcGxpZXIgPSB2b2lkIDA7CiAgICAgIHRoaXMuaWQgPSBFcXVhdGlvbi5pZENvdW50ZXIrKzsKICAgICAgdGhpcy5taW5Gb3JjZSA9IG1pbkZvcmNlOwogICAgICB0aGlzLm1heEZvcmNlID0gbWF4Rm9yY2U7CiAgICAgIHRoaXMuYmkgPSBiaTsKICAgICAgdGhpcy5iaiA9IGJqOwogICAgICB0aGlzLmEgPSAwLjA7IC8vIFNQT09LIHBhcmFtZXRlcgoKICAgICAgdGhpcy5iID0gMC4wOyAvLyBTUE9PSyBwYXJhbWV0ZXIKCiAgICAgIHRoaXMuZXBzID0gMC4wOyAvLyBTUE9PSyBwYXJhbWV0ZXIKCiAgICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QSA9IG5ldyBKYWNvYmlhbkVsZW1lbnQoKTsKICAgICAgdGhpcy5qYWNvYmlhbkVsZW1lbnRCID0gbmV3IEphY29iaWFuRWxlbWVudCgpOwogICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlOwogICAgICB0aGlzLm11bHRpcGxpZXIgPSAwOwogICAgICB0aGlzLnNldFNwb29rUGFyYW1zKDFlNywgNCwgMSAvIDYwKTsgLy8gU2V0IHR5cGljYWwgc3Bvb2sgcGFyYW1zCiAgICB9CiAgICAvKioKICAgICAqIFJlY2FsY3VsYXRlcyBhLCBiLCBhbmQgZXBzLgogICAgICoKICAgICAqIFRoZSBFcXVhdGlvbiBjb25zdHJ1Y3RvciBzZXRzIHR5cGljYWwgU1BPT0sgcGFyYW1ldGVycyBhcyBzdWNoOgogICAgICogKiBgc3RpZmZuZXNzYCA9IDFlNwogICAgICogKiBgcmVsYXhhdGlvbmAgPSA0CiAgICAgKiAqIGB0aW1lU3RlcGA9IDEgLyA2MCwgX25vdGUgdGhlIGhhcmRjb2RlZCByZWZyZXNoIHJhdGUuXwogICAgICovCgoKICAgIHNldFNwb29rUGFyYW1zKHN0aWZmbmVzcywgcmVsYXhhdGlvbiwgdGltZVN0ZXApIHsKICAgICAgY29uc3QgZCA9IHJlbGF4YXRpb247CiAgICAgIGNvbnN0IGsgPSBzdGlmZm5lc3M7CiAgICAgIGNvbnN0IGggPSB0aW1lU3RlcDsKICAgICAgdGhpcy5hID0gNC4wIC8gKGggKiAoMSArIDQgKiBkKSk7CiAgICAgIHRoaXMuYiA9IDQuMCAqIGQgLyAoMSArIDQgKiBkKTsKICAgICAgdGhpcy5lcHMgPSA0LjAgLyAoaCAqIGggKiBrICogKDEgKyA0ICogZCkpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB0aGUgcmlnaHQgaGFuZCBzaWRlIG9mIHRoZSBTUE9PSyBlcXVhdGlvbgogICAgICovCgoKICAgIGNvbXB1dGVCKGEsIGIsIGgpIHsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpOwogICAgICBjb25zdCBHcSA9IHRoaXMuY29tcHV0ZUdxKCk7CiAgICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7CiAgICAgIHJldHVybiAtR3EgKiBhIC0gR1cgKiBiIC0gR2lNZiAqIGg7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIEcqcSwgd2hlcmUgcSBhcmUgdGhlIGdlbmVyYWxpemVkIGJvZHkgY29vcmRpbmF0ZXMKICAgICAqLwoKCiAgICBjb21wdXRlR3EoKSB7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHhpID0gYmkucG9zaXRpb247CiAgICAgIGNvbnN0IHhqID0gYmoucG9zaXRpb247CiAgICAgIHJldHVybiBHQS5zcGF0aWFsLmRvdCh4aSkgKyBHQi5zcGF0aWFsLmRvdCh4aik7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIEcqVywgd2hlcmUgVyBhcmUgdGhlIGJvZHkgdmVsb2NpdGllcwogICAgICovCgoKICAgIGNvbXB1dGVHVygpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgdmkgPSBiaS52ZWxvY2l0eTsKICAgICAgY29uc3QgdmogPSBiai52ZWxvY2l0eTsKICAgICAgY29uc3Qgd2kgPSBiaS5hbmd1bGFyVmVsb2NpdHk7CiAgICAgIGNvbnN0IHdqID0gYmouYW5ndWxhclZlbG9jaXR5OwogICAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKHZpLCB3aSkgKyBHQi5tdWx0aXBseVZlY3RvcnModmosIHdqKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgRypXbGFtYmRhLCB3aGVyZSBXIGFyZSB0aGUgYm9keSB2ZWxvY2l0aWVzCiAgICAgKi8KCgogICAgY29tcHV0ZUdXbGFtYmRhKCkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCB2aSA9IGJpLnZsYW1iZGE7CiAgICAgIGNvbnN0IHZqID0gYmoudmxhbWJkYTsKICAgICAgY29uc3Qgd2kgPSBiaS53bGFtYmRhOwogICAgICBjb25zdCB3aiA9IGJqLndsYW1iZGE7CiAgICAgIHJldHVybiBHQS5tdWx0aXBseVZlY3RvcnModmksIHdpKSArIEdCLm11bHRpcGx5VmVjdG9ycyh2aiwgd2opOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKmludihNKSpmLCB3aGVyZSBNIGlzIHRoZSBtYXNzIG1hdHJpeCB3aXRoIGRpYWdvbmFsIGJsb2NrcyBmb3IgZWFjaCBib2R5LCBhbmQgZiBhcmUgdGhlIGZvcmNlcyBvbiB0aGUgYm9kaWVzLgogICAgICovCgoKICAgIGNvbXB1dGVHaU1mKCkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCBmaSA9IGJpLmZvcmNlOwogICAgICBjb25zdCB0aSA9IGJpLnRvcnF1ZTsKICAgICAgY29uc3QgZmogPSBiai5mb3JjZTsKICAgICAgY29uc3QgdGogPSBiai50b3JxdWU7CiAgICAgIGNvbnN0IGludk1hc3NpID0gYmkuaW52TWFzc1NvbHZlOwogICAgICBjb25zdCBpbnZNYXNzaiA9IGJqLmludk1hc3NTb2x2ZTsKICAgICAgZmkuc2NhbGUoaW52TWFzc2ksIGlNZmkpOwogICAgICBmai5zY2FsZShpbnZNYXNzaiwgaU1maik7CiAgICAgIGJpLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KHRpLCBpbnZJaV92bXVsdF90YXVpKTsKICAgICAgYmouaW52SW5lcnRpYVdvcmxkU29sdmUudm11bHQodGosIGludklqX3ZtdWx0X3RhdWopOwogICAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKGlNZmksIGludklpX3ZtdWx0X3RhdWkpICsgR0IubXVsdGlwbHlWZWN0b3JzKGlNZmosIGludklqX3ZtdWx0X3RhdWopOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKmludihNKSpHJwogICAgICovCgoKICAgIGNvbXB1dGVHaU1HdCgpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgaW52TWFzc2kgPSBiaS5pbnZNYXNzU29sdmU7CiAgICAgIGNvbnN0IGludk1hc3NqID0gYmouaW52TWFzc1NvbHZlOwogICAgICBjb25zdCBpbnZJaSA9IGJpLmludkluZXJ0aWFXb3JsZFNvbHZlOwogICAgICBjb25zdCBpbnZJaiA9IGJqLmludkluZXJ0aWFXb3JsZFNvbHZlOwogICAgICBsZXQgcmVzdWx0ID0gaW52TWFzc2kgKyBpbnZNYXNzajsKICAgICAgaW52SWkudm11bHQoR0Eucm90YXRpb25hbCwgdG1wKTsKICAgICAgcmVzdWx0ICs9IHRtcC5kb3QoR0Eucm90YXRpb25hbCk7CiAgICAgIGludklqLnZtdWx0KEdCLnJvdGF0aW9uYWwsIHRtcCk7CiAgICAgIHJlc3VsdCArPSB0bXAuZG90KEdCLnJvdGF0aW9uYWwpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgY29uc3RyYWludCB2ZWxvY2l0eSB0byB0aGUgYm9kaWVzLgogICAgICovCgoKICAgIGFkZFRvV2xhbWJkYShkZWx0YWxhbWJkYSkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCB0ZW1wID0gYWRkVG9XbGFtYmRhX3RlbXA7IC8vIEFkZCB0byBsaW5lYXIgdmVsb2NpdHkKICAgICAgLy8gdl9sYW1iZGEgKz0gaW52KE0pICogZGVsdGFfbGFtYmEgKiBHCgogICAgICBiaS52bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihiaS5pbnZNYXNzU29sdmUgKiBkZWx0YWxhbWJkYSwgR0Euc3BhdGlhbCwgYmkudmxhbWJkYSk7CiAgICAgIGJqLnZsYW1iZGEuYWRkU2NhbGVkVmVjdG9yKGJqLmludk1hc3NTb2x2ZSAqIGRlbHRhbGFtYmRhLCBHQi5zcGF0aWFsLCBiai52bGFtYmRhKTsgLy8gQWRkIHRvIGFuZ3VsYXIgdmVsb2NpdHkKCiAgICAgIGJpLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KEdBLnJvdGF0aW9uYWwsIHRlbXApOwogICAgICBiaS53bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihkZWx0YWxhbWJkYSwgdGVtcCwgYmkud2xhbWJkYSk7CiAgICAgIGJqLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KEdCLnJvdGF0aW9uYWwsIHRlbXApOwogICAgICBiai53bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihkZWx0YWxhbWJkYSwgdGVtcCwgYmoud2xhbWJkYSk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIGRlbm9taW5hdG9yIHBhcnQgb2YgdGhlIFNQT09LIGVxdWF0aW9uOiBDID0gRyppbnYoTSkqRycgKyBlcHMKICAgICAqLwoKCiAgICBjb21wdXRlQygpIHsKICAgICAgcmV0dXJuIHRoaXMuY29tcHV0ZUdpTUd0KCkgKyB0aGlzLmVwczsKICAgIH0KCiAgfQoKICBFcXVhdGlvbi5pZENvdW50ZXIgPSAwOwogIGNvbnN0IGlNZmkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGlNZmogPSBuZXcgVmVjMygpOwogIGNvbnN0IGludklpX3ZtdWx0X3RhdWkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludklqX3ZtdWx0X3RhdWogPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYWRkVG9XbGFtYmRhX3RlbXAgPSBuZXcgVmVjMygpOwogIC8qKgogICAqIENvbnRhY3Qvbm9uLXBlbmV0cmF0aW9uIGNvbnN0cmFpbnQgZXF1YXRpb24KICAgKi8KCiAgY2xhc3MgQ29udGFjdEVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiAiYm91bmNpbmVzcyI6IHUxID0gLWUqdTAKICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQtb3JpZW50ZWQgdmVjdG9yIHRoYXQgZ29lcyBmcm9tIHRoZSBjZW50ZXIgb2YgYmkgdG8gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdvcmxkLW9yaWVudGVkIHZlY3RvciB0aGF0IHN0YXJ0cyBpbiBib2R5IGogcG9zaXRpb24gYW5kIGdvZXMgdG8gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIENvbnRhY3Qgbm9ybWFsLCBwb2ludGluZyBvdXQgb2YgYm9keSBpLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgMCwgbWF4Rm9yY2UpOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLnJpID0gdm9pZCAwOwogICAgICB0aGlzLnJqID0gdm9pZCAwOwogICAgICB0aGlzLm5pID0gdm9pZCAwOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gMC4wOwogICAgICB0aGlzLnJpID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5yaiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMubmkgPSBuZXcgVmVjMygpOwogICAgfQoKICAgIGNvbXB1dGVCKGgpIHsKICAgICAgY29uc3QgYSA9IHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHJpID0gdGhpcy5yaTsKICAgICAgY29uc3QgcmogPSB0aGlzLnJqOwogICAgICBjb25zdCByaXhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxOwogICAgICBjb25zdCByanhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyOwogICAgICBjb25zdCB2aSA9IGJpLnZlbG9jaXR5OwogICAgICBjb25zdCB3aSA9IGJpLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgYmkuZm9yY2U7CiAgICAgIGJpLnRvcnF1ZTsKICAgICAgY29uc3QgdmogPSBiai52ZWxvY2l0eTsKICAgICAgY29uc3Qgd2ogPSBiai5hbmd1bGFyVmVsb2NpdHk7CiAgICAgIGJqLmZvcmNlOwogICAgICBiai50b3JxdWU7CiAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IG4gPSB0aGlzLm5pOyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHMKCiAgICAgIHJpLmNyb3NzKG4sIHJpeG4pOwogICAgICByai5jcm9zcyhuLCByanhuKTsgLy8gZyA9IHhqK3JqIC0oeGkrcmkpCiAgICAgIC8vIEcgPSBbIC1uaSAgLXJpeG4gIG5pICByanhuIF0KCiAgICAgIG4ubmVnYXRlKEdBLnNwYXRpYWwpOwogICAgICByaXhuLm5lZ2F0ZShHQS5yb3RhdGlvbmFsKTsKICAgICAgR0Iuc3BhdGlhbC5jb3B5KG4pOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkocmp4bik7IC8vIENhbGN1bGF0ZSB0aGUgcGVuZXRyYXRpb24gdmVjdG9yCgogICAgICBwZW5ldHJhdGlvblZlYy5jb3B5KGJqLnBvc2l0aW9uKTsKICAgICAgcGVuZXRyYXRpb25WZWMudmFkZChyaiwgcGVuZXRyYXRpb25WZWMpOwogICAgICBwZW5ldHJhdGlvblZlYy52c3ViKGJpLnBvc2l0aW9uLCBwZW5ldHJhdGlvblZlYyk7CiAgICAgIHBlbmV0cmF0aW9uVmVjLnZzdWIocmksIHBlbmV0cmF0aW9uVmVjKTsKICAgICAgY29uc3QgZyA9IG4uZG90KHBlbmV0cmF0aW9uVmVjKTsgLy8gQ29tcHV0ZSBpdGVyYXRpb24KCiAgICAgIGNvbnN0IGVQbHVzT25lID0gdGhpcy5yZXN0aXR1dGlvbiArIDE7CiAgICAgIGNvbnN0IEdXID0gZVBsdXNPbmUgKiB2ai5kb3QobikgLSBlUGx1c09uZSAqIHZpLmRvdChuKSArIHdqLmRvdChyanhuKSAtIHdpLmRvdChyaXhuKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBjdXJyZW50IHJlbGF0aXZlIHZlbG9jaXR5IGluIHRoZSBjb250YWN0IHBvaW50LgogICAgICovCgoKICAgIGdldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWwoKSB7CiAgICAgIGNvbnN0IHZpID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmk7CiAgICAgIGNvbnN0IHZqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmo7CiAgICAgIGNvbnN0IHhpID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGk7CiAgICAgIGNvbnN0IHhqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGo7CiAgICAgIGNvbnN0IHJlbFZlbCA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbDsKICAgICAgdGhpcy5iaS5wb3NpdGlvbi52YWRkKHRoaXMucmksIHhpKTsKICAgICAgdGhpcy5iai5wb3NpdGlvbi52YWRkKHRoaXMucmosIHhqKTsKICAgICAgdGhpcy5iaS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludCh4aSwgdmkpOwogICAgICB0aGlzLmJqLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHhqLCB2aik7CiAgICAgIHZpLnZzdWIodmosIHJlbFZlbCk7CiAgICAgIHJldHVybiB0aGlzLm5pLmRvdChyZWxWZWwpOwogICAgfQoKICB9CgogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMSA9IG5ldyBWZWMzKCk7IC8vIFRlbXAgdmVjdG9ycwoKICBjb25zdCBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDIgPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmkgPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZqID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94aSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGogPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbCA9IG5ldyBWZWMzKCk7CiAgLyoqCiAgICogQ29ubmVjdHMgdHdvIGJvZGllcyBhdCBnaXZlbiBvZmZzZXQgcG9pbnRzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGJvZHlBID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pCiAgICogICAgIGNvbnN0IGJvZHlCID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pCiAgICogICAgIGJvZHlBLnBvc2l0aW9uLnNldCgtMSwgMCwgMCkKICAgKiAgICAgYm9keUIucG9zaXRpb24uc2V0KDEsIDAsIDApCiAgICogICAgIGJvZHlBLmFkZFNoYXBlKHNoYXBlQSkKICAgKiAgICAgYm9keUIuYWRkU2hhcGUoc2hhcGVCKQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlBKQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlCKQogICAqICAgICBjb25zdCBsb2NhbFBpdm90QSA9IG5ldyBWZWMzKDEsIDAsIDApCiAgICogICAgIGNvbnN0IGxvY2FsUGl2b3RCID0gbmV3IFZlYzMoLTEsIDAsIDApCiAgICogICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBuZXcgUG9pbnRUb1BvaW50Q29uc3RyYWludChib2R5QSwgbG9jYWxQaXZvdEEsIGJvZHlCLCBsb2NhbFBpdm90QikKICAgKiAgICAgd29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50KQogICAqLwoKICBjbGFzcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IGV4dGVuZHMgQ29uc3RyYWludCB7CiAgICAvKioKICAgICAqIFBpdm90LCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUEuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFBpdm90LCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUIuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBwaXZvdEEgVGhlIHBvaW50IHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgbWFzcyBvZiBib2R5QSB3aGljaCBib2R5QSBpcyBjb25zdHJhaW5lZCB0by4KICAgICAqIEBwYXJhbSBib2R5QiBCb2R5IHRoYXQgd2lsbCBiZSBjb25zdHJhaW5lZCBpbiBhIHNpbWlsYXIgd2F5IHRvIHRoZSBzYW1lIHBvaW50IGFzIGJvZHlBLiBXZSB3aWxsIHRoZXJlZm9yZSBnZXQgYSBsaW5rIGJldHdlZW4gYm9keUEgYW5kIGJvZHlCLiBJZiBub3Qgc3BlY2lmaWVkLCBib2R5QSB3aWxsIGJlIGNvbnN0cmFpbmVkIHRvIGEgc3RhdGljIHBvaW50LgogICAgICogQHBhcmFtIHBpdm90QiBUaGUgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIG9mIGJvZHlCIHdoaWNoIGJvZHlCIGlzIGNvbnN0cmFpbmVkIHRvLgogICAgICogQHBhcmFtIG1heEZvcmNlIFRoZSBtYXhpbXVtIGZvcmNlIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgdG8gY29uc3RyYWluIHRoZSBib2RpZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKSB7CiAgICAgIGlmIChwaXZvdEEgPT09IHZvaWQgMCkgewogICAgICAgIHBpdm90QSA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGlmIChwaXZvdEIgPT09IHZvaWQgMCkgewogICAgICAgIHBpdm90QiA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHN1cGVyKGJvZHlBLCBib2R5Qik7CiAgICAgIHRoaXMucGl2b3RBID0gdm9pZCAwOwogICAgICB0aGlzLnBpdm90QiA9IHZvaWQgMDsKICAgICAgdGhpcy5lcXVhdGlvblggPSB2b2lkIDA7CiAgICAgIHRoaXMuZXF1YXRpb25ZID0gdm9pZCAwOwogICAgICB0aGlzLmVxdWF0aW9uWiA9IHZvaWQgMDsKICAgICAgdGhpcy5waXZvdEEgPSBwaXZvdEEuY2xvbmUoKTsKICAgICAgdGhpcy5waXZvdEIgPSBwaXZvdEIuY2xvbmUoKTsKICAgICAgY29uc3QgeCA9IHRoaXMuZXF1YXRpb25YID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpOwogICAgICBjb25zdCB5ID0gdGhpcy5lcXVhdGlvblkgPSBuZXcgQ29udGFjdEVxdWF0aW9uKGJvZHlBLCBib2R5Qik7CiAgICAgIGNvbnN0IHogPSB0aGlzLmVxdWF0aW9uWiA9IG5ldyBDb250YWN0RXF1YXRpb24oYm9keUEsIGJvZHlCKTsgLy8gRXF1YXRpb25zIHRvIGJlIGZlZCB0byB0aGUgc29sdmVyCgogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKHgsIHksIHopOyAvLyBNYWtlIHRoZSBlcXVhdGlvbnMgYmlkaXJlY3Rpb25hbAoKICAgICAgeC5taW5Gb3JjZSA9IHkubWluRm9yY2UgPSB6Lm1pbkZvcmNlID0gLW1heEZvcmNlOwogICAgICB4Lm1heEZvcmNlID0geS5tYXhGb3JjZSA9IHoubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgICAgeC5uaS5zZXQoMSwgMCwgMCk7CiAgICAgIHkubmkuc2V0KDAsIDEsIDApOwogICAgICB6Lm5pLnNldCgwLCAwLCAxKTsKICAgIH0KCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCB4ID0gdGhpcy5lcXVhdGlvblg7CiAgICAgIGNvbnN0IHkgPSB0aGlzLmVxdWF0aW9uWTsKICAgICAgY29uc3QgeiA9IHRoaXMuZXF1YXRpb25aOyAvLyBSb3RhdGUgdGhlIHBpdm90cyB0byB3b3JsZCBzcGFjZQoKICAgICAgYm9keUEucXVhdGVybmlvbi52bXVsdCh0aGlzLnBpdm90QSwgeC5yaSk7CiAgICAgIGJvZHlCLnF1YXRlcm5pb24udm11bHQodGhpcy5waXZvdEIsIHgucmopOwogICAgICB5LnJpLmNvcHkoeC5yaSk7CiAgICAgIHkucmouY29weSh4LnJqKTsKICAgICAgei5yaS5jb3B5KHgucmkpOwogICAgICB6LnJqLmNvcHkoeC5yaik7CiAgICB9CgogIH0KICAvKioKICAgKiBDb25lIGVxdWF0aW9uLiBXb3JrcyB0byBrZWVwIHRoZSBnaXZlbiBib2R5IHdvcmxkIHZlY3RvcnMgYWxpZ25lZCwgb3IgdGlsdGVkIHdpdGhpbiBhIGdpdmVuIGFuZ2xlIGZyb20gZWFjaCBvdGhlci4KICAgKi8KCgogIGNsYXNzIENvbmVFcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8qKgogICAgICogTG9jYWwgYXhpcyBpbiBBCiAgICAgKi8KCiAgICAvKioKICAgICAqIExvY2FsIGF4aXMgaW4gQgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgImNvbmUgYW5nbGUiIHRvIGtlZXAKICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IG1heEZvcmNlID0gdHlwZW9mIG9wdGlvbnMubWF4Rm9yY2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhGb3JjZSA6IDFlNjsKICAgICAgc3VwZXIoYm9keUEsIGJvZHlCLCAtbWF4Rm9yY2UsIG1heEZvcmNlKTsKICAgICAgdGhpcy5heGlzQSA9IHZvaWQgMDsKICAgICAgdGhpcy5heGlzQiA9IHZvaWQgMDsKICAgICAgdGhpcy5hbmdsZSA9IHZvaWQgMDsKICAgICAgdGhpcy5heGlzQSA9IG9wdGlvbnMuYXhpc0EgPyBvcHRpb25zLmF4aXNBLmNsb25lKCkgOiBuZXcgVmVjMygxLCAwLCAwKTsKICAgICAgdGhpcy5heGlzQiA9IG9wdGlvbnMuYXhpc0IgPyBvcHRpb25zLmF4aXNCLmNsb25lKCkgOiBuZXcgVmVjMygwLCAxLCAwKTsKICAgICAgdGhpcy5hbmdsZSA9IHR5cGVvZiBvcHRpb25zLmFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYW5nbGUgOiAwOwogICAgfQoKICAgIGNvbXB1dGVCKGgpIHsKICAgICAgY29uc3QgYSA9IHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgY29uc3QgbmkgPSB0aGlzLmF4aXNBOwogICAgICBjb25zdCBuaiA9IHRoaXMuYXhpc0I7CiAgICAgIGNvbnN0IG5peG5qID0gdG1wVmVjMSQyOwogICAgICBjb25zdCBuanhuaSA9IHRtcFZlYzIkMjsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHMKCiAgICAgIG5pLmNyb3NzKG5qLCBuaXhuaik7CiAgICAgIG5qLmNyb3NzKG5pLCBuanhuaSk7IC8vIFRoZSBhbmdsZSBiZXR3ZWVuIHR3byB2ZWN0b3IgaXM6CiAgICAgIC8vIGNvcyh0aGV0YSkgPSBhICogYiAvIChsZW5ndGgoYSkgKiBsZW5ndGgoYikgPSB7IGxlbihhKSA9IGxlbihiKSA9IDEgfSA9IGEgKiBiCiAgICAgIC8vIGcgPSBhICogYgogICAgICAvLyBnZG90ID0gKGIgeCBhKSAqIHdpICsgKGEgeCBiKSAqIHdqCiAgICAgIC8vIEcgPSBbMCBieGEgMCBheGJdCiAgICAgIC8vIFcgPSBbdmkgd2kgdmogd2pdCgogICAgICBHQS5yb3RhdGlvbmFsLmNvcHkobmp4bmkpOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkobml4bmopOwogICAgICBjb25zdCBnID0gTWF0aC5jb3ModGhpcy5hbmdsZSkgLSBuaS5kb3QobmopOwogICAgICBjb25zdCBHVyA9IHRoaXMuY29tcHV0ZUdXKCk7CiAgICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7CiAgICAgIGNvbnN0IEIgPSAtZyAqIGEgLSBHVyAqIGIgLSBoICogR2lNZjsKICAgICAgcmV0dXJuIEI7CiAgICB9CgogIH0KCiAgY29uc3QgdG1wVmVjMSQyID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWMyJDIgPSBuZXcgVmVjMygpOwogIC8qKgogICAqIFJvdGF0aW9uYWwgY29uc3RyYWludC4gV29ya3MgdG8ga2VlcCB0aGUgbG9jYWwgdmVjdG9ycyBvcnRob2dvbmFsIHRvIGVhY2ggb3RoZXIgaW4gd29ybGQgc3BhY2UuCiAgICovCgogIGNsYXNzIFJvdGF0aW9uYWxFcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8qKgogICAgICogV29ybGQgb3JpZW50ZWQgcm90YXRpb25hbCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBvcmllbnRlZCByb3RhdGlvbmFsIGF4aXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIG1heEFuZ2xlCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7CiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7CiAgICAgIHRoaXMuYXhpc0EgPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhpc0IgPSB2b2lkIDA7CiAgICAgIHRoaXMubWF4QW5nbGUgPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoMCwgMSwgMCk7CiAgICAgIHRoaXMubWF4QW5nbGUgPSBNYXRoLlBJIC8gMjsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIGNvbnN0IGEgPSB0aGlzLmE7CiAgICAgIGNvbnN0IGIgPSB0aGlzLmI7CiAgICAgIGNvbnN0IG5pID0gdGhpcy5heGlzQTsKICAgICAgY29uc3QgbmogPSB0aGlzLmF4aXNCOwogICAgICBjb25zdCBuaXhuaiA9IHRtcFZlYzEkMTsKICAgICAgY29uc3Qgbmp4bmkgPSB0bXBWZWMyJDE7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzCgogICAgICBuaS5jcm9zcyhuaiwgbml4bmopOwogICAgICBuai5jcm9zcyhuaSwgbmp4bmkpOyAvLyBnID0gbmkgKiBuagogICAgICAvLyBnZG90ID0gKG5qIHggbmkpICogd2kgKyAobmkgeCBuaikgKiB3agogICAgICAvLyBHID0gWzAgbmp4bmkgMCBuaXhual0KICAgICAgLy8gVyA9IFt2aSB3aSB2aiB3al0KCiAgICAgIEdBLnJvdGF0aW9uYWwuY29weShuanhuaSk7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShuaXhuaik7CiAgICAgIGNvbnN0IGcgPSBNYXRoLmNvcyh0aGlzLm1heEFuZ2xlKSAtIG5pLmRvdChuaik7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQoKICBjb25zdCB0bXBWZWMxJDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzIkMSA9IG5ldyBWZWMzKCk7CiAgLyoqCiAgICogQSBDb25lIFR3aXN0IGNvbnN0cmFpbnQsIHVzZWZ1bCBmb3IgcmFnZG9sbHMuCiAgICovCgogIGNsYXNzIENvbmVUd2lzdENvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogVGhlIGF4aXMgZGlyZWN0aW9uIGZvciB0aGUgY29uc3RyYWludCBvZiB0aGUgYm9keSBBLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYXhpcyBkaXJlY3Rpb24gZm9yIHRoZSBjb25zdHJhaW50IG9mIHRoZSBib2R5IEIuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBhcGVydHVyZSBhbmdsZSBvZiB0aGUgY29uZS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHR3aXN0IGFuZ2xlIG9mIHRoZSBqb2ludC4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IG1heEZvcmNlID0gdHlwZW9mIG9wdGlvbnMubWF4Rm9yY2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhGb3JjZSA6IDFlNjsgLy8gU2V0IHBpdm90IHBvaW50IGluIGJldHdlZW4KCiAgICAgIGNvbnN0IHBpdm90QSA9IG9wdGlvbnMucGl2b3RBID8gb3B0aW9ucy5waXZvdEEuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBpdm90QiA9IG9wdGlvbnMucGl2b3RCID8gb3B0aW9ucy5waXZvdEIuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsKICAgICAgdGhpcy5heGlzQSA9IHZvaWQgMDsKICAgICAgdGhpcy5heGlzQiA9IHZvaWQgMDsKICAgICAgdGhpcy5hbmdsZSA9IHZvaWQgMDsKICAgICAgdGhpcy50d2lzdEFuZ2xlID0gdm9pZCAwOwogICAgICB0aGlzLmNvbmVFcXVhdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy50d2lzdEVxdWF0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gISFvcHRpb25zLmNvbGxpZGVDb25uZWN0ZWQ7CiAgICAgIHRoaXMuYW5nbGUgPSB0eXBlb2Ygb3B0aW9ucy5hbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ2xlIDogMDsKICAgICAgY29uc3QgYyA9IHRoaXMuY29uZUVxdWF0aW9uID0gbmV3IENvbmVFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCB0ID0gdGhpcy50d2lzdEVxdWF0aW9uID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICB0aGlzLnR3aXN0QW5nbGUgPSB0eXBlb2Ygb3B0aW9ucy50d2lzdEFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMudHdpc3RBbmdsZSA6IDA7IC8vIE1ha2UgdGhlIGNvbmUgZXF1YXRpb24gcHVzaCB0aGUgYm9kaWVzIHRvd2FyZCB0aGUgY29uZSBheGlzLCBub3Qgb3V0d2FyZAoKICAgICAgYy5tYXhGb3JjZSA9IDA7CiAgICAgIGMubWluRm9yY2UgPSAtbWF4Rm9yY2U7IC8vIE1ha2UgdGhlIHR3aXN0IGVxdWF0aW9uIGFkZCB0b3JxdWUgdG93YXJkIHRoZSBpbml0aWFsIHBvc2l0aW9uCgogICAgICB0Lm1heEZvcmNlID0gMDsKICAgICAgdC5taW5Gb3JjZSA9IC1tYXhGb3JjZTsKICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChjLCB0KTsKICAgIH0KCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCBjb25lID0gdGhpcy5jb25lRXF1YXRpb247CiAgICAgIGNvbnN0IHR3aXN0ID0gdGhpcy50d2lzdEVxdWF0aW9uOwogICAgICBzdXBlci51cGRhdGUoKTsgLy8gVXBkYXRlIHRoZSBheGVzIHRvIHRoZSBjb25lIGNvbnN0cmFpbnQKCiAgICAgIGJvZHlBLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLmF4aXNBLCBjb25lLmF4aXNBKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuYXhpc0IsIGNvbmUuYXhpc0IpOyAvLyBVcGRhdGUgdGhlIHdvcmxkIGF4ZXMgaW4gdGhlIHR3aXN0IGNvbnN0cmFpbnQKCiAgICAgIHRoaXMuYXhpc0EudGFuZ2VudHModHdpc3QuYXhpc0EsIHR3aXN0LmF4aXNBKTsKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHR3aXN0LmF4aXNBLCB0d2lzdC5heGlzQSk7CiAgICAgIHRoaXMuYXhpc0IudGFuZ2VudHModHdpc3QuYXhpc0IsIHR3aXN0LmF4aXNCKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHR3aXN0LmF4aXNCLCB0d2lzdC5heGlzQik7CiAgICAgIGNvbmUuYW5nbGUgPSB0aGlzLmFuZ2xlOwogICAgICB0d2lzdC5tYXhBbmdsZSA9IHRoaXMudHdpc3RBbmdsZTsKICAgIH0KCiAgfQogIC8qKgogICAqIENvbnN0cmFpbnMgdHdvIGJvZGllcyB0byBiZSBhdCBhIGNvbnN0YW50IGRpc3RhbmNlIGZyb20gZWFjaCBvdGhlcnMgY2VudGVyIG9mIG1hc3MuCiAgICovCgoKICBjbGFzcyBEaXN0YW5jZUNvbnN0cmFpbnQgZXh0ZW5kcyBDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogVGhlIGRpc3RhbmNlIHRvIGtlZXAuIElmIHVuZGVmaW5lZCwgaXQgd2lsbCBiZSBzZXQgdG8gdGhlIGN1cnJlbnQgZGlzdGFuY2UgYmV0d2VlbiBib2R5QSBhbmQgYm9keUIKICAgICAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIGRpc3RhbmNlIFRoZSBkaXN0YW5jZSB0byBrZWVwLiBJZiB1bmRlZmluZWQsIGl0IHdpbGwgYmUgc2V0IHRvIHRoZSBjdXJyZW50IGRpc3RhbmNlIGJldHdlZW4gYm9keUEgYW5kIGJvZHlCLgogICAgICogQHBhcmFtIG1heEZvcmNlIFRoZSBtYXhpbXVtIGZvcmNlIHRoYXQgc2hvdWxkIGJlIGFwcGxpZWQgdG8gY29uc3RyYWluIHRoZSBib2RpZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5QiwgZGlzdGFuY2UsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHN1cGVyKGJvZHlBLCBib2R5Qik7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGlzdGFuY2VFcXVhdGlvbiA9IHZvaWQgMDsKCiAgICAgIGlmICh0eXBlb2YgZGlzdGFuY2UgPT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgZGlzdGFuY2UgPSBib2R5QS5wb3NpdGlvbi5kaXN0YW5jZVRvKGJvZHlCLnBvc2l0aW9uKTsKICAgICAgfQoKICAgICAgdGhpcy5kaXN0YW5jZSA9IGRpc3RhbmNlOwogICAgICBjb25zdCBlcSA9IHRoaXMuZGlzdGFuY2VFcXVhdGlvbiA9IG5ldyBDb250YWN0RXF1YXRpb24oYm9keUEsIGJvZHlCKTsKICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChlcSk7IC8vIE1ha2UgaXQgYmlkaXJlY3Rpb25hbAoKICAgICAgZXEubWluRm9yY2UgPSAtbWF4Rm9yY2U7CiAgICAgIGVxLm1heEZvcmNlID0gbWF4Rm9yY2U7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZQogICAgICovCgoKICAgIHVwZGF0ZSgpIHsKICAgICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBOwogICAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7CiAgICAgIGNvbnN0IGVxID0gdGhpcy5kaXN0YW5jZUVxdWF0aW9uOwogICAgICBjb25zdCBoYWxmRGlzdCA9IHRoaXMuZGlzdGFuY2UgKiAwLjU7CiAgICAgIGNvbnN0IG5vcm1hbCA9IGVxLm5pOwogICAgICBib2R5Qi5wb3NpdGlvbi52c3ViKGJvZHlBLnBvc2l0aW9uLCBub3JtYWwpOwogICAgICBub3JtYWwubm9ybWFsaXplKCk7CiAgICAgIG5vcm1hbC5zY2FsZShoYWxmRGlzdCwgZXEucmkpOwogICAgICBub3JtYWwuc2NhbGUoLWhhbGZEaXN0LCBlcS5yaik7CiAgICB9CgogIH0KICAvKioKICAgKiBMb2NrIGNvbnN0cmFpbnQuIFdpbGwgcmVtb3ZlIGFsbCBkZWdyZWVzIG9mIGZyZWVkb20gYmV0d2VlbiB0aGUgYm9kaWVzLgogICAqLwoKCiAgY2xhc3MgTG9ja0NvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7IC8vIFNldCBwaXZvdCBwb2ludCBpbiBiZXR3ZWVuCgogICAgICBjb25zdCBwaXZvdEEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBwaXZvdEIgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBoYWxmV2F5ID0gbmV3IFZlYzMoKTsKICAgICAgYm9keUEucG9zaXRpb24udmFkZChib2R5Qi5wb3NpdGlvbiwgaGFsZldheSk7CiAgICAgIGhhbGZXYXkuc2NhbGUoMC41LCBoYWxmV2F5KTsKICAgICAgYm9keUIucG9pbnRUb0xvY2FsRnJhbWUoaGFsZldheSwgcGl2b3RCKTsKICAgICAgYm9keUEucG9pbnRUb0xvY2FsRnJhbWUoaGFsZldheSwgcGl2b3RBKTsgLy8gVGhlIHBvaW50LXRvLXBvaW50IGNvbnN0cmFpbnQgd2lsbCBrZWVwIGEgcG9pbnQgc2hhcmVkIGJldHdlZW4gdGhlIGJvZGllcwoKICAgICAgc3VwZXIoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpOyAvLyBTdG9yZSBpbml0aWFsIHJvdGF0aW9uIG9mIHRoZSBib2RpZXMgYXMgdW5pdCB2ZWN0b3JzIGluIHRoZSBsb2NhbCBib2R5IHNwYWNlcwoKICAgICAgdGhpcy54QSA9IHZvaWQgMDsKICAgICAgdGhpcy54QiA9IHZvaWQgMDsKICAgICAgdGhpcy55QSA9IHZvaWQgMDsKICAgICAgdGhpcy55QiA9IHZvaWQgMDsKICAgICAgdGhpcy56QSA9IHZvaWQgMDsKICAgICAgdGhpcy56QiA9IHZvaWQgMDsKICAgICAgdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xID0gdm9pZCAwOwogICAgICB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjIgPSB2b2lkIDA7CiAgICAgIHRoaXMucm90YXRpb25hbEVxdWF0aW9uMyA9IHZvaWQgMDsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLnhBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9YKTsKICAgICAgdGhpcy54QiA9IGJvZHlCLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWCk7CiAgICAgIHRoaXMueUEgPSBib2R5QS52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1kpOwogICAgICB0aGlzLnlCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9ZKTsKICAgICAgdGhpcy56QSA9IGJvZHlBLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWik7CiAgICAgIHRoaXMuekIgPSBib2R5Qi52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1opOyAvLyAuLi5hbmQgdGhlIGZvbGxvd2luZyByb3RhdGlvbmFsIGVxdWF0aW9ucyB3aWxsIGtlZXAgYWxsIHJvdGF0aW9uYWwgRE9GJ3MgaW4gcGxhY2UKCiAgICAgIGNvbnN0IHIxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCByMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgY29uc3QgcjMgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjMgPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2gocjEsIHIyLCByMyk7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZQogICAgICovCgoKICAgIHVwZGF0ZSgpIHsKICAgICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBOwogICAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbjsKICAgICAgY29uc3QgcjEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjE7CiAgICAgIGNvbnN0IHIyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yOwogICAgICBjb25zdCByMyA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMzsKICAgICAgc3VwZXIudXBkYXRlKCk7IC8vIFRoZXNlIHZlY3RvciBwYWlycyBtdXN0IGJlIG9ydGhvZ29uYWwKCiAgICAgIGJvZHlBLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLnhBLCByMS5heGlzQSk7CiAgICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLnlCLCByMS5heGlzQik7CiAgICAgIGJvZHlBLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLnlBLCByMi5heGlzQSk7CiAgICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLnpCLCByMi5heGlzQik7CiAgICAgIGJvZHlBLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLnpBLCByMy5heGlzQSk7CiAgICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLnhCLCByMy5heGlzQik7CiAgICB9CgogIH0KICAvKioKICAgKiBSb3RhdGlvbmFsIG1vdG9yIGNvbnN0cmFpbnQuIFRyaWVzIHRvIGtlZXAgdGhlIHJlbGF0aXZlIGFuZ3VsYXIgdmVsb2NpdHkgb2YgdGhlIGJvZGllcyB0byBhIGdpdmVuIHZhbHVlLgogICAqLwoKCiAgY2xhc3MgUm90YXRpb25hbE1vdG9yRXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7CiAgICAvKioKICAgICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgb3JpZW50ZWQgcm90YXRpb25hbCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBNb3RvciB2ZWxvY2l0eS4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBtYXhGb3JjZSkgewogICAgICBpZiAobWF4Rm9yY2UgPT09IHZvaWQgMCkgewogICAgICAgIG1heEZvcmNlID0gMWU2OwogICAgICB9CgogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1tYXhGb3JjZSwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gdm9pZCAwOwogICAgICB0aGlzLmF4aXNCID0gdm9pZCAwOwogICAgICB0aGlzLnRhcmdldFZlbG9jaXR5ID0gdm9pZCAwOwogICAgICB0aGlzLmF4aXNBID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5heGlzQiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMudGFyZ2V0VmVsb2NpdHkgPSAwOwogICAgfQoKICAgIGNvbXB1dGVCKGgpIHsKICAgICAgdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICB0aGlzLmJpOwogICAgICB0aGlzLmJqOwogICAgICBjb25zdCBheGlzQSA9IHRoaXMuYXhpc0E7CiAgICAgIGNvbnN0IGF4aXNCID0gdGhpcy5heGlzQjsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOyAvLyBnID0gMAogICAgICAvLyBnZG90ID0gYXhpc0EgKiB3aSAtIGF4aXNCICogd2oKICAgICAgLy8gZ2RvdCA9IEcgKiBXID0gRyAqIFt2aSB3aSB2aiB3al0KICAgICAgLy8gPT4KICAgICAgLy8gRyA9IFswIGF4aXNBIDAgLWF4aXNCXQoKICAgICAgR0Eucm90YXRpb25hbC5jb3B5KGF4aXNBKTsKICAgICAgYXhpc0IubmVnYXRlKEdCLnJvdGF0aW9uYWwpOwogICAgICBjb25zdCBHVyA9IHRoaXMuY29tcHV0ZUdXKCkgLSB0aGlzLnRhcmdldFZlbG9jaXR5OwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICBjb25zdCBCID0gLUdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQogIC8qKgogICAqIEhpbmdlIGNvbnN0cmFpbnQuIFRoaW5rIG9mIGl0IGFzIGEgZG9vciBoaW5nZS4gSXQgdHJpZXMgdG8ga2VlcCB0aGUgZG9vciBpbiB0aGUgY29ycmVjdCBwbGFjZSBhbmQgd2l0aCB0aGUgY29ycmVjdCBvcmllbnRhdGlvbi4KICAgKi8KCgogIGNsYXNzIEhpbmdlQ29uc3RyYWludCBleHRlbmRzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQgewogICAgLyoqCiAgICAgKiBSb3RhdGlvbiBheGlzLCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUEuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFJvdGF0aW9uIGF4aXMsIGRlZmluZWQgbG9jYWxseSBpbiBib2R5Qi4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IG1heEZvcmNlID0gdHlwZW9mIG9wdGlvbnMubWF4Rm9yY2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhGb3JjZSA6IDFlNjsKICAgICAgY29uc3QgcGl2b3RBID0gb3B0aW9ucy5waXZvdEEgPyBvcHRpb25zLnBpdm90QS5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGl2b3RCID0gb3B0aW9ucy5waXZvdEIgPyBvcHRpb25zLnBpdm90Qi5jbG9uZSgpIDogbmV3IFZlYzMoKTsKICAgICAgc3VwZXIoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gdm9pZCAwOwogICAgICB0aGlzLmF4aXNCID0gdm9pZCAwOwogICAgICB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjEgPSB2b2lkIDA7CiAgICAgIHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IHZvaWQgMDsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uID0gdm9pZCAwOwogICAgICBjb25zdCBheGlzQSA9IHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIGF4aXNBLm5vcm1hbGl6ZSgpOwogICAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0IgPSBvcHRpb25zLmF4aXNCID8gb3B0aW9ucy5heGlzQi5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7CiAgICAgIGF4aXNCLm5vcm1hbGl6ZSgpOwogICAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSAhIW9wdGlvbnMuY29sbGlkZUNvbm5lY3RlZDsKICAgICAgY29uc3Qgcm90YXRpb25hbDEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjEgPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIGNvbnN0IHJvdGF0aW9uYWwyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCBtb3RvciA9IHRoaXMubW90b3JFcXVhdGlvbiA9IG5ldyBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbihib2R5QSwgYm9keUIsIG1heEZvcmNlKTsKICAgICAgbW90b3IuZW5hYmxlZCA9IGZhbHNlOyAvLyBOb3QgZW5hYmxlZCBieSBkZWZhdWx0CiAgICAgIC8vIEVxdWF0aW9ucyB0byBiZSBmZWQgdG8gdGhlIHNvbHZlcgoKICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChyb3RhdGlvbmFsMSwgcm90YXRpb25hbDIsIG1vdG9yKTsKICAgIH0KICAgIC8qKgogICAgICogZW5hYmxlTW90b3IKICAgICAqLwoKCiAgICBlbmFibGVNb3RvcigpIHsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uLmVuYWJsZWQgPSB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBkaXNhYmxlTW90b3IKICAgICAqLwoKCiAgICBkaXNhYmxlTW90b3IoKSB7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi5lbmFibGVkID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIHNldE1vdG9yU3BlZWQKICAgICAqLwoKCiAgICBzZXRNb3RvclNwZWVkKHNwZWVkKSB7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi50YXJnZXRWZWxvY2l0eSA9IHNwZWVkOwogICAgfQogICAgLyoqCiAgICAgKiBzZXRNb3Rvck1heEZvcmNlCiAgICAgKi8KCgogICAgc2V0TW90b3JNYXhGb3JjZShtYXhGb3JjZSkgewogICAgICB0aGlzLm1vdG9yRXF1YXRpb24ubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uLm1pbkZvcmNlID0gLW1heEZvcmNlOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGUKICAgICAqLwoKCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCBtb3RvciA9IHRoaXMubW90b3JFcXVhdGlvbjsKICAgICAgY29uc3QgcjEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjE7CiAgICAgIGNvbnN0IHIyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yOwogICAgICBjb25zdCB3b3JsZEF4aXNBID0gSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxOwogICAgICBjb25zdCB3b3JsZEF4aXNCID0gSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMyOwogICAgICBjb25zdCBheGlzQSA9IHRoaXMuYXhpc0E7CiAgICAgIGNvbnN0IGF4aXNCID0gdGhpcy5heGlzQjsKICAgICAgc3VwZXIudXBkYXRlKCk7IC8vIEdldCB3b3JsZCBheGVzCgogICAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KGF4aXNBLCB3b3JsZEF4aXNBKTsKICAgICAgYm9keUIucXVhdGVybmlvbi52bXVsdChheGlzQiwgd29ybGRBeGlzQik7CiAgICAgIHdvcmxkQXhpc0EudGFuZ2VudHMocjEuYXhpc0EsIHIyLmF4aXNBKTsKICAgICAgcjEuYXhpc0IuY29weSh3b3JsZEF4aXNCKTsKICAgICAgcjIuYXhpc0IuY29weSh3b3JsZEF4aXNCKTsKCiAgICAgIGlmICh0aGlzLm1vdG9yRXF1YXRpb24uZW5hYmxlZCkgewogICAgICAgIGJvZHlBLnF1YXRlcm5pb24udm11bHQodGhpcy5heGlzQSwgbW90b3IuYXhpc0EpOwogICAgICAgIGJvZHlCLnF1YXRlcm5pb24udm11bHQodGhpcy5heGlzQiwgbW90b3IuYXhpc0IpOwogICAgICB9CiAgICB9CgogIH0KCiAgY29uc3QgSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxID0gbmV3IFZlYzMoKTsKICBjb25zdCBIaW5nZUNvbnN0cmFpbnRfdXBkYXRlX3RtcFZlYzIgPSBuZXcgVmVjMygpOwogIC8qKgogICAqIENvbnN0cmFpbnMgdGhlIHNsaXBwaW5nIGluIGEgY29udGFjdCBhbG9uZyBhIHRhbmdlbnQKICAgKi8KCiAgY2xhc3MgRnJpY3Rpb25FcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8vIFRhbmdlbnQKCiAgICAvKioKICAgICAqIEBwYXJhbSBzbGlwRm9yY2Ugc2hvdWxkIGJlICstRl9mcmljdGlvbiA9ICstbXUgKiBGX25vcm1hbCA9ICstbXUgKiBtICogZwogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIHNsaXBGb3JjZSkgewogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1zbGlwRm9yY2UsIHNsaXBGb3JjZSk7CiAgICAgIHRoaXMucmkgPSB2b2lkIDA7CiAgICAgIHRoaXMucmogPSB2b2lkIDA7CiAgICAgIHRoaXMudCA9IHZvaWQgMDsKICAgICAgdGhpcy5yaSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucmogPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnQgPSBuZXcgVmVjMygpOwogICAgfQoKICAgIGNvbXB1dGVCKGgpIHsKICAgICAgdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICB0aGlzLmJpOwogICAgICB0aGlzLmJqOwogICAgICBjb25zdCByaSA9IHRoaXMucmk7CiAgICAgIGNvbnN0IHJqID0gdGhpcy5yajsKICAgICAgY29uc3Qgcml4dCA9IEZyaWN0aW9uRXF1YXRpb25fY29tcHV0ZUJfdGVtcDE7CiAgICAgIGNvbnN0IHJqeHQgPSBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyOwogICAgICBjb25zdCB0ID0gdGhpcy50OyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHMKCiAgICAgIHJpLmNyb3NzKHQsIHJpeHQpOwogICAgICByai5jcm9zcyh0LCByanh0KTsgLy8gRyA9IFstdCAtcml4dCB0IHJqeHRdCiAgICAgIC8vIEFuZCByZW1lbWJlciwgdGhpcyBpcyBhIHB1cmUgdmVsb2NpdHkgY29uc3RyYWludCwgZyBpcyBhbHdheXMgemVybyEKCiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgdC5uZWdhdGUoR0Euc3BhdGlhbCk7CiAgICAgIHJpeHQubmVnYXRlKEdBLnJvdGF0aW9uYWwpOwogICAgICBHQi5zcGF0aWFsLmNvcHkodCk7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShyanh0KTsKICAgICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpOwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICBjb25zdCBCID0gLUdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQoKICBjb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBEZWZpbmVzIHdoYXQgaGFwcGVucyB3aGVuIHR3byBtYXRlcmlhbHMgbWVldC4KICAgKiBAdG9kbyBSZWZhY3RvciBtYXRlcmlhbHMgdG8gbWF0ZXJpYWxBIGFuZCBtYXRlcmlhbEIKICAgKi8KCiAgY2xhc3MgQ29udGFjdE1hdGVyaWFsIHsKICAgIC8qKgogICAgICogSWRlbnRpZmllciBvZiB0aGlzIG1hdGVyaWFsLgogICAgICovCgogICAgLyoqCiAgICAgKiBQYXJ0aWNpcGF0aW5nIG1hdGVyaWFscy4KICAgICAqLwoKICAgIC8qKgogICAgICogRnJpY3Rpb24gY29lZmZpY2llbnQuCiAgICAgKiBAZGVmYXVsdCAwLjMKICAgICAqLwoKICAgIC8qKgogICAgICogUmVzdGl0dXRpb24gY29lZmZpY2llbnQuCiAgICAgKiBAZGVmYXVsdCAwLjMKICAgICAqLwoKICAgIC8qKgogICAgICogU3RpZmZuZXNzIG9mIHRoZSBwcm9kdWNlZCBjb250YWN0IGVxdWF0aW9ucy4KICAgICAqIEBkZWZhdWx0IDFlNwogICAgICovCgogICAgLyoqCiAgICAgKiBSZWxheGF0aW9uIHRpbWUgb2YgdGhlIHByb2R1Y2VkIGNvbnRhY3QgZXF1YXRpb25zLgogICAgICogQGRlZmF1bHQgMwogICAgICovCgogICAgLyoqCiAgICAgKiBTdGlmZm5lc3Mgb2YgdGhlIHByb2R1Y2VkIGZyaWN0aW9uIGVxdWF0aW9ucy4KICAgICAqIEBkZWZhdWx0IDFlNwogICAgICovCgogICAgLyoqCiAgICAgKiBSZWxheGF0aW9uIHRpbWUgb2YgdGhlIHByb2R1Y2VkIGZyaWN0aW9uIGVxdWF0aW9ucwogICAgICogQGRlZmF1bHQgMwogICAgICovCiAgICBjb25zdHJ1Y3RvcihtMSwgbTIsIG9wdGlvbnMpIHsKICAgICAgdGhpcy5pZCA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXRlcmlhbHMgPSB2b2lkIDA7CiAgICAgIHRoaXMuZnJpY3Rpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMucmVzdGl0dXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzID0gdm9pZCAwOwogICAgICB0aGlzLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcyA9IHZvaWQgMDsKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiA9IHZvaWQgMDsKICAgICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHsKICAgICAgICBmcmljdGlvbjogMC4zLAogICAgICAgIHJlc3RpdHV0aW9uOiAwLjMsCiAgICAgICAgY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzOiAxZTcsCiAgICAgICAgY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbjogMywKICAgICAgICBmcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzOiAxZTcsCiAgICAgICAgZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb246IDMKICAgICAgfSk7CiAgICAgIHRoaXMuaWQgPSBDb250YWN0TWF0ZXJpYWwuaWRDb3VudGVyKys7CiAgICAgIHRoaXMubWF0ZXJpYWxzID0gW20xLCBtMl07CiAgICAgIHRoaXMuZnJpY3Rpb24gPSBvcHRpb25zLmZyaWN0aW9uOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gb3B0aW9ucy5yZXN0aXR1dGlvbjsKICAgICAgdGhpcy5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MgPSBvcHRpb25zLmNvbnRhY3RFcXVhdGlvblN0aWZmbmVzczsKICAgICAgdGhpcy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uID0gb3B0aW9ucy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MgPSBvcHRpb25zLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3M7CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24gPSBvcHRpb25zLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uOwogICAgfQoKICB9CgogIENvbnRhY3RNYXRlcmlhbC5pZENvdW50ZXIgPSAwOwogIC8qKgogICAqIERlZmluZXMgYSBwaHlzaWNzIG1hdGVyaWFsLgogICAqLwoKICBjbGFzcyBNYXRlcmlhbCB7CiAgICAvKioKICAgICAqIE1hdGVyaWFsIG5hbWUuCiAgICAgKiBJZiBvcHRpb25zIGlzIGEgc3RyaW5nLCBuYW1lIHdpbGwgYmUgc2V0IHRvIHRoYXQgc3RyaW5nLgogICAgICogQHRvZG8gRGVwcmVjYXRlIHRoaXMKICAgICAqLwoKICAgIC8qKiBNYXRlcmlhbCBpZC4gKi8KCiAgICAvKioKICAgICAqIEZyaWN0aW9uIGZvciB0aGlzIG1hdGVyaWFsLgogICAgICogSWYgbm9uLW5lZ2F0aXZlLCBpdCB3aWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgZnJpY3Rpb24gZ2l2ZW4gYnkgQ29udGFjdE1hdGVyaWFscy4gSWYgdGhlcmUncyBubyBtYXRjaGluZyBDb250YWN0TWF0ZXJpYWwsIHRoZSB2YWx1ZSBmcm9tIGBkZWZhdWx0Q29udGFjdE1hdGVyaWFsYCBpbiB0aGUgV29ybGQgd2lsbCBiZSB1c2VkLgogICAgICovCgogICAgLyoqCiAgICAgKiBSZXN0aXR1dGlvbiBmb3IgdGhpcyBtYXRlcmlhbC4KICAgICAqIElmIG5vbi1uZWdhdGl2ZSwgaXQgd2lsbCBiZSB1c2VkIGluc3RlYWQgb2YgdGhlIHJlc3RpdHV0aW9uIGdpdmVuIGJ5IENvbnRhY3RNYXRlcmlhbHMuIElmIHRoZXJlJ3Mgbm8gbWF0Y2hpbmcgQ29udGFjdE1hdGVyaWFsLCB0aGUgdmFsdWUgZnJvbSBgZGVmYXVsdENvbnRhY3RNYXRlcmlhbGAgaW4gdGhlIFdvcmxkIHdpbGwgYmUgdXNlZC4KICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLm5hbWUgPSB2b2lkIDA7CiAgICAgIHRoaXMuaWQgPSB2b2lkIDA7CiAgICAgIHRoaXMuZnJpY3Rpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMucmVzdGl0dXRpb24gPSB2b2lkIDA7CiAgICAgIGxldCBuYW1lID0gJyc7IC8vIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGZpeAoKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykgewogICAgICAgIC8vY29uc29sZS53YXJuKGBQYXNzaW5nIGEgc3RyaW5nIHRvIE1hdGVyaWFsT3B0aW9ucyBpcyBkZXByZWNhdGVkLCBhbmQgaGFzIG5vIGVmZmVjdGApCiAgICAgICAgbmFtZSA9IG9wdGlvbnM7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgICB0aGlzLmlkID0gTWF0ZXJpYWwuaWRDb3VudGVyKys7CiAgICAgIHRoaXMuZnJpY3Rpb24gPSB0eXBlb2Ygb3B0aW9ucy5mcmljdGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmZyaWN0aW9uIDogLTE7CiAgICAgIHRoaXMucmVzdGl0dXRpb24gPSB0eXBlb2Ygb3B0aW9ucy5yZXN0aXR1dGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnJlc3RpdHV0aW9uIDogLTE7CiAgICB9CgogIH0KCiAgTWF0ZXJpYWwuaWRDb3VudGVyID0gMDsKICAvKioKICAgKiBBIHNwcmluZywgY29ubmVjdGluZyB0d28gYm9kaWVzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHNwcmluZyA9IG5ldyBTcHJpbmcoYm94Qm9keSwgc3BoZXJlQm9keSwgewogICAqICAgICAgIHJlc3RMZW5ndGg6IDAsCiAgICogICAgICAgc3RpZmZuZXNzOiA1MCwKICAgKiAgICAgICBkYW1waW5nOiAxLAogICAqICAgICB9KQogICAqCiAgICogICAgIC8vIENvbXB1dGUgdGhlIGZvcmNlIGFmdGVyIGVhY2ggc3RlcAogICAqICAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIChldmVudCkgPT4gewogICAqICAgICAgIHNwcmluZy5hcHBseUZvcmNlKCkKICAgKiAgICAgfSkKICAgKi8KCiAgY2xhc3MgU3ByaW5nIHsKICAgIC8qKgogICAgICogUmVzdCBsZW5ndGggb2YgdGhlIHNwcmluZy4gQSBudW1iZXIgPiAwLgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBTdGlmZm5lc3Mgb2YgdGhlIHNwcmluZy4gQSBudW1iZXIgPj0gMC4KICAgICAqIEBkZWZhdWx0IDEwMAogICAgICovCgogICAgLyoqCiAgICAgKiBEYW1waW5nIG9mIHRoZSBzcHJpbmcuIEEgbnVtYmVyID49IDAuCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIEZpcnN0IGNvbm5lY3RlZCBib2R5LgogICAgICovCgogICAgLyoqCiAgICAgKiBTZWNvbmQgY29ubmVjdGVkIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFuY2hvciBmb3IgYm9keUEgaW4gbG9jYWwgYm9keUEgY29vcmRpbmF0ZXMuCiAgICAgKiBXaGVyZSB0byBob29rIHRoZSBzcHJpbmcgdG8gYm9keSBBLCBpbiBsb2NhbCBib2R5IGNvb3JkaW5hdGVzLgogICAgICogQGRlZmF1bHQgbmV3IFZlYzMoKQogICAgICovCgogICAgLyoqCiAgICAgKiBBbmNob3IgZm9yIGJvZHlCIGluIGxvY2FsIGJvZHlCIGNvb3JkaW5hdGVzLgogICAgICogV2hlcmUgdG8gaG9vayB0aGUgc3ByaW5nIHRvIGJvZHkgQiwgaW4gbG9jYWwgYm9keSBjb29yZGluYXRlcy4KICAgICAqIEBkZWZhdWx0IG5ldyBWZWMzKCkKICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHRoaXMucmVzdExlbmd0aCA9IHZvaWQgMDsKICAgICAgdGhpcy5zdGlmZm5lc3MgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGFtcGluZyA9IHZvaWQgMDsKICAgICAgdGhpcy5ib2R5QSA9IHZvaWQgMDsKICAgICAgdGhpcy5ib2R5QiA9IHZvaWQgMDsKICAgICAgdGhpcy5sb2NhbEFuY2hvckEgPSB2b2lkIDA7CiAgICAgIHRoaXMubG9jYWxBbmNob3JCID0gdm9pZCAwOwogICAgICB0aGlzLnJlc3RMZW5ndGggPSB0eXBlb2Ygb3B0aW9ucy5yZXN0TGVuZ3RoID09PSAnbnVtYmVyJyA/IG9wdGlvbnMucmVzdExlbmd0aCA6IDE7CiAgICAgIHRoaXMuc3RpZmZuZXNzID0gb3B0aW9ucy5zdGlmZm5lc3MgfHwgMTAwOwogICAgICB0aGlzLmRhbXBpbmcgPSBvcHRpb25zLmRhbXBpbmcgfHwgMTsKICAgICAgdGhpcy5ib2R5QSA9IGJvZHlBOwogICAgICB0aGlzLmJvZHlCID0gYm9keUI7CiAgICAgIHRoaXMubG9jYWxBbmNob3JBID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5sb2NhbEFuY2hvckIgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMubG9jYWxBbmNob3JBKSB7CiAgICAgICAgdGhpcy5sb2NhbEFuY2hvckEuY29weShvcHRpb25zLmxvY2FsQW5jaG9yQSk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLmxvY2FsQW5jaG9yQikgewogICAgICAgIHRoaXMubG9jYWxBbmNob3JCLmNvcHkob3B0aW9ucy5sb2NhbEFuY2hvckIpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy53b3JsZEFuY2hvckEpIHsKICAgICAgICB0aGlzLnNldFdvcmxkQW5jaG9yQShvcHRpb25zLndvcmxkQW5jaG9yQSk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLndvcmxkQW5jaG9yQikgewogICAgICAgIHRoaXMuc2V0V29ybGRBbmNob3JCKG9wdGlvbnMud29ybGRBbmNob3JCKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEEsIHVzaW5nIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICovCgoKICAgIHNldFdvcmxkQW5jaG9yQSh3b3JsZEFuY2hvckEpIHsKICAgICAgdGhpcy5ib2R5QS5wb2ludFRvTG9jYWxGcmFtZSh3b3JsZEFuY2hvckEsIHRoaXMubG9jYWxBbmNob3JBKTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBhbmNob3IgcG9pbnQgb24gYm9keSBCLCB1c2luZyB3b3JsZCBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBzZXRXb3JsZEFuY2hvckIod29ybGRBbmNob3JCKSB7CiAgICAgIHRoaXMuYm9keUIucG9pbnRUb0xvY2FsRnJhbWUod29ybGRBbmNob3JCLCB0aGlzLmxvY2FsQW5jaG9yQik7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgYW5jaG9yIHBvaW50IG9uIGJvZHkgQSwgaW4gd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKiBAcGFyYW0gcmVzdWx0IFRoZSB2ZWN0b3IgdG8gc3RvcmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBnZXRXb3JsZEFuY2hvckEocmVzdWx0KSB7CiAgICAgIHRoaXMuYm9keUEucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5sb2NhbEFuY2hvckEsIHJlc3VsdCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgYW5jaG9yIHBvaW50IG9uIGJvZHkgQiwgaW4gd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKiBAcGFyYW0gcmVzdWx0IFRoZSB2ZWN0b3IgdG8gc3RvcmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBnZXRXb3JsZEFuY2hvckIocmVzdWx0KSB7CiAgICAgIHRoaXMuYm9keUIucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5sb2NhbEFuY2hvckIsIHJlc3VsdCk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IHRoZSBzcHJpbmcgZm9yY2UgdG8gdGhlIGNvbm5lY3RlZCBib2RpZXMuCiAgICAgKi8KCgogICAgYXBwbHlGb3JjZSgpIHsKICAgICAgY29uc3QgayA9IHRoaXMuc3RpZmZuZXNzOwogICAgICBjb25zdCBkID0gdGhpcy5kYW1waW5nOwogICAgICBjb25zdCBsID0gdGhpcy5yZXN0TGVuZ3RoOwogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgciA9IGFwcGx5Rm9yY2VfcjsKICAgICAgY29uc3Qgcl91bml0ID0gYXBwbHlGb3JjZV9yX3VuaXQ7CiAgICAgIGNvbnN0IHUgPSBhcHBseUZvcmNlX3U7CiAgICAgIGNvbnN0IGYgPSBhcHBseUZvcmNlX2Y7CiAgICAgIGNvbnN0IHRtcCA9IGFwcGx5Rm9yY2VfdG1wOwogICAgICBjb25zdCB3b3JsZEFuY2hvckEgPSBhcHBseUZvcmNlX3dvcmxkQW5jaG9yQTsKICAgICAgY29uc3Qgd29ybGRBbmNob3JCID0gYXBwbHlGb3JjZV93b3JsZEFuY2hvckI7CiAgICAgIGNvbnN0IHJpID0gYXBwbHlGb3JjZV9yaTsKICAgICAgY29uc3QgcmogPSBhcHBseUZvcmNlX3JqOwogICAgICBjb25zdCByaV94X2YgPSBhcHBseUZvcmNlX3JpX3hfZjsKICAgICAgY29uc3QgcmpfeF9mID0gYXBwbHlGb3JjZV9yal94X2Y7IC8vIEdldCB3b3JsZCBhbmNob3JzCgogICAgICB0aGlzLmdldFdvcmxkQW5jaG9yQSh3b3JsZEFuY2hvckEpOwogICAgICB0aGlzLmdldFdvcmxkQW5jaG9yQih3b3JsZEFuY2hvckIpOyAvLyBHZXQgb2Zmc2V0IHBvaW50cwoKICAgICAgd29ybGRBbmNob3JBLnZzdWIoYm9keUEucG9zaXRpb24sIHJpKTsKICAgICAgd29ybGRBbmNob3JCLnZzdWIoYm9keUIucG9zaXRpb24sIHJqKTsgLy8gQ29tcHV0ZSBkaXN0YW5jZSB2ZWN0b3IgYmV0d2VlbiB3b3JsZCBhbmNob3IgcG9pbnRzCgogICAgICB3b3JsZEFuY2hvckIudnN1Yih3b3JsZEFuY2hvckEsIHIpOwogICAgICBjb25zdCBybGVuID0gci5sZW5ndGgoKTsKICAgICAgcl91bml0LmNvcHkocik7CiAgICAgIHJfdW5pdC5ub3JtYWxpemUoKTsgLy8gQ29tcHV0ZSByZWxhdGl2ZSB2ZWxvY2l0eSBvZiB0aGUgYW5jaG9yIHBvaW50cywgdQoKICAgICAgYm9keUIudmVsb2NpdHkudnN1Yihib2R5QS52ZWxvY2l0eSwgdSk7IC8vIEFkZCByb3RhdGlvbmFsIHZlbG9jaXR5CgogICAgICBib2R5Qi5hbmd1bGFyVmVsb2NpdHkuY3Jvc3MocmosIHRtcCk7CiAgICAgIHUudmFkZCh0bXAsIHUpOwogICAgICBib2R5QS5hbmd1bGFyVmVsb2NpdHkuY3Jvc3MocmksIHRtcCk7CiAgICAgIHUudnN1Yih0bXAsIHUpOyAvLyBGID0gLSBrICogKCB4IC0gTCApIC0gRCAqICggdSApCgogICAgICByX3VuaXQuc2NhbGUoLWsgKiAocmxlbiAtIGwpIC0gZCAqIHUuZG90KHJfdW5pdCksIGYpOyAvLyBBZGQgZm9yY2VzIHRvIGJvZGllcwoKICAgICAgYm9keUEuZm9yY2UudnN1YihmLCBib2R5QS5mb3JjZSk7CiAgICAgIGJvZHlCLmZvcmNlLnZhZGQoZiwgYm9keUIuZm9yY2UpOyAvLyBBbmd1bGFyIGZvcmNlCgogICAgICByaS5jcm9zcyhmLCByaV94X2YpOwogICAgICByai5jcm9zcyhmLCByal94X2YpOwogICAgICBib2R5QS50b3JxdWUudnN1YihyaV94X2YsIGJvZHlBLnRvcnF1ZSk7CiAgICAgIGJvZHlCLnRvcnF1ZS52YWRkKHJqX3hfZiwgYm9keUIudG9ycXVlKTsKICAgIH0KCiAgfQoKICBjb25zdCBhcHBseUZvcmNlX3IgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2Vfcl91bml0ID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3UgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfZiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV93b3JsZEFuY2hvckEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JCID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JpID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JqID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JpX3hfZiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV9yal94X2YgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfdG1wID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBXaGVlbEluZm8KICAgKi8KCiAgY2xhc3MgV2hlZWxJbmZvIHsKICAgIC8qKgogICAgICogTWF4IHRyYXZlbCBkaXN0YW5jZSBvZiB0aGUgc3VzcGVuc2lvbiwgaW4gbWV0ZXJzLgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBTcGVlZCB0byBhcHBseSB0byB0aGUgd2hlZWwgcm90YXRpb24gd2hlbiB0aGUgd2hlZWwgaXMgc2xpZGluZy4KICAgICAqIEBkZWZhdWx0IC0wLjEKICAgICAqLwoKICAgIC8qKgogICAgICogSWYgdGhlIGN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgc2hvdWxkIGJlIHVzZWQuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBzbGlkaW5nCiAgICAgKi8KCiAgICAvKioKICAgICAqIENvbm5lY3Rpb24gcG9pbnQsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgY2hhc3NpcyBib2R5IGZyYW1lLgogICAgICovCgogICAgLyoqCiAgICAgKiBjaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogZGlyZWN0aW9uTG9jYWwKICAgICAqLwoKICAgIC8qKgogICAgICogZGlyZWN0aW9uV29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogYXhsZUxvY2FsCiAgICAgKi8KCiAgICAvKioKICAgICAqIGF4bGVXb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uUmVzdExlbmd0aAogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uTWF4TGVuZ3RoCiAgICAgKiBAZGVmYXVsdCAyCiAgICAgKi8KCiAgICAvKioKICAgICAqIHJhZGl1cwogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uU3RpZmZuZXNzCiAgICAgKiBAZGVmYXVsdCAxMDAKICAgICAqLwoKICAgIC8qKgogICAgICogZGFtcGluZ0NvbXByZXNzaW9uCiAgICAgKiBAZGVmYXVsdCAxMAogICAgICovCgogICAgLyoqCiAgICAgKiBkYW1waW5nUmVsYXhhdGlvbgogICAgICogQGRlZmF1bHQgMTAKICAgICAqLwoKICAgIC8qKgogICAgICogZnJpY3Rpb25TbGlwCiAgICAgKiBAZGVmYXVsdCAxMC41CiAgICAgKi8KCiAgICAvKiogZm9yd2FyZEFjY2VsZXJhdGlvbiAqLwoKICAgIC8qKiBzaWRlQWNjZWxlcmF0aW9uICovCgogICAgLyoqCiAgICAgKiBzdGVlcmluZwogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBSb3RhdGlvbiB2YWx1ZSwgaW4gcmFkaWFucy4KICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogZGVsdGFSb3RhdGlvbgogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiByb2xsSW5mbHVlbmNlCiAgICAgKiBAZGVmYXVsdCAwLjAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIG1heFN1c3BlbnNpb25Gb3JjZQogICAgICovCgogICAgLyoqCiAgICAgKiBlbmdpbmVGb3JjZQogICAgICovCgogICAgLyoqCiAgICAgKiBicmFrZQogICAgICovCgogICAgLyoqCiAgICAgKiBpc0Zyb250V2hlZWwKICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5CiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25Gb3JjZQogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBzbGlwSW5mbwogICAgICovCgogICAgLyoqCiAgICAgKiBza2lkSW5mbwogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uTGVuZ3RoCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHNpZGVJbXB1bHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGZvcndhcmRJbXB1bHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSByZXN1bHQgZnJvbSByYXljYXN0aW5nLgogICAgICovCgogICAgLyoqCiAgICAgKiBXaGVlbCB3b3JsZCB0cmFuc2Zvcm0uCiAgICAgKi8KCiAgICAvKioKICAgICAqIGlzSW5Db250YWN0CiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5tYXhTdXNwZW5zaW9uVHJhdmVsID0gdm9pZCAwOwogICAgICB0aGlzLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgPSB2b2lkIDA7CiAgICAgIHRoaXMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCA9IHZvaWQgMDsKICAgICAgdGhpcy5zbGlkaW5nID0gdm9pZCAwOwogICAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCA9IHZvaWQgMDsKICAgICAgdGhpcy5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGlyZWN0aW9uTG9jYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGlyZWN0aW9uV29ybGQgPSB2b2lkIDA7CiAgICAgIHRoaXMuYXhsZUxvY2FsID0gdm9pZCAwOwogICAgICB0aGlzLmF4bGVXb3JsZCA9IHZvaWQgMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aCA9IHZvaWQgMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uTWF4TGVuZ3RoID0gdm9pZCAwOwogICAgICB0aGlzLnJhZGl1cyA9IHZvaWQgMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uU3RpZmZuZXNzID0gdm9pZCAwOwogICAgICB0aGlzLmRhbXBpbmdDb21wcmVzc2lvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5kYW1waW5nUmVsYXhhdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5mcmljdGlvblNsaXAgPSB2b2lkIDA7CiAgICAgIHRoaXMuZm9yd2FyZEFjY2VsZXJhdGlvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5zaWRlQWNjZWxlcmF0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLnN0ZWVyaW5nID0gdm9pZCAwOwogICAgICB0aGlzLnJvdGF0aW9uID0gdm9pZCAwOwogICAgICB0aGlzLmRlbHRhUm90YXRpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMucm9sbEluZmx1ZW5jZSA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXhTdXNwZW5zaW9uRm9yY2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuZW5naW5lRm9yY2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuYnJha2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuaXNGcm9udFdoZWVsID0gdm9pZCAwOwogICAgICB0aGlzLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiA9IHZvaWQgMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IHZvaWQgMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uRm9yY2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2xpcEluZm8gPSB2b2lkIDA7CiAgICAgIHRoaXMuc2tpZEluZm8gPSB2b2lkIDA7CiAgICAgIHRoaXMuc3VzcGVuc2lvbkxlbmd0aCA9IHZvaWQgMDsKICAgICAgdGhpcy5zaWRlSW1wdWxzZSA9IHZvaWQgMDsKICAgICAgdGhpcy5mb3J3YXJkSW1wdWxzZSA9IHZvaWQgMDsKICAgICAgdGhpcy5yYXljYXN0UmVzdWx0ID0gdm9pZCAwOwogICAgICB0aGlzLndvcmxkVHJhbnNmb3JtID0gdm9pZCAwOwogICAgICB0aGlzLmlzSW5Db250YWN0ID0gdm9pZCAwOwogICAgICBvcHRpb25zID0gVXRpbHMuZGVmYXVsdHMob3B0aW9ucywgewogICAgICAgIGNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbDogbmV3IFZlYzMoKSwKICAgICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQ6IG5ldyBWZWMzKCksCiAgICAgICAgZGlyZWN0aW9uTG9jYWw6IG5ldyBWZWMzKCksCiAgICAgICAgZGlyZWN0aW9uV29ybGQ6IG5ldyBWZWMzKCksCiAgICAgICAgYXhsZUxvY2FsOiBuZXcgVmVjMygpLAogICAgICAgIGF4bGVXb3JsZDogbmV3IFZlYzMoKSwKICAgICAgICBzdXNwZW5zaW9uUmVzdExlbmd0aDogMSwKICAgICAgICBzdXNwZW5zaW9uTWF4TGVuZ3RoOiAyLAogICAgICAgIHJhZGl1czogMSwKICAgICAgICBzdXNwZW5zaW9uU3RpZmZuZXNzOiAxMDAsCiAgICAgICAgZGFtcGluZ0NvbXByZXNzaW9uOiAxMCwKICAgICAgICBkYW1waW5nUmVsYXhhdGlvbjogMTAsCiAgICAgICAgZnJpY3Rpb25TbGlwOiAxMC41LAogICAgICAgIGZvcndhcmRBY2NlbGVyYXRpb246IDEsCiAgICAgICAgc2lkZUFjY2VsZXJhdGlvbjogMSwKICAgICAgICBzdGVlcmluZzogMCwKICAgICAgICByb3RhdGlvbjogMCwKICAgICAgICBkZWx0YVJvdGF0aW9uOiAwLAogICAgICAgIHJvbGxJbmZsdWVuY2U6IDAuMDEsCiAgICAgICAgbWF4U3VzcGVuc2lvbkZvcmNlOiBOdW1iZXIuTUFYX1ZBTFVFLAogICAgICAgIGlzRnJvbnRXaGVlbDogdHJ1ZSwKICAgICAgICBjbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb246IDEsCiAgICAgICAgc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHk6IDAsCiAgICAgICAgc3VzcGVuc2lvbkZvcmNlOiAwLAogICAgICAgIHNsaXBJbmZvOiAwLAogICAgICAgIHNraWRJbmZvOiAwLAogICAgICAgIHN1c3BlbnNpb25MZW5ndGg6IDAsCiAgICAgICAgbWF4U3VzcGVuc2lvblRyYXZlbDogMSwKICAgICAgICB1c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOiBmYWxzZSwKICAgICAgICBjdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOiAtMC4xCiAgICAgIH0pOwogICAgICB0aGlzLm1heFN1c3BlbnNpb25UcmF2ZWwgPSBvcHRpb25zLm1heFN1c3BlbnNpb25UcmF2ZWw7CiAgICAgIHRoaXMuY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCA9IG9wdGlvbnMuY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDsKICAgICAgdGhpcy51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkID0gb3B0aW9ucy51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOwogICAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5jaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwgPSBvcHRpb25zLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbC5jbG9uZSgpOwogICAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCA9IG9wdGlvbnMuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLmNsb25lKCk7CiAgICAgIHRoaXMuZGlyZWN0aW9uTG9jYWwgPSBvcHRpb25zLmRpcmVjdGlvbkxvY2FsLmNsb25lKCk7CiAgICAgIHRoaXMuZGlyZWN0aW9uV29ybGQgPSBvcHRpb25zLmRpcmVjdGlvbldvcmxkLmNsb25lKCk7CiAgICAgIHRoaXMuYXhsZUxvY2FsID0gb3B0aW9ucy5heGxlTG9jYWwuY2xvbmUoKTsKICAgICAgdGhpcy5heGxlV29ybGQgPSBvcHRpb25zLmF4bGVXb3JsZC5jbG9uZSgpOwogICAgICB0aGlzLnN1c3BlbnNpb25SZXN0TGVuZ3RoID0gb3B0aW9ucy5zdXNwZW5zaW9uUmVzdExlbmd0aDsKICAgICAgdGhpcy5zdXNwZW5zaW9uTWF4TGVuZ3RoID0gb3B0aW9ucy5zdXNwZW5zaW9uTWF4TGVuZ3RoOwogICAgICB0aGlzLnJhZGl1cyA9IG9wdGlvbnMucmFkaXVzOwogICAgICB0aGlzLnN1c3BlbnNpb25TdGlmZm5lc3MgPSBvcHRpb25zLnN1c3BlbnNpb25TdGlmZm5lc3M7CiAgICAgIHRoaXMuZGFtcGluZ0NvbXByZXNzaW9uID0gb3B0aW9ucy5kYW1waW5nQ29tcHJlc3Npb247CiAgICAgIHRoaXMuZGFtcGluZ1JlbGF4YXRpb24gPSBvcHRpb25zLmRhbXBpbmdSZWxheGF0aW9uOwogICAgICB0aGlzLmZyaWN0aW9uU2xpcCA9IG9wdGlvbnMuZnJpY3Rpb25TbGlwOwogICAgICB0aGlzLmZvcndhcmRBY2NlbGVyYXRpb24gPSBvcHRpb25zLmZvcndhcmRBY2NlbGVyYXRpb247CiAgICAgIHRoaXMuc2lkZUFjY2VsZXJhdGlvbiA9IG9wdGlvbnMuc2lkZUFjY2VsZXJhdGlvbjsKICAgICAgdGhpcy5zdGVlcmluZyA9IDA7CiAgICAgIHRoaXMucm90YXRpb24gPSAwOwogICAgICB0aGlzLmRlbHRhUm90YXRpb24gPSAwOwogICAgICB0aGlzLnJvbGxJbmZsdWVuY2UgPSBvcHRpb25zLnJvbGxJbmZsdWVuY2U7CiAgICAgIHRoaXMubWF4U3VzcGVuc2lvbkZvcmNlID0gb3B0aW9ucy5tYXhTdXNwZW5zaW9uRm9yY2U7CiAgICAgIHRoaXMuZW5naW5lRm9yY2UgPSAwOwogICAgICB0aGlzLmJyYWtlID0gMDsKICAgICAgdGhpcy5pc0Zyb250V2hlZWwgPSBvcHRpb25zLmlzRnJvbnRXaGVlbDsKICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxOwogICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMDsKICAgICAgdGhpcy5zdXNwZW5zaW9uRm9yY2UgPSAwOwogICAgICB0aGlzLnNsaXBJbmZvID0gMDsKICAgICAgdGhpcy5za2lkSW5mbyA9IDA7CiAgICAgIHRoaXMuc3VzcGVuc2lvbkxlbmd0aCA9IDA7CiAgICAgIHRoaXMuc2lkZUltcHVsc2UgPSAwOwogICAgICB0aGlzLmZvcndhcmRJbXB1bHNlID0gMDsKICAgICAgdGhpcy5yYXljYXN0UmVzdWx0ID0gbmV3IFJheWNhc3RSZXN1bHQoKTsKICAgICAgdGhpcy53b3JsZFRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTsKICAgICAgdGhpcy5pc0luQ29udGFjdCA9IGZhbHNlOwogICAgfQoKICAgIHVwZGF0ZVdoZWVsKGNoYXNzaXMpIHsKICAgICAgY29uc3QgcmF5Y2FzdFJlc3VsdCA9IHRoaXMucmF5Y2FzdFJlc3VsdDsKCiAgICAgIGlmICh0aGlzLmlzSW5Db250YWN0KSB7CiAgICAgICAgY29uc3QgcHJvamVjdCA9IHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KHJheWNhc3RSZXN1bHQuZGlyZWN0aW9uV29ybGQpOwogICAgICAgIHJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXMucG9zaXRpb24sIHJlbHBvcyk7CiAgICAgICAgY2hhc3Npcy5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChyZWxwb3MsIGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTsKICAgICAgICBjb25zdCBwcm9qVmVsID0gcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZC5kb3QoY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQpOwoKICAgICAgICBpZiAocHJvamVjdCA+PSAtMC4xKSB7CiAgICAgICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMC4wOwogICAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjAgLyAwLjE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnN0IGludiA9IC0xIC8gcHJvamVjdDsKICAgICAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSBwcm9qVmVsICogaW52OwogICAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSBpbnY7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIE5vdCBpbiBjb250YWN0IDogcG9zaXRpb24gd2hlZWwgaW4gYSBuaWNlIChyZXN0IGxlbmd0aCkgcG9zaXRpb24KICAgICAgICByYXljYXN0UmVzdWx0LnN1c3BlbnNpb25MZW5ndGggPSB0aGlzLnN1c3BlbnNpb25SZXN0TGVuZ3RoOwogICAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSAwLjA7CiAgICAgICAgcmF5Y2FzdFJlc3VsdC5kaXJlY3Rpb25Xb3JsZC5zY2FsZSgtMSwgcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjA7CiAgICAgIH0KICAgIH0KCiAgfQoKICBjb25zdCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcmVscG9zID0gbmV3IFZlYzMoKTsKICAvKioKICAgKiBWZWhpY2xlIGhlbHBlciBjbGFzcyB0aGF0IGNhc3RzIHJheXMgZnJvbSB0aGUgd2hlZWwgcG9zaXRpb25zIHRvd2FyZHMgdGhlIGdyb3VuZCBhbmQgYXBwbGllcyBmb3JjZXMuCiAgICovCgogIGNsYXNzIFJheWNhc3RWZWhpY2xlIHsKICAgIC8qKiBUaGUgY2FyIGNoYXNzaXMgYm9keS4gKi8KCiAgICAvKiogVGhlIHdoZWVscy4gKi8KCiAgICAvKiogV2lsbCBiZSBzZXQgdG8gdHJ1ZSBpZiB0aGUgY2FyIGlzIHNsaWRpbmcuICovCgogICAgLyoqIEluZGV4IG9mIHRoZSByaWdodCBheGlzLiB4PTAsIHk9MSwgej0yICovCgogICAgLyoqIEluZGV4IG9mIHRoZSBmb3J3YXJkIGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogSW5kZXggb2YgdGhlIHVwIGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogVGhlIGNvbnN0cmFpbnRzLiAqLwoKICAgIC8qKiBPcHRpb25hbCBwcmUtc3RlcCBjYWxsYmFjay4gKi8KCiAgICAvKiogTnVtYmVyIG9mIHdoZWVscyBvbiB0aGUgZ3JvdW5kLiAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICB0aGlzLmNoYXNzaXNCb2R5ID0gdm9pZCAwOwogICAgICB0aGlzLndoZWVsSW5mb3MgPSB2b2lkIDA7CiAgICAgIHRoaXMuc2xpZGluZyA9IHZvaWQgMDsKICAgICAgdGhpcy53b3JsZCA9IHZvaWQgMDsKICAgICAgdGhpcy5pbmRleFJpZ2h0QXhpcyA9IHZvaWQgMDsKICAgICAgdGhpcy5pbmRleEZvcndhcmRBeGlzID0gdm9pZCAwOwogICAgICB0aGlzLmluZGV4VXBBeGlzID0gdm9pZCAwOwogICAgICB0aGlzLmNvbnN0cmFpbnRzID0gdm9pZCAwOwogICAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9IHZvaWQgMDsKICAgICAgdGhpcy5jdXJyZW50VmVoaWNsZVNwZWVkS21Ib3VyID0gdm9pZCAwOwogICAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kID0gdm9pZCAwOwogICAgICB0aGlzLmNoYXNzaXNCb2R5ID0gb3B0aW9ucy5jaGFzc2lzQm9keTsKICAgICAgdGhpcy53aGVlbEluZm9zID0gW107CiAgICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlOwogICAgICB0aGlzLndvcmxkID0gbnVsbDsKICAgICAgdGhpcy5pbmRleFJpZ2h0QXhpcyA9IHR5cGVvZiBvcHRpb25zLmluZGV4UmlnaHRBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhSaWdodEF4aXMgOiAyOwogICAgICB0aGlzLmluZGV4Rm9yd2FyZEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleEZvcndhcmRBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhGb3J3YXJkQXhpcyA6IDA7CiAgICAgIHRoaXMuaW5kZXhVcEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleFVwQXhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmluZGV4VXBBeGlzIDogMTsKICAgICAgdGhpcy5jb25zdHJhaW50cyA9IFtdOwogICAgICBjb25zb2xlLmxvZyh0aGlzLmluZGV4Rm9yd2FyZEF4aXMsIHRoaXMuaW5kZXhSaWdodEF4aXMsIHRoaXMuaW5kZXhVcEF4aXMpOwoKICAgICAgdGhpcy5wcmVTdGVwQ2FsbGJhY2sgPSAoKSA9PiB7fTsKCiAgICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciA9IDA7CiAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQgPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSB3aGVlbC4gRm9yIGluZm9ybWF0aW9uIGFib3V0IHRoZSBvcHRpb25zLCBzZWUgYFdoZWVsSW5mb2AuCiAgICAgKi8KCgogICAgYWRkV2hlZWwob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBpbmZvID0gbmV3IFdoZWVsSW5mbyhvcHRpb25zKTsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLndoZWVsSW5mb3MubGVuZ3RoOwogICAgICB0aGlzLndoZWVsSW5mb3MucHVzaChpbmZvKTsKICAgICAgcmV0dXJuIGluZGV4OwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHN0ZWVyaW5nIHZhbHVlIG9mIGEgd2hlZWwuCiAgICAgKi8KCgogICAgc2V0U3RlZXJpbmdWYWx1ZSh2YWx1ZSwgd2hlZWxJbmRleCkgewogICAgICBjb25zdCB3aGVlbCA9IHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XTsKICAgICAgd2hlZWwuc3RlZXJpbmcgPSB2YWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSB3aGVlbCBmb3JjZSB0byBhcHBseSBvbiBvbmUgb2YgdGhlIHdoZWVscyBlYWNoIHRpbWUgc3RlcAogICAgICovCgoKICAgIGFwcGx5RW5naW5lRm9yY2UodmFsdWUsIHdoZWVsSW5kZXgpIHsKICAgICAgdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdLmVuZ2luZUZvcmNlID0gdmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgYnJha2luZyBmb3JjZSBvZiBhIHdoZWVsCiAgICAgKi8KCgogICAgc2V0QnJha2UoYnJha2UsIHdoZWVsSW5kZXgpIHsKICAgICAgdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdLmJyYWtlID0gYnJha2U7CiAgICB9CiAgICAvKioKICAgICAqIEFkZCB0aGUgdmVoaWNsZSBpbmNsdWRpbmcgaXRzIGNvbnN0cmFpbnRzIHRvIHRoZSB3b3JsZC4KICAgICAqLwoKCiAgICBhZGRUb1dvcmxkKHdvcmxkKSB7CiAgICAgIHdvcmxkLmFkZEJvZHkodGhpcy5jaGFzc2lzQm9keSk7CiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOwoKICAgICAgdGhpcy5wcmVTdGVwQ2FsbGJhY2sgPSAoKSA9PiB7CiAgICAgICAgdGhhdC51cGRhdGVWZWhpY2xlKHdvcmxkLmR0KTsKICAgICAgfTsKCiAgICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCB0aGlzLnByZVN0ZXBDYWxsYmFjayk7CiAgICAgIHRoaXMud29ybGQgPSB3b3JsZDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IG9uZSBvZiB0aGUgd2hlZWwgYXhsZXMsIHdvcmxkLW9yaWVudGVkLgogICAgICovCgoKICAgIGdldFZlaGljbGVBeGlzV29ybGQoYXhpc0luZGV4LCByZXN1bHQpIHsKICAgICAgcmVzdWx0LnNldChheGlzSW5kZXggPT09IDAgPyAxIDogMCwgYXhpc0luZGV4ID09PSAxID8gMSA6IDAsIGF4aXNJbmRleCA9PT0gMiA/IDEgOiAwKTsKICAgICAgdGhpcy5jaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUocmVzdWx0LCByZXN1bHQpOwogICAgfQoKICAgIHVwZGF0ZVZlaGljbGUodGltZVN0ZXApIHsKICAgICAgY29uc3Qgd2hlZWxJbmZvcyA9IHRoaXMud2hlZWxJbmZvczsKICAgICAgY29uc3QgbnVtV2hlZWxzID0gd2hlZWxJbmZvcy5sZW5ndGg7CiAgICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtKGkpOwogICAgICB9CgogICAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgPSAzLjYgKiBjaGFzc2lzQm9keS52ZWxvY2l0eS5sZW5ndGgoKTsKICAgICAgY29uc3QgZm9yd2FyZFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5nZXRWZWhpY2xlQXhpc1dvcmxkKHRoaXMuaW5kZXhGb3J3YXJkQXhpcywgZm9yd2FyZFdvcmxkKTsKCiAgICAgIGlmIChmb3J3YXJkV29ybGQuZG90KGNoYXNzaXNCb2R5LnZlbG9jaXR5KSA8IDApIHsKICAgICAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgKj0gLTE7CiAgICAgIH0gLy8gc2ltdWxhdGUgc3VzcGVuc2lvbgoKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICB0aGlzLmNhc3RSYXkod2hlZWxJbmZvc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlU3VzcGVuc2lvbih0aW1lU3RlcCk7CiAgICAgIGNvbnN0IGltcHVsc2UgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCByZWxwb3MgPSBuZXcgVmVjMygpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIC8vYXBwbHkgc3VzcGVuc2lvbiBmb3JjZQogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKICAgICAgICBsZXQgc3VzcGVuc2lvbkZvcmNlID0gd2hlZWwuc3VzcGVuc2lvbkZvcmNlOwoKICAgICAgICBpZiAoc3VzcGVuc2lvbkZvcmNlID4gd2hlZWwubWF4U3VzcGVuc2lvbkZvcmNlKSB7CiAgICAgICAgICBzdXNwZW5zaW9uRm9yY2UgPSB3aGVlbC5tYXhTdXNwZW5zaW9uRm9yY2U7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLnNjYWxlKHN1c3BlbnNpb25Gb3JjZSAqIHRpbWVTdGVwLCBpbXB1bHNlKTsKICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1YihjaGFzc2lzQm9keS5wb3NpdGlvbiwgcmVscG9zKTsKICAgICAgICBjaGFzc2lzQm9keS5hcHBseUltcHVsc2UoaW1wdWxzZSwgcmVscG9zKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVGcmljdGlvbih0aW1lU3RlcCk7CiAgICAgIGNvbnN0IGhpdE5vcm1hbFdvcmxkU2NhbGVkV2l0aFByb2ogPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBmd2QgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCB2ZWwgPSBuZXcgVmVjMygpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsgLy9jb25zdCByZWxwb3MgPSBuZXcgVmVjMygpOwogICAgICAgIC8vd2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLnZzdWIoY2hhc3Npc0JvZHkucG9zaXRpb24sIHJlbHBvcyk7CgogICAgICAgIGNoYXNzaXNCb2R5LmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCwgdmVsKTsgLy8gSGFjayB0byBnZXQgdGhlIHJvdGF0aW9uIGluIHRoZSBjb3JyZWN0IGRpcmVjdGlvbgoKICAgICAgICBsZXQgbSA9IDE7CgogICAgICAgIHN3aXRjaCAodGhpcy5pbmRleFVwQXhpcykgewogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBtID0gLTE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgaWYgKHdoZWVsLmlzSW5Db250YWN0KSB7CiAgICAgICAgICB0aGlzLmdldFZlaGljbGVBeGlzV29ybGQodGhpcy5pbmRleEZvcndhcmRBeGlzLCBmd2QpOwogICAgICAgICAgY29uc3QgcHJvaiA9IGZ3ZC5kb3Qod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLnNjYWxlKHByb2osIGhpdE5vcm1hbFdvcmxkU2NhbGVkV2l0aFByb2opOwogICAgICAgICAgZndkLnZzdWIoaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaiwgZndkKTsKICAgICAgICAgIGNvbnN0IHByb2oyID0gZndkLmRvdCh2ZWwpOwogICAgICAgICAgd2hlZWwuZGVsdGFSb3RhdGlvbiA9IG0gKiBwcm9qMiAqIHRpbWVTdGVwIC8gd2hlZWwucmFkaXVzOwogICAgICAgIH0KCiAgICAgICAgaWYgKCh3aGVlbC5zbGlkaW5nIHx8ICF3aGVlbC5pc0luQ29udGFjdCkgJiYgd2hlZWwuZW5naW5lRm9yY2UgIT09IDAgJiYgd2hlZWwudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCkgewogICAgICAgICAgLy8gQXBwbHkgY3VzdG9tIHJvdGF0aW9uIHdoZW4gYWNjZWxlcmF0aW5nIGFuZCBzbGlkaW5nCiAgICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gKHdoZWVsLmVuZ2luZUZvcmNlID4gMCA/IDEgOiAtMSkgKiB3aGVlbC5jdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkICogdGltZVN0ZXA7CiAgICAgICAgfSAvLyBMb2NrIHdoZWVscwoKCiAgICAgICAgaWYgKE1hdGguYWJzKHdoZWVsLmJyYWtlKSA+IE1hdGguYWJzKHdoZWVsLmVuZ2luZUZvcmNlKSkgewogICAgICAgICAgd2hlZWwuZGVsdGFSb3RhdGlvbiA9IDA7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5yb3RhdGlvbiArPSB3aGVlbC5kZWx0YVJvdGF0aW9uOyAvLyBVc2UgdGhlIG9sZCB2YWx1ZQoKICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uICo9IDAuOTk7IC8vIGRhbXBpbmcgb2Ygcm90YXRpb24gd2hlbiBub3QgaW4gY29udGFjdAogICAgICB9CiAgICB9CgogICAgdXBkYXRlU3VzcGVuc2lvbihkZWx0YVRpbWUpIHsKICAgICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5OwogICAgICBjb25zdCBjaGFzc2lzTWFzcyA9IGNoYXNzaXNCb2R5Lm1hc3M7CiAgICAgIGNvbnN0IHdoZWVsSW5mb3MgPSB0aGlzLndoZWVsSW5mb3M7CiAgICAgIGNvbnN0IG51bVdoZWVscyA9IHdoZWVsSW5mb3MubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgd19pdCA9IDA7IHdfaXQgPCBudW1XaGVlbHM7IHdfaXQrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1t3X2l0XTsKCiAgICAgICAgaWYgKHdoZWVsLmlzSW5Db250YWN0KSB7CiAgICAgICAgICBsZXQgZm9yY2U7IC8vIFNwcmluZwoKICAgICAgICAgIGNvbnN0IHN1c3BfbGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGg7CiAgICAgICAgICBjb25zdCBjdXJyZW50X2xlbmd0aCA9IHdoZWVsLnN1c3BlbnNpb25MZW5ndGg7CiAgICAgICAgICBjb25zdCBsZW5ndGhfZGlmZiA9IHN1c3BfbGVuZ3RoIC0gY3VycmVudF9sZW5ndGg7CiAgICAgICAgICBmb3JjZSA9IHdoZWVsLnN1c3BlbnNpb25TdGlmZm5lc3MgKiBsZW5ndGhfZGlmZiAqIHdoZWVsLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbjsgLy8gRGFtcGVyCgogICAgICAgICAgY29uc3QgcHJvamVjdGVkX3JlbF92ZWwgPSB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eTsKICAgICAgICAgIGxldCBzdXNwX2RhbXBpbmc7CgogICAgICAgICAgaWYgKHByb2plY3RlZF9yZWxfdmVsIDwgMCkgewogICAgICAgICAgICBzdXNwX2RhbXBpbmcgPSB3aGVlbC5kYW1waW5nQ29tcHJlc3Npb247CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzdXNwX2RhbXBpbmcgPSB3aGVlbC5kYW1waW5nUmVsYXhhdGlvbjsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3JjZSAtPSBzdXNwX2RhbXBpbmcgKiBwcm9qZWN0ZWRfcmVsX3ZlbDsKICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25Gb3JjZSA9IGZvcmNlICogY2hhc3Npc01hc3M7CgogICAgICAgICAgaWYgKHdoZWVsLnN1c3BlbnNpb25Gb3JjZSA8IDApIHsKICAgICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gMDsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gMDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIHRoZSB2ZWhpY2xlIGluY2x1ZGluZyBpdHMgY29uc3RyYWludHMgZnJvbSB0aGUgd29ybGQuCiAgICAgKi8KCgogICAgcmVtb3ZlRnJvbVdvcmxkKHdvcmxkKSB7CiAgICAgIHRoaXMuY29uc3RyYWludHM7CiAgICAgIHdvcmxkLnJlbW92ZUJvZHkodGhpcy5jaGFzc2lzQm9keSk7CiAgICAgIHdvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCB0aGlzLnByZVN0ZXBDYWxsYmFjayk7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgfQoKICAgIGNhc3RSYXkod2hlZWwpIHsKICAgICAgY29uc3QgcmF5dmVjdG9yID0gY2FzdFJheV9yYXl2ZWN0b3I7CiAgICAgIGNvbnN0IHRhcmdldCA9IGNhc3RSYXlfdGFyZ2V0OwogICAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWwpOwogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGxldCBkZXB0aCA9IC0xOwogICAgICBjb25zdCByYXlsZW4gPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIHdoZWVsLnJhZGl1czsKICAgICAgd2hlZWwuZGlyZWN0aW9uV29ybGQuc2NhbGUocmF5bGVuLCByYXl2ZWN0b3IpOwogICAgICBjb25zdCBzb3VyY2UgPSB3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQ7CiAgICAgIHNvdXJjZS52YWRkKHJheXZlY3RvciwgdGFyZ2V0KTsKICAgICAgY29uc3QgcmF5Y2FzdFJlc3VsdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQ7CiAgICAgIHJheWNhc3RSZXN1bHQucmVzZXQoKTsgLy8gVHVybiBvZmYgcmF5IGNvbGxpc2lvbiB3aXRoIHRoZSBjaGFzc2lzIHRlbXBvcmFyaWx5CgogICAgICBjb25zdCBvbGRTdGF0ZSA9IGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlOwogICAgICBjaGFzc2lzQm9keS5jb2xsaXNpb25SZXNwb25zZSA9IGZhbHNlOyAvLyBDYXN0IHJheSBhZ2FpbnN0IHdvcmxkCgogICAgICB0aGlzLndvcmxkLnJheVRlc3Qoc291cmNlLCB0YXJnZXQsIHJheWNhc3RSZXN1bHQpOwogICAgICBjaGFzc2lzQm9keS5jb2xsaXNpb25SZXNwb25zZSA9IG9sZFN0YXRlOwogICAgICBjb25zdCBvYmplY3QgPSByYXljYXN0UmVzdWx0LmJvZHk7CiAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuZ3JvdW5kT2JqZWN0ID0gMDsKCiAgICAgIGlmIChvYmplY3QpIHsKICAgICAgICBkZXB0aCA9IHJheWNhc3RSZXN1bHQuZGlzdGFuY2U7CiAgICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCA9IHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQ7CiAgICAgICAgd2hlZWwuaXNJbkNvbnRhY3QgPSB0cnVlOwogICAgICAgIGNvbnN0IGhpdERpc3RhbmNlID0gcmF5Y2FzdFJlc3VsdC5kaXN0YW5jZTsKICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gaGl0RGlzdGFuY2UgLSB3aGVlbC5yYWRpdXM7IC8vIGNsYW1wIG9uIG1heCBzdXNwZW5zaW9uIHRyYXZlbAoKICAgICAgICBjb25zdCBtaW5TdXNwZW5zaW9uTGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGggLSB3aGVlbC5tYXhTdXNwZW5zaW9uVHJhdmVsOwogICAgICAgIGNvbnN0IG1heFN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIHdoZWVsLm1heFN1c3BlbnNpb25UcmF2ZWw7CgogICAgICAgIGlmICh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoIDwgbWluU3VzcGVuc2lvbkxlbmd0aCkgewogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA9IG1pblN1c3BlbnNpb25MZW5ndGg7CiAgICAgICAgfQoKICAgICAgICBpZiAod2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA+IG1heFN1c3BlbnNpb25MZW5ndGgpIHsKICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSBtYXhTdXNwZW5zaW9uTGVuZ3RoOwogICAgICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5yZXNldCgpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgZGVub21pbmF0b3IgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdCh3aGVlbC5kaXJlY3Rpb25Xb3JsZCk7CiAgICAgICAgY29uc3QgY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQgPSBuZXcgVmVjMygpOwogICAgICAgIGNoYXNzaXNCb2R5LmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQpOwogICAgICAgIGNvbnN0IHByb2pWZWwgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdChjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7CgogICAgICAgIGlmIChkZW5vbWluYXRvciA+PSAtMC4xKSB7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDA7CiAgICAgICAgICB3aGVlbC5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxIC8gMC4xOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBpbnYgPSAtMSAvIGRlbm9taW5hdG9yOwogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSBwcm9qVmVsICogaW52OwogICAgICAgICAgd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gaW52OwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvL3B1dCB3aGVlbCBpbmZvIGFzIGluIHJlc3QgcG9zaXRpb24KICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGggKyAwICogd2hlZWwubWF4U3VzcGVuc2lvblRyYXZlbDsKICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDAuMDsKICAgICAgICB3aGVlbC5kaXJlY3Rpb25Xb3JsZC5zY2FsZSgtMSwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wOwogICAgICB9CgogICAgICByZXR1cm4gZGVwdGg7CiAgICB9CgogICAgdXBkYXRlV2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbCkgewogICAgICB3aGVlbC5pc0luQ29udGFjdCA9IGZhbHNlOwogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGNoYXNzaXNCb2R5LnBvaW50VG9Xb3JsZEZyYW1lKHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCwgd2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkKTsKICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHdoZWVsLmRpcmVjdGlvbkxvY2FsLCB3aGVlbC5kaXJlY3Rpb25Xb3JsZCk7CiAgICAgIGNoYXNzaXNCb2R5LnZlY3RvclRvV29ybGRGcmFtZSh3aGVlbC5heGxlTG9jYWwsIHdoZWVsLmF4bGVXb3JsZCk7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSBvbmUgb2YgdGhlIHdoZWVsIHRyYW5zZm9ybS4KICAgICAqIE5vdGUgd2hlbiByZW5kZXJpbmcgd2hlZWxzOiBkdXJpbmcgZWFjaCBzdGVwLCB3aGVlbCB0cmFuc2Zvcm1zIGFyZSB1cGRhdGVkIEJFRk9SRSB0aGUgY2hhc3NpczsgaWUuIHRoZWlyIHBvc2l0aW9uIGJlY29tZXMgaW52YWxpZCBhZnRlciB0aGUgc3RlcC4gVGh1cyB3aGVuIHlvdSByZW5kZXIgd2hlZWxzLCB5b3UgbXVzdCB1cGRhdGUgd2hlZWwgdHJhbnNmb3JtcyBiZWZvcmUgcmVuZGVyaW5nIHRoZW0uIFNlZSByYXljYXN0VmVoaWNsZSBkZW1vIGZvciBhbiBleGFtcGxlLgogICAgICogQHBhcmFtIHdoZWVsSW5kZXggVGhlIHdoZWVsIGluZGV4IHRvIHVwZGF0ZS4KICAgICAqLwoKCiAgICB1cGRhdGVXaGVlbFRyYW5zZm9ybSh3aGVlbEluZGV4KSB7CiAgICAgIGNvbnN0IHVwID0gdG1wVmVjNDsKICAgICAgY29uc3QgcmlnaHQgPSB0bXBWZWM1OwogICAgICBjb25zdCBmd2QgPSB0bXBWZWM2OwogICAgICBjb25zdCB3aGVlbCA9IHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XTsKICAgICAgdGhpcy51cGRhdGVXaGVlbFRyYW5zZm9ybVdvcmxkKHdoZWVsKTsKICAgICAgd2hlZWwuZGlyZWN0aW9uTG9jYWwuc2NhbGUoLTEsIHVwKTsKICAgICAgcmlnaHQuY29weSh3aGVlbC5heGxlTG9jYWwpOwogICAgICB1cC5jcm9zcyhyaWdodCwgZndkKTsKICAgICAgZndkLm5vcm1hbGl6ZSgpOwogICAgICByaWdodC5ub3JtYWxpemUoKTsgLy8gUm90YXRlIGFyb3VuZCBzdGVlcmluZyBvdmVyIHRoZSB3aGVlbEF4bGUKCiAgICAgIGNvbnN0IHN0ZWVyaW5nID0gd2hlZWwuc3RlZXJpbmc7CiAgICAgIGNvbnN0IHN0ZWVyaW5nT3JuID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgc3RlZXJpbmdPcm4uc2V0RnJvbUF4aXNBbmdsZSh1cCwgc3RlZXJpbmcpOwogICAgICBjb25zdCByb3RhdGluZ09ybiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHJvdGF0aW5nT3JuLnNldEZyb21BeGlzQW5nbGUocmlnaHQsIHdoZWVsLnJvdGF0aW9uKTsgLy8gV29ybGQgcm90YXRpb24gb2YgdGhlIHdoZWVsCgogICAgICBjb25zdCBxID0gd2hlZWwud29ybGRUcmFuc2Zvcm0ucXVhdGVybmlvbjsKICAgICAgdGhpcy5jaGFzc2lzQm9keS5xdWF0ZXJuaW9uLm11bHQoc3RlZXJpbmdPcm4sIHEpOwogICAgICBxLm11bHQocm90YXRpbmdPcm4sIHEpOwogICAgICBxLm5vcm1hbGl6ZSgpOyAvLyB3b3JsZCBwb3NpdGlvbiBvZiB0aGUgd2hlZWwKCiAgICAgIGNvbnN0IHAgPSB3aGVlbC53b3JsZFRyYW5zZm9ybS5wb3NpdGlvbjsKICAgICAgcC5jb3B5KHdoZWVsLmRpcmVjdGlvbldvcmxkKTsKICAgICAgcC5zY2FsZSh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoLCBwKTsKICAgICAgcC52YWRkKHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCwgcCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgd29ybGQgdHJhbnNmb3JtIG9mIG9uZSBvZiB0aGUgd2hlZWxzCiAgICAgKi8KCgogICAgZ2V0V2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbEluZGV4KSB7CiAgICAgIHJldHVybiB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0ud29ybGRUcmFuc2Zvcm07CiAgICB9CgogICAgdXBkYXRlRnJpY3Rpb24odGltZVN0ZXApIHsKICAgICAgY29uc3Qgc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qID0gdXBkYXRlRnJpY3Rpb25fc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qOyAvL2NhbGN1bGF0ZSB0aGUgaW1wdWxzZSwgc28gdGhhdCB0aGUgd2hlZWxzIGRvbid0IG1vdmUgc2lkZXdhcmRzCgogICAgICBjb25zdCB3aGVlbEluZm9zID0gdGhpcy53aGVlbEluZm9zOwogICAgICBjb25zdCBudW1XaGVlbHMgPSB3aGVlbEluZm9zLmxlbmd0aDsKICAgICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5OwogICAgICBjb25zdCBmb3J3YXJkV1MgPSB1cGRhdGVGcmljdGlvbl9mb3J3YXJkV1M7CiAgICAgIGNvbnN0IGF4bGUgPSB1cGRhdGVGcmljdGlvbl9heGxlOwogICAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5OwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kKys7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSA9IDA7CiAgICAgICAgd2hlZWwuZm9yd2FyZEltcHVsc2UgPSAwOwoKICAgICAgICBpZiAoIWZvcndhcmRXU1tpXSkgewogICAgICAgICAgZm9yd2FyZFdTW2ldID0gbmV3IFZlYzMoKTsKICAgICAgICB9CgogICAgICAgIGlmICghYXhsZVtpXSkgewogICAgICAgICAgYXhsZVtpXSA9IG5ldyBWZWMzKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOwogICAgICAgIGNvbnN0IGdyb3VuZE9iamVjdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQuYm9keTsKCiAgICAgICAgaWYgKGdyb3VuZE9iamVjdCkgewogICAgICAgICAgY29uc3QgYXhsZWkgPSBheGxlW2ldOwogICAgICAgICAgY29uc3Qgd2hlZWxUcmFucyA9IHRoaXMuZ2V0V2hlZWxUcmFuc2Zvcm1Xb3JsZChpKTsgLy8gR2V0IHdvcmxkIGF4bGUKCiAgICAgICAgICB3aGVlbFRyYW5zLnZlY3RvclRvV29ybGRGcmFtZShkaXJlY3Rpb25zW3RoaXMuaW5kZXhSaWdodEF4aXNdLCBheGxlaSk7CiAgICAgICAgICBjb25zdCBzdXJmTm9ybWFsV1MgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkOwogICAgICAgICAgY29uc3QgcHJvaiA9IGF4bGVpLmRvdChzdXJmTm9ybWFsV1MpOwogICAgICAgICAgc3VyZk5vcm1hbFdTLnNjYWxlKHByb2osIHN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaik7CiAgICAgICAgICBheGxlaS52c3ViKHN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaiwgYXhsZWkpOwogICAgICAgICAgYXhsZWkubm9ybWFsaXplKCk7CiAgICAgICAgICBzdXJmTm9ybWFsV1MuY3Jvc3MoYXhsZWksIGZvcndhcmRXU1tpXSk7CiAgICAgICAgICBmb3J3YXJkV1NbaV0ubm9ybWFsaXplKCk7CiAgICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWwoY2hhc3Npc0JvZHksIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgZ3JvdW5kT2JqZWN0LCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQsIGF4bGVpKTsKICAgICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlICo9IHNpZGVGcmljdGlvblN0aWZmbmVzczI7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCBzaWRlRmFjdG9yID0gMTsKICAgICAgY29uc3QgZndkRmFjdG9yID0gMC41OwogICAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5OwogICAgICAgIGxldCByb2xsaW5nRnJpY3Rpb24gPSAwOwogICAgICAgIHdoZWVsLnNsaXBJbmZvID0gMTsKCiAgICAgICAgaWYgKGdyb3VuZE9iamVjdCkgewogICAgICAgICAgY29uc3QgZGVmYXVsdFJvbGxpbmdGcmljdGlvbkltcHVsc2UgPSAwOwogICAgICAgICAgY29uc3QgbWF4SW1wdWxzZSA9IHdoZWVsLmJyYWtlID8gd2hlZWwuYnJha2UgOiBkZWZhdWx0Um9sbGluZ0ZyaWN0aW9uSW1wdWxzZTsgLy8gYnRXaGVlbENvbnRhY3RQb2ludCBjb250YWN0UHQoY2hhc3Npc0JvZHksZ3JvdW5kT2JqZWN0LHdoZWVsSW5mcmF5Y2FzdEluZm8uaGl0UG9pbnRXb3JsZCxmb3J3YXJkV1Nbd2hlZWxdLG1heEltcHVsc2UpOwogICAgICAgICAgLy8gcm9sbGluZ0ZyaWN0aW9uID0gY2FsY1JvbGxpbmdGcmljdGlvbihjb250YWN0UHQpOwoKICAgICAgICAgIHJvbGxpbmdGcmljdGlvbiA9IGNhbGNSb2xsaW5nRnJpY3Rpb24oY2hhc3Npc0JvZHksIGdyb3VuZE9iamVjdCwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBmb3J3YXJkV1NbaV0sIG1heEltcHVsc2UpOwogICAgICAgICAgcm9sbGluZ0ZyaWN0aW9uICs9IHdoZWVsLmVuZ2luZUZvcmNlICogdGltZVN0ZXA7IC8vIHJvbGxpbmdGcmljdGlvbiA9IDA7CgogICAgICAgICAgY29uc3QgZmFjdG9yID0gbWF4SW1wdWxzZSAvIHJvbGxpbmdGcmljdGlvbjsKICAgICAgICAgIHdoZWVsLnNsaXBJbmZvICo9IGZhY3RvcjsKICAgICAgICB9IC8vc3dpdGNoIGJldHdlZW4gYWN0aXZlIHJvbGxpbmcgKHRocm90dGxlKSwgYnJha2luZyBhbmQgbm9uLWFjdGl2ZSByb2xsaW5nIGZyaWN0aW9uIChudGhyb3R0bGUvYnJlYWspCgoKICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSA9IDA7CiAgICAgICAgd2hlZWwuc2tpZEluZm8gPSAxOwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICB3aGVlbC5za2lkSW5mbyA9IDE7CiAgICAgICAgICBjb25zdCBtYXhpbXAgPSB3aGVlbC5zdXNwZW5zaW9uRm9yY2UgKiB0aW1lU3RlcCAqIHdoZWVsLmZyaWN0aW9uU2xpcDsKICAgICAgICAgIGNvbnN0IG1heGltcFNpZGUgPSBtYXhpbXA7CiAgICAgICAgICBjb25zdCBtYXhpbXBTcXVhcmVkID0gbWF4aW1wICogbWF4aW1wU2lkZTsKICAgICAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlID0gcm9sbGluZ0ZyaWN0aW9uOyAvL3doZWVsSW5mby5lbmdpbmVGb3JjZSogdGltZVN0ZXA7CgogICAgICAgICAgY29uc3QgeCA9IHdoZWVsLmZvcndhcmRJbXB1bHNlICogZndkRmFjdG9yIC8gd2hlZWwuZm9yd2FyZEFjY2VsZXJhdGlvbjsKICAgICAgICAgIGNvbnN0IHkgPSB3aGVlbC5zaWRlSW1wdWxzZSAqIHNpZGVGYWN0b3IgLyB3aGVlbC5zaWRlQWNjZWxlcmF0aW9uOwogICAgICAgICAgY29uc3QgaW1wdWxzZVNxdWFyZWQgPSB4ICogeCArIHkgKiB5OwogICAgICAgICAgd2hlZWwuc2xpZGluZyA9IGZhbHNlOwoKICAgICAgICAgIGlmIChpbXB1bHNlU3F1YXJlZCA+IG1heGltcFNxdWFyZWQpIHsKICAgICAgICAgICAgdGhpcy5zbGlkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgd2hlZWwuc2xpZGluZyA9IHRydWU7CiAgICAgICAgICAgIGNvbnN0IGZhY3RvciA9IG1heGltcCAvIE1hdGguc3FydChpbXB1bHNlU3F1YXJlZCk7CiAgICAgICAgICAgIHdoZWVsLnNraWRJbmZvICo9IGZhY3RvcjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsaWRpbmcpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CgogICAgICAgICAgaWYgKHdoZWVsLnNpZGVJbXB1bHNlICE9PSAwKSB7CiAgICAgICAgICAgIGlmICh3aGVlbC5za2lkSW5mbyA8IDEpIHsKICAgICAgICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSAqPSB3aGVlbC5za2lkSW5mbzsKICAgICAgICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSAqPSB3aGVlbC5za2lkSW5mbzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBhcHBseSB0aGUgaW1wdWxzZXMKCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOwogICAgICAgIGNvbnN0IHJlbF9wb3MgPSBuZXcgVmVjMygpOwogICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXNCb2R5LnBvc2l0aW9uLCByZWxfcG9zKTsgLy8gY2Fubm9ucyBhcHBseWltcHVsc2UgaXMgdXNpbmcgd29ybGQgY29vcmQgZm9yIHRoZSBwb3NpdGlvbgogICAgICAgIC8vcmVsX3Bvcy5jb3B5KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCk7CgogICAgICAgIGlmICh3aGVlbC5mb3J3YXJkSW1wdWxzZSAhPT0gMCkgewogICAgICAgICAgY29uc3QgaW1wdWxzZSA9IG5ldyBWZWMzKCk7CiAgICAgICAgICBmb3J3YXJkV1NbaV0uc2NhbGUod2hlZWwuZm9yd2FyZEltcHVsc2UsIGltcHVsc2UpOwogICAgICAgICAgY2hhc3Npc0JvZHkuYXBwbHlJbXB1bHNlKGltcHVsc2UsIHJlbF9wb3MpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHdoZWVsLnNpZGVJbXB1bHNlICE9PSAwKSB7CiAgICAgICAgICBjb25zdCBncm91bmRPYmplY3QgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmJvZHk7CiAgICAgICAgICBjb25zdCByZWxfcG9zMiA9IG5ldyBWZWMzKCk7CiAgICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1Yihncm91bmRPYmplY3QucG9zaXRpb24sIHJlbF9wb3MyKTsgLy9yZWxfcG9zMi5jb3B5KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCk7CgogICAgICAgICAgY29uc3Qgc2lkZUltcCA9IG5ldyBWZWMzKCk7CiAgICAgICAgICBheGxlW2ldLnNjYWxlKHdoZWVsLnNpZGVJbXB1bHNlLCBzaWRlSW1wKTsgLy8gU2NhbGUgdGhlIHJlbGF0aXZlIHBvc2l0aW9uIGluIHRoZSB1cCBkaXJlY3Rpb24gd2l0aCByb2xsSW5mbHVlbmNlLgogICAgICAgICAgLy8gSWYgcm9sbEluZmx1ZW5jZSBpcyAxLCB0aGUgaW1wdWxzZSB3aWxsIGJlIGFwcGxpZWQgb24gdGhlIGhpdFBvaW50IChlYXN5IHRvIHJvbGwgb3ZlciksIGlmIGl0IGlzIHplcm8gaXQgd2lsbCBiZSBhcHBsaWVkIGluIHRoZSBzYW1lIHBsYW5lIGFzIHRoZSBjZW50ZXIgb2YgbWFzcyAobm90IGVhc3kgdG8gcm9sbCBvdmVyKS4KCiAgICAgICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb0xvY2FsRnJhbWUocmVsX3BvcywgcmVsX3Bvcyk7CiAgICAgICAgICByZWxfcG9zWyd4eXonW3RoaXMuaW5kZXhVcEF4aXNdXSAqPSB3aGVlbC5yb2xsSW5mbHVlbmNlOwogICAgICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHJlbF9wb3MsIHJlbF9wb3MpOwogICAgICAgICAgY2hhc3Npc0JvZHkuYXBwbHlJbXB1bHNlKHNpZGVJbXAsIHJlbF9wb3MpOyAvL2FwcGx5IGZyaWN0aW9uIGltcHVsc2Ugb24gdGhlIGdyb3VuZAoKICAgICAgICAgIHNpZGVJbXAuc2NhbGUoLTEsIHNpZGVJbXApOwogICAgICAgICAgZ3JvdW5kT2JqZWN0LmFwcGx5SW1wdWxzZShzaWRlSW1wLCByZWxfcG9zMik7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0KCiAgY29uc3QgdG1wVmVjNCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wVmVjNSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wVmVjNiA9IG5ldyBWZWMzKCk7CiAgbmV3IFJheSgpOwogIGNvbnN0IGNhc3RSYXlfcmF5dmVjdG9yID0gbmV3IFZlYzMoKTsKICBjb25zdCBjYXN0UmF5X3RhcmdldCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZGlyZWN0aW9ucyA9IFtuZXcgVmVjMygxLCAwLCAwKSwgbmV3IFZlYzMoMCwgMSwgMCksIG5ldyBWZWMzKDAsIDAsIDEpXTsKICBjb25zdCB1cGRhdGVGcmljdGlvbl9zdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2ogPSBuZXcgVmVjMygpOwogIGNvbnN0IHVwZGF0ZUZyaWN0aW9uX2F4bGUgPSBbXTsKICBjb25zdCB1cGRhdGVGcmljdGlvbl9mb3J3YXJkV1MgPSBbXTsKICBjb25zdCBzaWRlRnJpY3Rpb25TdGlmZm5lc3MyID0gMTsKICBjb25zdCBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwgPSBuZXcgVmVjMygpOwoKICBmdW5jdGlvbiBjYWxjUm9sbGluZ0ZyaWN0aW9uKGJvZHkwLCBib2R5MSwgZnJpY3Rpb25Qb3NXb3JsZCwgZnJpY3Rpb25EaXJlY3Rpb25Xb3JsZCwgbWF4SW1wdWxzZSkgewogICAgbGV0IGoxID0gMDsKICAgIGNvbnN0IGNvbnRhY3RQb3NXb3JsZCA9IGZyaWN0aW9uUG9zV29ybGQ7IC8vIGNvbnN0IHJlbF9wb3MxID0gbmV3IFZlYzMoKTsKICAgIC8vIGNvbnN0IHJlbF9wb3MyID0gbmV3IFZlYzMoKTsKCiAgICBjb25zdCB2ZWwxID0gY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwxOwogICAgY29uc3QgdmVsMiA9IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMjsKICAgIGNvbnN0IHZlbCA9IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsOyAvLyBjb250YWN0UG9zV29ybGQudnN1Yihib2R5MC5wb3NpdGlvbiwgcmVsX3BvczEpOwogICAgLy8gY29udGFjdFBvc1dvcmxkLnZzdWIoYm9keTEucG9zaXRpb24sIHJlbF9wb3MyKTsKCiAgICBib2R5MC5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChjb250YWN0UG9zV29ybGQsIHZlbDEpOwogICAgYm9keTEuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQoY29udGFjdFBvc1dvcmxkLCB2ZWwyKTsKICAgIHZlbDEudnN1Yih2ZWwyLCB2ZWwpOwogICAgY29uc3QgdnJlbCA9IGZyaWN0aW9uRGlyZWN0aW9uV29ybGQuZG90KHZlbCk7CiAgICBjb25zdCBkZW5vbTAgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yKGJvZHkwLCBmcmljdGlvblBvc1dvcmxkLCBmcmljdGlvbkRpcmVjdGlvbldvcmxkKTsKICAgIGNvbnN0IGRlbm9tMSA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3IoYm9keTEsIGZyaWN0aW9uUG9zV29ybGQsIGZyaWN0aW9uRGlyZWN0aW9uV29ybGQpOwogICAgY29uc3QgcmVsYXhhdGlvbiA9IDE7CiAgICBjb25zdCBqYWNEaWFnQUJJbnYgPSByZWxheGF0aW9uIC8gKGRlbm9tMCArIGRlbm9tMSk7IC8vIGNhbGN1bGF0ZSBqIHRoYXQgbW92ZXMgdXMgdG8gemVybyByZWxhdGl2ZSB2ZWxvY2l0eQoKICAgIGoxID0gLXZyZWwgKiBqYWNEaWFnQUJJbnY7CgogICAgaWYgKG1heEltcHVsc2UgPCBqMSkgewogICAgICBqMSA9IG1heEltcHVsc2U7CiAgICB9CgogICAgaWYgKGoxIDwgLW1heEltcHVsc2UpIHsKICAgICAgajEgPSAtbWF4SW1wdWxzZTsKICAgIH0KCiAgICByZXR1cm4gajE7CiAgfQoKICBjb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3IwID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX2MwID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3ZlYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9tID0gbmV3IFZlYzMoKTsKCiAgZnVuY3Rpb24gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcihib2R5LCBwb3MsIG5vcm1hbCkgewogICAgY29uc3QgcjAgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3IwOwogICAgY29uc3QgYzAgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX2MwOwogICAgY29uc3QgdmVjID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl92ZWM7CiAgICBjb25zdCBtID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9tOwogICAgcG9zLnZzdWIoYm9keS5wb3NpdGlvbiwgcjApOwogICAgcjAuY3Jvc3Mobm9ybWFsLCBjMCk7CiAgICBib2R5LmludkluZXJ0aWFXb3JsZC52bXVsdChjMCwgbSk7CiAgICBtLmNyb3NzKHIwLCB2ZWMpOwogICAgcmV0dXJuIGJvZHkuaW52TWFzcyArIG5vcm1hbC5kb3QodmVjKTsKICB9CgogIGNvbnN0IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwyID0gbmV3IFZlYzMoKTsKICBjb25zdCByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbCA9IG5ldyBWZWMzKCk7IC8vIGJpbGF0ZXJhbCBjb25zdHJhaW50IGJldHdlZW4gdHdvIGR5bmFtaWMgb2JqZWN0cwoKICBmdW5jdGlvbiByZXNvbHZlU2luZ2xlQmlsYXRlcmFsKGJvZHkxLCBwb3MxLCBib2R5MiwgcG9zMiwgbm9ybWFsKSB7CiAgICBjb25zdCBub3JtYWxMZW5TcXIgPSBub3JtYWwubGVuZ3RoU3F1YXJlZCgpOwoKICAgIGlmIChub3JtYWxMZW5TcXIgPiAxLjEpIHsKICAgICAgcmV0dXJuIDA7IC8vIG5vIGltcHVsc2UKICAgIH0gLy8gY29uc3QgcmVsX3BvczEgPSBuZXcgVmVjMygpOwogICAgLy8gY29uc3QgcmVsX3BvczIgPSBuZXcgVmVjMygpOwogICAgLy8gcG9zMS52c3ViKGJvZHkxLnBvc2l0aW9uLCByZWxfcG9zMSk7CiAgICAvLyBwb3MyLnZzdWIoYm9keTIucG9zaXRpb24sIHJlbF9wb3MyKTsKCgogICAgY29uc3QgdmVsMSA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMTsKICAgIGNvbnN0IHZlbDIgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDI7CiAgICBjb25zdCB2ZWwgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDsKICAgIGJvZHkxLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHBvczEsIHZlbDEpOwogICAgYm9keTIuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQocG9zMiwgdmVsMik7CiAgICB2ZWwxLnZzdWIodmVsMiwgdmVsKTsKICAgIGNvbnN0IHJlbF92ZWwgPSBub3JtYWwuZG90KHZlbCk7CiAgICBjb25zdCBjb250YWN0RGFtcGluZyA9IDAuMjsKICAgIGNvbnN0IG1hc3NUZXJtID0gMSAvIChib2R5MS5pbnZNYXNzICsgYm9keTIuaW52TWFzcyk7CiAgICBjb25zdCBpbXB1bHNlID0gLWNvbnRhY3REYW1waW5nICogcmVsX3ZlbCAqIG1hc3NUZXJtOwogICAgcmV0dXJuIGltcHVsc2U7CiAgfQogIC8qKgogICAqIFNwaGVyaWNhbCBzaGFwZQogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHJhZGl1cyA9IDEKICAgKiAgICAgY29uc3Qgc3BoZXJlU2hhcGUgPSBuZXcgQ0FOTk9OLlNwaGVyZShyYWRpdXMpCiAgICogICAgIGNvbnN0IHNwaGVyZUJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogc3BoZXJlU2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShzcGhlcmVCb2R5KQogICAqLwoKCiAgY2xhc3MgU3BoZXJlIGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiBUaGUgcmFkaXVzIG9mIHRoZSBzcGhlcmUuCiAgICAgKi8KCiAgICAvKioKICAgICAqCiAgICAgKiBAcGFyYW0gcmFkaXVzIFRoZSByYWRpdXMgb2YgdGhlIHNwaGVyZSwgYSBub24tbmVnYXRpdmUgbnVtYmVyLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihyYWRpdXMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLlNQSEVSRQogICAgICB9KTsKICAgICAgdGhpcy5yYWRpdXMgPSB2b2lkIDA7CiAgICAgIHRoaXMucmFkaXVzID0gcmFkaXVzICE9PSB1bmRlZmluZWQgPyByYWRpdXMgOiAxLjA7CgogICAgICBpZiAodGhpcy5yYWRpdXMgPCAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc3BoZXJlIHJhZGl1cyBjYW5ub3QgYmUgbmVnYXRpdmUuJyk7CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgIH0KICAgIC8qKiBjYWxjdWxhdGVMb2NhbEluZXJ0aWEgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCBJID0gMi4wICogbWFzcyAqIHRoaXMucmFkaXVzICogdGhpcy5yYWRpdXMgLyA1LjA7CiAgICAgIHRhcmdldC54ID0gSTsKICAgICAgdGFyZ2V0LnkgPSBJOwogICAgICB0YXJnZXQueiA9IEk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKiogdm9sdW1lICovCgoKICAgIHZvbHVtZSgpIHsKICAgICAgcmV0dXJuIDQuMCAqIE1hdGguUEkgKiBNYXRoLnBvdyh0aGlzLnJhZGl1cywgMykgLyAzLjA7CiAgICB9CgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSB0aGlzLnJhZGl1czsKICAgIH0KCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICBjb25zdCByID0gdGhpcy5yYWRpdXM7CiAgICAgIGNvbnN0IGF4ZXMgPSBbJ3gnLCAneScsICd6J107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF4ZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBheCA9IGF4ZXNbaV07CiAgICAgICAgbWluW2F4XSA9IHBvc1theF0gLSByOwogICAgICAgIG1heFtheF0gPSBwb3NbYXhdICsgcjsKICAgICAgfQogICAgfQoKICB9CgogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKCiAgbmV3IFZlYzMoKTsgLy8gVGVtcCB2ZWN0b3JzIGZvciBjYWxjdWxhdGlvbgoKICBuZXcgVmVjMygpOyAvLyBSZWxhdGl2ZSB2ZWxvY2l0eQoKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgLyoqCiAgICogQ3lsaW5kZXIgY2xhc3MuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcmFkaXVzVG9wID0gMC41CiAgICogICAgIGNvbnN0IHJhZGl1c0JvdHRvbSA9IDAuNQogICAqICAgICBjb25zdCBoZWlnaHQgPSAyCiAgICogICAgIGNvbnN0IG51bVNlZ21lbnRzID0gMTIKICAgKiAgICAgY29uc3QgY3lsaW5kZXJTaGFwZSA9IG5ldyBDQU5OT04uQ3lsaW5kZXIocmFkaXVzVG9wLCByYWRpdXNCb3R0b20sIGhlaWdodCwgbnVtU2VnbWVudHMpCiAgICogICAgIGNvbnN0IGN5bGluZGVyQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBjeWxpbmRlclNoYXBlIH0pCiAgICogICAgIHdvcmxkLmFkZEJvZHkoY3lsaW5kZXJCb2R5KQogICAqLwoKICBjbGFzcyBDeWxpbmRlciBleHRlbmRzIENvbnZleFBvbHloZWRyb24gewogICAgLyoqIFRoZSByYWRpdXMgb2YgdGhlIHRvcCBvZiB0aGUgQ3lsaW5kZXIuICovCgogICAgLyoqIFRoZSByYWRpdXMgb2YgdGhlIGJvdHRvbSBvZiB0aGUgQ3lsaW5kZXIuICovCgogICAgLyoqIFRoZSBoZWlnaHQgb2YgdGhlIEN5bGluZGVyLiAqLwoKICAgIC8qKiBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIHRvIGJ1aWxkIHRoZSBjeWxpbmRlciBvdXQgb2YuICovCgogICAgLyoqCiAgICAgKiBAcGFyYW0gcmFkaXVzVG9wIFRoZSByYWRpdXMgb2YgdGhlIHRvcCBvZiB0aGUgQ3lsaW5kZXIuCiAgICAgKiBAcGFyYW0gcmFkaXVzQm90dG9tIFRoZSByYWRpdXMgb2YgdGhlIGJvdHRvbSBvZiB0aGUgQ3lsaW5kZXIuCiAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIEN5bGluZGVyLgogICAgICogQHBhcmFtIG51bVNlZ21lbnRzIFRoZSBudW1iZXIgb2Ygc2VnbWVudHMgdG8gYnVpbGQgdGhlIGN5bGluZGVyIG91dCBvZi4KICAgICAqLwogICAgY29uc3RydWN0b3IocmFkaXVzVG9wLCByYWRpdXNCb3R0b20sIGhlaWdodCwgbnVtU2VnbWVudHMpIHsKICAgICAgaWYgKHJhZGl1c1RvcCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmFkaXVzVG9wID0gMTsKICAgICAgfQoKICAgICAgaWYgKHJhZGl1c0JvdHRvbSA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmFkaXVzQm90dG9tID0gMTsKICAgICAgfQoKICAgICAgaWYgKGhlaWdodCA9PT0gdm9pZCAwKSB7CiAgICAgICAgaGVpZ2h0ID0gMTsKICAgICAgfQoKICAgICAgaWYgKG51bVNlZ21lbnRzID09PSB2b2lkIDApIHsKICAgICAgICBudW1TZWdtZW50cyA9IDg7CiAgICAgIH0KCiAgICAgIGlmIChyYWRpdXNUb3AgPCAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgY3lsaW5kZXIgcmFkaXVzVG9wIGNhbm5vdCBiZSBuZWdhdGl2ZS4nKTsKICAgICAgfQoKICAgICAgaWYgKHJhZGl1c0JvdHRvbSA8IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjeWxpbmRlciByYWRpdXNCb3R0b20gY2Fubm90IGJlIG5lZ2F0aXZlLicpOwogICAgICB9CgogICAgICBjb25zdCBOID0gbnVtU2VnbWVudHM7CiAgICAgIGNvbnN0IHZlcnRpY2VzID0gW107CiAgICAgIGNvbnN0IGF4ZXMgPSBbXTsKICAgICAgY29uc3QgZmFjZXMgPSBbXTsKICAgICAgY29uc3QgYm90dG9tZmFjZSA9IFtdOwogICAgICBjb25zdCB0b3BmYWNlID0gW107CiAgICAgIGNvbnN0IGNvcyA9IE1hdGguY29zOwogICAgICBjb25zdCBzaW4gPSBNYXRoLnNpbjsgLy8gRmlyc3QgYm90dG9tIHBvaW50CgogICAgICB2ZXJ0aWNlcy5wdXNoKG5ldyBWZWMzKC1yYWRpdXNCb3R0b20gKiBzaW4oMCksIC1oZWlnaHQgKiAwLjUsIHJhZGl1c0JvdHRvbSAqIGNvcygwKSkpOwogICAgICBib3R0b21mYWNlLnB1c2goMCk7IC8vIEZpcnN0IHRvcCBwb2ludAoKICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzVG9wICogc2luKDApLCBoZWlnaHQgKiAwLjUsIHJhZGl1c1RvcCAqIGNvcygwKSkpOwogICAgICB0b3BmYWNlLnB1c2goMSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE47IGkrKykgewogICAgICAgIGNvbnN0IHRoZXRhID0gMiAqIE1hdGguUEkgLyBOICogKGkgKyAxKTsKICAgICAgICBjb25zdCB0aGV0YU4gPSAyICogTWF0aC5QSSAvIE4gKiAoaSArIDAuNSk7CgogICAgICAgIGlmIChpIDwgTiAtIDEpIHsKICAgICAgICAgIC8vIEJvdHRvbQogICAgICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzQm90dG9tICogc2luKHRoZXRhKSwgLWhlaWdodCAqIDAuNSwgcmFkaXVzQm90dG9tICogY29zKHRoZXRhKSkpOwogICAgICAgICAgYm90dG9tZmFjZS5wdXNoKDIgKiBpICsgMik7IC8vIFRvcAoKICAgICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c1RvcCAqIHNpbih0aGV0YSksIGhlaWdodCAqIDAuNSwgcmFkaXVzVG9wICogY29zKHRoZXRhKSkpOwogICAgICAgICAgdG9wZmFjZS5wdXNoKDIgKiBpICsgMyk7IC8vIEZhY2UKCiAgICAgICAgICBmYWNlcy5wdXNoKFsyICogaSwgMiAqIGkgKyAxLCAyICogaSArIDMsIDIgKiBpICsgMl0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBmYWNlcy5wdXNoKFsyICogaSwgMiAqIGkgKyAxLCAxLCAwXSk7IC8vIENvbm5lY3QKICAgICAgICB9IC8vIEF4aXM6IHdlIGNhbiBjdXQgb2ZmIGhhbGYgb2YgdGhlbSBpZiB3ZSBoYXZlIGV2ZW4gbnVtYmVyIG9mIHNlZ21lbnRzCgoKICAgICAgICBpZiAoTiAlIDIgPT09IDEgfHwgaSA8IE4gLyAyKSB7CiAgICAgICAgICBheGVzLnB1c2gobmV3IFZlYzMoLXNpbih0aGV0YU4pLCAwLCBjb3ModGhldGFOKSkpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZmFjZXMucHVzaChib3R0b21mYWNlKTsKICAgICAgYXhlcy5wdXNoKG5ldyBWZWMzKDAsIDEsIDApKTsgLy8gUmVvcmRlciB0b3AgZmFjZQoKICAgICAgY29uc3QgdGVtcCA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3BmYWNlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGVtcC5wdXNoKHRvcGZhY2VbdG9wZmFjZS5sZW5ndGggLSBpIC0gMV0pOwogICAgICB9CgogICAgICBmYWNlcy5wdXNoKHRlbXApOwogICAgICBzdXBlcih7CiAgICAgICAgdmVydGljZXMsCiAgICAgICAgZmFjZXMsCiAgICAgICAgYXhlcwogICAgICB9KTsKICAgICAgdGhpcy5yYWRpdXNUb3AgPSB2b2lkIDA7CiAgICAgIHRoaXMucmFkaXVzQm90dG9tID0gdm9pZCAwOwogICAgICB0aGlzLmhlaWdodCA9IHZvaWQgMDsKICAgICAgdGhpcy5udW1TZWdtZW50cyA9IHZvaWQgMDsKICAgICAgdGhpcy50eXBlID0gU2hhcGUudHlwZXMuQ1lMSU5ERVI7CiAgICAgIHRoaXMucmFkaXVzVG9wID0gcmFkaXVzVG9wOwogICAgICB0aGlzLnJhZGl1c0JvdHRvbSA9IHJhZGl1c0JvdHRvbTsKICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CiAgICAgIHRoaXMubnVtU2VnbWVudHMgPSBudW1TZWdtZW50czsKICAgIH0KCiAgfQogIC8qKgogICAqIFBhcnRpY2xlIHNoYXBlLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHBhcnRpY2xlU2hhcGUgPSBuZXcgQ0FOTk9OLlBhcnRpY2xlKCkKICAgKiAgICAgY29uc3QgcGFydGljbGVCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsgbWFzczogMSwgc2hhcGU6IHBhcnRpY2xlU2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShwYXJ0aWNsZUJvZHkpCiAgICovCgoKICBjbGFzcyBQYXJ0aWNsZSBleHRlbmRzIFNoYXBlIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuUEFSVElDTEUKICAgICAgfSk7CiAgICB9CiAgICAvKioKICAgICAqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYQogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNldCgwLCAwLCAwKTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiAwOwogICAgfQoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gMDsKICAgIH0KCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICAvLyBHZXQgZWFjaCBheGlzIG1heAogICAgICBtaW4uY29weShwb3MpOwogICAgICBtYXguY29weShwb3MpOwogICAgfQoKICB9CiAgLyoqCiAgICogQSBwbGFuZSwgZmFjaW5nIGluIHRoZSBaIGRpcmVjdGlvbi4gVGhlIHBsYW5lIGhhcyBpdHMgc3VyZmFjZSBhdCB6PTAgYW5kIGV2ZXJ5dGhpbmcgYmVsb3cgej0wIGlzIGFzc3VtZWQgdG8gYmUgc29saWQgcGxhbmUuIFRvIG1ha2UgdGhlIHBsYW5lIGZhY2UgaW4gc29tZSBvdGhlciBkaXJlY3Rpb24gdGhhbiB6LCB5b3UgbXVzdCBwdXQgaXQgaW5zaWRlIGEgQm9keSBhbmQgcm90YXRlIHRoYXQgYm9keS4gU2VlIHRoZSBkZW1vcy4KICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCBwbGFuZVNoYXBlID0gbmV3IENBTk5PTi5QbGFuZSgpCiAgICogICAgIGNvbnN0IHBsYW5lQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDAsIHNoYXBlOiAgcGxhbmVTaGFwZSB9KQogICAqICAgICBwbGFuZUJvZHkucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIoLU1hdGguUEkgLyAyLCAwLCAwKSAvLyBtYWtlIGl0IGZhY2UgdXAKICAgKiAgICAgd29ybGQuYWRkQm9keShwbGFuZUJvZHkpCiAgICovCgoKICBjbGFzcyBQbGFuZSBleHRlbmRzIFNoYXBlIHsKICAgIC8qKiB3b3JsZE5vcm1hbCAqLwoKICAgIC8qKiB3b3JsZE5vcm1hbE5lZWRzVXBkYXRlICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLlBMQU5FCiAgICAgIH0pOyAvLyBXb3JsZCBvcmllbnRlZCBub3JtYWwKCiAgICAgIHRoaXMud29ybGROb3JtYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMud29ybGROb3JtYWxOZWVkc1VwZGF0ZSA9IHZvaWQgMDsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IHZvaWQgMDsKICAgICAgdGhpcy53b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMud29ybGROb3JtYWxOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBOdW1iZXIuTUFYX1ZBTFVFOwogICAgfQogICAgLyoqIGNvbXB1dGVXb3JsZE5vcm1hbCAqLwoKCiAgICBjb21wdXRlV29ybGROb3JtYWwocXVhdCkgewogICAgICBjb25zdCBuID0gdGhpcy53b3JsZE5vcm1hbDsKICAgICAgbi5zZXQoMCwgMCwgMSk7CiAgICAgIHF1YXQudm11bHQobiwgbik7CiAgICAgIHRoaXMud29ybGROb3JtYWxOZWVkc1VwZGF0ZSA9IGZhbHNlOwogICAgfQoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiAoLy8gVGhlIHBsYW5lIGlzIGluZmluaXRlLi4uCiAgICAgICAgTnVtYmVyLk1BWF9WQUxVRQogICAgICApOwogICAgfQoKICAgIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7CiAgICAgIC8vIFRoZSBwbGFuZSBBQUJCIGlzIGluZmluaXRlLCBleGNlcHQgaWYgdGhlIG5vcm1hbCBpcyBwb2ludGluZyBhbG9uZyBhbnkgYXhpcwogICAgICB0ZW1wTm9ybWFsLnNldCgwLCAwLCAxKTsgLy8gRGVmYXVsdCBwbGFuZSBub3JtYWwgaXMgegoKICAgICAgcXVhdC52bXVsdCh0ZW1wTm9ybWFsLCB0ZW1wTm9ybWFsKTsKICAgICAgY29uc3QgbWF4VmFsID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgICAgbWluLnNldCgtbWF4VmFsLCAtbWF4VmFsLCAtbWF4VmFsKTsKICAgICAgbWF4LnNldChtYXhWYWwsIG1heFZhbCwgbWF4VmFsKTsKCiAgICAgIGlmICh0ZW1wTm9ybWFsLnggPT09IDEpIHsKICAgICAgICBtYXgueCA9IHBvcy54OwogICAgICB9IGVsc2UgaWYgKHRlbXBOb3JtYWwueCA9PT0gLTEpIHsKICAgICAgICBtaW4ueCA9IHBvcy54OwogICAgICB9CgogICAgICBpZiAodGVtcE5vcm1hbC55ID09PSAxKSB7CiAgICAgICAgbWF4LnkgPSBwb3MueTsKICAgICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnkgPT09IC0xKSB7CiAgICAgICAgbWluLnkgPSBwb3MueTsKICAgICAgfQoKICAgICAgaWYgKHRlbXBOb3JtYWwueiA9PT0gMSkgewogICAgICAgIG1heC56ID0gcG9zLno7CiAgICAgIH0gZWxzZSBpZiAodGVtcE5vcm1hbC56ID09PSAtMSkgewogICAgICAgIG1pbi56ID0gcG9zLno7CiAgICAgIH0KICAgIH0KCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE51bWJlci5NQVhfVkFMVUU7CiAgICB9CgogIH0KCiAgY29uc3QgdGVtcE5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgLyoqCiAgICogSGVpZ2h0ZmllbGQgc2hhcGUgY2xhc3MuIEhlaWdodCBkYXRhIGlzIGdpdmVuIGFzIGFuIGFycmF5LiBUaGVzZSBkYXRhIHBvaW50cyBhcmUgc3ByZWFkIG91dCBldmVubHkgd2l0aCBhIGdpdmVuIGRpc3RhbmNlLgogICAqIEB0b2RvIFNob3VsZCBiZSBwb3NzaWJsZSB0byB1c2UgYWxvbmcgYWxsIGF4ZXMsIG5vdCBqdXN0IHkKICAgKiBAdG9kbyBzaG91bGQgYmUgcG9zc2libGUgdG8gc2NhbGUgYWxvbmcgYWxsIGF4ZXMKICAgKiBAdG9kbyBSZWZhY3RvciBlbGVtZW50U2l6ZSB0byBlbGVtZW50U2l6ZVggYW5kIGVsZW1lbnRTaXplWQogICAqCiAgICogQGV4YW1wbGUKICAgKiAgICAgLy8gR2VuZXJhdGUgc29tZSBoZWlnaHQgZGF0YSAoeS12YWx1ZXMpLgogICAqICAgICBjb25zdCBkYXRhID0gW10KICAgKiAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDAwOyBpKyspIHsKICAgKiAgICAgICAgIGNvbnN0IHkgPSAwLjUgKiBNYXRoLmNvcygwLjIgKiBpKQogICAqICAgICAgICAgZGF0YS5wdXNoKHkpCiAgICogICAgIH0KICAgKgogICAqICAgICAvLyBDcmVhdGUgdGhlIGhlaWdodGZpZWxkIHNoYXBlCiAgICogICAgIGNvbnN0IGhlaWdodGZpZWxkU2hhcGUgPSBuZXcgQ0FOTk9OLkhlaWdodGZpZWxkKGRhdGEsIHsKICAgKiAgICAgICAgIGVsZW1lbnRTaXplOiAxIC8vIERpc3RhbmNlIGJldHdlZW4gdGhlIGRhdGEgcG9pbnRzIGluIFggYW5kIFkgZGlyZWN0aW9ucwogICAqICAgICB9KQogICAqICAgICBjb25zdCBoZWlnaHRmaWVsZEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBzaGFwZTogaGVpZ2h0ZmllbGRTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGhlaWdodGZpZWxkQm9keSkKICAgKi8KCiAgY2xhc3MgSGVpZ2h0ZmllbGQgZXh0ZW5kcyBTaGFwZSB7CiAgICAvKioKICAgICAqIEFuIGFycmF5IG9mIG51bWJlcnMsIG9yIGhlaWdodCB2YWx1ZXMsIHRoYXQgYXJlIHNwcmVhZCBvdXQgYWxvbmcgdGhlIHggYXhpcy4KICAgICAqLwoKICAgIC8qKgogICAgICogTWF4IHZhbHVlIG9mIHRoZSBkYXRhIHBvaW50cyBpbiB0aGUgZGF0YSBhcnJheS4KICAgICAqLwoKICAgIC8qKgogICAgICogTWluaW11bSB2YWx1ZSBvZiB0aGUgZGF0YSBwb2ludHMgaW4gdGhlIGRhdGEgYXJyYXkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdvcmxkIHNwYWNpbmcgYmV0d2VlbiB0aGUgZGF0YSBwb2ludHMgaW4gWCBhbmQgWSBkaXJlY3Rpb24uCiAgICAgKiBAdG9kbyBlbGVtZW50U2l6ZVggYW5kIFkKICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogQGRlZmF1bHQgdHJ1ZQogICAgICovCgogICAgLyoqCiAgICAgKiBAcGFyYW0gZGF0YSBBbiBhcnJheSBvZiBudW1iZXJzLCBvciBoZWlnaHQgdmFsdWVzLCB0aGF0IGFyZSBzcHJlYWQgb3V0IGFsb25nIHRoZSB4IGF4aXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGRhdGEsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHsKICAgICAgICBtYXhWYWx1ZTogbnVsbCwKICAgICAgICBtaW5WYWx1ZTogbnVsbCwKICAgICAgICBlbGVtZW50U2l6ZTogMQogICAgICB9KTsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxECiAgICAgIH0pOwogICAgICB0aGlzLmRhdGEgPSB2b2lkIDA7CiAgICAgIHRoaXMubWF4VmFsdWUgPSB2b2lkIDA7CiAgICAgIHRoaXMubWluVmFsdWUgPSB2b2lkIDA7CiAgICAgIHRoaXMuZWxlbWVudFNpemUgPSB2b2lkIDA7CiAgICAgIHRoaXMuY2FjaGVFbmFibGVkID0gdm9pZCAwOwogICAgICB0aGlzLnBpbGxhckNvbnZleCA9IHZvaWQgMDsKICAgICAgdGhpcy5waWxsYXJPZmZzZXQgPSB2b2lkIDA7CiAgICAgIHRoaXMuX2NhY2hlZFBpbGxhcnMgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGF0YSA9IGRhdGE7CiAgICAgIHRoaXMubWF4VmFsdWUgPSBvcHRpb25zLm1heFZhbHVlOwogICAgICB0aGlzLm1pblZhbHVlID0gb3B0aW9ucy5taW5WYWx1ZTsKICAgICAgdGhpcy5lbGVtZW50U2l6ZSA9IG9wdGlvbnMuZWxlbWVudFNpemU7CgogICAgICBpZiAob3B0aW9ucy5taW5WYWx1ZSA9PT0gbnVsbCkgewogICAgICAgIHRoaXMudXBkYXRlTWluVmFsdWUoKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMubWF4VmFsdWUgPT09IG51bGwpIHsKICAgICAgICB0aGlzLnVwZGF0ZU1heFZhbHVlKCk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2FjaGVFbmFibGVkID0gdHJ1ZTsKICAgICAgdGhpcy5waWxsYXJDb252ZXggPSBuZXcgQ29udmV4UG9seWhlZHJvbigpOwogICAgICB0aGlzLnBpbGxhck9mZnNldCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsgLy8gImlfal9pc1VwcGVyIiA9PiB7IGNvbnZleDogLi4uLCBvZmZzZXQ6IC4uLiB9CiAgICAgIC8vIGZvciBleGFtcGxlOgogICAgICAvLyBfY2FjaGVkUGlsbGFyc1siMF8yXzEiXQoKICAgICAgdGhpcy5fY2FjaGVkUGlsbGFycyA9IHt9OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxsIHdoZW5ldmVyIHlvdSBjaGFuZ2UgdGhlIGRhdGEgYXJyYXkuCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICB0aGlzLl9jYWNoZWRQaWxsYXJzID0ge307CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYG1pblZhbHVlYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZU1pblZhbHVlKCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBsZXQgbWluVmFsdWUgPSBkYXRhWzBdWzBdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZGF0YVtpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3QgdiA9IGRhdGFbaV1bal07CgogICAgICAgICAgaWYgKHYgPCBtaW5WYWx1ZSkgewogICAgICAgICAgICBtaW5WYWx1ZSA9IHY7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLm1pblZhbHVlID0gbWluVmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYG1heFZhbHVlYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZU1heFZhbHVlKCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBsZXQgbWF4VmFsdWUgPSBkYXRhWzBdWzBdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZGF0YVtpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3QgdiA9IGRhdGFbaV1bal07CgogICAgICAgICAgaWYgKHYgPiBtYXhWYWx1ZSkgewogICAgICAgICAgICBtYXhWYWx1ZSA9IHY7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLm1heFZhbHVlID0gbWF4VmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgaGVpZ2h0IHZhbHVlIGF0IGFuIGluZGV4LiBEb24ndCBmb3JnZXQgdG8gdXBkYXRlIG1heFZhbHVlIGFuZCBtaW5WYWx1ZSBhZnRlciB5b3UncmUgZG9uZS4KICAgICAqLwoKCiAgICBzZXRIZWlnaHRWYWx1ZUF0SW5kZXgoeGksIHlpLCB2YWx1ZSkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBkYXRhW3hpXVt5aV0gPSB2YWx1ZTsgLy8gSW52YWxpZGF0ZSBjYWNoZQoKICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZmFsc2UpOwoKICAgICAgaWYgKHhpID4gMCkgewogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSAtIDEsIHlpLCB0cnVlKTsKICAgICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGkgLSAxLCB5aSwgZmFsc2UpOwogICAgICB9CgogICAgICBpZiAoeWkgPiAwKSB7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSAtIDEsIHRydWUpOwogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWkgLSAxLCBmYWxzZSk7CiAgICAgIH0KCiAgICAgIGlmICh5aSA+IDAgJiYgeGkgPiAwKSB7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpIC0gMSwgeWkgLSAxLCB0cnVlKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgbWF4L21pbiBpbiBhIHJlY3RhbmdsZSBpbiB0aGUgbWF0cml4IGRhdGEKICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgdG8gc3RvcmUgdGhlIHJlc3VsdHMgaW4uCiAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHQgYXJyYXksIGlmIGl0IHdhcyBwYXNzZWQgaW4uIE1pbmltdW0gd2lsbCBiZSBhdCBwb3NpdGlvbiAwIGFuZCBtYXggYXQgMS4KICAgICAqLwoKCiAgICBnZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gW107CiAgICAgIH0KCiAgICAgIC8vIEdldCBtYXggYW5kIG1pbiBvZiB0aGUgZGF0YQogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOyAvLyBTZXQgZmlyc3QgdmFsdWUKCiAgICAgIGxldCBtYXggPSB0aGlzLm1pblZhbHVlOwoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDw9IGlNYXhYOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPD0gaU1heFk7IGorKykgewogICAgICAgICAgY29uc3QgaGVpZ2h0ID0gZGF0YVtpXVtqXTsKCiAgICAgICAgICBpZiAoaGVpZ2h0ID4gbWF4KSB7CiAgICAgICAgICAgIG1heCA9IGhlaWdodDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJlc3VsdFswXSA9IHRoaXMubWluVmFsdWU7CiAgICAgIHJlc3VsdFsxXSA9IG1heDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBpbmRleCBvZiBhIGxvY2FsIHBvc2l0aW9uIG9uIHRoZSBoZWlnaHRmaWVsZC4gVGhlIGluZGV4ZXMgaW5kaWNhdGUgdGhlIHJlY3RhbmdsZXMsIHNvIGlmIHlvdXIgdGVycmFpbiBpcyBtYWRlIG9mIE4geCBOIGhlaWdodCBkYXRhIHBvaW50cywgeW91IHdpbGwgaGF2ZSByZWN0YW5nbGUgaW5kZXhlcyByYW5naW5nIGZyb20gMCB0byBOLTEuCiAgICAgKiBAcGFyYW0gcmVzdWx0IFR3by1lbGVtZW50IGFycmF5CiAgICAgKiBAcGFyYW0gY2xhbXAgSWYgdGhlIHBvc2l0aW9uIHNob3VsZCBiZSBjbGFtcGVkIHRvIHRoZSBoZWlnaHRmaWVsZCBlZGdlLgogICAgICovCgoKICAgIGdldEluZGV4T2ZQb3NpdGlvbih4LCB5LCByZXN1bHQsIGNsYW1wKSB7CiAgICAgIC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdAogICAgICBjb25zdCB3ID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgbGV0IHhpID0gTWF0aC5mbG9vcih4IC8gdyk7CiAgICAgIGxldCB5aSA9IE1hdGguZmxvb3IoeSAvIHcpOwogICAgICByZXN1bHRbMF0gPSB4aTsKICAgICAgcmVzdWx0WzFdID0geWk7CgogICAgICBpZiAoY2xhbXApIHsKICAgICAgICAvLyBDbGFtcCBpbmRleCB0byBlZGdlcwogICAgICAgIGlmICh4aSA8IDApIHsKICAgICAgICAgIHhpID0gMDsKICAgICAgICB9CgogICAgICAgIGlmICh5aSA8IDApIHsKICAgICAgICAgIHlpID0gMDsKICAgICAgICB9CgogICAgICAgIGlmICh4aSA+PSBkYXRhLmxlbmd0aCAtIDEpIHsKICAgICAgICAgIHhpID0gZGF0YS5sZW5ndGggLSAxOwogICAgICAgIH0KCiAgICAgICAgaWYgKHlpID49IGRhdGFbMF0ubGVuZ3RoIC0gMSkgewogICAgICAgICAgeWkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgICAgfQogICAgICB9IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW4KCgogICAgICBpZiAoeGkgPCAwIHx8IHlpIDwgMCB8fCB4aSA+PSBkYXRhLmxlbmd0aCAtIDEgfHwgeWkgPj0gZGF0YVswXS5sZW5ndGggLSAxKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBnZXRUcmlhbmdsZUF0KHgsIHksIGVkZ2VDbGFtcCwgYSwgYiwgYykgewogICAgICBjb25zdCBpZHggPSBnZXRIZWlnaHRBdF9pZHg7CiAgICAgIHRoaXMuZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIGlkeCwgZWRnZUNsYW1wKTsKICAgICAgbGV0IHhpID0gaWR4WzBdOwogICAgICBsZXQgeWkgPSBpZHhbMV07CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CgogICAgICBpZiAoZWRnZUNsYW1wKSB7CiAgICAgICAgeGkgPSBNYXRoLm1pbihkYXRhLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHhpKSk7CiAgICAgICAgeWkgPSBNYXRoLm1pbihkYXRhWzBdLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHlpKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgbG93ZXJEaXN0MiA9ICh4IC8gZWxlbWVudFNpemUgLSB4aSkgKiogMiArICh5IC8gZWxlbWVudFNpemUgLSB5aSkgKiogMjsKICAgICAgY29uc3QgdXBwZXJEaXN0MiA9ICh4IC8gZWxlbWVudFNpemUgLSAoeGkgKyAxKSkgKiogMiArICh5IC8gZWxlbWVudFNpemUgLSAoeWkgKyAxKSkgKiogMjsKICAgICAgY29uc3QgdXBwZXIgPSBsb3dlckRpc3QyID4gdXBwZXJEaXN0MjsKICAgICAgdGhpcy5nZXRUcmlhbmdsZSh4aSwgeWksIHVwcGVyLCBhLCBiLCBjKTsKICAgICAgcmV0dXJuIHVwcGVyOwogICAgfQoKICAgIGdldE5vcm1hbEF0KHgsIHksIGVkZ2VDbGFtcCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IGEgPSBnZXROb3JtYWxBdF9hOwogICAgICBjb25zdCBiID0gZ2V0Tm9ybWFsQXRfYjsKICAgICAgY29uc3QgYyA9IGdldE5vcm1hbEF0X2M7CiAgICAgIGNvbnN0IGUwID0gZ2V0Tm9ybWFsQXRfZTA7CiAgICAgIGNvbnN0IGUxID0gZ2V0Tm9ybWFsQXRfZTE7CiAgICAgIHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpOwogICAgICBiLnZzdWIoYSwgZTApOwogICAgICBjLnZzdWIoYSwgZTEpOwogICAgICBlMC5jcm9zcyhlMSwgcmVzdWx0KTsKICAgICAgcmVzdWx0Lm5vcm1hbGl6ZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYW4gQUFCQiBvZiBhIHNxdWFyZSBpbiB0aGUgaGVpZ2h0ZmllbGQKICAgICAqIEBwYXJhbSB4aQogICAgICogQHBhcmFtIHlpCiAgICAgKiBAcGFyYW0gcmVzdWx0CiAgICAgKi8KCgogICAgZ2V0QWFiYkF0SW5kZXgoeGksIHlpLCBfcmVmKSB7CiAgICAgIGxldCB7CiAgICAgICAgbG93ZXJCb3VuZCwKICAgICAgICB1cHBlckJvdW5kCiAgICAgIH0gPSBfcmVmOwogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7CiAgICAgIGxvd2VyQm91bmQuc2V0KHhpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSk7CiAgICAgIHVwcGVyQm91bmQuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aSArIDFdKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBoZWlnaHQgaW4gdGhlIGhlaWdodGZpZWxkIGF0IGEgZ2l2ZW4gcG9zaXRpb24KICAgICAqLwoKCiAgICBnZXRIZWlnaHRBdCh4LCB5LCBlZGdlQ2xhbXApIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3QgYSA9IGdldEhlaWdodEF0X2E7CiAgICAgIGNvbnN0IGIgPSBnZXRIZWlnaHRBdF9iOwogICAgICBjb25zdCBjID0gZ2V0SGVpZ2h0QXRfYzsKICAgICAgY29uc3QgaWR4ID0gZ2V0SGVpZ2h0QXRfaWR4OwogICAgICB0aGlzLmdldEluZGV4T2ZQb3NpdGlvbih4LCB5LCBpZHgsIGVkZ2VDbGFtcCk7CiAgICAgIGxldCB4aSA9IGlkeFswXTsKICAgICAgbGV0IHlpID0gaWR4WzFdOwoKICAgICAgaWYgKGVkZ2VDbGFtcCkgewogICAgICAgIHhpID0gTWF0aC5taW4oZGF0YS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB4aSkpOwogICAgICAgIHlpID0gTWF0aC5taW4oZGF0YVswXS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB5aSkpOwogICAgICB9CgogICAgICBjb25zdCB1cHBlciA9IHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpOwogICAgICBiYXJ5Y2VudHJpY1dlaWdodHMoeCwgeSwgYS54LCBhLnksIGIueCwgYi55LCBjLngsIGMueSwgZ2V0SGVpZ2h0QXRfd2VpZ2h0cyk7CiAgICAgIGNvbnN0IHcgPSBnZXRIZWlnaHRBdF93ZWlnaHRzOwoKICAgICAgaWYgKHVwcGVyKSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgcmV0dXJuIGRhdGFbeGkgKyAxXVt5aSArIDFdICogdy54ICsgZGF0YVt4aV1beWkgKyAxXSAqIHcueSArIGRhdGFbeGkgKyAxXVt5aV0gKiB3Lno7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgcmV0dXJuIGRhdGFbeGldW3lpXSAqIHcueCArIGRhdGFbeGkgKyAxXVt5aV0gKiB3LnkgKyBkYXRhW3hpXVt5aSArIDFdICogdy56OwogICAgICB9CiAgICB9CgogICAgZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgcmV0dXJuIHhpICsgIl8iICsgeWkgKyAiXyIgKyAoZ2V0VXBwZXJUcmlhbmdsZSA/IDEgOiAwKTsKICAgIH0KCiAgICBnZXRDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZFBpbGxhcnNbdGhpcy5nZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5KHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSldOwogICAgfQoKICAgIHNldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSwgY29udmV4LCBvZmZzZXQpIHsKICAgICAgdGhpcy5fY2FjaGVkUGlsbGFyc1t0aGlzLmdldENhY2hlQ29udmV4VHJpYW5nbGVQaWxsYXJLZXkoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKV0gPSB7CiAgICAgICAgY29udmV4LAogICAgICAgIG9mZnNldAogICAgICB9OwogICAgfQoKICAgIGNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKSB7CiAgICAgIGRlbGV0ZSB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgdHJpYW5nbGUgZnJvbSB0aGUgaGVpZ2h0ZmllbGQKICAgICAqLwoKCiAgICBnZXRUcmlhbmdsZSh4aSwgeWksIHVwcGVyLCBhLCBiLCBjKSB7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTsKCiAgICAgIGlmICh1cHBlcikgewogICAgICAgIC8vIFRvcCB0cmlhbmdsZSB2ZXJ0cwogICAgICAgIGEuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aSArIDFdKTsKICAgICAgICBiLnNldCh4aSAqIGVsZW1lbnRTaXplLCAoeWkgKyAxKSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdKTsKICAgICAgICBjLnNldCgoeGkgKyAxKSAqIGVsZW1lbnRTaXplLCB5aSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBUb3AgdHJpYW5nbGUgdmVydHMKICAgICAgICBhLnNldCh4aSAqIGVsZW1lbnRTaXplLCB5aSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aV0pOwogICAgICAgIGIuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aV0pOwogICAgICAgIGMuc2V0KHhpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIHRyaWFuZ2xlIGluIHRoZSB0ZXJyYWluIGluIHRoZSBmb3JtIG9mIGEgdHJpYW5ndWxhciBjb252ZXggc2hhcGUuCiAgICAgKi8KCgogICAgZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKSB7CiAgICAgIGxldCByZXN1bHQgPSB0aGlzLnBpbGxhckNvbnZleDsKICAgICAgbGV0IG9mZnNldFJlc3VsdCA9IHRoaXMucGlsbGFyT2Zmc2V0OwoKICAgICAgaWYgKHRoaXMuY2FjaGVFbmFibGVkKSB7CiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKTsKCiAgICAgICAgaWYgKGRhdGEpIHsKICAgICAgICAgIHRoaXMucGlsbGFyQ29udmV4ID0gZGF0YS5jb252ZXg7CiAgICAgICAgICB0aGlzLnBpbGxhck9mZnNldCA9IGRhdGEub2Zmc2V0OwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgcmVzdWx0ID0gbmV3IENvbnZleFBvbHloZWRyb24oKTsKICAgICAgICBvZmZzZXRSZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICAgIHRoaXMucGlsbGFyQ29udmV4ID0gcmVzdWx0OwogICAgICAgIHRoaXMucGlsbGFyT2Zmc2V0ID0gb2Zmc2V0UmVzdWx0OwogICAgICB9CgogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7CiAgICAgIGNvbnN0IGZhY2VzID0gcmVzdWx0LmZhY2VzOyAvLyBSZXVzZSB2ZXJ0cyBpZiBwb3NzaWJsZQoKICAgICAgcmVzdWx0LnZlcnRpY2VzLmxlbmd0aCA9IDY7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykgewogICAgICAgIGlmICghcmVzdWx0LnZlcnRpY2VzW2ldKSB7CiAgICAgICAgICByZXN1bHQudmVydGljZXNbaV0gPSBuZXcgVmVjMygpOwogICAgICAgIH0KICAgICAgfSAvLyBSZXVzZSBmYWNlcyBpZiBwb3NzaWJsZQoKCiAgICAgIGZhY2VzLmxlbmd0aCA9IDU7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykgewogICAgICAgIGlmICghZmFjZXNbaV0pIHsKICAgICAgICAgIGZhY2VzW2ldID0gW107CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCB2ZXJ0cyA9IHJlc3VsdC52ZXJ0aWNlczsKICAgICAgY29uc3QgaCA9IChNYXRoLm1pbihkYXRhW3hpXVt5aV0sIGRhdGFbeGkgKyAxXVt5aV0sIGRhdGFbeGldW3lpICsgMV0sIGRhdGFbeGkgKyAxXVt5aSArIDFdKSAtIHRoaXMubWluVmFsdWUpIC8gMiArIHRoaXMubWluVmFsdWU7CgogICAgICBpZiAoIWdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgICAvLyBDZW50ZXIgb2YgdGhlIHRyaWFuZ2xlIHBpbGxhciAtIGFsbCBwb2x5Z29ucyBhcmUgZ2l2ZW4gcmVsYXRpdmUgdG8gdGhpcyBvbmUKICAgICAgICBvZmZzZXRSZXN1bHQuc2V0KCh4aSArIDAuMjUpICogZWxlbWVudFNpemUsIC8vIHNvcnQgb2YgY2VudGVyIG9mIGEgdHJpYW5nbGUKICAgICAgICAoeWkgKyAwLjI1KSAqIGVsZW1lbnRTaXplLCBoIC8vIHZlcnRpY2FsIGNlbnRlcgogICAgICAgICk7IC8vIFRvcCB0cmlhbmdsZSB2ZXJ0cwoKICAgICAgICB2ZXJ0c1swXS5zZXQoLTAuMjUgKiBlbGVtZW50U2l6ZSwgLTAuMjUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWldIC0gaCk7CiAgICAgICAgdmVydHNbMV0uc2V0KDAuNzUgKiBlbGVtZW50U2l6ZSwgLTAuMjUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpXSAtIGgpOwogICAgICAgIHZlcnRzWzJdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAwLjc1ICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0gLSBoKTsgLy8gYm90dG9tIHRyaWFuZ2xlIHZlcnRzCgogICAgICAgIHZlcnRzWzNdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsKICAgICAgICB2ZXJ0c1s0XS5zZXQoMC43NSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsKICAgICAgICB2ZXJ0c1s1XS5zZXQoLTAuMjUgKiBlbGVtZW50U2l6ZSwgMC43NSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsgLy8gdG9wIHRyaWFuZ2xlCgogICAgICAgIGZhY2VzWzBdWzBdID0gMDsKICAgICAgICBmYWNlc1swXVsxXSA9IDE7CiAgICAgICAgZmFjZXNbMF1bMl0gPSAyOyAvLyBib3R0b20gdHJpYW5nbGUKCiAgICAgICAgZmFjZXNbMV1bMF0gPSA1OwogICAgICAgIGZhY2VzWzFdWzFdID0gNDsKICAgICAgICBmYWNlc1sxXVsyXSA9IDM7IC8vIC14IGZhY2luZyBxdWFkCgogICAgICAgIGZhY2VzWzJdWzBdID0gMDsKICAgICAgICBmYWNlc1syXVsxXSA9IDI7CiAgICAgICAgZmFjZXNbMl1bMl0gPSA1OwogICAgICAgIGZhY2VzWzJdWzNdID0gMzsgLy8gLXkgZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbM11bMF0gPSAxOwogICAgICAgIGZhY2VzWzNdWzFdID0gMDsKICAgICAgICBmYWNlc1szXVsyXSA9IDM7CiAgICAgICAgZmFjZXNbM11bM10gPSA0OyAvLyAreHkgZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbNF1bMF0gPSA0OwogICAgICAgIGZhY2VzWzRdWzFdID0gNTsKICAgICAgICBmYWNlc1s0XVsyXSA9IDI7CiAgICAgICAgZmFjZXNbNF1bM10gPSAxOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIENlbnRlciBvZiB0aGUgdHJpYW5nbGUgcGlsbGFyIC0gYWxsIHBvbHlnb25zIGFyZSBnaXZlbiByZWxhdGl2ZSB0byB0aGlzIG9uZQogICAgICAgIG9mZnNldFJlc3VsdC5zZXQoKHhpICsgMC43NSkgKiBlbGVtZW50U2l6ZSwgLy8gc29ydCBvZiBjZW50ZXIgb2YgYSB0cmlhbmdsZQogICAgICAgICh5aSArIDAuNzUpICogZWxlbWVudFNpemUsIGggLy8gdmVydGljYWwgY2VudGVyCiAgICAgICAgKTsgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCgogICAgICAgIHZlcnRzWzBdLnNldCgwLjI1ICogZWxlbWVudFNpemUsIDAuMjUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpICsgMV0gLSBoKTsKICAgICAgICB2ZXJ0c1sxXS5zZXQoLTAuNzUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdIC0gaCk7CiAgICAgICAgdmVydHNbMl0uc2V0KDAuMjUgKiBlbGVtZW50U2l6ZSwgLTAuNzUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpXSAtIGgpOyAvLyBib3R0b20gdHJpYW5nbGUgdmVydHMKCiAgICAgICAgdmVydHNbM10uc2V0KDAuMjUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsKICAgICAgICB2ZXJ0c1s0XS5zZXQoLTAuNzUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsKICAgICAgICB2ZXJ0c1s1XS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAtMC43NSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsgLy8gVG9wIHRyaWFuZ2xlCgogICAgICAgIGZhY2VzWzBdWzBdID0gMDsKICAgICAgICBmYWNlc1swXVsxXSA9IDE7CiAgICAgICAgZmFjZXNbMF1bMl0gPSAyOyAvLyBib3R0b20gdHJpYW5nbGUKCiAgICAgICAgZmFjZXNbMV1bMF0gPSA1OwogICAgICAgIGZhY2VzWzFdWzFdID0gNDsKICAgICAgICBmYWNlc1sxXVsyXSA9IDM7IC8vICt4IGZhY2luZyBxdWFkCgogICAgICAgIGZhY2VzWzJdWzBdID0gMjsKICAgICAgICBmYWNlc1syXVsxXSA9IDU7CiAgICAgICAgZmFjZXNbMl1bMl0gPSAzOwogICAgICAgIGZhY2VzWzJdWzNdID0gMDsgLy8gK3kgZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbM11bMF0gPSAzOwogICAgICAgIGZhY2VzWzNdWzFdID0gNDsKICAgICAgICBmYWNlc1szXVsyXSA9IDE7CiAgICAgICAgZmFjZXNbM11bM10gPSAwOyAvLyAteHkgZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbNF1bMF0gPSAxOwogICAgICAgIGZhY2VzWzRdWzFdID0gNDsKICAgICAgICBmYWNlc1s0XVsyXSA9IDU7CiAgICAgICAgZmFjZXNbNF1bM10gPSAyOwogICAgICB9CgogICAgICByZXN1bHQuY29tcHV0ZU5vcm1hbHMoKTsKICAgICAgcmVzdWx0LmNvbXB1dGVFZGdlcygpOwogICAgICByZXN1bHQudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgICAgdGhpcy5zZXRDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUsIHJlc3VsdCwgb2Zmc2V0UmVzdWx0KTsKICAgIH0KCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRhcmdldC5zZXQoMCwgMCwgMCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gKC8vIFRoZSB0ZXJyYWluIGlzIGluZmluaXRlCiAgICAgICAgTnVtYmVyLk1BWF9WQUxVRQogICAgICApOwogICAgfQoKICAgIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7CiAgICAgIC8qKiBAVE9ETyBkbyBpdCBwcm9wZXJseSAqLwogICAgICBtaW4uc2V0KC1OdW1iZXIuTUFYX1ZBTFVFLCAtTnVtYmVyLk1BWF9WQUxVRSwgLU51bWJlci5NQVhfVkFMVUUpOwogICAgICBtYXguc2V0KE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUsIE51bWJlci5NQVhfVkFMVUUpOwogICAgfQoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICAvLyBVc2UgdGhlIGJvdW5kaW5nIGJveCBvZiB0aGUgbWluL21heCB2YWx1ZXMKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3QgcyA9IHRoaXMuZWxlbWVudFNpemU7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBuZXcgVmVjMyhkYXRhLmxlbmd0aCAqIHMsIGRhdGFbMF0ubGVuZ3RoICogcywgTWF0aC5tYXgoTWF0aC5hYnModGhpcy5tYXhWYWx1ZSksIE1hdGguYWJzKHRoaXMubWluVmFsdWUpKSkubGVuZ3RoKCk7CiAgICB9CiAgICAvKioKICAgICAqIFNldHMgdGhlIGhlaWdodCB2YWx1ZXMgZnJvbSBhbiBpbWFnZS4gQ3VycmVudGx5IG9ubHkgc3VwcG9ydGVkIGluIGJyb3dzZXIuCiAgICAgKi8KCgogICAgc2V0SGVpZ2h0c0Zyb21JbWFnZShpbWFnZSwgc2NhbGUpIHsKICAgICAgY29uc3QgewogICAgICAgIHgsCiAgICAgICAgeiwKICAgICAgICB5CiAgICAgIH0gPSBzY2FsZTsKICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICAgIGNhbnZhcy53aWR0aCA9IGltYWdlLndpZHRoOwogICAgICBjYW52YXMuaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0OwogICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7CiAgICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwKTsKICAgICAgY29uc3QgaW1hZ2VEYXRhID0gY29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgaW1hZ2Uud2lkdGgsIGltYWdlLmhlaWdodCk7CiAgICAgIGNvbnN0IG1hdHJpeCA9IHRoaXMuZGF0YTsKICAgICAgbWF0cml4Lmxlbmd0aCA9IDA7CiAgICAgIHRoaXMuZWxlbWVudFNpemUgPSBNYXRoLmFicyh4KSAvIGltYWdlRGF0YS53aWR0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW1hZ2VEYXRhLmhlaWdodDsgaSsrKSB7CiAgICAgICAgY29uc3Qgcm93ID0gW107CgogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaW1hZ2VEYXRhLndpZHRoOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGEgPSBpbWFnZURhdGEuZGF0YVsoaSAqIGltYWdlRGF0YS5oZWlnaHQgKyBqKSAqIDRdOwogICAgICAgICAgY29uc3QgYiA9IGltYWdlRGF0YS5kYXRhWyhpICogaW1hZ2VEYXRhLmhlaWdodCArIGopICogNCArIDFdOwogICAgICAgICAgY29uc3QgYyA9IGltYWdlRGF0YS5kYXRhWyhpICogaW1hZ2VEYXRhLmhlaWdodCArIGopICogNCArIDJdOwogICAgICAgICAgY29uc3QgaGVpZ2h0ID0gKGEgKyBiICsgYykgLyA0IC8gMjU1ICogejsKCiAgICAgICAgICBpZiAoeCA8IDApIHsKICAgICAgICAgICAgcm93LnB1c2goaGVpZ2h0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJvdy51bnNoaWZ0KGhlaWdodCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoeSA8IDApIHsKICAgICAgICAgIG1hdHJpeC51bnNoaWZ0KHJvdyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG1hdHJpeC5wdXNoKHJvdyk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZU1heFZhbHVlKCk7CiAgICAgIHRoaXMudXBkYXRlTWluVmFsdWUoKTsKICAgICAgdGhpcy51cGRhdGUoKTsKICAgIH0KCiAgfQoKICBjb25zdCBnZXRIZWlnaHRBdF9pZHggPSBbXTsKICBjb25zdCBnZXRIZWlnaHRBdF93ZWlnaHRzID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXRIZWlnaHRBdF9hID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXRIZWlnaHRBdF9iID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXRIZWlnaHRBdF9jID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXROb3JtYWxBdF9hID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXROb3JtYWxBdF9iID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXROb3JtYWxBdF9jID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXROb3JtYWxBdF9lMCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfZTEgPSBuZXcgVmVjMygpOyAvLyBmcm9tIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0JhcnljZW50cmljX2Nvb3JkaW5hdGVfc3lzdGVtCgogIGZ1bmN0aW9uIGJhcnljZW50cmljV2VpZ2h0cyh4LCB5LCBheCwgYXksIGJ4LCBieSwgY3gsIGN5LCByZXN1bHQpIHsKICAgIHJlc3VsdC54ID0gKChieSAtIGN5KSAqICh4IC0gY3gpICsgKGN4IC0gYngpICogKHkgLSBjeSkpIC8gKChieSAtIGN5KSAqIChheCAtIGN4KSArIChjeCAtIGJ4KSAqIChheSAtIGN5KSk7CiAgICByZXN1bHQueSA9ICgoY3kgLSBheSkgKiAoeCAtIGN4KSArIChheCAtIGN4KSAqICh5IC0gY3kpKSAvICgoYnkgLSBjeSkgKiAoYXggLSBjeCkgKyAoY3ggLSBieCkgKiAoYXkgLSBjeSkpOwogICAgcmVzdWx0LnogPSAxIC0gcmVzdWx0LnggLSByZXN1bHQueTsKICB9CiAgLyoqCiAgICogT2N0cmVlTm9kZQogICAqLwoKCiAgY2xhc3MgT2N0cmVlTm9kZSB7CiAgICAvKiogVGhlIHJvb3Qgbm9kZSAqLwoKICAgIC8qKiBCb3VuZGFyeSBvZiB0aGlzIG5vZGUgKi8KCiAgICAvKiogQ29udGFpbmVkIGRhdGEgYXQgdGhlIGN1cnJlbnQgbm9kZSBsZXZlbCAqLwoKICAgIC8qKiBDaGlsZHJlbiB0byB0aGlzIG5vZGUgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5yb290ID0gdm9pZCAwOwogICAgICB0aGlzLmFhYmIgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGF0YSA9IHZvaWQgMDsKICAgICAgdGhpcy5jaGlsZHJlbiA9IHZvaWQgMDsKICAgICAgdGhpcy5yb290ID0gb3B0aW9ucy5yb290IHx8IG51bGw7CiAgICAgIHRoaXMuYWFiYiA9IG9wdGlvbnMuYWFiYiA/IG9wdGlvbnMuYWFiYi5jbG9uZSgpIDogbmV3IEFBQkIoKTsKICAgICAgdGhpcy5kYXRhID0gW107CiAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTsKICAgIH0KICAgIC8qKgogICAgICogcmVzZXQKICAgICAqLwoKCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5jaGlsZHJlbi5sZW5ndGggPSB0aGlzLmRhdGEubGVuZ3RoID0gMDsKICAgIH0KICAgIC8qKgogICAgICogSW5zZXJ0IGRhdGEgaW50byB0aGlzIG5vZGUKICAgICAqIEByZXR1cm4gVHJ1ZSBpZiBzdWNjZXNzZnVsLCBvdGhlcndpc2UgZmFsc2UKICAgICAqLwoKCiAgICBpbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsKSB7CiAgICAgIGlmIChsZXZlbCA9PT0gdm9pZCAwKSB7CiAgICAgICAgbGV2ZWwgPSAwOwogICAgICB9CgogICAgICBjb25zdCBub2RlRGF0YSA9IHRoaXMuZGF0YTsgLy8gSWdub3JlIG9iamVjdHMgdGhhdCBkbyBub3QgYmVsb25nIGluIHRoaXMgbm9kZQoKICAgICAgaWYgKCF0aGlzLmFhYmIuY29udGFpbnMoYWFiYikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7IC8vIG9iamVjdCBjYW5ub3QgYmUgYWRkZWQKICAgICAgfQoKICAgICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuOwogICAgICBjb25zdCBtYXhEZXB0aCA9IHRoaXMubWF4RGVwdGggfHwgdGhpcy5yb290Lm1heERlcHRoOwoKICAgICAgaWYgKGxldmVsIDwgbWF4RGVwdGgpIHsKICAgICAgICAvLyBTdWJkaXZpZGUgaWYgdGhlcmUgYXJlIG5vIGNoaWxkcmVuIHlldAogICAgICAgIGxldCBzdWJkaXZpZGVkID0gZmFsc2U7CgogICAgICAgIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLnN1YmRpdmlkZSgpOwogICAgICAgICAgc3ViZGl2aWRlZCA9IHRydWU7CiAgICAgICAgfSAvLyBhZGQgdG8gd2hpY2hldmVyIG5vZGUgd2lsbCBhY2NlcHQgaXQKCgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHsKICAgICAgICAgIGlmIChjaGlsZHJlbltpXS5pbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsICsgMSkpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoc3ViZGl2aWRlZCkgewogICAgICAgICAgLy8gTm8gY2hpbGRyZW4gYWNjZXB0ZWQhIE1pZ2h0IGFzIHdlbGwganVzdCByZW1vdmUgZW0gc2luY2UgdGhleSBjb250YWluIG5vbmUKICAgICAgICAgIGNoaWxkcmVuLmxlbmd0aCA9IDA7CiAgICAgICAgfQogICAgICB9IC8vIFRvbyBkZWVwLCBvciBjaGlsZHJlbiBkaWRudCB3YW50IGl0LiBhZGQgaXQgaW4gY3VycmVudCBub2RlCgoKICAgICAgbm9kZURhdGEucHVzaChlbGVtZW50RGF0YSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDcmVhdGUgOCBlcXVhbGx5IHNpemVkIGNoaWxkcmVuIG5vZGVzIGFuZCBwdXQgdGhlbSBpbiB0aGUgYGNoaWxkcmVuYCBhcnJheS4KICAgICAqLwoKCiAgICBzdWJkaXZpZGUoKSB7CiAgICAgIGNvbnN0IGFhYmIgPSB0aGlzLmFhYmI7CiAgICAgIGNvbnN0IGwgPSBhYWJiLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSBhYWJiLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbjsKICAgICAgY2hpbGRyZW4ucHVzaChuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMCwgMCwgMCkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDAsIDApCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygxLCAxLCAwKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMSwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDEpCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygwLCAwLCAxKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMCwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDApCiAgICAgICAgfSkKICAgICAgfSkpOwogICAgICB1LnZzdWIobCwgaGFsZkRpYWdvbmFsKTsKICAgICAgaGFsZkRpYWdvbmFsLnNjYWxlKDAuNSwgaGFsZkRpYWdvbmFsKTsKICAgICAgY29uc3Qgcm9vdCA9IHRoaXMucm9vdCB8fCB0aGlzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07IC8vIFNldCBjdXJyZW50IG5vZGUgYXMgcm9vdAoKICAgICAgICBjaGlsZC5yb290ID0gcm9vdDsgLy8gQ29tcHV0ZSBib3VuZHMKCiAgICAgICAgY29uc3QgbG93ZXJCb3VuZCA9IGNoaWxkLmFhYmIubG93ZXJCb3VuZDsKICAgICAgICBsb3dlckJvdW5kLnggKj0gaGFsZkRpYWdvbmFsLng7CiAgICAgICAgbG93ZXJCb3VuZC55ICo9IGhhbGZEaWFnb25hbC55OwogICAgICAgIGxvd2VyQm91bmQueiAqPSBoYWxmRGlhZ29uYWwuejsKICAgICAgICBsb3dlckJvdW5kLnZhZGQobCwgbG93ZXJCb3VuZCk7IC8vIFVwcGVyIGJvdW5kIGlzIGFsd2F5cyBsb3dlciBib3VuZCArIGhhbGZEaWFnb25hbAoKICAgICAgICBsb3dlckJvdW5kLnZhZGQoaGFsZkRpYWdvbmFsLCBjaGlsZC5hYWJiLnVwcGVyQm91bmQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgd2l0aGluIGFuIEFBQkIKICAgICAqIEByZXR1cm4gVGhlICJyZXN1bHQiIG9iamVjdAogICAgICovCgoKICAgIGFhYmJRdWVyeShhYWJiLCByZXN1bHQpIHsKICAgICAgdGhpcy5kYXRhOyAvLyBhYm9ydCBpZiB0aGUgcmFuZ2UgZG9lcyBub3QgaW50ZXJzZWN0IHRoaXMgbm9kZQogICAgICAvLyBpZiAoIXRoaXMuYWFiYi5vdmVybGFwcyhhYWJiKSl7CiAgICAgIC8vICAgICByZXR1cm4gcmVzdWx0OwogICAgICAvLyB9CiAgICAgIC8vIEFkZCBvYmplY3RzIGF0IHRoaXMgbGV2ZWwKICAgICAgLy8gQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocmVzdWx0LCBub2RlRGF0YSk7CiAgICAgIC8vIEFkZCBjaGlsZCBkYXRhCiAgICAgIC8vIEB0b2RvIHVud3JhcCByZWN1cnNpb24gaW50byBhIHF1ZXVlIC8gbG9vcCwgdGhhdCdzIGZhc3RlciBpbiBKUwoKICAgICAgdGhpcy5jaGlsZHJlbjsgLy8gZm9yIChsZXQgaSA9IDAsIE4gPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgIC8vICAgICBjaGlsZHJlbltpXS5hYWJiUXVlcnkoYWFiYiwgcmVzdWx0KTsKICAgICAgLy8gfQoKICAgICAgY29uc3QgcXVldWUgPSBbdGhpc107CgogICAgICB3aGlsZSAocXVldWUubGVuZ3RoKSB7CiAgICAgICAgY29uc3Qgbm9kZSA9IHF1ZXVlLnBvcCgpOwoKICAgICAgICBpZiAobm9kZS5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7CiAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShyZXN1bHQsIG5vZGUuZGF0YSk7CiAgICAgICAgfQoKICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShxdWV1ZSwgbm9kZS5jaGlsZHJlbik7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgaW50ZXJzZWN0ZWQgYnkgYSByYXkuCiAgICAgKiBAcmV0dXJuIFRoZSAicmVzdWx0IiBvYmplY3QKICAgICAqLwoKCiAgICByYXlRdWVyeShyYXksIHRyZWVUcmFuc2Zvcm0sIHJlc3VsdCkgewogICAgICAvLyBVc2UgYWFiYiBxdWVyeSBmb3Igbm93LgoKICAgICAgLyoqIEB0b2RvIGltcGxlbWVudCByZWFsIHJheSBxdWVyeSB3aGljaCBuZWVkcyBsZXNzIGxvb2t1cHMgKi8KICAgICAgcmF5LmdldEFBQkIodG1wQUFCQik7CiAgICAgIHRtcEFBQkIudG9Mb2NhbEZyYW1lKHRyZWVUcmFuc2Zvcm0sIHRtcEFBQkIpOwogICAgICB0aGlzLmFhYmJRdWVyeSh0bXBBQUJCLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiByZW1vdmVFbXB0eU5vZGVzCiAgICAgKi8KCgogICAgcmVtb3ZlRW1wdHlOb2RlcygpIHsKICAgICAgZm9yIChsZXQgaSA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICB0aGlzLmNoaWxkcmVuW2ldLnJlbW92ZUVtcHR5Tm9kZXMoKTsKCiAgICAgICAgaWYgKCF0aGlzLmNoaWxkcmVuW2ldLmNoaWxkcmVuLmxlbmd0aCAmJiAhdGhpcy5jaGlsZHJlbltpXS5kYXRhLmxlbmd0aCkgewogICAgICAgICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoaSwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0KICAvKioKICAgKiBPY3RyZWUKICAgKi8KCgogIGNsYXNzIE9jdHJlZSBleHRlbmRzIE9jdHJlZU5vZGUgewogICAgLyoqCiAgICAgKiBNYXhpbXVtIHN1YmRpdmlzaW9uIGRlcHRoCiAgICAgKiBAZGVmYXVsdCA4CiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBhYWJiIFRoZSB0b3RhbCBBQUJCIG9mIHRoZSB0cmVlCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGFhYmIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgc3VwZXIoewogICAgICAgIHJvb3Q6IG51bGwsCiAgICAgICAgYWFiYgogICAgICB9KTsKICAgICAgdGhpcy5tYXhEZXB0aCA9IHZvaWQgMDsKICAgICAgdGhpcy5tYXhEZXB0aCA9IHR5cGVvZiBvcHRpb25zLm1heERlcHRoICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4RGVwdGggOiA4OwogICAgfQoKICB9CgogIGNvbnN0IGhhbGZEaWFnb25hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wQUFCQiA9IG5ldyBBQUJCKCk7CiAgLyoqCiAgICogVHJpbWVzaC4KICAgKiBAZXhhbXBsZQogICAqICAgICAvLyBIb3cgdG8gbWFrZSBhIG1lc2ggd2l0aCBhIHNpbmdsZSB0cmlhbmdsZQogICAqICAgICBjb25zdCB2ZXJ0aWNlcyA9IFsKICAgKiAgICAgICAgIDAsIDAsIDAsIC8vIHZlcnRleCAwCiAgICogICAgICAgICAxLCAwLCAwLCAvLyB2ZXJ0ZXggMQogICAqICAgICAgICAgMCwgMSwgMCAgLy8gdmVydGV4IDIKICAgKiAgICAgXQogICAqICAgICBjb25zdCBpbmRpY2VzID0gWwogICAqICAgICAgICAgMCwgMSwgMiAgLy8gdHJpYW5nbGUgMAogICAqICAgICBdCiAgICogICAgIGNvbnN0IHRyaW1lc2hTaGFwZSA9IG5ldyBDQU5OT04uVHJpbWVzaCh2ZXJ0aWNlcywgaW5kaWNlcykKICAgKi8KCiAgY2xhc3MgVHJpbWVzaCBleHRlbmRzIFNoYXBlIHsKICAgIC8qKgogICAgICogdmVydGljZXMKICAgICAqLwoKICAgIC8qKgogICAgICogQXJyYXkgb2YgaW50ZWdlcnMsIGluZGljYXRpbmcgd2hpY2ggdmVydGljZXMgZWFjaCB0cmlhbmdsZSBjb25zaXN0cyBvZi4gVGhlIGxlbmd0aCBvZiB0aGlzIGFycmF5IGlzIHRodXMgMyB0aW1lcyB0aGUgbnVtYmVyIG9mIHRyaWFuZ2xlcy4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIG5vcm1hbHMgZGF0YS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGxvY2FsIEFBQkIgb2YgdGhlIG1lc2guCiAgICAgKi8KCiAgICAvKioKICAgICAqIFJlZmVyZW5jZXMgdG8gdmVydGV4IHBhaXJzLCBtYWtpbmcgdXAgYWxsIHVuaXF1ZSBlZGdlcyBpbiB0aGUgdHJpbWVzaC4KICAgICAqLwoKICAgIC8qKgogICAgICogTG9jYWwgc2NhbGluZyBvZiB0aGUgbWVzaC4gVXNlIC5zZXRTY2FsZSgpIHRvIHNldCBpdC4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGluZGV4ZWQgdHJpYW5nbGVzLiBVc2UgLnVwZGF0ZVRyZWUoKSB0byB1cGRhdGUgaXQuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKHZlcnRpY2VzLCBpbmRpY2VzKSB7CiAgICAgIHN1cGVyKHsKICAgICAgICB0eXBlOiBTaGFwZS50eXBlcy5UUklNRVNICiAgICAgIH0pOwogICAgICB0aGlzLnZlcnRpY2VzID0gdm9pZCAwOwogICAgICB0aGlzLmluZGljZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMubm9ybWFscyA9IHZvaWQgMDsKICAgICAgdGhpcy5hYWJiID0gdm9pZCAwOwogICAgICB0aGlzLmVkZ2VzID0gdm9pZCAwOwogICAgICB0aGlzLnNjYWxlID0gdm9pZCAwOwogICAgICB0aGlzLnRyZWUgPSB2b2lkIDA7CiAgICAgIHRoaXMudmVydGljZXMgPSBuZXcgRmxvYXQzMkFycmF5KHZlcnRpY2VzKTsKICAgICAgdGhpcy5pbmRpY2VzID0gbmV3IEludDE2QXJyYXkoaW5kaWNlcyk7CiAgICAgIHRoaXMubm9ybWFscyA9IG5ldyBGbG9hdDMyQXJyYXkoaW5kaWNlcy5sZW5ndGgpOwogICAgICB0aGlzLmFhYmIgPSBuZXcgQUFCQigpOwogICAgICB0aGlzLmVkZ2VzID0gbnVsbDsKICAgICAgdGhpcy5zY2FsZSA9IG5ldyBWZWMzKDEsIDEsIDEpOwogICAgICB0aGlzLnRyZWUgPSBuZXcgT2N0cmVlKCk7CiAgICAgIHRoaXMudXBkYXRlRWRnZXMoKTsKICAgICAgdGhpcy51cGRhdGVOb3JtYWxzKCk7CiAgICAgIHRoaXMudXBkYXRlQUFCQigpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7CiAgICAgIHRoaXMudXBkYXRlVHJlZSgpOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGVUcmVlCiAgICAgKi8KCgogICAgdXBkYXRlVHJlZSgpIHsKICAgICAgY29uc3QgdHJlZSA9IHRoaXMudHJlZTsKICAgICAgdHJlZS5yZXNldCgpOwogICAgICB0cmVlLmFhYmIuY29weSh0aGlzLmFhYmIpOwogICAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7IC8vIFRoZSBsb2NhbCBtZXNoIEFBQkIgaXMgc2NhbGVkLCBidXQgdGhlIG9jdHJlZSBBQUJCIHNob3VsZCBiZSB1bnNjYWxlZAoKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueCAqPSAxIC8gc2NhbGUueDsKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueSAqPSAxIC8gc2NhbGUueTsKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueiAqPSAxIC8gc2NhbGUuejsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueCAqPSAxIC8gc2NhbGUueDsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueSAqPSAxIC8gc2NhbGUueTsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueiAqPSAxIC8gc2NhbGUuejsgLy8gSW5zZXJ0IGFsbCB0cmlhbmdsZXMKCiAgICAgIGNvbnN0IHRyaWFuZ2xlQUFCQiA9IG5ldyBBQUJCKCk7CiAgICAgIGNvbnN0IGEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBiID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBvaW50cyA9IFthLCBiLCBjXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIC8vdGhpcy5nZXRUcmlhbmdsZVZlcnRpY2VzKGksIGEsIGIsIGMpOwogICAgICAgIC8vIEdldCB1bnNjYWxlZCB0cmlhbmdsZSB2ZXJ0cwogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CgogICAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpM10sIGEpOwoKICAgICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAxXSwgYik7CgogICAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDJdLCBjKTsKCiAgICAgICAgdHJpYW5nbGVBQUJCLnNldEZyb21Qb2ludHMocG9pbnRzKTsKICAgICAgICB0cmVlLmluc2VydCh0cmlhbmdsZUFBQkIsIGkpOwogICAgICB9CgogICAgICB0cmVlLnJlbW92ZUVtcHR5Tm9kZXMoKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRyaWFuZ2xlcyBpbiBhIGxvY2FsIEFBQkIgZnJvbSB0aGUgdHJpbWVzaC4KICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgb2YgaW50ZWdlcnMsIHJlZmVyZW5jaW5nIHRoZSBxdWVyaWVkIHRyaWFuZ2xlcy4KICAgICAqLwoKCiAgICBnZXRUcmlhbmdsZXNJbkFBQkIoYWFiYiwgcmVzdWx0KSB7CiAgICAgIHVuc2NhbGVkQUFCQi5jb3B5KGFhYmIpOyAvLyBTY2FsZSBpdCB0byBsb2NhbAoKICAgICAgY29uc3Qgc2NhbGUgPSB0aGlzLnNjYWxlOwogICAgICBjb25zdCBpc3ggPSBzY2FsZS54OwogICAgICBjb25zdCBpc3kgPSBzY2FsZS55OwogICAgICBjb25zdCBpc3ogPSBzY2FsZS56OwogICAgICBjb25zdCBsID0gdW5zY2FsZWRBQUJCLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB1bnNjYWxlZEFBQkIudXBwZXJCb3VuZDsKICAgICAgbC54IC89IGlzeDsKICAgICAgbC55IC89IGlzeTsKICAgICAgbC56IC89IGlzejsKICAgICAgdS54IC89IGlzeDsKICAgICAgdS55IC89IGlzeTsKICAgICAgdS56IC89IGlzejsKICAgICAgcmV0dXJuIHRoaXMudHJlZS5hYWJiUXVlcnkodW5zY2FsZWRBQUJCLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBzZXRTY2FsZQogICAgICovCgoKICAgIHNldFNjYWxlKHNjYWxlKSB7CiAgICAgIGNvbnN0IHdhc1VuaWZvcm0gPSB0aGlzLnNjYWxlLnggPT09IHRoaXMuc2NhbGUueSAmJiB0aGlzLnNjYWxlLnkgPT09IHRoaXMuc2NhbGUuejsKICAgICAgY29uc3QgaXNVbmlmb3JtID0gc2NhbGUueCA9PT0gc2NhbGUueSAmJiBzY2FsZS55ID09PSBzY2FsZS56OwoKICAgICAgaWYgKCEod2FzVW5pZm9ybSAmJiBpc1VuaWZvcm0pKSB7CiAgICAgICAgLy8gTm9uLXVuaWZvcm0gc2NhbGluZy4gTmVlZCB0byB1cGRhdGUgbm9ybWFscy4KICAgICAgICB0aGlzLnVwZGF0ZU5vcm1hbHMoKTsKICAgICAgfQoKICAgICAgdGhpcy5zY2FsZS5jb3B5KHNjYWxlKTsKICAgICAgdGhpcy51cGRhdGVBQUJCKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFscyBvZiB0aGUgZmFjZXMuIFdpbGwgc2F2ZSBpbiB0aGUgYC5ub3JtYWxzYCBhcnJheS4KICAgICAqLwoKCiAgICB1cGRhdGVOb3JtYWxzKCkgewogICAgICBjb25zdCBuID0gY29tcHV0ZU5vcm1hbHNfbjsgLy8gR2VuZXJhdGUgbm9ybWFscwoKICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMubm9ybWFsczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgICAgY29uc3QgYSA9IHRoaXMuaW5kaWNlc1tpM107CiAgICAgICAgY29uc3QgYiA9IHRoaXMuaW5kaWNlc1tpMyArIDFdOwogICAgICAgIGNvbnN0IGMgPSB0aGlzLmluZGljZXNbaTMgKyAyXTsKICAgICAgICB0aGlzLmdldFZlcnRleChhLCB2YSk7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoYiwgdmIpOwogICAgICAgIHRoaXMuZ2V0VmVydGV4KGMsIHZjKTsKICAgICAgICBUcmltZXNoLmNvbXB1dGVOb3JtYWwodmIsIHZhLCB2Yywgbik7CiAgICAgICAgbm9ybWFsc1tpM10gPSBuLng7CiAgICAgICAgbm9ybWFsc1tpMyArIDFdID0gbi55OwogICAgICAgIG5vcm1hbHNbaTMgKyAyXSA9IG4uejsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIGAuZWRnZXNgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlRWRnZXMoKSB7CiAgICAgIGNvbnN0IGVkZ2VzID0ge307CgogICAgICBjb25zdCBhZGQgPSAoYSwgYikgPT4gewogICAgICAgIGNvbnN0IGtleSA9IGEgPCBiID8gYSArICJfIiArIGIgOiBiICsgIl8iICsgYTsKICAgICAgICBlZGdlc1trZXldID0gdHJ1ZTsKICAgICAgfTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgICAgY29uc3QgYSA9IHRoaXMuaW5kaWNlc1tpM107CiAgICAgICAgY29uc3QgYiA9IHRoaXMuaW5kaWNlc1tpMyArIDFdOwogICAgICAgIGNvbnN0IGMgPSB0aGlzLmluZGljZXNbaTMgKyAyXTsKICAgICAgICBhZGQoYSwgYik7CiAgICAgICAgYWRkKGIsIGMpOwogICAgICAgIGFkZChjLCBhKTsKICAgICAgfQoKICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGVkZ2VzKTsKICAgICAgdGhpcy5lZGdlcyA9IG5ldyBJbnQxNkFycmF5KGtleXMubGVuZ3RoICogMik7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBpbmRpY2VzID0ga2V5c1tpXS5zcGxpdCgnXycpOwogICAgICAgIHRoaXMuZWRnZXNbMiAqIGldID0gcGFyc2VJbnQoaW5kaWNlc1swXSwgMTApOwogICAgICAgIHRoaXMuZWRnZXNbMiAqIGkgKyAxXSA9IHBhcnNlSW50KGluZGljZXNbMV0sIDEwKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYW4gZWRnZSB2ZXJ0ZXgKICAgICAqIEBwYXJhbSBmaXJzdE9yU2Vjb25kIDAgb3IgMSwgZGVwZW5kaW5nIG9uIHdoaWNoIG9uZSBvZiB0aGUgdmVydGljZXMgeW91IG5lZWQuCiAgICAgKiBAcGFyYW0gdmVydGV4U3RvcmUgV2hlcmUgdG8gc3RvcmUgdGhlIHJlc3VsdAogICAgICovCgoKICAgIGdldEVkZ2VWZXJ0ZXgoZWRnZUluZGV4LCBmaXJzdE9yU2Vjb25kLCB2ZXJ0ZXhTdG9yZSkgewogICAgICBjb25zdCB2ZXJ0ZXhJbmRleCA9IHRoaXMuZWRnZXNbZWRnZUluZGV4ICogMiArIChmaXJzdE9yU2Vjb25kID8gMSA6IDApXTsKICAgICAgdGhpcy5nZXRWZXJ0ZXgodmVydGV4SW5kZXgsIHZlcnRleFN0b3JlKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgdmVjdG9yIGFsb25nIGFuIGVkZ2UuCiAgICAgKi8KCgogICAgZ2V0RWRnZVZlY3RvcihlZGdlSW5kZXgsIHZlY3RvclN0b3JlKSB7CiAgICAgIGNvbnN0IHZhID0gZ2V0RWRnZVZlY3Rvcl92YTsKICAgICAgY29uc3QgdmIgPSBnZXRFZGdlVmVjdG9yX3ZiOwogICAgICB0aGlzLmdldEVkZ2VWZXJ0ZXgoZWRnZUluZGV4LCAwLCB2YSk7CiAgICAgIHRoaXMuZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIDEsIHZiKTsKICAgICAgdmIudnN1Yih2YSwgdmVjdG9yU3RvcmUpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgZmFjZSBub3JtYWwgZ2l2ZW4gMyB2ZXJ0aWNlcwogICAgICovCgoKICAgIHN0YXRpYyBjb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCkgewogICAgICB2Yi52c3ViKHZhLCBhYik7CiAgICAgIHZjLnZzdWIodmIsIGNiKTsKICAgICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7CgogICAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkgewogICAgICAgIHRhcmdldC5ub3JtYWxpemUoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdmVydGV4IGkuCiAgICAgKiBAcmV0dXJuIFRoZSAib3V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgZ2V0VmVydGV4KGksIG91dCkgewogICAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7CgogICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleChpLCBvdXQpOwoKICAgICAgb3V0LnggKj0gc2NhbGUueDsKICAgICAgb3V0LnkgKj0gc2NhbGUueTsKICAgICAgb3V0LnogKj0gc2NhbGUuejsKICAgICAgcmV0dXJuIG91dDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHJhdyB2ZXJ0ZXggaQogICAgICogQHJldHVybiBUaGUgIm91dCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIF9nZXRVbnNjYWxlZFZlcnRleChpLCBvdXQpIHsKICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICByZXR1cm4gb3V0LnNldCh2ZXJ0aWNlc1tpM10sIHZlcnRpY2VzW2kzICsgMV0sIHZlcnRpY2VzW2kzICsgMl0pOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSB2ZXJ0ZXggZnJvbSB0aGUgdHJpbWVzaCx0cmFuc2Zvcm1lZCBieSB0aGUgZ2l2ZW4gcG9zaXRpb24gYW5kIHF1YXRlcm5pb24uCiAgICAgKiBAcmV0dXJuIFRoZSAib3V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgZ2V0V29ybGRWZXJ0ZXgoaSwgcG9zLCBxdWF0LCBvdXQpIHsKICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgb3V0KTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvcywgcXVhdCwgb3V0LCBvdXQpOwogICAgICByZXR1cm4gb3V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHRocmVlIHZlcnRpY2VzIGZvciB0cmlhbmdsZSBpLgogICAgICovCgoKICAgIGdldFRyaWFuZ2xlVmVydGljZXMoaSwgYSwgYiwgYykgewogICAgICBjb25zdCBpMyA9IGkgKiAzOwogICAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTNdLCBhKTsKICAgICAgdGhpcy5nZXRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzICsgMV0sIGIpOwogICAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAyXSwgYyk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIG5vcm1hbCBvZiB0cmlhbmdsZSBpLgogICAgICogQHJldHVybiBUaGUgInRhcmdldCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIGdldE5vcm1hbChpLCB0YXJnZXQpIHsKICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgcmV0dXJuIHRhcmdldC5zZXQodGhpcy5ub3JtYWxzW2kzXSwgdGhpcy5ub3JtYWxzW2kzICsgMV0sIHRoaXMubm9ybWFsc1tpMyArIDJdKTsKICAgIH0KICAgIC8qKgogICAgICogQHJldHVybiBUaGUgInRhcmdldCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgLy8gQXBwcm94aW1hdGUgd2l0aCBib3ggaW5lcnRpYQogICAgICAvLyBFeGFjdCBpbmVydGlhIGNhbGN1bGF0aW9uIGlzIG92ZXJraWxsLCBidXQgc2VlIGh0dHA6Ly9nZW9tZXRyaWN0b29scy5jb20vRG9jdW1lbnRhdGlvbi9Qb2x5aGVkcmFsTWFzc1Byb3BlcnRpZXMucGRmIGZvciB0aGUgY29ycmVjdCB3YXkgdG8gZG8gaXQKICAgICAgdGhpcy5jb21wdXRlTG9jYWxBQUJCKGNsaV9hYWJiKTsKICAgICAgY29uc3QgeCA9IGNsaV9hYWJiLnVwcGVyQm91bmQueCAtIGNsaV9hYWJiLmxvd2VyQm91bmQueDsKICAgICAgY29uc3QgeSA9IGNsaV9hYWJiLnVwcGVyQm91bmQueSAtIGNsaV9hYWJiLmxvd2VyQm91bmQueTsKICAgICAgY29uc3QgeiA9IGNsaV9hYWJiLnVwcGVyQm91bmQueiAtIGNsaV9hYWJiLmxvd2VyQm91bmQuejsKICAgICAgcmV0dXJuIHRhcmdldC5zZXQoMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHkgKiAyICogeSArIDIgKiB6ICogMiAqIHopLCAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeCAqIDIgKiB4ICsgMiAqIHogKiAyICogeiksIDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB5ICogMiAqIHkgKyAyICogeCAqIDIgKiB4KSk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIGxvY2FsIEFBQkIgZm9yIHRoZSB0cmltZXNoCiAgICAgKi8KCgogICAgY29tcHV0ZUxvY2FsQUFCQihhYWJiKSB7CiAgICAgIGNvbnN0IGwgPSBhYWJiLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSBhYWJiLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IG4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsKICAgICAgdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3QgdiA9IGNvbXB1dGVMb2NhbEFBQkJfd29ybGRWZXJ0OwogICAgICB0aGlzLmdldFZlcnRleCgwLCB2KTsKICAgICAgbC5jb3B5KHYpOwogICAgICB1LmNvcHkodik7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gbjsgaSsrKSB7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CgogICAgICAgIGlmICh2LnggPCBsLngpIHsKICAgICAgICAgIGwueCA9IHYueDsKICAgICAgICB9IGVsc2UgaWYgKHYueCA+IHUueCkgewogICAgICAgICAgdS54ID0gdi54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHYueSA8IGwueSkgewogICAgICAgICAgbC55ID0gdi55OwogICAgICAgIH0gZWxzZSBpZiAodi55ID4gdS55KSB7CiAgICAgICAgICB1LnkgPSB2Lnk7CiAgICAgICAgfQoKICAgICAgICBpZiAodi56IDwgbC56KSB7CiAgICAgICAgICBsLnogPSB2Lno7CiAgICAgICAgfSBlbHNlIGlmICh2LnogPiB1LnopIHsKICAgICAgICAgIHUueiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBgLmFhYmJgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlQUFCQigpIHsKICAgICAgdGhpcy5jb21wdXRlTG9jYWxBQUJCKHRoaXMuYWFiYik7CiAgICB9CiAgICAvKioKICAgICAqIFdpbGwgdXBkYXRlIHRoZSBgLmJvdW5kaW5nU3BoZXJlUmFkaXVzYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICAvLyBBc3N1bWUgcG9pbnRzIGFyZSBkaXN0cmlidXRlZCB3aXRoIGxvY2FsICgwLDAsMCkgYXMgY2VudGVyCiAgICAgIGxldCBtYXgyID0gMDsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCB2ID0gbmV3IFZlYzMoKTsKCiAgICAgIGZvciAobGV0IGkgPSAwLCBOID0gdmVydGljZXMubGVuZ3RoIC8gMzsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CiAgICAgICAgY29uc3Qgbm9ybTIgPSB2Lmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgICAgaWYgKG5vcm0yID4gbWF4MikgewogICAgICAgICAgbWF4MiA9IG5vcm0yOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgLyoKICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aCAvIDMsCiAgICAgICAgICAgICAgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICAgICAgY29uc3QgbWlueCxtaW55LG1pbnosbWF4eCxtYXh5LG1heHo7CiAgICAgICAgICAgY29uc3QgdiA9IHRlbXBXb3JsZFZlcnRleDsKICAgICAgICAgIGZvcihsZXQgaT0wOyBpPG47IGkrKyl7CiAgICAgICAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CiAgICAgICAgICAgICAgcXVhdC52bXVsdCh2LCB2KTsKICAgICAgICAgICAgICBwb3MudmFkZCh2LCB2KTsKICAgICAgICAgICAgICBpZiAodi54IDwgbWlueCB8fCBtaW54PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWlueCA9IHYueDsKICAgICAgICAgICAgICB9IGVsc2UgaWYodi54ID4gbWF4eCB8fCBtYXh4PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWF4eCA9IHYueDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIGlmICh2LnkgPCBtaW55IHx8IG1pbnk9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtaW55ID0gdi55OwogICAgICAgICAgICAgIH0gZWxzZSBpZih2LnkgPiBtYXh5IHx8IG1heHk9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtYXh5ID0gdi55OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgaWYgKHYueiA8IG1pbnogfHwgbWluej09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1pbnogPSB2Lno7CiAgICAgICAgICAgICAgfSBlbHNlIGlmKHYueiA+IG1heHogfHwgbWF4ej09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1heHogPSB2Lno7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgbWluLnNldChtaW54LG1pbnksbWlueik7CiAgICAgICAgICBtYXguc2V0KG1heHgsbWF4eSxtYXh6KTsKICAgICAgICAgICovCiAgICAgIC8vIEZhc3RlciBhcHByb3hpbWF0aW9uIHVzaW5nIGxvY2FsIEFBQkIKICAgICAgY29uc3QgZnJhbWUgPSBjYWxjdWxhdGVXb3JsZEFBQkJfZnJhbWU7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGNhbGN1bGF0ZVdvcmxkQUFCQl9hYWJiOwogICAgICBmcmFtZS5wb3NpdGlvbiA9IHBvczsKICAgICAgZnJhbWUucXVhdGVybmlvbiA9IHF1YXQ7CiAgICAgIHRoaXMuYWFiYi50b1dvcmxkRnJhbWUoZnJhbWUsIHJlc3VsdCk7CiAgICAgIG1pbi5jb3B5KHJlc3VsdC5sb3dlckJvdW5kKTsKICAgICAgbWF4LmNvcHkocmVzdWx0LnVwcGVyQm91bmQpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYXBwcm94aW1hdGUgdm9sdW1lCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgLyAzLjA7CiAgICB9CiAgICAvKioKICAgICAqIENyZWF0ZSBhIFRyaW1lc2ggaW5zdGFuY2UsIHNoYXBlZCBhcyBhIHRvcnVzLgogICAgICovCgoKICAgIHN0YXRpYyBjcmVhdGVUb3J1cyhyYWRpdXMsIHR1YmUsIHJhZGlhbFNlZ21lbnRzLCB0dWJ1bGFyU2VnbWVudHMsIGFyYykgewogICAgICBpZiAocmFkaXVzID09PSB2b2lkIDApIHsKICAgICAgICByYWRpdXMgPSAxOwogICAgICB9CgogICAgICBpZiAodHViZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgdHViZSA9IDAuNTsKICAgICAgfQoKICAgICAgaWYgKHJhZGlhbFNlZ21lbnRzID09PSB2b2lkIDApIHsKICAgICAgICByYWRpYWxTZWdtZW50cyA9IDg7CiAgICAgIH0KCiAgICAgIGlmICh0dWJ1bGFyU2VnbWVudHMgPT09IHZvaWQgMCkgewogICAgICAgIHR1YnVsYXJTZWdtZW50cyA9IDY7CiAgICAgIH0KCiAgICAgIGlmIChhcmMgPT09IHZvaWQgMCkgewogICAgICAgIGFyYyA9IE1hdGguUEkgKiAyOwogICAgICB9CgogICAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdOwogICAgICBjb25zdCBpbmRpY2VzID0gW107CgogICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSByYWRpYWxTZWdtZW50czsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdHVidWxhclNlZ21lbnRzOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHUgPSBpIC8gdHVidWxhclNlZ21lbnRzICogYXJjOwogICAgICAgICAgY29uc3QgdiA9IGogLyByYWRpYWxTZWdtZW50cyAqIE1hdGguUEkgKiAyOwogICAgICAgICAgY29uc3QgeCA9IChyYWRpdXMgKyB0dWJlICogTWF0aC5jb3ModikpICogTWF0aC5jb3ModSk7CiAgICAgICAgICBjb25zdCB5ID0gKHJhZGl1cyArIHR1YmUgKiBNYXRoLmNvcyh2KSkgKiBNYXRoLnNpbih1KTsKICAgICAgICAgIGNvbnN0IHogPSB0dWJlICogTWF0aC5zaW4odik7CiAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKHgsIHksIHopOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZm9yIChsZXQgaiA9IDE7IGogPD0gcmFkaWFsU2VnbWVudHM7IGorKykgewogICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHR1YnVsYXJTZWdtZW50czsgaSsrKSB7CiAgICAgICAgICBjb25zdCBhID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogaiArIGkgLSAxOwogICAgICAgICAgY29uc3QgYiA9ICh0dWJ1bGFyU2VnbWVudHMgKyAxKSAqIChqIC0gMSkgKyBpIC0gMTsKICAgICAgICAgIGNvbnN0IGMgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiAoaiAtIDEpICsgaTsKICAgICAgICAgIGNvbnN0IGQgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiBqICsgaTsKICAgICAgICAgIGluZGljZXMucHVzaChhLCBiLCBkKTsKICAgICAgICAgIGluZGljZXMucHVzaChiLCBjLCBkKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgVHJpbWVzaCh2ZXJ0aWNlcywgaW5kaWNlcyk7CiAgICB9CgogIH0KCiAgY29uc3QgY29tcHV0ZU5vcm1hbHNfbiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdW5zY2FsZWRBQUJCID0gbmV3IEFBQkIoKTsKICBjb25zdCBnZXRFZGdlVmVjdG9yX3ZhID0gbmV3IFZlYzMoKTsKICBjb25zdCBnZXRFZGdlVmVjdG9yX3ZiID0gbmV3IFZlYzMoKTsKICBjb25zdCBjYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYWIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHZhID0gbmV3IFZlYzMoKTsKICBjb25zdCB2YiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdmMgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNsaV9hYWJiID0gbmV3IEFBQkIoKTsKICBjb25zdCBjb21wdXRlTG9jYWxBQUJCX3dvcmxkVmVydCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2FsY3VsYXRlV29ybGRBQUJCX2ZyYW1lID0gbmV3IFRyYW5zZm9ybSgpOwogIGNvbnN0IGNhbGN1bGF0ZVdvcmxkQUFCQl9hYWJiID0gbmV3IEFBQkIoKTsKICAvKioKICAgKiBDb25zdHJhaW50IGVxdWF0aW9uIHNvbHZlciBiYXNlIGNsYXNzLgogICAqLwoKICBjbGFzcyBTb2x2ZXIgewogICAgLyoqCiAgICAgKiBBbGwgZXF1YXRpb25zIHRvIGJlIHNvbHZlZAogICAgICovCgogICAgLyoqCiAgICAgKiBAdG9kbyByZW1vdmUgdXNlbGVzcyBjb25zdHJ1Y3RvcgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5lcXVhdGlvbnMgPSB2b2lkIDA7CiAgICAgIHRoaXMuZXF1YXRpb25zID0gW107CiAgICB9CiAgICAvKioKICAgICAqIFNob3VsZCBiZSBpbXBsZW1lbnRlZCBpbiBzdWJjbGFzc2VzIQogICAgICogQHRvZG8gdXNlIGFic3RyYWN0CiAgICAgKiBAcmV0dXJuIG51bWJlciBvZiBpdGVyYXRpb25zIHBlcmZvcm1lZAogICAgICovCgoKICAgIHNvbHZlKGR0LCB3b3JsZCkgewogICAgICByZXR1cm4gKC8vIFNob3VsZCByZXR1cm4gdGhlIG51bWJlciBvZiBpdGVyYXRpb25zIGRvbmUhCiAgICAgICAgMAogICAgICApOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYW4gZXF1YXRpb24KICAgICAqLwoKCiAgICBhZGRFcXVhdGlvbihlcSkgewogICAgICBpZiAoZXEuZW5hYmxlZCAmJiAhZXEuYmkuaXNUcmlnZ2VyICYmICFlcS5iai5pc1RyaWdnZXIpIHsKICAgICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKGVxKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgYW4gZXF1YXRpb24KICAgICAqLwoKCiAgICByZW1vdmVFcXVhdGlvbihlcSkgewogICAgICBjb25zdCBlcXMgPSB0aGlzLmVxdWF0aW9uczsKICAgICAgY29uc3QgaSA9IGVxcy5pbmRleE9mKGVxKTsKCiAgICAgIGlmIChpICE9PSAtMSkgewogICAgICAgIGVxcy5zcGxpY2UoaSwgMSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQWRkIGFsbCBlcXVhdGlvbnMKICAgICAqLwoKCiAgICByZW1vdmVBbGxFcXVhdGlvbnMoKSB7CiAgICAgIHRoaXMuZXF1YXRpb25zLmxlbmd0aCA9IDA7CiAgICB9CgogIH0KICAvKioKICAgKiBDb25zdHJhaW50IGVxdWF0aW9uIEdhdXNzLVNlaWRlbCBzb2x2ZXIuCiAgICogQHRvZG8gVGhlIHNwb29rIHBhcmFtZXRlcnMgc2hvdWxkIGJlIHNwZWNpZmllZCBmb3IgZWFjaCBjb25zdHJhaW50LCBub3QgZ2xvYmFsbHkuCiAgICogQHNlZSBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci81RFYwNTgvVlQwOS9sZWN0dXJlcy9zcG9va25vdGVzLnBkZgogICAqLwoKCiAgY2xhc3MgR1NTb2x2ZXIgZXh0ZW5kcyBTb2x2ZXIgewogICAgLyoqCiAgICAgKiBUaGUgbnVtYmVyIG9mIHNvbHZlciBpdGVyYXRpb25zIGRldGVybWluZXMgcXVhbGl0eSBvZiB0aGUgY29uc3RyYWludHMgaW4gdGhlIHdvcmxkLgogICAgICogVGhlIG1vcmUgaXRlcmF0aW9ucywgdGhlIG1vcmUgY29ycmVjdCBzaW11bGF0aW9uLiBNb3JlIGl0ZXJhdGlvbnMgbmVlZCBtb3JlIGNvbXB1dGF0aW9ucyB0aG91Z2guIElmIHlvdSBoYXZlIGEgbGFyZ2UgZ3Jhdml0eSBmb3JjZSBpbiB5b3VyIHdvcmxkLCB5b3Ugd2lsbCBuZWVkIG1vcmUgaXRlcmF0aW9ucy4KICAgICAqLwoKICAgIC8qKgogICAgICogV2hlbiB0b2xlcmFuY2UgaXMgcmVhY2hlZCwgdGhlIHN5c3RlbSBpcyBhc3N1bWVkIHRvIGJlIGNvbnZlcmdlZC4KICAgICAqLwoKICAgIC8qKgogICAgICogQHRvZG8gcmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3IKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuaXRlcmF0aW9ucyA9IHZvaWQgMDsKICAgICAgdGhpcy50b2xlcmFuY2UgPSB2b2lkIDA7CiAgICAgIHRoaXMuaXRlcmF0aW9ucyA9IDEwOwogICAgICB0aGlzLnRvbGVyYW5jZSA9IDFlLTc7CiAgICB9CiAgICAvKioKICAgICAqIFNvbHZlCiAgICAgKiBAcmV0dXJuIG51bWJlciBvZiBpdGVyYXRpb25zIHBlcmZvcm1lZAogICAgICovCgoKICAgIHNvbHZlKGR0LCB3b3JsZCkgewogICAgICBsZXQgaXRlciA9IDA7CiAgICAgIGNvbnN0IG1heEl0ZXIgPSB0aGlzLml0ZXJhdGlvbnM7CiAgICAgIGNvbnN0IHRvbFNxdWFyZWQgPSB0aGlzLnRvbGVyYW5jZSAqIHRoaXMudG9sZXJhbmNlOwogICAgICBjb25zdCBlcXVhdGlvbnMgPSB0aGlzLmVxdWF0aW9uczsKICAgICAgY29uc3QgTmVxID0gZXF1YXRpb25zLmxlbmd0aDsKICAgICAgY29uc3QgYm9kaWVzID0gd29ybGQuYm9kaWVzOwogICAgICBjb25zdCBOYm9kaWVzID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgaCA9IGR0OwogICAgICBsZXQgQjsKICAgICAgbGV0IGludkM7CiAgICAgIGxldCBkZWx0YWxhbWJkYTsKICAgICAgbGV0IGRlbHRhbGFtYmRhVG90OwogICAgICBsZXQgR1dsYW1iZGE7CiAgICAgIGxldCBsYW1iZGFqOyAvLyBVcGRhdGUgc29sdmUgbWFzcwoKICAgICAgaWYgKE5lcSAhPT0gMCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYm9kaWVzOyBpKyspIHsKICAgICAgICAgIGJvZGllc1tpXS51cGRhdGVTb2x2ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICAgICAgfQogICAgICB9IC8vIFRoaW5ncyB0aGF0IGRvIG5vdCBjaGFuZ2UgZHVyaW5nIGl0ZXJhdGlvbiBjYW4gYmUgY29tcHV0ZWQgb25jZQoKCiAgICAgIGNvbnN0IGludkNzID0gR1NTb2x2ZXJfc29sdmVfaW52Q3M7CiAgICAgIGNvbnN0IEJzID0gR1NTb2x2ZXJfc29sdmVfQnM7CiAgICAgIGNvbnN0IGxhbWJkYSA9IEdTU29sdmVyX3NvbHZlX2xhbWJkYTsKICAgICAgaW52Q3MubGVuZ3RoID0gTmVxOwogICAgICBCcy5sZW5ndGggPSBOZXE7CiAgICAgIGxhbWJkYS5sZW5ndGggPSBOZXE7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmVxOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gZXF1YXRpb25zW2ldOwogICAgICAgIGxhbWJkYVtpXSA9IDAuMDsKICAgICAgICBCc1tpXSA9IGMuY29tcHV0ZUIoaCk7CiAgICAgICAgaW52Q3NbaV0gPSAxLjAgLyBjLmNvbXB1dGVDKCk7CiAgICAgIH0KCiAgICAgIGlmIChOZXEgIT09IDApIHsKICAgICAgICAvLyBSZXNldCB2bGFtYmRhCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTsKICAgICAgICAgIGNvbnN0IHZsYW1iZGEgPSBiLnZsYW1iZGE7CiAgICAgICAgICBjb25zdCB3bGFtYmRhID0gYi53bGFtYmRhOwogICAgICAgICAgdmxhbWJkYS5zZXQoMCwgMCwgMCk7CiAgICAgICAgICB3bGFtYmRhLnNldCgwLCAwLCAwKTsKICAgICAgICB9IC8vIEl0ZXJhdGUgb3ZlciBlcXVhdGlvbnMKCgogICAgICAgIGZvciAoaXRlciA9IDA7IGl0ZXIgIT09IG1heEl0ZXI7IGl0ZXIrKykgewogICAgICAgICAgLy8gQWNjdW11bGF0ZSB0aGUgdG90YWwgZXJyb3IgZm9yIGVhY2ggaXRlcmF0aW9uLgogICAgICAgICAgZGVsdGFsYW1iZGFUb3QgPSAwLjA7CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IE5lcTsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IGMgPSBlcXVhdGlvbnNbal07IC8vIENvbXB1dGUgaXRlcmF0aW9uCgogICAgICAgICAgICBCID0gQnNbal07CiAgICAgICAgICAgIGludkMgPSBpbnZDc1tqXTsKICAgICAgICAgICAgbGFtYmRhaiA9IGxhbWJkYVtqXTsKICAgICAgICAgICAgR1dsYW1iZGEgPSBjLmNvbXB1dGVHV2xhbWJkYSgpOwogICAgICAgICAgICBkZWx0YWxhbWJkYSA9IGludkMgKiAoQiAtIEdXbGFtYmRhIC0gYy5lcHMgKiBsYW1iZGFqKTsgLy8gQ2xhbXAgaWYgd2UgYXJlIG5vdCB3aXRoaW4gdGhlIG1pbi9tYXggaW50ZXJ2YWwKCiAgICAgICAgICAgIGlmIChsYW1iZGFqICsgZGVsdGFsYW1iZGEgPCBjLm1pbkZvcmNlKSB7CiAgICAgICAgICAgICAgZGVsdGFsYW1iZGEgPSBjLm1pbkZvcmNlIC0gbGFtYmRhajsKICAgICAgICAgICAgfSBlbHNlIGlmIChsYW1iZGFqICsgZGVsdGFsYW1iZGEgPiBjLm1heEZvcmNlKSB7CiAgICAgICAgICAgICAgZGVsdGFsYW1iZGEgPSBjLm1heEZvcmNlIC0gbGFtYmRhajsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGFtYmRhW2pdICs9IGRlbHRhbGFtYmRhOwogICAgICAgICAgICBkZWx0YWxhbWJkYVRvdCArPSBkZWx0YWxhbWJkYSA+IDAuMCA/IGRlbHRhbGFtYmRhIDogLWRlbHRhbGFtYmRhOyAvLyBhYnMoZGVsdGFsYW1iZGEpCgogICAgICAgICAgICBjLmFkZFRvV2xhbWJkYShkZWx0YWxhbWJkYSk7CiAgICAgICAgICB9IC8vIElmIHRoZSB0b3RhbCBlcnJvciBpcyBzbWFsbCBlbm91Z2ggLSBzdG9wIGl0ZXJhdGUKCgogICAgICAgICAgaWYgKGRlbHRhbGFtYmRhVG90ICogZGVsdGFsYW1iZGFUb3QgPCB0b2xTcXVhcmVkKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0gLy8gQWRkIHJlc3VsdCB0byB2ZWxvY2l0eQoKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTsKICAgICAgICAgIGNvbnN0IHYgPSBiLnZlbG9jaXR5OwogICAgICAgICAgY29uc3QgdyA9IGIuYW5ndWxhclZlbG9jaXR5OwogICAgICAgICAgYi52bGFtYmRhLnZtdWwoYi5saW5lYXJGYWN0b3IsIGIudmxhbWJkYSk7CiAgICAgICAgICB2LnZhZGQoYi52bGFtYmRhLCB2KTsKICAgICAgICAgIGIud2xhbWJkYS52bXVsKGIuYW5ndWxhckZhY3RvciwgYi53bGFtYmRhKTsKICAgICAgICAgIHcudmFkZChiLndsYW1iZGEsIHcpOwogICAgICAgIH0gLy8gU2V0IHRoZSBgLm11bHRpcGxpZXJgIHByb3BlcnR5IG9mIGVhY2ggZXF1YXRpb24KCgogICAgICAgIGxldCBsID0gZXF1YXRpb25zLmxlbmd0aDsKICAgICAgICBjb25zdCBpbnZEdCA9IDEgLyBoOwoKICAgICAgICB3aGlsZSAobC0tKSB7CiAgICAgICAgICBlcXVhdGlvbnNbbF0ubXVsdGlwbGllciA9IGxhbWJkYVtsXSAqIGludkR0OwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGl0ZXI7CiAgICB9CgogIH0gLy8gSnVzdCB0ZW1wb3JhcnkgbnVtYmVyIGhvbGRlcnMgdGhhdCB3ZSB3YW50IHRvIHJldXNlIGVhY2ggaXRlcmF0aW9uLgoKCiAgY29uc3QgR1NTb2x2ZXJfc29sdmVfbGFtYmRhID0gW107CiAgY29uc3QgR1NTb2x2ZXJfc29sdmVfaW52Q3MgPSBbXTsKICBjb25zdCBHU1NvbHZlcl9zb2x2ZV9CcyA9IFtdOwogIC8qKgogICAqIFNwbGl0cyB0aGUgZXF1YXRpb25zIGludG8gaXNsYW5kcyBhbmQgc29sdmVzIHRoZW0gaW5kZXBlbmRlbnRseS4gQ2FuIGltcHJvdmUgcGVyZm9ybWFuY2UuCiAgICovCgogIGNsYXNzIFNwbGl0U29sdmVyIGV4dGVuZHMgU29sdmVyIHsKICAgIC8qKgogICAgICogVGhlIG51bWJlciBvZiBzb2x2ZXIgaXRlcmF0aW9ucyBkZXRlcm1pbmVzIHF1YWxpdHkgb2YgdGhlIGNvbnN0cmFpbnRzIGluIHRoZSB3b3JsZC4gVGhlIG1vcmUgaXRlcmF0aW9ucywgdGhlIG1vcmUgY29ycmVjdCBzaW11bGF0aW9uLiBNb3JlIGl0ZXJhdGlvbnMgbmVlZCBtb3JlIGNvbXB1dGF0aW9ucyB0aG91Z2guIElmIHlvdSBoYXZlIGEgbGFyZ2UgZ3Jhdml0eSBmb3JjZSBpbiB5b3VyIHdvcmxkLCB5b3Ugd2lsbCBuZWVkIG1vcmUgaXRlcmF0aW9ucy4KICAgICAqLwoKICAgIC8qKgogICAgICogV2hlbiB0b2xlcmFuY2UgaXMgcmVhY2hlZCwgdGhlIHN5c3RlbSBpcyBhc3N1bWVkIHRvIGJlIGNvbnZlcmdlZC4KICAgICAqLwoKICAgIC8qKiBzdWJzb2x2ZXIgKi8KICAgIGNvbnN0cnVjdG9yKHN1YnNvbHZlcikgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLml0ZXJhdGlvbnMgPSB2b2lkIDA7CiAgICAgIHRoaXMudG9sZXJhbmNlID0gdm9pZCAwOwogICAgICB0aGlzLnN1YnNvbHZlciA9IHZvaWQgMDsKICAgICAgdGhpcy5ub2RlcyA9IHZvaWQgMDsKICAgICAgdGhpcy5ub2RlUG9vbCA9IHZvaWQgMDsKICAgICAgdGhpcy5pdGVyYXRpb25zID0gMTA7CiAgICAgIHRoaXMudG9sZXJhbmNlID0gMWUtNzsKICAgICAgdGhpcy5zdWJzb2x2ZXIgPSBzdWJzb2x2ZXI7CiAgICAgIHRoaXMubm9kZXMgPSBbXTsKICAgICAgdGhpcy5ub2RlUG9vbCA9IFtdOyAvLyBDcmVhdGUgbmVlZGVkIG5vZGVzLCByZXVzZSBpZiBwb3NzaWJsZQoKICAgICAgd2hpbGUgKHRoaXMubm9kZVBvb2wubGVuZ3RoIDwgMTI4KSB7CiAgICAgICAgdGhpcy5ub2RlUG9vbC5wdXNoKHRoaXMuY3JlYXRlTm9kZSgpKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBjcmVhdGVOb2RlCiAgICAgKi8KCgogICAgY3JlYXRlTm9kZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBib2R5OiBudWxsLAogICAgICAgIGNoaWxkcmVuOiBbXSwKICAgICAgICBlcXM6IFtdLAogICAgICAgIHZpc2l0ZWQ6IGZhbHNlCiAgICAgIH07CiAgICB9CiAgICAvKioKICAgICAqIFNvbHZlIHRoZSBzdWJzeXN0ZW1zCiAgICAgKiBAcmV0dXJuIG51bWJlciBvZiBpdGVyYXRpb25zIHBlcmZvcm1lZAogICAgICovCgoKICAgIHNvbHZlKGR0LCB3b3JsZCkgewogICAgICBjb25zdCBub2RlcyA9IFNwbGl0U29sdmVyX3NvbHZlX25vZGVzOwogICAgICBjb25zdCBub2RlUG9vbCA9IHRoaXMubm9kZVBvb2w7CiAgICAgIGNvbnN0IGJvZGllcyA9IHdvcmxkLmJvZGllczsKICAgICAgY29uc3QgZXF1YXRpb25zID0gdGhpcy5lcXVhdGlvbnM7CiAgICAgIGNvbnN0IE5lcSA9IGVxdWF0aW9ucy5sZW5ndGg7CiAgICAgIGNvbnN0IE5ib2RpZXMgPSBib2RpZXMubGVuZ3RoOwogICAgICBjb25zdCBzdWJzb2x2ZXIgPSB0aGlzLnN1YnNvbHZlcjsgLy8gQ3JlYXRlIG5lZWRlZCBub2RlcywgcmV1c2UgaWYgcG9zc2libGUKCiAgICAgIHdoaWxlIChub2RlUG9vbC5sZW5ndGggPCBOYm9kaWVzKSB7CiAgICAgICAgbm9kZVBvb2wucHVzaCh0aGlzLmNyZWF0ZU5vZGUoKSk7CiAgICAgIH0KCiAgICAgIG5vZGVzLmxlbmd0aCA9IE5ib2RpZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE5ib2RpZXM7IGkrKykgewogICAgICAgIG5vZGVzW2ldID0gbm9kZVBvb2xbaV07CiAgICAgIH0gLy8gUmVzZXQgbm9kZSB2YWx1ZXMKCgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmJvZGllczsgaSsrKSB7CiAgICAgICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldOwogICAgICAgIG5vZGUuYm9keSA9IGJvZGllc1tpXTsKICAgICAgICBub2RlLmNoaWxkcmVuLmxlbmd0aCA9IDA7CiAgICAgICAgbm9kZS5lcXMubGVuZ3RoID0gMDsKICAgICAgICBub2RlLnZpc2l0ZWQgPSBmYWxzZTsKICAgICAgfQoKICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IE5lcTsgaysrKSB7CiAgICAgICAgY29uc3QgZXEgPSBlcXVhdGlvbnNba107CiAgICAgICAgY29uc3QgaSA9IGJvZGllcy5pbmRleE9mKGVxLmJpKTsKICAgICAgICBjb25zdCBqID0gYm9kaWVzLmluZGV4T2YoZXEuYmopOwogICAgICAgIGNvbnN0IG5pID0gbm9kZXNbaV07CiAgICAgICAgY29uc3QgbmogPSBub2Rlc1tqXTsKICAgICAgICBuaS5jaGlsZHJlbi5wdXNoKG5qKTsKICAgICAgICBuaS5lcXMucHVzaChlcSk7CiAgICAgICAgbmouY2hpbGRyZW4ucHVzaChuaSk7CiAgICAgICAgbmouZXFzLnB1c2goZXEpOwogICAgICB9CgogICAgICBsZXQgY2hpbGQ7CiAgICAgIGxldCBuID0gMDsKICAgICAgbGV0IGVxcyA9IFNwbGl0U29sdmVyX3NvbHZlX2VxczsKICAgICAgc3Vic29sdmVyLnRvbGVyYW5jZSA9IHRoaXMudG9sZXJhbmNlOwogICAgICBzdWJzb2x2ZXIuaXRlcmF0aW9ucyA9IHRoaXMuaXRlcmF0aW9uczsKICAgICAgY29uc3QgZHVtbXlXb3JsZCA9IFNwbGl0U29sdmVyX3NvbHZlX2R1bW15V29ybGQ7CgogICAgICB3aGlsZSAoY2hpbGQgPSBnZXRVbnZpc2l0ZWROb2RlKG5vZGVzKSkgewogICAgICAgIGVxcy5sZW5ndGggPSAwOwogICAgICAgIGR1bW15V29ybGQuYm9kaWVzLmxlbmd0aCA9IDA7CiAgICAgICAgYmZzKGNoaWxkLCB2aXNpdEZ1bmMsIGR1bW15V29ybGQuYm9kaWVzLCBlcXMpOwogICAgICAgIGNvbnN0IE5lcXMgPSBlcXMubGVuZ3RoOwogICAgICAgIGVxcyA9IGVxcy5zb3J0KHNvcnRCeUlkKTsKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5lcXM7IGkrKykgewogICAgICAgICAgc3Vic29sdmVyLmFkZEVxdWF0aW9uKGVxc1tpXSk7CiAgICAgICAgfQoKICAgICAgICBzdWJzb2x2ZXIuc29sdmUoZHQsIGR1bW15V29ybGQpOwogICAgICAgIHN1YnNvbHZlci5yZW1vdmVBbGxFcXVhdGlvbnMoKTsKICAgICAgICBuKys7CiAgICAgIH0KCiAgICAgIHJldHVybiBuOwogICAgfQoKICB9IC8vIFJldHVybnMgdGhlIG51bWJlciBvZiBzdWJzeXN0ZW1zCgoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9ub2RlcyA9IFtdOyAvLyBBbGwgYWxsb2NhdGVkIG5vZGUgb2JqZWN0cwoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9lcXMgPSBbXTsgLy8gVGVtcCBhcnJheQoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9kdW1teVdvcmxkID0gewogICAgYm9kaWVzOiBbXQogIH07IC8vIFRlbXAgb2JqZWN0CgogIGNvbnN0IFNUQVRJQyA9IEJvZHkuU1RBVElDOwoKICBmdW5jdGlvbiBnZXRVbnZpc2l0ZWROb2RlKG5vZGVzKSB7CiAgICBjb25zdCBObm9kZXMgPSBub2Rlcy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ub2RlczsgaSsrKSB7CiAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTsKCiAgICAgIGlmICghbm9kZS52aXNpdGVkICYmICEobm9kZS5ib2R5LnR5cGUgJiBTVEFUSUMpKSB7CiAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBjb25zdCBxdWV1ZSA9IFtdOwoKICBmdW5jdGlvbiBiZnMocm9vdCwgdmlzaXRGdW5jLCBiZHMsIGVxcykgewogICAgcXVldWUucHVzaChyb290KTsKICAgIHJvb3QudmlzaXRlZCA9IHRydWU7CiAgICB2aXNpdEZ1bmMocm9vdCwgYmRzLCBlcXMpOwoKICAgIHdoaWxlIChxdWV1ZS5sZW5ndGgpIHsKICAgICAgY29uc3Qgbm9kZSA9IHF1ZXVlLnBvcCgpOyAvLyBMb29wIG92ZXIgdW52aXNpdGVkIGNoaWxkIG5vZGVzCgogICAgICBsZXQgY2hpbGQ7CgogICAgICB3aGlsZSAoY2hpbGQgPSBnZXRVbnZpc2l0ZWROb2RlKG5vZGUuY2hpbGRyZW4pKSB7CiAgICAgICAgY2hpbGQudmlzaXRlZCA9IHRydWU7CiAgICAgICAgdmlzaXRGdW5jKGNoaWxkLCBiZHMsIGVxcyk7CiAgICAgICAgcXVldWUucHVzaChjaGlsZCk7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIHZpc2l0RnVuYyhub2RlLCBiZHMsIGVxcykgewogICAgYmRzLnB1c2gobm9kZS5ib2R5KTsKICAgIGNvbnN0IE5lcXMgPSBub2RlLmVxcy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5lcXM7IGkrKykgewogICAgICBjb25zdCBlcSA9IG5vZGUuZXFzW2ldOwoKICAgICAgaWYgKCFlcXMuaW5jbHVkZXMoZXEpKSB7CiAgICAgICAgZXFzLnB1c2goZXEpOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBzb3J0QnlJZChhLCBiKSB7CiAgICByZXR1cm4gYi5pZCAtIGEuaWQ7CiAgfQogIC8qKgogICAqIEZvciBwb29saW5nIG9iamVjdHMgdGhhdCBjYW4gYmUgcmV1c2VkLgogICAqLwoKCiAgY2xhc3MgUG9vbCB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5vYmplY3RzID0gW107CiAgICAgIHRoaXMudHlwZSA9IE9iamVjdDsKICAgIH0KICAgIC8qKgogICAgICogUmVsZWFzZSBhbiBvYmplY3QgYWZ0ZXIgdXNlCiAgICAgKi8KCgogICAgcmVsZWFzZSgpIHsKICAgICAgY29uc3QgTmFyZ3MgPSBhcmd1bWVudHMubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5hcmdzOyBpKyspIHsKICAgICAgICB0aGlzLm9iamVjdHMucHVzaChpIDwgMCB8fCBhcmd1bWVudHMubGVuZ3RoIDw9IGkgPyB1bmRlZmluZWQgOiBhcmd1bWVudHNbaV0pOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFuIG9iamVjdAogICAgICovCgoKICAgIGdldCgpIHsKICAgICAgaWYgKHRoaXMub2JqZWN0cy5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3RPYmplY3QoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5vYmplY3RzLnBvcCgpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbnN0cnVjdCBhbiBvYmplY3QuIFNob3VsZCBiZSBpbXBsZW1lbnRlZCBpbiBlYWNoIHN1YmNsYXNzLgogICAgICovCgoKICAgIGNvbnN0cnVjdE9iamVjdCgpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb25zdHJ1Y3RPYmplY3QoKSBub3QgaW1wbGVtZW50ZWQgaW4gdGhpcyBQb29sIHN1YmNsYXNzIHlldCEnKTsKICAgIH0KICAgIC8qKgogICAgICogQHJldHVybiBTZWxmLCBmb3IgY2hhaW5pbmcKICAgICAqLwoKCiAgICByZXNpemUoc2l6ZSkgewogICAgICBjb25zdCBvYmplY3RzID0gdGhpcy5vYmplY3RzOwoKICAgICAgd2hpbGUgKG9iamVjdHMubGVuZ3RoID4gc2l6ZSkgewogICAgICAgIG9iamVjdHMucG9wKCk7CiAgICAgIH0KCiAgICAgIHdoaWxlIChvYmplY3RzLmxlbmd0aCA8IHNpemUpIHsKICAgICAgICBvYmplY3RzLnB1c2godGhpcy5jb25zdHJ1Y3RPYmplY3QoKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQoKICB9CiAgLyoqCiAgICogVmVjM1Bvb2wKICAgKi8KCgogIGNsYXNzIFZlYzNQb29sIGV4dGVuZHMgUG9vbCB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTsKICAgICAgdGhpcy50eXBlID0gVmVjMzsKICAgIH0KICAgIC8qKgogICAgICogQ29uc3RydWN0IGEgdmVjdG9yCiAgICAgKi8KCgogICAgY29uc3RydWN0T2JqZWN0KCkgewogICAgICByZXR1cm4gbmV3IFZlYzMoKTsKICAgIH0KCiAgfQoKICBsZXQgX0NPTExJU0lPTl9UWVBFUyRzcGhlLCBfQ09MTElTSU9OX1RZUEVTJHNwaGUyLCBfQ09MTElTSU9OX1RZUEVTJGJveEIsIF9DT0xMSVNJT05fVFlQRVMkc3BoZTMsIF9DT0xMSVNJT05fVFlQRVMkcGxhbiwgX0NPTExJU0lPTl9UWVBFUyRjb252LCBfQ09MTElTSU9OX1RZUEVTJHNwaGU0LCBfQ09MTElTSU9OX1RZUEVTJHBsYW4yLCBfQ09MTElTSU9OX1RZUEVTJGJveEMsIF9DT0xMSVNJT05fVFlQRVMkc3BoZTUsIF9DT0xMSVNJT05fVFlQRVMkYm94SCwgX0NPTExJU0lPTl9UWVBFUyRjb252MiwgX0NPTExJU0lPTl9UWVBFUyRzcGhlNiwgX0NPTExJU0lPTl9UWVBFUyRwbGFuMywgX0NPTExJU0lPTl9UWVBFUyRib3hQLCBfQ09MTElTSU9OX1RZUEVTJGNvbnYzLCBfQ09MTElTSU9OX1RZUEVTJGN5bGksIF9DT0xMSVNJT05fVFlQRVMkc3BoZTcsIF9DT0xMSVNJT05fVFlQRVMkcGxhbjQsIF9DT0xMSVNJT05fVFlQRVMkYm94QzIsIF9DT0xMSVNJT05fVFlQRVMkY29udjQsIF9DT0xMSVNJT05fVFlQRVMkaGVpZywgX0NPTExJU0lPTl9UWVBFUyRwYXJ0LCBfQ09MTElTSU9OX1RZUEVTJHNwaGU4LCBfQ09MTElTSU9OX1RZUEVTJHBsYW41OyAvLyBOYW1pbmcgcnVsZTogYmFzZWQgb2YgdGhlIG9yZGVyIGluIFNIQVBFX1RZUEVTLAogIC8vIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBtZXRob2QgaXMgZm9ybWVkIGJ5IHRoZQogIC8vIHNoYXBlIHR5cGUgdGhhdCBjb21lcyBiZWZvcmUsIGluIHRoZSBzZWNvbmQgcGFydAogIC8vIHRoZXJlIGlzIHRoZSBzaGFwZSB0eXBlIHRoYXQgY29tZXMgYWZ0ZXIgaW4gdGhlIFNIQVBFX1RZUEVTIGxpc3QKCgogIGNvbnN0IENPTExJU0lPTl9UWVBFUyA9IHsKICAgIHNwaGVyZVNwaGVyZTogU2hhcGUudHlwZXMuU1BIRVJFLAogICAgc3BoZXJlUGxhbmU6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLlBMQU5FLAogICAgYm94Qm94OiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5CT1gsCiAgICBzcGhlcmVCb3g6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLkJPWCwKICAgIHBsYW5lQm94OiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLkJPWCwKICAgIGNvbnZleENvbnZleDogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiwKICAgIHNwaGVyZUNvbnZleDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiwKICAgIHBsYW5lQ29udmV4OiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBib3hDb252ZXg6IFNoYXBlLnR5cGVzLkJPWCB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBzcGhlcmVIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuSEVJR0hURklFTEQsCiAgICBib3hIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuSEVJR0hURklFTEQsCiAgICBjb252ZXhIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiB8IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxELAogICAgc3BoZXJlUGFydGljbGU6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFIHwgU2hhcGUudHlwZXMuU1BIRVJFLAogICAgcGxhbmVQYXJ0aWNsZTogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5QQVJUSUNMRSwKICAgIGJveFBhcnRpY2xlOiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5QQVJUSUNMRSwKICAgIGNvbnZleFBhcnRpY2xlOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBjeWxpbmRlckN5bGluZGVyOiBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHNwaGVyZUN5bGluZGVyOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHBsYW5lQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBib3hDeWxpbmRlcjogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBjb252ZXhDeWxpbmRlcjogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgaGVpZ2h0ZmllbGRDeWxpbmRlcjogU2hhcGUudHlwZXMuSEVJR0hURklFTEQgfCBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIHBhcnRpY2xlQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBzcGhlcmVUcmltZXNoOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5UUklNRVNILAogICAgcGxhbmVUcmltZXNoOiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLlRSSU1FU0gKICB9OwogIF9DT0xMSVNJT05fVFlQRVMkc3BoZSA9IENPTExJU0lPTl9UWVBFUy5zcGhlcmVTcGhlcmU7CiAgX0NPTExJU0lPTl9UWVBFUyRzcGhlMiA9IENPTExJU0lPTl9UWVBFUy5zcGhlcmVQbGFuZTsKICBfQ09MTElTSU9OX1RZUEVTJGJveEIgPSBDT0xMSVNJT05fVFlQRVMuYm94Qm94OwogIF9DT0xMSVNJT05fVFlQRVMkc3BoZTMgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlQm94OwogIF9DT0xMSVNJT05fVFlQRVMkcGxhbiA9IENPTExJU0lPTl9UWVBFUy5wbGFuZUJveDsKICBfQ09MTElTSU9OX1RZUEVTJGNvbnYgPSBDT0xMSVNJT05fVFlQRVMuY29udmV4Q29udmV4OwogIF9DT0xMSVNJT05fVFlQRVMkc3BoZTQgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlQ29udmV4OwogIF9DT0xMSVNJT05fVFlQRVMkcGxhbjIgPSBDT0xMSVNJT05fVFlQRVMucGxhbmVDb252ZXg7CiAgX0NPTExJU0lPTl9UWVBFUyRib3hDID0gQ09MTElTSU9OX1RZUEVTLmJveENvbnZleDsKICBfQ09MTElTSU9OX1RZUEVTJHNwaGU1ID0gQ09MTElTSU9OX1RZUEVTLnNwaGVyZUhlaWdodGZpZWxkOwogIF9DT0xMSVNJT05fVFlQRVMkYm94SCA9IENPTExJU0lPTl9UWVBFUy5ib3hIZWlnaHRmaWVsZDsKICBfQ09MTElTSU9OX1RZUEVTJGNvbnYyID0gQ09MTElTSU9OX1RZUEVTLmNvbnZleEhlaWdodGZpZWxkOwogIF9DT0xMSVNJT05fVFlQRVMkc3BoZTYgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlUGFydGljbGU7CiAgX0NPTExJU0lPTl9UWVBFUyRwbGFuMyA9IENPTExJU0lPTl9UWVBFUy5wbGFuZVBhcnRpY2xlOwogIF9DT0xMSVNJT05fVFlQRVMkYm94UCA9IENPTExJU0lPTl9UWVBFUy5ib3hQYXJ0aWNsZTsKICBfQ09MTElTSU9OX1RZUEVTJGNvbnYzID0gQ09MTElTSU9OX1RZUEVTLmNvbnZleFBhcnRpY2xlOwogIF9DT0xMSVNJT05fVFlQRVMkY3lsaSA9IENPTExJU0lPTl9UWVBFUy5jeWxpbmRlckN5bGluZGVyOwogIF9DT0xMSVNJT05fVFlQRVMkc3BoZTcgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlQ3lsaW5kZXI7CiAgX0NPTExJU0lPTl9UWVBFUyRwbGFuNCA9IENPTExJU0lPTl9UWVBFUy5wbGFuZUN5bGluZGVyOwogIF9DT0xMSVNJT05fVFlQRVMkYm94QzIgPSBDT0xMSVNJT05fVFlQRVMuYm94Q3lsaW5kZXI7CiAgX0NPTExJU0lPTl9UWVBFUyRjb252NCA9IENPTExJU0lPTl9UWVBFUy5jb252ZXhDeWxpbmRlcjsKICBfQ09MTElTSU9OX1RZUEVTJGhlaWcgPSBDT0xMSVNJT05fVFlQRVMuaGVpZ2h0ZmllbGRDeWxpbmRlcjsKICBfQ09MTElTSU9OX1RZUEVTJHBhcnQgPSBDT0xMSVNJT05fVFlQRVMucGFydGljbGVDeWxpbmRlcjsKICBfQ09MTElTSU9OX1RZUEVTJHNwaGU4ID0gQ09MTElTSU9OX1RZUEVTLnNwaGVyZVRyaW1lc2g7CiAgX0NPTExJU0lPTl9UWVBFUyRwbGFuNSA9IENPTExJU0lPTl9UWVBFUy5wbGFuZVRyaW1lc2g7CiAgLyoqCiAgICogSGVscGVyIGNsYXNzIGZvciB0aGUgV29ybGQuIEdlbmVyYXRlcyBDb250YWN0RXF1YXRpb25zLgogICAqIEB0b2RvIFNwaGVyZS1Db252ZXhQb2x5aGVkcm9uIGNvbnRhY3RzCiAgICogQHRvZG8gQ29udGFjdCByZWR1Y3Rpb24KICAgKiBAdG9kbyBzaG91bGQgbW92ZSBtZXRob2RzIHRvIHByb3RvdHlwZQogICAqLwoKICBjbGFzcyBOYXJyb3dwaGFzZSB7CiAgICAvKioKICAgICAqIEludGVybmFsIHN0b3JhZ2Ugb2YgcG9vbGVkIGNvbnRhY3QgcG9pbnRzLgogICAgICovCgogICAgLyoqCiAgICAgKiBQb29sZWQgdmVjdG9ycy4KICAgICAqLwogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGVdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVTcGhlcmU7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGUyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlUGxhbmU7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGJveEJdKCkgewogICAgICByZXR1cm4gdGhpcy5ib3hCb3g7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGUzXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQm94OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRwbGFuXSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGxhbmVCb3g7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnZdKCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXg7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGU0XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQ29udmV4OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRwbGFuMl0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRib3hDXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94Q29udmV4OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlNV0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZUhlaWdodGZpZWxkOwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRib3hIXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94SGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnYyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4SGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGU2XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlUGFydGljbGU7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHBsYW4zXSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGxhbmVQYXJ0aWNsZTsKICAgIH0KCiAgICBnZXQgW19DT0xMSVNJT05fVFlQRVMkYm94UF0oKSB7CiAgICAgIHJldHVybiB0aGlzLmJveFBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRjb252M10oKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleFBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRjeWxpXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlN10oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZUNvbnZleDsKICAgIH0KCiAgICBnZXQgW19DT0xMSVNJT05fVFlQRVMkcGxhbjRdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZUNvbnZleDsKICAgIH0KCiAgICBnZXQgW19DT0xMSVNJT05fVFlQRVMkYm94QzJdKCkgewogICAgICByZXR1cm4gdGhpcy5ib3hDb252ZXg7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGNvbnY0XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbX0NPTExJU0lPTl9UWVBFUyRoZWlnXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0ZmllbGRDeWxpbmRlcjsKICAgIH0KCiAgICBnZXQgW19DT0xMSVNJT05fVFlQRVMkcGFydF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBhcnRpY2xlQ3lsaW5kZXI7CiAgICB9CgogICAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGU4XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlVHJpbWVzaDsKICAgIH0KCiAgICBnZXQgW19DT0xMSVNJT05fVFlQRVMkcGxhbjVdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZVRyaW1lc2g7CiAgICB9IC8vIGdldCBbQ09MTElTSU9OX1RZUEVTLmNvbnZleFRyaW1lc2hdKCkgewogICAgLy8gICByZXR1cm4gdGhpcy5jb252ZXhUcmltZXNoCiAgICAvLyB9CgoKICAgIGNvbnN0cnVjdG9yKHdvcmxkKSB7CiAgICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IHZvaWQgMDsKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9uUG9vbCA9IHZvaWQgMDsKICAgICAgdGhpcy5yZXN1bHQgPSB2b2lkIDA7CiAgICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSB2b2lkIDA7CiAgICAgIHRoaXMudjNwb29sID0gdm9pZCAwOwogICAgICB0aGlzLndvcmxkID0gdm9pZCAwOwogICAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24gPSB2b2lkIDA7CiAgICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IFtdOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gW107CiAgICAgIHRoaXMucmVzdWx0ID0gW107CiAgICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSBbXTsKICAgICAgdGhpcy52M3Bvb2wgPSBuZXcgVmVjM1Bvb2woKTsKICAgICAgdGhpcy53b3JsZCA9IHdvcmxkOwogICAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOwogICAgICB0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgYSBjb250YWN0IG9iamVjdCwgYnkgdXNpbmcgdGhlIGludGVybmFsIHBvb2wgb3IgY3JlYXRpbmcgYSBuZXcgb25lLgogICAgICovCgoKICAgIGNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgb3ZlcnJpZGVTaGFwZUEsIG92ZXJyaWRlU2hhcGVCKSB7CiAgICAgIGxldCBjOwoKICAgICAgaWYgKHRoaXMuY29udGFjdFBvaW50UG9vbC5sZW5ndGgpIHsKICAgICAgICBjID0gdGhpcy5jb250YWN0UG9pbnRQb29sLnBvcCgpOwogICAgICAgIGMuYmkgPSBiaTsKICAgICAgICBjLmJqID0gYmo7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYyA9IG5ldyBDb250YWN0RXF1YXRpb24oYmksIGJqKTsKICAgICAgfQoKICAgICAgYy5lbmFibGVkID0gYmkuY29sbGlzaW9uUmVzcG9uc2UgJiYgYmouY29sbGlzaW9uUmVzcG9uc2UgJiYgc2kuY29sbGlzaW9uUmVzcG9uc2UgJiYgc2ouY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIGNvbnN0IGNtID0gdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsOwogICAgICBjLnJlc3RpdHV0aW9uID0gY20ucmVzdGl0dXRpb247CiAgICAgIGMuc2V0U3Bvb2tQYXJhbXMoY20uY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzLCBjbS5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uLCB0aGlzLndvcmxkLmR0KTsKICAgICAgY29uc3QgbWF0QSA9IHNpLm1hdGVyaWFsIHx8IGJpLm1hdGVyaWFsOwogICAgICBjb25zdCBtYXRCID0gc2oubWF0ZXJpYWwgfHwgYmoubWF0ZXJpYWw7CgogICAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEucmVzdGl0dXRpb24gPj0gMCAmJiBtYXRCLnJlc3RpdHV0aW9uID49IDApIHsKICAgICAgICBjLnJlc3RpdHV0aW9uID0gbWF0QS5yZXN0aXR1dGlvbiAqIG1hdEIucmVzdGl0dXRpb247CiAgICAgIH0KCiAgICAgIGMuc2kgPSBvdmVycmlkZVNoYXBlQSB8fCBzaTsKICAgICAgYy5zaiA9IG92ZXJyaWRlU2hhcGVCIHx8IHNqOwogICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBjcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGNvbnRhY3RFcXVhdGlvbiwgb3V0QXJyYXkpIHsKICAgICAgY29uc3QgYm9keUEgPSBjb250YWN0RXF1YXRpb24uYmk7CiAgICAgIGNvbnN0IGJvZHlCID0gY29udGFjdEVxdWF0aW9uLmJqOwogICAgICBjb25zdCBzaGFwZUEgPSBjb250YWN0RXF1YXRpb24uc2k7CiAgICAgIGNvbnN0IHNoYXBlQiA9IGNvbnRhY3RFcXVhdGlvbi5zajsKICAgICAgY29uc3Qgd29ybGQgPSB0aGlzLndvcmxkOwogICAgICBjb25zdCBjbSA9IHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbDsgLy8gSWYgZnJpY3Rpb24gb3IgcmVzdGl0dXRpb24gd2VyZSBzcGVjaWZpZWQgaW4gdGhlIG1hdGVyaWFsLCB1c2UgdGhlbQoKICAgICAgbGV0IGZyaWN0aW9uID0gY20uZnJpY3Rpb247CiAgICAgIGNvbnN0IG1hdEEgPSBzaGFwZUEubWF0ZXJpYWwgfHwgYm9keUEubWF0ZXJpYWw7CiAgICAgIGNvbnN0IG1hdEIgPSBzaGFwZUIubWF0ZXJpYWwgfHwgYm9keUIubWF0ZXJpYWw7CgogICAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEuZnJpY3Rpb24gPj0gMCAmJiBtYXRCLmZyaWN0aW9uID49IDApIHsKICAgICAgICBmcmljdGlvbiA9IG1hdEEuZnJpY3Rpb24gKiBtYXRCLmZyaWN0aW9uOwogICAgICB9CgogICAgICBpZiAoZnJpY3Rpb24gPiAwKSB7CiAgICAgICAgLy8gQ3JlYXRlIDIgdGFuZ2VudCBlcXVhdGlvbnMKICAgICAgICBjb25zdCBtdWcgPSBmcmljdGlvbiAqIHdvcmxkLmdyYXZpdHkubGVuZ3RoKCk7CiAgICAgICAgbGV0IHJlZHVjZWRNYXNzID0gYm9keUEuaW52TWFzcyArIGJvZHlCLmludk1hc3M7CgogICAgICAgIGlmIChyZWR1Y2VkTWFzcyA+IDApIHsKICAgICAgICAgIHJlZHVjZWRNYXNzID0gMSAvIHJlZHVjZWRNYXNzOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgcG9vbCA9IHRoaXMuZnJpY3Rpb25FcXVhdGlvblBvb2w7CiAgICAgICAgY29uc3QgYzEgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihib2R5QSwgYm9keUIsIG11ZyAqIHJlZHVjZWRNYXNzKTsKICAgICAgICBjb25zdCBjMiA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJvZHlBLCBib2R5QiwgbXVnICogcmVkdWNlZE1hc3MpOwogICAgICAgIGMxLmJpID0gYzIuYmkgPSBib2R5QTsKICAgICAgICBjMS5iaiA9IGMyLmJqID0gYm9keUI7CiAgICAgICAgYzEubWluRm9yY2UgPSBjMi5taW5Gb3JjZSA9IC1tdWcgKiByZWR1Y2VkTWFzczsKICAgICAgICBjMS5tYXhGb3JjZSA9IGMyLm1heEZvcmNlID0gbXVnICogcmVkdWNlZE1hc3M7IC8vIENvcHkgb3ZlciB0aGUgcmVsYXRpdmUgdmVjdG9ycwoKICAgICAgICBjMS5yaS5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaSk7CiAgICAgICAgYzEucmouY29weShjb250YWN0RXF1YXRpb24ucmopOwogICAgICAgIGMyLnJpLmNvcHkoY29udGFjdEVxdWF0aW9uLnJpKTsKICAgICAgICBjMi5yai5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaik7IC8vIENvbnN0cnVjdCB0YW5nZW50cwoKICAgICAgICBjb250YWN0RXF1YXRpb24ubmkudGFuZ2VudHMoYzEudCwgYzIudCk7IC8vIFNldCBzcG9vayBwYXJhbXMKCiAgICAgICAgYzEuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIHdvcmxkLmR0KTsKICAgICAgICBjMi5zZXRTcG9va1BhcmFtcyhjbS5mcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzLCBjbS5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiwgd29ybGQuZHQpOwogICAgICAgIGMxLmVuYWJsZWQgPSBjMi5lbmFibGVkID0gY29udGFjdEVxdWF0aW9uLmVuYWJsZWQ7CiAgICAgICAgb3V0QXJyYXkucHVzaChjMSwgYzIpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIFRha2UgdGhlIGF2ZXJhZ2UgTiBsYXRlc3QgY29udGFjdCBwb2ludCBvbiB0aGUgcGxhbmUuCiAgICAgKi8KCgogICAgY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cykgewogICAgICAvLyBUaGUgbGFzdCBjb250YWN0RXF1YXRpb24KICAgICAgbGV0IGMgPSB0aGlzLnJlc3VsdFt0aGlzLnJlc3VsdC5sZW5ndGggLSAxXTsgLy8gQ3JlYXRlIHRoZSByZXN1bHQ6IHR3byAiYXZlcmFnZSIgZnJpY3Rpb24gZXF1YXRpb25zCgogICAgICBpZiAoIXRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChjLCB0aGlzLmZyaWN0aW9uUmVzdWx0KSB8fCBudW1Db250YWN0cyA9PT0gMSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgZjEgPSB0aGlzLmZyaWN0aW9uUmVzdWx0W3RoaXMuZnJpY3Rpb25SZXN1bHQubGVuZ3RoIC0gMl07CiAgICAgIGNvbnN0IGYyID0gdGhpcy5mcmljdGlvblJlc3VsdFt0aGlzLmZyaWN0aW9uUmVzdWx0Lmxlbmd0aCAtIDFdOwogICAgICBhdmVyYWdlTm9ybWFsLnNldFplcm8oKTsKICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEEuc2V0WmVybygpOwogICAgICBhdmVyYWdlQ29udGFjdFBvaW50Qi5zZXRaZXJvKCk7CiAgICAgIGNvbnN0IGJvZHlBID0gYy5iaTsKICAgICAgYy5iajsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBudW1Db250YWN0czsgaSsrKSB7CiAgICAgICAgYyA9IHRoaXMucmVzdWx0W3RoaXMucmVzdWx0Lmxlbmd0aCAtIDEgLSBpXTsKCiAgICAgICAgaWYgKGMuYmkgIT09IGJvZHlBKSB7CiAgICAgICAgICBhdmVyYWdlTm9ybWFsLnZhZGQoYy5uaSwgYXZlcmFnZU5vcm1hbCk7CiAgICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50QS52YWRkKGMucmksIGF2ZXJhZ2VDb250YWN0UG9pbnRBKTsKICAgICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnZhZGQoYy5yaiwgYXZlcmFnZUNvbnRhY3RQb2ludEIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhdmVyYWdlTm9ybWFsLnZzdWIoYy5uaSwgYXZlcmFnZU5vcm1hbCk7CiAgICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50QS52YWRkKGMucmosIGF2ZXJhZ2VDb250YWN0UG9pbnRBKTsKICAgICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnZhZGQoYy5yaSwgYXZlcmFnZUNvbnRhY3RQb2ludEIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgY29uc3QgaW52TnVtQ29udGFjdHMgPSAxIC8gbnVtQ29udGFjdHM7CiAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnNjYWxlKGludk51bUNvbnRhY3RzLCBmMS5yaSk7CiAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnNjYWxlKGludk51bUNvbnRhY3RzLCBmMS5yaik7CiAgICAgIGYyLnJpLmNvcHkoZjEucmkpOyAvLyBTaG91bGQgYmUgdGhlIHNhbWUKCiAgICAgIGYyLnJqLmNvcHkoZjEucmopOwogICAgICBhdmVyYWdlTm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICBhdmVyYWdlTm9ybWFsLnRhbmdlbnRzKGYxLnQsIGYyLnQpOyAvLyByZXR1cm4gZXE7CiAgICB9CiAgICAvKioKICAgICAqIEdlbmVyYXRlIGFsbCBjb250YWN0cyBiZXR3ZWVuIGEgbGlzdCBvZiBib2R5IHBhaXJzCiAgICAgKiBAcGFyYW0gcDEgQXJyYXkgb2YgYm9keSBpbmRpY2VzCiAgICAgKiBAcGFyYW0gcDIgQXJyYXkgb2YgYm9keSBpbmRpY2VzCiAgICAgKiBAcGFyYW0gcmVzdWx0IEFycmF5IHRvIHN0b3JlIGdlbmVyYXRlZCBjb250YWN0cwogICAgICogQHBhcmFtIG9sZGNvbnRhY3RzIE9wdGlvbmFsLiBBcnJheSBvZiByZXVzYWJsZSBjb250YWN0IG9iamVjdHMKICAgICAqLwoKCiAgICBnZXRDb250YWN0cyhwMSwgcDIsIHdvcmxkLCByZXN1bHQsIG9sZGNvbnRhY3RzLCBmcmljdGlvblJlc3VsdCwgZnJpY3Rpb25Qb29sKSB7CiAgICAgIC8vIFNhdmUgb2xkIGNvbnRhY3Qgb2JqZWN0cwogICAgICB0aGlzLmNvbnRhY3RQb2ludFBvb2wgPSBvbGRjb250YWN0czsKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9uUG9vbCA9IGZyaWN0aW9uUG9vbDsKICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7CiAgICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSBmcmljdGlvblJlc3VsdDsKICAgICAgY29uc3QgcWkgPSB0bXBRdWF0MTsKICAgICAgY29uc3QgcWogPSB0bXBRdWF0MjsKICAgICAgY29uc3QgeGkgPSB0bXBWZWMxOwogICAgICBjb25zdCB4aiA9IHRtcFZlYzI7CgogICAgICBmb3IgKGxldCBrID0gMCwgTiA9IHAxLmxlbmd0aDsgayAhPT0gTjsgaysrKSB7CiAgICAgICAgLy8gR2V0IGN1cnJlbnQgY29sbGlzaW9uIGJvZGllcwogICAgICAgIGNvbnN0IGJpID0gcDFba107CiAgICAgICAgY29uc3QgYmogPSBwMltrXTsgLy8gR2V0IGNvbnRhY3QgbWF0ZXJpYWwKCiAgICAgICAgbGV0IGJvZHlDb250YWN0TWF0ZXJpYWwgPSBudWxsOwoKICAgICAgICBpZiAoYmkubWF0ZXJpYWwgJiYgYmoubWF0ZXJpYWwpIHsKICAgICAgICAgIGJvZHlDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5nZXRDb250YWN0TWF0ZXJpYWwoYmkubWF0ZXJpYWwsIGJqLm1hdGVyaWFsKSB8fCBudWxsOwogICAgICAgIH0KCiAgICAgICAgY29uc3QganVzdFRlc3QgPSBiaS50eXBlICYgQm9keS5LSU5FTUFUSUMgJiYgYmoudHlwZSAmIEJvZHkuU1RBVElDIHx8IGJpLnR5cGUgJiBCb2R5LlNUQVRJQyAmJiBiai50eXBlICYgQm9keS5LSU5FTUFUSUMgfHwgYmkudHlwZSAmIEJvZHkuS0lORU1BVElDICYmIGJqLnR5cGUgJiBCb2R5LktJTkVNQVRJQzsKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiaS5zaGFwZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGJpLnF1YXRlcm5pb24ubXVsdChiaS5zaGFwZU9yaWVudGF0aW9uc1tpXSwgcWkpOwogICAgICAgICAgYmkucXVhdGVybmlvbi52bXVsdChiaS5zaGFwZU9mZnNldHNbaV0sIHhpKTsKICAgICAgICAgIHhpLnZhZGQoYmkucG9zaXRpb24sIHhpKTsKICAgICAgICAgIGNvbnN0IHNpID0gYmkuc2hhcGVzW2ldOwoKICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYmouc2hhcGVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIC8vIENvbXB1dGUgd29ybGQgdHJhbnNmb3JtIG9mIHNoYXBlcwogICAgICAgICAgICBiai5xdWF0ZXJuaW9uLm11bHQoYmouc2hhcGVPcmllbnRhdGlvbnNbal0sIHFqKTsKICAgICAgICAgICAgYmoucXVhdGVybmlvbi52bXVsdChiai5zaGFwZU9mZnNldHNbal0sIHhqKTsKICAgICAgICAgICAgeGoudmFkZChiai5wb3NpdGlvbiwgeGopOwogICAgICAgICAgICBjb25zdCBzaiA9IGJqLnNoYXBlc1tqXTsKCiAgICAgICAgICAgIGlmICghKHNpLmNvbGxpc2lvbkZpbHRlck1hc2sgJiBzai5jb2xsaXNpb25GaWx0ZXJHcm91cCAmJiBzai5jb2xsaXNpb25GaWx0ZXJNYXNrICYgc2kuY29sbGlzaW9uRmlsdGVyR3JvdXApKSB7CiAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh4aS5kaXN0YW5jZVRvKHhqKSA+IHNpLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2ouYm91bmRpbmdTcGhlcmVSYWRpdXMpIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfSAvLyBHZXQgY29sbGlzaW9uIG1hdGVyaWFsCgoKICAgICAgICAgICAgbGV0IHNoYXBlQ29udGFjdE1hdGVyaWFsID0gbnVsbDsKCiAgICAgICAgICAgIGlmIChzaS5tYXRlcmlhbCAmJiBzai5tYXRlcmlhbCkgewogICAgICAgICAgICAgIHNoYXBlQ29udGFjdE1hdGVyaWFsID0gd29ybGQuZ2V0Q29udGFjdE1hdGVyaWFsKHNpLm1hdGVyaWFsLCBzai5tYXRlcmlhbCkgfHwgbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsID0gc2hhcGVDb250YWN0TWF0ZXJpYWwgfHwgYm9keUNvbnRhY3RNYXRlcmlhbCB8fCB3b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOyAvLyBHZXQgY29udGFjdHMKCiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVySW5kZXggPSBzaS50eXBlIHwgc2oudHlwZTsKICAgICAgICAgICAgY29uc3QgcmVzb2x2ZXIgPSB0aGlzW3Jlc29sdmVySW5kZXhdOwoKICAgICAgICAgICAgaWYgKHJlc29sdmVyKSB7CiAgICAgICAgICAgICAgbGV0IHJldHZhbCA9IGZhbHNlOyAvLyBUTyBETzogaW52ZXN0aWdhdGUgd2h5IHNwaGVyZVBhcnRpY2xlIGFuZCBjb252ZXhQYXJ0aWNsZQogICAgICAgICAgICAgIC8vIHJlc29sdmVycyBleHBlY3Qgc2kgYW5kIHNqIHNoYXBlcyB0byBiZSBpbiByZXZlcnNlIG9yZGVyCiAgICAgICAgICAgICAgLy8gKGkuZS4gbGFyZ2VyIGludGVnZXIgdmFsdWUgdHlwZSBmaXJzdCBpbnN0ZWFkIG9mIHNtYWxsZXIgZmlyc3QpCgogICAgICAgICAgICAgIGlmIChzaS50eXBlIDwgc2oudHlwZSkgewogICAgICAgICAgICAgICAgcmV0dmFsID0gcmVzb2x2ZXIuY2FsbCh0aGlzLCBzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXR2YWwgPSByZXNvbHZlci5jYWxsKHRoaXMsIHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBpZiAocmV0dmFsICYmIGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICAvLyBSZWdpc3RlciBvdmVybGFwCiAgICAgICAgICAgICAgICB3b3JsZC5zaGFwZU92ZXJsYXBLZWVwZXIuc2V0KHNpLmlkLCBzai5pZCk7CiAgICAgICAgICAgICAgICB3b3JsZC5ib2R5T3ZlcmxhcEtlZXBlci5zZXQoYmkuaWQsIGJqLmlkKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzcGhlcmVTcGhlcmUoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgcmV0dXJuIHhpLmRpc3RhbmNlU3F1YXJlZCh4aikgPCAoc2kucmFkaXVzICsgc2oucmFkaXVzKSAqKiAyOwogICAgICB9IC8vIFdlIHdpbGwgaGF2ZSBvbmx5IG9uZSBjb250YWN0IGluIHRoaXMgY2FzZQoKCiAgICAgIGNvbnN0IGNvbnRhY3RFcSA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7IC8vIENvbnRhY3Qgbm9ybWFsCgogICAgICB4ai52c3ViKHhpLCBjb250YWN0RXEubmkpOwogICAgICBjb250YWN0RXEubmkubm9ybWFsaXplKCk7IC8vIENvbnRhY3QgcG9pbnQgbG9jYXRpb25zCgogICAgICBjb250YWN0RXEucmkuY29weShjb250YWN0RXEubmkpOwogICAgICBjb250YWN0RXEucmouY29weShjb250YWN0RXEubmkpOwogICAgICBjb250YWN0RXEucmkuc2NhbGUoc2kucmFkaXVzLCBjb250YWN0RXEucmkpOwogICAgICBjb250YWN0RXEucmouc2NhbGUoLXNqLnJhZGl1cywgY29udGFjdEVxLnJqKTsKICAgICAgY29udGFjdEVxLnJpLnZhZGQoeGksIGNvbnRhY3RFcS5yaSk7CiAgICAgIGNvbnRhY3RFcS5yaS52c3ViKGJpLnBvc2l0aW9uLCBjb250YWN0RXEucmkpOwogICAgICBjb250YWN0RXEucmoudmFkZCh4aiwgY29udGFjdEVxLnJqKTsKICAgICAgY29udGFjdEVxLnJqLnZzdWIoYmoucG9zaXRpb24sIGNvbnRhY3RFcS5yaik7CiAgICAgIHRoaXMucmVzdWx0LnB1c2goY29udGFjdEVxKTsKICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGNvbnRhY3RFcSwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICB9CgogICAgc3BoZXJlUGxhbmUoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgLy8gV2Ugd2lsbCBoYXZlIG9uZSBjb250YWN0IGluIHRoaXMgY2FzZQogICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgIHIubmkuc2V0KDAsIDAsIDEpOwogICAgICBxai52bXVsdChyLm5pLCByLm5pKTsKICAgICAgci5uaS5uZWdhdGUoci5uaSk7IC8vIGJvZHkgaSBpcyB0aGUgc3BoZXJlLCBmbGlwIG5vcm1hbAoKICAgICAgci5uaS5ub3JtYWxpemUoKTsgLy8gTmVlZGVkPwogICAgICAvLyBWZWN0b3IgZnJvbSBzcGhlcmUgY2VudGVyIHRvIGNvbnRhY3QgcG9pbnQKCiAgICAgIHIubmkuc2NhbGUoc2kucmFkaXVzLCByLnJpKTsgLy8gUHJvamVjdCBkb3duIHNwaGVyZSBvbiBwbGFuZQoKICAgICAgeGkudnN1Yih4aiwgcG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlKTsKICAgICAgci5uaS5zY2FsZShyLm5pLmRvdChwb2ludF9vbl9wbGFuZV90b19zcGhlcmUpLCBwbGFuZV90b19zcGhlcmVfb3J0aG8pOwogICAgICBwb2ludF9vbl9wbGFuZV90b19zcGhlcmUudnN1YihwbGFuZV90b19zcGhlcmVfb3J0aG8sIHIucmopOyAvLyBUaGUgc3BoZXJlIHBvc2l0aW9uIHByb2plY3RlZCB0byBwbGFuZQoKICAgICAgaWYgKC1wb2ludF9vbl9wbGFuZV90b19zcGhlcmUuZG90KHIubmkpIDw9IHNpLnJhZGl1cykgewogICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSAvLyBNYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSBib2R5CgoKICAgICAgICBjb25zdCByaSA9IHIucmk7CiAgICAgICAgY29uc3QgcmogPSByLnJqOwogICAgICAgIHJpLnZhZGQoeGksIHJpKTsKICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAgICAgcmoudmFkZCh4aiwgcmopOwogICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIGJveEJveChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzaS5tYXRlcmlhbDsKICAgICAgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2oubWF0ZXJpYWw7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzai5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4KHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgIH0KCiAgICBzcGhlcmVCb3goc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgdjNwb29sID0gdGhpcy52M3Bvb2w7IC8vIHdlIHJlZmVyIHRvIHRoZSBib3ggYXMgYm9keSBqCgogICAgICBjb25zdCBzaWRlcyA9IHNwaGVyZUJveF9zaWRlczsKICAgICAgeGkudnN1Yih4aiwgYm94X3RvX3NwaGVyZSk7CiAgICAgIHNqLmdldFNpZGVOb3JtYWxzKHNpZGVzLCBxaik7CiAgICAgIGNvbnN0IFIgPSBzaS5yYWRpdXM7CiAgICAgIGxldCBmb3VuZCA9IGZhbHNlOyAvLyBTdG9yZSB0aGUgcmVzdWx0aW5nIHNpZGUgcGVuZXRyYXRpb24gaW5mbwoKICAgICAgY29uc3Qgc2lkZV9ucyA9IHNwaGVyZUJveF9zaWRlX25zOwogICAgICBjb25zdCBzaWRlX25zMSA9IHNwaGVyZUJveF9zaWRlX25zMTsKICAgICAgY29uc3Qgc2lkZV9uczIgPSBzcGhlcmVCb3hfc2lkZV9uczI7CiAgICAgIGxldCBzaWRlX2ggPSBudWxsOwogICAgICBsZXQgc2lkZV9wZW5ldHJhdGlvbnMgPSAwOwogICAgICBsZXQgc2lkZV9kb3QxID0gMDsKICAgICAgbGV0IHNpZGVfZG90MiA9IDA7CiAgICAgIGxldCBzaWRlX2Rpc3RhbmNlID0gbnVsbDsKCiAgICAgIGZvciAobGV0IGlkeCA9IDAsIG5zaWRlcyA9IHNpZGVzLmxlbmd0aDsgaWR4ICE9PSBuc2lkZXMgJiYgZm91bmQgPT09IGZhbHNlOyBpZHgrKykgewogICAgICAgIC8vIEdldCB0aGUgcGxhbmUgc2lkZSBub3JtYWwgKG5zKQogICAgICAgIGNvbnN0IG5zID0gc3BoZXJlQm94X25zOwogICAgICAgIG5zLmNvcHkoc2lkZXNbaWR4XSk7CiAgICAgICAgY29uc3QgaCA9IG5zLmxlbmd0aCgpOwogICAgICAgIG5zLm5vcm1hbGl6ZSgpOyAvLyBUaGUgbm9ybWFsL2Rpc3RhbmNlIGRvdCBwcm9kdWN0IHRlbGxzIHdoaWNoIHNpZGUgb2YgdGhlIHBsYW5lIHdlIGFyZQoKICAgICAgICBjb25zdCBkb3QgPSBib3hfdG9fc3BoZXJlLmRvdChucyk7CgogICAgICAgIGlmIChkb3QgPCBoICsgUiAmJiBkb3QgPiAwKSB7CiAgICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgdGhlIG90aGVyIHR3byBkaW1lbnNpb25zCiAgICAgICAgICBjb25zdCBuczEgPSBzcGhlcmVCb3hfbnMxOwogICAgICAgICAgY29uc3QgbnMyID0gc3BoZXJlQm94X25zMjsKICAgICAgICAgIG5zMS5jb3B5KHNpZGVzWyhpZHggKyAxKSAlIDNdKTsKICAgICAgICAgIG5zMi5jb3B5KHNpZGVzWyhpZHggKyAyKSAlIDNdKTsKICAgICAgICAgIGNvbnN0IGgxID0gbnMxLmxlbmd0aCgpOwogICAgICAgICAgY29uc3QgaDIgPSBuczIubGVuZ3RoKCk7CiAgICAgICAgICBuczEubm9ybWFsaXplKCk7CiAgICAgICAgICBuczIubm9ybWFsaXplKCk7CiAgICAgICAgICBjb25zdCBkb3QxID0gYm94X3RvX3NwaGVyZS5kb3QobnMxKTsKICAgICAgICAgIGNvbnN0IGRvdDIgPSBib3hfdG9fc3BoZXJlLmRvdChuczIpOwoKICAgICAgICAgIGlmIChkb3QxIDwgaDEgJiYgZG90MSA+IC1oMSAmJiBkb3QyIDwgaDIgJiYgZG90MiA+IC1oMikgewogICAgICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5hYnMoZG90IC0gaCAtIFIpOwoKICAgICAgICAgICAgaWYgKHNpZGVfZGlzdGFuY2UgPT09IG51bGwgfHwgZGlzdCA8IHNpZGVfZGlzdGFuY2UpIHsKICAgICAgICAgICAgICBzaWRlX2Rpc3RhbmNlID0gZGlzdDsKICAgICAgICAgICAgICBzaWRlX2RvdDEgPSBkb3QxOwogICAgICAgICAgICAgIHNpZGVfZG90MiA9IGRvdDI7CiAgICAgICAgICAgICAgc2lkZV9oID0gaDsKICAgICAgICAgICAgICBzaWRlX25zLmNvcHkobnMpOwogICAgICAgICAgICAgIHNpZGVfbnMxLmNvcHkobnMxKTsKICAgICAgICAgICAgICBzaWRlX25zMi5jb3B5KG5zMik7CiAgICAgICAgICAgICAgc2lkZV9wZW5ldHJhdGlvbnMrKzsKCiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChzaWRlX3BlbmV0cmF0aW9ucykgewogICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICBzaWRlX25zLnNjYWxlKC1SLCByLnJpKTsgLy8gU3BoZXJlIHIKCiAgICAgICAgci5uaS5jb3B5KHNpZGVfbnMpOwogICAgICAgIHIubmkubmVnYXRlKHIubmkpOyAvLyBOb3JtYWwgc2hvdWxkIGJlIG91dCBvZiBzcGhlcmUKCiAgICAgICAgc2lkZV9ucy5zY2FsZShzaWRlX2gsIHNpZGVfbnMpOwogICAgICAgIHNpZGVfbnMxLnNjYWxlKHNpZGVfZG90MSwgc2lkZV9uczEpOwogICAgICAgIHNpZGVfbnMudmFkZChzaWRlX25zMSwgc2lkZV9ucyk7CiAgICAgICAgc2lkZV9uczIuc2NhbGUoc2lkZV9kb3QyLCBzaWRlX25zMik7CiAgICAgICAgc2lkZV9ucy52YWRkKHNpZGVfbnMyLCByLnJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgci5yaS52YWRkKHhpLCByLnJpKTsKICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7CiAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfSAvLyBDaGVjayBjb3JuZXJzCgoKICAgICAgbGV0IHJqID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQm94X3NwaGVyZV90b19jb3JuZXI7CgogICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gMiAmJiAhZm91bmQ7IGorKykgewogICAgICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSAyICYmICFmb3VuZDsgaysrKSB7CiAgICAgICAgICBmb3IgKGxldCBsID0gMDsgbCAhPT0gMiAmJiAhZm91bmQ7IGwrKykgewogICAgICAgICAgICByai5zZXQoMCwgMCwgMCk7CgogICAgICAgICAgICBpZiAoaikgewogICAgICAgICAgICAgIHJqLnZhZGQoc2lkZXNbMF0sIHJqKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByai52c3ViKHNpZGVzWzBdLCByaik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChrKSB7CiAgICAgICAgICAgICAgcmoudmFkZChzaWRlc1sxXSwgcmopOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJqLnZzdWIoc2lkZXNbMV0sIHJqKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGwpIHsKICAgICAgICAgICAgICByai52YWRkKHNpZGVzWzJdLCByaik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmoudnN1YihzaWRlc1syXSwgcmopOwogICAgICAgICAgICB9IC8vIFdvcmxkIHBvc2l0aW9uIG9mIGNvcm5lcgoKCiAgICAgICAgICAgIHhqLnZhZGQocmosIHNwaGVyZV90b19jb3JuZXIpOwogICAgICAgICAgICBzcGhlcmVfdG9fY29ybmVyLnZzdWIoeGksIHNwaGVyZV90b19jb3JuZXIpOwoKICAgICAgICAgICAgaWYgKHNwaGVyZV90b19jb3JuZXIubGVuZ3RoU3F1YXJlZCgpIDwgUiAqIFIpIHsKICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgICAgIHIucmkuY29weShzcGhlcmVfdG9fY29ybmVyKTsKICAgICAgICAgICAgICByLnJpLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgIHIubmkuY29weShyLnJpKTsKICAgICAgICAgICAgICByLnJpLnNjYWxlKFIsIHIucmkpOwogICAgICAgICAgICAgIHIucmouY29weShyaik7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHYzcG9vbC5yZWxlYXNlKHJqKTsKICAgICAgcmogPSBudWxsOyAvLyBDaGVjayBlZGdlcwoKICAgICAgY29uc3QgZWRnZVRhbmdlbnQgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IGVkZ2VDZW50ZXIgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IHIgPSB2M3Bvb2wuZ2V0KCk7IC8vIHIgPSBlZGdlIGNlbnRlciB0byBzcGhlcmUgY2VudGVyCgogICAgICBjb25zdCBvcnRob2dvbmFsID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBkaXN0ID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBOc2lkZXMgPSBzaWRlcy5sZW5ndGg7CgogICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gTnNpZGVzICYmICFmb3VuZDsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IE5zaWRlcyAmJiAhZm91bmQ7IGsrKykgewogICAgICAgICAgaWYgKGogJSAzICE9PSBrICUgMykgewogICAgICAgICAgICAvLyBHZXQgZWRnZSB0YW5nZW50CiAgICAgICAgICAgIHNpZGVzW2tdLmNyb3NzKHNpZGVzW2pdLCBlZGdlVGFuZ2VudCk7CiAgICAgICAgICAgIGVkZ2VUYW5nZW50Lm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBzaWRlc1tqXS52YWRkKHNpZGVzW2tdLCBlZGdlQ2VudGVyKTsKICAgICAgICAgICAgci5jb3B5KHhpKTsKICAgICAgICAgICAgci52c3ViKGVkZ2VDZW50ZXIsIHIpOwogICAgICAgICAgICByLnZzdWIoeGosIHIpOwogICAgICAgICAgICBjb25zdCBvcnRob25vcm0gPSByLmRvdChlZGdlVGFuZ2VudCk7IC8vIGRpc3RhbmNlIGZyb20gZWRnZSBjZW50ZXIgdG8gc3BoZXJlIGNlbnRlciBpbiB0aGUgdGFuZ2VudCBkaXJlY3Rpb24KCiAgICAgICAgICAgIGVkZ2VUYW5nZW50LnNjYWxlKG9ydGhvbm9ybSwgb3J0aG9nb25hbCk7IC8vIFZlY3RvciBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBjZW50ZXIgaW4gdGhlIHRhbmdlbnQgZGlyZWN0aW9uCiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRoaXJkIHNpZGUgb3J0aG9nb25hbCB0byB0aGlzIG9uZQoKICAgICAgICAgICAgbGV0IGwgPSAwOwoKICAgICAgICAgICAgd2hpbGUgKGwgPT09IGogJSAzIHx8IGwgPT09IGsgJSAzKSB7CiAgICAgICAgICAgICAgbCsrOwogICAgICAgICAgICB9IC8vIHZlYyBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBwcm9qZWN0ZWQgdG8gdGhlIHBsYW5lIG9ydGhvZ29uYWwgdG8gdGhlIGVkZ2UgdGFuZ2VudAoKCiAgICAgICAgICAgIGRpc3QuY29weSh4aSk7CiAgICAgICAgICAgIGRpc3QudnN1YihvcnRob2dvbmFsLCBkaXN0KTsKICAgICAgICAgICAgZGlzdC52c3ViKGVkZ2VDZW50ZXIsIGRpc3QpOwogICAgICAgICAgICBkaXN0LnZzdWIoeGosIGRpc3QpOyAvLyBEaXN0YW5jZXMgaW4gdGFuZ2VudCBkaXJlY3Rpb24gYW5kIGRpc3RhbmNlIGluIHRoZSBwbGFuZSBvcnRob2dvbmFsIHRvIGl0CgogICAgICAgICAgICBjb25zdCB0ZGlzdCA9IE1hdGguYWJzKG9ydGhvbm9ybSk7CiAgICAgICAgICAgIGNvbnN0IG5kaXN0ID0gZGlzdC5sZW5ndGgoKTsKCiAgICAgICAgICAgIGlmICh0ZGlzdCA8IHNpZGVzW2xdLmxlbmd0aCgpICYmIG5kaXN0IDwgUikgewogICAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgY29uc3QgcmVzID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgICAgICBlZGdlQ2VudGVyLnZhZGQob3J0aG9nb25hbCwgcmVzLnJqKTsgLy8gYm94IHJqCgogICAgICAgICAgICAgIHJlcy5yai5jb3B5KHJlcy5yaik7CiAgICAgICAgICAgICAgZGlzdC5uZWdhdGUocmVzLm5pKTsKICAgICAgICAgICAgICByZXMubmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgcmVzLnJpLmNvcHkocmVzLnJqKTsKICAgICAgICAgICAgICByZXMucmkudmFkZCh4aiwgcmVzLnJpKTsKICAgICAgICAgICAgICByZXMucmkudnN1Yih4aSwgcmVzLnJpKTsKICAgICAgICAgICAgICByZXMucmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgcmVzLnJpLnNjYWxlKFIsIHJlcy5yaSk7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgICAgIHJlcy5yaS52YWRkKHhpLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yaS52c3ViKGJpLnBvc2l0aW9uLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yai52YWRkKHhqLCByZXMucmopOwogICAgICAgICAgICAgIHJlcy5yai52c3ViKGJqLnBvc2l0aW9uLCByZXMucmopOwogICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocmVzKTsKICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QocmVzLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdjNwb29sLnJlbGVhc2UoZWRnZVRhbmdlbnQsIGVkZ2VDZW50ZXIsIHIsIG9ydGhvZ29uYWwsIGRpc3QpOwogICAgfQoKICAgIHBsYW5lQm94KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNqLm1hdGVyaWFsOwogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzai5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmlkID0gc2ouaWQ7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4KHNpLCBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpOwogICAgfQoKICAgIGNvbnZleENvbnZleChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCwgZmFjZUxpc3RBLCBmYWNlTGlzdEIpIHsKICAgICAgY29uc3Qgc2VwQXhpcyA9IGNvbnZleENvbnZleF9zZXBBeGlzOwoKICAgICAgaWYgKHhpLmRpc3RhbmNlVG8oeGopID4gc2kuYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzai5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHNpLmZpbmRTZXBhcmF0aW5nQXhpcyhzaiwgeGksIHFpLCB4aiwgcWosIHNlcEF4aXMsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSkgewogICAgICAgIGNvbnN0IHJlcyA9IFtdOwogICAgICAgIGNvbnN0IHEgPSBjb252ZXhDb252ZXhfcTsKICAgICAgICBzaS5jbGlwQWdhaW5zdEh1bGwoeGksIHFpLCBzaiwgeGosIHFqLCBzZXBBeGlzLCAtMTAwLCAxMDAsIHJlcyk7CiAgICAgICAgbGV0IG51bUNvbnRhY3RzID0gMDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IHJlcy5sZW5ndGg7IGorKykgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgY29uc3QgcmkgPSByLnJpOwogICAgICAgICAgY29uc3QgcmogPSByLnJqOwogICAgICAgICAgc2VwQXhpcy5uZWdhdGUoci5uaSk7CiAgICAgICAgICByZXNbal0ubm9ybWFsLm5lZ2F0ZShxKTsKICAgICAgICAgIHEuc2NhbGUocmVzW2pdLmRlcHRoLCBxKTsKICAgICAgICAgIHJlc1tqXS5wb2ludC52YWRkKHEsIHJpKTsKICAgICAgICAgIHJqLmNvcHkocmVzW2pdLnBvaW50KTsgLy8gQ29udGFjdCBwb2ludHMgYXJlIGluIHdvcmxkIGNvb3JkaW5hdGVzLiBUcmFuc2Zvcm0gYmFjayB0byByZWxhdGl2ZQoKICAgICAgICAgIHJpLnZzdWIoeGksIHJpKTsKICAgICAgICAgIHJqLnZzdWIoeGosIHJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgICByaS52YWRkKHhpLCByaSk7CiAgICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAgICAgICByai52YWRkKHhqLCByaik7CiAgICAgICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7CiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgbnVtQ29udGFjdHMrKzsKCiAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24pIHsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24gJiYgbnVtQ29udGFjdHMpIHsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgc3BoZXJlQ29udmV4KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IHYzcG9vbCA9IHRoaXMudjNwb29sOwogICAgICB4aS52c3ViKHhqLCBjb252ZXhfdG9fc3BoZXJlKTsKICAgICAgY29uc3Qgbm9ybWFscyA9IHNqLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBmYWNlcyA9IHNqLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0cyA9IHNqLnZlcnRpY2VzOwogICAgICBjb25zdCBSID0gc2kucmFkaXVzOyAvLyAgICAgcmV0dXJuOwogICAgICAvLyB9CgogICAgICBsZXQgZm91bmQgPSBmYWxzZTsgLy8gQ2hlY2sgY29ybmVycwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IHZlcnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IHZlcnRzW2ldOyAvLyBXb3JsZCBwb3NpdGlvbiBvZiBjb3JuZXIKCiAgICAgICAgY29uc3Qgd29ybGRDb3JuZXIgPSBzcGhlcmVDb252ZXhfd29ybGRDb3JuZXI7CiAgICAgICAgcWoudm11bHQodiwgd29ybGRDb3JuZXIpOwogICAgICAgIHhqLnZhZGQod29ybGRDb3JuZXIsIHdvcmxkQ29ybmVyKTsKICAgICAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQ29udmV4X3NwaGVyZVRvQ29ybmVyOwogICAgICAgIHdvcmxkQ29ybmVyLnZzdWIoeGksIHNwaGVyZV90b19jb3JuZXIpOwoKICAgICAgICBpZiAoc3BoZXJlX3RvX2Nvcm5lci5sZW5ndGhTcXVhcmVkKCkgPCBSICogUikgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgci5yaS5jb3B5KHNwaGVyZV90b19jb3JuZXIpOwogICAgICAgICAgci5yaS5ub3JtYWxpemUoKTsKICAgICAgICAgIHIubmkuY29weShyLnJpKTsKICAgICAgICAgIHIucmkuc2NhbGUoUiwgci5yaSk7CiAgICAgICAgICB3b3JsZENvcm5lci52c3ViKHhqLCByLnJqKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LgoKICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSAvLyBDaGVjayBzaWRlIChwbGFuZSkgaW50ZXJzZWN0aW9ucwoKCiAgICAgIGZvciAobGV0IGkgPSAwLCBuZmFjZXMgPSBmYWNlcy5sZW5ndGg7IGkgIT09IG5mYWNlcyAmJiBmb3VuZCA9PT0gZmFsc2U7IGkrKykgewogICAgICAgIGNvbnN0IG5vcm1hbCA9IG5vcm1hbHNbaV07CiAgICAgICAgY29uc3QgZmFjZSA9IGZhY2VzW2ldOyAvLyBHZXQgd29ybGQtdHJhbnNmb3JtZWQgbm9ybWFsIG9mIHRoZSBmYWNlCgogICAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gc3BoZXJlQ29udmV4X3dvcmxkTm9ybWFsOwogICAgICAgIHFqLnZtdWx0KG5vcm1hbCwgd29ybGROb3JtYWwpOyAvLyBHZXQgYSB3b3JsZCB2ZXJ0ZXggZnJvbSB0aGUgZmFjZQoKICAgICAgICBjb25zdCB3b3JsZFBvaW50ID0gc3BoZXJlQ29udmV4X3dvcmxkUG9pbnQ7CiAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVswXV0sIHdvcmxkUG9pbnQpOwogICAgICAgIHdvcmxkUG9pbnQudmFkZCh4aiwgd29ybGRQb2ludCk7IC8vIEdldCBhIHBvaW50IG9uIHRoZSBzcGhlcmUsIGNsb3Nlc3QgdG8gdGhlIGZhY2Ugbm9ybWFsCgogICAgICAgIGNvbnN0IHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSA9IHNwaGVyZUNvbnZleF93b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmU7CiAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSk7CiAgICAgICAgeGkudmFkZCh3b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUsIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSk7IC8vIFZlY3RvciBmcm9tIGEgZmFjZSBwb2ludCB0byB0aGUgY2xvc2VzdCBwb2ludCBvbiB0aGUgc3BoZXJlCgogICAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gc3BoZXJlQ29udmV4X3BlbmV0cmF0aW9uVmVjOwogICAgICAgIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZS52c3ViKHdvcmxkUG9pbnQsIHBlbmV0cmF0aW9uVmVjKTsgLy8gVGhlIHBlbmV0cmF0aW9uLiBOZWdhdGl2ZSB2YWx1ZSBtZWFucyBvdmVybGFwLgoKICAgICAgICBjb25zdCBwZW5ldHJhdGlvbiA9IHBlbmV0cmF0aW9uVmVjLmRvdCh3b3JsZE5vcm1hbCk7CiAgICAgICAgY29uc3Qgd29ybGRQb2ludFRvU3BoZXJlID0gc3BoZXJlQ29udmV4X3NwaGVyZVRvV29ybGRQb2ludDsKICAgICAgICB4aS52c3ViKHdvcmxkUG9pbnQsIHdvcmxkUG9pbnRUb1NwaGVyZSk7CgogICAgICAgIGlmIChwZW5ldHJhdGlvbiA8IDAgJiYgd29ybGRQb2ludFRvU3BoZXJlLmRvdCh3b3JsZE5vcm1hbCkgPiAwKSB7CiAgICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgaWYgdGhlIHNwaGVyZSBpcyBpbnNpZGUgdGhlIGZhY2UgcG9seWdvbgogICAgICAgICAgY29uc3QgZmFjZVZlcnRzID0gW107IC8vIEZhY2UgdmVydGljZXMsIGluIHdvcmxkIGNvb3JkcwoKICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOdmVydHMgPSBmYWNlLmxlbmd0aDsgaiAhPT0gTnZlcnRzOyBqKyspIHsKICAgICAgICAgICAgY29uc3Qgd29ybGRWZXJ0ZXggPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgIHFqLnZtdWx0KHZlcnRzW2ZhY2Vbal1dLCB3b3JsZFZlcnRleCk7CiAgICAgICAgICAgIHhqLnZhZGQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTsKICAgICAgICAgICAgZmFjZVZlcnRzLnB1c2god29ybGRWZXJ0ZXgpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChwb2ludEluUG9seWdvbihmYWNlVmVydHMsIHdvcmxkTm9ybWFsLCB4aSkpIHsKICAgICAgICAgICAgLy8gSXMgdGhlIHNwaGVyZSBjZW50ZXIgaW4gdGhlIGZhY2UgcG9seWdvbj8KICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1SLCByLnJpKTsgLy8gQ29udGFjdCBvZmZzZXQsIGZyb20gc3BoZXJlIGNlbnRlciB0byBjb250YWN0CgogICAgICAgICAgICB3b3JsZE5vcm1hbC5uZWdhdGUoci5uaSk7IC8vIE5vcm1hbCBwb2ludGluZyBvdXQgb2Ygc3BoZXJlCgogICAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvblZlYzIgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1wZW5ldHJhdGlvbiwgcGVuZXRyYXRpb25WZWMyKTsKICAgICAgICAgICAgY29uc3QgcGVuZXRyYXRpb25TcGhlcmVQb2ludCA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQpOyAvL3hpLnZzdWIoeGopLnZhZGQocGVuZXRyYXRpb25TcGhlcmVQb2ludCkudmFkZChwZW5ldHJhdGlvblZlYzIgLCByLnJqKTsKCiAgICAgICAgICAgIHhpLnZzdWIoeGosIHIucmopOwogICAgICAgICAgICByLnJqLnZhZGQocGVuZXRyYXRpb25TcGhlcmVQb2ludCwgci5yaik7CiAgICAgICAgICAgIHIucmoudmFkZChwZW5ldHJhdGlvblZlYzIsIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgICByLnJqLnZzdWIoYmoucG9zaXRpb24sIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwZW5ldHJhdGlvblZlYzIpOwogICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwZW5ldHJhdGlvblNwaGVyZVBvaW50KTsKICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOyAvLyBSZWxlYXNlIHdvcmxkIHZlcnRpY2VzCgogICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykgewogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybjsgLy8gV2Ugb25seSBleHBlY3QgKm9uZSogZmFjZSBjb250YWN0CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBFZGdlPwogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZmFjZS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIC8vIEdldCB0d28gd29ybGQgdHJhbnNmb3JtZWQgdmVydGljZXMKICAgICAgICAgICAgICBjb25zdCB2MSA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBjb25zdCB2MiA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBxai52bXVsdCh2ZXJ0c1tmYWNlWyhqICsgMSkgJSBmYWNlLmxlbmd0aF1dLCB2MSk7CiAgICAgICAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVsoaiArIDIpICUgZmFjZS5sZW5ndGhdXSwgdjIpOwogICAgICAgICAgICAgIHhqLnZhZGQodjEsIHYxKTsKICAgICAgICAgICAgICB4ai52YWRkKHYyLCB2Mik7IC8vIENvbnN0cnVjdCBlZGdlIHZlY3RvcgoKICAgICAgICAgICAgICBjb25zdCBlZGdlID0gc3BoZXJlQ29udmV4X2VkZ2U7CiAgICAgICAgICAgICAgdjIudnN1Yih2MSwgZWRnZSk7IC8vIENvbnN0cnVjdCB0aGUgc2FtZSB2ZWN0b3IsIGJ1dCBub3JtYWxpemVkCgogICAgICAgICAgICAgIGNvbnN0IGVkZ2VVbml0ID0gc3BoZXJlQ29udmV4X2VkZ2VVbml0OwogICAgICAgICAgICAgIGVkZ2UudW5pdChlZGdlVW5pdCk7IC8vIHAgaXMgeGkgcHJvamVjdGVkIG9udG8gdGhlIGVkZ2UKCiAgICAgICAgICAgICAgY29uc3QgcCA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBjb25zdCB2MV90b194aSA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICB4aS52c3ViKHYxLCB2MV90b194aSk7CiAgICAgICAgICAgICAgY29uc3QgZG90ID0gdjFfdG9feGkuZG90KGVkZ2VVbml0KTsKICAgICAgICAgICAgICBlZGdlVW5pdC5zY2FsZShkb3QsIHApOwogICAgICAgICAgICAgIHAudmFkZCh2MSwgcCk7IC8vIENvbXB1dGUgYSB2ZWN0b3IgZnJvbSBwIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHNwaGVyZQoKICAgICAgICAgICAgICBjb25zdCB4aV90b19wID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICAgIHAudnN1Yih4aSwgeGlfdG9fcCk7IC8vIENvbGxpc2lvbiBpZiB0aGUgZWRnZS1zcGhlcmUgZGlzdGFuY2UgaXMgbGVzcyB0aGFuIHRoZSByYWRpdXMKICAgICAgICAgICAgICAvLyBBTkQgaWYgcCBpcyBpbiBiZXR3ZWVuIHYxIGFuZCB2MgoKICAgICAgICAgICAgICBpZiAoZG90ID4gMCAmJiBkb3QgKiBkb3QgPCBlZGdlLmxlbmd0aFNxdWFyZWQoKSAmJiB4aV90b19wLmxlbmd0aFNxdWFyZWQoKSA8IFIgKiBSKSB7CiAgICAgICAgICAgICAgICAvLyBDb2xsaXNpb24gaWYgdGhlIGVkZ2Utc3BoZXJlIGRpc3RhbmNlIGlzIGxlc3MgdGhhbiB0aGUgcmFkaXVzCiAgICAgICAgICAgICAgICAvLyBFZGdlIGNvbnRhY3QhCiAgICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICAgICAgICBwLnZzdWIoeGosIHIucmopOwogICAgICAgICAgICAgICAgcC52c3ViKHhpLCByLm5pKTsKICAgICAgICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgICByLm5pLnNjYWxlKFIsIHIucmkpOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgICAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7IC8vIFJlbGVhc2Ugd29ybGQgdmVydGljZXMKCiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykgewogICAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShmYWNlVmVydHNbal0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxKTsKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYyKTsKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHApOwogICAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoeGlfdG9fcCk7CiAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MV90b194aSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MSk7CiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjIpOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHApOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHhpX3RvX3ApOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxX3RvX3hpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyBSZWxlYXNlIHdvcmxkIHZlcnRpY2VzCgoKICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOZmFjZXZlcnRzID0gZmFjZVZlcnRzLmxlbmd0aDsgaiAhPT0gTmZhY2V2ZXJ0czsgaisrKSB7CiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcGxhbmVDb252ZXgocGxhbmVTaGFwZSwgY29udmV4U2hhcGUsIHBsYW5lUG9zaXRpb24sIGNvbnZleFBvc2l0aW9uLCBwbGFuZVF1YXQsIGNvbnZleFF1YXQsIHBsYW5lQm9keSwgY29udmV4Qm9keSwgc2ksIHNqLCBqdXN0VGVzdCkgewogICAgICAvLyBTaW1wbHkgcmV0dXJuIHRoZSBwb2ludHMgYmVoaW5kIHRoZSBwbGFuZS4KICAgICAgY29uc3Qgd29ybGRWZXJ0ZXggPSBwbGFuZUNvbnZleF92OwogICAgICBjb25zdCB3b3JsZE5vcm1hbCA9IHBsYW5lQ29udmV4X25vcm1hbDsKICAgICAgd29ybGROb3JtYWwuc2V0KDAsIDAsIDEpOwogICAgICBwbGFuZVF1YXQudm11bHQod29ybGROb3JtYWwsIHdvcmxkTm9ybWFsKTsgLy8gVHVybiBub3JtYWwgYWNjb3JkaW5nIHRvIHBsYW5lIG9yaWVudGF0aW9uCgogICAgICBsZXQgbnVtQ29udGFjdHMgPSAwOwogICAgICBjb25zdCByZWxwb3MgPSBwbGFuZUNvbnZleF9yZWxwb3M7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gY29udmV4U2hhcGUudmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBHZXQgd29ybGQgY29udmV4IHZlcnRleAogICAgICAgIHdvcmxkVmVydGV4LmNvcHkoY29udmV4U2hhcGUudmVydGljZXNbaV0pOwogICAgICAgIGNvbnZleFF1YXQudm11bHQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTsKICAgICAgICBjb252ZXhQb3NpdGlvbi52YWRkKHdvcmxkVmVydGV4LCB3b3JsZFZlcnRleCk7CiAgICAgICAgd29ybGRWZXJ0ZXgudnN1YihwbGFuZVBvc2l0aW9uLCByZWxwb3MpOwogICAgICAgIGNvbnN0IGRvdCA9IHdvcmxkTm9ybWFsLmRvdChyZWxwb3MpOwoKICAgICAgICBpZiAoZG90IDw9IDAuMCkgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihwbGFuZUJvZHksIGNvbnZleEJvZHksIHBsYW5lU2hhcGUsIGNvbnZleFNoYXBlLCBzaSwgc2opOyAvLyBHZXQgdmVydGV4IHBvc2l0aW9uIHByb2plY3RlZCBvbiBwbGFuZQoKICAgICAgICAgIGNvbnN0IHByb2plY3RlZCA9IHBsYW5lQ29udmV4X3Byb2plY3RlZDsKICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKHdvcmxkTm9ybWFsLmRvdChyZWxwb3MpLCBwcm9qZWN0ZWQpOwogICAgICAgICAgd29ybGRWZXJ0ZXgudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7CiAgICAgICAgICBwcm9qZWN0ZWQudnN1YihwbGFuZVBvc2l0aW9uLCByLnJpKTsgLy8gRnJvbSBwbGFuZSB0byB2ZXJ0ZXggcHJvamVjdGVkIG9uIHBsYW5lCgogICAgICAgICAgci5uaS5jb3B5KHdvcmxkTm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbCBvdXQgZnJvbSBwbGFuZQogICAgICAgICAgLy8gcmogaXMgbm93IGp1c3QgdGhlIHZlY3RvciBmcm9tIHRoZSBjb252ZXggY2VudGVyIHRvIHRoZSB2ZXJ0ZXgKCiAgICAgICAgICB3b3JsZFZlcnRleC52c3ViKGNvbnZleFBvc2l0aW9uLCByLnJqKTsgLy8gTWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgYm9keQoKICAgICAgICAgIHIucmkudmFkZChwbGFuZVBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgIHIucmkudnN1YihwbGFuZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgci5yai52YWRkKGNvbnZleFBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgIHIucmoudnN1Yihjb252ZXhCb2R5LnBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICBudW1Db250YWN0cysrOwoKICAgICAgICAgIGlmICghdGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbikgewogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbiAmJiBudW1Db250YWN0cykgewogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cyk7CiAgICAgIH0KICAgIH0KCiAgICBib3hDb252ZXgoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXgoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgc3BoZXJlSGVpZ2h0ZmllbGQoc3BoZXJlU2hhcGUsIGhmU2hhcGUsIHNwaGVyZVBvcywgaGZQb3MsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgZGF0YSA9IGhmU2hhcGUuZGF0YTsKICAgICAgY29uc3QgcmFkaXVzID0gc3BoZXJlU2hhcGUucmFkaXVzOwogICAgICBjb25zdCB3ID0gaGZTaGFwZS5lbGVtZW50U2l6ZTsKICAgICAgY29uc3Qgd29ybGRQaWxsYXJPZmZzZXQgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAyOyAvLyBHZXQgc3BoZXJlIHBvc2l0aW9uIHRvIGhlaWdodGZpZWxkIGxvY2FsIQoKICAgICAgY29uc3QgbG9jYWxTcGhlcmVQb3MgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAxOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUoaGZQb3MsIGhmUXVhdCwgc3BoZXJlUG9zLCBsb2NhbFNwaGVyZVBvcyk7IC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdAoKICAgICAgbGV0IGlNaW5YID0gTWF0aC5mbG9vcigobG9jYWxTcGhlcmVQb3MueCAtIHJhZGl1cykgLyB3KSAtIDE7CiAgICAgIGxldCBpTWF4WCA9IE1hdGguY2VpbCgobG9jYWxTcGhlcmVQb3MueCArIHJhZGl1cykgLyB3KSArIDE7CiAgICAgIGxldCBpTWluWSA9IE1hdGguZmxvb3IoKGxvY2FsU3BoZXJlUG9zLnkgLSByYWRpdXMpIC8gdykgLSAxOwogICAgICBsZXQgaU1heFkgPSBNYXRoLmNlaWwoKGxvY2FsU3BoZXJlUG9zLnkgKyByYWRpdXMpIC8gdykgKyAxOyAvLyBCYWlsIG91dCBpZiB3ZSBhcmUgb3V0IG9mIHRoZSB0ZXJyYWluCgogICAgICBpZiAoaU1heFggPCAwIHx8IGlNYXhZIDwgMCB8fCBpTWluWCA+IGRhdGEubGVuZ3RoIHx8IGlNaW5ZID4gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gQ2xhbXAgaW5kZXggdG8gZWRnZXMKCgogICAgICBpZiAoaU1pblggPCAwKSB7CiAgICAgICAgaU1pblggPSAwOwogICAgICB9CgogICAgICBpZiAoaU1heFggPCAwKSB7CiAgICAgICAgaU1heFggPSAwOwogICAgICB9CgogICAgICBpZiAoaU1pblkgPCAwKSB7CiAgICAgICAgaU1pblkgPSAwOwogICAgICB9CgogICAgICBpZiAoaU1heFkgPCAwKSB7CiAgICAgICAgaU1heFkgPSAwOwogICAgICB9CgogICAgICBpZiAoaU1pblggPj0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpTWluWCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNYXhYID49IGRhdGEubGVuZ3RoKSB7CiAgICAgICAgaU1heFggPSBkYXRhLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WSA+PSBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIGlNYXhZID0gZGF0YVswXS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1pblkgPj0gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICBpTWluWSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgY29uc3QgbWluTWF4ID0gW107CiAgICAgIGhmU2hhcGUuZ2V0UmVjdE1pbk1heChpTWluWCwgaU1pblksIGlNYXhYLCBpTWF4WSwgbWluTWF4KTsKICAgICAgY29uc3QgbWluID0gbWluTWF4WzBdOwogICAgICBjb25zdCBtYXggPSBtaW5NYXhbMV07IC8vIEJhaWwgb3V0IGlmIHdlIGNhbid0IHRvdWNoIHRoZSBib3VuZGluZyBoZWlnaHQgYm94CgogICAgICBpZiAobG9jYWxTcGhlcmVQb3MueiAtIHJhZGl1cyA+IG1heCB8fCBsb2NhbFNwaGVyZVBvcy56ICsgcmFkaXVzIDwgbWluKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDsKCiAgICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8IGlNYXhYOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPCBpTWF4WTsgaisrKSB7CiAgICAgICAgICBjb25zdCBudW1Db250YWN0c0JlZm9yZSA9IHJlc3VsdC5sZW5ndGg7CiAgICAgICAgICBsZXQgaW50ZXJzZWN0aW5nID0gZmFsc2U7IC8vIExvd2VyIHRyaWFuZ2xlCgogICAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCBmYWxzZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICBpZiAoc3BoZXJlUG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzcGhlcmVTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICBpbnRlcnNlY3RpbmcgPSB0aGlzLnNwaGVyZUNvbnZleChzcGhlcmVTaGFwZSwgaGZTaGFwZS5waWxsYXJDb252ZXgsIHNwaGVyZVBvcywgd29ybGRQaWxsYXJPZmZzZXQsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCBzcGhlcmVTaGFwZSwgaGZTaGFwZSwganVzdFRlc3QpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9IC8vIFVwcGVyIHRyaWFuZ2xlCgoKICAgICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgdHJ1ZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICBpZiAoc3BoZXJlUG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzcGhlcmVTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICBpbnRlcnNlY3RpbmcgPSB0aGlzLnNwaGVyZUNvbnZleChzcGhlcmVTaGFwZSwgaGZTaGFwZS5waWxsYXJDb252ZXgsIHNwaGVyZVBvcywgd29ybGRQaWxsYXJPZmZzZXQsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCBzcGhlcmVTaGFwZSwgaGZTaGFwZSwganVzdFRlc3QpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgbnVtQ29udGFjdHMgPSByZXN1bHQubGVuZ3RoIC0gbnVtQ29udGFjdHNCZWZvcmU7CgogICAgICAgICAgaWYgKG51bUNvbnRhY3RzID4gMikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICAvKgogICAgICAgICAgICAvLyBTa2lwIGFsbCBidXQgMQogICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IG51bUNvbnRhY3RzIC0gMTsgaysrKSB7CiAgICAgICAgICAgICAgICByZXN1bHQucG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICovCgogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGJveEhlaWdodGZpZWxkKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4SGVpZ2h0ZmllbGQoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgY29udmV4SGVpZ2h0ZmllbGQoY29udmV4U2hhcGUsIGhmU2hhcGUsIGNvbnZleFBvcywgaGZQb3MsIGNvbnZleFF1YXQsIGhmUXVhdCwgY29udmV4Qm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgZGF0YSA9IGhmU2hhcGUuZGF0YTsKICAgICAgY29uc3QgdyA9IGhmU2hhcGUuZWxlbWVudFNpemU7CiAgICAgIGNvbnN0IHJhZGl1cyA9IGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzOwogICAgICBjb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IGNvbnZleEhlaWdodGZpZWxkX3RtcDI7CiAgICAgIGNvbnN0IGZhY2VMaXN0ID0gY29udmV4SGVpZ2h0ZmllbGRfZmFjZUxpc3Q7IC8vIEdldCBzcGhlcmUgcG9zaXRpb24gdG8gaGVpZ2h0ZmllbGQgbG9jYWwhCgogICAgICBjb25zdCBsb2NhbENvbnZleFBvcyA9IGNvbnZleEhlaWdodGZpZWxkX3RtcDE7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShoZlBvcywgaGZRdWF0LCBjb252ZXhQb3MsIGxvY2FsQ29udmV4UG9zKTsgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CgogICAgICBsZXQgaU1pblggPSBNYXRoLmZsb29yKChsb2NhbENvbnZleFBvcy54IC0gcmFkaXVzKSAvIHcpIC0gMTsKICAgICAgbGV0IGlNYXhYID0gTWF0aC5jZWlsKChsb2NhbENvbnZleFBvcy54ICsgcmFkaXVzKSAvIHcpICsgMTsKICAgICAgbGV0IGlNaW5ZID0gTWF0aC5mbG9vcigobG9jYWxDb252ZXhQb3MueSAtIHJhZGl1cykgLyB3KSAtIDE7CiAgICAgIGxldCBpTWF4WSA9IE1hdGguY2VpbCgobG9jYWxDb252ZXhQb3MueSArIHJhZGl1cykgLyB3KSArIDE7IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW4KCiAgICAgIGlmIChpTWF4WCA8IDAgfHwgaU1heFkgPCAwIHx8IGlNaW5YID4gZGF0YS5sZW5ndGggfHwgaU1pblkgPiBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBDbGFtcCBpbmRleCB0byBlZGdlcwoKCiAgICAgIGlmIChpTWluWCA8IDApIHsKICAgICAgICBpTWluWCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WCA8IDApIHsKICAgICAgICBpTWF4WCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA8IDApIHsKICAgICAgICBpTWluWSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WSA8IDApIHsKICAgICAgICBpTWF4WSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWCA+PSBkYXRhLmxlbmd0aCkgewogICAgICAgIGlNaW5YID0gZGF0YS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1heFggPj0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpTWF4WCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNYXhZID49IGRhdGFbMF0ubGVuZ3RoKSB7CiAgICAgICAgaU1heFkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA+PSBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIGlNaW5ZID0gZGF0YVswXS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBjb25zdCBtaW5NYXggPSBbXTsKICAgICAgaGZTaGFwZS5nZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCBtaW5NYXgpOwogICAgICBjb25zdCBtaW4gPSBtaW5NYXhbMF07CiAgICAgIGNvbnN0IG1heCA9IG1pbk1heFsxXTsgLy8gQmFpbCBvdXQgaWYgd2UncmUgY2FudCB0b3VjaCB0aGUgYm91bmRpbmcgaGVpZ2h0IGJveAoKICAgICAgaWYgKGxvY2FsQ29udmV4UG9zLnogLSByYWRpdXMgPiBtYXggfHwgbG9jYWxDb252ZXhQb3MueiArIHJhZGl1cyA8IG1pbikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDwgaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHsKICAgICAgICAgIGxldCBpbnRlcnNlY3RpbmcgPSBmYWxzZTsgLy8gTG93ZXIgdHJpYW5nbGUKCiAgICAgICAgICBoZlNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIGZhbHNlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChjb252ZXhQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuY29udmV4Q29udmV4KGNvbnZleFNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgY29udmV4UG9zLCB3b3JsZFBpbGxhck9mZnNldCwgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIG51bGwsIG51bGwsIGp1c3RUZXN0LCBmYWNlTGlzdCwgbnVsbCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGUKCgogICAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCB0cnVlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChjb252ZXhQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuY29udmV4Q29udmV4KGNvbnZleFNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgY29udmV4UG9zLCB3b3JsZFBpbGxhck9mZnNldCwgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIG51bGwsIG51bGwsIGp1c3RUZXN0LCBmYWNlTGlzdCwgbnVsbCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzcGhlcmVQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICAvLyBUaGUgbm9ybWFsIGlzIHRoZSB1bml0IHZlY3RvciBmcm9tIHNwaGVyZSBjZW50ZXIgdG8gcGFydGljbGUgY2VudGVyCiAgICAgIGNvbnN0IG5vcm1hbCA9IHBhcnRpY2xlU3BoZXJlX25vcm1hbDsKICAgICAgbm9ybWFsLnNldCgwLCAwLCAxKTsKICAgICAgeGkudnN1Yih4aiwgbm9ybWFsKTsKICAgICAgY29uc3QgbGVuZ3RoU3F1YXJlZCA9IG5vcm1hbC5sZW5ndGhTcXVhcmVkKCk7CgogICAgICBpZiAobGVuZ3RoU3F1YXJlZCA8PSBzai5yYWRpdXMgKiBzai5yYWRpdXMpIHsKICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICAgIHIucmouY29weShub3JtYWwpOwogICAgICAgIHIucmouc2NhbGUoc2oucmFkaXVzLCByLnJqKTsKICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgICAgci5uaS5uZWdhdGUoci5uaSk7CiAgICAgICAgci5yaS5zZXQoMCwgMCwgMCk7IC8vIENlbnRlciBvZiBwYXJ0aWNsZQoKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIHBsYW5lUGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3Qgbm9ybWFsID0gcGFydGljbGVQbGFuZV9ub3JtYWw7CiAgICAgIG5vcm1hbC5zZXQoMCwgMCwgMSk7CiAgICAgIGJqLnF1YXRlcm5pb24udm11bHQobm9ybWFsLCBub3JtYWwpOyAvLyBUdXJuIG5vcm1hbCBhY2NvcmRpbmcgdG8gcGxhbmUgb3JpZW50YXRpb24KCiAgICAgIGNvbnN0IHJlbHBvcyA9IHBhcnRpY2xlUGxhbmVfcmVscG9zOwogICAgICB4aS52c3ViKGJqLnBvc2l0aW9uLCByZWxwb3MpOwogICAgICBjb25zdCBkb3QgPSBub3JtYWwuZG90KHJlbHBvcyk7CgogICAgICBpZiAoZG90IDw9IDAuMCkgewogICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbAoKICAgICAgICByLm5pLm5lZ2F0ZShyLm5pKTsKICAgICAgICByLnJpLnNldCgwLCAwLCAwKTsgLy8gQ2VudGVyIG9mIHBhcnRpY2xlCiAgICAgICAgLy8gR2V0IHBhcnRpY2xlIHBvc2l0aW9uIHByb2plY3RlZCBvbiBwbGFuZQoKICAgICAgICBjb25zdCBwcm9qZWN0ZWQgPSBwYXJ0aWNsZVBsYW5lX3Byb2plY3RlZDsKICAgICAgICBub3JtYWwuc2NhbGUobm9ybWFsLmRvdCh4aSksIHByb2plY3RlZCk7CiAgICAgICAgeGkudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7IC8vcHJvamVjdGVkLnZhZGQoYmoucG9zaXRpb24scHJvamVjdGVkKTsKICAgICAgICAvLyByaiBpcyBub3cgdGhlIHByb2plY3RlZCB3b3JsZCBwb3NpdGlvbiBtaW51cyBwbGFuZSBwb3NpdGlvbgoKICAgICAgICByLnJqLmNvcHkocHJvamVjdGVkKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIGJveFBhcnRpY2xlKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4UGFydGljbGUoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgY29udmV4UGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgbGV0IHBlbmV0cmF0ZWRGYWNlSW5kZXggPSAtMTsKICAgICAgY29uc3QgcGVuZXRyYXRlZEZhY2VOb3JtYWwgPSBjb252ZXhQYXJ0aWNsZV9wZW5ldHJhdGVkRmFjZU5vcm1hbDsKICAgICAgY29uc3Qgd29ybGRQZW5ldHJhdGlvblZlYyA9IGNvbnZleFBhcnRpY2xlX3dvcmxkUGVuZXRyYXRpb25WZWM7CiAgICAgIGxldCBtaW5QZW5ldHJhdGlvbiA9IG51bGw7CiAgICAgIGNvbnN0IGxvY2FsID0gY29udmV4UGFydGljbGVfbG9jYWw7CiAgICAgIGxvY2FsLmNvcHkoeGkpOwogICAgICBsb2NhbC52c3ViKHhqLCBsb2NhbCk7IC8vIENvbnZlcnQgcG9zaXRpb24gdG8gcmVsYXRpdmUgdGhlIGNvbnZleCBvcmlnaW4KCiAgICAgIHFqLmNvbmp1Z2F0ZShjcWopOwogICAgICBjcWoudm11bHQobG9jYWwsIGxvY2FsKTsKCiAgICAgIGlmIChzai5wb2ludElzSW5zaWRlKGxvY2FsKSkgewogICAgICAgIGlmIChzai53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIHNqLmNvbXB1dGVXb3JsZFZlcnRpY2VzKHhqLCBxaik7CiAgICAgICAgfQoKICAgICAgICBpZiAoc2oud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlKSB7CiAgICAgICAgICBzai5jb21wdXRlV29ybGRGYWNlTm9ybWFscyhxaik7CiAgICAgICAgfSAvLyBGb3IgZWFjaCB3b3JsZCBwb2x5Z29uIGluIHRoZSBwb2x5aGVkcmEKCgogICAgICAgIGZvciAobGV0IGkgPSAwLCBuZmFjZXMgPSBzai5mYWNlcy5sZW5ndGg7IGkgIT09IG5mYWNlczsgaSsrKSB7CiAgICAgICAgICAvLyBDb25zdHJ1Y3Qgd29ybGQgZmFjZSB2ZXJ0aWNlcwogICAgICAgICAgY29uc3QgdmVydHMgPSBbc2oud29ybGRWZXJ0aWNlc1tzai5mYWNlc1tpXVswXV1dOwogICAgICAgICAgY29uc3Qgbm9ybWFsID0gc2oud29ybGRGYWNlTm9ybWFsc1tpXTsgLy8gQ2hlY2sgaG93IG11Y2ggdGhlIHBhcnRpY2xlIHBlbmV0cmF0ZXMgdGhlIHBvbHlnb24gcGxhbmUuCgogICAgICAgICAgeGkudnN1Yih2ZXJ0c1swXSwgY29udmV4UGFydGljbGVfdmVydGV4VG9QYXJ0aWNsZSk7CiAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvbiA9IC1ub3JtYWwuZG90KGNvbnZleFBhcnRpY2xlX3ZlcnRleFRvUGFydGljbGUpOwoKICAgICAgICAgIGlmIChtaW5QZW5ldHJhdGlvbiA9PT0gbnVsbCB8fCBNYXRoLmFicyhwZW5ldHJhdGlvbikgPCBNYXRoLmFicyhtaW5QZW5ldHJhdGlvbikpIHsKICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIG1pblBlbmV0cmF0aW9uID0gcGVuZXRyYXRpb247CiAgICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlSW5kZXggPSBpOwogICAgICAgICAgICBwZW5ldHJhdGVkRmFjZU5vcm1hbC5jb3B5KG5vcm1hbCk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAocGVuZXRyYXRlZEZhY2VJbmRleCAhPT0gLTEpIHsKICAgICAgICAgIC8vIFNldHVwIGNvbnRhY3QKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwuc2NhbGUobWluUGVuZXRyYXRpb24sIHdvcmxkUGVuZXRyYXRpb25WZWMpOyAvLyByaiBpcyB0aGUgcGFydGljbGUgcG9zaXRpb24gcHJvamVjdGVkIHRvIHRoZSBmYWNlCgogICAgICAgICAgd29ybGRQZW5ldHJhdGlvblZlYy52YWRkKHhpLCB3b3JsZFBlbmV0cmF0aW9uVmVjKTsKICAgICAgICAgIHdvcmxkUGVuZXRyYXRpb25WZWMudnN1Yih4aiwgd29ybGRQZW5ldHJhdGlvblZlYyk7CiAgICAgICAgICByLnJqLmNvcHkod29ybGRQZW5ldHJhdGlvblZlYyk7IC8vY29uc3QgcHJvamVjdGVkVG9GYWNlID0geGkudnN1Yih4aikudmFkZCh3b3JsZFBlbmV0cmF0aW9uVmVjKTsKICAgICAgICAgIC8vcHJvamVjdGVkVG9GYWNlLmNvcHkoci5yaik7CiAgICAgICAgICAvL3FqLnZtdWx0KHIucmosci5yaik7CgogICAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwubmVnYXRlKHIubmkpOyAvLyBDb250YWN0IG5vcm1hbAoKICAgICAgICAgIHIucmkuc2V0KDAsIDAsIDApOyAvLyBDZW50ZXIgb2YgcGFydGljbGUKCiAgICAgICAgICBjb25zdCByaSA9IHIucmk7CiAgICAgICAgICBjb25zdCByaiA9IHIucmo7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgcmkudmFkZCh4aSwgcmkpOwogICAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpOwogICAgICAgICAgcmoudmFkZCh4aiwgcmopOwogICAgICAgICAgcmoudnN1Yihiai5wb3NpdGlvbiwgcmopOwogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS53YXJuKCdQb2ludCBmb3VuZCBpbnNpZGUgY29udmV4LCBidXQgZGlkIG5vdCBmaW5kIHBlbmV0cmF0aW5nIGZhY2UhJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaGVpZ2h0ZmllbGRDeWxpbmRlcihoZlNoYXBlLCBjb252ZXhTaGFwZSwgaGZQb3MsIGNvbnZleFBvcywgaGZRdWF0LCBjb252ZXhRdWF0LCBoZkJvZHksIGNvbnZleEJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhIZWlnaHRmaWVsZChjb252ZXhTaGFwZSwgaGZTaGFwZSwgY29udmV4UG9zLCBoZlBvcywgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgcGFydGljbGVDeWxpbmRlcihzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgc3BoZXJlVHJpbWVzaChzcGhlcmVTaGFwZSwgdHJpbWVzaFNoYXBlLCBzcGhlcmVQb3MsIHRyaW1lc2hQb3MsIHNwaGVyZVF1YXQsIHRyaW1lc2hRdWF0LCBzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IGVkZ2VWZXJ0ZXhBID0gc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QTsKICAgICAgY29uc3QgZWRnZVZlcnRleEIgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZXJ0ZXhCOwogICAgICBjb25zdCBlZGdlVmVjdG9yID0gc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yOwogICAgICBjb25zdCBlZGdlVmVjdG9yVW5pdCA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvclVuaXQ7CiAgICAgIGNvbnN0IGxvY2FsU3BoZXJlUG9zID0gc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZVBvczsKICAgICAgY29uc3QgdG1wID0gc3BoZXJlVHJpbWVzaF90bXA7CiAgICAgIGNvbnN0IGxvY2FsU3BoZXJlQUFCQiA9IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCOwogICAgICBjb25zdCB2MiA9IHNwaGVyZVRyaW1lc2hfdjI7CiAgICAgIGNvbnN0IHJlbHBvcyA9IHNwaGVyZVRyaW1lc2hfcmVscG9zOwogICAgICBjb25zdCB0cmlhbmdsZXMgPSBzcGhlcmVUcmltZXNoX3RyaWFuZ2xlczsgLy8gQ29udmVydCBzcGhlcmUgcG9zaXRpb24gdG8gbG9jYWwgaW4gdGhlIHRyaW1lc2gKCiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgc3BoZXJlUG9zLCBsb2NhbFNwaGVyZVBvcyk7IC8vIEdldCB0aGUgYWFiYiBvZiB0aGUgc3BoZXJlIGxvY2FsbHkgaW4gdGhlIHRyaW1lc2gKCiAgICAgIGNvbnN0IHNwaGVyZVJhZGl1cyA9IHNwaGVyZVNoYXBlLnJhZGl1czsKICAgICAgbG9jYWxTcGhlcmVBQUJCLmxvd2VyQm91bmQuc2V0KGxvY2FsU3BoZXJlUG9zLnggLSBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnkgLSBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnogLSBzcGhlcmVSYWRpdXMpOwogICAgICBsb2NhbFNwaGVyZUFBQkIudXBwZXJCb3VuZC5zZXQobG9jYWxTcGhlcmVQb3MueCArIHNwaGVyZVJhZGl1cywgbG9jYWxTcGhlcmVQb3MueSArIHNwaGVyZVJhZGl1cywgbG9jYWxTcGhlcmVQb3MueiArIHNwaGVyZVJhZGl1cyk7CiAgICAgIHRyaW1lc2hTaGFwZS5nZXRUcmlhbmdsZXNJbkFBQkIobG9jYWxTcGhlcmVBQUJCLCB0cmlhbmdsZXMpOyAvL2ZvciAobGV0IGkgPSAwOyBpIDwgdHJpbWVzaFNoYXBlLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB0cmlhbmdsZXMucHVzaChpKTsgLy8gQWxsCiAgICAgIC8vIFZlcnRpY2VzCgogICAgICBjb25zdCB2ID0gc3BoZXJlVHJpbWVzaF92OwogICAgICBjb25zdCByYWRpdXNTcXVhcmVkID0gc3BoZXJlU2hhcGUucmFkaXVzICogc3BoZXJlU2hhcGUucmFkaXVzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmlhbmdsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDM7IGorKykgewogICAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleCh0cmltZXNoU2hhcGUuaW5kaWNlc1t0cmlhbmdsZXNbaV0gKiAzICsgal0sIHYpOyAvLyBDaGVjayB2ZXJ0ZXggb3ZlcmxhcCBpbiBzcGhlcmUKCiAgICAgICAgICB2LnZzdWIobG9jYWxTcGhlcmVQb3MsIHJlbHBvcyk7CgogICAgICAgICAgaWYgKHJlbHBvcy5sZW5ndGhTcXVhcmVkKCkgPD0gcmFkaXVzU3F1YXJlZCkgewogICAgICAgICAgICAvLyBTYWZlIHVwCiAgICAgICAgICAgIHYyLmNvcHkodik7CiAgICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdjIsIHYpOwogICAgICAgICAgICB2LnZzdWIoc3BoZXJlUG9zLCByZWxwb3MpOwoKICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxldCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTsKICAgICAgICAgICAgci5uaS5jb3B5KHJlbHBvcyk7CiAgICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7IC8vIHJpIGlzIHRoZSB2ZWN0b3IgZnJvbSBzcGhlcmUgY2VudGVyIHRvIHRoZSBzcGhlcmUgc3VyZmFjZQoKICAgICAgICAgICAgci5yaS5jb3B5KHIubmkpOwogICAgICAgICAgICByLnJpLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7CiAgICAgICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpOwogICAgICAgICAgICByLnJpLnZzdWIoc3BoZXJlQm9keS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICAgIHIucmouY29weSh2KTsKICAgICAgICAgICAgci5yai52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTsgLy8gU3RvcmUgcmVzdWx0CgogICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIENoZWNrIGFsbCBlZGdlcwoKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJpYW5nbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIHRyaW1lc2hTaGFwZS5nZXRWZXJ0ZXgodHJpbWVzaFNoYXBlLmluZGljZXNbdHJpYW5nbGVzW2ldICogMyArIGpdLCBlZGdlVmVydGV4QSk7CiAgICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KHRyaW1lc2hTaGFwZS5pbmRpY2VzW3RyaWFuZ2xlc1tpXSAqIDMgKyAoaiArIDEpICUgM10sIGVkZ2VWZXJ0ZXhCKTsKICAgICAgICAgIGVkZ2VWZXJ0ZXhCLnZzdWIoZWRnZVZlcnRleEEsIGVkZ2VWZWN0b3IpOyAvLyBQcm9qZWN0IHNwaGVyZSBwb3NpdGlvbiB0byB0aGUgZWRnZQoKICAgICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIoZWRnZVZlcnRleEIsIHRtcCk7CiAgICAgICAgICBjb25zdCBwb3NpdGlvbkFsb25nRWRnZUIgPSB0bXAuZG90KGVkZ2VWZWN0b3IpOwogICAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1YihlZGdlVmVydGV4QSwgdG1wKTsKICAgICAgICAgIGxldCBwb3NpdGlvbkFsb25nRWRnZUEgPSB0bXAuZG90KGVkZ2VWZWN0b3IpOwoKICAgICAgICAgIGlmIChwb3NpdGlvbkFsb25nRWRnZUEgPiAwICYmIHBvc2l0aW9uQWxvbmdFZGdlQiA8IDApIHsKICAgICAgICAgICAgLy8gTm93IGNoZWNrIHRoZSBvcnRob2dvbmFsIGRpc3RhbmNlIGZyb20gZWRnZSB0byBzcGhlcmUgY2VudGVyCiAgICAgICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIoZWRnZVZlcnRleEEsIHRtcCk7CiAgICAgICAgICAgIGVkZ2VWZWN0b3JVbml0LmNvcHkoZWRnZVZlY3Rvcik7CiAgICAgICAgICAgIGVkZ2VWZWN0b3JVbml0Lm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBwb3NpdGlvbkFsb25nRWRnZUEgPSB0bXAuZG90KGVkZ2VWZWN0b3JVbml0KTsKICAgICAgICAgICAgZWRnZVZlY3RvclVuaXQuc2NhbGUocG9zaXRpb25BbG9uZ0VkZ2VBLCB0bXApOwogICAgICAgICAgICB0bXAudmFkZChlZGdlVmVydGV4QSwgdG1wKTsgLy8gdG1wIGlzIG5vdyB0aGUgc3BoZXJlIGNlbnRlciBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gdGhlIGVkZ2UsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgdHJpbWVzaCBmcmFtZQoKICAgICAgICAgICAgY29uc3QgZGlzdCA9IHRtcC5kaXN0YW5jZVRvKGxvY2FsU3BoZXJlUG9zKTsKCiAgICAgICAgICAgIGlmIChkaXN0IDwgc3BoZXJlU2hhcGUucmFkaXVzKSB7CiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opOwogICAgICAgICAgICAgIHRtcC52c3ViKGxvY2FsU3BoZXJlUG9zLCByLm5pKTsKICAgICAgICAgICAgICByLm5pLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgIHIubmkuc2NhbGUoc3BoZXJlU2hhcGUucmFkaXVzLCByLnJpKTsKICAgICAgICAgICAgICByLnJpLnZhZGQoc3BoZXJlUG9zLCByLnJpKTsKICAgICAgICAgICAgICByLnJpLnZzdWIoc3BoZXJlQm9keS5wb3NpdGlvbiwgci5yaSk7CiAgICAgICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB0bXAsIHRtcCk7CiAgICAgICAgICAgICAgdG1wLnZzdWIodHJpbWVzaEJvZHkucG9zaXRpb24sIHIucmopOwogICAgICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIubmksIHIubmkpOwogICAgICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIucmksIHIucmkpOwogICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIFRyaWFuZ2xlIGZhY2VzCgoKICAgICAgY29uc3QgdmEgPSBzcGhlcmVUcmltZXNoX3ZhOwogICAgICBjb25zdCB2YiA9IHNwaGVyZVRyaW1lc2hfdmI7CiAgICAgIGNvbnN0IHZjID0gc3BoZXJlVHJpbWVzaF92YzsKICAgICAgY29uc3Qgbm9ybWFsID0gc3BoZXJlVHJpbWVzaF9ub3JtYWw7CgogICAgICBmb3IgKGxldCBpID0gMCwgTiA9IHRyaWFuZ2xlcy5sZW5ndGg7IGkgIT09IE47IGkrKykgewogICAgICAgIHRyaW1lc2hTaGFwZS5nZXRUcmlhbmdsZVZlcnRpY2VzKHRyaWFuZ2xlc1tpXSwgdmEsIHZiLCB2Yyk7CiAgICAgICAgdHJpbWVzaFNoYXBlLmdldE5vcm1hbCh0cmlhbmdsZXNbaV0sIG5vcm1hbCk7CiAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1Yih2YSwgdG1wKTsKICAgICAgICBsZXQgZGlzdCA9IHRtcC5kb3Qobm9ybWFsKTsKICAgICAgICBub3JtYWwuc2NhbGUoZGlzdCwgdG1wKTsKICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKHRtcCwgdG1wKTsgLy8gdG1wIGlzIG5vdyB0aGUgc3BoZXJlIHBvc2l0aW9uIHByb2plY3RlZCB0byB0aGUgdHJpYW5nbGUgcGxhbmUKCiAgICAgICAgZGlzdCA9IHRtcC5kaXN0YW5jZVRvKGxvY2FsU3BoZXJlUG9zKTsKCiAgICAgICAgaWYgKFJheS5wb2ludEluVHJpYW5nbGUodG1wLCB2YSwgdmIsIHZjKSAmJiBkaXN0IDwgc3BoZXJlU2hhcGUucmFkaXVzKSB7CiAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgbGV0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opOwogICAgICAgICAgdG1wLnZzdWIobG9jYWxTcGhlcmVQb3MsIHIubmkpOwogICAgICAgICAgci5uaS5ub3JtYWxpemUoKTsKICAgICAgICAgIHIubmkuc2NhbGUoc3BoZXJlU2hhcGUucmFkaXVzLCByLnJpKTsKICAgICAgICAgIHIucmkudmFkZChzcGhlcmVQb3MsIHIucmkpOwogICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB0bXAsIHRtcCk7CiAgICAgICAgICB0bXAudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLm5pLCByLm5pKTsKICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIucmksIHIucmkpOwogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRyaWFuZ2xlcy5sZW5ndGggPSAwOwogICAgfQoKICAgIHBsYW5lVHJpbWVzaChwbGFuZVNoYXBlLCB0cmltZXNoU2hhcGUsIHBsYW5lUG9zLCB0cmltZXNoUG9zLCBwbGFuZVF1YXQsIHRyaW1lc2hRdWF0LCBwbGFuZUJvZHksIHRyaW1lc2hCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgLy8gTWFrZSBjb250YWN0cyEKICAgICAgY29uc3QgdiA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IG5vcm1hbCA9IHBsYW5lVHJpbWVzaF9ub3JtYWw7CiAgICAgIG5vcm1hbC5zZXQoMCwgMCwgMSk7CiAgICAgIHBsYW5lUXVhdC52bXVsdChub3JtYWwsIG5vcm1hbCk7IC8vIFR1cm4gbm9ybWFsIGFjY29yZGluZyB0byBwbGFuZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0cmltZXNoU2hhcGUudmVydGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAgICAgLy8gR2V0IHdvcmxkIHZlcnRleCBmcm9tIHRyaW1lc2gKICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KGksIHYpOyAvLyBTYWZlIHVwCgogICAgICAgIGNvbnN0IHYyID0gbmV3IFZlYzMoKTsKICAgICAgICB2Mi5jb3B5KHYpOwogICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdjIsIHYpOyAvLyBDaGVjayBwbGFuZSBzaWRlCgogICAgICAgIGNvbnN0IHJlbHBvcyA9IHBsYW5lVHJpbWVzaF9yZWxwb3M7CiAgICAgICAgdi52c3ViKHBsYW5lUG9zLCByZWxwb3MpOwogICAgICAgIGNvbnN0IGRvdCA9IG5vcm1hbC5kb3QocmVscG9zKTsKCiAgICAgICAgaWYgKGRvdCA8PSAwLjApIHsKICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24ocGxhbmVCb2R5LCB0cmltZXNoQm9keSwgcGxhbmVTaGFwZSwgdHJpbWVzaFNoYXBlLCByc2ksIHJzaik7CiAgICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbAogICAgICAgICAgLy8gR2V0IHZlcnRleCBwb3NpdGlvbiBwcm9qZWN0ZWQgb24gcGxhbmUKCiAgICAgICAgICBjb25zdCBwcm9qZWN0ZWQgPSBwbGFuZVRyaW1lc2hfcHJvamVjdGVkOwogICAgICAgICAgbm9ybWFsLnNjYWxlKHJlbHBvcy5kb3Qobm9ybWFsKSwgcHJvamVjdGVkKTsKICAgICAgICAgIHYudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7IC8vIHJpIGlzIHRoZSBwcm9qZWN0ZWQgd29ybGQgcG9zaXRpb24gbWludXMgcGxhbmUgcG9zaXRpb24KCiAgICAgICAgICByLnJpLmNvcHkocHJvamVjdGVkKTsKICAgICAgICAgIHIucmkudnN1YihwbGFuZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgci5yai5jb3B5KHYpOwogICAgICAgICAgci5yai52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTsgLy8gU3RvcmUgcmVzdWx0CgogICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gLy8gY29udmV4VHJpbWVzaCgKICAgIC8vICAgc2k6IENvbnZleFBvbHloZWRyb24sIHNqOiBUcmltZXNoLCB4aTogVmVjMywgeGo6IFZlYzMsIHFpOiBRdWF0ZXJuaW9uLCBxajogUXVhdGVybmlvbiwKICAgIC8vICAgYmk6IEJvZHksIGJqOiBCb2R5LCByc2k/OiBTaGFwZSB8IG51bGwsIHJzaj86IFNoYXBlIHwgbnVsbCwKICAgIC8vICAgZmFjZUxpc3RBPzogbnVtYmVyW10gfCBudWxsLCBmYWNlTGlzdEI/OiBudW1iZXJbXSB8IG51bGwsCiAgICAvLyApIHsKICAgIC8vICAgY29uc3Qgc2VwQXhpcyA9IGNvbnZleENvbnZleF9zZXBBeGlzOwogICAgLy8gICBpZih4aS5kaXN0YW5jZVRvKHhqKSA+IHNpLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2ouYm91bmRpbmdTcGhlcmVSYWRpdXMpewogICAgLy8gICAgICAgcmV0dXJuOwogICAgLy8gICB9CiAgICAvLyAgIC8vIENvbnN0cnVjdCBhIHRlbXAgaHVsbCBmb3IgZWFjaCB0cmlhbmdsZQogICAgLy8gICBjb25zdCBodWxsQiA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKCk7CiAgICAvLyAgIGh1bGxCLmZhY2VzID0gW1swLDEsMl1dOwogICAgLy8gICBjb25zdCB2YSA9IG5ldyBWZWMzKCk7CiAgICAvLyAgIGNvbnN0IHZiID0gbmV3IFZlYzMoKTsKICAgIC8vICAgY29uc3QgdmMgPSBuZXcgVmVjMygpOwogICAgLy8gICBodWxsQi52ZXJ0aWNlcyA9IFsKICAgIC8vICAgICAgIHZhLAogICAgLy8gICAgICAgdmIsCiAgICAvLyAgICAgICB2YwogICAgLy8gICBdOwogICAgLy8gICBmb3IgKGxldCBpID0gMDsgaSA8IHNqLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB7CiAgICAvLyAgICAgICBjb25zdCB0cmlhbmdsZU5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgICAvLyAgICAgICBzai5nZXROb3JtYWwoaSwgdHJpYW5nbGVOb3JtYWwpOwogICAgLy8gICAgICAgaHVsbEIuZmFjZU5vcm1hbHMgPSBbdHJpYW5nbGVOb3JtYWxdOwogICAgLy8gICAgICAgc2ouZ2V0VHJpYW5nbGVWZXJ0aWNlcyhpLCB2YSwgdmIsIHZjKTsKICAgIC8vICAgICAgIGxldCBkID0gc2kudGVzdFNlcEF4aXModHJpYW5nbGVOb3JtYWwsIGh1bGxCLCB4aSwgcWksIHhqLCBxaik7CiAgICAvLyAgICAgICBpZighZCl7CiAgICAvLyAgICAgICAgICAgdHJpYW5nbGVOb3JtYWwuc2NhbGUoLTEsIHRyaWFuZ2xlTm9ybWFsKTsKICAgIC8vICAgICAgICAgICBkID0gc2kudGVzdFNlcEF4aXModHJpYW5nbGVOb3JtYWwsIGh1bGxCLCB4aSwgcWksIHhqLCBxaik7CiAgICAvLyAgICAgICAgICAgaWYoIWQpewogICAgLy8gICAgICAgICAgICAgICBjb250aW51ZTsKICAgIC8vICAgICAgICAgICB9CiAgICAvLyAgICAgICB9CiAgICAvLyAgICAgICBjb25zdCByZXM6IENvbnZleFBvbHloZWRyb25Db250YWN0UG9pbnRbXSA9IFtdOwogICAgLy8gICAgICAgY29uc3QgcSA9IGNvbnZleENvbnZleF9xOwogICAgLy8gICAgICAgc2kuY2xpcEFnYWluc3RIdWxsKHhpLHFpLGh1bGxCLHhqLHFqLHRyaWFuZ2xlTm9ybWFsLC0xMDAsMTAwLHJlcyk7CiAgICAvLyAgICAgICBmb3IobGV0IGogPSAwOyBqICE9PSByZXMubGVuZ3RoOyBqKyspewogICAgLy8gICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSxiaixzaSxzaixyc2kscnNqKSwKICAgIC8vICAgICAgICAgICAgICAgcmkgPSByLnJpLAogICAgLy8gICAgICAgICAgICAgICByaiA9IHIucmo7CiAgICAvLyAgICAgICAgICAgci5uaS5jb3B5KHRyaWFuZ2xlTm9ybWFsKTsKICAgIC8vICAgICAgICAgICByLm5pLm5lZ2F0ZShyLm5pKTsKICAgIC8vICAgICAgICAgICByZXNbal0ubm9ybWFsLm5lZ2F0ZShxKTsKICAgIC8vICAgICAgICAgICBxLm11bHQocmVzW2pdLmRlcHRoLCBxKTsKICAgIC8vICAgICAgICAgICByZXNbal0ucG9pbnQudmFkZChxLCByaSk7CiAgICAvLyAgICAgICAgICAgcmouY29weShyZXNbal0ucG9pbnQpOwogICAgLy8gICAgICAgICAgIC8vIENvbnRhY3QgcG9pbnRzIGFyZSBpbiB3b3JsZCBjb29yZGluYXRlcy4gVHJhbnNmb3JtIGJhY2sgdG8gcmVsYXRpdmUKICAgIC8vICAgICAgICAgICByaS52c3ViKHhpLHJpKTsKICAgIC8vICAgICAgICAgICByai52c3ViKHhqLHJqKTsKICAgIC8vICAgICAgICAgICAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllcwogICAgLy8gICAgICAgICAgIHJpLnZhZGQoeGksIHJpKTsKICAgIC8vICAgICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAvLyAgICAgICAgICAgcmoudmFkZCh4aiwgcmopOwogICAgLy8gICAgICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTsKICAgIC8vICAgICAgICAgICByZXN1bHQucHVzaChyKTsKICAgIC8vICAgICAgIH0KICAgIC8vICAgfQogICAgLy8gfQoKCiAgfQoKICBjb25zdCBhdmVyYWdlTm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBhdmVyYWdlQ29udGFjdFBvaW50QSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXZlcmFnZUNvbnRhY3RQb2ludEIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFF1YXQxID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCB0bXBRdWF0MiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgcGxhbmVUcmltZXNoX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVUcmltZXNoX3JlbHBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVUcmltZXNoX3Byb2plY3RlZCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfcmVscG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3YgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdjIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvciA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yVW5pdCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZVBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF90bXAgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCID0gbmV3IEFBQkIoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3RyaWFuZ2xlcyA9IFtdOwogIGNvbnN0IHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVfdG9fc3BoZXJlX29ydGhvID0gbmV3IFZlYzMoKTsgLy8gU2VlIGh0dHA6Ly9idWxsZXRwaHlzaWNzLmNvbS9CdWxsZXQvQnVsbGV0RnVsbC9TcGhlcmVUcmlhbmdsZURldGVjdG9yXzhjcHBfc291cmNlLmh0bWwKCiAgY29uc3QgcG9pbnRJblBvbHlnb25fZWRnZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcG9pbnRJblBvbHlnb25fZWRnZV94X25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcG9pbnRJblBvbHlnb25fdnRwID0gbmV3IFZlYzMoKTsKCiAgZnVuY3Rpb24gcG9pbnRJblBvbHlnb24odmVydHMsIG5vcm1hbCwgcCkgewogICAgbGV0IHBvc2l0aXZlUmVzdWx0ID0gbnVsbDsKICAgIGNvbnN0IE4gPSB2ZXJ0cy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICBjb25zdCB2ID0gdmVydHNbaV07IC8vIEdldCBlZGdlIHRvIHRoZSBuZXh0IHZlcnRleAoKICAgICAgY29uc3QgZWRnZSA9IHBvaW50SW5Qb2x5Z29uX2VkZ2U7CiAgICAgIHZlcnRzWyhpICsgMSkgJSBOXS52c3ViKHYsIGVkZ2UpOyAvLyBHZXQgY3Jvc3MgcHJvZHVjdCBiZXR3ZWVuIHBvbHlnb24gbm9ybWFsIGFuZCB0aGUgZWRnZQoKICAgICAgY29uc3QgZWRnZV94X25vcm1hbCA9IHBvaW50SW5Qb2x5Z29uX2VkZ2VfeF9ub3JtYWw7IC8vY29uc3QgZWRnZV94X25vcm1hbCA9IG5ldyBWZWMzKCk7CgogICAgICBlZGdlLmNyb3NzKG5vcm1hbCwgZWRnZV94X25vcm1hbCk7IC8vIEdldCB2ZWN0b3IgYmV0d2VlbiBwb2ludCBhbmQgY3VycmVudCB2ZXJ0ZXgKCiAgICAgIGNvbnN0IHZlcnRleF90b19wID0gcG9pbnRJblBvbHlnb25fdnRwOwogICAgICBwLnZzdWIodiwgdmVydGV4X3RvX3ApOyAvLyBUaGlzIGRvdCBwcm9kdWN0IGRldGVybWluZXMgd2hpY2ggc2lkZSBvZiB0aGUgZWRnZSB0aGUgcG9pbnQgaXMKCiAgICAgIGNvbnN0IHIgPSBlZGdlX3hfbm9ybWFsLmRvdCh2ZXJ0ZXhfdG9fcCk7IC8vIElmIGFsbCBzdWNoIGRvdCBwcm9kdWN0cyBoYXZlIHNhbWUgc2lnbiwgd2UgYXJlIGluc2lkZSB0aGUgcG9seWdvbi4KCiAgICAgIGlmIChwb3NpdGl2ZVJlc3VsdCA9PT0gbnVsbCB8fCByID4gMCAmJiBwb3NpdGl2ZVJlc3VsdCA9PT0gdHJ1ZSB8fCByIDw9IDAgJiYgcG9zaXRpdmVSZXN1bHQgPT09IGZhbHNlKSB7CiAgICAgICAgaWYgKHBvc2l0aXZlUmVzdWx0ID09PSBudWxsKSB7CiAgICAgICAgICBwb3NpdGl2ZVJlc3VsdCA9IHIgPiAwOwogICAgICAgIH0KCiAgICAgICAgY29udGludWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBFbmNvdW50ZXJlZCBzb21lIG90aGVyIHNpZ24uIEV4aXQuCiAgICAgIH0KICAgIH0gLy8gSWYgd2UgZ290IGhlcmUsIGFsbCBkb3QgcHJvZHVjdHMgd2VyZSBvZiB0aGUgc2FtZSBzaWduLgoKCiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGNvbnN0IGJveF90b19zcGhlcmUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUJveF9ucyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X25zMSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X25zMiA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X3NpZGVzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwogIGNvbnN0IHNwaGVyZUJveF9zcGhlcmVfdG9fY29ybmVyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZV9ucyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X3NpZGVfbnMxID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZV9uczIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleF90b19zcGhlcmUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9lZGdlID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfZWRnZVVuaXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9zcGhlcmVUb0Nvcm5lciA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X3dvcmxkQ29ybmVyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfd29ybGROb3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF93b3JsZFBvaW50ID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfcGVuZXRyYXRpb25WZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9zcGhlcmVUb1dvcmxkUG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lQ29udmV4X3YgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lQ29udmV4X25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVDb252ZXhfcmVscG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZUNvbnZleF9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleENvbnZleF9zZXBBeGlzID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhDb252ZXhfcSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGFydGljbGVQbGFuZV9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBhcnRpY2xlUGxhbmVfcmVscG9zID0gbmV3IFZlYzMoKTsKICBjb25zdCBwYXJ0aWNsZVBsYW5lX3Byb2plY3RlZCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGFydGljbGVTcGhlcmVfbm9ybWFsID0gbmV3IFZlYzMoKTsgLy8gV0lQCgogIGNvbnN0IGNxaiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgY29udmV4UGFydGljbGVfbG9jYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleFBhcnRpY2xlX3BlbmV0cmF0ZWRGYWNlTm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhQYXJ0aWNsZV93b3JsZFBlbmV0cmF0aW9uVmVjID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF90bXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF9mYWNlTGlzdCA9IFswXTsKICBjb25zdCBzcGhlcmVIZWlnaHRmaWVsZF90bXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTsKCiAgY2xhc3MgT3ZlcmxhcEtlZXBlciB7CiAgICAvKioKICAgICAqIEB0b2RvIFJlbW92ZSB1c2VsZXNzIGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmN1cnJlbnQgPSB2b2lkIDA7CiAgICAgIHRoaXMucHJldmlvdXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuY3VycmVudCA9IFtdOwogICAgICB0aGlzLnByZXZpb3VzID0gW107CiAgICB9CiAgICAvKioKICAgICAqIGdldEtleQogICAgICovCgoKICAgIGdldEtleShpLCBqKSB7CiAgICAgIGlmIChqIDwgaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICByZXR1cm4gaSA8PCAxNiB8IGo7CiAgICB9CiAgICAvKioKICAgICAqIHNldAogICAgICovCgoKICAgIHNldChpLCBqKSB7CiAgICAgIC8vIEluc2VydGlvbiBzb3J0LiBUaGlzIHdheSB0aGUgZGlmZiB3aWxsIGhhdmUgbGluZWFyIGNvbXBsZXhpdHkuCiAgICAgIGNvbnN0IGtleSA9IHRoaXMuZ2V0S2V5KGksIGopOwogICAgICBjb25zdCBjdXJyZW50ID0gdGhpcy5jdXJyZW50OwogICAgICBsZXQgaW5kZXggPSAwOwoKICAgICAgd2hpbGUgKGtleSA+IGN1cnJlbnRbaW5kZXhdKSB7CiAgICAgICAgaW5kZXgrKzsKICAgICAgfQoKICAgICAgaWYgKGtleSA9PT0gY3VycmVudFtpbmRleF0pIHsKICAgICAgICByZXR1cm47IC8vIFBhaXIgd2FzIGFscmVhZHkgYWRkZWQKICAgICAgfQoKICAgICAgZm9yIChsZXQgaiA9IGN1cnJlbnQubGVuZ3RoIC0gMTsgaiA+PSBpbmRleDsgai0tKSB7CiAgICAgICAgY3VycmVudFtqICsgMV0gPSBjdXJyZW50W2pdOwogICAgICB9CgogICAgICBjdXJyZW50W2luZGV4XSA9IGtleTsKICAgIH0KICAgIC8qKgogICAgICogdGljawogICAgICovCgoKICAgIHRpY2soKSB7CiAgICAgIGNvbnN0IHRtcCA9IHRoaXMuY3VycmVudDsKICAgICAgdGhpcy5jdXJyZW50ID0gdGhpcy5wcmV2aW91czsKICAgICAgdGhpcy5wcmV2aW91cyA9IHRtcDsKICAgICAgdGhpcy5jdXJyZW50Lmxlbmd0aCA9IDA7CiAgICB9CiAgICAvKioKICAgICAqIGdldERpZmYKICAgICAqLwoKCiAgICBnZXREaWZmKGFkZGl0aW9ucywgcmVtb3ZhbHMpIHsKICAgICAgY29uc3QgYSA9IHRoaXMuY3VycmVudDsKICAgICAgY29uc3QgYiA9IHRoaXMucHJldmlvdXM7CiAgICAgIGNvbnN0IGFsID0gYS5sZW5ndGg7CiAgICAgIGNvbnN0IGJsID0gYi5sZW5ndGg7CiAgICAgIGxldCBqID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWw7IGkrKykgewogICAgICAgIGxldCBmb3VuZCA9IGZhbHNlOwogICAgICAgIGNvbnN0IGtleUEgPSBhW2ldOwoKICAgICAgICB3aGlsZSAoa2V5QSA+IGJbal0pIHsKICAgICAgICAgIGorKzsKICAgICAgICB9CgogICAgICAgIGZvdW5kID0ga2V5QSA9PT0gYltqXTsKCiAgICAgICAgaWYgKCFmb3VuZCkgewogICAgICAgICAgdW5wYWNrQW5kUHVzaChhZGRpdGlvbnMsIGtleUEpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaiA9IDA7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJsOyBpKyspIHsKICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKICAgICAgICBjb25zdCBrZXlCID0gYltpXTsKCiAgICAgICAgd2hpbGUgKGtleUIgPiBhW2pdKSB7CiAgICAgICAgICBqKys7CiAgICAgICAgfQoKICAgICAgICBmb3VuZCA9IGFbal0gPT09IGtleUI7CgogICAgICAgIGlmICghZm91bmQpIHsKICAgICAgICAgIHVucGFja0FuZFB1c2gocmVtb3ZhbHMsIGtleUIpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICB9CgogIGZ1bmN0aW9uIHVucGFja0FuZFB1c2goYXJyYXksIGtleSkgewogICAgYXJyYXkucHVzaCgoa2V5ICYgMHhmZmZmMDAwMCkgPj4gMTYsIGtleSAmIDB4MDAwMGZmZmYpOwogIH0KICAvKioKICAgKiBUdXBsZURpY3Rpb25hcnkKICAgKi8KCgogIGNsYXNzIFR1cGxlRGljdGlvbmFyeSB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5kYXRhID0gewogICAgICAgIGtleXM6IFtdCiAgICAgIH07CiAgICB9CiAgICAvKiogZ2V0ICovCgoKICAgIGdldChpLCBqKSB7CiAgICAgIGlmIChpID4gaikgewogICAgICAgIC8vIHN3YXAKICAgICAgICBjb25zdCB0ZW1wID0gajsKICAgICAgICBqID0gaTsKICAgICAgICBpID0gdGVtcDsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuZGF0YVtpICsgIi0iICsgal07CiAgICB9CiAgICAvKiogc2V0ICovCgoKICAgIHNldChpLCBqLCB2YWx1ZSkgewogICAgICBpZiAoaSA+IGopIHsKICAgICAgICBjb25zdCB0ZW1wID0gajsKICAgICAgICBqID0gaTsKICAgICAgICBpID0gdGVtcDsKICAgICAgfQoKICAgICAgY29uc3Qga2V5ID0gaSArICItIiArIGo7IC8vIENoZWNrIGlmIGtleSBhbHJlYWR5IGV4aXN0cwoKICAgICAgaWYgKCF0aGlzLmdldChpLCBqKSkgewogICAgICAgIHRoaXMuZGF0YS5rZXlzLnB1c2goa2V5KTsKICAgICAgfQoKICAgICAgdGhpcy5kYXRhW2tleV0gPSB2YWx1ZTsKICAgIH0KICAgIC8qKiByZXNldCAqLwoKCiAgICByZXNldCgpIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3Qga2V5cyA9IGRhdGEua2V5czsKCiAgICAgIHdoaWxlIChrZXlzLmxlbmd0aCA+IDApIHsKICAgICAgICBjb25zdCBrZXkgPSBrZXlzLnBvcCgpOwogICAgICAgIGRlbGV0ZSBkYXRhW2tleV07CiAgICAgIH0KICAgIH0KCiAgfQogIC8qKgogICAqIFRoZSBwaHlzaWNzIHdvcmxkCiAgICovCgoKICBjbGFzcyBXb3JsZCBleHRlbmRzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogQ3VycmVudGx5IC8gbGFzdCB1c2VkIHRpbWVzdGVwLiBJcyBzZXQgdG8gLTEgaWYgbm90IGF2YWlsYWJsZS4gVGhpcyB2YWx1ZSBpcyB1cGRhdGVkIGJlZm9yZSBlYWNoIGludGVybmFsIHN0ZXAsIHdoaWNoIG1lYW5zIHRoYXQgaXQgaXMgImZyZXNoIiBpbnNpZGUgZXZlbnQgY2FsbGJhY2tzLgogICAgICovCgogICAgLyoqCiAgICAgKiBNYWtlcyBib2RpZXMgZ28gdG8gc2xlZXAgd2hlbiB0aGV5J3ZlIGJlZW4gaW5hY3RpdmUuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBBbGwgdGhlIGN1cnJlbnQgY29udGFjdHMgKGluc3RhbmNlcyBvZiBDb250YWN0RXF1YXRpb24pIGluIHRoZSB3b3JsZC4KICAgICAqLwoKICAgIC8qKgogICAgICogSG93IG9mdGVuIHRvIG5vcm1hbGl6ZSBxdWF0ZXJuaW9ucy4gU2V0IHRvIDAgZm9yIGV2ZXJ5IHN0ZXAsIDEgZm9yIGV2ZXJ5IHNlY29uZCBldGMuLiBBIGxhcmdlciB2YWx1ZSBpbmNyZWFzZXMgcGVyZm9ybWFuY2UuIElmIGJvZGllcyB0ZW5kIHRvIGV4cGxvZGUsIHNldCB0byBhIHNtYWxsZXIgdmFsdWUgKHplcm8gdG8gYmUgc3VyZSBub3RoaW5nIGNhbiBnbyB3cm9uZykuCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byB0cnVlIHRvIHVzZSBmYXN0IHF1YXRlcm5pb24gbm9ybWFsaXphdGlvbi4gSXQgaXMgb2Z0ZW4gZW5vdWdoIGFjY3VyYXRlIHRvIHVzZS4KICAgICAqIElmIGJvZGllcyB0ZW5kIHRvIGV4cGxvZGUsIHNldCB0byBmYWxzZS4KICAgICAqIEBkZWZhdWx0IGZhbHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSB3YWxsLWNsb2NrIHRpbWUgc2luY2Ugc2ltdWxhdGlvbiBzdGFydC4KICAgICAqLwoKICAgIC8qKgogICAgICogTnVtYmVyIG9mIHRpbWVzdGVwcyB0YWtlbiBzaW5jZSBzdGFydC4KICAgICAqLwoKICAgIC8qKgogICAgICogRGVmYXVsdCBhbmQgbGFzdCB0aW1lc3RlcCBzaXplcy4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGdyYXZpdHkgb2YgdGhlIHdvcmxkLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYnJvYWRwaGFzZSBhbGdvcml0aG0gdG8gdXNlLgogICAgICogQGRlZmF1bHQgTmFpdmVCcm9hZHBoYXNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCBib2RpZXMgaW4gdGhpcyB3b3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBUcnVlIGlmIGFueSBib2RpZXMgYXJlIG5vdCBzbGVlcGluZywgZmFsc2UgaWYgZXZlcnkgYm9keSBpcyBzbGVlcGluZy4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHNvbHZlciBhbGdvcml0aG0gdG8gdXNlLgogICAgICogQGRlZmF1bHQgR1NTb2x2ZXIKICAgICAqLwoKICAgIC8qKgogICAgICogY29sbGlzaW9uTWF0cml4CiAgICAgKi8KCiAgICAvKioKICAgICAqIENvbGxpc2lvbk1hdHJpeCBmcm9tIHRoZSBwcmV2aW91cyBzdGVwLgogICAgICovCgogICAgLyoqCiAgICAgKiBBbGwgYWRkZWQgbWF0ZXJpYWxzLgogICAgICogQGRlcHJlY2F0ZWQKICAgICAqIEB0b2RvIFJlbW92ZQogICAgICovCgogICAgLyoqCiAgICAgKiBBbGwgYWRkZWQgY29udGFjdG1hdGVyaWFscy4KICAgICAqLwoKICAgIC8qKgogICAgICogVXNlZCB0byBsb29rIHVwIGEgQ29udGFjdE1hdGVyaWFsIGdpdmVuIHR3byBpbnN0YW5jZXMgb2YgTWF0ZXJpYWwuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBkZWZhdWx0IG1hdGVyaWFsIG9mIHRoZSBib2RpZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoaXMgY29udGFjdCBtYXRlcmlhbCBpcyB1c2VkIGlmIG5vIHN1aXRhYmxlIGNvbnRhY3RtYXRlcmlhbCBpcyBmb3VuZCBmb3IgYSBjb250YWN0LgogICAgICovCgogICAgLyoqCiAgICAgKiBUaW1lIGFjY3VtdWxhdG9yIGZvciBpbnRlcnBvbGF0aW9uLgogICAgICogQHNlZSBodHRwczovL2dhZmZlcm9uZ2FtZXMuY29tL2dhbWUtcGh5c2ljcy9maXgteW91ci10aW1lc3RlcC8KICAgICAqLwoKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciBhIGJvZHkgaGFzIGJlZW4gYWRkZWQgdG8gdGhlIHdvcmxkLgogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgYmVlbiByZW1vdmVkIGZyb20gdGhlIHdvcmxkLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuZHQgPSB2b2lkIDA7CiAgICAgIHRoaXMuYWxsb3dTbGVlcCA9IHZvaWQgMDsKICAgICAgdGhpcy5jb250YWN0cyA9IHZvaWQgMDsKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9ucyA9IHZvaWQgMDsKICAgICAgdGhpcy5xdWF0Tm9ybWFsaXplU2tpcCA9IHZvaWQgMDsKICAgICAgdGhpcy5xdWF0Tm9ybWFsaXplRmFzdCA9IHZvaWQgMDsKICAgICAgdGhpcy50aW1lID0gdm9pZCAwOwogICAgICB0aGlzLnN0ZXBudW1iZXIgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGVmYXVsdF9kdCA9IHZvaWQgMDsKICAgICAgdGhpcy5uZXh0SWQgPSB2b2lkIDA7CiAgICAgIHRoaXMuZ3Jhdml0eSA9IHZvaWQgMDsKICAgICAgdGhpcy5icm9hZHBoYXNlID0gdm9pZCAwOwogICAgICB0aGlzLmJvZGllcyA9IHZvaWQgMDsKICAgICAgdGhpcy5oYXNBY3RpdmVCb2RpZXMgPSB2b2lkIDA7CiAgICAgIHRoaXMuc29sdmVyID0gdm9pZCAwOwogICAgICB0aGlzLmNvbnN0cmFpbnRzID0gdm9pZCAwOwogICAgICB0aGlzLm5hcnJvd3BoYXNlID0gdm9pZCAwOwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeCA9IHZvaWQgMDsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91cyA9IHZvaWQgMDsKICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlciA9IHZvaWQgMDsKICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIgPSB2b2lkIDA7CiAgICAgIHRoaXMubWF0ZXJpYWxzID0gdm9pZCAwOwogICAgICB0aGlzLmNvbnRhY3RtYXRlcmlhbHMgPSB2b2lkIDA7CiAgICAgIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUgPSB2b2lkIDA7CiAgICAgIHRoaXMuZGVmYXVsdE1hdGVyaWFsID0gdm9pZCAwOwogICAgICB0aGlzLmRlZmF1bHRDb250YWN0TWF0ZXJpYWwgPSB2b2lkIDA7CiAgICAgIHRoaXMuZG9Qcm9maWxpbmcgPSB2b2lkIDA7CiAgICAgIHRoaXMucHJvZmlsZSA9IHZvaWQgMDsKICAgICAgdGhpcy5hY2N1bXVsYXRvciA9IHZvaWQgMDsKICAgICAgdGhpcy5zdWJzeXN0ZW1zID0gdm9pZCAwOwogICAgICB0aGlzLmFkZEJvZHlFdmVudCA9IHZvaWQgMDsKICAgICAgdGhpcy5yZW1vdmVCb2R5RXZlbnQgPSB2b2lkIDA7CiAgICAgIHRoaXMuaWRUb0JvZHlNYXAgPSB2b2lkIDA7CiAgICAgIHRoaXMuZHQgPSAtMTsKICAgICAgdGhpcy5hbGxvd1NsZWVwID0gISFvcHRpb25zLmFsbG93U2xlZXA7CiAgICAgIHRoaXMuY29udGFjdHMgPSBbXTsKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9ucyA9IFtdOwogICAgICB0aGlzLnF1YXROb3JtYWxpemVTa2lwID0gb3B0aW9ucy5xdWF0Tm9ybWFsaXplU2tpcCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5xdWF0Tm9ybWFsaXplU2tpcCA6IDA7CiAgICAgIHRoaXMucXVhdE5vcm1hbGl6ZUZhc3QgPSBvcHRpb25zLnF1YXROb3JtYWxpemVGYXN0ICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnF1YXROb3JtYWxpemVGYXN0IDogZmFsc2U7CiAgICAgIHRoaXMudGltZSA9IDAuMDsKICAgICAgdGhpcy5zdGVwbnVtYmVyID0gMDsKICAgICAgdGhpcy5kZWZhdWx0X2R0ID0gMSAvIDYwOwogICAgICB0aGlzLm5leHRJZCA9IDA7CiAgICAgIHRoaXMuZ3Jhdml0eSA9IG5ldyBWZWMzKCk7CgogICAgICBpZiAob3B0aW9ucy5ncmF2aXR5KSB7CiAgICAgICAgdGhpcy5ncmF2aXR5LmNvcHkob3B0aW9ucy5ncmF2aXR5KTsKICAgICAgfQoKICAgICAgdGhpcy5icm9hZHBoYXNlID0gb3B0aW9ucy5icm9hZHBoYXNlICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmJyb2FkcGhhc2UgOiBuZXcgTmFpdmVCcm9hZHBoYXNlKCk7CiAgICAgIHRoaXMuYm9kaWVzID0gW107CiAgICAgIHRoaXMuaGFzQWN0aXZlQm9kaWVzID0gZmFsc2U7CiAgICAgIHRoaXMuc29sdmVyID0gb3B0aW9ucy5zb2x2ZXIgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuc29sdmVyIDogbmV3IEdTU29sdmVyKCk7CiAgICAgIHRoaXMuY29uc3RyYWludHMgPSBbXTsKICAgICAgdGhpcy5uYXJyb3dwaGFzZSA9IG5ldyBOYXJyb3dwaGFzZSh0aGlzKTsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXggPSBuZXcgQXJyYXlDb2xsaXNpb25NYXRyaXgoKTsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91cyA9IG5ldyBBcnJheUNvbGxpc2lvbk1hdHJpeCgpOwogICAgICB0aGlzLmJvZHlPdmVybGFwS2VlcGVyID0gbmV3IE92ZXJsYXBLZWVwZXIoKTsKICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIgPSBuZXcgT3ZlcmxhcEtlZXBlcigpOwogICAgICB0aGlzLm1hdGVyaWFscyA9IFtdOwogICAgICB0aGlzLmNvbnRhY3RtYXRlcmlhbHMgPSBbXTsKICAgICAgdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZSA9IG5ldyBUdXBsZURpY3Rpb25hcnkoKTsKICAgICAgdGhpcy5kZWZhdWx0TWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwoJ2RlZmF1bHQnKTsKICAgICAgdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsID0gbmV3IENvbnRhY3RNYXRlcmlhbCh0aGlzLmRlZmF1bHRNYXRlcmlhbCwgdGhpcy5kZWZhdWx0TWF0ZXJpYWwsIHsKICAgICAgICBmcmljdGlvbjogMC4zLAogICAgICAgIHJlc3RpdHV0aW9uOiAwLjAKICAgICAgfSk7CiAgICAgIHRoaXMuZG9Qcm9maWxpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5wcm9maWxlID0gewogICAgICAgIHNvbHZlOiAwLAogICAgICAgIG1ha2VDb250YWN0Q29uc3RyYWludHM6IDAsCiAgICAgICAgYnJvYWRwaGFzZTogMCwKICAgICAgICBpbnRlZ3JhdGU6IDAsCiAgICAgICAgbmFycm93cGhhc2U6IDAKICAgICAgfTsKICAgICAgdGhpcy5hY2N1bXVsYXRvciA9IDA7CiAgICAgIHRoaXMuc3Vic3lzdGVtcyA9IFtdOwogICAgICB0aGlzLmFkZEJvZHlFdmVudCA9IHsKICAgICAgICB0eXBlOiAnYWRkQm9keScsCiAgICAgICAgYm9keTogbnVsbAogICAgICB9OwogICAgICB0aGlzLnJlbW92ZUJvZHlFdmVudCA9IHsKICAgICAgICB0eXBlOiAncmVtb3ZlQm9keScsCiAgICAgICAgYm9keTogbnVsbAogICAgICB9OwogICAgICB0aGlzLmlkVG9Cb2R5TWFwID0ge307CiAgICAgIHRoaXMuYnJvYWRwaGFzZS5zZXRXb3JsZCh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBjb250YWN0IG1hdGVyaWFsIGJldHdlZW4gbWF0ZXJpYWxzIG0xIGFuZCBtMgogICAgICogQHJldHVybiBUaGUgY29udGFjdCBtYXRlcmlhbCBpZiBpdCB3YXMgZm91bmQuCiAgICAgKi8KCgogICAgZ2V0Q29udGFjdE1hdGVyaWFsKG0xLCBtMikgewogICAgICByZXR1cm4gdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZS5nZXQobTEuaWQsIG0yLmlkKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IG51bWJlciBvZiBvYmplY3RzIGluIHRoZSB3b3JsZC4KICAgICAqIEBkZXByZWNhdGVkCiAgICAgKi8KCgogICAgbnVtT2JqZWN0cygpIHsKICAgICAgcmV0dXJuIHRoaXMuYm9kaWVzLmxlbmd0aDsKICAgIH0KICAgIC8qKgogICAgICogU3RvcmUgb2xkIGNvbGxpc2lvbiBzdGF0ZSBpbmZvCiAgICAgKi8KCgogICAgY29sbGlzaW9uTWF0cml4VGljaygpIHsKICAgICAgY29uc3QgdGVtcCA9IHRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXM7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXMgPSB0aGlzLmNvbGxpc2lvbk1hdHJpeDsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXggPSB0ZW1wOwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5yZXNldCgpOwogICAgICB0aGlzLmJvZHlPdmVybGFwS2VlcGVyLnRpY2soKTsKICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIudGljaygpOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSBjb25zdHJhaW50IHRvIHRoZSBzaW11bGF0aW9uLgogICAgICovCgoKICAgIGFkZENvbnN0cmFpbnQoYykgewogICAgICB0aGlzLmNvbnN0cmFpbnRzLnB1c2goYyk7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZXMgYSBjb25zdHJhaW50CiAgICAgKi8KCgogICAgcmVtb3ZlQ29uc3RyYWludChjKSB7CiAgICAgIGNvbnN0IGlkeCA9IHRoaXMuY29uc3RyYWludHMuaW5kZXhPZihjKTsKCiAgICAgIGlmIChpZHggIT09IC0xKSB7CiAgICAgICAgdGhpcy5jb25zdHJhaW50cy5zcGxpY2UoaWR4LCAxKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSYXljYXN0IHRlc3QKICAgICAqIEBkZXByZWNhdGVkIFVzZSAucmF5Y2FzdEFsbCwgLnJheWNhc3RDbG9zZXN0IG9yIC5yYXljYXN0QW55IGluc3RlYWQuCiAgICAgKi8KCgogICAgcmF5VGVzdChmcm9tLCB0bywgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBSYXljYXN0UmVzdWx0KSB7CiAgICAgICAgLy8gRG8gcmF5Y2FzdENsb3Nlc3QKICAgICAgICB0aGlzLnJheWNhc3RDbG9zZXN0KGZyb20sIHRvLCB7CiAgICAgICAgICBza2lwQmFja2ZhY2VzOiB0cnVlCiAgICAgICAgfSwgcmVzdWx0KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBEbyByYXljYXN0QWxsCiAgICAgICAgdGhpcy5yYXljYXN0QWxsKGZyb20sIHRvLCB7CiAgICAgICAgICBza2lwQmFja2ZhY2VzOiB0cnVlCiAgICAgICAgfSwgcmVzdWx0KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBSYXkgY2FzdCBhZ2FpbnN0IGFsbCBib2RpZXMuIFRoZSBwcm92aWRlZCBjYWxsYmFjayB3aWxsIGJlIGV4ZWN1dGVkIGZvciBlYWNoIGhpdCB3aXRoIGEgUmF5Y2FzdFJlc3VsdCBhcyBzaW5nbGUgYXJndW1lbnQuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgYW55IGJvZHkgd2FzIGhpdC4KICAgICAqLwoKCiAgICByYXljYXN0QWxsKGZyb20sIHRvLCBvcHRpb25zLCBjYWxsYmFjaykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zLm1vZGUgPSBSYXkuQUxMOwogICAgICBvcHRpb25zLmZyb20gPSBmcm9tOwogICAgICBvcHRpb25zLnRvID0gdG87CiAgICAgIG9wdGlvbnMuY2FsbGJhY2sgPSBjYWxsYmFjazsKICAgICAgcmV0dXJuIHRtcFJheS5pbnRlcnNlY3RXb3JsZCh0aGlzLCBvcHRpb25zKTsKICAgIH0KICAgIC8qKgogICAgICogUmF5IGNhc3QsIGFuZCBzdG9wIGF0IHRoZSBmaXJzdCByZXN1bHQuIE5vdGUgdGhhdCB0aGUgb3JkZXIgaXMgcmFuZG9tIC0gYnV0IHRoZSBtZXRob2QgaXMgZmFzdC4KICAgICAqIEByZXR1cm4gVHJ1ZSBpZiBhbnkgYm9keSB3YXMgaGl0LgogICAgICovCgoKICAgIHJheWNhc3RBbnkoZnJvbSwgdG8sIG9wdGlvbnMsIHJlc3VsdCkgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zLm1vZGUgPSBSYXkuQU5ZOwogICAgICBvcHRpb25zLmZyb20gPSBmcm9tOwogICAgICBvcHRpb25zLnRvID0gdG87CiAgICAgIG9wdGlvbnMucmVzdWx0ID0gcmVzdWx0OwogICAgICByZXR1cm4gdG1wUmF5LmludGVyc2VjdFdvcmxkKHRoaXMsIG9wdGlvbnMpOwogICAgfQogICAgLyoqCiAgICAgKiBSYXkgY2FzdCwgYW5kIHJldHVybiBpbmZvcm1hdGlvbiBvZiB0aGUgY2xvc2VzdCBoaXQuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgYW55IGJvZHkgd2FzIGhpdC4KICAgICAqLwoKCiAgICByYXljYXN0Q2xvc2VzdChmcm9tLCB0bywgb3B0aW9ucywgcmVzdWx0KSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIG9wdGlvbnMubW9kZSA9IFJheS5DTE9TRVNUOwogICAgICBvcHRpb25zLmZyb20gPSBmcm9tOwogICAgICBvcHRpb25zLnRvID0gdG87CiAgICAgIG9wdGlvbnMucmVzdWx0ID0gcmVzdWx0OwogICAgICByZXR1cm4gdG1wUmF5LmludGVyc2VjdFdvcmxkKHRoaXMsIG9wdGlvbnMpOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSByaWdpZCBib2R5IHRvIHRoZSBzaW11bGF0aW9uLgogICAgICogQHRvZG8gSWYgdGhlIHNpbXVsYXRpb24gaGFzIG5vdCB5ZXQgc3RhcnRlZCwgd2h5IHJlY3JldGUgYW5kIGNvcHkgYXJyYXlzIGZvciBlYWNoIGJvZHk/IEFjY3VtdWxhdGUgaW4gZHluYW1pYyBhcnJheXMgaW4gdGhpcyBjYXNlLgogICAgICogQHRvZG8gQWRkaW5nIGFuIGFycmF5IG9mIGJvZGllcyBzaG91bGQgYmUgcG9zc2libGUuIFRoaXMgd291bGQgc2F2ZSBzb21lIGxvb3BzIHRvbwogICAgICovCgoKICAgIGFkZEJvZHkoYm9keSkgewogICAgICBpZiAodGhpcy5ib2RpZXMuaW5jbHVkZXMoYm9keSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGJvZHkuaW5kZXggPSB0aGlzLmJvZGllcy5sZW5ndGg7CiAgICAgIHRoaXMuYm9kaWVzLnB1c2goYm9keSk7CiAgICAgIGJvZHkud29ybGQgPSB0aGlzOwogICAgICBib2R5LmluaXRQb3NpdGlvbi5jb3B5KGJvZHkucG9zaXRpb24pOwogICAgICBib2R5LmluaXRWZWxvY2l0eS5jb3B5KGJvZHkudmVsb2NpdHkpOwogICAgICBib2R5LnRpbWVMYXN0U2xlZXB5ID0gdGhpcy50aW1lOwoKICAgICAgaWYgKGJvZHkgaW5zdGFuY2VvZiBCb2R5KSB7CiAgICAgICAgYm9keS5pbml0QW5ndWxhclZlbG9jaXR5LmNvcHkoYm9keS5hbmd1bGFyVmVsb2NpdHkpOwogICAgICAgIGJvZHkuaW5pdFF1YXRlcm5pb24uY29weShib2R5LnF1YXRlcm5pb24pOwogICAgICB9CgogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5zZXROdW1PYmplY3RzKHRoaXMuYm9kaWVzLmxlbmd0aCk7CiAgICAgIHRoaXMuYWRkQm9keUV2ZW50LmJvZHkgPSBib2R5OwogICAgICB0aGlzLmlkVG9Cb2R5TWFwW2JvZHkuaWRdID0gYm9keTsKICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHRoaXMuYWRkQm9keUV2ZW50KTsKICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIGEgcmlnaWQgYm9keSBmcm9tIHRoZSBzaW11bGF0aW9uLgogICAgICovCgoKICAgIHJlbW92ZUJvZHkoYm9keSkgewogICAgICBib2R5LndvcmxkID0gbnVsbDsKICAgICAgY29uc3QgbiA9IHRoaXMuYm9kaWVzLmxlbmd0aCAtIDE7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzOwogICAgICBjb25zdCBpZHggPSBib2RpZXMuaW5kZXhPZihib2R5KTsKCiAgICAgIGlmIChpZHggIT09IC0xKSB7CiAgICAgICAgYm9kaWVzLnNwbGljZShpZHgsIDEpOyAvLyBUb2RvOiBzaG91bGQgdXNlIGEgZ2FyYmFnZSBmcmVlIG1ldGhvZAogICAgICAgIC8vIFJlY29tcHV0ZSBpbmRleAoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gYm9kaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBib2RpZXNbaV0uaW5kZXggPSBpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXguc2V0TnVtT2JqZWN0cyhuKTsKICAgICAgICB0aGlzLnJlbW92ZUJvZHlFdmVudC5ib2R5ID0gYm9keTsKICAgICAgICBkZWxldGUgdGhpcy5pZFRvQm9keU1hcFtib2R5LmlkXTsKICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQodGhpcy5yZW1vdmVCb2R5RXZlbnQpOwogICAgICB9CiAgICB9CgogICAgZ2V0Qm9keUJ5SWQoaWQpIHsKICAgICAgcmV0dXJuIHRoaXMuaWRUb0JvZHlNYXBbaWRdOwogICAgfQogICAgLyoqCiAgICAgKiBAdG9kbyBNYWtlIGEgZmFzdGVyIG1hcAogICAgICovCgoKICAgIGdldFNoYXBlQnlJZChpZCkgewogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9kaWVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3Qgc2hhcGVzID0gYm9kaWVzW2ldLnNoYXBlczsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaGFwZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGNvbnN0IHNoYXBlID0gc2hhcGVzW2pdOwoKICAgICAgICAgIGlmIChzaGFwZS5pZCA9PT0gaWQpIHsKICAgICAgICAgICAgcmV0dXJuIHNoYXBlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICAvKioKICAgICAqIEFkZHMgYSBtYXRlcmlhbCB0byB0aGUgV29ybGQuCiAgICAgKiBAZGVwcmVjYXRlZAogICAgICogQHRvZG8gUmVtb3ZlCiAgICAgKi8KCgogICAgYWRkTWF0ZXJpYWwobSkgewogICAgICB0aGlzLm1hdGVyaWFscy5wdXNoKG0pOwogICAgfQogICAgLyoqCiAgICAgKiBBZGRzIGEgY29udGFjdCBtYXRlcmlhbCB0byB0aGUgV29ybGQKICAgICAqLwoKCiAgICBhZGRDb250YWN0TWF0ZXJpYWwoY21hdCkgewogICAgICAvLyBBZGQgY29udGFjdCBtYXRlcmlhbAogICAgICB0aGlzLmNvbnRhY3RtYXRlcmlhbHMucHVzaChjbWF0KTsgLy8gQWRkIGN1cnJlbnQgY29udGFjdCBtYXRlcmlhbCB0byB0aGUgbWF0ZXJpYWwgdGFibGUKCiAgICAgIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUuc2V0KGNtYXQubWF0ZXJpYWxzWzBdLmlkLCBjbWF0Lm1hdGVyaWFsc1sxXS5pZCwgY21hdCk7CiAgICB9CiAgICAvKioKICAgICAqIFN0ZXAgdGhlIHBoeXNpY3Mgd29ybGQgZm9yd2FyZCBpbiB0aW1lLgogICAgICoKICAgICAqIFRoZXJlIGFyZSB0d28gbW9kZXMuIFRoZSBzaW1wbGUgbW9kZSBpcyBmaXhlZCB0aW1lc3RlcHBpbmcgd2l0aG91dCBpbnRlcnBvbGF0aW9uLiBJbiB0aGlzIGNhc2UgeW91IG9ubHkgdXNlIHRoZSBmaXJzdCBhcmd1bWVudC4gVGhlIHNlY29uZCBjYXNlIHVzZXMgaW50ZXJwb2xhdGlvbi4gSW4gdGhhdCB5b3UgYWxzbyBwcm92aWRlIHRoZSB0aW1lIHNpbmNlIHRoZSBmdW5jdGlvbiB3YXMgbGFzdCB1c2VkLCBhcyB3ZWxsIGFzIHRoZSBtYXhpbXVtIGZpeGVkIHRpbWVzdGVwcyB0byB0YWtlLgogICAgICoKICAgICAqIEBwYXJhbSBkdCBUaGUgZml4ZWQgdGltZSBzdGVwIHNpemUgdG8gdXNlLgogICAgICogQHBhcmFtIHRpbWVTaW5jZUxhc3RDYWxsZWQgVGhlIHRpbWUgZWxhcHNlZCBzaW5jZSB0aGUgZnVuY3Rpb24gd2FzIGxhc3QgY2FsbGVkLgogICAgICogQHBhcmFtIG1heFN1YlN0ZXBzIE1heGltdW0gbnVtYmVyIG9mIGZpeGVkIHN0ZXBzIHRvIHRha2UgcGVyIGZ1bmN0aW9uIGNhbGwuCiAgICAgKiBAc2VlIGh0dHBzOi8vd2ViLmFyY2hpdmUub3JnL3dlYi8yMDE4MDQyNjE1NDUzMS9odHRwOi8vYnVsbGV0cGh5c2ljcy5vcmcvbWVkaWF3aWtpLTEuNS44L2luZGV4LnBocC9TdGVwcGluZ19UaGVfV29ybGQjV2hhdF9kb190aGVfcGFyYW1ldGVyc190b19idER5bmFtaWNzV29ybGQ6OnN0ZXBTaW11bGF0aW9uX21lYW4uM0YKICAgICAqIEBleGFtcGxlCiAgICAgKiAgICAgLy8gZml4ZWQgdGltZXN0ZXBwaW5nIHdpdGhvdXQgaW50ZXJwb2xhdGlvbgogICAgICogICAgIHdvcmxkLnN0ZXAoMSAvIDYwKQogICAgICovCgoKICAgIHN0ZXAoZHQsIHRpbWVTaW5jZUxhc3RDYWxsZWQsIG1heFN1YlN0ZXBzKSB7CiAgICAgIGlmIChtYXhTdWJTdGVwcyA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4U3ViU3RlcHMgPSAxMDsKICAgICAgfQoKICAgICAgaWYgKHRpbWVTaW5jZUxhc3RDYWxsZWQgPT09IHVuZGVmaW5lZCkgewogICAgICAgIC8vIEZpeGVkLCBzaW1wbGUgc3RlcHBpbmcKICAgICAgICB0aGlzLmludGVybmFsU3RlcChkdCk7IC8vIEluY3JlbWVudCB0aW1lCgogICAgICAgIHRoaXMudGltZSArPSBkdDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFjY3VtdWxhdG9yICs9IHRpbWVTaW5jZUxhc3RDYWxsZWQ7CiAgICAgICAgY29uc3QgdDAgPSBwZXJmb3JtYW5jZSQxLm5vdygpOwogICAgICAgIGxldCBzdWJzdGVwcyA9IDA7CgogICAgICAgIHdoaWxlICh0aGlzLmFjY3VtdWxhdG9yID49IGR0ICYmIHN1YnN0ZXBzIDwgbWF4U3ViU3RlcHMpIHsKICAgICAgICAgIC8vIERvIGZpeGVkIHN0ZXBzIHRvIGNhdGNoIHVwCiAgICAgICAgICB0aGlzLmludGVybmFsU3RlcChkdCk7CiAgICAgICAgICB0aGlzLmFjY3VtdWxhdG9yIC09IGR0OwogICAgICAgICAgc3Vic3RlcHMrKzsKCiAgICAgICAgICBpZiAocGVyZm9ybWFuY2UkMS5ub3coKSAtIHQwID4gZHQgKiAxMDAwKSB7CiAgICAgICAgICAgIC8vIFRoZSBmcmFtZXJhdGUgaXMgbm90IGludGVyYWN0aXZlIGFueW1vcmUuCiAgICAgICAgICAgIC8vIFdlIGFyZSBiZWxvdyB0aGUgdGFyZ2V0IGZyYW1lcmF0ZS4KICAgICAgICAgICAgLy8gQmV0dGVyIGJhaWwgb3V0LgogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9IC8vIFJlbW92ZSB0aGUgZXhjZXNzIGFjY3VtdWxhdG9yLCBzaW5jZSB3ZSBtYXkgbm90CiAgICAgICAgLy8gaGF2ZSBoYWQgZW5vdWdoIHN1YnN0ZXBzIGF2YWlsYWJsZSB0byBjYXRjaCB1cAoKCiAgICAgICAgdGhpcy5hY2N1bXVsYXRvciA9IHRoaXMuYWNjdW11bGF0b3IgJSBkdDsKICAgICAgICBjb25zdCB0ID0gdGhpcy5hY2N1bXVsYXRvciAvIGR0OwoKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gdGhpcy5ib2RpZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGIgPSB0aGlzLmJvZGllc1tqXTsKICAgICAgICAgIGIucHJldmlvdXNQb3NpdGlvbi5sZXJwKGIucG9zaXRpb24sIHQsIGIuaW50ZXJwb2xhdGVkUG9zaXRpb24pOwogICAgICAgICAgYi5wcmV2aW91c1F1YXRlcm5pb24uc2xlcnAoYi5xdWF0ZXJuaW9uLCB0LCBiLmludGVycG9sYXRlZFF1YXRlcm5pb24pOwogICAgICAgICAgYi5wcmV2aW91c1F1YXRlcm5pb24ubm9ybWFsaXplKCk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnRpbWUgKz0gdGltZVNpbmNlTGFzdENhbGxlZDsKICAgICAgfQogICAgfQoKICAgIGludGVybmFsU3RlcChkdCkgewogICAgICB0aGlzLmR0ID0gZHQ7CiAgICAgIGNvbnN0IGNvbnRhY3RzID0gdGhpcy5jb250YWN0czsKICAgICAgY29uc3QgcDEgPSBXb3JsZF9zdGVwX3AxOwogICAgICBjb25zdCBwMiA9IFdvcmxkX3N0ZXBfcDI7CiAgICAgIGNvbnN0IE4gPSB0aGlzLm51bU9iamVjdHMoKTsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7CiAgICAgIGNvbnN0IHNvbHZlciA9IHRoaXMuc29sdmVyOwogICAgICBjb25zdCBncmF2aXR5ID0gdGhpcy5ncmF2aXR5OwogICAgICBjb25zdCBkb1Byb2ZpbGluZyA9IHRoaXMuZG9Qcm9maWxpbmc7CiAgICAgIGNvbnN0IHByb2ZpbGUgPSB0aGlzLnByb2ZpbGU7CiAgICAgIGNvbnN0IERZTkFNSUMgPSBCb2R5LkRZTkFNSUM7CiAgICAgIGxldCBwcm9maWxpbmdTdGFydCA9IC1JbmZpbml0eTsKICAgICAgY29uc3QgY29uc3RyYWludHMgPSB0aGlzLmNvbnN0cmFpbnRzOwogICAgICBjb25zdCBmcmljdGlvbkVxdWF0aW9uUG9vbCA9IFdvcmxkX3N0ZXBfZnJpY3Rpb25FcXVhdGlvblBvb2w7CiAgICAgIGdyYXZpdHkubGVuZ3RoKCk7CiAgICAgIGNvbnN0IGd4ID0gZ3Jhdml0eS54OwogICAgICBjb25zdCBneSA9IGdyYXZpdHkueTsKICAgICAgY29uc3QgZ3ogPSBncmF2aXR5Lno7CiAgICAgIGxldCBpID0gMDsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2UkMS5ub3coKTsKICAgICAgfSAvLyBBZGQgZ3Jhdml0eSB0byBhbGwgb2JqZWN0cwoKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYmkudHlwZSA9PT0gRFlOQU1JQykgewogICAgICAgICAgLy8gT25seSBmb3IgZHluYW1pYyBib2RpZXMKICAgICAgICAgIGNvbnN0IGYgPSBiaS5mb3JjZTsKICAgICAgICAgIGNvbnN0IG0gPSBiaS5tYXNzOwogICAgICAgICAgZi54ICs9IG0gKiBneDsKICAgICAgICAgIGYueSArPSBtICogZ3k7CiAgICAgICAgICBmLnogKz0gbSAqIGd6OwogICAgICAgIH0KICAgICAgfSAvLyBVcGRhdGUgc3Vic3lzdGVtcwoKCiAgICAgIGZvciAobGV0IGkgPSAwLCBOc3Vic3lzdGVtcyA9IHRoaXMuc3Vic3lzdGVtcy5sZW5ndGg7IGkgIT09IE5zdWJzeXN0ZW1zOyBpKyspIHsKICAgICAgICB0aGlzLnN1YnN5c3RlbXNbaV0udXBkYXRlKCk7CiAgICAgIH0gLy8gQ29sbGlzaW9uIGRldGVjdGlvbgoKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2UkMS5ub3coKTsKICAgICAgfQoKICAgICAgcDEubGVuZ3RoID0gMDsgLy8gQ2xlYW4gdXAgcGFpciBhcnJheXMgZnJvbSBsYXN0IHN0ZXAKCiAgICAgIHAyLmxlbmd0aCA9IDA7CiAgICAgIHRoaXMuYnJvYWRwaGFzZS5jb2xsaXNpb25QYWlycyh0aGlzLCBwMSwgcDIpOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsZS5icm9hZHBoYXNlID0gcGVyZm9ybWFuY2UkMS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICB9IC8vIFJlbW92ZSBjb25zdHJhaW5lZCBwYWlycyB3aXRoIGNvbGxpZGVDb25uZWN0ZWQgPT0gZmFsc2UKCgogICAgICBsZXQgTmNvbnN0cmFpbnRzID0gY29uc3RyYWludHMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTmNvbnN0cmFpbnRzOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gY29uc3RyYWludHNbaV07CgogICAgICAgIGlmICghYy5jb2xsaWRlQ29ubmVjdGVkKSB7CiAgICAgICAgICBmb3IgKGxldCBqID0gcDEubGVuZ3RoIC0gMTsgaiA+PSAwOyBqIC09IDEpIHsKICAgICAgICAgICAgaWYgKGMuYm9keUEgPT09IHAxW2pdICYmIGMuYm9keUIgPT09IHAyW2pdIHx8IGMuYm9keUIgPT09IHAxW2pdICYmIGMuYm9keUEgPT09IHAyW2pdKSB7CiAgICAgICAgICAgICAgcDEuc3BsaWNlKGosIDEpOwogICAgICAgICAgICAgIHAyLnNwbGljZShqLCAxKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXhUaWNrKCk7IC8vIEdlbmVyYXRlIGNvbnRhY3RzCgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlJDEubm93KCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IG9sZGNvbnRhY3RzID0gV29ybGRfc3RlcF9vbGRDb250YWN0czsKICAgICAgY29uc3QgTm9sZENvbnRhY3RzID0gY29udGFjdHMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTm9sZENvbnRhY3RzOyBpKyspIHsKICAgICAgICBvbGRjb250YWN0cy5wdXNoKGNvbnRhY3RzW2ldKTsKICAgICAgfQoKICAgICAgY29udGFjdHMubGVuZ3RoID0gMDsgLy8gVHJhbnNmZXIgRnJpY3Rpb25FcXVhdGlvbiBmcm9tIGN1cnJlbnQgbGlzdCB0byB0aGUgcG9vbCBmb3IgcmV1c2UKCiAgICAgIGNvbnN0IE5vbGRGcmljdGlvbkVxdWF0aW9ucyA9IHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTm9sZEZyaWN0aW9uRXF1YXRpb25zOyBpKyspIHsKICAgICAgICBmcmljdGlvbkVxdWF0aW9uUG9vbC5wdXNoKHRoaXMuZnJpY3Rpb25FcXVhdGlvbnNbaV0pOwogICAgICB9CgogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aCA9IDA7CiAgICAgIHRoaXMubmFycm93cGhhc2UuZ2V0Q29udGFjdHMocDEsIHAyLCB0aGlzLCBjb250YWN0cywgb2xkY29udGFjdHMsIC8vIFRvIGJlIHJldXNlZAogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLCBmcmljdGlvbkVxdWF0aW9uUG9vbCk7CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxlLm5hcnJvd3BoYXNlID0gcGVyZm9ybWFuY2UkMS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICB9IC8vIExvb3Agb3ZlciBhbGwgY29sbGlzaW9ucwoKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2UkMS5ub3coKTsKICAgICAgfSAvLyBBZGQgYWxsIGZyaWN0aW9uIGVxcwoKCiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgc29sdmVyLmFkZEVxdWF0aW9uKHRoaXMuZnJpY3Rpb25FcXVhdGlvbnNbaV0pOwogICAgICB9CgogICAgICBjb25zdCBuY29udGFjdHMgPSBjb250YWN0cy5sZW5ndGg7CgogICAgICBmb3IgKGxldCBrID0gMDsgayAhPT0gbmNvbnRhY3RzOyBrKyspIHsKICAgICAgICAvLyBDdXJyZW50IGNvbnRhY3QKICAgICAgICBjb25zdCBjID0gY29udGFjdHNba107IC8vIEdldCBjdXJyZW50IGNvbGxpc2lvbiBpbmRlY2VzCgogICAgICAgIGNvbnN0IGJpID0gYy5iaTsKICAgICAgICBjb25zdCBiaiA9IGMuYmo7CiAgICAgICAgY29uc3Qgc2kgPSBjLnNpOwogICAgICAgIGNvbnN0IHNqID0gYy5zajsgLy8gR2V0IGNvbGxpc2lvbiBwcm9wZXJ0aWVzCgogICAgICAgIGxldCBjbTsKCiAgICAgICAgaWYgKGJpLm1hdGVyaWFsICYmIGJqLm1hdGVyaWFsKSB7CiAgICAgICAgICBjbSA9IHRoaXMuZ2V0Q29udGFjdE1hdGVyaWFsKGJpLm1hdGVyaWFsLCBiai5tYXRlcmlhbCkgfHwgdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjbSA9IHRoaXMuZGVmYXVsdENvbnRhY3RNYXRlcmlhbDsKICAgICAgICB9IC8vIGMuZW5hYmxlZCA9IGJpLmNvbGxpc2lvblJlc3BvbnNlICYmIGJqLmNvbGxpc2lvblJlc3BvbnNlICYmIHNpLmNvbGxpc2lvblJlc3BvbnNlICYmIHNqLmNvbGxpc2lvblJlc3BvbnNlOwoKCiAgICAgICAgY20uZnJpY3Rpb247IC8vIGMucmVzdGl0dXRpb24gPSBjbS5yZXN0aXR1dGlvbjsKICAgICAgICAvLyBJZiBmcmljdGlvbiBvciByZXN0aXR1dGlvbiB3ZXJlIHNwZWNpZmllZCBpbiB0aGUgbWF0ZXJpYWwsIHVzZSB0aGVtCgogICAgICAgIGlmIChiaS5tYXRlcmlhbCAmJiBiai5tYXRlcmlhbCkgewogICAgICAgICAgaWYgKGJpLm1hdGVyaWFsLmZyaWN0aW9uID49IDAgJiYgYmoubWF0ZXJpYWwuZnJpY3Rpb24gPj0gMCkgewogICAgICAgICAgICBiaS5tYXRlcmlhbC5mcmljdGlvbiAqIGJqLm1hdGVyaWFsLmZyaWN0aW9uOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChiaS5tYXRlcmlhbC5yZXN0aXR1dGlvbiA+PSAwICYmIGJqLm1hdGVyaWFsLnJlc3RpdHV0aW9uID49IDApIHsKICAgICAgICAgICAgYy5yZXN0aXR1dGlvbiA9IGJpLm1hdGVyaWFsLnJlc3RpdHV0aW9uICogYmoubWF0ZXJpYWwucmVzdGl0dXRpb247CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBjLnNldFNwb29rUGFyYW1zKAogICAgICAgIC8vICAgICAgICAgICBjbS5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MsCiAgICAgICAgLy8gICAgICAgICAgIGNtLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb24sCiAgICAgICAgLy8gICAgICAgICAgIGR0CiAgICAgICAgLy8gICAgICAgKTsKCgogICAgICAgIHNvbHZlci5hZGRFcXVhdGlvbihjKTsgLy8gLy8gQWRkIGZyaWN0aW9uIGNvbnN0cmFpbnQgZXF1YXRpb24KICAgICAgICAvLyBpZihtdSA+IDApewogICAgICAgIC8vIAkvLyBDcmVhdGUgMiB0YW5nZW50IGVxdWF0aW9ucwogICAgICAgIC8vIAljb25zdCBtdWcgPSBtdSAqIGdub3JtOwogICAgICAgIC8vIAljb25zdCByZWR1Y2VkTWFzcyA9IChiaS5pbnZNYXNzICsgYmouaW52TWFzcyk7CiAgICAgICAgLy8gCWlmKHJlZHVjZWRNYXNzID4gMCl7CiAgICAgICAgLy8gCQlyZWR1Y2VkTWFzcyA9IDEvcmVkdWNlZE1hc3M7CiAgICAgICAgLy8gCX0KICAgICAgICAvLyAJY29uc3QgcG9vbCA9IGZyaWN0aW9uRXF1YXRpb25Qb29sOwogICAgICAgIC8vIAljb25zdCBjMSA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJpLGJqLG11ZypyZWR1Y2VkTWFzcyk7CiAgICAgICAgLy8gCWNvbnN0IGMyID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYmksYmosbXVnKnJlZHVjZWRNYXNzKTsKICAgICAgICAvLyAJdGhpcy5mcmljdGlvbkVxdWF0aW9ucy5wdXNoKGMxLCBjMik7CiAgICAgICAgLy8gCWMxLmJpID0gYzIuYmkgPSBiaTsKICAgICAgICAvLyAJYzEuYmogPSBjMi5iaiA9IGJqOwogICAgICAgIC8vIAljMS5taW5Gb3JjZSA9IGMyLm1pbkZvcmNlID0gLW11ZypyZWR1Y2VkTWFzczsKICAgICAgICAvLyAJYzEubWF4Rm9yY2UgPSBjMi5tYXhGb3JjZSA9IG11ZypyZWR1Y2VkTWFzczsKICAgICAgICAvLyAJLy8gQ29weSBvdmVyIHRoZSByZWxhdGl2ZSB2ZWN0b3JzCiAgICAgICAgLy8gCWMxLnJpLmNvcHkoYy5yaSk7CiAgICAgICAgLy8gCWMxLnJqLmNvcHkoYy5yaik7CiAgICAgICAgLy8gCWMyLnJpLmNvcHkoYy5yaSk7CiAgICAgICAgLy8gCWMyLnJqLmNvcHkoYy5yaik7CiAgICAgICAgLy8gCS8vIENvbnN0cnVjdCB0YW5nZW50cwogICAgICAgIC8vIAljLm5pLnRhbmdlbnRzKGMxLnQsIGMyLnQpOwogICAgICAgIC8vICAgICAgICAgICAvLyBTZXQgc3Bvb2sgcGFyYW1zCiAgICAgICAgLy8gICAgICAgICAgIGMxLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCBkdCk7CiAgICAgICAgLy8gICAgICAgICAgIGMyLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCBkdCk7CiAgICAgICAgLy8gICAgICAgICAgIGMxLmVuYWJsZWQgPSBjMi5lbmFibGVkID0gYy5lbmFibGVkOwogICAgICAgIC8vIAkvLyBBZGQgZXF1YXRpb25zIHRvIHNvbHZlcgogICAgICAgIC8vIAlzb2x2ZXIuYWRkRXF1YXRpb24oYzEpOwogICAgICAgIC8vIAlzb2x2ZXIuYWRkRXF1YXRpb24oYzIpOwogICAgICAgIC8vIH0KCiAgICAgICAgaWYgKGJpLmFsbG93U2xlZXAgJiYgYmkudHlwZSA9PT0gQm9keS5EWU5BTUlDICYmIGJpLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgJiYgYmouc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBiai50eXBlICE9PSBCb2R5LlNUQVRJQykgewogICAgICAgICAgY29uc3Qgc3BlZWRTcXVhcmVkQiA9IGJqLnZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKSArIGJqLmFuZ3VsYXJWZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCk7CiAgICAgICAgICBjb25zdCBzcGVlZExpbWl0U3F1YXJlZEIgPSBiai5zbGVlcFNwZWVkTGltaXQgKiogMjsKCiAgICAgICAgICBpZiAoc3BlZWRTcXVhcmVkQiA+PSBzcGVlZExpbWl0U3F1YXJlZEIgKiAyKSB7CiAgICAgICAgICAgIGJpLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGJqLmFsbG93U2xlZXAgJiYgYmoudHlwZSA9PT0gQm9keS5EWU5BTUlDICYmIGJqLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgJiYgYmkuc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBiaS50eXBlICE9PSBCb2R5LlNUQVRJQykgewogICAgICAgICAgY29uc3Qgc3BlZWRTcXVhcmVkQSA9IGJpLnZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKSArIGJpLmFuZ3VsYXJWZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCk7CiAgICAgICAgICBjb25zdCBzcGVlZExpbWl0U3F1YXJlZEEgPSBiaS5zbGVlcFNwZWVkTGltaXQgKiogMjsKCiAgICAgICAgICBpZiAoc3BlZWRTcXVhcmVkQSA+PSBzcGVlZExpbWl0U3F1YXJlZEEgKiAyKSB7CiAgICAgICAgICAgIGJqLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0gLy8gTm93IHdlIGtub3cgdGhhdCBpIGFuZCBqIGFyZSBpbiBjb250YWN0LiBTZXQgY29sbGlzaW9uIG1hdHJpeCBzdGF0ZQoKCiAgICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXguc2V0KGJpLCBiaiwgdHJ1ZSk7CgogICAgICAgIGlmICghdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91cy5nZXQoYmksIGJqKSkgewogICAgICAgICAgLy8gRmlyc3QgY29udGFjdCEKICAgICAgICAgIC8vIFdlIHJldXNlIHRoZSBjb2xsaWRlRXZlbnQgb2JqZWN0LCBvdGhlcndpc2Ugd2Ugd2lsbCBlbmQgdXAgY3JlYXRpbmcgbmV3IG9iamVjdHMgZm9yIGVhY2ggbmV3IGNvbnRhY3QsIGV2ZW4gaWYgdGhlcmUncyBubyBldmVudCBsaXN0ZW5lciBhdHRhY2hlZC4KICAgICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmJvZHkgPSBiajsKICAgICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmNvbnRhY3QgPSBjOwogICAgICAgICAgYmkuZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX2NvbGxpZGVFdmVudCk7CiAgICAgICAgICBXb3JsZF9zdGVwX2NvbGxpZGVFdmVudC5ib2R5ID0gYmk7CiAgICAgICAgICBiai5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50KTsKICAgICAgICB9CgogICAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIuc2V0KGJpLmlkLCBiai5pZCk7CiAgICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIuc2V0KHNpLmlkLCBzai5pZCk7CiAgICAgIH0KCiAgICAgIHRoaXMuZW1pdENvbnRhY3RFdmVudHMoKTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUubWFrZUNvbnRhY3RDb25zdHJhaW50cyA9IHBlcmZvcm1hbmNlJDEubm93KCkgLSBwcm9maWxpbmdTdGFydDsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlJDEubm93KCk7CiAgICAgIH0gLy8gV2FrZSB1cCBib2RpZXMKCgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKCiAgICAgICAgaWYgKGJpLndha2VVcEFmdGVyTmFycm93cGhhc2UpIHsKICAgICAgICAgIGJpLndha2VVcCgpOwogICAgICAgICAgYmkud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSAvLyBBZGQgdXNlci1hZGRlZCBjb25zdHJhaW50cwoKCiAgICAgIE5jb25zdHJhaW50cyA9IGNvbnN0cmFpbnRzLmxlbmd0aDsKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE5jb25zdHJhaW50czsgaSsrKSB7CiAgICAgICAgY29uc3QgYyA9IGNvbnN0cmFpbnRzW2ldOwogICAgICAgIGMudXBkYXRlKCk7CgogICAgICAgIGZvciAobGV0IGogPSAwLCBOZXEgPSBjLmVxdWF0aW9ucy5sZW5ndGg7IGogIT09IE5lcTsgaisrKSB7CiAgICAgICAgICBjb25zdCBlcSA9IGMuZXF1YXRpb25zW2pdOwogICAgICAgICAgc29sdmVyLmFkZEVxdWF0aW9uKGVxKTsKICAgICAgICB9CiAgICAgIH0gLy8gU29sdmUgdGhlIGNvbnN0cmFpbmVkIHN5c3RlbQoKCiAgICAgIHNvbHZlci5zb2x2ZShkdCwgdGhpcyk7CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxlLnNvbHZlID0gcGVyZm9ybWFuY2UkMS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICB9IC8vIFJlbW92ZSBhbGwgY29udGFjdHMgZnJvbSBzb2x2ZXIKCgogICAgICBzb2x2ZXIucmVtb3ZlQWxsRXF1YXRpb25zKCk7IC8vIEFwcGx5IGRhbXBpbmcsIHNlZSBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvYnVsbGV0L2lzc3Vlcy9kZXRhaWw/aWQ9NzQgZm9yIGRldGFpbHMKCiAgICAgIGNvbnN0IHBvdyA9IE1hdGgucG93OwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CgogICAgICAgIGlmIChiaS50eXBlICYgRFlOQU1JQykgewogICAgICAgICAgLy8gT25seSBmb3IgZHluYW1pYyBib2RpZXMKICAgICAgICAgIGNvbnN0IGxkID0gcG93KDEuMCAtIGJpLmxpbmVhckRhbXBpbmcsIGR0KTsKICAgICAgICAgIGNvbnN0IHYgPSBiaS52ZWxvY2l0eTsKICAgICAgICAgIHYuc2NhbGUobGQsIHYpOwogICAgICAgICAgY29uc3QgYXYgPSBiaS5hbmd1bGFyVmVsb2NpdHk7CgogICAgICAgICAgaWYgKGF2KSB7CiAgICAgICAgICAgIGNvbnN0IGFkID0gcG93KDEuMCAtIGJpLmFuZ3VsYXJEYW1waW5nLCBkdCk7CiAgICAgICAgICAgIGF2LnNjYWxlKGFkLCBhdik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoV29ybGRfc3RlcF9wcmVTdGVwRXZlbnQpOyAvLyBJbnZva2UgcHJlLXN0ZXAgY2FsbGJhY2tzCgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKCiAgICAgICAgaWYgKGJpLnByZVN0ZXApIHsKICAgICAgICAgIGJpLnByZVN0ZXAuY2FsbChiaSk7CiAgICAgICAgfQogICAgICB9IC8vIExlYXAgZnJvZwogICAgICAvLyB2bmV3ID0gdiArIGgqZi9tCiAgICAgIC8vIHhuZXcgPSB4ICsgaCp2bmV3CgoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZSQxLm5vdygpOwogICAgICB9CgogICAgICBjb25zdCBzdGVwbnVtYmVyID0gdGhpcy5zdGVwbnVtYmVyOwogICAgICBjb25zdCBxdWF0Tm9ybWFsaXplID0gc3RlcG51bWJlciAlICh0aGlzLnF1YXROb3JtYWxpemVTa2lwICsgMSkgPT09IDA7CiAgICAgIGNvbnN0IHF1YXROb3JtYWxpemVGYXN0ID0gdGhpcy5xdWF0Tm9ybWFsaXplRmFzdDsKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGJvZGllc1tpXS5pbnRlZ3JhdGUoZHQsIHF1YXROb3JtYWxpemUsIHF1YXROb3JtYWxpemVGYXN0KTsKICAgICAgfQoKICAgICAgdGhpcy5jbGVhckZvcmNlcygpOwogICAgICB0aGlzLmJyb2FkcGhhc2UuZGlydHkgPSB0cnVlOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsZS5pbnRlZ3JhdGUgPSBwZXJmb3JtYW5jZSQxLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgIH0gLy8gVXBkYXRlIHN0ZXAgbnVtYmVyCgoKICAgICAgdGhpcy5zdGVwbnVtYmVyICs9IDE7CiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX3Bvc3RTdGVwRXZlbnQpOyAvLyBJbnZva2UgcG9zdC1zdGVwIGNhbGxiYWNrcwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CiAgICAgICAgY29uc3QgcG9zdFN0ZXAgPSBiaS5wb3N0U3RlcDsKCiAgICAgICAgaWYgKHBvc3RTdGVwKSB7CiAgICAgICAgICBwb3N0U3RlcC5jYWxsKGJpKTsKICAgICAgICB9CiAgICAgIH0gLy8gU2xlZXBpbmcgdXBkYXRlCgoKICAgICAgbGV0IGhhc0FjdGl2ZUJvZGllcyA9IHRydWU7CgogICAgICBpZiAodGhpcy5hbGxvd1NsZWVwKSB7CiAgICAgICAgaGFzQWN0aXZlQm9kaWVzID0gZmFsc2U7CgogICAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CiAgICAgICAgICBiaS5zbGVlcFRpY2sodGhpcy50aW1lKTsKCiAgICAgICAgICBpZiAoYmkuc2xlZXBTdGF0ZSAhPT0gQm9keS5TTEVFUElORykgewogICAgICAgICAgICBoYXNBY3RpdmVCb2RpZXMgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5oYXNBY3RpdmVCb2RpZXMgPSBoYXNBY3RpdmVCb2RpZXM7CiAgICB9CgogICAgZW1pdENvbnRhY3RFdmVudHMoKSB7CiAgICAgIGNvbnN0IGhhc0JlZ2luQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignYmVnaW5Db250YWN0Jyk7CiAgICAgIGNvbnN0IGhhc0VuZENvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2VuZENvbnRhY3QnKTsKCiAgICAgIGlmIChoYXNCZWdpbkNvbnRhY3QgfHwgaGFzRW5kQ29udGFjdCkgewogICAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIuZ2V0RGlmZihhZGRpdGlvbnMsIHJlbW92YWxzKTsKICAgICAgfQoKICAgICAgaWYgKGhhc0JlZ2luQ29udGFjdCkgewogICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYWRkaXRpb25zLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikgewogICAgICAgICAgYmVnaW5Db250YWN0RXZlbnQuYm9keUEgPSB0aGlzLmdldEJvZHlCeUlkKGFkZGl0aW9uc1tpXSk7CiAgICAgICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QiA9IHRoaXMuZ2V0Qm9keUJ5SWQoYWRkaXRpb25zW2kgKyAxXSk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoYmVnaW5Db250YWN0RXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgYmVnaW5Db250YWN0RXZlbnQuYm9keUEgPSBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QiA9IG51bGw7CiAgICAgIH0KCiAgICAgIGlmIChoYXNFbmRDb250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSByZW1vdmFscy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgIGVuZENvbnRhY3RFdmVudC5ib2R5QSA9IHRoaXMuZ2V0Qm9keUJ5SWQocmVtb3ZhbHNbaV0pOwogICAgICAgICAgZW5kQ29udGFjdEV2ZW50LmJvZHlCID0gdGhpcy5nZXRCb2R5QnlJZChyZW1vdmFsc1tpICsgMV0pOwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGVuZENvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBlbmRDb250YWN0RXZlbnQuYm9keUEgPSBlbmRDb250YWN0RXZlbnQuYm9keUIgPSBudWxsOwogICAgICB9CgogICAgICBhZGRpdGlvbnMubGVuZ3RoID0gcmVtb3ZhbHMubGVuZ3RoID0gMDsKICAgICAgY29uc3QgaGFzQmVnaW5TaGFwZUNvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2JlZ2luU2hhcGVDb250YWN0Jyk7CiAgICAgIGNvbnN0IGhhc0VuZFNoYXBlQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignZW5kU2hhcGVDb250YWN0Jyk7CgogICAgICBpZiAoaGFzQmVnaW5TaGFwZUNvbnRhY3QgfHwgaGFzRW5kU2hhcGVDb250YWN0KSB7CiAgICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIuZ2V0RGlmZihhZGRpdGlvbnMsIHJlbW92YWxzKTsKICAgICAgfQoKICAgICAgaWYgKGhhc0JlZ2luU2hhcGVDb250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBhZGRpdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICAgICAgICBjb25zdCBzaGFwZUEgPSB0aGlzLmdldFNoYXBlQnlJZChhZGRpdGlvbnNbaV0pOwogICAgICAgICAgY29uc3Qgc2hhcGVCID0gdGhpcy5nZXRTaGFwZUJ5SWQoYWRkaXRpb25zW2kgKyAxXSk7CiAgICAgICAgICBiZWdpblNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IHNoYXBlQTsKICAgICAgICAgIGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gc2hhcGVCOwogICAgICAgICAgaWYgKHNoYXBlQSkgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IHNoYXBlQS5ib2R5OwogICAgICAgICAgaWYgKHNoYXBlQikgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IHNoYXBlQi5ib2R5OwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGJlZ2luU2hhcGVDb250YWN0RXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuYm9keUIgPSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gbnVsbDsKICAgICAgfQoKICAgICAgaWYgKGhhc0VuZFNoYXBlQ29udGFjdCkgewogICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gcmVtb3ZhbHMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICAgICAgICBjb25zdCBzaGFwZUEgPSB0aGlzLmdldFNoYXBlQnlJZChyZW1vdmFsc1tpXSk7CiAgICAgICAgICBjb25zdCBzaGFwZUIgPSB0aGlzLmdldFNoYXBlQnlJZChyZW1vdmFsc1tpICsgMV0pOwogICAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gc2hhcGVBOwogICAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gc2hhcGVCOwogICAgICAgICAgaWYgKHNoYXBlQSkgZW5kU2hhcGVDb250YWN0RXZlbnQuYm9keUEgPSBzaGFwZUEuYm9keTsKICAgICAgICAgIGlmIChzaGFwZUIpIGVuZFNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gc2hhcGVCLmJvZHk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZW5kU2hhcGVDb250YWN0RXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuYm9keUEgPSBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IGVuZFNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IGVuZFNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQiA9IG51bGw7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0cyBhbGwgYm9keSBmb3JjZXMgaW4gdGhlIHdvcmxkIHRvIHplcm8uCiAgICAgKi8KCgogICAgY2xlYXJGb3JjZXMoKSB7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzOwogICAgICBjb25zdCBOID0gYm9kaWVzLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiID0gYm9kaWVzW2ldOwogICAgICAgIGIuZm9yY2U7CiAgICAgICAgYi50b3JxdWU7CiAgICAgICAgYi5mb3JjZS5zZXQoMCwgMCwgMCk7CiAgICAgICAgYi50b3JxdWUuc2V0KDAsIDAsIDApOwogICAgICB9CiAgICB9CgogIH0gLy8gVGVtcCBzdHVmZgoKCiAgbmV3IEFBQkIoKTsKICBjb25zdCB0bXBSYXkgPSBuZXcgUmF5KCk7IC8vIHBlcmZvcm1hbmNlLm5vdygpIGZhbGxiYWNrIG9uIERhdGUubm93KCkKCiAgY29uc3QgcGVyZm9ybWFuY2UkMSA9IGdsb2JhbFRoaXMucGVyZm9ybWFuY2UgfHwge307CgogIGlmICghcGVyZm9ybWFuY2UkMS5ub3cpIHsKICAgIGxldCBub3dPZmZzZXQgPSBEYXRlLm5vdygpOwoKICAgIGlmIChwZXJmb3JtYW5jZSQxLnRpbWluZyAmJiBwZXJmb3JtYW5jZSQxLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQpIHsKICAgICAgbm93T2Zmc2V0ID0gcGVyZm9ybWFuY2UkMS50aW1pbmcubmF2aWdhdGlvblN0YXJ0OwogICAgfQoKICAgIHBlcmZvcm1hbmNlJDEubm93ID0gKCkgPT4gRGF0ZS5ub3coKSAtIG5vd09mZnNldDsKICB9IC8vIFJldXNhYmxlIGV2ZW50IG9iamVjdHMgdG8gc2F2ZSBtZW1vcnkuCgoKICBjb25zdCBXb3JsZF9zdGVwX3Bvc3RTdGVwRXZlbnQgPSB7CiAgICB0eXBlOiAncG9zdFN0ZXAnCiAgfTsgLy8gRGlzcGF0Y2hlZCBiZWZvcmUgdGhlIHdvcmxkIHN0ZXBzIGZvcndhcmQgaW4gdGltZS4KCiAgY29uc3QgV29ybGRfc3RlcF9wcmVTdGVwRXZlbnQgPSB7CiAgICB0eXBlOiAncHJlU3RlcCcKICB9OwogIGNvbnN0IFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50ID0gewogICAgdHlwZTogQm9keS5DT0xMSURFX0VWRU5UX05BTUUsCiAgICBib2R5OiBudWxsLAogICAgY29udGFjdDogbnVsbAogIH07IC8vIFBvb2xzIGZvciB1bnVzZWQgb2JqZWN0cwoKICBjb25zdCBXb3JsZF9zdGVwX29sZENvbnRhY3RzID0gW107CiAgY29uc3QgV29ybGRfc3RlcF9mcmljdGlvbkVxdWF0aW9uUG9vbCA9IFtdOyAvLyBSZXVzYWJsZSBhcnJheXMgZm9yIGNvbGxpc2lvbiBwYWlycwoKICBjb25zdCBXb3JsZF9zdGVwX3AxID0gW107CiAgY29uc3QgV29ybGRfc3RlcF9wMiA9IFtdOyAvLyBTdHVmZiBmb3IgZW1pdENvbnRhY3RFdmVudHMKCiAgY29uc3QgYWRkaXRpb25zID0gW107CiAgY29uc3QgcmVtb3ZhbHMgPSBbXTsKICBjb25zdCBiZWdpbkNvbnRhY3RFdmVudCA9IHsKICAgIHR5cGU6ICdiZWdpbkNvbnRhY3QnLAogICAgYm9keUE6IG51bGwsCiAgICBib2R5QjogbnVsbAogIH07CiAgY29uc3QgZW5kQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2VuZENvbnRhY3QnLAogICAgYm9keUE6IG51bGwsCiAgICBib2R5QjogbnVsbAogIH07CiAgY29uc3QgYmVnaW5TaGFwZUNvbnRhY3RFdmVudCA9IHsKICAgIHR5cGU6ICdiZWdpblNoYXBlQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsLAogICAgc2hhcGVBOiBudWxsLAogICAgc2hhcGVCOiBudWxsCiAgfTsKICBjb25zdCBlbmRTaGFwZUNvbnRhY3RFdmVudCA9IHsKICAgIHR5cGU6ICdlbmRTaGFwZUNvbnRhY3QnLAogICAgYm9keUE6IG51bGwsCiAgICBib2R5QjogbnVsbCwKICAgIHNoYXBlQTogbnVsbCwKICAgIHNoYXBlQjogbnVsbAogIH07CgogIGNvbnN0IG1ha2VWZWMzID0gX3JlZiA9PiB7CiAgICBsZXQgW3gsIHksIHpdID0gX3JlZjsKICAgIHJldHVybiBuZXcgVmVjMyh4LCB5LCB6KTsKICB9OwoKICBjb25zdCBwcmVwYXJlU3BoZXJlID0gYXJncyA9PiBBcnJheS5pc0FycmF5KGFyZ3MpID8gYXJncyA6IFthcmdzXTsKCiAgY29uc3QgcHJlcGFyZUNvbnZleFBvbHloZWRyb24gPSBfcmVmMiA9PiB7CiAgICBsZXQgW3YsIGZhY2VzLCBuLCBhLCBib3VuZGluZ1NwaGVyZVJhZGl1c10gPSBfcmVmMjsKICAgIHJldHVybiBbewogICAgICB2ZXJ0aWNlczogdiA/IHYubWFwKG1ha2VWZWMzKSA6IHVuZGVmaW5lZCwKICAgICAgZmFjZXMsCiAgICAgIG5vcm1hbHM6IG4gPyBuLm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQsCiAgICAgIGF4ZXM6IGEgPyBhLm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQsCiAgICAgIGJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICB9XTsKICB9OwoKICBmdW5jdGlvbiBjcmVhdGVTaGFwZSh0eXBlLCBhcmdzKSB7CiAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgY2FzZSAnQm94JzoKICAgICAgICByZXR1cm4gbmV3IEJveChuZXcgVmVjMyguLi5hcmdzLm1hcCh2ID0+IHYgLyAyKSkpOwogICAgICAvLyBleHRlbnRzID0+IGhhbGZFeHRlbnRzCgogICAgICBjYXNlICdDb252ZXhQb2x5aGVkcm9uJzoKICAgICAgICByZXR1cm4gbmV3IENvbnZleFBvbHloZWRyb24oLi4ucHJlcGFyZUNvbnZleFBvbHloZWRyb24oYXJncykpOwoKICAgICAgY2FzZSAnQ3lsaW5kZXInOgogICAgICAgIHJldHVybiBuZXcgQ3lsaW5kZXIoLi4uYXJncyk7CiAgICAgIC8vIFsgcmFkaXVzVG9wLCByYWRpdXNCb3R0b20sIGhlaWdodCwgbnVtU2VnbWVudHMgXSA9IGFyZ3MKCiAgICAgIGNhc2UgJ0hlaWdodGZpZWxkJzoKICAgICAgICByZXR1cm4gbmV3IEhlaWdodGZpZWxkKC4uLmFyZ3MpOwogICAgICAvLyBbIEFycmF5IGRhdGEsIG9wdGlvbnM6IHttaW5WYWx1ZSwgbWF4VmFsdWUsIGVsZW1lbnRTaXplfSAgXSA9IGFyZ3MKCiAgICAgIGNhc2UgJ1BhcnRpY2xlJzoKICAgICAgICByZXR1cm4gbmV3IFBhcnRpY2xlKCk7CiAgICAgIC8vIG5vIGFyZ3MKCiAgICAgIGNhc2UgJ1BsYW5lJzoKICAgICAgICByZXR1cm4gbmV3IFBsYW5lKCk7CiAgICAgIC8vIG5vIGFyZ3MsIGluZmluaXRlIHggYW5kIHkKCiAgICAgIGNhc2UgJ1NwaGVyZSc6CiAgICAgICAgcmV0dXJuIG5ldyBTcGhlcmUoLi4ucHJlcGFyZVNwaGVyZShhcmdzKSk7CiAgICAgIC8vIHJhZGl1cyA9IGFyZ3MKCiAgICAgIGNhc2UgJ1RyaW1lc2gnOgogICAgICAgIHJldHVybiBuZXcgVHJpbWVzaCguLi5hcmdzKTsKICAgICAgLy8gW3ZlcnRpY2VzLCBpbmRpY2VzXSA9IGFyZ3MKICAgIH0KICB9CiAgLyoqCiAgICoKICAgKiBAcGFyYW0gdXVpZCB7c3RyaW5nfQogICAqIEBwYXJhbSBwcm9wcyB7Qm9keVByb3BzfQogICAqIEBwYXJhbSB0eXBlIHtCb2R5U2hhcGVUeXBlfQogICAqIEByZXR1cm4ge21vZHVsZTpvYmplY3RzL0JvZHkuQm9keX0KICAgKi8KCgogIGNvbnN0IHByb3BzVG9Cb2R5ID0gKHV1aWQsIHByb3BzLCB0eXBlKSA9PiB7CiAgICBjb25zdCB7CiAgICAgIGFyZ3MgPSBbXSwKICAgICAgcG9zaXRpb24gPSBbMCwgMCwgMF0sCiAgICAgIHJvdGF0aW9uID0gWzAsIDAsIDBdLAogICAgICB2ZWxvY2l0eSA9IFswLCAwLCAwXSwKICAgICAgYW5ndWxhclZlbG9jaXR5ID0gWzAsIDAsIDBdLAogICAgICBsaW5lYXJGYWN0b3IgPSBbMSwgMSwgMV0sCiAgICAgIGFuZ3VsYXJGYWN0b3IgPSBbMSwgMSwgMV0sCiAgICAgIHR5cGU6IGJvZHlUeXBlLAogICAgICBtYXNzLAogICAgICBtYXRlcmlhbCwKICAgICAgc2hhcGVzLAogICAgICBvbkNvbGxpZGUsCiAgICAgIGNvbGxpc2lvblJlc3BvbnNlLAogICAgICAuLi5leHRyYQogICAgfSA9IHByb3BzOwogICAgY29uc3QgYm9keSA9IG5ldyBCb2R5KHsgLi4uZXh0cmEsCiAgICAgIG1hc3M6IGJvZHlUeXBlID09PSAnU3RhdGljJyA/IDAgOiBtYXNzLAogICAgICB0eXBlOiBib2R5VHlwZSA/IEJvZHlbYm9keVR5cGUudG9VcHBlckNhc2UoKV0gOiB1bmRlZmluZWQsCiAgICAgIG1hdGVyaWFsOiBtYXRlcmlhbCA/IG5ldyBNYXRlcmlhbChtYXRlcmlhbCkgOiB1bmRlZmluZWQKICAgIH0pOwogICAgYm9keS51dWlkID0gdXVpZDsKCiAgICBpZiAoY29sbGlzaW9uUmVzcG9uc2UgIT09IHVuZGVmaW5lZCkgewogICAgICBib2R5LmNvbGxpc2lvblJlc3BvbnNlID0gY29sbGlzaW9uUmVzcG9uc2U7CiAgICB9CgogICAgaWYgKHR5cGUgPT09ICdDb21wb3VuZCcpIHsKICAgICAgc2hhcGVzLmZvckVhY2goX3JlZjMgPT4gewogICAgICAgIGxldCB7CiAgICAgICAgICB0eXBlLAogICAgICAgICAgYXJncywKICAgICAgICAgIHBvc2l0aW9uLAogICAgICAgICAgcm90YXRpb24sCiAgICAgICAgICBtYXRlcmlhbCwKICAgICAgICAgIC4uLmV4dHJhCiAgICAgICAgfSA9IF9yZWYzOwogICAgICAgIGNvbnN0IHNoYXBlQm9keSA9IGJvZHkuYWRkU2hhcGUoY3JlYXRlU2hhcGUodHlwZSwgYXJncyksIHBvc2l0aW9uID8gbmV3IFZlYzMoLi4ucG9zaXRpb24pIDogdW5kZWZpbmVkLCByb3RhdGlvbiA/IG5ldyBRdWF0ZXJuaW9uKCkuc2V0RnJvbUV1bGVyKC4uLnJvdGF0aW9uKSA6IHVuZGVmaW5lZCk7CiAgICAgICAgaWYgKG1hdGVyaWFsKSBzaGFwZUJvZHkubWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwobWF0ZXJpYWwpOwogICAgICAgIE9iamVjdC5hc3NpZ24oc2hhcGVCb2R5LCBleHRyYSk7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgYm9keS5hZGRTaGFwZShjcmVhdGVTaGFwZSh0eXBlLCBhcmdzKSk7CiAgICB9CgogICAgYm9keS5wb3NpdGlvbi5zZXQocG9zaXRpb25bMF0sIHBvc2l0aW9uWzFdLCBwb3NpdGlvblsyXSk7CiAgICBib2R5LnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKHJvdGF0aW9uWzBdLCByb3RhdGlvblsxXSwgcm90YXRpb25bMl0pOwogICAgYm9keS52ZWxvY2l0eS5zZXQodmVsb2NpdHlbMF0sIHZlbG9jaXR5WzFdLCB2ZWxvY2l0eVsyXSk7CiAgICBib2R5LmFuZ3VsYXJWZWxvY2l0eS5zZXQoYW5ndWxhclZlbG9jaXR5WzBdLCBhbmd1bGFyVmVsb2NpdHlbMV0sIGFuZ3VsYXJWZWxvY2l0eVsyXSk7CiAgICBib2R5LmxpbmVhckZhY3Rvci5zZXQobGluZWFyRmFjdG9yWzBdLCBsaW5lYXJGYWN0b3JbMV0sIGxpbmVhckZhY3RvclsyXSk7CiAgICBib2R5LmFuZ3VsYXJGYWN0b3Iuc2V0KGFuZ3VsYXJGYWN0b3JbMF0sIGFuZ3VsYXJGYWN0b3JbMV0sIGFuZ3VsYXJGYWN0b3JbMl0pOwogICAgcmV0dXJuIGJvZHk7CiAgfTsKCiAgdmFyIHByb3BzVG9Cb2R5JDEgPSBwcm9wc1RvQm9keTsKCiAgY29uc3Qgc3RhdGUgPSB7CiAgICBib2RpZXM6IHt9LAogICAgdmVoaWNsZXM6IHt9LAogICAgc3ByaW5nczoge30sCiAgICBzcHJpbmdJbnN0YW5jZXM6IHt9LAogICAgY29uc3RyYWludHM6IHt9LAogICAgcmF5czoge30sCiAgICB3b3JsZDogbmV3IFdvcmxkKCksCiAgICBjb25maWc6IHsKICAgICAgc3RlcDogMSAvIDYwCiAgICB9LAogICAgc3Vic2NyaXB0aW9uczoge30sCiAgICBib2RpZXNOZWVkU3luY2luZzogZmFsc2UsCiAgICBsYXN0Q2FsbFRpbWU6IHVuZGVmaW5lZAogIH07CgogIGZ1bmN0aW9uIHN5bmNCb2RpZXMoKSB7CiAgICBzdGF0ZS5ib2RpZXNOZWVkU3luY2luZyA9IHRydWU7CiAgICBzdGF0ZS5ib2RpZXMgPSBzdGF0ZS53b3JsZC5ib2RpZXMucmVkdWNlKChhY2MsIGJvZHkpID0+ICh7IC4uLmFjYywKICAgICAgW2JvZHkudXVpZF06IGJvZHkKICAgIH0pLCB7fSk7CiAgfQoKICBmdW5jdGlvbiBlbWl0QmVnaW5Db250YWN0KF9yZWYpIHsKICAgIGxldCB7CiAgICAgIGJvZHlBLAogICAgICBib2R5QgogICAgfSA9IF9yZWY7CiAgICBpZiAoIWJvZHlBIHx8ICFib2R5QikgcmV0dXJuOwogICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgIG9wOiAnZXZlbnQnLAogICAgICB0eXBlOiAnY29sbGlkZUJlZ2luJywKICAgICAgYm9keUE6IGJvZHlBLnV1aWQsCiAgICAgIGJvZHlCOiBib2R5Qi51dWlkCiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGVtaXRFbmRDb250YWN0KF9yZWYyKSB7CiAgICBsZXQgewogICAgICBib2R5QSwKICAgICAgYm9keUIKICAgIH0gPSBfcmVmMjsKICAgIGlmICghYm9keUEgfHwgIWJvZHlCKSByZXR1cm47CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgb3A6ICdldmVudCcsCiAgICAgIHR5cGU6ICdjb2xsaWRlRW5kJywKICAgICAgYm9keUE6IGJvZHlBLnV1aWQsCiAgICAgIGJvZHlCOiBib2R5Qi51dWlkCiAgICB9KTsKICB9CgogIHNlbGYub25tZXNzYWdlID0gZSA9PiB7CiAgICBjb25zdCB7CiAgICAgIG9wLAogICAgICB1dWlkLAogICAgICB0eXBlLAogICAgICBwb3NpdGlvbnMsCiAgICAgIHF1YXRlcm5pb25zLAogICAgICBwcm9wcwogICAgfSA9IGUuZGF0YTsKICAgIGNvbnN0IGJyb2FkcGhhc2VzID0gewogICAgICBOYWl2ZUJyb2FkcGhhc2UsCiAgICAgIFNBUEJyb2FkcGhhc2UKICAgIH07CgogICAgc3dpdGNoIChvcCkgewogICAgICBjYXNlICdpbml0JzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgIGdyYXZpdHksCiAgICAgICAgICAgIHRvbGVyYW5jZSwKICAgICAgICAgICAgc3RlcCwKICAgICAgICAgICAgaXRlcmF0aW9ucywKICAgICAgICAgICAgYWxsb3dTbGVlcCwKICAgICAgICAgICAgYnJvYWRwaGFzZSwKICAgICAgICAgICAgYXhpc0luZGV4LAogICAgICAgICAgICBkZWZhdWx0Q29udGFjdE1hdGVyaWFsLAogICAgICAgICAgICBxdWF0Tm9ybWFsaXplRmFzdCwKICAgICAgICAgICAgcXVhdE5vcm1hbGl6ZVNraXAsCiAgICAgICAgICAgIHNvbHZlcgogICAgICAgICAgfSA9IHByb3BzOwogICAgICAgICAgc3RhdGUud29ybGQuYWxsb3dTbGVlcCA9IGFsbG93U2xlZXA7CiAgICAgICAgICBzdGF0ZS53b3JsZC5ncmF2aXR5LnNldChncmF2aXR5WzBdLCBncmF2aXR5WzFdLCBncmF2aXR5WzJdKTsKICAgICAgICAgIHN0YXRlLndvcmxkLnF1YXROb3JtYWxpemVGYXN0ID0gcXVhdE5vcm1hbGl6ZUZhc3Q7CiAgICAgICAgICBzdGF0ZS53b3JsZC5xdWF0Tm9ybWFsaXplU2tpcCA9IHF1YXROb3JtYWxpemVTa2lwOwoKICAgICAgICAgIGlmIChzb2x2ZXIgPT09ICdTcGxpdCcpIHsKICAgICAgICAgICAgc3RhdGUud29ybGQuc29sdmVyID0gbmV3IFNwbGl0U29sdmVyKG5ldyBHU1NvbHZlcigpKTsKICAgICAgICAgIH0KCiAgICAgICAgICBzdGF0ZS53b3JsZC5zb2x2ZXIudG9sZXJhbmNlID0gdG9sZXJhbmNlOwogICAgICAgICAgc3RhdGUud29ybGQuc29sdmVyLml0ZXJhdGlvbnMgPSBpdGVyYXRpb25zOwogICAgICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZSA9IG5ldyAoYnJvYWRwaGFzZXNbYnJvYWRwaGFzZSArICdCcm9hZHBoYXNlJ10gfHwgTmFpdmVCcm9hZHBoYXNlKShzdGF0ZS53b3JsZCk7CiAgICAgICAgICBzdGF0ZS53b3JsZC5icm9hZHBoYXNlLmF4aXNJbmRleCA9IGF4aXNJbmRleCA9PT0gdW5kZWZpbmVkIHx8IGF4aXNJbmRleCA9PT0gbnVsbCA/IDAgOiBheGlzSW5kZXg7CiAgICAgICAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdiZWdpbkNvbnRhY3QnLCBlbWl0QmVnaW5Db250YWN0KTsKICAgICAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZENvbnRhY3QnLCBlbWl0RW5kQ29udGFjdCk7CiAgICAgICAgICBPYmplY3QuYXNzaWduKHN0YXRlLndvcmxkLmRlZmF1bHRDb250YWN0TWF0ZXJpYWwsIGRlZmF1bHRDb250YWN0TWF0ZXJpYWwpOwogICAgICAgICAgc3RhdGUuY29uZmlnLnN0ZXAgPSBzdGVwOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc3RlcCc6CiAgICAgICAgewogICAgICAgICAgY29uc3Qgbm93ID0gcGVyZm9ybWFuY2Uubm93KCkgLyAxMDAwOwoKICAgICAgICAgIGlmICghc3RhdGUubGFzdENhbGxUaW1lKSB7CiAgICAgICAgICAgIHN0YXRlLndvcmxkLnN0ZXAoc3RhdGUuY29uZmlnLnN0ZXApOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdENhbGwgPSBub3cgLSBzdGF0ZS5sYXN0Q2FsbFRpbWU7CiAgICAgICAgICAgIHN0YXRlLndvcmxkLnN0ZXAoc3RhdGUuY29uZmlnLnN0ZXAsIHRpbWVTaW5jZUxhc3RDYWxsKTsKICAgICAgICAgIH0KCiAgICAgICAgICBzdGF0ZS5sYXN0Q2FsbFRpbWUgPSBub3c7CiAgICAgICAgICBjb25zdCBudW1iZXJPZkJvZGllcyA9IHN0YXRlLndvcmxkLmJvZGllcy5sZW5ndGg7CgogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1iZXJPZkJvZGllczsgaSsrKSB7CiAgICAgICAgICAgIGxldCBiID0gc3RhdGUud29ybGQuYm9kaWVzW2ldLAogICAgICAgICAgICAgICAgcCA9IGIucG9zaXRpb24sCiAgICAgICAgICAgICAgICBxID0gYi5xdWF0ZXJuaW9uOwogICAgICAgICAgICBwb3NpdGlvbnNbMyAqIGkgKyAwXSA9IHAueDsKICAgICAgICAgICAgcG9zaXRpb25zWzMgKiBpICsgMV0gPSBwLnk7CiAgICAgICAgICAgIHBvc2l0aW9uc1szICogaSArIDJdID0gcC56OwogICAgICAgICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDBdID0gcS54OwogICAgICAgICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDFdID0gcS55OwogICAgICAgICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDJdID0gcS56OwogICAgICAgICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDNdID0gcS53OwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IG9ic2VydmF0aW9ucyA9IFtdOwoKICAgICAgICAgIGZvciAoY29uc3QgaWQgb2YgT2JqZWN0LmtleXMoc3RhdGUuc3Vic2NyaXB0aW9ucykpIHsKICAgICAgICAgICAgbGV0IFt1dWlkLCB0eXBlLCB0YXJnZXQgPSAnYm9kaWVzJ10gPSBzdGF0ZS5zdWJzY3JpcHRpb25zW2lkXTsKICAgICAgICAgICAgbGV0IG9iamVjdCA9IHN0YXRlW3RhcmdldF07CiAgICAgICAgICAgIGlmICghb2JqZWN0IHx8ICFvYmplY3RbdXVpZF0pIGNvbnRpbnVlOwogICAgICAgICAgICBsZXQgdmFsdWUgPSBvYmplY3RbdXVpZF1bdHlwZV07CiAgICAgICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIFZlYzMgfHwgdmFsdWUgaW5zdGFuY2VvZiBRdWF0ZXJuaW9uKSB2YWx1ZSA9IHZhbHVlLnRvQXJyYXkoKTsKICAgICAgICAgICAgb2JzZXJ2YXRpb25zLnB1c2goW2lkLCB2YWx1ZSwgdHlwZV0pOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB7CiAgICAgICAgICAgIG9wOiAnZnJhbWUnLAogICAgICAgICAgICBwb3NpdGlvbnMsCiAgICAgICAgICAgIHF1YXRlcm5pb25zLAogICAgICAgICAgICBvYnNlcnZhdGlvbnMsCiAgICAgICAgICAgIGFjdGl2ZTogc3RhdGUud29ybGQuaGFzQWN0aXZlQm9kaWVzCiAgICAgICAgICB9OwoKICAgICAgICAgIGlmIChzdGF0ZS5ib2RpZXNOZWVkU3luY2luZykgewogICAgICAgICAgICBtZXNzYWdlLmJvZGllcyA9IHN0YXRlLndvcmxkLmJvZGllcy5tYXAoYm9keSA9PiBib2R5LnV1aWQpOwogICAgICAgICAgICBzdGF0ZS5ib2RpZXNOZWVkU3luY2luZyA9IGZhbHNlOwogICAgICAgICAgfQoKICAgICAgICAgIHNlbGYucG9zdE1lc3NhZ2UobWVzc2FnZSwgW3Bvc2l0aW9ucy5idWZmZXIsIHF1YXRlcm5pb25zLmJ1ZmZlcl0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnYWRkQm9kaWVzJzoKICAgICAgICB7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHV1aWQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgY29uc3QgYm9keSA9IHByb3BzVG9Cb2R5JDEodXVpZFtpXSwgcHJvcHNbaV0sIHR5cGUpOwogICAgICAgICAgICBzdGF0ZS53b3JsZC5hZGRCb2R5KGJvZHkpOwogICAgICAgICAgICBpZiAocHJvcHNbaV0ub25Db2xsaWRlKSBib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbGxpZGUnLCBfcmVmMyA9PiB7CiAgICAgICAgICAgICAgbGV0IHsKICAgICAgICAgICAgICAgIHR5cGUsCiAgICAgICAgICAgICAgICBib2R5LAogICAgICAgICAgICAgICAgdGFyZ2V0LAogICAgICAgICAgICAgICAgY29udGFjdAogICAgICAgICAgICAgIH0gPSBfcmVmMzsKICAgICAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgICAgICBuaSwKICAgICAgICAgICAgICAgIHJpLAogICAgICAgICAgICAgICAgcmosCiAgICAgICAgICAgICAgICBiaSwKICAgICAgICAgICAgICAgIGJqLAogICAgICAgICAgICAgICAgaWQKICAgICAgICAgICAgICB9ID0gY29udGFjdDsKICAgICAgICAgICAgICBjb25zdCBjb250YWN0UG9pbnQgPSBiaS5wb3NpdGlvbi52YWRkKHJpKTsKICAgICAgICAgICAgICBjb25zdCBjb250YWN0Tm9ybWFsID0gYmkgPT09IGJvZHkgPyBuaSA6IG5pLnNjYWxlKC0xKTsKICAgICAgICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgICAgICAgICAgIG9wOiAnZXZlbnQnLAogICAgICAgICAgICAgICAgdHlwZSwKICAgICAgICAgICAgICAgIGJvZHk6IGJvZHkudXVpZCwKICAgICAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LnV1aWQsCiAgICAgICAgICAgICAgICBjb250YWN0OiB7CiAgICAgICAgICAgICAgICAgIG5pOiBuaS50b0FycmF5KCksCiAgICAgICAgICAgICAgICAgIHJpOiByaS50b0FycmF5KCksCiAgICAgICAgICAgICAgICAgIHJqOiByai50b0FycmF5KCksCiAgICAgICAgICAgICAgICAgIGJpOiBiaS51dWlkLAogICAgICAgICAgICAgICAgICBiajogYmoudXVpZCwKICAgICAgICAgICAgICAgICAgaW1wYWN0VmVsb2NpdHk6IGNvbnRhY3QuZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbCgpLAogICAgICAgICAgICAgICAgICAvLyBXb3JsZCBwb3NpdGlvbiBvZiB0aGUgY29udGFjdAogICAgICAgICAgICAgICAgICBjb250YWN0UG9pbnQ6IGNvbnRhY3RQb2ludC50b0FycmF5KCksCiAgICAgICAgICAgICAgICAgIC8vIE5vcm1hbCBvZiB0aGUgY29udGFjdCwgcmVsYXRpdmUgdG8gdGhlIGNvbGxpZGluZyBib2R5CiAgICAgICAgICAgICAgICAgIGNvbnRhY3ROb3JtYWw6IGNvbnRhY3ROb3JtYWwudG9BcnJheSgpLAogICAgICAgICAgICAgICAgICBpZAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNvbGxpc2lvbkZpbHRlcnM6IHsKICAgICAgICAgICAgICAgICAgYm9keUZpbHRlckdyb3VwOiBib2R5LmNvbGxpc2lvbkZpbHRlckdyb3VwLAogICAgICAgICAgICAgICAgICBib2R5RmlsdGVyTWFzazogYm9keS5jb2xsaXNpb25GaWx0ZXJNYXNrLAogICAgICAgICAgICAgICAgICB0YXJnZXRGaWx0ZXJHcm91cDogdGFyZ2V0LmNvbGxpc2lvbkZpbHRlckdyb3VwLAogICAgICAgICAgICAgICAgICB0YXJnZXRGaWx0ZXJNYXNrOiB0YXJnZXQuY29sbGlzaW9uRmlsdGVyTWFzawogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBzeW5jQm9kaWVzKCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdyZW1vdmVCb2RpZXMnOgogICAgICAgIHsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXVpZC5sZW5ndGg7IGkrKykgc3RhdGUud29ybGQucmVtb3ZlQm9keShzdGF0ZS5ib2RpZXNbdXVpZFtpXV0pOwoKICAgICAgICAgIHN5bmNCb2RpZXMoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3N1YnNjcmliZSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgewogICAgICAgICAgICBpZCwKICAgICAgICAgICAgdHlwZSwKICAgICAgICAgICAgdGFyZ2V0CiAgICAgICAgICB9ID0gcHJvcHM7CiAgICAgICAgICBzdGF0ZS5zdWJzY3JpcHRpb25zW2lkXSA9IFt1dWlkLCB0eXBlLCB0YXJnZXRdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAndW5zdWJzY3JpYmUnOgogICAgICAgIHsKICAgICAgICAgIGRlbGV0ZSBzdGF0ZS5zdWJzY3JpcHRpb25zW3Byb3BzXTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3NldFBvc2l0aW9uJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0ucG9zaXRpb24uc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0UXVhdGVybmlvbic6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnF1YXRlcm5pb24uc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0sIHByb3BzWzNdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFJvdGF0aW9uJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0ucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIocHJvcHNbMF0sIHByb3BzWzFdLCBwcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRWZWxvY2l0eSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnZlbG9jaXR5LnNldChwcm9wc1swXSwgcHJvcHNbMV0sIHByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEFuZ3VsYXJWZWxvY2l0eSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFuZ3VsYXJWZWxvY2l0eS5zZXQocHJvcHNbMF0sIHByb3BzWzFdLCBwcm9wc1syXSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRMaW5lYXJGYWN0b3InOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5saW5lYXJGYWN0b3Iuc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0QW5ndWxhckZhY3Rvcic6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFuZ3VsYXJGYWN0b3Iuc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0TWFzcyc6CiAgICAgICAgLy8gYXNzdW1lIHRoYXQgYW4gdXBkYXRlIGZyb20gemVyby1tYXNzIGltcGxpZXMgYSBuZWVkIGZvciBkeW5hbWljcyBvbiBzdGF0aWMgb2JqLgogICAgICAgIGlmIChwcm9wcyAhPT0gMCAmJiBzdGF0ZS5ib2RpZXNbdXVpZF0udHlwZSA9PT0gMCkgc3RhdGUuYm9kaWVzW3V1aWRdLnR5cGUgPSAxOwogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5tYXNzID0gcHJvcHM7CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRMaW5lYXJEYW1waW5nJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0ubGluZWFyRGFtcGluZyA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0QW5ndWxhckRhbXBpbmcnOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5hbmd1bGFyRGFtcGluZyA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0QWxsb3dTbGVlcCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFsbG93U2xlZXAgPSBwcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFNsZWVwU3BlZWRMaW1pdCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnNsZWVwU3BlZWRMaW1pdCA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0U2xlZXBUaW1lTGltaXQnOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5zbGVlcFRpbWVMaW1pdCA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Q29sbGlzaW9uRmlsdGVyR3JvdXAnOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Q29sbGlzaW9uRmlsdGVyTWFzayc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmNvbGxpc2lvbkZpbHRlck1hc2sgPSBwcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldENvbGxpc2lvblJlc3BvbnNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uY29sbGlzaW9uUmVzcG9uc2UgPSBwcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEZpeGVkUm90YXRpb24nOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5maXhlZFJvdGF0aW9uID0gcHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRJc1RyaWdnZXInOgogICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5pc1RyaWdnZXIgPSBwcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEdyYXZpdHknOgogICAgICAgIHN0YXRlLndvcmxkLmdyYXZpdHkuc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0VG9sZXJhbmNlJzoKICAgICAgICBzdGF0ZS53b3JsZC5zb2x2ZXIudG9sZXJhbmNlID0gcHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRTdGVwJzoKICAgICAgICBzdGF0ZS5jb25maWcuc3RlcCA9IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0SXRlcmF0aW9ucyc6CiAgICAgICAgc3RhdGUud29ybGQuc29sdmVyLml0ZXJhdGlvbnMgPSBwcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEJyb2FkcGhhc2UnOgogICAgICAgIHN0YXRlLndvcmxkLmJyb2FkcGhhc2UgPSBuZXcgKGJyb2FkcGhhc2VzW3Byb3BzICsgJ0Jyb2FkcGhhc2UnXSB8fCBOYWl2ZUJyb2FkcGhhc2UpKHN0YXRlLndvcmxkKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEF4aXNJbmRleCc6CiAgICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZS5heGlzSW5kZXggPSBwcm9wcyA9PT0gdW5kZWZpbmVkIHx8IHByb3BzID09PSBudWxsID8gMCA6IHByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYXBwbHlGb3JjZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFwcGx5Rm9yY2UobmV3IFZlYzMoLi4ucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5wcm9wc1sxXSkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYXBwbHlJbXB1bHNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYXBwbHlJbXB1bHNlKG5ldyBWZWMzKC4uLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4ucHJvcHNbMV0pKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FwcGx5TG9jYWxGb3JjZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFwcGx5TG9jYWxGb3JjZShuZXcgVmVjMyguLi5wcm9wc1swXSksIG5ldyBWZWMzKC4uLnByb3BzWzFdKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdhcHBseUxvY2FsSW1wdWxzZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFwcGx5TG9jYWxJbXB1bHNlKG5ldyBWZWMzKC4uLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4ucHJvcHNbMV0pKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FwcGx5VG9ycXVlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYXBwbHlUb3JxdWUobmV3IFZlYzMoLi4ucHJvcHNbMF0pKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FkZENvbnN0cmFpbnQnOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IFtib2R5QSwgYm9keUIsIG9wdG5zXSA9IHByb3BzOwogICAgICAgICAgbGV0IHsKICAgICAgICAgICAgcGl2b3RBLAogICAgICAgICAgICBwaXZvdEIsCiAgICAgICAgICAgIGF4aXNBLAogICAgICAgICAgICBheGlzQiwKICAgICAgICAgICAgbWF4TXVsdGlwbGllciwKICAgICAgICAgICAgLi4ub3B0aW9ucwogICAgICAgICAgfSA9IG9wdG5zOyAvLyBpcyB0aGVyZSBhIGJldHRlciB3YXkgdG8gZW5mb3JjZSBkZWZhdWx0cz8KCiAgICAgICAgICBwaXZvdEEgPSBBcnJheS5pc0FycmF5KHBpdm90QSkgPyBuZXcgVmVjMyguLi5waXZvdEEpIDogdW5kZWZpbmVkOwogICAgICAgICAgcGl2b3RCID0gQXJyYXkuaXNBcnJheShwaXZvdEIpID8gbmV3IFZlYzMoLi4ucGl2b3RCKSA6IHVuZGVmaW5lZDsKICAgICAgICAgIGF4aXNBID0gQXJyYXkuaXNBcnJheShheGlzQSkgPyBuZXcgVmVjMyguLi5heGlzQSkgOiB1bmRlZmluZWQ7CiAgICAgICAgICBheGlzQiA9IEFycmF5LmlzQXJyYXkoYXhpc0IpID8gbmV3IFZlYzMoLi4uYXhpc0IpIDogdW5kZWZpbmVkOwogICAgICAgICAgbGV0IGNvbnN0cmFpbnQ7CgogICAgICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgICAgIGNhc2UgJ1BvaW50VG9Qb2ludCc6CiAgICAgICAgICAgICAgY29uc3RyYWludCA9IG5ldyBQb2ludFRvUG9pbnRDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHBpdm90QSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgcGl2b3RCLCBvcHRucy5tYXhGb3JjZSk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICdDb25lVHdpc3QnOgogICAgICAgICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgQ29uZVR3aXN0Q29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7CiAgICAgICAgICAgICAgICBwaXZvdEEsCiAgICAgICAgICAgICAgICBwaXZvdEIsCiAgICAgICAgICAgICAgICBheGlzQSwKICAgICAgICAgICAgICAgIGF4aXNCLAogICAgICAgICAgICAgICAgLi4ub3B0aW9ucwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgY2FzZSAnSGluZ2UnOgogICAgICAgICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgSGluZ2VDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgICAgICAgICAgIHBpdm90QSwKICAgICAgICAgICAgICAgIHBpdm90QiwKICAgICAgICAgICAgICAgIGF4aXNBLAogICAgICAgICAgICAgICAgYXhpc0IsCiAgICAgICAgICAgICAgICAuLi5vcHRpb25zCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICdEaXN0YW5jZSc6CiAgICAgICAgICAgICAgY29uc3RyYWludCA9IG5ldyBEaXN0YW5jZUNvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgb3B0bnMuZGlzdGFuY2UsIG9wdG5zLm1heEZvcmNlKTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgJ0xvY2snOgogICAgICAgICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgTG9ja0NvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgb3B0bnMpOwogICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICBjb25zdHJhaW50ID0gbmV3IENvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgb3B0bnMpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0cmFpbnQudXVpZCA9IHV1aWQ7CiAgICAgICAgICBzdGF0ZS53b3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQpOwoKICAgICAgICAgIGlmIChtYXhNdWx0aXBsaWVyICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgY29uc3QgcG9zdFN0ZXBDb25zdHJhaW50ID0gKCkgPT4gewogICAgICAgICAgICAgIC8vIFRoZSBtdWx0aXBsaWVyIGlzIHByb3BvcnRpb25hbCB0byBob3cgbXVjaCBmb3JjZSBpcyBhZGRlZCB0byB0aGUgYm9kaWVzIGJ5IHRoZSBjb25zdHJhaW50LgogICAgICAgICAgICAgIC8vIElmIHRoaXMgZXhjZWVkcyBhIGxpbWl0IHRoZSBjb25zdHJhaW50IGlzIGRpc2FibGVkLgogICAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBNYXRoLmFicyhjb25zdHJhaW50LmVxdWF0aW9uc1swXS5tdWx0aXBsaWVyKTsKCiAgICAgICAgICAgICAgaWYgKG11bHRpcGxpZXIgPiBtYXhNdWx0aXBsaWVyKSB7CiAgICAgICAgICAgICAgICBjb25zdHJhaW50LmRpc2FibGUoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBzdGF0ZS5jb25zdHJhaW50c1t1dWlkXSA9IHBvc3RTdGVwQ29uc3RyYWludDsKICAgICAgICAgICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS5jb25zdHJhaW50c1t1dWlkXSk7CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlQ29uc3RyYWludCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKF9yZWY0ID0+IHsKICAgICAgICAgIGxldCB7CiAgICAgICAgICAgIHV1aWQ6IHRoaXNJZAogICAgICAgICAgfSA9IF9yZWY0OwogICAgICAgICAgcmV0dXJuIHRoaXNJZCA9PT0gdXVpZDsKICAgICAgICB9KS5tYXAoYyA9PiBzdGF0ZS53b3JsZC5yZW1vdmVDb25zdHJhaW50KGMpKTsKCiAgICAgICAgaWYgKHN0YXRlLmNvbnN0cmFpbnRzW3V1aWRdKSB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLmNvbnN0cmFpbnRzW3V1aWRdKTsKICAgICAgICAgIGRlbGV0ZSBzdGF0ZS5jb25zdHJhaW50c1t1dWlkXTsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnZW5hYmxlQ29uc3RyYWludCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKF9yZWY1ID0+IHsKICAgICAgICAgIGxldCB7CiAgICAgICAgICAgIHV1aWQ6IHRoaXNJZAogICAgICAgICAgfSA9IF9yZWY1OwogICAgICAgICAgcmV0dXJuIHRoaXNJZCA9PT0gdXVpZDsKICAgICAgICB9KS5tYXAoYyA9PiBjLmVuYWJsZSgpKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2Rpc2FibGVDb25zdHJhaW50JzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoX3JlZjYgPT4gewogICAgICAgICAgbGV0IHsKICAgICAgICAgICAgdXVpZDogdGhpc0lkCiAgICAgICAgICB9ID0gX3JlZjY7CiAgICAgICAgICByZXR1cm4gdGhpc0lkID09PSB1dWlkOwogICAgICAgIH0pLm1hcChjID0+IGMuZGlzYWJsZSgpKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2VuYWJsZUNvbnN0cmFpbnRNb3Rvcic6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKF9yZWY3ID0+IHsKICAgICAgICAgIGxldCB7CiAgICAgICAgICAgIHV1aWQ6IHRoaXNJZAogICAgICAgICAgfSA9IF9yZWY3OwogICAgICAgICAgcmV0dXJuIHRoaXNJZCA9PT0gdXVpZDsKICAgICAgICB9KS5tYXAoYyA9PiBjLmVuYWJsZU1vdG9yKCkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnZGlzYWJsZUNvbnN0cmFpbnRNb3Rvcic6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKF9yZWY4ID0+IHsKICAgICAgICAgIGxldCB7CiAgICAgICAgICAgIHV1aWQ6IHRoaXNJZAogICAgICAgICAgfSA9IF9yZWY4OwogICAgICAgICAgcmV0dXJuIHRoaXNJZCA9PT0gdXVpZDsKICAgICAgICB9KS5tYXAoYyA9PiBjLmRpc2FibGVNb3RvcigpKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldENvbnN0cmFpbnRNb3RvclNwZWVkJzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoX3JlZjkgPT4gewogICAgICAgICAgbGV0IHsKICAgICAgICAgICAgdXVpZDogdGhpc0lkCiAgICAgICAgICB9ID0gX3JlZjk7CiAgICAgICAgICByZXR1cm4gdGhpc0lkID09PSB1dWlkOwogICAgICAgIH0pLm1hcChjID0+IGMuc2V0TW90b3JTcGVlZChwcm9wcykpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Q29uc3RyYWludE1vdG9yTWF4Rm9yY2UnOgogICAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcihfcmVmMTAgPT4gewogICAgICAgICAgbGV0IHsKICAgICAgICAgICAgdXVpZDogdGhpc0lkCiAgICAgICAgICB9ID0gX3JlZjEwOwogICAgICAgICAgcmV0dXJuIHRoaXNJZCA9PT0gdXVpZDsKICAgICAgICB9KS5tYXAoYyA9PiBjLnNldE1vdG9yTWF4Rm9yY2UocHJvcHMpKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FkZFNwcmluZyc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgW2JvZHlBLCBib2R5Qiwgb3B0bnNdID0gcHJvcHM7CiAgICAgICAgICBsZXQgewogICAgICAgICAgICB3b3JsZEFuY2hvckEsCiAgICAgICAgICAgIHdvcmxkQW5jaG9yQiwKICAgICAgICAgICAgbG9jYWxBbmNob3JBLAogICAgICAgICAgICBsb2NhbEFuY2hvckIsCiAgICAgICAgICAgIHJlc3RMZW5ndGgsCiAgICAgICAgICAgIHN0aWZmbmVzcywKICAgICAgICAgICAgZGFtcGluZwogICAgICAgICAgfSA9IG9wdG5zOwogICAgICAgICAgd29ybGRBbmNob3JBID0gQXJyYXkuaXNBcnJheSh3b3JsZEFuY2hvckEpID8gbmV3IFZlYzMoLi4ud29ybGRBbmNob3JBKSA6IHVuZGVmaW5lZDsKICAgICAgICAgIHdvcmxkQW5jaG9yQiA9IEFycmF5LmlzQXJyYXkod29ybGRBbmNob3JCKSA/IG5ldyBWZWMzKC4uLndvcmxkQW5jaG9yQikgOiB1bmRlZmluZWQ7CiAgICAgICAgICBsb2NhbEFuY2hvckEgPSBBcnJheS5pc0FycmF5KGxvY2FsQW5jaG9yQSkgPyBuZXcgVmVjMyguLi5sb2NhbEFuY2hvckEpIDogdW5kZWZpbmVkOwogICAgICAgICAgbG9jYWxBbmNob3JCID0gQXJyYXkuaXNBcnJheShsb2NhbEFuY2hvckIpID8gbmV3IFZlYzMoLi4ubG9jYWxBbmNob3JCKSA6IHVuZGVmaW5lZDsKICAgICAgICAgIGxldCBzcHJpbmcgPSBuZXcgU3ByaW5nKHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgICAgICAgd29ybGRBbmNob3JBLAogICAgICAgICAgICB3b3JsZEFuY2hvckIsCiAgICAgICAgICAgIGxvY2FsQW5jaG9yQSwKICAgICAgICAgICAgbG9jYWxBbmNob3JCLAogICAgICAgICAgICByZXN0TGVuZ3RoLAogICAgICAgICAgICBzdGlmZm5lc3MsCiAgICAgICAgICAgIGRhbXBpbmcKICAgICAgICAgIH0pOwogICAgICAgICAgc3ByaW5nLnV1aWQgPSB1dWlkOwoKICAgICAgICAgIGxldCBwb3N0U3RlcFNwcmluZyA9ICgpID0+IHNwcmluZy5hcHBseUZvcmNlKCk7CgogICAgICAgICAgc3RhdGUuc3ByaW5nc1t1dWlkXSA9IHBvc3RTdGVwU3ByaW5nOwogICAgICAgICAgc3RhdGUuc3ByaW5nSW5zdGFuY2VzW3V1aWRdID0gc3ByaW5nOyAvLyBDb21wdXRlIHRoZSBmb3JjZSBhZnRlciBlYWNoIHN0ZXAKCiAgICAgICAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLnNwcmluZ3NbdXVpZF0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0U3ByaW5nU3RpZmZuZXNzJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbdXVpZF0uc3RpZmZuZXNzID0gcHJvcHM7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdzZXRTcHJpbmdSZXN0TGVuZ3RoJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbdXVpZF0ucmVzdExlbmd0aCA9IHByb3BzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0U3ByaW5nRGFtcGluZyc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUuc3ByaW5nSW5zdGFuY2VzW3V1aWRdLmRhbXBpbmcgPSBwcm9wczsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3JlbW92ZVNwcmluZyc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS5zcHJpbmdzW3V1aWRdKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ2FkZFJheSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgewogICAgICAgICAgICBmcm9tLAogICAgICAgICAgICB0bywKICAgICAgICAgICAgLi4ub3B0aW9ucwogICAgICAgICAgfSA9IHByb3BzOwogICAgICAgICAgY29uc3QgcmF5ID0gbmV3IFJheShmcm9tID8gbmV3IFZlYzMoLi4uZnJvbSkgOiB1bmRlZmluZWQsIHRvID8gbmV3IFZlYzMoLi4udG8pIDogdW5kZWZpbmVkKTsKICAgICAgICAgIG9wdGlvbnMubW9kZSA9IFJheVtvcHRpb25zLm1vZGUudG9VcHBlckNhc2UoKV07CiAgICAgICAgICBvcHRpb25zLnJlc3VsdCA9IG5ldyBSYXljYXN0UmVzdWx0KCk7CgogICAgICAgICAgc3RhdGUucmF5c1t1dWlkXSA9ICgpID0+IHsKICAgICAgICAgICAgcmF5LmludGVyc2VjdFdvcmxkKHN0YXRlLndvcmxkLCBvcHRpb25zKTsKICAgICAgICAgICAgY29uc3QgewogICAgICAgICAgICAgIGJvZHksCiAgICAgICAgICAgICAgc2hhcGUsCiAgICAgICAgICAgICAgcmF5RnJvbVdvcmxkLAogICAgICAgICAgICAgIHJheVRvV29ybGQsCiAgICAgICAgICAgICAgaGl0Tm9ybWFsV29ybGQsCiAgICAgICAgICAgICAgaGl0UG9pbnRXb3JsZCwKICAgICAgICAgICAgICAuLi5yZXN0CiAgICAgICAgICAgIH0gPSBvcHRpb25zLnJlc3VsdDsKICAgICAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgb3A6ICdldmVudCcsCiAgICAgICAgICAgICAgdHlwZTogJ3JheWhpdCcsCiAgICAgICAgICAgICAgcmF5OiB7CiAgICAgICAgICAgICAgICBmcm9tLAogICAgICAgICAgICAgICAgdG8sCiAgICAgICAgICAgICAgICBkaXJlY3Rpb246IHJheS5kaXJlY3Rpb24udG9BcnJheSgpLAogICAgICAgICAgICAgICAgY29sbGlzaW9uRmlsdGVyR3JvdXA6IHJheS5jb2xsaXNpb25GaWx0ZXJHcm91cCwKICAgICAgICAgICAgICAgIGNvbGxpc2lvbkZpbHRlck1hc2s6IHJheS5jb2xsaXNpb25GaWx0ZXJNYXNrLAogICAgICAgICAgICAgICAgdXVpZAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgYm9keTogYm9keSA/IGJvZHkudXVpZCA6IG51bGwsCiAgICAgICAgICAgICAgc2hhcGU6IHNoYXBlID8geyAuLi5zaGFwZSwKICAgICAgICAgICAgICAgIGJvZHk6IGJvZHkudXVpZAogICAgICAgICAgICAgIH0gOiBudWxsLAogICAgICAgICAgICAgIHJheUZyb21Xb3JsZDogcmF5RnJvbVdvcmxkLnRvQXJyYXkoKSwKICAgICAgICAgICAgICByYXlUb1dvcmxkOiByYXlUb1dvcmxkLnRvQXJyYXkoKSwKICAgICAgICAgICAgICBoaXROb3JtYWxXb3JsZDogaGl0Tm9ybWFsV29ybGQudG9BcnJheSgpLAogICAgICAgICAgICAgIGhpdFBvaW50V29ybGQ6IGhpdFBvaW50V29ybGQudG9BcnJheSgpLAogICAgICAgICAgICAgIC4uLnJlc3QKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9OwoKICAgICAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS5yYXlzW3V1aWRdKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3JlbW92ZVJheSc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHN0YXRlLnJheXNbdXVpZF0pOwogICAgICAgICAgZGVsZXRlIHN0YXRlLnJheXNbdXVpZF07CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdhZGRSYXljYXN0VmVoaWNsZSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgW2NoYXNzaXNCb2R5LCB3aGVlbHMsIHdoZWVsSW5mb3MsIGluZGV4Rm9yd2FyZEF4aXMsIGluZGV4UmlnaHRBeGlzLCBpbmRleFVwQXhpc10gPSBwcm9wczsKICAgICAgICAgIGNvbnN0IHZlaGljbGUgPSBuZXcgUmF5Y2FzdFZlaGljbGUoewogICAgICAgICAgICBjaGFzc2lzQm9keTogc3RhdGUuYm9kaWVzW2NoYXNzaXNCb2R5XSwKICAgICAgICAgICAgaW5kZXhGb3J3YXJkQXhpcywKICAgICAgICAgICAgaW5kZXhSaWdodEF4aXMsCiAgICAgICAgICAgIGluZGV4VXBBeGlzCiAgICAgICAgICB9KTsKICAgICAgICAgIHZlaGljbGUud29ybGQgPSBzdGF0ZS53b3JsZDsKCiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdoZWVsSW5mb3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgY29uc3Qgd2hlZWxJbmZvID0gd2hlZWxJbmZvc1tpXTsKICAgICAgICAgICAgd2hlZWxJbmZvLmRpcmVjdGlvbkxvY2FsID0gbmV3IFZlYzMoLi4ud2hlZWxJbmZvLmRpcmVjdGlvbkxvY2FsKTsKICAgICAgICAgICAgd2hlZWxJbmZvLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCA9IG5ldyBWZWMzKC4uLndoZWVsSW5mby5jaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwpOwogICAgICAgICAgICB3aGVlbEluZm8uYXhsZUxvY2FsID0gbmV3IFZlYzMoLi4ud2hlZWxJbmZvLmF4bGVMb2NhbCk7CiAgICAgICAgICAgIHZlaGljbGUuYWRkV2hlZWwod2hlZWxJbmZvKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2ZWhpY2xlLnByZVN0ZXAgPSAoKSA9PiB7CiAgICAgICAgICAgIHN0YXRlLnZlaGljbGVzW3V1aWRdLnVwZGF0ZVZlaGljbGUoc3RhdGUud29ybGQuZHQpOwogICAgICAgICAgfTsKCiAgICAgICAgICB2ZWhpY2xlLnBvc3RTdGVwID0gKCkgPT4gewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXRlLnZlaGljbGVzW3V1aWRdLndoZWVsSW5mb3MubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1t1dWlkXS51cGRhdGVXaGVlbFRyYW5zZm9ybShpKTsKICAgICAgICAgICAgICBjb25zdCB0ID0gc3RhdGUudmVoaWNsZXNbdXVpZF0ud2hlZWxJbmZvc1tpXS53b3JsZFRyYW5zZm9ybTsKICAgICAgICAgICAgICBjb25zdCB3aGVlbEJvZHkgPSBzdGF0ZS5ib2RpZXNbd2hlZWxzW2ldXTsKICAgICAgICAgICAgICB3aGVlbEJvZHkucG9zaXRpb24uY29weSh0LnBvc2l0aW9uKTsKICAgICAgICAgICAgICB3aGVlbEJvZHkucXVhdGVybmlvbi5jb3B5KHQucXVhdGVybmlvbik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIHN0YXRlLnZlaGljbGVzW3V1aWRdID0gdmVoaWNsZTsKICAgICAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5wcmVTdGVwKTsKICAgICAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUudmVoaWNsZXNbdXVpZF0ucG9zdFN0ZXApOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlUmF5Y2FzdFZlaGljbGUnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5wcmVTdGVwKTsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUudmVoaWNsZXNbdXVpZF0ucG9zdFN0ZXApOwogICAgICAgICAgc3RhdGUudmVoaWNsZXNbdXVpZF0ud29ybGQgPSBudWxsOwogICAgICAgICAgZGVsZXRlIHN0YXRlLnZlaGljbGVzW3V1aWRdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0UmF5Y2FzdFZlaGljbGVTdGVlcmluZ1ZhbHVlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCBbdmFsdWUsIHdoZWVsSW5kZXhdID0gcHJvcHM7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5zZXRTdGVlcmluZ1ZhbHVlKHZhbHVlLCB3aGVlbEluZGV4KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ2FwcGx5UmF5Y2FzdFZlaGljbGVFbmdpbmVGb3JjZSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgW3ZhbHVlLCB3aGVlbEluZGV4XSA9IHByb3BzOwogICAgICAgICAgc3RhdGUudmVoaWNsZXNbdXVpZF0uYXBwbHlFbmdpbmVGb3JjZSh2YWx1ZSwgd2hlZWxJbmRleCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdzZXRSYXljYXN0VmVoaWNsZUJyYWtlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCBbYnJha2UsIHdoZWVsSW5kZXhdID0gcHJvcHM7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5zZXRCcmFrZShicmFrZSwgd2hlZWxJbmRleCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICd3YWtlVXAnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS53YWtlVXAoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3NsZWVwJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uc2xlZXAoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgIH0KICB9OwoKfSkoKTsKCg==', 'data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya2VyLmpzIiwic291cmNlcyI6WyJ3b3JrZXI6Ly93ZWItd29ya2VyL3NyYy9ub2RlX21vZHVsZXMvY2Fubm9uLWVzL2Rpc3QvY2Fubm9uLWVzLmpzIiwid29ya2VyOi8vd2ViLXdvcmtlci9zcmMvcHJvcHNUb0JvZHkuanMiLCJ3b3JrZXI6Ly93ZWItd29ya2VyL3NyYy93b3JrZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSZWNvcmRzIHdoYXQgb2JqZWN0cyBhcmUgY29sbGlkaW5nIHdpdGggZWFjaCBvdGhlclxuICovXG5jbGFzcyBPYmplY3RDb2xsaXNpb25NYXRyaXgge1xuICAvKipcbiAgICogVGhlIG1hdHJpeCBzdG9yYWdlLlxuICAgKi9cblxuICAvKipcbiAgICogQHRvZG8gUmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubWF0cml4ID0gdm9pZCAwO1xuICAgIHRoaXMubWF0cml4ID0ge307XG4gIH1cbiAgLyoqXG4gICAqIGdldFxuICAgKi9cblxuXG4gIGdldChiaSwgYmopIHtcbiAgICBsZXQge1xuICAgICAgaWQ6IGlcbiAgICB9ID0gYmk7XG4gICAgbGV0IHtcbiAgICAgIGlkOiBqXG4gICAgfSA9IGJqO1xuXG4gICAgaWYgKGogPiBpKSB7XG4gICAgICBjb25zdCB0ZW1wID0gajtcbiAgICAgIGogPSBpO1xuICAgICAgaSA9IHRlbXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGkgKyBcIi1cIiArIGogaW4gdGhpcy5tYXRyaXg7XG4gIH1cbiAgLyoqXG4gICAqIHNldFxuICAgKi9cblxuXG4gIHNldChiaSwgYmosIHZhbHVlKSB7XG4gICAgbGV0IHtcbiAgICAgIGlkOiBpXG4gICAgfSA9IGJpO1xuICAgIGxldCB7XG4gICAgICBpZDogalxuICAgIH0gPSBiajtcblxuICAgIGlmIChqID4gaSkge1xuICAgICAgY29uc3QgdGVtcCA9IGo7XG4gICAgICBqID0gaTtcbiAgICAgIGkgPSB0ZW1wO1xuICAgIH1cblxuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdGhpcy5tYXRyaXhbaSArIFwiLVwiICsgal0gPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWxldGUgdGhpcy5tYXRyaXhbaSArIFwiLVwiICsgal07XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBFbXB0eSB0aGUgbWF0cml4XG4gICAqL1xuXG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5tYXRyaXggPSB7fTtcbiAgfVxuICAvKipcbiAgICogU2V0IG1heCBudW1iZXIgb2Ygb2JqZWN0c1xuICAgKi9cblxuXG4gIHNldE51bU9iamVjdHMobikge31cblxufVxuXG4vKipcbiAqIEEgM3gzIG1hdHJpeC5cbiAqIEF1dGhvcmVkIGJ5IHtAbGluayBodHRwOi8vZ2l0aHViLmNvbS9zY2h0ZXBwZS8gc2NodGVwcGV9XG4gKi9cbmNsYXNzIE1hdDMge1xuICAvKipcbiAgICogQSB2ZWN0b3Igb2YgbGVuZ3RoIDksIGNvbnRhaW5pbmcgYWxsIG1hdHJpeCBlbGVtZW50cy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEBwYXJhbSBlbGVtZW50cyBBIHZlY3RvciBvZiBsZW5ndGggOSwgY29udGFpbmluZyBhbGwgbWF0cml4IGVsZW1lbnRzLlxuICAgKi9cbiAgY29uc3RydWN0b3IoZWxlbWVudHMgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF0pIHtcbiAgICB0aGlzLmVsZW1lbnRzID0gdm9pZCAwO1xuICAgIHRoaXMuZWxlbWVudHMgPSBlbGVtZW50cztcbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgbWF0cml4IHRvIGlkZW50aXR5XG4gICAqIEB0b2RvIFNob3VsZCBwZXJoYXBzIGJlIHJlbmFtZWQgdG8gYHNldElkZW50aXR5KClgIHRvIGJlIG1vcmUgY2xlYXIuXG4gICAqIEB0b2RvIENyZWF0ZSBhbm90aGVyIGZ1bmN0aW9uIHRoYXQgaW1tZWRpYXRlbHkgY3JlYXRlcyBhbiBpZGVudGl0eSBtYXRyaXggZWcuIGBleWUoKWBcbiAgICovXG5cblxuICBpZGVudGl0eSgpIHtcbiAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50cztcbiAgICBlWzBdID0gMTtcbiAgICBlWzFdID0gMDtcbiAgICBlWzJdID0gMDtcbiAgICBlWzNdID0gMDtcbiAgICBlWzRdID0gMTtcbiAgICBlWzVdID0gMDtcbiAgICBlWzZdID0gMDtcbiAgICBlWzddID0gMDtcbiAgICBlWzhdID0gMTtcbiAgfVxuICAvKipcbiAgICogU2V0IGFsbCBlbGVtZW50cyB0byB6ZXJvXG4gICAqL1xuXG5cbiAgc2V0WmVybygpIHtcbiAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50cztcbiAgICBlWzBdID0gMDtcbiAgICBlWzFdID0gMDtcbiAgICBlWzJdID0gMDtcbiAgICBlWzNdID0gMDtcbiAgICBlWzRdID0gMDtcbiAgICBlWzVdID0gMDtcbiAgICBlWzZdID0gMDtcbiAgICBlWzddID0gMDtcbiAgICBlWzhdID0gMDtcbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgbWF0cml4IGRpYWdvbmFsIGVsZW1lbnRzIGZyb20gYSBWZWMzXG4gICAqL1xuXG5cbiAgc2V0VHJhY2UodmVjdG9yKSB7XG4gICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7XG4gICAgZVswXSA9IHZlY3Rvci54O1xuICAgIGVbNF0gPSB2ZWN0b3IueTtcbiAgICBlWzhdID0gdmVjdG9yLno7XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgdGhlIG1hdHJpeCBkaWFnb25hbCBlbGVtZW50c1xuICAgKi9cblxuXG4gIGdldFRyYWNlKHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50cztcbiAgICB0YXJnZXQueCA9IGVbMF07XG4gICAgdGFyZ2V0LnkgPSBlWzRdO1xuICAgIHRhcmdldC56ID0gZVs4XTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBNYXRyaXgtVmVjdG9yIG11bHRpcGxpY2F0aW9uXG4gICAqIEBwYXJhbSB2IFRoZSB2ZWN0b3IgdG8gbXVsdGlwbHkgd2l0aFxuICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLCB0YXJnZXQgdG8gc2F2ZSB0aGUgcmVzdWx0IGluLlxuICAgKi9cblxuXG4gIHZtdWx0KHYsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50cztcbiAgICBjb25zdCB4ID0gdi54O1xuICAgIGNvbnN0IHkgPSB2Lnk7XG4gICAgY29uc3QgeiA9IHYuejtcbiAgICB0YXJnZXQueCA9IGVbMF0gKiB4ICsgZVsxXSAqIHkgKyBlWzJdICogejtcbiAgICB0YXJnZXQueSA9IGVbM10gKiB4ICsgZVs0XSAqIHkgKyBlWzVdICogejtcbiAgICB0YXJnZXQueiA9IGVbNl0gKiB4ICsgZVs3XSAqIHkgKyBlWzhdICogejtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBNYXRyaXgtc2NhbGFyIG11bHRpcGxpY2F0aW9uXG4gICAqL1xuXG5cbiAgc211bHQocykge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5lbGVtZW50c1tpXSAqPSBzO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogTWF0cml4IG11bHRpcGxpY2F0aW9uXG4gICAqIEBwYXJhbSBtYXRyaXggTWF0cml4IHRvIG11bHRpcGx5IHdpdGggZnJvbSBsZWZ0IHNpZGUuXG4gICAqL1xuXG5cbiAgbW11bHQobWF0cml4LCB0YXJnZXQgPSBuZXcgTWF0MygpKSB7XG4gICAgY29uc3QgQSA9IHRoaXMuZWxlbWVudHM7XG4gICAgY29uc3QgQiA9IG1hdHJpeC5lbGVtZW50cztcbiAgICBjb25zdCBUID0gdGFyZ2V0LmVsZW1lbnRzO1xuICAgIGNvbnN0IGExMSA9IEFbMF0sXG4gICAgICAgICAgYTEyID0gQVsxXSxcbiAgICAgICAgICBhMTMgPSBBWzJdLFxuICAgICAgICAgIGEyMSA9IEFbM10sXG4gICAgICAgICAgYTIyID0gQVs0XSxcbiAgICAgICAgICBhMjMgPSBBWzVdLFxuICAgICAgICAgIGEzMSA9IEFbNl0sXG4gICAgICAgICAgYTMyID0gQVs3XSxcbiAgICAgICAgICBhMzMgPSBBWzhdO1xuICAgIGNvbnN0IGIxMSA9IEJbMF0sXG4gICAgICAgICAgYjEyID0gQlsxXSxcbiAgICAgICAgICBiMTMgPSBCWzJdLFxuICAgICAgICAgIGIyMSA9IEJbM10sXG4gICAgICAgICAgYjIyID0gQls0XSxcbiAgICAgICAgICBiMjMgPSBCWzVdLFxuICAgICAgICAgIGIzMSA9IEJbNl0sXG4gICAgICAgICAgYjMyID0gQls3XSxcbiAgICAgICAgICBiMzMgPSBCWzhdO1xuICAgIFRbMF0gPSBhMTEgKiBiMTEgKyBhMTIgKiBiMjEgKyBhMTMgKiBiMzE7XG4gICAgVFsxXSA9IGExMSAqIGIxMiArIGExMiAqIGIyMiArIGExMyAqIGIzMjtcbiAgICBUWzJdID0gYTExICogYjEzICsgYTEyICogYjIzICsgYTEzICogYjMzO1xuICAgIFRbM10gPSBhMjEgKiBiMTEgKyBhMjIgKiBiMjEgKyBhMjMgKiBiMzE7XG4gICAgVFs0XSA9IGEyMSAqIGIxMiArIGEyMiAqIGIyMiArIGEyMyAqIGIzMjtcbiAgICBUWzVdID0gYTIxICogYjEzICsgYTIyICogYjIzICsgYTIzICogYjMzO1xuICAgIFRbNl0gPSBhMzEgKiBiMTEgKyBhMzIgKiBiMjEgKyBhMzMgKiBiMzE7XG4gICAgVFs3XSA9IGEzMSAqIGIxMiArIGEzMiAqIGIyMiArIGEzMyAqIGIzMjtcbiAgICBUWzhdID0gYTMxICogYjEzICsgYTMyICogYjIzICsgYTMzICogYjMzO1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIFNjYWxlIGVhY2ggY29sdW1uIG9mIHRoZSBtYXRyaXhcbiAgICovXG5cblxuICBzY2FsZSh2ZWN0b3IsIHRhcmdldCA9IG5ldyBNYXQzKCkpIHtcbiAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50cztcbiAgICBjb25zdCB0ID0gdGFyZ2V0LmVsZW1lbnRzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDM7IGkrKykge1xuICAgICAgdFszICogaSArIDBdID0gdmVjdG9yLnggKiBlWzMgKiBpICsgMF07XG4gICAgICB0WzMgKiBpICsgMV0gPSB2ZWN0b3IueSAqIGVbMyAqIGkgKyAxXTtcbiAgICAgIHRbMyAqIGkgKyAyXSA9IHZlY3Rvci56ICogZVszICogaSArIDJdO1xuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIFNvbHZlIEF4PWJcbiAgICogQHBhcmFtIGIgVGhlIHJpZ2h0IGhhbmQgc2lkZVxuICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBUYXJnZXQgdmVjdG9yIHRvIHNhdmUgaW4uXG4gICAqIEByZXR1cm4gVGhlIHNvbHV0aW9uIHhcbiAgICogQHRvZG8gc2hvdWxkIHJldXNlIGFycmF5c1xuICAgKi9cblxuXG4gIHNvbHZlKGIsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICAvLyBDb25zdHJ1Y3QgZXF1YXRpb25zXG4gICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93c1xuXG4gICAgY29uc3QgbmMgPSA0OyAvLyBudW0gY29sc1xuXG4gICAgY29uc3QgZXFucyA9IFtdO1xuICAgIGxldCBpO1xuICAgIGxldCBqO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IG5yICogbmM7IGkrKykge1xuICAgICAgZXFucy5wdXNoKDApO1xuICAgIH1cblxuICAgIGZvciAoaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgIGZvciAoaiA9IDA7IGogPCAzOyBqKyspIHtcbiAgICAgICAgZXFuc1tpICsgbmMgKiBqXSA9IHRoaXMuZWxlbWVudHNbaSArIDMgKiBqXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBlcW5zWzMgKyA0ICogMF0gPSBiLng7XG4gICAgZXFuc1szICsgNCAqIDFdID0gYi55O1xuICAgIGVxbnNbMyArIDQgKiAyXSA9IGIuejsgLy8gQ29tcHV0ZSByaWdodCB1cHBlciB0cmlhbmd1bGFyIHZlcnNpb24gb2YgdGhlIG1hdHJpeCAtIEdhdXNzIGVsaW1pbmF0aW9uXG5cbiAgICBsZXQgbiA9IDM7XG4gICAgY29uc3QgayA9IG47XG4gICAgbGV0IG5wO1xuICAgIGNvbnN0IGtwID0gNDsgLy8gbnVtIHJvd3NcblxuICAgIGxldCBwO1xuXG4gICAgZG8ge1xuICAgICAgaSA9IGsgLSBuO1xuXG4gICAgICBpZiAoZXFuc1tpICsgbmMgKiBpXSA9PT0gMCkge1xuICAgICAgICAvLyB0aGUgcGl2b3QgaXMgbnVsbCwgc3dhcCBsaW5lc1xuICAgICAgICBmb3IgKGogPSBpICsgMTsgaiA8IGs7IGorKykge1xuICAgICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGpdICE9PSAwKSB7XG4gICAgICAgICAgICBucCA9IGtwO1xuXG4gICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgIC8vIGRvIGxpZ25lKCBpICkgPSBsaWduZSggaSApICsgbGlnbmUoIGsgKVxuICAgICAgICAgICAgICBwID0ga3AgLSBucDtcbiAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBpXSArPSBlcW5zW3AgKyBuYyAqIGpdO1xuICAgICAgICAgICAgfSB3aGlsZSAoLS1ucCk7XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZXFuc1tpICsgbmMgKiBpXSAhPT0gMCkge1xuICAgICAgICBmb3IgKGogPSBpICsgMTsgaiA8IGs7IGorKykge1xuICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTtcbiAgICAgICAgICBucCA9IGtwO1xuXG4gICAgICAgICAgZG8ge1xuICAgICAgICAgICAgLy8gZG8gbGlnbmUoIGsgKSA9IGxpZ25lKCBrICkgLSBtdWx0aXBsaWVyICogbGlnbmUoIGkgKVxuICAgICAgICAgICAgcCA9IGtwIC0gbnA7XG4gICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gcCA8PSBpID8gMCA6IGVxbnNbcCArIG5jICogal0gLSBlcW5zW3AgKyBuYyAqIGldICogbXVsdGlwbGllcjtcbiAgICAgICAgICB9IHdoaWxlICgtLW5wKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gd2hpbGUgKC0tbik7IC8vIEdldCB0aGUgc29sdXRpb25cblxuXG4gICAgdGFyZ2V0LnogPSBlcW5zWzIgKiBuYyArIDNdIC8gZXFuc1syICogbmMgKyAyXTtcbiAgICB0YXJnZXQueSA9IChlcW5zWzEgKiBuYyArIDNdIC0gZXFuc1sxICogbmMgKyAyXSAqIHRhcmdldC56KSAvIGVxbnNbMSAqIG5jICsgMV07XG4gICAgdGFyZ2V0LnggPSAoZXFuc1swICogbmMgKyAzXSAtIGVxbnNbMCAqIG5jICsgMl0gKiB0YXJnZXQueiAtIGVxbnNbMCAqIG5jICsgMV0gKiB0YXJnZXQueSkgLyBlcW5zWzAgKiBuYyArIDBdO1xuXG4gICAgaWYgKGlzTmFOKHRhcmdldC54KSB8fCBpc05hTih0YXJnZXQueSkgfHwgaXNOYU4odGFyZ2V0LnopIHx8IHRhcmdldC54ID09PSBJbmZpbml0eSB8fCB0YXJnZXQueSA9PT0gSW5maW5pdHkgfHwgdGFyZ2V0LnogPT09IEluZmluaXR5KSB7XG4gICAgICB0aHJvdyBcIkNvdWxkIG5vdCBzb2x2ZSBlcXVhdGlvbiEgR290IHg9W1wiICsgdGFyZ2V0LnRvU3RyaW5nKCkgKyBcIl0sIGI9W1wiICsgYi50b1N0cmluZygpICsgXCJdLCBBPVtcIiArIHRoaXMudG9TdHJpbmcoKSArIFwiXVwiO1xuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbiBlbGVtZW50IGluIHRoZSBtYXRyaXggYnkgaW5kZXguIEluZGV4IHN0YXJ0cyBhdCAwLCBub3QgMSEhIVxuICAgKiBAcGFyYW0gdmFsdWUgSWYgcHJvdmlkZWQsIHRoZSBtYXRyaXggZWxlbWVudCB3aWxsIGJlIHNldCB0byB0aGlzIHZhbHVlLlxuICAgKi9cblxuXG4gIGUocm93LCBjb2x1bW4sIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzW2NvbHVtbiArIDMgKiByb3ddO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTZXQgdmFsdWVcbiAgICAgIHRoaXMuZWxlbWVudHNbY29sdW1uICsgMyAqIHJvd10gPSB2YWx1ZTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvcHkgYW5vdGhlciBtYXRyaXggaW50byB0aGlzIG1hdHJpeCBvYmplY3QuXG4gICAqL1xuXG5cbiAgY29weShtYXRyaXgpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hdHJpeC5lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5lbGVtZW50c1tpXSA9IG1hdHJpeC5lbGVtZW50c1tpXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgbWF0cml4LlxuICAgKi9cblxuXG4gIHRvU3RyaW5nKCkge1xuICAgIGxldCByID0gJyc7XG4gICAgY29uc3Qgc2VwID0gJywnO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHtcbiAgICAgIHIgKz0gdGhpcy5lbGVtZW50c1tpXSArIHNlcDtcbiAgICB9XG5cbiAgICByZXR1cm4gcjtcbiAgfVxuICAvKipcbiAgICogcmV2ZXJzZSB0aGUgbWF0cml4XG4gICAqIEBwYXJhbSB0YXJnZXQgVGFyZ2V0IG1hdHJpeCB0byBzYXZlIGluLlxuICAgKiBAcmV0dXJuIFRoZSBzb2x1dGlvbiB4XG4gICAqL1xuXG5cbiAgcmV2ZXJzZSh0YXJnZXQgPSBuZXcgTWF0MygpKSB7XG4gICAgLy8gQ29uc3RydWN0IGVxdWF0aW9uc1xuICAgIGNvbnN0IG5yID0gMzsgLy8gbnVtIHJvd3NcblxuICAgIGNvbnN0IG5jID0gNjsgLy8gbnVtIGNvbHNcblxuICAgIGNvbnN0IGVxbnMgPSByZXZlcnNlX2VxbnM7XG4gICAgbGV0IGk7XG4gICAgbGV0IGo7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICBmb3IgKGogPSAwOyBqIDwgMzsgaisrKSB7XG4gICAgICAgIGVxbnNbaSArIG5jICogal0gPSB0aGlzLmVsZW1lbnRzW2kgKyAzICogal07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZXFuc1szICsgNiAqIDBdID0gMTtcbiAgICBlcW5zWzMgKyA2ICogMV0gPSAwO1xuICAgIGVxbnNbMyArIDYgKiAyXSA9IDA7XG4gICAgZXFuc1s0ICsgNiAqIDBdID0gMDtcbiAgICBlcW5zWzQgKyA2ICogMV0gPSAxO1xuICAgIGVxbnNbNCArIDYgKiAyXSA9IDA7XG4gICAgZXFuc1s1ICsgNiAqIDBdID0gMDtcbiAgICBlcW5zWzUgKyA2ICogMV0gPSAwO1xuICAgIGVxbnNbNSArIDYgKiAyXSA9IDE7IC8vIENvbXB1dGUgcmlnaHQgdXBwZXIgdHJpYW5ndWxhciB2ZXJzaW9uIG9mIHRoZSBtYXRyaXggLSBHYXVzcyBlbGltaW5hdGlvblxuXG4gICAgbGV0IG4gPSAzO1xuICAgIGNvbnN0IGsgPSBuO1xuICAgIGxldCBucDtcbiAgICBjb25zdCBrcCA9IG5jOyAvLyBudW0gcm93c1xuXG4gICAgbGV0IHA7XG5cbiAgICBkbyB7XG4gICAgICBpID0gayAtIG47XG5cbiAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldID09PSAwKSB7XG4gICAgICAgIC8vIHRoZSBwaXZvdCBpcyBudWxsLCBzd2FwIGxpbmVzXG4gICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7XG4gICAgICAgICAgaWYgKGVxbnNbaSArIG5jICogal0gIT09IDApIHtcbiAgICAgICAgICAgIG5wID0ga3A7XG5cbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgLy8gZG8gbGluZSggaSApID0gbGluZSggaSApICsgbGluZSggayApXG4gICAgICAgICAgICAgIHAgPSBrcCAtIG5wO1xuICAgICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGldICs9IGVxbnNbcCArIG5jICogal07XG4gICAgICAgICAgICB9IHdoaWxlICgtLW5wKTtcblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldICE9PSAwKSB7XG4gICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7XG4gICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldO1xuICAgICAgICAgIG5wID0ga3A7XG5cbiAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAvLyBkbyBsaW5lKCBrICkgPSBsaW5lKCBrICkgLSBtdWx0aXBsaWVyICogbGluZSggaSApXG4gICAgICAgICAgICBwID0ga3AgLSBucDtcbiAgICAgICAgICAgIGVxbnNbcCArIG5jICogal0gPSBwIDw9IGkgPyAwIDogZXFuc1twICsgbmMgKiBqXSAtIGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyO1xuICAgICAgICAgIH0gd2hpbGUgKC0tbnApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSB3aGlsZSAoLS1uKTsgLy8gZWxpbWluYXRlIHRoZSB1cHBlciBsZWZ0IHRyaWFuZ2xlIG9mIHRoZSBtYXRyaXhcblxuXG4gICAgaSA9IDI7XG5cbiAgICBkbyB7XG4gICAgICBqID0gaSAtIDE7XG5cbiAgICAgIGRvIHtcbiAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldO1xuICAgICAgICBucCA9IG5jO1xuXG4gICAgICAgIGRvIHtcbiAgICAgICAgICBwID0gbmMgLSBucDtcbiAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gZXFuc1twICsgbmMgKiBqXSAtIGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyO1xuICAgICAgICB9IHdoaWxlICgtLW5wKTtcbiAgICAgIH0gd2hpbGUgKGotLSk7XG4gICAgfSB3aGlsZSAoLS1pKTsgLy8gb3BlcmF0aW9ucyBvbiB0aGUgZGlhZ29uYWxcblxuXG4gICAgaSA9IDI7XG5cbiAgICBkbyB7XG4gICAgICBjb25zdCBtdWx0aXBsaWVyID0gMSAvIGVxbnNbaSArIG5jICogaV07XG4gICAgICBucCA9IG5jO1xuXG4gICAgICBkbyB7XG4gICAgICAgIHAgPSBuYyAtIG5wO1xuICAgICAgICBlcW5zW3AgKyBuYyAqIGldID0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7XG4gICAgICB9IHdoaWxlICgtLW5wKTtcbiAgICB9IHdoaWxlIChpLS0pO1xuXG4gICAgaSA9IDI7XG5cbiAgICBkbyB7XG4gICAgICBqID0gMjtcblxuICAgICAgZG8ge1xuICAgICAgICBwID0gZXFuc1tuciArIGogKyBuYyAqIGldO1xuXG4gICAgICAgIGlmIChpc05hTihwKSB8fCBwID09PSBJbmZpbml0eSkge1xuICAgICAgICAgIHRocm93IFwiQ291bGQgbm90IHJldmVyc2UhIEE9W1wiICsgdGhpcy50b1N0cmluZygpICsgXCJdXCI7XG4gICAgICAgIH1cblxuICAgICAgICB0YXJnZXQuZShpLCBqLCBwKTtcbiAgICAgIH0gd2hpbGUgKGotLSk7XG4gICAgfSB3aGlsZSAoaS0tKTtcblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgbWF0cml4IGZyb20gYSBxdWF0ZXJpb25cbiAgICovXG5cblxuICBzZXRSb3RhdGlvbkZyb21RdWF0ZXJuaW9uKHEpIHtcbiAgICBjb25zdCB4ID0gcS54O1xuICAgIGNvbnN0IHkgPSBxLnk7XG4gICAgY29uc3QgeiA9IHEuejtcbiAgICBjb25zdCB3ID0gcS53O1xuICAgIGNvbnN0IHgyID0geCArIHg7XG4gICAgY29uc3QgeTIgPSB5ICsgeTtcbiAgICBjb25zdCB6MiA9IHogKyB6O1xuICAgIGNvbnN0IHh4ID0geCAqIHgyO1xuICAgIGNvbnN0IHh5ID0geCAqIHkyO1xuICAgIGNvbnN0IHh6ID0geCAqIHoyO1xuICAgIGNvbnN0IHl5ID0geSAqIHkyO1xuICAgIGNvbnN0IHl6ID0geSAqIHoyO1xuICAgIGNvbnN0IHp6ID0geiAqIHoyO1xuICAgIGNvbnN0IHd4ID0gdyAqIHgyO1xuICAgIGNvbnN0IHd5ID0gdyAqIHkyO1xuICAgIGNvbnN0IHd6ID0gdyAqIHoyO1xuICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzO1xuICAgIGVbMyAqIDAgKyAwXSA9IDEgLSAoeXkgKyB6eik7XG4gICAgZVszICogMCArIDFdID0geHkgLSB3ejtcbiAgICBlWzMgKiAwICsgMl0gPSB4eiArIHd5O1xuICAgIGVbMyAqIDEgKyAwXSA9IHh5ICsgd3o7XG4gICAgZVszICogMSArIDFdID0gMSAtICh4eCArIHp6KTtcbiAgICBlWzMgKiAxICsgMl0gPSB5eiAtIHd4O1xuICAgIGVbMyAqIDIgKyAwXSA9IHh6IC0gd3k7XG4gICAgZVszICogMiArIDFdID0geXogKyB3eDtcbiAgICBlWzMgKiAyICsgMl0gPSAxIC0gKHh4ICsgeXkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBUcmFuc3Bvc2UgdGhlIG1hdHJpeFxuICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0LlxuICAgKiBAcmV0dXJuIFRoZSB0YXJnZXQgTWF0Mywgb3IgYSBuZXcgTWF0MyBpZiB0YXJnZXQgd2FzIG9taXR0ZWQuXG4gICAqL1xuXG5cbiAgdHJhbnNwb3NlKHRhcmdldCA9IG5ldyBNYXQzKCkpIHtcbiAgICBjb25zdCBNID0gdGhpcy5lbGVtZW50cztcbiAgICBjb25zdCBUID0gdGFyZ2V0LmVsZW1lbnRzO1xuICAgIGxldCB0bXA7IC8vU2V0IGRpYWdvbmFsc1xuXG4gICAgVFswXSA9IE1bMF07XG4gICAgVFs0XSA9IE1bNF07XG4gICAgVFs4XSA9IE1bOF07XG4gICAgdG1wID0gTVsxXTtcbiAgICBUWzFdID0gTVszXTtcbiAgICBUWzNdID0gdG1wO1xuICAgIHRtcCA9IE1bMl07XG4gICAgVFsyXSA9IE1bNl07XG4gICAgVFs2XSA9IHRtcDtcbiAgICB0bXAgPSBNWzVdO1xuICAgIFRbNV0gPSBNWzddO1xuICAgIFRbN10gPSB0bXA7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG59XG5jb25zdCByZXZlcnNlX2VxbnMgPSBbMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMCwgMF07XG5cbi8qKlxuICogMy1kaW1lbnNpb25hbCB2ZWN0b3JcbiAqIEBleGFtcGxlXG4gKiAgICAgY29uc3QgdiA9IG5ldyBWZWMzKDEsIDIsIDMpXG4gKiAgICAgY29uc29sZS5sb2coJ3g9JyArIHYueCkgLy8geD0xXG4gKi9cblxuY2xhc3MgVmVjMyB7XG4gIGNvbnN0cnVjdG9yKHggPSAwLjAsIHkgPSAwLjAsIHogPSAwLjApIHtcbiAgICB0aGlzLnggPSB2b2lkIDA7XG4gICAgdGhpcy55ID0gdm9pZCAwO1xuICAgIHRoaXMueiA9IHZvaWQgMDtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy56ID0gejtcbiAgfVxuICAvKipcbiAgICogVmVjdG9yIGNyb3NzIHByb2R1Y3RcbiAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbi5cbiAgICovXG5cblxuICBjcm9zcyh2ZWN0b3IsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCB2eCA9IHZlY3Rvci54O1xuICAgIGNvbnN0IHZ5ID0gdmVjdG9yLnk7XG4gICAgY29uc3QgdnogPSB2ZWN0b3IuejtcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuICAgIGNvbnN0IHkgPSB0aGlzLnk7XG4gICAgY29uc3QgeiA9IHRoaXMuejtcbiAgICB0YXJnZXQueCA9IHkgKiB2eiAtIHogKiB2eTtcbiAgICB0YXJnZXQueSA9IHogKiB2eCAtIHggKiB2ejtcbiAgICB0YXJnZXQueiA9IHggKiB2eSAtIHkgKiB2eDtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHZlY3RvcnMnIDMgZWxlbWVudHNcbiAgICovXG5cblxuICBzZXQoeCwgeSwgeikge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnogPSB6O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgYWxsIGNvbXBvbmVudHMgb2YgdGhlIHZlY3RvciB0byB6ZXJvLlxuICAgKi9cblxuXG4gIHNldFplcm8oKSB7XG4gICAgdGhpcy54ID0gdGhpcy55ID0gdGhpcy56ID0gMDtcbiAgfVxuICAvKipcbiAgICogVmVjdG9yIGFkZGl0aW9uXG4gICAqL1xuXG5cbiAgdmFkZCh2ZWN0b3IsIHRhcmdldCkge1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIHRhcmdldC54ID0gdmVjdG9yLnggKyB0aGlzLng7XG4gICAgICB0YXJnZXQueSA9IHZlY3Rvci55ICsgdGhpcy55O1xuICAgICAgdGFyZ2V0LnogPSB2ZWN0b3IueiArIHRoaXMuejtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMueCArIHZlY3Rvci54LCB0aGlzLnkgKyB2ZWN0b3IueSwgdGhpcy56ICsgdmVjdG9yLnopO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVmVjdG9yIHN1YnRyYWN0aW9uXG4gICAqIEBwYXJhbSB0YXJnZXQgT3B0aW9uYWwgdGFyZ2V0IHRvIHNhdmUgaW4uXG4gICAqL1xuXG5cbiAgdnN1Yih2ZWN0b3IsIHRhcmdldCkge1xuICAgIGlmICh0YXJnZXQpIHtcbiAgICAgIHRhcmdldC54ID0gdGhpcy54IC0gdmVjdG9yLng7XG4gICAgICB0YXJnZXQueSA9IHRoaXMueSAtIHZlY3Rvci55O1xuICAgICAgdGFyZ2V0LnogPSB0aGlzLnogLSB2ZWN0b3IuejtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMueCAtIHZlY3Rvci54LCB0aGlzLnkgLSB2ZWN0b3IueSwgdGhpcy56IC0gdmVjdG9yLnopO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBjcm9zcyBwcm9kdWN0IG1hdHJpeCBhX2Nyb3NzIGZyb20gYSB2ZWN0b3IsIHN1Y2ggdGhhdCBhIHggYiA9IGFfY3Jvc3MgKiBiID0gY1xuICAgKlxuICAgKiBTZWUge0BsaW5rIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyL1REQkQyNC9WVDA2L2xlY3R1cmVzL0xlY3R1cmU2LnBkZiBVbWXDpSBVbml2ZXJzaXR5IExlY3R1cmV9XG4gICAqL1xuXG5cbiAgY3Jvc3NtYXQoKSB7XG4gICAgcmV0dXJuIG5ldyBNYXQzKFswLCAtdGhpcy56LCB0aGlzLnksIHRoaXMueiwgMCwgLXRoaXMueCwgLXRoaXMueSwgdGhpcy54LCAwXSk7XG4gIH1cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZSB0aGUgdmVjdG9yLiBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIHRoZSB2YWx1ZXMgaW4gdGhlIHZlY3Rvci5cbiAgICAqIEByZXR1cm4gUmV0dXJucyB0aGUgbm9ybSBvZiB0aGUgdmVjdG9yXG4gICAqL1xuXG5cbiAgbm9ybWFsaXplKCkge1xuICAgIGNvbnN0IHggPSB0aGlzLng7XG4gICAgY29uc3QgeSA9IHRoaXMueTtcbiAgICBjb25zdCB6ID0gdGhpcy56O1xuICAgIGNvbnN0IG4gPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTtcblxuICAgIGlmIChuID4gMC4wKSB7XG4gICAgICBjb25zdCBpbnZOID0gMSAvIG47XG4gICAgICB0aGlzLnggKj0gaW52TjtcbiAgICAgIHRoaXMueSAqPSBpbnZOO1xuICAgICAgdGhpcy56ICo9IGludk47XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE1ha2Ugc29tZXRoaW5nIHVwXG4gICAgICB0aGlzLnggPSAwO1xuICAgICAgdGhpcy55ID0gMDtcbiAgICAgIHRoaXMueiA9IDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIG47XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgdmVyc2lvbiBvZiB0aGlzIHZlY3RvciB0aGF0IGlzIG9mIGxlbmd0aCAxLlxuICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluXG4gICAqIEByZXR1cm4gUmV0dXJucyB0aGUgdW5pdCB2ZWN0b3JcbiAgICovXG5cblxuICB1bml0KHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuICAgIGNvbnN0IHkgPSB0aGlzLnk7XG4gICAgY29uc3QgeiA9IHRoaXMuejtcbiAgICBsZXQgbmludiA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopO1xuXG4gICAgaWYgKG5pbnYgPiAwLjApIHtcbiAgICAgIG5pbnYgPSAxLjAgLyBuaW52O1xuICAgICAgdGFyZ2V0LnggPSB4ICogbmludjtcbiAgICAgIHRhcmdldC55ID0geSAqIG5pbnY7XG4gICAgICB0YXJnZXQueiA9IHogKiBuaW52O1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXQueCA9IDE7XG4gICAgICB0YXJnZXQueSA9IDA7XG4gICAgICB0YXJnZXQueiA9IDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBsZW5ndGggb2YgdGhlIHZlY3RvclxuICAgKi9cblxuXG4gIGxlbmd0aCgpIHtcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuICAgIGNvbnN0IHkgPSB0aGlzLnk7XG4gICAgY29uc3QgeiA9IHRoaXMuejtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgc3F1YXJlZCBsZW5ndGggb2YgdGhlIHZlY3Rvci5cbiAgICovXG5cblxuICBsZW5ndGhTcXVhcmVkKCkge1xuICAgIHJldHVybiB0aGlzLmRvdCh0aGlzKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGRpc3RhbmNlIGZyb20gdGhpcyBwb2ludCB0byBhbm90aGVyIHBvaW50XG4gICAqL1xuXG5cbiAgZGlzdGFuY2VUbyhwKSB7XG4gICAgY29uc3QgeCA9IHRoaXMueDtcbiAgICBjb25zdCB5ID0gdGhpcy55O1xuICAgIGNvbnN0IHogPSB0aGlzLno7XG4gICAgY29uc3QgcHggPSBwLng7XG4gICAgY29uc3QgcHkgPSBwLnk7XG4gICAgY29uc3QgcHogPSBwLno7XG4gICAgcmV0dXJuIE1hdGguc3FydCgocHggLSB4KSAqIChweCAtIHgpICsgKHB5IC0geSkgKiAocHkgLSB5KSArIChweiAtIHopICogKHB6IC0geikpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgc3F1YXJlZCBkaXN0YW5jZSBmcm9tIHRoaXMgcG9pbnQgdG8gYW5vdGhlciBwb2ludFxuICAgKi9cblxuXG4gIGRpc3RhbmNlU3F1YXJlZChwKSB7XG4gICAgY29uc3QgeCA9IHRoaXMueDtcbiAgICBjb25zdCB5ID0gdGhpcy55O1xuICAgIGNvbnN0IHogPSB0aGlzLno7XG4gICAgY29uc3QgcHggPSBwLng7XG4gICAgY29uc3QgcHkgPSBwLnk7XG4gICAgY29uc3QgcHogPSBwLno7XG4gICAgcmV0dXJuIChweCAtIHgpICogKHB4IC0geCkgKyAocHkgLSB5KSAqIChweSAtIHkpICsgKHB6IC0geikgKiAocHogLSB6KTtcbiAgfVxuICAvKipcbiAgICogTXVsdGlwbHkgYWxsIHRoZSBjb21wb25lbnRzIG9mIHRoZSB2ZWN0b3Igd2l0aCBhIHNjYWxhci5cbiAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi5cbiAgICovXG5cblxuICBzY2FsZShzY2FsYXIsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuICAgIGNvbnN0IHkgPSB0aGlzLnk7XG4gICAgY29uc3QgeiA9IHRoaXMuejtcbiAgICB0YXJnZXQueCA9IHNjYWxhciAqIHg7XG4gICAgdGFyZ2V0LnkgPSBzY2FsYXIgKiB5O1xuICAgIHRhcmdldC56ID0gc2NhbGFyICogejtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBNdWx0aXBseSB0aGUgdmVjdG9yIHdpdGggYW4gb3RoZXIgdmVjdG9yLCBjb21wb25lbnQtd2lzZS5cbiAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi5cbiAgICovXG5cblxuICB2bXVsKHZlY3RvciwgdGFyZ2V0ID0gbmV3IFZlYzMoKSkge1xuICAgIHRhcmdldC54ID0gdmVjdG9yLnggKiB0aGlzLng7XG4gICAgdGFyZ2V0LnkgPSB2ZWN0b3IueSAqIHRoaXMueTtcbiAgICB0YXJnZXQueiA9IHZlY3Rvci56ICogdGhpcy56O1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIFNjYWxlIGEgdmVjdG9yIGFuZCBhZGQgaXQgdG8gdGhpcyB2ZWN0b3IuIFNhdmUgdGhlIHJlc3VsdCBpbiBcInRhcmdldFwiLiAodGFyZ2V0ID0gdGhpcyArIHZlY3RvciAqIHNjYWxhcilcbiAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi5cbiAgICovXG5cblxuICBhZGRTY2FsZWRWZWN0b3Ioc2NhbGFyLCB2ZWN0b3IsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICB0YXJnZXQueCA9IHRoaXMueCArIHNjYWxhciAqIHZlY3Rvci54O1xuICAgIHRhcmdldC55ID0gdGhpcy55ICsgc2NhbGFyICogdmVjdG9yLnk7XG4gICAgdGFyZ2V0LnogPSB0aGlzLnogKyBzY2FsYXIgKiB2ZWN0b3IuejtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG4gIC8qKlxuICAgKiBDYWxjdWxhdGUgZG90IHByb2R1Y3RcbiAgICogQHBhcmFtIHZlY3RvclxuICAgKi9cblxuXG4gIGRvdCh2ZWN0b3IpIHtcbiAgICByZXR1cm4gdGhpcy54ICogdmVjdG9yLnggKyB0aGlzLnkgKiB2ZWN0b3IueSArIHRoaXMueiAqIHZlY3Rvci56O1xuICB9XG5cbiAgaXNaZXJvKCkge1xuICAgIHJldHVybiB0aGlzLnggPT09IDAgJiYgdGhpcy55ID09PSAwICYmIHRoaXMueiA9PT0gMDtcbiAgfVxuICAvKipcbiAgICogTWFrZSB0aGUgdmVjdG9yIHBvaW50IGluIHRoZSBvcHBvc2l0ZSBkaXJlY3Rpb24uXG4gICAqIEBwYXJhbSB0YXJnZXQgT3B0aW9uYWwgdGFyZ2V0IHRvIHNhdmUgaW5cbiAgICovXG5cblxuICBuZWdhdGUodGFyZ2V0ID0gbmV3IFZlYzMoKSkge1xuICAgIHRhcmdldC54ID0gLXRoaXMueDtcbiAgICB0YXJnZXQueSA9IC10aGlzLnk7XG4gICAgdGFyZ2V0LnogPSAtdGhpcy56O1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGUgdHdvIGFydGlmaWNpYWwgdGFuZ2VudHMgdG8gdGhlIHZlY3RvclxuICAgKiBAcGFyYW0gdDEgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBmaXJzdCB0YW5nZW50IGluXG4gICAqIEBwYXJhbSB0MiBWZWN0b3Igb2JqZWN0IHRvIHNhdmUgdGhlIHNlY29uZCB0YW5nZW50IGluXG4gICAqL1xuXG5cbiAgdGFuZ2VudHModDEsIHQyKSB7XG4gICAgY29uc3Qgbm9ybSA9IHRoaXMubGVuZ3RoKCk7XG5cbiAgICBpZiAobm9ybSA+IDAuMCkge1xuICAgICAgY29uc3QgbiA9IFZlYzNfdGFuZ2VudHNfbjtcbiAgICAgIGNvbnN0IGlub3JtID0gMSAvIG5vcm07XG4gICAgICBuLnNldCh0aGlzLnggKiBpbm9ybSwgdGhpcy55ICogaW5vcm0sIHRoaXMueiAqIGlub3JtKTtcbiAgICAgIGNvbnN0IHJhbmRWZWMgPSBWZWMzX3RhbmdlbnRzX3JhbmRWZWM7XG5cbiAgICAgIGlmIChNYXRoLmFicyhuLngpIDwgMC45KSB7XG4gICAgICAgIHJhbmRWZWMuc2V0KDEsIDAsIDApO1xuICAgICAgICBuLmNyb3NzKHJhbmRWZWMsIHQxKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJhbmRWZWMuc2V0KDAsIDEsIDApO1xuICAgICAgICBuLmNyb3NzKHJhbmRWZWMsIHQxKTtcbiAgICAgIH1cblxuICAgICAgbi5jcm9zcyh0MSwgdDIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGUgbm9ybWFsIGxlbmd0aCBpcyB6ZXJvLCBtYWtlIHNvbWV0aGluZyB1cFxuICAgICAgdDEuc2V0KDEsIDAsIDApO1xuICAgICAgdDIuc2V0KDAsIDEsIDApO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ29udmVydHMgdG8gYSBtb3JlIHJlYWRhYmxlIGZvcm1hdFxuICAgKi9cblxuXG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnggKyBcIixcIiArIHRoaXMueSArIFwiLFwiICsgdGhpcy56O1xuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0byBhbiBhcnJheVxuICAgKi9cblxuXG4gIHRvQXJyYXkoKSB7XG4gICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueSwgdGhpcy56XTtcbiAgfVxuICAvKipcbiAgICogQ29waWVzIHZhbHVlIG9mIHNvdXJjZSB0byB0aGlzIHZlY3Rvci5cbiAgICovXG5cblxuICBjb3B5KHZlY3Rvcikge1xuICAgIHRoaXMueCA9IHZlY3Rvci54O1xuICAgIHRoaXMueSA9IHZlY3Rvci55O1xuICAgIHRoaXMueiA9IHZlY3Rvci56O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBEbyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHZlY3RvcnNcbiAgICogQHBhcmFtIHQgQSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLiAwIHdpbGwgbWFrZSB0aGlzIGZ1bmN0aW9uIHJldHVybiB1LCBhbmQgMSB3aWxsIG1ha2UgaXQgcmV0dXJuIHYuIE51bWJlcnMgaW4gYmV0d2VlbiB3aWxsIGdlbmVyYXRlIGEgdmVjdG9yIGluIGJldHdlZW4gdGhlbS5cbiAgICovXG5cblxuICBsZXJwKHZlY3RvciwgdCwgdGFyZ2V0KSB7XG4gICAgY29uc3QgeCA9IHRoaXMueDtcbiAgICBjb25zdCB5ID0gdGhpcy55O1xuICAgIGNvbnN0IHogPSB0aGlzLno7XG4gICAgdGFyZ2V0LnggPSB4ICsgKHZlY3Rvci54IC0geCkgKiB0O1xuICAgIHRhcmdldC55ID0geSArICh2ZWN0b3IueSAtIHkpICogdDtcbiAgICB0YXJnZXQueiA9IHogKyAodmVjdG9yLnogLSB6KSAqIHQ7XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgdmVjdG9yIGVxdWFscyBpcyBhbG1vc3QgZXF1YWwgdG8gYW5vdGhlciBvbmUuXG4gICAqL1xuXG5cbiAgYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uID0gMWUtNikge1xuICAgIGlmIChNYXRoLmFicyh0aGlzLnggLSB2ZWN0b3IueCkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy55IC0gdmVjdG9yLnkpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueiAtIHZlY3Rvci56KSA+IHByZWNpc2lvbikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZlY3RvciBpcyBhbG1vc3QgemVyb1xuICAgKi9cblxuXG4gIGFsbW9zdFplcm8ocHJlY2lzaW9uID0gMWUtNikge1xuICAgIGlmIChNYXRoLmFicyh0aGlzLngpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueSkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy56KSA+IHByZWNpc2lvbikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgdmVjdG9yIGlzIGFudGktcGFyYWxsZWwgdG8gYW5vdGhlciB2ZWN0b3IuXG4gICAqIEBwYXJhbSBwcmVjaXNpb24gU2V0IHRvIHplcm8gZm9yIGV4YWN0IGNvbXBhcmlzb25zXG4gICAqL1xuXG5cbiAgaXNBbnRpcGFyYWxsZWxUbyh2ZWN0b3IsIHByZWNpc2lvbikge1xuICAgIHRoaXMubmVnYXRlKGFudGlwX25lZyk7XG4gICAgcmV0dXJuIGFudGlwX25lZy5hbG1vc3RFcXVhbHModmVjdG9yLCBwcmVjaXNpb24pO1xuICB9XG4gIC8qKlxuICAgKiBDbG9uZSB0aGUgdmVjdG9yXG4gICAqL1xuXG5cbiAgY2xvbmUoKSB7XG4gICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMueCwgdGhpcy55LCB0aGlzLnopO1xuICB9XG5cbn1cblZlYzMuWkVSTyA9IHZvaWQgMDtcblZlYzMuVU5JVF9YID0gdm9pZCAwO1xuVmVjMy5VTklUX1kgPSB2b2lkIDA7XG5WZWMzLlVOSVRfWiA9IHZvaWQgMDtcblZlYzMuWkVSTyA9IG5ldyBWZWMzKDAsIDAsIDApO1xuVmVjMy5VTklUX1ggPSBuZXcgVmVjMygxLCAwLCAwKTtcblZlYzMuVU5JVF9ZID0gbmV3IFZlYzMoMCwgMSwgMCk7XG5WZWMzLlVOSVRfWiA9IG5ldyBWZWMzKDAsIDAsIDEpO1xuY29uc3QgVmVjM190YW5nZW50c19uID0gbmV3IFZlYzMoKTtcbmNvbnN0IFZlYzNfdGFuZ2VudHNfcmFuZFZlYyA9IG5ldyBWZWMzKCk7XG5jb25zdCBhbnRpcF9uZWcgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIEF4aXMgYWxpZ25lZCBib3VuZGluZyBib3ggY2xhc3MuXG4gKi9cbmNsYXNzIEFBQkIge1xuICAvKipcbiAgICogVGhlIGxvd2VyIGJvdW5kIG9mIHRoZSBib3VuZGluZyBib3hcbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSB1cHBlciBib3VuZCBvZiB0aGUgYm91bmRpbmcgYm94XG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmxvd2VyQm91bmQgPSB2b2lkIDA7XG4gICAgdGhpcy51cHBlckJvdW5kID0gdm9pZCAwO1xuICAgIHRoaXMubG93ZXJCb3VuZCA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy51cHBlckJvdW5kID0gbmV3IFZlYzMoKTtcblxuICAgIGlmIChvcHRpb25zLmxvd2VyQm91bmQpIHtcbiAgICAgIHRoaXMubG93ZXJCb3VuZC5jb3B5KG9wdGlvbnMubG93ZXJCb3VuZCk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMudXBwZXJCb3VuZCkge1xuICAgICAgdGhpcy51cHBlckJvdW5kLmNvcHkob3B0aW9ucy51cHBlckJvdW5kKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgQUFCQiBib3VuZHMgZnJvbSBhIHNldCBvZiBwb2ludHMuXG4gICAqIEBwYXJhbSBwb2ludHMgQW4gYXJyYXkgb2YgVmVjMydzLlxuICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdFxuICAgKi9cblxuXG4gIHNldEZyb21Qb2ludHMocG9pbnRzLCBwb3NpdGlvbiwgcXVhdGVybmlvbiwgc2tpblNpemUpIHtcbiAgICBjb25zdCBsID0gdGhpcy5sb3dlckJvdW5kO1xuICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7XG4gICAgY29uc3QgcSA9IHF1YXRlcm5pb247IC8vIFNldCB0byB0aGUgZmlyc3QgcG9pbnRcblxuICAgIGwuY29weShwb2ludHNbMF0pO1xuXG4gICAgaWYgKHEpIHtcbiAgICAgIHEudm11bHQobCwgbCk7XG4gICAgfVxuXG4gICAgdS5jb3B5KGwpO1xuXG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBwID0gcG9pbnRzW2ldO1xuXG4gICAgICBpZiAocSkge1xuICAgICAgICBxLnZtdWx0KHAsIHRtcCQxKTtcbiAgICAgICAgcCA9IHRtcCQxO1xuICAgICAgfVxuXG4gICAgICBpZiAocC54ID4gdS54KSB7XG4gICAgICAgIHUueCA9IHAueDtcbiAgICAgIH1cblxuICAgICAgaWYgKHAueCA8IGwueCkge1xuICAgICAgICBsLnggPSBwLng7XG4gICAgICB9XG5cbiAgICAgIGlmIChwLnkgPiB1LnkpIHtcbiAgICAgICAgdS55ID0gcC55O1xuICAgICAgfVxuXG4gICAgICBpZiAocC55IDwgbC55KSB7XG4gICAgICAgIGwueSA9IHAueTtcbiAgICAgIH1cblxuICAgICAgaWYgKHAueiA+IHUueikge1xuICAgICAgICB1LnogPSBwLno7XG4gICAgICB9XG5cbiAgICAgIGlmIChwLnogPCBsLnopIHtcbiAgICAgICAgbC56ID0gcC56O1xuICAgICAgfVxuICAgIH0gLy8gQWRkIG9mZnNldFxuXG5cbiAgICBpZiAocG9zaXRpb24pIHtcbiAgICAgIHBvc2l0aW9uLnZhZGQobCwgbCk7XG4gICAgICBwb3NpdGlvbi52YWRkKHUsIHUpO1xuICAgIH1cblxuICAgIGlmIChza2luU2l6ZSkge1xuICAgICAgbC54IC09IHNraW5TaXplO1xuICAgICAgbC55IC09IHNraW5TaXplO1xuICAgICAgbC56IC09IHNraW5TaXplO1xuICAgICAgdS54ICs9IHNraW5TaXplO1xuICAgICAgdS55ICs9IHNraW5TaXplO1xuICAgICAgdS56ICs9IHNraW5TaXplO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDb3B5IGJvdW5kcyBmcm9tIGFuIEFBQkIgdG8gdGhpcyBBQUJCXG4gICAqIEBwYXJhbSBhYWJiIFNvdXJjZSB0byBjb3B5IGZyb21cbiAgICogQHJldHVybiBUaGUgdGhpcyBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHlcbiAgICovXG5cblxuICBjb3B5KGFhYmIpIHtcbiAgICB0aGlzLmxvd2VyQm91bmQuY29weShhYWJiLmxvd2VyQm91bmQpO1xuICAgIHRoaXMudXBwZXJCb3VuZC5jb3B5KGFhYmIudXBwZXJCb3VuZCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIENsb25lIGFuIEFBQkJcbiAgICovXG5cblxuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IEFBQkIoKS5jb3B5KHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBFeHRlbmQgdGhpcyBBQUJCIHNvIHRoYXQgaXQgY292ZXJzIHRoZSBnaXZlbiBBQUJCIHRvby5cbiAgICovXG5cblxuICBleHRlbmQoYWFiYikge1xuICAgIHRoaXMubG93ZXJCb3VuZC54ID0gTWF0aC5taW4odGhpcy5sb3dlckJvdW5kLngsIGFhYmIubG93ZXJCb3VuZC54KTtcbiAgICB0aGlzLnVwcGVyQm91bmQueCA9IE1hdGgubWF4KHRoaXMudXBwZXJCb3VuZC54LCBhYWJiLnVwcGVyQm91bmQueCk7XG4gICAgdGhpcy5sb3dlckJvdW5kLnkgPSBNYXRoLm1pbih0aGlzLmxvd2VyQm91bmQueSwgYWFiYi5sb3dlckJvdW5kLnkpO1xuICAgIHRoaXMudXBwZXJCb3VuZC55ID0gTWF0aC5tYXgodGhpcy51cHBlckJvdW5kLnksIGFhYmIudXBwZXJCb3VuZC55KTtcbiAgICB0aGlzLmxvd2VyQm91bmQueiA9IE1hdGgubWluKHRoaXMubG93ZXJCb3VuZC56LCBhYWJiLmxvd2VyQm91bmQueik7XG4gICAgdGhpcy51cHBlckJvdW5kLnogPSBNYXRoLm1heCh0aGlzLnVwcGVyQm91bmQueiwgYWFiYi51cHBlckJvdW5kLnopO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIEFBQkIgb3ZlcmxhcHMgdGhpcyBBQUJCLlxuICAgKi9cblxuXG4gIG92ZXJsYXBzKGFhYmIpIHtcbiAgICBjb25zdCBsMSA9IHRoaXMubG93ZXJCb3VuZDtcbiAgICBjb25zdCB1MSA9IHRoaXMudXBwZXJCb3VuZDtcbiAgICBjb25zdCBsMiA9IGFhYmIubG93ZXJCb3VuZDtcbiAgICBjb25zdCB1MiA9IGFhYmIudXBwZXJCb3VuZDsgLy8gICAgICBsMiAgICAgICAgdTJcbiAgICAvLyAgICAgIHwtLS0tLS0tLS18XG4gICAgLy8gfC0tLS0tLS0tfFxuICAgIC8vIGwxICAgICAgIHUxXG5cbiAgICBjb25zdCBvdmVybGFwc1ggPSBsMi54IDw9IHUxLnggJiYgdTEueCA8PSB1Mi54IHx8IGwxLnggPD0gdTIueCAmJiB1Mi54IDw9IHUxLng7XG4gICAgY29uc3Qgb3ZlcmxhcHNZID0gbDIueSA8PSB1MS55ICYmIHUxLnkgPD0gdTIueSB8fCBsMS55IDw9IHUyLnkgJiYgdTIueSA8PSB1MS55O1xuICAgIGNvbnN0IG92ZXJsYXBzWiA9IGwyLnogPD0gdTEueiAmJiB1MS56IDw9IHUyLnogfHwgbDEueiA8PSB1Mi56ICYmIHUyLnogPD0gdTEuejtcbiAgICByZXR1cm4gb3ZlcmxhcHNYICYmIG92ZXJsYXBzWSAmJiBvdmVybGFwc1o7XG4gIH0gLy8gTW9zdGx5IGZvciBkZWJ1Z2dpbmdcblxuXG4gIHZvbHVtZSgpIHtcbiAgICBjb25zdCBsID0gdGhpcy5sb3dlckJvdW5kO1xuICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7XG4gICAgcmV0dXJuICh1LnggLSBsLngpICogKHUueSAtIGwueSkgKiAodS56IC0gbC56KTtcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBBQUJCIGlzIGZ1bGx5IGNvbnRhaW5lZCBpbiB0aGlzIEFBQkIuXG4gICAqL1xuXG5cbiAgY29udGFpbnMoYWFiYikge1xuICAgIGNvbnN0IGwxID0gdGhpcy5sb3dlckJvdW5kO1xuICAgIGNvbnN0IHUxID0gdGhpcy51cHBlckJvdW5kO1xuICAgIGNvbnN0IGwyID0gYWFiYi5sb3dlckJvdW5kO1xuICAgIGNvbnN0IHUyID0gYWFiYi51cHBlckJvdW5kOyAvLyAgICAgIGwyICAgICAgICB1MlxuICAgIC8vICAgICAgfC0tLS0tLS0tLXxcbiAgICAvLyB8LS0tLS0tLS0tLS0tLS0tfFxuICAgIC8vIGwxICAgICAgICAgICAgICB1MVxuXG4gICAgcmV0dXJuIGwxLnggPD0gbDIueCAmJiB1MS54ID49IHUyLnggJiYgbDEueSA8PSBsMi55ICYmIHUxLnkgPj0gdTIueSAmJiBsMS56IDw9IGwyLnogJiYgdTEueiA+PSB1Mi56O1xuICB9XG5cbiAgZ2V0Q29ybmVycyhhLCBiLCBjLCBkLCBlLCBmLCBnLCBoKSB7XG4gICAgY29uc3QgbCA9IHRoaXMubG93ZXJCb3VuZDtcbiAgICBjb25zdCB1ID0gdGhpcy51cHBlckJvdW5kO1xuICAgIGEuY29weShsKTtcbiAgICBiLnNldCh1LngsIGwueSwgbC56KTtcbiAgICBjLnNldCh1LngsIHUueSwgbC56KTtcbiAgICBkLnNldChsLngsIHUueSwgdS56KTtcbiAgICBlLnNldCh1LngsIGwueSwgdS56KTtcbiAgICBmLnNldChsLngsIHUueSwgbC56KTtcbiAgICBnLnNldChsLngsIGwueSwgdS56KTtcbiAgICBoLmNvcHkodSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgcmVwcmVzZW50YXRpb24gb2YgYW4gQUFCQiBpbiBhbm90aGVyIGZyYW1lLlxuICAgKiBAcmV0dXJuIFRoZSBcInRhcmdldFwiIEFBQkIgb2JqZWN0LlxuICAgKi9cblxuXG4gIHRvTG9jYWxGcmFtZShmcmFtZSwgdGFyZ2V0KSB7XG4gICAgY29uc3QgY29ybmVycyA9IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzO1xuICAgIGNvbnN0IGEgPSBjb3JuZXJzWzBdO1xuICAgIGNvbnN0IGIgPSBjb3JuZXJzWzFdO1xuICAgIGNvbnN0IGMgPSBjb3JuZXJzWzJdO1xuICAgIGNvbnN0IGQgPSBjb3JuZXJzWzNdO1xuICAgIGNvbnN0IGUgPSBjb3JuZXJzWzRdO1xuICAgIGNvbnN0IGYgPSBjb3JuZXJzWzVdO1xuICAgIGNvbnN0IGcgPSBjb3JuZXJzWzZdO1xuICAgIGNvbnN0IGggPSBjb3JuZXJzWzddOyAvLyBHZXQgY29ybmVycyBpbiBjdXJyZW50IGZyYW1lXG5cbiAgICB0aGlzLmdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCk7IC8vIFRyYW5zZm9ybSB0aGVtIHRvIG5ldyBsb2NhbCBmcmFtZVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykge1xuICAgICAgY29uc3QgY29ybmVyID0gY29ybmVyc1tpXTtcbiAgICAgIGZyYW1lLnBvaW50VG9Mb2NhbChjb3JuZXIsIGNvcm5lcik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tUG9pbnRzKGNvcm5lcnMpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFBQkIgaW4gdGhlIGdsb2JhbCBmcmFtZS5cbiAgICogQHJldHVybiBUaGUgXCJ0YXJnZXRcIiBBQUJCIG9iamVjdC5cbiAgICovXG5cblxuICB0b1dvcmxkRnJhbWUoZnJhbWUsIHRhcmdldCkge1xuICAgIGNvbnN0IGNvcm5lcnMgPSB0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVycztcbiAgICBjb25zdCBhID0gY29ybmVyc1swXTtcbiAgICBjb25zdCBiID0gY29ybmVyc1sxXTtcbiAgICBjb25zdCBjID0gY29ybmVyc1syXTtcbiAgICBjb25zdCBkID0gY29ybmVyc1szXTtcbiAgICBjb25zdCBlID0gY29ybmVyc1s0XTtcbiAgICBjb25zdCBmID0gY29ybmVyc1s1XTtcbiAgICBjb25zdCBnID0gY29ybmVyc1s2XTtcbiAgICBjb25zdCBoID0gY29ybmVyc1s3XTsgLy8gR2V0IGNvcm5lcnMgaW4gY3VycmVudCBmcmFtZVxuXG4gICAgdGhpcy5nZXRDb3JuZXJzKGEsIGIsIGMsIGQsIGUsIGYsIGcsIGgpOyAvLyBUcmFuc2Zvcm0gdGhlbSB0byBuZXcgbG9jYWwgZnJhbWVcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHtcbiAgICAgIGNvbnN0IGNvcm5lciA9IGNvcm5lcnNbaV07XG4gICAgICBmcmFtZS5wb2ludFRvV29ybGQoY29ybmVyLCBjb3JuZXIpO1xuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQuc2V0RnJvbVBvaW50cyhjb3JuZXJzKTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIEFBQkIgaXMgaGl0IGJ5IGEgcmF5LlxuICAgKi9cblxuXG4gIG92ZXJsYXBzUmF5KHJheSkge1xuICAgIGNvbnN0IHtcbiAgICAgIGRpcmVjdGlvbixcbiAgICAgIGZyb21cbiAgICB9ID0gcmF5OyAvLyBjb25zdCB0ID0gMFxuICAgIC8vIHJheS5kaXJlY3Rpb24gaXMgdW5pdCBkaXJlY3Rpb24gdmVjdG9yIG9mIHJheVxuXG4gICAgY29uc3QgZGlyRnJhY1ggPSAxIC8gZGlyZWN0aW9uLng7XG4gICAgY29uc3QgZGlyRnJhY1kgPSAxIC8gZGlyZWN0aW9uLnk7XG4gICAgY29uc3QgZGlyRnJhY1ogPSAxIC8gZGlyZWN0aW9uLno7IC8vIHRoaXMubG93ZXJCb3VuZCBpcyB0aGUgY29ybmVyIG9mIEFBQkIgd2l0aCBtaW5pbWFsIGNvb3JkaW5hdGVzIC0gbGVmdCBib3R0b20sIHJ0IGlzIG1heGltYWwgY29ybmVyXG5cbiAgICBjb25zdCB0MSA9ICh0aGlzLmxvd2VyQm91bmQueCAtIGZyb20ueCkgKiBkaXJGcmFjWDtcbiAgICBjb25zdCB0MiA9ICh0aGlzLnVwcGVyQm91bmQueCAtIGZyb20ueCkgKiBkaXJGcmFjWDtcbiAgICBjb25zdCB0MyA9ICh0aGlzLmxvd2VyQm91bmQueSAtIGZyb20ueSkgKiBkaXJGcmFjWTtcbiAgICBjb25zdCB0NCA9ICh0aGlzLnVwcGVyQm91bmQueSAtIGZyb20ueSkgKiBkaXJGcmFjWTtcbiAgICBjb25zdCB0NSA9ICh0aGlzLmxvd2VyQm91bmQueiAtIGZyb20ueikgKiBkaXJGcmFjWjtcbiAgICBjb25zdCB0NiA9ICh0aGlzLnVwcGVyQm91bmQueiAtIGZyb20ueikgKiBkaXJGcmFjWjsgLy8gY29uc3QgdG1pbiA9IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKHQxLCB0MiksIE1hdGgubWluKHQzLCB0NCkpKTtcbiAgICAvLyBjb25zdCB0bWF4ID0gTWF0aC5taW4oTWF0aC5taW4oTWF0aC5tYXgodDEsIHQyKSwgTWF0aC5tYXgodDMsIHQ0KSkpO1xuXG4gICAgY29uc3QgdG1pbiA9IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKHQxLCB0MiksIE1hdGgubWluKHQzLCB0NCkpLCBNYXRoLm1pbih0NSwgdDYpKTtcbiAgICBjb25zdCB0bWF4ID0gTWF0aC5taW4oTWF0aC5taW4oTWF0aC5tYXgodDEsIHQyKSwgTWF0aC5tYXgodDMsIHQ0KSksIE1hdGgubWF4KHQ1LCB0NikpOyAvLyBpZiB0bWF4IDwgMCwgcmF5IChsaW5lKSBpcyBpbnRlcnNlY3RpbmcgQUFCQiwgYnV0IHdob2xlIEFBQkIgaXMgYmVoaW5nIHVzXG5cbiAgICBpZiAodG1heCA8IDApIHtcbiAgICAgIC8vdCA9IHRtYXg7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSAvLyBpZiB0bWluID4gdG1heCwgcmF5IGRvZXNuJ3QgaW50ZXJzZWN0IEFBQkJcblxuXG4gICAgaWYgKHRtaW4gPiB0bWF4KSB7XG4gICAgICAvL3QgPSB0bWF4O1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbn1cbmNvbnN0IHRtcCQxID0gbmV3IFZlYzMoKTtcbmNvbnN0IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldO1xuXG4vKipcbiAqIENvbGxpc2lvbiBcIm1hdHJpeFwiLlxuICogSXQncyBhY3R1YWxseSBhIHRyaWFuZ3VsYXItc2hhcGVkIGFycmF5IG9mIHdoZXRoZXIgdHdvIGJvZGllcyBhcmUgdG91Y2hpbmcgdGhpcyBzdGVwLCBmb3IgcmVmZXJlbmNlIG5leHQgc3RlcFxuICovXG5jbGFzcyBBcnJheUNvbGxpc2lvbk1hdHJpeCB7XG4gIC8qKlxuICAgKiBUaGUgbWF0cml4IHN0b3JhZ2UuXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLm1hdHJpeCA9IHZvaWQgMDtcbiAgICB0aGlzLm1hdHJpeCA9IFtdO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYW4gZWxlbWVudFxuICAgKi9cblxuXG4gIGdldChiaSwgYmopIHtcbiAgICBsZXQge1xuICAgICAgaW5kZXg6IGlcbiAgICB9ID0gYmk7XG4gICAgbGV0IHtcbiAgICAgIGluZGV4OiBqXG4gICAgfSA9IGJqO1xuXG4gICAgaWYgKGogPiBpKSB7XG4gICAgICBjb25zdCB0ZW1wID0gajtcbiAgICAgIGogPSBpO1xuICAgICAgaSA9IHRlbXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubWF0cml4WyhpICogKGkgKyAxKSA+PiAxKSArIGogLSAxXTtcbiAgfVxuICAvKipcbiAgICogU2V0IGFuIGVsZW1lbnRcbiAgICovXG5cblxuICBzZXQoYmksIGJqLCB2YWx1ZSkge1xuICAgIGxldCB7XG4gICAgICBpbmRleDogaVxuICAgIH0gPSBiaTtcbiAgICBsZXQge1xuICAgICAgaW5kZXg6IGpcbiAgICB9ID0gYmo7XG5cbiAgICBpZiAoaiA+IGkpIHtcbiAgICAgIGNvbnN0IHRlbXAgPSBqO1xuICAgICAgaiA9IGk7XG4gICAgICBpID0gdGVtcDtcbiAgICB9XG5cbiAgICB0aGlzLm1hdHJpeFsoaSAqIChpICsgMSkgPj4gMSkgKyBqIC0gMV0gPSB2YWx1ZSA/IDEgOiAwO1xuICB9XG4gIC8qKlxuICAgKiBTZXRzIGFsbCBlbGVtZW50cyB0byB6ZXJvXG4gICAqL1xuXG5cbiAgcmVzZXQoKSB7XG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSB0aGlzLm1hdHJpeC5sZW5ndGg7IGkgIT09IGw7IGkrKykge1xuICAgICAgdGhpcy5tYXRyaXhbaV0gPSAwO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgbWF4IG51bWJlciBvZiBvYmplY3RzXG4gICAqL1xuXG5cbiAgc2V0TnVtT2JqZWN0cyhuKSB7XG4gICAgdGhpcy5tYXRyaXgubGVuZ3RoID0gbiAqIChuIC0gMSkgPj4gMTtcbiAgfVxuXG59XG5cbi8qKlxuICogQmFzZSBjbGFzcyBmb3Igb2JqZWN0cyB0aGF0IGRpc3BhdGNoZXMgZXZlbnRzLlxuICovXG5jbGFzcyBFdmVudFRhcmdldCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2xpc3RlbmVycyA9IHZvaWQgMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYW4gZXZlbnQgbGlzdGVuZXJcbiAgICogQHJldHVybiBUaGUgc2VsZiBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuXG4gICAqL1xuICBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyKSB7XG4gICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTtcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG5cbiAgICBpZiAobGlzdGVuZXJzW3R5cGVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGxpc3RlbmVyc1t0eXBlXSA9IFtdO1xuICAgIH1cblxuICAgIGlmICghbGlzdGVuZXJzW3R5cGVdLmluY2x1ZGVzKGxpc3RlbmVyKSkge1xuICAgICAgbGlzdGVuZXJzW3R5cGVdLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBldmVudCBsaXN0ZW5lciBpcyBhZGRlZFxuICAgKi9cblxuXG4gIGhhc0V2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG5cbiAgICBpZiAobGlzdGVuZXJzW3R5cGVdICE9PSB1bmRlZmluZWQgJiYgbGlzdGVuZXJzW3R5cGVdLmluY2x1ZGVzKGxpc3RlbmVyKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbnkgZXZlbnQgbGlzdGVuZXIgb2YgdGhlIGdpdmVuIHR5cGUgaXMgYWRkZWRcbiAgICovXG5cblxuICBoYXNBbnlFdmVudExpc3RlbmVyKHR5cGUpIHtcbiAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgcmV0dXJuIGxpc3RlbmVyc1t0eXBlXSAhPT0gdW5kZWZpbmVkO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgYW4gZXZlbnQgbGlzdGVuZXJcbiAgICogQHJldHVybiBUaGUgc2VsZiBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuXG4gICAqL1xuXG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgIGlmICh0aGlzLl9saXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xuXG4gICAgaWYgKGxpc3RlbmVyc1t0eXBlXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjb25zdCBpbmRleCA9IGxpc3RlbmVyc1t0eXBlXS5pbmRleE9mKGxpc3RlbmVyKTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIGxpc3RlbmVyc1t0eXBlXS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBFbWl0IGFuIGV2ZW50LlxuICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS5cbiAgICovXG5cblxuICBkaXNwYXRjaEV2ZW50KGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG4gICAgY29uc3QgbGlzdGVuZXJBcnJheSA9IGxpc3RlbmVyc1tldmVudC50eXBlXTtcblxuICAgIGlmIChsaXN0ZW5lckFycmF5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGV2ZW50LnRhcmdldCA9IHRoaXM7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gbGlzdGVuZXJBcnJheS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgbGlzdGVuZXJBcnJheVtpXS5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG59XG5cbi8qKlxuICogQSBRdWF0ZXJuaW9uIGRlc2NyaWJlcyBhIHJvdGF0aW9uIGluIDNEIHNwYWNlLiBUaGUgUXVhdGVybmlvbiBpcyBtYXRoZW1hdGljYWxseSBkZWZpbmVkIGFzIFEgPSB4KmkgKyB5KmogKyB6KmsgKyB3LCB3aGVyZSAoaSxqLGspIGFyZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9ycy4gKHgseSx6KSBjYW4gYmUgc2VlbiBhcyBhIHZlY3RvciByZWxhdGVkIHRvIHRoZSBheGlzIG9mIHJvdGF0aW9uLCB3aGlsZSB0aGUgcmVhbCBtdWx0aXBsaWVyLCB3LCBpcyByZWxhdGVkIHRvIHRoZSBhbW91bnQgb2Ygcm90YXRpb24uXG4gKiBAcGFyYW0geCBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGkuXG4gKiBAcGFyYW0geSBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGouXG4gKiBAcGFyYW0geiBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGsuXG4gKiBAcGFyYW0gdyBNdWx0aXBsaWVyIG9mIHRoZSByZWFsIHBhcnQuXG4gKiBAc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUXVhdGVybmlvblxuICovXG5cbmNsYXNzIFF1YXRlcm5pb24ge1xuICBjb25zdHJ1Y3Rvcih4ID0gMCwgeSA9IDAsIHogPSAwLCB3ID0gMSkge1xuICAgIHRoaXMueCA9IHZvaWQgMDtcbiAgICB0aGlzLnkgPSB2b2lkIDA7XG4gICAgdGhpcy56ID0gdm9pZCAwO1xuICAgIHRoaXMudyA9IHZvaWQgMDtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy56ID0gejtcbiAgICB0aGlzLncgPSB3O1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHZhbHVlIG9mIHRoZSBxdWF0ZXJuaW9uLlxuICAgKi9cblxuXG4gIHNldCh4LCB5LCB6LCB3KSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMueiA9IHo7XG4gICAgdGhpcy53ID0gdztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQ29udmVydCB0byBhIHJlYWRhYmxlIGZvcm1hdFxuICAgKiBAcmV0dXJuIFwieCx5LHosd1wiXG4gICAqL1xuXG5cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMueCArIFwiLFwiICsgdGhpcy55ICsgXCIsXCIgKyB0aGlzLnogKyBcIixcIiArIHRoaXMudztcbiAgfVxuICAvKipcbiAgICogQ29udmVydCB0byBhbiBBcnJheVxuICAgKiBAcmV0dXJuIFt4LCB5LCB6LCB3XVxuICAgKi9cblxuXG4gIHRvQXJyYXkoKSB7XG4gICAgcmV0dXJuIFt0aGlzLngsIHRoaXMueSwgdGhpcy56LCB0aGlzLnddO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHF1YXRlcm5pb24gY29tcG9uZW50cyBnaXZlbiBhbiBheGlzIGFuZCBhbiBhbmdsZSBpbiByYWRpYW5zLlxuICAgKi9cblxuXG4gIHNldEZyb21BeGlzQW5nbGUodmVjdG9yLCBhbmdsZSkge1xuICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZSAqIDAuNSk7XG4gICAgdGhpcy54ID0gdmVjdG9yLnggKiBzO1xuICAgIHRoaXMueSA9IHZlY3Rvci55ICogcztcbiAgICB0aGlzLnogPSB2ZWN0b3IueiAqIHM7XG4gICAgdGhpcy53ID0gTWF0aC5jb3MoYW5nbGUgKiAwLjUpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0aGUgcXVhdGVybmlvbiB0byBbIGF4aXMsIGFuZ2xlIF0gcmVwcmVzZW50YXRpb24uXG4gICAqIEBwYXJhbSB0YXJnZXRBeGlzIEEgdmVjdG9yIG9iamVjdCB0byByZXVzZSBmb3Igc3RvcmluZyB0aGUgYXhpcy5cbiAgICogQHJldHVybiBBbiBhcnJheSwgZmlyc3QgZWxlbWVudCBpcyB0aGUgYXhpcyBhbmQgdGhlIHNlY29uZCBpcyB0aGUgYW5nbGUgaW4gcmFkaWFucy5cbiAgICovXG5cblxuICB0b0F4aXNBbmdsZSh0YXJnZXRBeGlzID0gbmV3IFZlYzMoKSkge1xuICAgIHRoaXMubm9ybWFsaXplKCk7IC8vIGlmIHc+MSBhY29zIGFuZCBzcXJ0IHdpbGwgcHJvZHVjZSBlcnJvcnMsIHRoaXMgY2FudCBoYXBwZW4gaWYgcXVhdGVybmlvbiBpcyBub3JtYWxpc2VkXG5cbiAgICBjb25zdCBhbmdsZSA9IDIgKiBNYXRoLmFjb3ModGhpcy53KTtcbiAgICBjb25zdCBzID0gTWF0aC5zcXJ0KDEgLSB0aGlzLncgKiB0aGlzLncpOyAvLyBhc3N1bWluZyBxdWF0ZXJuaW9uIG5vcm1hbGlzZWQgdGhlbiB3IGlzIGxlc3MgdGhhbiAxLCBzbyB0ZXJtIGFsd2F5cyBwb3NpdGl2ZS5cblxuICAgIGlmIChzIDwgMC4wMDEpIHtcbiAgICAgIC8vIHRlc3QgdG8gYXZvaWQgZGl2aWRlIGJ5IHplcm8sIHMgaXMgYWx3YXlzIHBvc2l0aXZlIGR1ZSB0byBzcXJ0XG4gICAgICAvLyBpZiBzIGNsb3NlIHRvIHplcm8gdGhlbiBkaXJlY3Rpb24gb2YgYXhpcyBub3QgaW1wb3J0YW50XG4gICAgICB0YXJnZXRBeGlzLnggPSB0aGlzLng7IC8vIGlmIGl0IGlzIGltcG9ydGFudCB0aGF0IGF4aXMgaXMgbm9ybWFsaXNlZCB0aGVuIHJlcGxhY2Ugd2l0aCB4PTE7IHk9ej0wO1xuXG4gICAgICB0YXJnZXRBeGlzLnkgPSB0aGlzLnk7XG4gICAgICB0YXJnZXRBeGlzLnogPSB0aGlzLno7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldEF4aXMueCA9IHRoaXMueCAvIHM7IC8vIG5vcm1hbGlzZSBheGlzXG5cbiAgICAgIHRhcmdldEF4aXMueSA9IHRoaXMueSAvIHM7XG4gICAgICB0YXJnZXRBeGlzLnogPSB0aGlzLnogLyBzO1xuICAgIH1cblxuICAgIHJldHVybiBbdGFyZ2V0QXhpcywgYW5nbGVdO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHF1YXRlcm5pb24gdmFsdWUgZ2l2ZW4gdHdvIHZlY3RvcnMuIFRoZSByZXN1bHRpbmcgcm90YXRpb24gd2lsbCBiZSB0aGUgbmVlZGVkIHJvdGF0aW9uIHRvIHJvdGF0ZSB1IHRvIHYuXG4gICAqL1xuXG5cbiAgc2V0RnJvbVZlY3RvcnModSwgdikge1xuICAgIGlmICh1LmlzQW50aXBhcmFsbGVsVG8odikpIHtcbiAgICAgIGNvbnN0IHQxID0gc2Z2X3QxO1xuICAgICAgY29uc3QgdDIgPSBzZnZfdDI7XG4gICAgICB1LnRhbmdlbnRzKHQxLCB0Mik7XG4gICAgICB0aGlzLnNldEZyb21BeGlzQW5nbGUodDEsIE1hdGguUEkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhID0gdS5jcm9zcyh2KTtcbiAgICAgIHRoaXMueCA9IGEueDtcbiAgICAgIHRoaXMueSA9IGEueTtcbiAgICAgIHRoaXMueiA9IGEuejtcbiAgICAgIHRoaXMudyA9IE1hdGguc3FydCh1Lmxlbmd0aCgpICoqIDIgKiB2Lmxlbmd0aCgpICoqIDIpICsgdS5kb3Qodik7XG4gICAgICB0aGlzLm5vcm1hbGl6ZSgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBNdWx0aXBseSB0aGUgcXVhdGVybmlvbiB3aXRoIGFuIG90aGVyIHF1YXRlcm5pb24uXG4gICAqL1xuXG5cbiAgbXVsdChxdWF0LCB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpKSB7XG4gICAgY29uc3QgYXggPSB0aGlzLng7XG4gICAgY29uc3QgYXkgPSB0aGlzLnk7XG4gICAgY29uc3QgYXogPSB0aGlzLno7XG4gICAgY29uc3QgYXcgPSB0aGlzLnc7XG4gICAgY29uc3QgYnggPSBxdWF0Lng7XG4gICAgY29uc3QgYnkgPSBxdWF0Lnk7XG4gICAgY29uc3QgYnogPSBxdWF0Lno7XG4gICAgY29uc3QgYncgPSBxdWF0Lnc7XG4gICAgdGFyZ2V0LnggPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5O1xuICAgIHRhcmdldC55ID0gYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBiejtcbiAgICB0YXJnZXQueiA9IGF6ICogYncgKyBhdyAqIGJ6ICsgYXggKiBieSAtIGF5ICogYng7XG4gICAgdGFyZ2V0LncgPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6O1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgaW52ZXJzZSBxdWF0ZXJuaW9uIHJvdGF0aW9uLlxuICAgKi9cblxuXG4gIGludmVyc2UodGFyZ2V0ID0gbmV3IFF1YXRlcm5pb24oKSkge1xuICAgIGNvbnN0IHggPSB0aGlzLng7XG4gICAgY29uc3QgeSA9IHRoaXMueTtcbiAgICBjb25zdCB6ID0gdGhpcy56O1xuICAgIGNvbnN0IHcgPSB0aGlzLnc7XG4gICAgdGhpcy5jb25qdWdhdGUodGFyZ2V0KTtcbiAgICBjb25zdCBpbm9ybTIgPSAxIC8gKHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3KTtcbiAgICB0YXJnZXQueCAqPSBpbm9ybTI7XG4gICAgdGFyZ2V0LnkgKj0gaW5vcm0yO1xuICAgIHRhcmdldC56ICo9IGlub3JtMjtcbiAgICB0YXJnZXQudyAqPSBpbm9ybTI7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBxdWF0ZXJuaW9uIGNvbmp1Z2F0ZVxuICAgKi9cblxuXG4gIGNvbmp1Z2F0ZSh0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpKSB7XG4gICAgdGFyZ2V0LnggPSAtdGhpcy54O1xuICAgIHRhcmdldC55ID0gLXRoaXMueTtcbiAgICB0YXJnZXQueiA9IC10aGlzLno7XG4gICAgdGFyZ2V0LncgPSB0aGlzLnc7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogTm9ybWFsaXplIHRoZSBxdWF0ZXJuaW9uLiBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIHRoZSB2YWx1ZXMgb2YgdGhlIHF1YXRlcm5pb24uXG4gICAqL1xuXG5cbiAgbm9ybWFsaXplKCkge1xuICAgIGxldCBsID0gTWF0aC5zcXJ0KHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSArIHRoaXMueiAqIHRoaXMueiArIHRoaXMudyAqIHRoaXMudyk7XG5cbiAgICBpZiAobCA9PT0gMCkge1xuICAgICAgdGhpcy54ID0gMDtcbiAgICAgIHRoaXMueSA9IDA7XG4gICAgICB0aGlzLnogPSAwO1xuICAgICAgdGhpcy53ID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgbCA9IDEgLyBsO1xuICAgICAgdGhpcy54ICo9IGw7XG4gICAgICB0aGlzLnkgKj0gbDtcbiAgICAgIHRoaXMueiAqPSBsO1xuICAgICAgdGhpcy53ICo9IGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgLyoqXG4gICAqIEFwcHJveGltYXRpb24gb2YgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uLiBXb3JrcyBiZXN0IHdoZW4gcXVhdCBpcyBhbHJlYWR5IGFsbW9zdC1ub3JtYWxpemVkLlxuICAgKiBAYXV0aG9yIHVucGhhc2VkLCBodHRwczovL2dpdGh1Yi5jb20vdW5waGFzZWRcbiAgICovXG5cblxuICBub3JtYWxpemVGYXN0KCkge1xuICAgIGNvbnN0IGYgPSAoMy4wIC0gKHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSArIHRoaXMueiAqIHRoaXMueiArIHRoaXMudyAqIHRoaXMudykpIC8gMi4wO1xuXG4gICAgaWYgKGYgPT09IDApIHtcbiAgICAgIHRoaXMueCA9IDA7XG4gICAgICB0aGlzLnkgPSAwO1xuICAgICAgdGhpcy56ID0gMDtcbiAgICAgIHRoaXMudyA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMueCAqPSBmO1xuICAgICAgdGhpcy55ICo9IGY7XG4gICAgICB0aGlzLnogKj0gZjtcbiAgICAgIHRoaXMudyAqPSBmO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBNdWx0aXBseSB0aGUgcXVhdGVybmlvbiBieSBhIHZlY3RvclxuICAgKi9cblxuXG4gIHZtdWx0KHYsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICBjb25zdCB4ID0gdi54O1xuICAgIGNvbnN0IHkgPSB2Lnk7XG4gICAgY29uc3QgeiA9IHYuejtcbiAgICBjb25zdCBxeCA9IHRoaXMueDtcbiAgICBjb25zdCBxeSA9IHRoaXMueTtcbiAgICBjb25zdCBxeiA9IHRoaXMuejtcbiAgICBjb25zdCBxdyA9IHRoaXMudzsgLy8gcSp2XG5cbiAgICBjb25zdCBpeCA9IHF3ICogeCArIHF5ICogeiAtIHF6ICogeTtcbiAgICBjb25zdCBpeSA9IHF3ICogeSArIHF6ICogeCAtIHF4ICogejtcbiAgICBjb25zdCBpeiA9IHF3ICogeiArIHF4ICogeSAtIHF5ICogeDtcbiAgICBjb25zdCBpdyA9IC1xeCAqIHggLSBxeSAqIHkgLSBxeiAqIHo7XG4gICAgdGFyZ2V0LnggPSBpeCAqIHF3ICsgaXcgKiAtcXggKyBpeSAqIC1xeiAtIGl6ICogLXF5O1xuICAgIHRhcmdldC55ID0gaXkgKiBxdyArIGl3ICogLXF5ICsgaXogKiAtcXggLSBpeCAqIC1xejtcbiAgICB0YXJnZXQueiA9IGl6ICogcXcgKyBpdyAqIC1xeiArIGl4ICogLXF5IC0gaXkgKiAtcXg7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogQ29waWVzIHZhbHVlIG9mIHNvdXJjZSB0byB0aGlzIHF1YXRlcm5pb24uXG4gICAqIEByZXR1cm4gdGhpc1xuICAgKi9cblxuXG4gIGNvcHkocXVhdCkge1xuICAgIHRoaXMueCA9IHF1YXQueDtcbiAgICB0aGlzLnkgPSBxdWF0Lnk7XG4gICAgdGhpcy56ID0gcXVhdC56O1xuICAgIHRoaXMudyA9IHF1YXQudztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogQ29udmVydCB0aGUgcXVhdGVybmlvbiB0byBldWxlciBhbmdsZSByZXByZXNlbnRhdGlvbi4gT3JkZXI6IFlaWCwgYXMgdGhpcyBwYWdlIGRlc2NyaWJlczogaHR0cHM6Ly93d3cuZXVjbGlkZWFuc3BhY2UuY29tL21hdGhzL3N0YW5kYXJkcy9pbmRleC5odG1cbiAgICogQHBhcmFtIG9yZGVyIFRocmVlLWNoYXJhY3RlciBzdHJpbmcsIGRlZmF1bHRzIHRvIFwiWVpYXCJcbiAgICovXG5cblxuICB0b0V1bGVyKHRhcmdldCwgb3JkZXIgPSAnWVpYJykge1xuICAgIGxldCBoZWFkaW5nO1xuICAgIGxldCBhdHRpdHVkZTtcbiAgICBsZXQgYmFuaztcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuICAgIGNvbnN0IHkgPSB0aGlzLnk7XG4gICAgY29uc3QgeiA9IHRoaXMuejtcbiAgICBjb25zdCB3ID0gdGhpcy53O1xuXG4gICAgc3dpdGNoIChvcmRlcikge1xuICAgICAgY2FzZSAnWVpYJzpcbiAgICAgICAgY29uc3QgdGVzdCA9IHggKiB5ICsgeiAqIHc7XG5cbiAgICAgICAgaWYgKHRlc3QgPiAwLjQ5OSkge1xuICAgICAgICAgIC8vIHNpbmd1bGFyaXR5IGF0IG5vcnRoIHBvbGVcbiAgICAgICAgICBoZWFkaW5nID0gMiAqIE1hdGguYXRhbjIoeCwgdyk7XG4gICAgICAgICAgYXR0aXR1ZGUgPSBNYXRoLlBJIC8gMjtcbiAgICAgICAgICBiYW5rID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0ZXN0IDwgLTAuNDk5KSB7XG4gICAgICAgICAgLy8gc2luZ3VsYXJpdHkgYXQgc291dGggcG9sZVxuICAgICAgICAgIGhlYWRpbmcgPSAtMiAqIE1hdGguYXRhbjIoeCwgdyk7XG4gICAgICAgICAgYXR0aXR1ZGUgPSAtTWF0aC5QSSAvIDI7XG4gICAgICAgICAgYmFuayA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGVhZGluZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29uc3Qgc3F4ID0geCAqIHg7XG4gICAgICAgICAgY29uc3Qgc3F5ID0geSAqIHk7XG4gICAgICAgICAgY29uc3Qgc3F6ID0geiAqIHo7XG4gICAgICAgICAgaGVhZGluZyA9IE1hdGguYXRhbjIoMiAqIHkgKiB3IC0gMiAqIHggKiB6LCAxIC0gMiAqIHNxeSAtIDIgKiBzcXopOyAvLyBIZWFkaW5nXG5cbiAgICAgICAgICBhdHRpdHVkZSA9IE1hdGguYXNpbigyICogdGVzdCk7IC8vIGF0dGl0dWRlXG5cbiAgICAgICAgICBiYW5rID0gTWF0aC5hdGFuMigyICogeCAqIHcgLSAyICogeSAqIHosIDEgLSAyICogc3F4IC0gMiAqIHNxeik7IC8vIGJhbmtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFdWxlciBvcmRlciBcIiArIG9yZGVyICsgXCIgbm90IHN1cHBvcnRlZCB5ZXQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC55ID0gaGVhZGluZztcbiAgICB0YXJnZXQueiA9IGF0dGl0dWRlO1xuICAgIHRhcmdldC54ID0gYmFuaztcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIG9yZGVyIFRoZSBvcmRlciB0byBhcHBseSBhbmdsZXM6ICdYWVonIG9yICdZWFonIG9yIGFueSBvdGhlciBjb21iaW5hdGlvbi5cbiAgICpcbiAgICogU2VlIHtAbGluayBodHRwczovL3d3dy5tYXRod29ya3MuY29tL21hdGxhYmNlbnRyYWwvZmlsZWV4Y2hhbmdlLzIwNjk2LWZ1bmN0aW9uLXRvLWNvbnZlcnQtYmV0d2Vlbi1kY20tZXVsZXItYW5nbGVzLXF1YXRlcm5pb25zLWFuZC1ldWxlci12ZWN0b3JzIE1hdGhXb3Jrc30gcmVmZXJlbmNlXG4gICAqL1xuXG5cbiAgc2V0RnJvbUV1bGVyKHgsIHksIHosIG9yZGVyID0gJ1hZWicpIHtcbiAgICBjb25zdCBjMSA9IE1hdGguY29zKHggLyAyKTtcbiAgICBjb25zdCBjMiA9IE1hdGguY29zKHkgLyAyKTtcbiAgICBjb25zdCBjMyA9IE1hdGguY29zKHogLyAyKTtcbiAgICBjb25zdCBzMSA9IE1hdGguc2luKHggLyAyKTtcbiAgICBjb25zdCBzMiA9IE1hdGguc2luKHkgLyAyKTtcbiAgICBjb25zdCBzMyA9IE1hdGguc2luKHogLyAyKTtcblxuICAgIGlmIChvcmRlciA9PT0gJ1hZWicpIHtcbiAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyArIGMxICogczIgKiBzMztcbiAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMztcbiAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyArIHMxICogczIgKiBjMztcbiAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMztcbiAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWVhaJykge1xuICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzO1xuICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzIC0gczEgKiBjMiAqIHMzO1xuICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzIC0gczEgKiBzMiAqIGMzO1xuICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzO1xuICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdaWFknKSB7XG4gICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7XG4gICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgKyBzMSAqIGMyICogczM7XG4gICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgKyBzMSAqIHMyICogYzM7XG4gICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7XG4gICAgfSBlbHNlIGlmIChvcmRlciA9PT0gJ1pZWCcpIHtcbiAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMztcbiAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyArIHMxICogYzIgKiBzMztcbiAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMztcbiAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMztcbiAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWVpYJykge1xuICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzO1xuICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzICsgczEgKiBjMiAqIHMzO1xuICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzIC0gczEgKiBzMiAqIGMzO1xuICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzIC0gczEgKiBzMiAqIHMzO1xuICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdYWlknKSB7XG4gICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7XG4gICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7XG4gICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgKyBzMSAqIHMyICogYzM7XG4gICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBjbG9uZSgpIHtcbiAgICByZXR1cm4gbmV3IFF1YXRlcm5pb24odGhpcy54LCB0aGlzLnksIHRoaXMueiwgdGhpcy53KTtcbiAgfVxuICAvKipcbiAgICogUGVyZm9ybXMgYSBzcGhlcmljYWwgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gcXVhdFxuICAgKlxuICAgKiBAcGFyYW0gdG9RdWF0IHNlY29uZCBvcGVyYW5kXG4gICAqIEBwYXJhbSB0IGludGVycG9sYXRpb24gYW1vdW50IGJldHdlZW4gdGhlIHNlbGYgcXVhdGVybmlvbiBhbmQgdG9RdWF0XG4gICAqIEBwYXJhbSB0YXJnZXQgQSBxdWF0ZXJuaW9uIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uIElmIG5vdCBwcm92aWRlZCwgYSBuZXcgb25lIHdpbGwgYmUgY3JlYXRlZC5cbiAgICogQHJldHVybnMge1F1YXRlcm5pb259IFRoZSBcInRhcmdldFwiIG9iamVjdFxuICAgKi9cblxuXG4gIHNsZXJwKHRvUXVhdCwgdCwgdGFyZ2V0ID0gbmV3IFF1YXRlcm5pb24oKSkge1xuICAgIGNvbnN0IGF4ID0gdGhpcy54O1xuICAgIGNvbnN0IGF5ID0gdGhpcy55O1xuICAgIGNvbnN0IGF6ID0gdGhpcy56O1xuICAgIGNvbnN0IGF3ID0gdGhpcy53O1xuICAgIGxldCBieCA9IHRvUXVhdC54O1xuICAgIGxldCBieSA9IHRvUXVhdC55O1xuICAgIGxldCBieiA9IHRvUXVhdC56O1xuICAgIGxldCBidyA9IHRvUXVhdC53O1xuICAgIGxldCBvbWVnYTtcbiAgICBsZXQgY29zb207XG4gICAgbGV0IHNpbm9tO1xuICAgIGxldCBzY2FsZTA7XG4gICAgbGV0IHNjYWxlMTsgLy8gY2FsYyBjb3NpbmVcblxuICAgIGNvc29tID0gYXggKiBieCArIGF5ICogYnkgKyBheiAqIGJ6ICsgYXcgKiBidzsgLy8gYWRqdXN0IHNpZ25zIChpZiBuZWNlc3NhcnkpXG5cbiAgICBpZiAoY29zb20gPCAwLjApIHtcbiAgICAgIGNvc29tID0gLWNvc29tO1xuICAgICAgYnggPSAtYng7XG4gICAgICBieSA9IC1ieTtcbiAgICAgIGJ6ID0gLWJ6O1xuICAgICAgYncgPSAtYnc7XG4gICAgfSAvLyBjYWxjdWxhdGUgY29lZmZpY2llbnRzXG5cblxuICAgIGlmICgxLjAgLSBjb3NvbSA+IDAuMDAwMDAxKSB7XG4gICAgICAvLyBzdGFuZGFyZCBjYXNlIChzbGVycClcbiAgICAgIG9tZWdhID0gTWF0aC5hY29zKGNvc29tKTtcbiAgICAgIHNpbm9tID0gTWF0aC5zaW4ob21lZ2EpO1xuICAgICAgc2NhbGUwID0gTWF0aC5zaW4oKDEuMCAtIHQpICogb21lZ2EpIC8gc2lub207XG4gICAgICBzY2FsZTEgPSBNYXRoLnNpbih0ICogb21lZ2EpIC8gc2lub207XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFwiZnJvbVwiIGFuZCBcInRvXCIgcXVhdGVybmlvbnMgYXJlIHZlcnkgY2xvc2VcbiAgICAgIC8vICAuLi4gc28gd2UgY2FuIGRvIGEgbGluZWFyIGludGVycG9sYXRpb25cbiAgICAgIHNjYWxlMCA9IDEuMCAtIHQ7XG4gICAgICBzY2FsZTEgPSB0O1xuICAgIH0gLy8gY2FsY3VsYXRlIGZpbmFsIHZhbHVlc1xuXG5cbiAgICB0YXJnZXQueCA9IHNjYWxlMCAqIGF4ICsgc2NhbGUxICogYng7XG4gICAgdGFyZ2V0LnkgPSBzY2FsZTAgKiBheSArIHNjYWxlMSAqIGJ5O1xuICAgIHRhcmdldC56ID0gc2NhbGUwICogYXogKyBzY2FsZTEgKiBiejtcbiAgICB0YXJnZXQudyA9IHNjYWxlMCAqIGF3ICsgc2NhbGUxICogYnc7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogUm90YXRlIGFuIGFic29sdXRlIG9yaWVudGF0aW9uIHF1YXRlcm5pb24gZ2l2ZW4gYW4gYW5ndWxhciB2ZWxvY2l0eSBhbmQgYSB0aW1lIHN0ZXAuXG4gICAqL1xuXG5cbiAgaW50ZWdyYXRlKGFuZ3VsYXJWZWxvY2l0eSwgZHQsIGFuZ3VsYXJGYWN0b3IsIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCkpIHtcbiAgICBjb25zdCBheCA9IGFuZ3VsYXJWZWxvY2l0eS54ICogYW5ndWxhckZhY3Rvci54LFxuICAgICAgICAgIGF5ID0gYW5ndWxhclZlbG9jaXR5LnkgKiBhbmd1bGFyRmFjdG9yLnksXG4gICAgICAgICAgYXogPSBhbmd1bGFyVmVsb2NpdHkueiAqIGFuZ3VsYXJGYWN0b3IueixcbiAgICAgICAgICBieCA9IHRoaXMueCxcbiAgICAgICAgICBieSA9IHRoaXMueSxcbiAgICAgICAgICBieiA9IHRoaXMueixcbiAgICAgICAgICBidyA9IHRoaXMudztcbiAgICBjb25zdCBoYWxmX2R0ID0gZHQgKiAwLjU7XG4gICAgdGFyZ2V0LnggKz0gaGFsZl9kdCAqIChheCAqIGJ3ICsgYXkgKiBieiAtIGF6ICogYnkpO1xuICAgIHRhcmdldC55ICs9IGhhbGZfZHQgKiAoYXkgKiBidyArIGF6ICogYnggLSBheCAqIGJ6KTtcbiAgICB0YXJnZXQueiArPSBoYWxmX2R0ICogKGF6ICogYncgKyBheCAqIGJ5IC0gYXkgKiBieCk7XG4gICAgdGFyZ2V0LncgKz0gaGFsZl9kdCAqICgtYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6KTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbn1cbmNvbnN0IHNmdl90MSA9IG5ldyBWZWMzKCk7XG5jb25zdCBzZnZfdDIgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIFRoZSBhdmFpbGFibGUgc2hhcGUgdHlwZXMuXG4gKi9cbmNvbnN0IFNIQVBFX1RZUEVTID0ge1xuICAvKiogU1BIRVJFICovXG4gIFNQSEVSRTogMSxcblxuICAvKiogUExBTkUgKi9cbiAgUExBTkU6IDIsXG5cbiAgLyoqIEJPWCAqL1xuICBCT1g6IDQsXG5cbiAgLyoqIENPTVBPVU5EICovXG4gIENPTVBPVU5EOiA4LFxuXG4gIC8qKiBDT05WRVhQT0xZSEVEUk9OICovXG4gIENPTlZFWFBPTFlIRURST046IDE2LFxuXG4gIC8qKiBIRUlHSFRGSUVMRCAqL1xuICBIRUlHSFRGSUVMRDogMzIsXG5cbiAgLyoqIFBBUlRJQ0xFICovXG4gIFBBUlRJQ0xFOiA2NCxcblxuICAvKiogQ1lMSU5ERVIgKi9cbiAgQ1lMSU5ERVI6IDEyOCxcblxuICAvKiogVFJJTUVTSCAqL1xuICBUUklNRVNIOiAyNTZcbn07XG4vKipcbiAqIFNoYXBlVHlwZVxuICovXG5cbi8qKlxuICogQmFzZSBjbGFzcyBmb3Igc2hhcGVzXG4gKi9cbmNsYXNzIFNoYXBlIHtcbiAgLyoqXG4gICAqIElkZW50aWZpZXIgb2YgdGhlIFNoYXBlLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIHR5cGUgb2YgdGhpcyBzaGFwZS4gTXVzdCBiZSBzZXQgdG8gYW4gaW50ID4gMCBieSBzdWJjbGFzc2VzLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGxvY2FsIGJvdW5kaW5nIHNwaGVyZSByYWRpdXMgb2YgdGhpcyBzaGFwZS5cbiAgICovXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gcHJvZHVjZSBjb250YWN0IGZvcmNlcyB3aGVuIGluIGNvbnRhY3Qgd2l0aCBvdGhlciBib2RpZXMuIE5vdGUgdGhhdCBjb250YWN0cyB3aWxsIGJlIGdlbmVyYXRlZCwgYnV0IHRoZXkgd2lsbCBiZSBkaXNhYmxlZC5cbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cblxuICAvKipcbiAgICogQGRlZmF1bHQgMVxuICAgKi9cblxuICAvKipcbiAgICogQGRlZmF1bHQgLTFcbiAgICovXG5cbiAgLyoqXG4gICAqIE9wdGlvbmFsIG1hdGVyaWFsIG9mIHRoZSBzaGFwZSB0aGF0IHJlZ3VsYXRlcyBjb250YWN0IHByb3BlcnRpZXMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgYm9keSB0byB3aGljaCB0aGUgc2hhcGUgaXMgYWRkZWQgdG8uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbGwgdGhlIFNoYXBlIHR5cGVzLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5pZCA9IHZvaWQgMDtcbiAgICB0aGlzLnR5cGUgPSB2b2lkIDA7XG4gICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbGxpc2lvblJlc3BvbnNlID0gdm9pZCAwO1xuICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB2b2lkIDA7XG4gICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gdm9pZCAwO1xuICAgIHRoaXMubWF0ZXJpYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5ib2R5ID0gdm9pZCAwO1xuICAgIHRoaXMuaWQgPSBTaGFwZS5pZENvdW50ZXIrKztcbiAgICB0aGlzLnR5cGUgPSBvcHRpb25zLnR5cGUgfHwgMDtcbiAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gMDtcbiAgICB0aGlzLmNvbGxpc2lvblJlc3BvbnNlID0gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA/IG9wdGlvbnMuY29sbGlzaW9uUmVzcG9uc2UgOiB0cnVlO1xuICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTtcbiAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xO1xuICAgIHRoaXMubWF0ZXJpYWwgPSBvcHRpb25zLm1hdGVyaWFsID8gb3B0aW9ucy5tYXRlcmlhbCA6IG51bGw7XG4gICAgdGhpcy5ib2R5ID0gbnVsbDtcbiAgfVxuICAvKipcbiAgICogQ29tcHV0ZXMgdGhlIGJvdW5kaW5nIHNwaGVyZSByYWRpdXMuXG4gICAqIFRoZSByZXN1bHQgaXMgc3RvcmVkIGluIHRoZSBwcm9wZXJ0eSBgLmJvdW5kaW5nU3BoZXJlUmFkaXVzYFxuICAgKi9cblxuXG4gIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkge1xuICAgIHRocm93IFwiY29tcHV0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlIFwiICsgdGhpcy50eXBlO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHZvbHVtZSBvZiB0aGlzIHNoYXBlXG4gICAqL1xuXG5cbiAgdm9sdW1lKCkge1xuICAgIHRocm93IFwidm9sdW1lKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlIFwiICsgdGhpcy50eXBlO1xuICB9XG4gIC8qKlxuICAgKiBDYWxjdWxhdGVzIHRoZSBpbmVydGlhIGluIHRoZSBsb2NhbCBmcmFtZSBmb3IgdGhpcyBzaGFwZS5cbiAgICogQHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbW9tZW50c19vZl9pbmVydGlhXG4gICAqL1xuXG5cbiAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkge1xuICAgIHRocm93IFwiY2FsY3VsYXRlTG9jYWxJbmVydGlhKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlIFwiICsgdGhpcy50eXBlO1xuICB9XG4gIC8qKlxuICAgKiBAdG9kbyB1c2UgYWJzdHJhY3QgZm9yIHRoZXNlIGtpbmQgb2YgbWV0aG9kc1xuICAgKi9cblxuXG4gIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7XG4gICAgdGhyb3cgXCJjYWxjdWxhdGVXb3JsZEFBQkIoKSBub3QgaW1wbGVtZW50ZWQgZm9yIHNoYXBlIHR5cGUgXCIgKyB0aGlzLnR5cGU7XG4gIH1cblxufVxuU2hhcGUuaWRDb3VudGVyID0gMDtcblNoYXBlLnR5cGVzID0gU0hBUEVfVFlQRVM7XG5cbi8qKlxuICogVHJhbnNmb3JtYXRpb24gdXRpbGl0aWVzLlxuICovXG5jbGFzcyBUcmFuc2Zvcm0ge1xuICAvKipcbiAgICogcG9zaXRpb25cbiAgICovXG5cbiAgLyoqXG4gICAqIHF1YXRlcm5pb25cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMucG9zaXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5xdWF0ZXJuaW9uID0gdm9pZCAwO1xuICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMygpO1xuICAgIHRoaXMucXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5cbiAgICBpZiAob3B0aW9ucy5wb3NpdGlvbikge1xuICAgICAgdGhpcy5wb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnF1YXRlcm5pb24pIHtcbiAgICAgIHRoaXMucXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgYSBnbG9iYWwgcG9pbnQgaW4gbG9jYWwgdHJhbnNmb3JtIGNvb3JkaW5hdGVzLlxuICAgKi9cblxuXG4gIHBvaW50VG9Mb2NhbCh3b3JsZFBvaW50LCByZXN1bHQpIHtcbiAgICByZXR1cm4gVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHRoaXMucG9zaXRpb24sIHRoaXMucXVhdGVybmlvbiwgd29ybGRQb2ludCwgcmVzdWx0KTtcbiAgfVxuICAvKipcbiAgICogR2V0IGEgbG9jYWwgcG9pbnQgaW4gZ2xvYmFsIHRyYW5zZm9ybSBjb29yZGluYXRlcy5cbiAgICovXG5cblxuICBwb2ludFRvV29ybGQobG9jYWxQb2ludCwgcmVzdWx0KSB7XG4gICAgcmV0dXJuIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0aGlzLnBvc2l0aW9uLCB0aGlzLnF1YXRlcm5pb24sIGxvY2FsUG9pbnQsIHJlc3VsdCk7XG4gIH1cbiAgLyoqXG4gICAqIHZlY3RvclRvV29ybGRGcmFtZVxuICAgKi9cblxuXG4gIHZlY3RvclRvV29ybGRGcmFtZShsb2NhbFZlY3RvciwgcmVzdWx0ID0gbmV3IFZlYzMoKSkge1xuICAgIHRoaXMucXVhdGVybmlvbi52bXVsdChsb2NhbFZlY3RvciwgcmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIC8qKlxuICAgKiBwb2ludFRvTG9jYWxGcmFtZVxuICAgKi9cblxuXG4gIHN0YXRpYyBwb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdGVybmlvbiwgd29ybGRQb2ludCwgcmVzdWx0ID0gbmV3IFZlYzMoKSkge1xuICAgIHdvcmxkUG9pbnQudnN1Yihwb3NpdGlvbiwgcmVzdWx0KTtcbiAgICBxdWF0ZXJuaW9uLmNvbmp1Z2F0ZSh0bXBRdWF0JDEpO1xuICAgIHRtcFF1YXQkMS52bXVsdChyZXN1bHQsIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogcG9pbnRUb1dvcmxkRnJhbWVcbiAgICovXG5cblxuICBzdGF0aWMgcG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXRlcm5pb24sIGxvY2FsUG9pbnQsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHtcbiAgICBxdWF0ZXJuaW9uLnZtdWx0KGxvY2FsUG9pbnQsIHJlc3VsdCk7XG4gICAgcmVzdWx0LnZhZGQocG9zaXRpb24sIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogdmVjdG9yVG9Xb3JsZEZyYW1lXG4gICAqL1xuXG5cbiAgc3RhdGljIHZlY3RvclRvV29ybGRGcmFtZShxdWF0ZXJuaW9uLCBsb2NhbFZlY3RvciwgcmVzdWx0ID0gbmV3IFZlYzMoKSkge1xuICAgIHF1YXRlcm5pb24udm11bHQobG9jYWxWZWN0b3IsIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogdmVjdG9yVG9Mb2NhbEZyYW1lXG4gICAqL1xuXG5cbiAgc3RhdGljIHZlY3RvclRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdGVybmlvbiwgd29ybGRWZWN0b3IsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHtcbiAgICBxdWF0ZXJuaW9uLncgKj0gLTE7XG4gICAgcXVhdGVybmlvbi52bXVsdCh3b3JsZFZlY3RvciwgcmVzdWx0KTtcbiAgICBxdWF0ZXJuaW9uLncgKj0gLTE7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG59XG5jb25zdCB0bXBRdWF0JDEgPSBuZXcgUXVhdGVybmlvbigpO1xuXG4vKipcbiAqIEEgc2V0IG9mIHBvbHlnb25zIGRlc2NyaWJpbmcgYSBjb252ZXggc2hhcGUuXG4gKlxuICogVGhlIHNoYXBlIE1VU1QgYmUgY29udmV4IGZvciB0aGUgY29kZSB0byB3b3JrIHByb3Blcmx5LiBObyBwb2x5Z29ucyBtYXkgYmUgY29wbGFuYXIgKGNvbnRhaW5lZFxuICogaW4gdGhlIHNhbWUgM0QgcGxhbmUpLCBpbnN0ZWFkIHRoZXNlIHNob3VsZCBiZSBtZXJnZWQgaW50byBvbmUgcG9seWdvbi5cbiAqXG4gKiBAYXV0aG9yIHFpYW8gLyBodHRwczovL2dpdGh1Yi5jb20vcWlhbyAob3JpZ2luYWwgYXV0aG9yLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3FpYW8vdGhyZWUuanMvY29tbWl0Lzg1MDI2ZjBjNzY5ZTQwMDAxNDhhNjdkNDVhOWU5YjljNTEwODgzNmYpXG4gKiBAYXV0aG9yIHNjaHRlcHBlIC8gaHR0cHM6Ly9naXRodWIuY29tL3NjaHRlcHBlXG4gKiBAc2VlIGh0dHBzOi8vd3d3LmFsdGRldmJsb2dhZGF5LmNvbS8yMDExLzA1LzEzL2NvbnRhY3QtZ2VuZXJhdGlvbi1iZXR3ZWVuLTNkLWNvbnZleC1tZXNoZXMvXG4gKlxuICogQHRvZG8gTW92ZSB0aGUgY2xpcHBpbmcgZnVuY3Rpb25zIHRvIENvbnRhY3RHZW5lcmF0b3I/XG4gKiBAdG9kbyBBdXRvbWF0aWNhbGx5IG1lcmdlIGNvcGxhbmFyIHBvbHlnb25zIGluIGNvbnN0cnVjdG9yLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBjb252ZXhTaGFwZSA9IG5ldyBDQU5OT04uQ29udmV4UG9seWhlZHJvbih7IHZlcnRpY2VzLCBmYWNlcyB9KVxuICogICAgIGNvbnN0IGNvbnZleEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY29udmV4U2hhcGUgfSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KGNvbnZleEJvZHkpXG4gKi9cbmNsYXNzIENvbnZleFBvbHloZWRyb24gZXh0ZW5kcyBTaGFwZSB7XG4gIC8qKiB2ZXJ0aWNlcyAqL1xuXG4gIC8qKlxuICAgKiBBcnJheSBvZiBpbnRlZ2VyIGFycmF5cywgaW5kaWNhdGluZyB3aGljaCB2ZXJ0aWNlcyBlYWNoIGZhY2UgY29uc2lzdHMgb2ZcbiAgICovXG5cbiAgLyoqIGZhY2VOb3JtYWxzICovXG5cbiAgLyoqIHdvcmxkVmVydGljZXMgKi9cblxuICAvKiogd29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlICovXG5cbiAgLyoqIHdvcmxkRmFjZU5vcm1hbHMgKi9cblxuICAvKiogd29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlICovXG5cbiAgLyoqXG4gICAqIElmIGdpdmVuLCB0aGVzZSBsb2NhbGx5IGRlZmluZWQsIG5vcm1hbGl6ZWQgYXhlcyBhcmUgdGhlIG9ubHkgb25lcyBiZWluZyBjaGVja2VkIHdoZW4gZG9pbmcgc2VwYXJhdGluZyBheGlzIGNoZWNrLlxuICAgKi9cblxuICAvKiogdW5pcXVlRWRnZXMgKi9cblxuICAvKipcbiAgICogQHBhcmFtIHZlcnRpY2VzIEFuIGFycmF5IG9mIFZlYzMnc1xuICAgKiBAcGFyYW0gZmFjZXMgQXJyYXkgb2YgaW50ZWdlciBhcnJheXMsIGRlc2NyaWJpbmcgd2hpY2ggdmVydGljZXMgdGhhdCBpcyBpbmNsdWRlZCBpbiBlYWNoIGZhY2UuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwcm9wcyA9IHt9KSB7XG4gICAgY29uc3Qge1xuICAgICAgdmVydGljZXMgPSBbXSxcbiAgICAgIGZhY2VzID0gW10sXG4gICAgICBub3JtYWxzID0gW10sXG4gICAgICBheGVzLFxuICAgICAgYm91bmRpbmdTcGhlcmVSYWRpdXNcbiAgICB9ID0gcHJvcHM7XG4gICAgc3VwZXIoe1xuICAgICAgdHlwZTogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTlxuICAgIH0pO1xuICAgIHRoaXMudmVydGljZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5mYWNlcyA9IHZvaWQgMDtcbiAgICB0aGlzLmZhY2VOb3JtYWxzID0gdm9pZCAwO1xuICAgIHRoaXMud29ybGRWZXJ0aWNlcyA9IHZvaWQgMDtcbiAgICB0aGlzLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSA9IHZvaWQgMDtcbiAgICB0aGlzLndvcmxkRmFjZU5vcm1hbHMgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB2b2lkIDA7XG4gICAgdGhpcy51bmlxdWVBeGVzID0gdm9pZCAwO1xuICAgIHRoaXMudW5pcXVlRWRnZXMgPSB2b2lkIDA7XG4gICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzO1xuICAgIHRoaXMuZmFjZXMgPSBmYWNlcztcbiAgICB0aGlzLmZhY2VOb3JtYWxzID0gbm9ybWFscztcblxuICAgIGlmICh0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5jb21wdXRlTm9ybWFscygpO1xuICAgIH1cblxuICAgIGlmICghYm91bmRpbmdTcGhlcmVSYWRpdXMpIHtcbiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IGJvdW5kaW5nU3BoZXJlUmFkaXVzO1xuICAgIH1cblxuICAgIHRoaXMud29ybGRWZXJ0aWNlcyA9IFtdOyAvLyBXb3JsZCB0cmFuc2Zvcm1lZCB2ZXJzaW9uIG9mIC52ZXJ0aWNlc1xuXG4gICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIHRoaXMud29ybGRGYWNlTm9ybWFscyA9IFtdOyAvLyBXb3JsZCB0cmFuc2Zvcm1lZCB2ZXJzaW9uIG9mIC5mYWNlTm9ybWFsc1xuXG4gICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIHRoaXMudW5pcXVlQXhlcyA9IGF4ZXMgPyBheGVzLnNsaWNlKCkgOiBudWxsO1xuICAgIHRoaXMudW5pcXVlRWRnZXMgPSBbXTtcbiAgICB0aGlzLmNvbXB1dGVFZGdlcygpO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlcyB1bmlxdWVFZGdlc1xuICAgKi9cblxuXG4gIGNvbXB1dGVFZGdlcygpIHtcbiAgICBjb25zdCBmYWNlcyA9IHRoaXMuZmFjZXM7XG4gICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzO1xuICAgIGNvbnN0IGVkZ2VzID0gdGhpcy51bmlxdWVFZGdlcztcbiAgICBlZGdlcy5sZW5ndGggPSAwO1xuICAgIGNvbnN0IGVkZ2UgPSBuZXcgVmVjMygpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGZhY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBmYWNlID0gZmFjZXNbaV07XG4gICAgICBjb25zdCBudW1WZXJ0aWNlcyA9IGZhY2UubGVuZ3RoO1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gbnVtVmVydGljZXM7IGorKykge1xuICAgICAgICBjb25zdCBrID0gKGogKyAxKSAlIG51bVZlcnRpY2VzO1xuICAgICAgICB2ZXJ0aWNlc1tmYWNlW2pdXS52c3ViKHZlcnRpY2VzW2ZhY2Vba11dLCBlZGdlKTtcbiAgICAgICAgZWRnZS5ub3JtYWxpemUoKTtcbiAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG5cbiAgICAgICAgZm9yIChsZXQgcCA9IDA7IHAgIT09IGVkZ2VzLmxlbmd0aDsgcCsrKSB7XG4gICAgICAgICAgaWYgKGVkZ2VzW3BdLmFsbW9zdEVxdWFscyhlZGdlKSB8fCBlZGdlc1twXS5hbG1vc3RFcXVhbHMoZWRnZSkpIHtcbiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZm91bmQpIHtcbiAgICAgICAgICBlZGdlcy5wdXNoKGVkZ2UuY2xvbmUoKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGUgdGhlIG5vcm1hbHMgb2YgdGhlIGZhY2VzLlxuICAgKiBXaWxsIHJldXNlIGV4aXN0aW5nIFZlYzMgb2JqZWN0cyBpbiB0aGUgYGZhY2VOb3JtYWxzYCBhcnJheSBpZiB0aGV5IGV4aXN0LlxuICAgKi9cblxuXG4gIGNvbXB1dGVOb3JtYWxzKCkge1xuICAgIHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoID0gdGhpcy5mYWNlcy5sZW5ndGg7IC8vIEdlbmVyYXRlIG5vcm1hbHNcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mYWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gQ2hlY2sgc28gYWxsIHZlcnRpY2VzIGV4aXN0cyBmb3IgdGhpcyBmYWNlXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZmFjZXNbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKCF0aGlzLnZlcnRpY2VzW3RoaXMuZmFjZXNbaV1bal1dKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmVydGV4IFwiICsgdGhpcy5mYWNlc1tpXVtqXSArIFwiIG5vdCBmb3VuZCFcIik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgbiA9IHRoaXMuZmFjZU5vcm1hbHNbaV0gfHwgbmV3IFZlYzMoKTtcbiAgICAgIHRoaXMuZ2V0RmFjZU5vcm1hbChpLCBuKTtcbiAgICAgIG4ubmVnYXRlKG4pO1xuICAgICAgdGhpcy5mYWNlTm9ybWFsc1tpXSA9IG47XG4gICAgICBjb25zdCB2ZXJ0ZXggPSB0aGlzLnZlcnRpY2VzW3RoaXMuZmFjZXNbaV1bMF1dO1xuXG4gICAgICBpZiAobi5kb3QodmVydGV4KSA8IDApIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIi5mYWNlTm9ybWFsc1tcIiArIGkgKyBcIl0gPSBWZWMzKFwiICsgbi50b1N0cmluZygpICsgXCIpIGxvb2tzIGxpa2UgaXQgcG9pbnRzIGludG8gdGhlIHNoYXBlPyBUaGUgdmVydGljZXMgZm9sbG93LiBNYWtlIHN1cmUgdGhleSBhcmUgb3JkZXJlZCBDQ1cgYXJvdW5kIHRoZSBub3JtYWwsIHVzaW5nIHRoZSByaWdodCBoYW5kIHJ1bGUuXCIpO1xuXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5mYWNlc1tpXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgIGNvbnNvbGUud2FybihcIi52ZXJ0aWNlc1tcIiArIHRoaXMuZmFjZXNbaV1bal0gKyBcIl0gPSBWZWMzKFwiICsgdGhpcy52ZXJ0aWNlc1t0aGlzLmZhY2VzW2ldW2pdXS50b1N0cmluZygpICsgXCIpXCIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlIHRoZSBub3JtYWwgb2YgYSBmYWNlIGZyb20gaXRzIHZlcnRpY2VzXG4gICAqL1xuXG5cbiAgZ2V0RmFjZU5vcm1hbChpLCB0YXJnZXQpIHtcbiAgICBjb25zdCBmID0gdGhpcy5mYWNlc1tpXTtcbiAgICBjb25zdCB2YSA9IHRoaXMudmVydGljZXNbZlswXV07XG4gICAgY29uc3QgdmIgPSB0aGlzLnZlcnRpY2VzW2ZbMV1dO1xuICAgIGNvbnN0IHZjID0gdGhpcy52ZXJ0aWNlc1tmWzJdXTtcbiAgICBDb252ZXhQb2x5aGVkcm9uLmNvbXB1dGVOb3JtYWwodmEsIHZiLCB2YywgdGFyZ2V0KTtcbiAgfVxuICAvKipcbiAgICogR2V0IGZhY2Ugbm9ybWFsIGdpdmVuIDMgdmVydGljZXNcbiAgICovXG5cblxuICBzdGF0aWMgY29tcHV0ZU5vcm1hbCh2YSwgdmIsIHZjLCB0YXJnZXQpIHtcbiAgICBjb25zdCBjYiA9IG5ldyBWZWMzKCk7XG4gICAgY29uc3QgYWIgPSBuZXcgVmVjMygpO1xuICAgIHZiLnZzdWIodmEsIGFiKTtcbiAgICB2Yy52c3ViKHZiLCBjYik7XG4gICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7XG5cbiAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkge1xuICAgICAgdGFyZ2V0Lm5vcm1hbGl6ZSgpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQHBhcmFtIG1pbkRpc3QgQ2xhbXAgZGlzdGFuY2VcbiAgICogQHBhcmFtIHJlc3VsdCBUaGUgYW4gYXJyYXkgb2YgY29udGFjdCBwb2ludCBvYmplY3RzLCBzZWUgY2xpcEZhY2VBZ2FpbnN0SHVsbFxuICAgKi9cblxuXG4gIGNsaXBBZ2FpbnN0SHVsbChwb3NBLCBxdWF0QSwgaHVsbEIsIHBvc0IsIHF1YXRCLCBzZXBhcmF0aW5nTm9ybWFsLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpIHtcbiAgICBjb25zdCBXb3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7XG4gICAgbGV0IGNsb3Nlc3RGYWNlQiA9IC0xO1xuICAgIGxldCBkbWF4ID0gLU51bWJlci5NQVhfVkFMVUU7XG5cbiAgICBmb3IgKGxldCBmYWNlID0gMDsgZmFjZSA8IGh1bGxCLmZhY2VzLmxlbmd0aDsgZmFjZSsrKSB7XG4gICAgICBXb3JsZE5vcm1hbC5jb3B5KGh1bGxCLmZhY2VOb3JtYWxzW2ZhY2VdKTtcbiAgICAgIHF1YXRCLnZtdWx0KFdvcmxkTm9ybWFsLCBXb3JsZE5vcm1hbCk7XG4gICAgICBjb25zdCBkID0gV29ybGROb3JtYWwuZG90KHNlcGFyYXRpbmdOb3JtYWwpO1xuXG4gICAgICBpZiAoZCA+IGRtYXgpIHtcbiAgICAgICAgZG1heCA9IGQ7XG4gICAgICAgIGNsb3Nlc3RGYWNlQiA9IGZhY2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgd29ybGRWZXJ0c0IxID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGh1bGxCLmZhY2VzW2Nsb3Nlc3RGYWNlQl0ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGIgPSBodWxsQi52ZXJ0aWNlc1todWxsQi5mYWNlc1tjbG9zZXN0RmFjZUJdW2ldXTtcbiAgICAgIGNvbnN0IHdvcmxkYiA9IG5ldyBWZWMzKCk7XG4gICAgICB3b3JsZGIuY29weShiKTtcbiAgICAgIHF1YXRCLnZtdWx0KHdvcmxkYiwgd29ybGRiKTtcbiAgICAgIHBvc0IudmFkZCh3b3JsZGIsIHdvcmxkYik7XG4gICAgICB3b3JsZFZlcnRzQjEucHVzaCh3b3JsZGIpO1xuICAgIH1cblxuICAgIGlmIChjbG9zZXN0RmFjZUIgPj0gMCkge1xuICAgICAgdGhpcy5jbGlwRmFjZUFnYWluc3RIdWxsKHNlcGFyYXRpbmdOb3JtYWwsIHBvc0EsIHF1YXRBLCB3b3JsZFZlcnRzQjEsIG1pbkRpc3QsIG1heERpc3QsIHJlc3VsdCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBGaW5kIHRoZSBzZXBhcmF0aW5nIGF4aXMgYmV0d2VlbiB0aGlzIGh1bGwgYW5kIGFub3RoZXJcbiAgICogQHBhcmFtIHRhcmdldCBUaGUgdGFyZ2V0IHZlY3RvciB0byBzYXZlIHRoZSBheGlzIGluXG4gICAqIEByZXR1cm4gUmV0dXJucyBmYWxzZSBpZiBhIHNlcGFyYXRpb24gaXMgZm91bmQsIGVsc2UgdHJ1ZVxuICAgKi9cblxuXG4gIGZpbmRTZXBhcmF0aW5nQXhpcyhodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCLCB0YXJnZXQsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSB7XG4gICAgY29uc3QgZmFjZUFOb3JtYWxXUzMgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IFdvcmxkbm9ybWFsMSA9IG5ldyBWZWMzKCk7XG4gICAgY29uc3QgZGVsdGFDID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCB3b3JsZEVkZ2UwID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCB3b3JsZEVkZ2UxID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBDcm9zcyA9IG5ldyBWZWMzKCk7XG4gICAgbGV0IGRtaW4gPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICAgIGNvbnN0IGh1bGxBID0gdGhpcztcblxuICAgIGlmICghaHVsbEEudW5pcXVlQXhlcykge1xuICAgICAgY29uc3QgbnVtRmFjZXNBID0gZmFjZUxpc3RBID8gZmFjZUxpc3RBLmxlbmd0aCA6IGh1bGxBLmZhY2VzLmxlbmd0aDsgLy8gVGVzdCBmYWNlIG5vcm1hbHMgZnJvbSBodWxsQVxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZpID0gZmFjZUxpc3RBID8gZmFjZUxpc3RBW2ldIDogaTsgLy8gR2V0IHdvcmxkIGZhY2Ugbm9ybWFsXG5cbiAgICAgICAgZmFjZUFOb3JtYWxXUzMuY29weShodWxsQS5mYWNlTm9ybWFsc1tmaV0pO1xuICAgICAgICBxdWF0QS52bXVsdChmYWNlQU5vcm1hbFdTMywgZmFjZUFOb3JtYWxXUzMpO1xuICAgICAgICBjb25zdCBkID0gaHVsbEEudGVzdFNlcEF4aXMoZmFjZUFOb3JtYWxXUzMsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpO1xuXG4gICAgICAgIGlmIChkID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkIDwgZG1pbikge1xuICAgICAgICAgIGRtaW4gPSBkO1xuICAgICAgICAgIHRhcmdldC5jb3B5KGZhY2VBTm9ybWFsV1MzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUZXN0IHVuaXF1ZSBheGVzXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gaHVsbEEudW5pcXVlQXhlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyBHZXQgd29ybGQgYXhpc1xuICAgICAgICBxdWF0QS52bXVsdChodWxsQS51bmlxdWVBeGVzW2ldLCBmYWNlQU5vcm1hbFdTMyk7XG4gICAgICAgIGNvbnN0IGQgPSBodWxsQS50ZXN0U2VwQXhpcyhmYWNlQU5vcm1hbFdTMywgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7XG5cbiAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGQgPCBkbWluKSB7XG4gICAgICAgICAgZG1pbiA9IGQ7XG4gICAgICAgICAgdGFyZ2V0LmNvcHkoZmFjZUFOb3JtYWxXUzMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFodWxsQi51bmlxdWVBeGVzKSB7XG4gICAgICAvLyBUZXN0IGZhY2Ugbm9ybWFscyBmcm9tIGh1bGxCXG4gICAgICBjb25zdCBudW1GYWNlc0IgPSBmYWNlTGlzdEIgPyBmYWNlTGlzdEIubGVuZ3RoIDogaHVsbEIuZmFjZXMubGVuZ3RoO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZpID0gZmFjZUxpc3RCID8gZmFjZUxpc3RCW2ldIDogaTtcbiAgICAgICAgV29ybGRub3JtYWwxLmNvcHkoaHVsbEIuZmFjZU5vcm1hbHNbZmldKTtcbiAgICAgICAgcXVhdEIudm11bHQoV29ybGRub3JtYWwxLCBXb3JsZG5vcm1hbDEpO1xuICAgICAgICBjb25zdCBkID0gaHVsbEEudGVzdFNlcEF4aXMoV29ybGRub3JtYWwxLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKTtcblxuICAgICAgICBpZiAoZCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZCA8IGRtaW4pIHtcbiAgICAgICAgICBkbWluID0gZDtcbiAgICAgICAgICB0YXJnZXQuY29weShXb3JsZG5vcm1hbDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRlc3QgdW5pcXVlIGF4ZXMgaW4gQlxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGh1bGxCLnVuaXF1ZUF4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcXVhdEIudm11bHQoaHVsbEIudW5pcXVlQXhlc1tpXSwgV29ybGRub3JtYWwxKTtcbiAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKFdvcmxkbm9ybWFsMSwgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7XG5cbiAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGQgPCBkbWluKSB7XG4gICAgICAgICAgZG1pbiA9IGQ7XG4gICAgICAgICAgdGFyZ2V0LmNvcHkoV29ybGRub3JtYWwxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gVGVzdCBlZGdlc1xuXG5cbiAgICBmb3IgKGxldCBlMCA9IDA7IGUwICE9PSBodWxsQS51bmlxdWVFZGdlcy5sZW5ndGg7IGUwKyspIHtcbiAgICAgIC8vIEdldCB3b3JsZCBlZGdlXG4gICAgICBxdWF0QS52bXVsdChodWxsQS51bmlxdWVFZGdlc1tlMF0sIHdvcmxkRWRnZTApO1xuXG4gICAgICBmb3IgKGxldCBlMSA9IDA7IGUxICE9PSBodWxsQi51bmlxdWVFZGdlcy5sZW5ndGg7IGUxKyspIHtcbiAgICAgICAgLy8gR2V0IHdvcmxkIGVkZ2UgMlxuICAgICAgICBxdWF0Qi52bXVsdChodWxsQi51bmlxdWVFZGdlc1tlMV0sIHdvcmxkRWRnZTEpO1xuICAgICAgICB3b3JsZEVkZ2UwLmNyb3NzKHdvcmxkRWRnZTEsIENyb3NzKTtcblxuICAgICAgICBpZiAoIUNyb3NzLmFsbW9zdFplcm8oKSkge1xuICAgICAgICAgIENyb3NzLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgIGNvbnN0IGRpc3QgPSBodWxsQS50ZXN0U2VwQXhpcyhDcm9zcywgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7XG5cbiAgICAgICAgICBpZiAoZGlzdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoZGlzdCA8IGRtaW4pIHtcbiAgICAgICAgICAgIGRtaW4gPSBkaXN0O1xuICAgICAgICAgICAgdGFyZ2V0LmNvcHkoQ3Jvc3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHBvc0IudnN1Yihwb3NBLCBkZWx0YUMpO1xuXG4gICAgaWYgKGRlbHRhQy5kb3QodGFyZ2V0KSA+IDAuMCkge1xuICAgICAgdGFyZ2V0Lm5lZ2F0ZSh0YXJnZXQpO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBUZXN0IHNlcGFyYXRpbmcgYXhpcyBhZ2FpbnN0IHR3byBodWxscy4gQm90aCBodWxscyBhcmUgcHJvamVjdGVkIG9udG8gdGhlIGF4aXMgYW5kIHRoZSBvdmVybGFwIHNpemUgaXMgcmV0dXJuZWQgaWYgdGhlcmUgaXMgb25lLlxuICAgKiBAcmV0dXJuIFRoZSBvdmVybGFwIGRlcHRoLCBvciBGQUxTRSBpZiBubyBwZW5ldHJhdGlvbi5cbiAgICovXG5cblxuICB0ZXN0U2VwQXhpcyhheGlzLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKSB7XG4gICAgY29uc3QgaHVsbEEgPSB0aGlzO1xuICAgIENvbnZleFBvbHloZWRyb24ucHJvamVjdChodWxsQSwgYXhpcywgcG9zQSwgcXVhdEEsIG1heG1pbkEpO1xuICAgIENvbnZleFBvbHloZWRyb24ucHJvamVjdChodWxsQiwgYXhpcywgcG9zQiwgcXVhdEIsIG1heG1pbkIpO1xuICAgIGNvbnN0IG1heEEgPSBtYXhtaW5BWzBdO1xuICAgIGNvbnN0IG1pbkEgPSBtYXhtaW5BWzFdO1xuICAgIGNvbnN0IG1heEIgPSBtYXhtaW5CWzBdO1xuICAgIGNvbnN0IG1pbkIgPSBtYXhtaW5CWzFdO1xuXG4gICAgaWYgKG1heEEgPCBtaW5CIHx8IG1heEIgPCBtaW5BKSB7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIFNlcGFyYXRlZFxuICAgIH1cblxuICAgIGNvbnN0IGQwID0gbWF4QSAtIG1pbkI7XG4gICAgY29uc3QgZDEgPSBtYXhCIC0gbWluQTtcbiAgICBjb25zdCBkZXB0aCA9IGQwIDwgZDEgPyBkMCA6IGQxO1xuICAgIHJldHVybiBkZXB0aDtcbiAgfVxuICAvKipcbiAgICogY2FsY3VsYXRlTG9jYWxJbmVydGlhXG4gICAqL1xuXG5cbiAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkge1xuICAgIC8vIEFwcHJveGltYXRlIHdpdGggYm94IGluZXJ0aWFcbiAgICAvLyBFeGFjdCBpbmVydGlhIGNhbGN1bGF0aW9uIGlzIG92ZXJraWxsLCBidXQgc2VlIGh0dHA6Ly9nZW9tZXRyaWN0b29scy5jb20vRG9jdW1lbnRhdGlvbi9Qb2x5aGVkcmFsTWFzc1Byb3BlcnRpZXMucGRmIGZvciB0aGUgY29ycmVjdCB3YXkgdG8gZG8gaXRcbiAgICBjb25zdCBhYWJibWF4ID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBhYWJibWluID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmNvbXB1dGVMb2NhbEFBQkIoYWFiYm1pbiwgYWFiYm1heCk7XG4gICAgY29uc3QgeCA9IGFhYmJtYXgueCAtIGFhYmJtaW4ueDtcbiAgICBjb25zdCB5ID0gYWFiYm1heC55IC0gYWFiYm1pbi55O1xuICAgIGNvbnN0IHogPSBhYWJibWF4LnogLSBhYWJibWluLno7XG4gICAgdGFyZ2V0LnggPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHogKiAyICogeik7XG4gICAgdGFyZ2V0LnkgPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeCAqIDIgKiB4ICsgMiAqIHogKiAyICogeik7XG4gICAgdGFyZ2V0LnogPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHggKiAyICogeCk7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSBmYWNlX2kgSW5kZXggb2YgdGhlIGZhY2VcbiAgICovXG5cblxuICBnZXRQbGFuZUNvbnN0YW50T2ZGYWNlKGZhY2VfaSkge1xuICAgIGNvbnN0IGYgPSB0aGlzLmZhY2VzW2ZhY2VfaV07XG4gICAgY29uc3QgbiA9IHRoaXMuZmFjZU5vcm1hbHNbZmFjZV9pXTtcbiAgICBjb25zdCB2ID0gdGhpcy52ZXJ0aWNlc1tmWzBdXTtcbiAgICBjb25zdCBjID0gLW4uZG90KHYpO1xuICAgIHJldHVybiBjO1xuICB9XG4gIC8qKlxuICAgKiBDbGlwIGEgZmFjZSBhZ2FpbnN0IGEgaHVsbC5cbiAgICogQHBhcmFtIHdvcmxkVmVydHNCMSBBbiBhcnJheSBvZiBWZWMzIHdpdGggdmVydGljZXMgaW4gdGhlIHdvcmxkIGZyYW1lLlxuICAgKiBAcGFyYW0gbWluRGlzdCBEaXN0YW5jZSBjbGFtcGluZ1xuICAgKiBAcGFyYW0gQXJyYXkgcmVzdWx0IEFycmF5IHRvIHN0b3JlIHJlc3VsdGluZyBjb250YWN0IHBvaW50cyBpbi4gV2lsbCBiZSBvYmplY3RzIHdpdGggcHJvcGVydGllczogcG9pbnQsIGRlcHRoLCBub3JtYWwuIFRoZXNlIGFyZSByZXByZXNlbnRlZCBpbiB3b3JsZCBjb29yZGluYXRlcy5cbiAgICovXG5cblxuICBjbGlwRmFjZUFnYWluc3RIdWxsKHNlcGFyYXRpbmdOb3JtYWwsIHBvc0EsIHF1YXRBLCB3b3JsZFZlcnRzQjEsIG1pbkRpc3QsIG1heERpc3QsIHJlc3VsdCkge1xuICAgIGNvbnN0IGZhY2VBTm9ybWFsV1MgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IGVkZ2UwID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBXb3JsZEVkZ2UwID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCB3b3JsZFBsYW5lQW5vcm1hbDEgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IHBsYW5lTm9ybWFsV1MxID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCB3b3JsZEExID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBsb2NhbFBsYW5lTm9ybWFsID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBwbGFuZU5vcm1hbFdTID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBodWxsQSA9IHRoaXM7XG4gICAgY29uc3Qgd29ybGRWZXJ0c0IyID0gW107XG4gICAgY29uc3QgcFZ0eEluID0gd29ybGRWZXJ0c0IxO1xuICAgIGNvbnN0IHBWdHhPdXQgPSB3b3JsZFZlcnRzQjI7XG4gICAgbGV0IGNsb3Nlc3RGYWNlQSA9IC0xO1xuICAgIGxldCBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTsgLy8gRmluZCB0aGUgZmFjZSB3aXRoIG5vcm1hbCBjbG9zZXN0IHRvIHRoZSBzZXBhcmF0aW5nIGF4aXNcblxuICAgIGZvciAobGV0IGZhY2UgPSAwOyBmYWNlIDwgaHVsbEEuZmFjZXMubGVuZ3RoOyBmYWNlKyspIHtcbiAgICAgIGZhY2VBTm9ybWFsV1MuY29weShodWxsQS5mYWNlTm9ybWFsc1tmYWNlXSk7XG4gICAgICBxdWF0QS52bXVsdChmYWNlQU5vcm1hbFdTLCBmYWNlQU5vcm1hbFdTKTtcbiAgICAgIGNvbnN0IGQgPSBmYWNlQU5vcm1hbFdTLmRvdChzZXBhcmF0aW5nTm9ybWFsKTtcblxuICAgICAgaWYgKGQgPCBkbWluKSB7XG4gICAgICAgIGRtaW4gPSBkO1xuICAgICAgICBjbG9zZXN0RmFjZUEgPSBmYWNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjbG9zZXN0RmFjZUEgPCAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBHZXQgdGhlIGZhY2UgYW5kIGNvbnN0cnVjdCBjb25uZWN0ZWQgZmFjZXNcblxuXG4gICAgY29uc3QgcG9seUEgPSBodWxsQS5mYWNlc1tjbG9zZXN0RmFjZUFdO1xuICAgIHBvbHlBLmNvbm5lY3RlZEZhY2VzID0gW107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGh1bGxBLmZhY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGh1bGxBLmZhY2VzW2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgLyogU2hhcmluZyBhIHZlcnRleCovXG4gICAgICAgIHBvbHlBLmluZGV4T2YoaHVsbEEuZmFjZXNbaV1bal0pICE9PSAtMSAmJlxuICAgICAgICAvKiBOb3QgdGhlIG9uZSB3ZSBhcmUgbG9va2luZyBmb3IgY29ubmVjdGlvbnMgZnJvbSAqL1xuICAgICAgICBpICE9PSBjbG9zZXN0RmFjZUEgJiZcbiAgICAgICAgLyogTm90IGFscmVhZHkgYWRkZWQgKi9cbiAgICAgICAgcG9seUEuY29ubmVjdGVkRmFjZXMuaW5kZXhPZihpKSA9PT0gLTEpIHtcbiAgICAgICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcy5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAvLyBDbGlwIHRoZSBwb2x5Z29uIHRvIHRoZSBiYWNrIG9mIHRoZSBwbGFuZXMgb2YgYWxsIGZhY2VzIG9mIGh1bGwgQSxcbiAgICAvLyB0aGF0IGFyZSBhZGphY2VudCB0byB0aGUgd2l0bmVzcyBmYWNlXG5cblxuICAgIGNvbnN0IG51bVZlcnRpY2VzQSA9IHBvbHlBLmxlbmd0aDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtVmVydGljZXNBOyBpKyspIHtcbiAgICAgIGNvbnN0IGEgPSBodWxsQS52ZXJ0aWNlc1twb2x5QVtpXV07XG4gICAgICBjb25zdCBiID0gaHVsbEEudmVydGljZXNbcG9seUFbKGkgKyAxKSAlIG51bVZlcnRpY2VzQV1dO1xuICAgICAgYS52c3ViKGIsIGVkZ2UwKTtcbiAgICAgIFdvcmxkRWRnZTAuY29weShlZGdlMCk7XG4gICAgICBxdWF0QS52bXVsdChXb3JsZEVkZ2UwLCBXb3JsZEVkZ2UwKTtcbiAgICAgIHBvc0EudmFkZChXb3JsZEVkZ2UwLCBXb3JsZEVkZ2UwKTtcbiAgICAgIHdvcmxkUGxhbmVBbm9ybWFsMS5jb3B5KHRoaXMuZmFjZU5vcm1hbHNbY2xvc2VzdEZhY2VBXSk7XG4gICAgICBxdWF0QS52bXVsdCh3b3JsZFBsYW5lQW5vcm1hbDEsIHdvcmxkUGxhbmVBbm9ybWFsMSk7XG4gICAgICBwb3NBLnZhZGQod29ybGRQbGFuZUFub3JtYWwxLCB3b3JsZFBsYW5lQW5vcm1hbDEpO1xuICAgICAgV29ybGRFZGdlMC5jcm9zcyh3b3JsZFBsYW5lQW5vcm1hbDEsIHBsYW5lTm9ybWFsV1MxKTtcbiAgICAgIHBsYW5lTm9ybWFsV1MxLm5lZ2F0ZShwbGFuZU5vcm1hbFdTMSk7XG4gICAgICB3b3JsZEExLmNvcHkoYSk7XG4gICAgICBxdWF0QS52bXVsdCh3b3JsZEExLCB3b3JsZEExKTtcbiAgICAgIHBvc0EudmFkZCh3b3JsZEExLCB3b3JsZEExKTtcbiAgICAgIGNvbnN0IG90aGVyRmFjZSA9IHBvbHlBLmNvbm5lY3RlZEZhY2VzW2ldO1xuICAgICAgbG9jYWxQbGFuZU5vcm1hbC5jb3B5KHRoaXMuZmFjZU5vcm1hbHNbb3RoZXJGYWNlXSk7XG4gICAgICBjb25zdCBsb2NhbFBsYW5lRXEgPSB0aGlzLmdldFBsYW5lQ29uc3RhbnRPZkZhY2Uob3RoZXJGYWNlKTtcbiAgICAgIHBsYW5lTm9ybWFsV1MuY29weShsb2NhbFBsYW5lTm9ybWFsKTtcbiAgICAgIHF1YXRBLnZtdWx0KHBsYW5lTm9ybWFsV1MsIHBsYW5lTm9ybWFsV1MpO1xuICAgICAgY29uc3QgcGxhbmVFcVdTID0gbG9jYWxQbGFuZUVxIC0gcGxhbmVOb3JtYWxXUy5kb3QocG9zQSk7IC8vIENsaXAgZmFjZSBhZ2FpbnN0IG91ciBjb25zdHJ1Y3RlZCBwbGFuZVxuXG4gICAgICB0aGlzLmNsaXBGYWNlQWdhaW5zdFBsYW5lKHBWdHhJbiwgcFZ0eE91dCwgcGxhbmVOb3JtYWxXUywgcGxhbmVFcVdTKTsgLy8gVGhyb3cgYXdheSBhbGwgY2xpcHBlZCBwb2ludHMsIGJ1dCBzYXZlIHRoZSByZW1haW5pbmcgdW50aWwgbmV4dCBjbGlwXG5cbiAgICAgIHdoaWxlIChwVnR4SW4ubGVuZ3RoKSB7XG4gICAgICAgIHBWdHhJbi5zaGlmdCgpO1xuICAgICAgfVxuXG4gICAgICB3aGlsZSAocFZ0eE91dC5sZW5ndGgpIHtcbiAgICAgICAgcFZ0eEluLnB1c2gocFZ0eE91dC5zaGlmdCgpKTtcbiAgICAgIH1cbiAgICB9IC8vIG9ubHkga2VlcCBjb250YWN0IHBvaW50cyB0aGF0IGFyZSBiZWhpbmQgdGhlIHdpdG5lc3MgZmFjZVxuXG5cbiAgICBsb2NhbFBsYW5lTm9ybWFsLmNvcHkodGhpcy5mYWNlTm9ybWFsc1tjbG9zZXN0RmFjZUFdKTtcbiAgICBjb25zdCBsb2NhbFBsYW5lRXEgPSB0aGlzLmdldFBsYW5lQ29uc3RhbnRPZkZhY2UoY2xvc2VzdEZhY2VBKTtcbiAgICBwbGFuZU5vcm1hbFdTLmNvcHkobG9jYWxQbGFuZU5vcm1hbCk7XG4gICAgcXVhdEEudm11bHQocGxhbmVOb3JtYWxXUywgcGxhbmVOb3JtYWxXUyk7XG4gICAgY29uc3QgcGxhbmVFcVdTID0gbG9jYWxQbGFuZUVxIC0gcGxhbmVOb3JtYWxXUy5kb3QocG9zQSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBWdHhJbi5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGRlcHRoID0gcGxhbmVOb3JtYWxXUy5kb3QocFZ0eEluW2ldKSArIHBsYW5lRXFXUzsgLy8gPz8/XG5cbiAgICAgIGlmIChkZXB0aCA8PSBtaW5EaXN0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY2xhbXBlZDogZGVwdGg9XCIgKyBkZXB0aCArIFwiIHRvIG1pbkRpc3Q9XCIgKyBtaW5EaXN0KTtcbiAgICAgICAgZGVwdGggPSBtaW5EaXN0O1xuICAgICAgfVxuXG4gICAgICBpZiAoZGVwdGggPD0gbWF4RGlzdCkge1xuICAgICAgICBjb25zdCBwb2ludCA9IHBWdHhJbltpXTtcblxuICAgICAgICBpZiAoZGVwdGggPD0gMWUtNikge1xuICAgICAgICAgIGNvbnN0IHAgPSB7XG4gICAgICAgICAgICBwb2ludCxcbiAgICAgICAgICAgIG5vcm1hbDogcGxhbmVOb3JtYWxXUyxcbiAgICAgICAgICAgIGRlcHRoXG4gICAgICAgICAgfTtcbiAgICAgICAgICByZXN1bHQucHVzaChwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2xpcCBhIGZhY2UgaW4gYSBodWxsIGFnYWluc3QgdGhlIGJhY2sgb2YgYSBwbGFuZS5cbiAgICogQHBhcmFtIHBsYW5lQ29uc3RhbnQgVGhlIGNvbnN0YW50IGluIHRoZSBtYXRoZW1hdGljYWwgcGxhbmUgZXF1YXRpb25cbiAgICovXG5cblxuICBjbGlwRmFjZUFnYWluc3RQbGFuZShpblZlcnRpY2VzLCBvdXRWZXJ0aWNlcywgcGxhbmVOb3JtYWwsIHBsYW5lQ29uc3RhbnQpIHtcbiAgICBsZXQgbl9kb3RfZmlyc3Q7XG4gICAgbGV0IG5fZG90X2xhc3Q7XG4gICAgY29uc3QgbnVtVmVydHMgPSBpblZlcnRpY2VzLmxlbmd0aDtcblxuICAgIGlmIChudW1WZXJ0cyA8IDIpIHtcbiAgICAgIHJldHVybiBvdXRWZXJ0aWNlcztcbiAgICB9XG5cbiAgICBsZXQgZmlyc3RWZXJ0ZXggPSBpblZlcnRpY2VzW2luVmVydGljZXMubGVuZ3RoIC0gMV07XG4gICAgbGV0IGxhc3RWZXJ0ZXggPSBpblZlcnRpY2VzWzBdO1xuICAgIG5fZG90X2ZpcnN0ID0gcGxhbmVOb3JtYWwuZG90KGZpcnN0VmVydGV4KSArIHBsYW5lQ29uc3RhbnQ7XG5cbiAgICBmb3IgKGxldCB2aSA9IDA7IHZpIDwgbnVtVmVydHM7IHZpKyspIHtcbiAgICAgIGxhc3RWZXJ0ZXggPSBpblZlcnRpY2VzW3ZpXTtcbiAgICAgIG5fZG90X2xhc3QgPSBwbGFuZU5vcm1hbC5kb3QobGFzdFZlcnRleCkgKyBwbGFuZUNvbnN0YW50O1xuXG4gICAgICBpZiAobl9kb3RfZmlyc3QgPCAwKSB7XG4gICAgICAgIGlmIChuX2RvdF9sYXN0IDwgMCkge1xuICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kIDwgMCwgc28gb3V0cHV0IGxhc3RWZXJ0ZXhcbiAgICAgICAgICBjb25zdCBuZXd2ID0gbmV3IFZlYzMoKTtcbiAgICAgICAgICBuZXd2LmNvcHkobGFzdFZlcnRleCk7XG4gICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTdGFydCA8IDAsIGVuZCA+PSAwLCBzbyBvdXRwdXQgaW50ZXJzZWN0aW9uXG4gICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7XG4gICAgICAgICAgZmlyc3RWZXJ0ZXgubGVycChsYXN0VmVydGV4LCBuX2RvdF9maXJzdCAvIChuX2RvdF9maXJzdCAtIG5fZG90X2xhc3QpLCBuZXd2KTtcbiAgICAgICAgICBvdXRWZXJ0aWNlcy5wdXNoKG5ld3YpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAobl9kb3RfbGFzdCA8IDApIHtcbiAgICAgICAgICAvLyBTdGFydCA+PSAwLCBlbmQgPCAwIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24gYW5kIGVuZFxuICAgICAgICAgIGNvbnN0IG5ld3YgPSBuZXcgVmVjMygpO1xuICAgICAgICAgIGZpcnN0VmVydGV4LmxlcnAobGFzdFZlcnRleCwgbl9kb3RfZmlyc3QgLyAobl9kb3RfZmlyc3QgLSBuX2RvdF9sYXN0KSwgbmV3dik7XG4gICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTtcbiAgICAgICAgICBvdXRWZXJ0aWNlcy5wdXNoKGxhc3RWZXJ0ZXgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZpcnN0VmVydGV4ID0gbGFzdFZlcnRleDtcbiAgICAgIG5fZG90X2ZpcnN0ID0gbl9kb3RfbGFzdDtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0VmVydGljZXM7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYC53b3JsZFZlcnRpY2VzYCBhbmQgc2V0cyBgLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZWAgdG8gZmFsc2UuXG4gICAqL1xuXG5cbiAgY29tcHV0ZVdvcmxkVmVydGljZXMocG9zaXRpb24sIHF1YXQpIHtcbiAgICB3aGlsZSAodGhpcy53b3JsZFZlcnRpY2VzLmxlbmd0aCA8IHRoaXMudmVydGljZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLndvcmxkVmVydGljZXMucHVzaChuZXcgVmVjMygpKTtcbiAgICB9XG5cbiAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7XG4gICAgY29uc3Qgd29ybGRWZXJ0cyA9IHRoaXMud29ybGRWZXJ0aWNlcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBxdWF0LnZtdWx0KHZlcnRzW2ldLCB3b3JsZFZlcnRzW2ldKTtcbiAgICAgIHBvc2l0aW9uLnZhZGQod29ybGRWZXJ0c1tpXSwgd29ybGRWZXJ0c1tpXSk7XG4gICAgfVxuXG4gICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSBmYWxzZTtcbiAgfVxuXG4gIGNvbXB1dGVMb2NhbEFBQkIoYWFiYm1pbiwgYWFiYm1heCkge1xuICAgIGNvbnN0IHZlcnRpY2VzID0gdGhpcy52ZXJ0aWNlcztcbiAgICBhYWJibWluLnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTtcbiAgICBhYWJibWF4LnNldCgtTnVtYmVyLk1BWF9WQUxVRSwgLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgdiA9IHZlcnRpY2VzW2ldO1xuXG4gICAgICBpZiAodi54IDwgYWFiYm1pbi54KSB7XG4gICAgICAgIGFhYmJtaW4ueCA9IHYueDtcbiAgICAgIH0gZWxzZSBpZiAodi54ID4gYWFiYm1heC54KSB7XG4gICAgICAgIGFhYmJtYXgueCA9IHYueDtcbiAgICAgIH1cblxuICAgICAgaWYgKHYueSA8IGFhYmJtaW4ueSkge1xuICAgICAgICBhYWJibWluLnkgPSB2Lnk7XG4gICAgICB9IGVsc2UgaWYgKHYueSA+IGFhYmJtYXgueSkge1xuICAgICAgICBhYWJibWF4LnkgPSB2Lnk7XG4gICAgICB9XG5cbiAgICAgIGlmICh2LnogPCBhYWJibWluLnopIHtcbiAgICAgICAgYWFiYm1pbi56ID0gdi56O1xuICAgICAgfSBlbHNlIGlmICh2LnogPiBhYWJibWF4LnopIHtcbiAgICAgICAgYWFiYm1heC56ID0gdi56O1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogVXBkYXRlcyBgd29ybGRWZXJ0aWNlc2AgYW5kIHNldHMgYHdvcmxkVmVydGljZXNOZWVkc1VwZGF0ZWAgdG8gZmFsc2UuXG4gICAqL1xuXG5cbiAgY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocXVhdCkge1xuICAgIGNvbnN0IE4gPSB0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aDtcblxuICAgIHdoaWxlICh0aGlzLndvcmxkRmFjZU5vcm1hbHMubGVuZ3RoIDwgTikge1xuICAgICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzLnB1c2gobmV3IFZlYzMoKSk7XG4gICAgfVxuXG4gICAgY29uc3Qgbm9ybWFscyA9IHRoaXMuZmFjZU5vcm1hbHM7XG4gICAgY29uc3Qgd29ybGROb3JtYWxzID0gdGhpcy53b3JsZEZhY2VOb3JtYWxzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgcXVhdC52bXVsdChub3JtYWxzW2ldLCB3b3JsZE5vcm1hbHNbaV0pO1xuICAgIH1cblxuICAgIHRoaXMud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlID0gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzXG4gICAqL1xuXG5cbiAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7XG4gICAgLy8gQXNzdW1lIHBvaW50cyBhcmUgZGlzdHJpYnV0ZWQgd2l0aCBsb2NhbCAoMCwwLDApIGFzIGNlbnRlclxuICAgIGxldCBtYXgyID0gMDtcbiAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdmVydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG5vcm0yID0gdmVydHNbaV0ubGVuZ3RoU3F1YXJlZCgpO1xuXG4gICAgICBpZiAobm9ybTIgPiBtYXgyKSB7XG4gICAgICAgIG1heDIgPSBub3JtMjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gTWF0aC5zcXJ0KG1heDIpO1xuICB9XG4gIC8qKlxuICAgKiBjYWxjdWxhdGVXb3JsZEFBQkJcbiAgICovXG5cblxuICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkge1xuICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlcztcbiAgICBsZXQgbWlueDtcbiAgICBsZXQgbWlueTtcbiAgICBsZXQgbWluejtcbiAgICBsZXQgbWF4eDtcbiAgICBsZXQgbWF4eTtcbiAgICBsZXQgbWF4ejtcbiAgICBsZXQgdGVtcFdvcmxkVmVydGV4ID0gbmV3IFZlYzMoKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRlbXBXb3JsZFZlcnRleC5jb3B5KHZlcnRzW2ldKTtcbiAgICAgIHF1YXQudm11bHQodGVtcFdvcmxkVmVydGV4LCB0ZW1wV29ybGRWZXJ0ZXgpO1xuICAgICAgcG9zLnZhZGQodGVtcFdvcmxkVmVydGV4LCB0ZW1wV29ybGRWZXJ0ZXgpO1xuICAgICAgY29uc3QgdiA9IHRlbXBXb3JsZFZlcnRleDtcblxuICAgICAgaWYgKG1pbnggPT09IHVuZGVmaW5lZCB8fCB2LnggPCBtaW54KSB7XG4gICAgICAgIG1pbnggPSB2Lng7XG4gICAgICB9XG5cbiAgICAgIGlmIChtYXh4ID09PSB1bmRlZmluZWQgfHwgdi54ID4gbWF4eCkge1xuICAgICAgICBtYXh4ID0gdi54O1xuICAgICAgfVxuXG4gICAgICBpZiAobWlueSA9PT0gdW5kZWZpbmVkIHx8IHYueSA8IG1pbnkpIHtcbiAgICAgICAgbWlueSA9IHYueTtcbiAgICAgIH1cblxuICAgICAgaWYgKG1heHkgPT09IHVuZGVmaW5lZCB8fCB2LnkgPiBtYXh5KSB7XG4gICAgICAgIG1heHkgPSB2Lnk7XG4gICAgICB9XG5cbiAgICAgIGlmIChtaW56ID09PSB1bmRlZmluZWQgfHwgdi56IDwgbWlueikge1xuICAgICAgICBtaW56ID0gdi56O1xuICAgICAgfVxuXG4gICAgICBpZiAobWF4eiA9PT0gdW5kZWZpbmVkIHx8IHYueiA+IG1heHopIHtcbiAgICAgICAgbWF4eiA9IHYuejtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBtaW4uc2V0KG1pbngsIG1pbnksIG1pbnopO1xuICAgIG1heC5zZXQobWF4eCwgbWF4eSwgbWF4eik7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhcHByb3hpbWF0ZSBjb252ZXggdm9sdW1lXG4gICAqL1xuXG5cbiAgdm9sdW1lKCkge1xuICAgIHJldHVybiA0LjAgKiBNYXRoLlBJICogdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyAvIDMuMDtcbiAgfVxuICAvKipcbiAgICogR2V0IGFuIGF2ZXJhZ2Ugb2YgYWxsIHRoZSB2ZXJ0aWNlcyBwb3NpdGlvbnNcbiAgICovXG5cblxuICBnZXRBdmVyYWdlUG9pbnRMb2NhbCh0YXJnZXQgPSBuZXcgVmVjMygpKSB7XG4gICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB2ZXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgdGFyZ2V0LnZhZGQodmVydHNbaV0sIHRhcmdldCk7XG4gICAgfVxuXG4gICAgdGFyZ2V0LnNjYWxlKDEgLyB2ZXJ0cy5sZW5ndGgsIHRhcmdldCk7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuICAvKipcbiAgICogVHJhbnNmb3JtIGFsbCBsb2NhbCBwb2ludHMuIFdpbGwgY2hhbmdlIHRoZSAudmVydGljZXNcbiAgICovXG5cblxuICB0cmFuc2Zvcm1BbGxQb2ludHMob2Zmc2V0LCBxdWF0KSB7XG4gICAgY29uc3QgbiA9IHRoaXMudmVydGljZXMubGVuZ3RoO1xuICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsgLy8gQXBwbHkgcm90YXRpb25cblxuICAgIGlmIChxdWF0KSB7XG4gICAgICAvLyBSb3RhdGUgdmVydGljZXNcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tpXTtcbiAgICAgICAgcXVhdC52bXVsdCh2LCB2KTtcbiAgICAgIH0gLy8gUm90YXRlIGZhY2Ugbm9ybWFsc1xuXG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5mYWNlTm9ybWFscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB2ID0gdGhpcy5mYWNlTm9ybWFsc1tpXTtcbiAgICAgICAgcXVhdC52bXVsdCh2LCB2KTtcbiAgICAgIH1cbiAgICAgIC8qXG4gICAgICAgICAgICAvLyBSb3RhdGUgZWRnZXNcbiAgICAgICAgICAgIGZvcihsZXQgaT0wOyBpPHRoaXMudW5pcXVlRWRnZXMubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLnVuaXF1ZUVkZ2VzW2ldO1xuICAgICAgICAgICAgICAgIHF1YXQudm11bHQodix2KTtcbiAgICAgICAgICAgIH0qL1xuXG4gICAgfSAvLyBBcHBseSBvZmZzZXRcblxuXG4gICAgaWYgKG9mZnNldCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgY29uc3QgdiA9IHZlcnRzW2ldO1xuICAgICAgICB2LnZhZGQob2Zmc2V0LCB2KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIHAgaXMgaW5zaWRlIHRoZSBwb2x5aGVkcmEuIE11c3QgYmUgaW4gbG9jYWwgY29vcmRzLlxuICAgKiBUaGUgcG9pbnQgbGllcyBvdXRzaWRlIG9mIHRoZSBjb252ZXggaHVsbCBvZiB0aGUgb3RoZXIgcG9pbnRzIGlmIGFuZCBvbmx5IGlmIHRoZSBkaXJlY3Rpb25cbiAgICogb2YgYWxsIHRoZSB2ZWN0b3JzIGZyb20gaXQgdG8gdGhvc2Ugb3RoZXIgcG9pbnRzIGFyZSBvbiBsZXNzIHRoYW4gb25lIGhhbGYgb2YgYSBzcGhlcmUgYXJvdW5kIGl0LlxuICAgKiBAcGFyYW0gcCBBIHBvaW50IGdpdmVuIGluIGxvY2FsIGNvb3JkaW5hdGVzXG4gICAqL1xuXG5cbiAgcG9pbnRJc0luc2lkZShwKSB7XG4gICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzO1xuICAgIGNvbnN0IGZhY2VzID0gdGhpcy5mYWNlcztcbiAgICBjb25zdCBub3JtYWxzID0gdGhpcy5mYWNlTm9ybWFscztcbiAgICBjb25zdCBwb2ludEluc2lkZSA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5nZXRBdmVyYWdlUG9pbnRMb2NhbChwb2ludEluc2lkZSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBuID0gbm9ybWFsc1tpXTtcbiAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tmYWNlc1tpXVswXV07IC8vIFdlIG9ubHkgbmVlZCBvbmUgcG9pbnQgaW4gdGhlIGZhY2VcbiAgICAgIC8vIFRoaXMgZG90IHByb2R1Y3QgZGV0ZXJtaW5lcyB3aGljaCBzaWRlIG9mIHRoZSBlZGdlIHRoZSBwb2ludCBpc1xuXG4gICAgICBjb25zdCB2VG9QID0gbmV3IFZlYzMoKTtcbiAgICAgIHAudnN1Yih2LCB2VG9QKTtcbiAgICAgIGNvbnN0IHIxID0gbi5kb3QodlRvUCk7XG4gICAgICBjb25zdCB2VG9Qb2ludEluc2lkZSA9IG5ldyBWZWMzKCk7XG4gICAgICBwb2ludEluc2lkZS52c3ViKHYsIHZUb1BvaW50SW5zaWRlKTtcbiAgICAgIGNvbnN0IHIyID0gbi5kb3QodlRvUG9pbnRJbnNpZGUpO1xuXG4gICAgICBpZiAocjEgPCAwICYmIHIyID4gMCB8fCByMSA+IDAgJiYgcjIgPCAwKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTsgLy8gRW5jb3VudGVyZWQgc29tZSBvdGhlciBzaWduLiBFeGl0LlxuICAgICAgfVxuICAgIH0gLy8gSWYgd2UgZ290IGhlcmUsIGFsbCBkb3QgcHJvZHVjdHMgd2VyZSBvZiB0aGUgc2FtZSBzaWduLlxuXG5cbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBtYXggYW5kIG1pbiBkb3QgcHJvZHVjdCBvZiBhIGNvbnZleCBodWxsIGF0IHBvc2l0aW9uIChwb3MscXVhdCkgcHJvamVjdGVkIG9udG8gYW4gYXhpcy5cbiAgICogUmVzdWx0cyBhcmUgc2F2ZWQgaW4gdGhlIGFycmF5IG1heG1pbi5cbiAgICogQHBhcmFtIHJlc3VsdCByZXN1bHRbMF0gYW5kIHJlc3VsdFsxXSB3aWxsIGJlIHNldCB0byBtYXhpbXVtIGFuZCBtaW5pbXVtLCByZXNwZWN0aXZlbHkuXG4gICAqL1xuXG5cbiAgc3RhdGljIHByb2plY3Qoc2hhcGUsIGF4aXMsIHBvcywgcXVhdCwgcmVzdWx0KSB7XG4gICAgY29uc3QgbiA9IHNoYXBlLnZlcnRpY2VzLmxlbmd0aDtcbiAgICBjb25zdCBsb2NhbEF4aXMgPSBwcm9qZWN0X2xvY2FsQXhpcztcbiAgICBsZXQgbWF4ID0gMDtcbiAgICBsZXQgbWluID0gMDtcbiAgICBjb25zdCBsb2NhbE9yaWdpbiA9IHByb2plY3RfbG9jYWxPcmlnaW47XG4gICAgY29uc3QgdnMgPSBzaGFwZS52ZXJ0aWNlcztcbiAgICBsb2NhbE9yaWdpbi5zZXRaZXJvKCk7IC8vIFRyYW5zZm9ybSB0aGUgYXhpcyB0byBsb2NhbFxuXG4gICAgVHJhbnNmb3JtLnZlY3RvclRvTG9jYWxGcmFtZShwb3MsIHF1YXQsIGF4aXMsIGxvY2FsQXhpcyk7XG4gICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvcywgcXVhdCwgbG9jYWxPcmlnaW4sIGxvY2FsT3JpZ2luKTtcbiAgICBjb25zdCBhZGQgPSBsb2NhbE9yaWdpbi5kb3QobG9jYWxBeGlzKTtcbiAgICBtaW4gPSBtYXggPSB2c1swXS5kb3QobG9jYWxBeGlzKTtcblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgbjsgaSsrKSB7XG4gICAgICBjb25zdCB2YWwgPSB2c1tpXS5kb3QobG9jYWxBeGlzKTtcblxuICAgICAgaWYgKHZhbCA+IG1heCkge1xuICAgICAgICBtYXggPSB2YWw7XG4gICAgICB9XG5cbiAgICAgIGlmICh2YWwgPCBtaW4pIHtcbiAgICAgICAgbWluID0gdmFsO1xuICAgICAgfVxuICAgIH1cblxuICAgIG1pbiAtPSBhZGQ7XG4gICAgbWF4IC09IGFkZDtcblxuICAgIGlmIChtaW4gPiBtYXgpIHtcbiAgICAgIC8vIEluY29uc2lzdGVudCAtIHN3YXBcbiAgICAgIGNvbnN0IHRlbXAgPSBtaW47XG4gICAgICBtaW4gPSBtYXg7XG4gICAgICBtYXggPSB0ZW1wO1xuICAgIH0gLy8gT3V0cHV0XG5cblxuICAgIHJlc3VsdFswXSA9IG1heDtcbiAgICByZXN1bHRbMV0gPSBtaW47XG4gIH1cblxufVxuY29uc3QgbWF4bWluQSA9IFtdO1xuY29uc3QgbWF4bWluQiA9IFtdO1xuY29uc3QgcHJvamVjdF9sb2NhbEF4aXMgPSBuZXcgVmVjMygpO1xuY29uc3QgcHJvamVjdF9sb2NhbE9yaWdpbiA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogQSAzZCBib3ggc2hhcGUuXG4gKiBAZXhhbXBsZVxuICogICAgIGNvbnN0IHNpemUgPSAxXG4gKiAgICAgY29uc3QgaGFsZkV4dGVudHMgPSBuZXcgQ0FOTk9OLlZlYzMoc2l6ZSwgc2l6ZSwgc2l6ZSlcbiAqICAgICBjb25zdCBib3hTaGFwZSA9IG5ldyBDQU5OT04uQm94KGhhbGZFeHRlbnRzKVxuICogICAgIGNvbnN0IGJveEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogYm94U2hhcGUgfSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KGJveEJvZHkpXG4gKi9cbmNsYXNzIEJveCBleHRlbmRzIFNoYXBlIHtcbiAgLyoqXG4gICAqIFRoZSBoYWxmIGV4dGVudHMgb2YgdGhlIGJveC5cbiAgICovXG5cbiAgLyoqXG4gICAqIFVzZWQgYnkgdGhlIGNvbnRhY3QgZ2VuZXJhdG9yIHRvIG1ha2UgY29udGFjdHMgd2l0aCBvdGhlciBjb252ZXggcG9seWhlZHJhIGZvciBleGFtcGxlLlxuICAgKi9cbiAgY29uc3RydWN0b3IoaGFsZkV4dGVudHMpIHtcbiAgICBzdXBlcih7XG4gICAgICB0eXBlOiBTaGFwZS50eXBlcy5CT1hcbiAgICB9KTtcbiAgICB0aGlzLmhhbGZFeHRlbnRzID0gdm9pZCAwO1xuICAgIHRoaXMuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuaGFsZkV4dGVudHMgPSBoYWxmRXh0ZW50cztcbiAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IG51bGw7XG4gICAgdGhpcy51cGRhdGVDb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24oKTtcbiAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGxvY2FsIGNvbnZleCBwb2x5aGVkcm9uIHJlcHJlc2VudGF0aW9uIHVzZWQgZm9yIHNvbWUgY29sbGlzaW9ucy5cbiAgICovXG5cblxuICB1cGRhdGVDb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24oKSB7XG4gICAgY29uc3Qgc3ggPSB0aGlzLmhhbGZFeHRlbnRzLng7XG4gICAgY29uc3Qgc3kgPSB0aGlzLmhhbGZFeHRlbnRzLnk7XG4gICAgY29uc3Qgc3ogPSB0aGlzLmhhbGZFeHRlbnRzLno7XG4gICAgY29uc3QgViA9IFZlYzM7XG4gICAgY29uc3QgdmVydGljZXMgPSBbbmV3IFYoLXN4LCAtc3ksIC1zeiksIG5ldyBWKHN4LCAtc3ksIC1zeiksIG5ldyBWKHN4LCBzeSwgLXN6KSwgbmV3IFYoLXN4LCBzeSwgLXN6KSwgbmV3IFYoLXN4LCAtc3ksIHN6KSwgbmV3IFYoc3gsIC1zeSwgc3opLCBuZXcgVihzeCwgc3ksIHN6KSwgbmV3IFYoLXN4LCBzeSwgc3opXTtcbiAgICBjb25zdCBmYWNlcyA9IFtbMywgMiwgMSwgMF0sIC8vIC16XG4gICAgWzQsIDUsIDYsIDddLCAvLyArelxuICAgIFs1LCA0LCAwLCAxXSwgLy8gLXlcbiAgICBbMiwgMywgNywgNl0sIC8vICt5XG4gICAgWzAsIDQsIDcsIDNdLCAvLyAteFxuICAgIFsxLCAyLCA2LCA1XSAvLyAreFxuICAgIF07XG4gICAgY29uc3QgYXhlcyA9IFtuZXcgVigwLCAwLCAxKSwgbmV3IFYoMCwgMSwgMCksIG5ldyBWKDEsIDAsIDApXTtcbiAgICBjb25zdCBoID0gbmV3IENvbnZleFBvbHloZWRyb24oe1xuICAgICAgdmVydGljZXMsXG4gICAgICBmYWNlcyxcbiAgICAgIGF4ZXNcbiAgICB9KTtcbiAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IGg7XG4gICAgaC5tYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWw7XG4gIH1cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSB0aGUgaW5lcnRpYSBvZiB0aGUgYm94LlxuICAgKi9cblxuXG4gIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQgPSBuZXcgVmVjMygpKSB7XG4gICAgQm94LmNhbGN1bGF0ZUluZXJ0aWEodGhpcy5oYWxmRXh0ZW50cywgbWFzcywgdGFyZ2V0KTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgc3RhdGljIGNhbGN1bGF0ZUluZXJ0aWEoaGFsZkV4dGVudHMsIG1hc3MsIHRhcmdldCkge1xuICAgIGNvbnN0IGUgPSBoYWxmRXh0ZW50cztcbiAgICB0YXJnZXQueCA9IDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiBlLnkgKiAyICogZS55ICsgMiAqIGUueiAqIDIgKiBlLnopO1xuICAgIHRhcmdldC55ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueCAqIDIgKiBlLnggKyAyICogZS56ICogMiAqIGUueik7XG4gICAgdGFyZ2V0LnogPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogZS55ICogMiAqIGUueSArIDIgKiBlLnggKiAyICogZS54KTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBib3ggNiBzaWRlIG5vcm1hbHNcbiAgICogQHBhcmFtIHNpeFRhcmdldFZlY3RvcnMgQW4gYXJyYXkgb2YgNiB2ZWN0b3JzLCB0byBzdG9yZSB0aGUgcmVzdWx0aW5nIHNpZGUgbm9ybWFscyBpbi5cbiAgICogQHBhcmFtIHF1YXQgT3JpZW50YXRpb24gdG8gYXBwbHkgdG8gdGhlIG5vcm1hbCB2ZWN0b3JzLiBJZiBub3QgcHJvdmlkZWQsIHRoZSB2ZWN0b3JzIHdpbGwgYmUgaW4gcmVzcGVjdCB0byB0aGUgbG9jYWwgZnJhbWUuXG4gICAqL1xuXG5cbiAgZ2V0U2lkZU5vcm1hbHMoc2l4VGFyZ2V0VmVjdG9ycywgcXVhdCkge1xuICAgIGNvbnN0IHNpZGVzID0gc2l4VGFyZ2V0VmVjdG9ycztcbiAgICBjb25zdCBleCA9IHRoaXMuaGFsZkV4dGVudHM7XG4gICAgc2lkZXNbMF0uc2V0KGV4LngsIDAsIDApO1xuICAgIHNpZGVzWzFdLnNldCgwLCBleC55LCAwKTtcbiAgICBzaWRlc1syXS5zZXQoMCwgMCwgZXgueik7XG4gICAgc2lkZXNbM10uc2V0KC1leC54LCAwLCAwKTtcbiAgICBzaWRlc1s0XS5zZXQoMCwgLWV4LnksIDApO1xuICAgIHNpZGVzWzVdLnNldCgwLCAwLCAtZXgueik7XG5cbiAgICBpZiAocXVhdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gc2lkZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcXVhdC52bXVsdChzaWRlc1tpXSwgc2lkZXNbaV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzaWRlcztcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdm9sdW1lIG9mIHRoZSBib3guXG4gICAqL1xuXG5cbiAgdm9sdW1lKCkge1xuICAgIHJldHVybiA4LjAgKiB0aGlzLmhhbGZFeHRlbnRzLnggKiB0aGlzLmhhbGZFeHRlbnRzLnkgKiB0aGlzLmhhbGZFeHRlbnRzLno7XG4gIH1cbiAgLyoqXG4gICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzXG4gICAqL1xuXG5cbiAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7XG4gICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IHRoaXMuaGFsZkV4dGVudHMubGVuZ3RoKCk7XG4gIH1cbiAgLyoqXG4gICAqIGZvckVhY2hXb3JsZENvcm5lclxuICAgKi9cblxuXG4gIGZvckVhY2hXb3JsZENvcm5lcihwb3MsIHF1YXQsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgZSA9IHRoaXMuaGFsZkV4dGVudHM7XG4gICAgY29uc3QgY29ybmVycyA9IFtbZS54LCBlLnksIGUuel0sIFstZS54LCBlLnksIGUuel0sIFstZS54LCAtZS55LCBlLnpdLCBbLWUueCwgLWUueSwgLWUuel0sIFtlLngsIC1lLnksIC1lLnpdLCBbZS54LCBlLnksIC1lLnpdLCBbLWUueCwgZS55LCAtZS56XSwgW2UueCwgLWUueSwgZS56XV07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvcm5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHdvcmxkQ29ybmVyVGVtcFBvcy5zZXQoY29ybmVyc1tpXVswXSwgY29ybmVyc1tpXVsxXSwgY29ybmVyc1tpXVsyXSk7XG4gICAgICBxdWF0LnZtdWx0KHdvcmxkQ29ybmVyVGVtcFBvcywgd29ybGRDb3JuZXJUZW1wUG9zKTtcbiAgICAgIHBvcy52YWRkKHdvcmxkQ29ybmVyVGVtcFBvcywgd29ybGRDb3JuZXJUZW1wUG9zKTtcbiAgICAgIGNhbGxiYWNrKHdvcmxkQ29ybmVyVGVtcFBvcy54LCB3b3JsZENvcm5lclRlbXBQb3MueSwgd29ybGRDb3JuZXJUZW1wUG9zLnopO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogY2FsY3VsYXRlV29ybGRBQUJCXG4gICAqL1xuXG5cbiAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHtcbiAgICBjb25zdCBlID0gdGhpcy5oYWxmRXh0ZW50cztcbiAgICB3b3JsZENvcm5lcnNUZW1wWzBdLnNldChlLngsIGUueSwgZS56KTtcbiAgICB3b3JsZENvcm5lcnNUZW1wWzFdLnNldCgtZS54LCBlLnksIGUueik7XG4gICAgd29ybGRDb3JuZXJzVGVtcFsyXS5zZXQoLWUueCwgLWUueSwgZS56KTtcbiAgICB3b3JsZENvcm5lcnNUZW1wWzNdLnNldCgtZS54LCAtZS55LCAtZS56KTtcbiAgICB3b3JsZENvcm5lcnNUZW1wWzRdLnNldChlLngsIC1lLnksIC1lLnopO1xuICAgIHdvcmxkQ29ybmVyc1RlbXBbNV0uc2V0KGUueCwgZS55LCAtZS56KTtcbiAgICB3b3JsZENvcm5lcnNUZW1wWzZdLnNldCgtZS54LCBlLnksIC1lLnopO1xuICAgIHdvcmxkQ29ybmVyc1RlbXBbN10uc2V0KGUueCwgLWUueSwgZS56KTtcbiAgICBjb25zdCB3YyA9IHdvcmxkQ29ybmVyc1RlbXBbMF07XG4gICAgcXVhdC52bXVsdCh3Yywgd2MpO1xuICAgIHBvcy52YWRkKHdjLCB3Yyk7XG4gICAgbWF4LmNvcHkod2MpO1xuICAgIG1pbi5jb3B5KHdjKTtcblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgODsgaSsrKSB7XG4gICAgICBjb25zdCB3YyA9IHdvcmxkQ29ybmVyc1RlbXBbaV07XG4gICAgICBxdWF0LnZtdWx0KHdjLCB3Yyk7XG4gICAgICBwb3MudmFkZCh3Yywgd2MpO1xuICAgICAgY29uc3QgeCA9IHdjLng7XG4gICAgICBjb25zdCB5ID0gd2MueTtcbiAgICAgIGNvbnN0IHogPSB3Yy56O1xuXG4gICAgICBpZiAoeCA+IG1heC54KSB7XG4gICAgICAgIG1heC54ID0geDtcbiAgICAgIH1cblxuICAgICAgaWYgKHkgPiBtYXgueSkge1xuICAgICAgICBtYXgueSA9IHk7XG4gICAgICB9XG5cbiAgICAgIGlmICh6ID4gbWF4LnopIHtcbiAgICAgICAgbWF4LnogPSB6O1xuICAgICAgfVxuXG4gICAgICBpZiAoeCA8IG1pbi54KSB7XG4gICAgICAgIG1pbi54ID0geDtcbiAgICAgIH1cblxuICAgICAgaWYgKHkgPCBtaW4ueSkge1xuICAgICAgICBtaW4ueSA9IHk7XG4gICAgICB9XG5cbiAgICAgIGlmICh6IDwgbWluLnopIHtcbiAgICAgICAgbWluLnogPSB6O1xuICAgICAgfVxuICAgIH0gLy8gR2V0IGVhY2ggYXhpcyBtYXhcbiAgICAvLyBtaW4uc2V0KEluZmluaXR5LEluZmluaXR5LEluZmluaXR5KTtcbiAgICAvLyBtYXguc2V0KC1JbmZpbml0eSwtSW5maW5pdHksLUluZmluaXR5KTtcbiAgICAvLyB0aGlzLmZvckVhY2hXb3JsZENvcm5lcihwb3MscXVhdCxmdW5jdGlvbih4LHkseil7XG4gICAgLy8gICAgIGlmKHggPiBtYXgueCl7XG4gICAgLy8gICAgICAgICBtYXgueCA9IHg7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgaWYoeSA+IG1heC55KXtcbiAgICAvLyAgICAgICAgIG1heC55ID0geTtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICBpZih6ID4gbWF4Lnope1xuICAgIC8vICAgICAgICAgbWF4LnogPSB6O1xuICAgIC8vICAgICB9XG4gICAgLy8gICAgIGlmKHggPCBtaW4ueCl7XG4gICAgLy8gICAgICAgICBtaW4ueCA9IHg7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgaWYoeSA8IG1pbi55KXtcbiAgICAvLyAgICAgICAgIG1pbi55ID0geTtcbiAgICAvLyAgICAgfVxuICAgIC8vICAgICBpZih6IDwgbWluLnope1xuICAgIC8vICAgICAgICAgbWluLnogPSB6O1xuICAgIC8vICAgICB9XG4gICAgLy8gfSk7XG5cbiAgfVxuXG59XG5jb25zdCB3b3JsZENvcm5lclRlbXBQb3MgPSBuZXcgVmVjMygpO1xuY29uc3Qgd29ybGRDb3JuZXJzVGVtcCA9IFtuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpXTtcblxuLyoqXG4gKiBCT0RZX1RZUEVTXG4gKi9cbmNvbnN0IEJPRFlfVFlQRVMgPSB7XG4gIC8qKiBEWU5BTUlDICovXG4gIERZTkFNSUM6IDEsXG5cbiAgLyoqIFNUQVRJQyAqL1xuICBTVEFUSUM6IDIsXG5cbiAgLyoqIEtJTkVNQVRJQyAqL1xuICBLSU5FTUFUSUM6IDRcbn07XG4vKipcbiAqIEJvZHlUeXBlXG4gKi9cblxuLyoqXG4gKiBCT0RZX1NMRUVQX1NUQVRFU1xuICovXG5jb25zdCBCT0RZX1NMRUVQX1NUQVRFUyA9IHtcbiAgLyoqIEFXQUtFICovXG4gIEFXQUtFOiAwLFxuXG4gIC8qKiBTTEVFUFkgKi9cbiAgU0xFRVBZOiAxLFxuXG4gIC8qKiBTTEVFUElORyAqL1xuICBTTEVFUElORzogMlxufTtcbi8qKlxuICogQm9keVNsZWVwU3RhdGVcbiAqL1xuXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBib2R5IHR5cGVzLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBzaGFwZSA9IG5ldyBDQU5OT04uU3BoZXJlKDEpXG4gKiAgICAgY29uc3QgYm9keSA9IG5ldyBDQU5OT04uQm9keSh7XG4gKiAgICAgICBtYXNzOiAxLFxuICogICAgICAgc2hhcGUsXG4gKiAgICAgfSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHkpXG4gKi9cbmNsYXNzIEJvZHkgZXh0ZW5kcyBFdmVudFRhcmdldCB7XG4gIC8qKlxuICAgKiBEaXNwYXRjaGVkIGFmdGVyIHR3byBib2RpZXMgY29sbGlkZS4gVGhpcyBldmVudCBpcyBkaXNwYXRjaGVkIG9uIGVhY2hcbiAgICogb2YgdGhlIHR3byBib2RpZXMgaW52b2x2ZWQgaW4gdGhlIGNvbGxpc2lvbi5cbiAgICogQGV2ZW50IGNvbGxpZGVcbiAgICogQHBhcmFtIGJvZHkgVGhlIGJvZHkgdGhhdCB3YXMgaW52b2x2ZWQgaW4gdGhlIGNvbGxpc2lvbi5cbiAgICogQHBhcmFtIGNvbnRhY3QgVGhlIGRldGFpbHMgb2YgdGhlIGNvbGxpc2lvbi5cbiAgICovXG5cbiAgLyoqXG4gICAqIEEgZHluYW1pYyBib2R5IGlzIGZ1bGx5IHNpbXVsYXRlZC4gQ2FuIGJlIG1vdmVkIG1hbnVhbGx5IGJ5IHRoZSB1c2VyLCBidXQgbm9ybWFsbHkgdGhleSBtb3ZlIGFjY29yZGluZyB0byBmb3JjZXMuIEEgZHluYW1pYyBib2R5IGNhbiBjb2xsaWRlIHdpdGggYWxsIGJvZHkgdHlwZXMuIEEgZHluYW1pYyBib2R5IGFsd2F5cyBoYXMgZmluaXRlLCBub24temVybyBtYXNzLlxuICAgKi9cblxuICAvKipcbiAgICogQSBzdGF0aWMgYm9keSBkb2VzIG5vdCBtb3ZlIGR1cmluZyBzaW11bGF0aW9uIGFuZCBiZWhhdmVzIGFzIGlmIGl0IGhhcyBpbmZpbml0ZSBtYXNzLiBTdGF0aWMgYm9kaWVzIGNhbiBiZSBtb3ZlZCBtYW51YWxseSBieSBzZXR0aW5nIHRoZSBwb3NpdGlvbiBvZiB0aGUgYm9keS4gVGhlIHZlbG9jaXR5IG9mIGEgc3RhdGljIGJvZHkgaXMgYWx3YXlzIHplcm8uIFN0YXRpYyBib2RpZXMgZG8gbm90IGNvbGxpZGUgd2l0aCBvdGhlciBzdGF0aWMgb3Iga2luZW1hdGljIGJvZGllcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEEga2luZW1hdGljIGJvZHkgbW92ZXMgdW5kZXIgc2ltdWxhdGlvbiBhY2NvcmRpbmcgdG8gaXRzIHZlbG9jaXR5LiBUaGV5IGRvIG5vdCByZXNwb25kIHRvIGZvcmNlcy4gVGhleSBjYW4gYmUgbW92ZWQgbWFudWFsbHksIGJ1dCBub3JtYWxseSBhIGtpbmVtYXRpYyBib2R5IGlzIG1vdmVkIGJ5IHNldHRpbmcgaXRzIHZlbG9jaXR5LiBBIGtpbmVtYXRpYyBib2R5IGJlaGF2ZXMgYXMgaWYgaXQgaGFzIGluZmluaXRlIG1hc3MuIEtpbmVtYXRpYyBib2RpZXMgZG8gbm90IGNvbGxpZGUgd2l0aCBvdGhlciBzdGF0aWMgb3Iga2luZW1hdGljIGJvZGllcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEFXQUtFXG4gICAqL1xuXG4gIC8qKlxuICAgKiBTTEVFUFlcbiAgICovXG5cbiAgLyoqXG4gICAqIFNMRUVQSU5HXG4gICAqL1xuXG4gIC8qKlxuICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgc2xlZXBpbmcgYm9keSBoYXMgd29rZW4gdXAuXG4gICAqIEBldmVudCB3YWtldXBcbiAgICovXG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBnb25lIGluIHRvIHRoZSBzbGVlcHkgc3RhdGUuXG4gICAqIEBldmVudCBzbGVlcHlcbiAgICovXG5cbiAgLyoqXG4gICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBmYWxsZW4gYXNsZWVwLlxuICAgKiBAZXZlbnQgc2xlZXBcbiAgICovXG5cbiAgLyoqXG4gICAqIElkZW50aWZpZXIgb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBQb3NpdGlvbiBvZiBib2R5IGluIFdvcmxkLmJvZGllcy4gVXBkYXRlZCBieSBXb3JsZCBhbmQgdXNlZCBpbiBBcnJheUNvbGxpc2lvbk1hdHJpeC5cbiAgICovXG5cbiAgLyoqXG4gICAqIFJlZmVyZW5jZSB0byB0aGUgd29ybGQgdGhlIGJvZHkgaXMgbGl2aW5nIGluLlxuICAgKi9cblxuICAvKipcbiAgICogQ2FsbGJhY2sgZnVuY3Rpb24gdGhhdCBpcyB1c2VkIEJFRk9SRSBzdGVwcGluZyB0aGUgc3lzdGVtLiBVc2UgaXQgdG8gYXBwbHkgZm9yY2VzLCBmb3IgZXhhbXBsZS4gSW5zaWRlIHRoZSBmdW5jdGlvbiwgXCJ0aGlzXCIgd2lsbCByZWZlciB0byB0aGlzIEJvZHkgb2JqZWN0LiBEZXByZWNhdGVkIC0gdXNlIFdvcmxkIGV2ZW50cyBpbnN0ZWFkLlxuICAgKiBAZGVwcmVjYXRlZCBVc2UgV29ybGQgZXZlbnRzIGluc3RlYWRcbiAgICovXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgaXMgdXNlZCBBRlRFUiBzdGVwcGluZyB0aGUgc3lzdGVtLiBJbnNpZGUgdGhlIGZ1bmN0aW9uLCBcInRoaXNcIiB3aWxsIHJlZmVyIHRvIHRoaXMgQm9keSBvYmplY3QuIERlcHJlY2F0ZWQgLSB1c2UgV29ybGQgZXZlbnRzIGluc3RlYWQuXG4gICAqIEBkZXByZWNhdGVkIFVzZSBXb3JsZCBldmVudHMgaW5zdGVhZFxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGNvbGxpc2lvbiBncm91cCB0aGUgYm9keSBiZWxvbmdzIHRvLlxuICAgKiBAZGVmYXVsdCAxXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgY29sbGlzaW9uIGdyb3VwIHRoZSBib2R5IGNhbiBjb2xsaWRlIHdpdGguXG4gICAqIEBkZWZhdWx0IC0xXG4gICAqL1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHByb2R1Y2UgY29udGFjdCBmb3JjZXMgd2hlbiBpbiBjb250YWN0IHdpdGggb3RoZXIgYm9kaWVzLiBOb3RlIHRoYXQgY29udGFjdHMgd2lsbCBiZSBnZW5lcmF0ZWQsIGJ1dCB0aGV5IHdpbGwgYmUgZGlzYWJsZWQgLSBpLmUuIFwiY29sbGlkZVwiIGV2ZW50cyB3aWxsIGJlIHJhaXNlZCwgYnV0IGZvcmNlcyB3aWxsIG5vdCBiZSBhbHRlcmVkLlxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQgc3BhY2UgcG9zaXRpb24gb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbnRlcnBvbGF0ZWQgcG9zaXRpb24gb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbml0aWFsIHBvc2l0aW9uIG9mIHRoZSBib2R5LlxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQgc3BhY2UgdmVsb2NpdHkgb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbml0aWFsIHZlbG9jaXR5IG9mIHRoZSBib2R5LlxuICAgKi9cblxuICAvKipcbiAgICogTGluZWFyIGZvcmNlIG9uIHRoZSBib2R5IGluIHdvcmxkIHNwYWNlLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIG1hc3Mgb2YgdGhlIGJvZHkuXG4gICAqIEBkZWZhdWx0IDBcbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBwaHlzaWNzIG1hdGVyaWFsIG9mIHRoZSBib2R5LiBJdCBkZWZpbmVzIHRoZSBib2R5IGludGVyYWN0aW9uIHdpdGggb3RoZXIgYm9kaWVzLlxuICAgKi9cblxuICAvKipcbiAgICogSG93IG11Y2ggdG8gZGFtcCB0aGUgYm9keSB2ZWxvY2l0eSBlYWNoIHN0ZXAuIEl0IGNhbiBnbyBmcm9tIDAgdG8gMS5cbiAgICogQGRlZmF1bHQgMC4wMVxuICAgKi9cblxuICAvKipcbiAgICogT25lIG9mOiBgQm9keS5EWU5BTUlDYCwgYEJvZHkuU1RBVElDYCBhbmQgYEJvZHkuS0lORU1BVElDYC5cbiAgICovXG5cbiAgLyoqXG4gICAqIElmIHRydWUsIHRoZSBib2R5IHdpbGwgYXV0b21hdGljYWxseSBmYWxsIHRvIHNsZWVwLlxuICAgKiBAZGVmYXVsdCB0cnVlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBDdXJyZW50IHNsZWVwIHN0YXRlLlxuICAgKi9cblxuICAvKipcbiAgICogSWYgdGhlIHNwZWVkICh0aGUgbm9ybSBvZiB0aGUgdmVsb2NpdHkpIGlzIHNtYWxsZXIgdGhhbiB0aGlzIHZhbHVlLCB0aGUgYm9keSBpcyBjb25zaWRlcmVkIHNsZWVweS5cbiAgICogQGRlZmF1bHQgMC4xXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJZiB0aGUgYm9keSBoYXMgYmVlbiBzbGVlcHkgZm9yIHRoaXMgc2xlZXBUaW1lTGltaXQgc2Vjb25kcywgaXQgaXMgY29uc2lkZXJlZCBzbGVlcGluZy5cbiAgICogQGRlZmF1bHQgMVxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQgc3BhY2Ugcm90YXRpb25hbCBmb3JjZSBvbiB0aGUgYm9keSwgYXJvdW5kIGNlbnRlciBvZiBtYXNzLlxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQgc3BhY2Ugb3JpZW50YXRpb24gb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbml0aWFsIHF1YXRlcm5pb24gb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbnRlcnBvbGF0ZWQgb3JpZW50YXRpb24gb2YgdGhlIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbmd1bGFyIHZlbG9jaXR5IG9mIHRoZSBib2R5LCBpbiB3b3JsZCBzcGFjZS4gVGhpbmsgb2YgdGhlIGFuZ3VsYXIgdmVsb2NpdHkgYXMgYSB2ZWN0b3IsIHdoaWNoIHRoZSBib2R5IHJvdGF0ZXMgYXJvdW5kLiBUaGUgbGVuZ3RoIG9mIHRoaXMgdmVjdG9yIGRldGVybWluZXMgaG93IGZhc3QgKGluIHJhZGlhbnMgcGVyIHNlY29uZCkgdGhlIGJvZHkgcm90YXRlcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEluaXRpYWwgYW5ndWxhciB2ZWxvY2l0eSBvZiB0aGUgYm9keS5cbiAgICovXG5cbiAgLyoqXG4gICAqIExpc3Qgb2YgU2hhcGVzIHRoYXQgaGF2ZSBiZWVuIGFkZGVkIHRvIHRoZSBib2R5LlxuICAgKi9cblxuICAvKipcbiAgICogUG9zaXRpb24gb2YgZWFjaCBTaGFwZSBpbiB0aGUgYm9keSwgZ2l2ZW4gaW4gbG9jYWwgQm9keSBzcGFjZS5cbiAgICovXG5cbiAgLyoqXG4gICAqIE9yaWVudGF0aW9uIG9mIGVhY2ggU2hhcGUsIGdpdmVuIGluIGxvY2FsIEJvZHkgc3BhY2UuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgaW5lcnRpYSBvZiB0aGUgYm9keS5cbiAgICovXG5cbiAgLyoqXG4gICAqIFNldCB0byB0cnVlIGlmIHlvdSBkb24ndCB3YW50IHRoZSBib2R5IHRvIHJvdGF0ZS4gTWFrZSBzdXJlIHRvIHJ1biAudXBkYXRlTWFzc1Byb3BlcnRpZXMoKSBpZiB5b3UgY2hhbmdlIHRoaXMgYWZ0ZXIgdGhlIGJvZHkgY3JlYXRpb24uXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBIb3cgbXVjaCB0byBkYW1wIHRoZSBib2R5IGFuZ3VsYXIgdmVsb2NpdHkgZWFjaCBzdGVwLiBJdCBjYW4gZ28gZnJvbSAwIHRvIDEuXG4gICAqIEBkZWZhdWx0IDAuMDFcbiAgICovXG5cbiAgLyoqXG4gICAqIFVzZSB0aGlzIHByb3BlcnR5IHRvIGxpbWl0IHRoZSBtb3Rpb24gYWxvbmcgYW55IHdvcmxkIGF4aXMuICgxLDEsMSkgd2lsbCBhbGxvdyBtb3Rpb24gYWxvbmcgYWxsIGF4ZXMgd2hpbGUgKDAsMCwwKSBhbGxvd3Mgbm9uZS5cbiAgICovXG5cbiAgLyoqXG4gICAqIFVzZSB0aGlzIHByb3BlcnR5IHRvIGxpbWl0IHRoZSByb3RhdGlvbmFsIG1vdGlvbiBhbG9uZyBhbnkgd29ybGQgYXhpcy4gKDEsMSwxKSB3aWxsIGFsbG93IHJvdGF0aW9uIGFsb25nIGFsbCBheGVzIHdoaWxlICgwLDAsMCkgYWxsb3dzIG5vbmUuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBXb3JsZCBzcGFjZSBib3VuZGluZyBib3ggb2YgdGhlIGJvZHkgYW5kIGl0cyBzaGFwZXMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJbmRpY2F0ZXMgaWYgdGhlIEFBQkIgbmVlZHMgdG8gYmUgdXBkYXRlZCBiZWZvcmUgdXNlLlxuICAgKi9cblxuICAvKipcbiAgICogVG90YWwgYm91bmRpbmcgcmFkaXVzIG9mIHRoZSBCb2R5IGluY2x1ZGluZyBpdHMgc2hhcGVzLCByZWxhdGl2ZSB0byBib2R5LnBvc2l0aW9uLlxuICAgKi9cblxuICAvKipcbiAgICogV2hlbiB0cnVlIHRoZSBib2R5IGJlaGF2ZXMgbGlrZSBhIHRyaWdnZXIuIEl0IGRvZXMgbm90IGNvbGxpZGVcbiAgICogd2l0aCBvdGhlciBib2RpZXMgYnV0IGNvbGxpc2lvbiBldmVudHMgYXJlIHN0aWxsIHRyaWdnZXJlZC5cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5pZCA9IHZvaWQgMDtcbiAgICB0aGlzLmluZGV4ID0gdm9pZCAwO1xuICAgIHRoaXMud29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy5wcmVTdGVwID0gdm9pZCAwO1xuICAgIHRoaXMucG9zdFN0ZXAgPSB2b2lkIDA7XG4gICAgdGhpcy52bGFtYmRhID0gdm9pZCAwO1xuICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB2b2lkIDA7XG4gICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gdm9pZCAwO1xuICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSB2b2lkIDA7XG4gICAgdGhpcy5wb3NpdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5pbnRlcnBvbGF0ZWRQb3NpdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLmluaXRQb3NpdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLnZlbG9jaXR5ID0gdm9pZCAwO1xuICAgIHRoaXMuaW5pdFZlbG9jaXR5ID0gdm9pZCAwO1xuICAgIHRoaXMuZm9yY2UgPSB2b2lkIDA7XG4gICAgdGhpcy5tYXNzID0gdm9pZCAwO1xuICAgIHRoaXMuaW52TWFzcyA9IHZvaWQgMDtcbiAgICB0aGlzLm1hdGVyaWFsID0gdm9pZCAwO1xuICAgIHRoaXMubGluZWFyRGFtcGluZyA9IHZvaWQgMDtcbiAgICB0aGlzLnR5cGUgPSB2b2lkIDA7XG4gICAgdGhpcy5hbGxvd1NsZWVwID0gdm9pZCAwO1xuICAgIHRoaXMuc2xlZXBTdGF0ZSA9IHZvaWQgMDtcbiAgICB0aGlzLnNsZWVwU3BlZWRMaW1pdCA9IHZvaWQgMDtcbiAgICB0aGlzLnNsZWVwVGltZUxpbWl0ID0gdm9pZCAwO1xuICAgIHRoaXMudGltZUxhc3RTbGVlcHkgPSB2b2lkIDA7XG4gICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gdm9pZCAwO1xuICAgIHRoaXMudG9ycXVlID0gdm9pZCAwO1xuICAgIHRoaXMucXVhdGVybmlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLmluaXRRdWF0ZXJuaW9uID0gdm9pZCAwO1xuICAgIHRoaXMucHJldmlvdXNRdWF0ZXJuaW9uID0gdm9pZCAwO1xuICAgIHRoaXMuaW50ZXJwb2xhdGVkUXVhdGVybmlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eSA9IHZvaWQgMDtcbiAgICB0aGlzLmluaXRBbmd1bGFyVmVsb2NpdHkgPSB2b2lkIDA7XG4gICAgdGhpcy5zaGFwZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5zaGFwZU9mZnNldHMgPSB2b2lkIDA7XG4gICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucyA9IHZvaWQgMDtcbiAgICB0aGlzLmluZXJ0aWEgPSB2b2lkIDA7XG4gICAgdGhpcy5pbnZJbmVydGlhID0gdm9pZCAwO1xuICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkID0gdm9pZCAwO1xuICAgIHRoaXMuaW52TWFzc1NvbHZlID0gdm9pZCAwO1xuICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlID0gdm9pZCAwO1xuICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkU29sdmUgPSB2b2lkIDA7XG4gICAgdGhpcy5maXhlZFJvdGF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuYW5ndWxhckRhbXBpbmcgPSB2b2lkIDA7XG4gICAgdGhpcy5saW5lYXJGYWN0b3IgPSB2b2lkIDA7XG4gICAgdGhpcy5hbmd1bGFyRmFjdG9yID0gdm9pZCAwO1xuICAgIHRoaXMuYWFiYiA9IHZvaWQgMDtcbiAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHZvaWQgMDtcbiAgICB0aGlzLmJvdW5kaW5nUmFkaXVzID0gdm9pZCAwO1xuICAgIHRoaXMud2xhbWJkYSA9IHZvaWQgMDtcbiAgICB0aGlzLmlzVHJpZ2dlciA9IHZvaWQgMDtcbiAgICB0aGlzLmlkID0gQm9keS5pZENvdW50ZXIrKztcbiAgICB0aGlzLmluZGV4ID0gLTE7XG4gICAgdGhpcy53b3JsZCA9IG51bGw7XG4gICAgdGhpcy5wcmVTdGVwID0gbnVsbDtcbiAgICB0aGlzLnBvc3RTdGVwID0gbnVsbDtcbiAgICB0aGlzLnZsYW1iZGEgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9PT0gJ251bWJlcicgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTtcbiAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrID09PSAnbnVtYmVyJyA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xO1xuICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA6IHRydWU7XG4gICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmludGVycG9sYXRlZFBvc2l0aW9uID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmluaXRQb3NpdGlvbiA9IG5ldyBWZWMzKCk7XG5cbiAgICBpZiAob3B0aW9ucy5wb3NpdGlvbikge1xuICAgICAgdGhpcy5wb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pO1xuICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7XG4gICAgICB0aGlzLmludGVycG9sYXRlZFBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7XG4gICAgICB0aGlzLmluaXRQb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pO1xuICAgIH1cblxuICAgIHRoaXMudmVsb2NpdHkgPSBuZXcgVmVjMygpO1xuXG4gICAgaWYgKG9wdGlvbnMudmVsb2NpdHkpIHtcbiAgICAgIHRoaXMudmVsb2NpdHkuY29weShvcHRpb25zLnZlbG9jaXR5KTtcbiAgICB9XG5cbiAgICB0aGlzLmluaXRWZWxvY2l0eSA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5mb3JjZSA9IG5ldyBWZWMzKCk7XG4gICAgY29uc3QgbWFzcyA9IHR5cGVvZiBvcHRpb25zLm1hc3MgPT09ICdudW1iZXInID8gb3B0aW9ucy5tYXNzIDogMDtcbiAgICB0aGlzLm1hc3MgPSBtYXNzO1xuICAgIHRoaXMuaW52TWFzcyA9IG1hc3MgPiAwID8gMS4wIC8gbWFzcyA6IDA7XG4gICAgdGhpcy5tYXRlcmlhbCA9IG9wdGlvbnMubWF0ZXJpYWwgfHwgbnVsbDtcbiAgICB0aGlzLmxpbmVhckRhbXBpbmcgPSB0eXBlb2Ygb3B0aW9ucy5saW5lYXJEYW1waW5nID09PSAnbnVtYmVyJyA/IG9wdGlvbnMubGluZWFyRGFtcGluZyA6IDAuMDE7XG4gICAgdGhpcy50eXBlID0gbWFzcyA8PSAwLjAgPyBCb2R5LlNUQVRJQyA6IEJvZHkuRFlOQU1JQztcblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50eXBlID09PSB0eXBlb2YgQm9keS5TVEFUSUMpIHtcbiAgICAgIHRoaXMudHlwZSA9IG9wdGlvbnMudHlwZTtcbiAgICB9XG5cbiAgICB0aGlzLmFsbG93U2xlZXAgPSB0eXBlb2Ygb3B0aW9ucy5hbGxvd1NsZWVwICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYWxsb3dTbGVlcCA6IHRydWU7XG4gICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5BV0FLRTtcbiAgICB0aGlzLnNsZWVwU3BlZWRMaW1pdCA9IHR5cGVvZiBvcHRpb25zLnNsZWVwU3BlZWRMaW1pdCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnNsZWVwU3BlZWRMaW1pdCA6IDAuMTtcbiAgICB0aGlzLnNsZWVwVGltZUxpbWl0ID0gdHlwZW9mIG9wdGlvbnMuc2xlZXBUaW1lTGltaXQgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5zbGVlcFRpbWVMaW1pdCA6IDE7XG4gICAgdGhpcy50aW1lTGFzdFNsZWVweSA9IDA7XG4gICAgdGhpcy53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7XG4gICAgdGhpcy50b3JxdWUgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMucXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG4gICAgdGhpcy5pbml0UXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG4gICAgdGhpcy5wcmV2aW91c1F1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpO1xuICAgIHRoaXMuaW50ZXJwb2xhdGVkUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5cbiAgICBpZiAob3B0aW9ucy5xdWF0ZXJuaW9uKSB7XG4gICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pO1xuICAgICAgdGhpcy5pbml0UXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7XG4gICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7XG4gICAgICB0aGlzLmludGVycG9sYXRlZFF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pO1xuICAgIH1cblxuICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5ID0gbmV3IFZlYzMoKTtcblxuICAgIGlmIChvcHRpb25zLmFuZ3VsYXJWZWxvY2l0eSkge1xuICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkuY29weShvcHRpb25zLmFuZ3VsYXJWZWxvY2l0eSk7XG4gICAgfVxuXG4gICAgdGhpcy5pbml0QW5ndWxhclZlbG9jaXR5ID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLnNoYXBlcyA9IFtdO1xuICAgIHRoaXMuc2hhcGVPZmZzZXRzID0gW107XG4gICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucyA9IFtdO1xuICAgIHRoaXMuaW5lcnRpYSA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5pbnZJbmVydGlhID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmludkluZXJ0aWFXb3JsZCA9IG5ldyBNYXQzKCk7XG4gICAgdGhpcy5pbnZNYXNzU29sdmUgPSAwO1xuICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlID0gbmV3IE1hdDMoKTtcbiAgICB0aGlzLmZpeGVkUm90YXRpb24gPSB0eXBlb2Ygb3B0aW9ucy5maXhlZFJvdGF0aW9uICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuZml4ZWRSb3RhdGlvbiA6IGZhbHNlO1xuICAgIHRoaXMuYW5ndWxhckRhbXBpbmcgPSB0eXBlb2Ygb3B0aW9ucy5hbmd1bGFyRGFtcGluZyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ3VsYXJEYW1waW5nIDogMC4wMTtcbiAgICB0aGlzLmxpbmVhckZhY3RvciA9IG5ldyBWZWMzKDEsIDEsIDEpO1xuXG4gICAgaWYgKG9wdGlvbnMubGluZWFyRmFjdG9yKSB7XG4gICAgICB0aGlzLmxpbmVhckZhY3Rvci5jb3B5KG9wdGlvbnMubGluZWFyRmFjdG9yKTtcbiAgICB9XG5cbiAgICB0aGlzLmFuZ3VsYXJGYWN0b3IgPSBuZXcgVmVjMygxLCAxLCAxKTtcblxuICAgIGlmIChvcHRpb25zLmFuZ3VsYXJGYWN0b3IpIHtcbiAgICAgIHRoaXMuYW5ndWxhckZhY3Rvci5jb3B5KG9wdGlvbnMuYW5ndWxhckZhY3Rvcik7XG4gICAgfVxuXG4gICAgdGhpcy5hYWJiID0gbmV3IEFBQkIoKTtcbiAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgdGhpcy5ib3VuZGluZ1JhZGl1cyA9IDA7XG4gICAgdGhpcy53bGFtYmRhID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmlzVHJpZ2dlciA9IEJvb2xlYW4ob3B0aW9ucy5pc1RyaWdnZXIpO1xuXG4gICAgaWYgKG9wdGlvbnMuc2hhcGUpIHtcbiAgICAgIHRoaXMuYWRkU2hhcGUob3B0aW9ucy5zaGFwZSk7XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVNYXNzUHJvcGVydGllcygpO1xuICB9XG4gIC8qKlxuICAgKiBXYWtlIHRoZSBib2R5IHVwLlxuICAgKi9cblxuXG4gIHdha2VVcCgpIHtcbiAgICBjb25zdCBwcmV2U3RhdGUgPSB0aGlzLnNsZWVwU3RhdGU7XG4gICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5BV0FLRTtcbiAgICB0aGlzLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSBmYWxzZTtcblxuICAgIGlmIChwcmV2U3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5Lndha2V1cEV2ZW50KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEZvcmNlIGJvZHkgc2xlZXBcbiAgICovXG5cblxuICBzbGVlcCgpIHtcbiAgICB0aGlzLnNsZWVwU3RhdGUgPSBCb2R5LlNMRUVQSU5HO1xuICAgIHRoaXMudmVsb2NpdHkuc2V0KDAsIDAsIDApO1xuICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LnNldCgwLCAwLCAwKTtcbiAgICB0aGlzLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogQ2FsbGVkIGV2ZXJ5IHRpbWVzdGVwIHRvIHVwZGF0ZSBpbnRlcm5hbCBzbGVlcCB0aW1lciBhbmQgY2hhbmdlIHNsZWVwIHN0YXRlIGlmIG5lZWRlZC5cbiAgICogQHBhcmFtIHRpbWUgVGhlIHdvcmxkIHRpbWUgaW4gc2Vjb25kc1xuICAgKi9cblxuXG4gIHNsZWVwVGljayh0aW1lKSB7XG4gICAgaWYgKHRoaXMuYWxsb3dTbGVlcCkge1xuICAgICAgY29uc3Qgc2xlZXBTdGF0ZSA9IHRoaXMuc2xlZXBTdGF0ZTtcbiAgICAgIGNvbnN0IHNwZWVkU3F1YXJlZCA9IHRoaXMudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgdGhpcy5hbmd1bGFyVmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpO1xuICAgICAgY29uc3Qgc3BlZWRMaW1pdFNxdWFyZWQgPSB0aGlzLnNsZWVwU3BlZWRMaW1pdCAqKiAyO1xuXG4gICAgICBpZiAoc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBzcGVlZFNxdWFyZWQgPCBzcGVlZExpbWl0U3F1YXJlZCkge1xuICAgICAgICB0aGlzLnNsZWVwU3RhdGUgPSBCb2R5LlNMRUVQWTsgLy8gU2xlZXB5XG5cbiAgICAgICAgdGhpcy50aW1lTGFzdFNsZWVweSA9IHRpbWU7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5LnNsZWVweUV2ZW50KTtcbiAgICAgIH0gZWxzZSBpZiAoc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUFkgJiYgc3BlZWRTcXVhcmVkID4gc3BlZWRMaW1pdFNxdWFyZWQpIHtcbiAgICAgICAgdGhpcy53YWtlVXAoKTsgLy8gV2FrZSB1cFxuICAgICAgfSBlbHNlIGlmIChzbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQWSAmJiB0aW1lIC0gdGhpcy50aW1lTGFzdFNsZWVweSA+IHRoaXMuc2xlZXBUaW1lTGltaXQpIHtcbiAgICAgICAgdGhpcy5zbGVlcCgpOyAvLyBTbGVlcGluZ1xuXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5LnNsZWVwRXZlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogSWYgdGhlIGJvZHkgaXMgc2xlZXBpbmcsIGl0IHNob3VsZCBiZSBpbW1vdmFibGUgLyBoYXZlIGluZmluaXRlIG1hc3MgZHVyaW5nIHNvbHZlLiBXZSBzb2x2ZSBpdCBieSBoYXZpbmcgYSBzZXBhcmF0ZSBcInNvbHZlIG1hc3NcIi5cbiAgICovXG5cblxuICB1cGRhdGVTb2x2ZU1hc3NQcm9wZXJ0aWVzKCkge1xuICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgfHwgdGhpcy50eXBlID09PSBCb2R5LktJTkVNQVRJQykge1xuICAgICAgdGhpcy5pbnZNYXNzU29sdmUgPSAwO1xuICAgICAgdGhpcy5pbnZJbmVydGlhU29sdmUuc2V0WmVybygpO1xuICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZS5zZXRaZXJvKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaW52TWFzc1NvbHZlID0gdGhpcy5pbnZNYXNzO1xuICAgICAgdGhpcy5pbnZJbmVydGlhU29sdmUuY29weSh0aGlzLmludkluZXJ0aWEpO1xuICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZS5jb3B5KHRoaXMuaW52SW5lcnRpYVdvcmxkKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnQgYSB3b3JsZCBwb2ludCB0byBsb2NhbCBib2R5IGZyYW1lLlxuICAgKi9cblxuXG4gIHBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkUG9pbnQsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHtcbiAgICB3b3JsZFBvaW50LnZzdWIodGhpcy5wb3NpdGlvbiwgcmVzdWx0KTtcbiAgICB0aGlzLnF1YXRlcm5pb24uY29uanVnYXRlKCkudm11bHQocmVzdWx0LCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLyoqXG4gICAqIENvbnZlcnQgYSB3b3JsZCB2ZWN0b3IgdG8gbG9jYWwgYm9keSBmcmFtZS5cbiAgICovXG5cblxuICB2ZWN0b3JUb0xvY2FsRnJhbWUod29ybGRWZWN0b3IsIHJlc3VsdCA9IG5ldyBWZWMzKCkpIHtcbiAgICB0aGlzLnF1YXRlcm5pb24uY29uanVnYXRlKCkudm11bHQod29ybGRWZWN0b3IsIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogQ29udmVydCBhIGxvY2FsIGJvZHkgcG9pbnQgdG8gd29ybGQgZnJhbWUuXG4gICAqL1xuXG5cbiAgcG9pbnRUb1dvcmxkRnJhbWUobG9jYWxQb2ludCwgcmVzdWx0ID0gbmV3IFZlYzMoKSkge1xuICAgIHRoaXMucXVhdGVybmlvbi52bXVsdChsb2NhbFBvaW50LCByZXN1bHQpO1xuICAgIHJlc3VsdC52YWRkKHRoaXMucG9zaXRpb24sIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogQ29udmVydCBhIGxvY2FsIGJvZHkgcG9pbnQgdG8gd29ybGQgZnJhbWUuXG4gICAqL1xuXG5cbiAgdmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsVmVjdG9yLCByZXN1bHQgPSBuZXcgVmVjMygpKSB7XG4gICAgdGhpcy5xdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIHNoYXBlIHRvIHRoZSBib2R5IHdpdGggYSBsb2NhbCBvZmZzZXQgYW5kIG9yaWVudGF0aW9uLlxuICAgKiBAcmV0dXJuIFRoZSBib2R5IG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS5cbiAgICovXG5cblxuICBhZGRTaGFwZShzaGFwZSwgX29mZnNldCwgX29yaWVudGF0aW9uKSB7XG4gICAgY29uc3Qgb2Zmc2V0ID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBvcmllbnRhdGlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7XG5cbiAgICBpZiAoX29mZnNldCkge1xuICAgICAgb2Zmc2V0LmNvcHkoX29mZnNldCk7XG4gICAgfVxuXG4gICAgaWYgKF9vcmllbnRhdGlvbikge1xuICAgICAgb3JpZW50YXRpb24uY29weShfb3JpZW50YXRpb24pO1xuICAgIH1cblxuICAgIHRoaXMuc2hhcGVzLnB1c2goc2hhcGUpO1xuICAgIHRoaXMuc2hhcGVPZmZzZXRzLnB1c2gob2Zmc2V0KTtcbiAgICB0aGlzLnNoYXBlT3JpZW50YXRpb25zLnB1c2gob3JpZW50YXRpb24pO1xuICAgIHRoaXMudXBkYXRlTWFzc1Byb3BlcnRpZXMoKTtcbiAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nUmFkaXVzKCk7XG4gICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIHNoYXBlLmJvZHkgPSB0aGlzO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgYSBzaGFwZSBmcm9tIHRoZSBib2R5LlxuICAgKiBAcmV0dXJuIFRoZSBib2R5IG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS5cbiAgICovXG5cblxuICByZW1vdmVTaGFwZShzaGFwZSkge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5zaGFwZXMuaW5kZXhPZihzaGFwZSk7XG5cbiAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ1NoYXBlIGRvZXMgbm90IGJlbG9uZyB0byB0aGUgYm9keScpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgdGhpcy5zaGFwZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB0aGlzLnNoYXBlT2Zmc2V0cy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHRoaXMuc2hhcGVPcmllbnRhdGlvbnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICB0aGlzLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKCk7XG4gICAgdGhpcy51cGRhdGVCb3VuZGluZ1JhZGl1cygpO1xuICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICBzaGFwZS5ib2R5ID0gbnVsbDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHRoZSBib3VuZGluZyByYWRpdXMgb2YgdGhlIGJvZHkuIFNob3VsZCBiZSBkb25lIGlmIGFueSBvZiB0aGUgc2hhcGVzIGFyZSBjaGFuZ2VkLlxuICAgKi9cblxuXG4gIHVwZGF0ZUJvdW5kaW5nUmFkaXVzKCkge1xuICAgIGNvbnN0IHNoYXBlcyA9IHRoaXMuc2hhcGVzO1xuICAgIGNvbnN0IHNoYXBlT2Zmc2V0cyA9IHRoaXMuc2hhcGVPZmZzZXRzO1xuICAgIGNvbnN0IE4gPSBzaGFwZXMubGVuZ3RoO1xuICAgIGxldCByYWRpdXMgPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbaV07XG4gICAgICBzaGFwZS51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpO1xuICAgICAgY29uc3Qgb2Zmc2V0ID0gc2hhcGVPZmZzZXRzW2ldLmxlbmd0aCgpO1xuICAgICAgY29uc3QgciA9IHNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzO1xuXG4gICAgICBpZiAob2Zmc2V0ICsgciA+IHJhZGl1cykge1xuICAgICAgICByYWRpdXMgPSBvZmZzZXQgKyByO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuYm91bmRpbmdSYWRpdXMgPSByYWRpdXM7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIC5hYWJiXG4gICAqL1xuXG5cbiAgdXBkYXRlQUFCQigpIHtcbiAgICBjb25zdCBzaGFwZXMgPSB0aGlzLnNoYXBlcztcbiAgICBjb25zdCBzaGFwZU9mZnNldHMgPSB0aGlzLnNoYXBlT2Zmc2V0cztcbiAgICBjb25zdCBzaGFwZU9yaWVudGF0aW9ucyA9IHRoaXMuc2hhcGVPcmllbnRhdGlvbnM7XG4gICAgY29uc3QgTiA9IHNoYXBlcy5sZW5ndGg7XG4gICAgY29uc3Qgb2Zmc2V0ID0gdG1wVmVjO1xuICAgIGNvbnN0IG9yaWVudGF0aW9uID0gdG1wUXVhdDtcbiAgICBjb25zdCBib2R5UXVhdCA9IHRoaXMucXVhdGVybmlvbjtcbiAgICBjb25zdCBhYWJiID0gdGhpcy5hYWJiO1xuICAgIGNvbnN0IHNoYXBlQUFCQiA9IHVwZGF0ZUFBQkJfc2hhcGVBQUJCO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbaV07IC8vIEdldCBzaGFwZSB3b3JsZCBwb3NpdGlvblxuXG4gICAgICBib2R5UXVhdC52bXVsdChzaGFwZU9mZnNldHNbaV0sIG9mZnNldCk7XG4gICAgICBvZmZzZXQudmFkZCh0aGlzLnBvc2l0aW9uLCBvZmZzZXQpOyAvLyBHZXQgc2hhcGUgd29ybGQgcXVhdGVybmlvblxuXG4gICAgICBib2R5UXVhdC5tdWx0KHNoYXBlT3JpZW50YXRpb25zW2ldLCBvcmllbnRhdGlvbik7IC8vIEdldCBzaGFwZSBBQUJCXG5cbiAgICAgIHNoYXBlLmNhbGN1bGF0ZVdvcmxkQUFCQihvZmZzZXQsIG9yaWVudGF0aW9uLCBzaGFwZUFBQkIubG93ZXJCb3VuZCwgc2hhcGVBQUJCLnVwcGVyQm91bmQpO1xuXG4gICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICBhYWJiLmNvcHkoc2hhcGVBQUJCKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFhYmIuZXh0ZW5kKHNoYXBlQUFCQik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIGAuaW5lcnRpYVdvcmxkYCBhbmQgYC5pbnZJbmVydGlhV29ybGRgXG4gICAqL1xuXG5cbiAgdXBkYXRlSW5lcnRpYVdvcmxkKGZvcmNlKSB7XG4gICAgY29uc3QgSSA9IHRoaXMuaW52SW5lcnRpYTtcblxuICAgIGlmIChJLnggPT09IEkueSAmJiBJLnkgPT09IEkueiAmJiAhZm9yY2UpIDsgZWxzZSB7XG4gICAgICBjb25zdCBtMSA9IHVpd19tMTtcbiAgICAgIGNvbnN0IG0yID0gdWl3X20yO1xuICAgICAgbTEuc2V0Um90YXRpb25Gcm9tUXVhdGVybmlvbih0aGlzLnF1YXRlcm5pb24pO1xuICAgICAgbTEudHJhbnNwb3NlKG0yKTtcbiAgICAgIG0xLnNjYWxlKEksIG0xKTtcbiAgICAgIG0xLm1tdWx0KG0yLCB0aGlzLmludkluZXJ0aWFXb3JsZCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBBcHBseSBmb3JjZSB0byBhIHBvaW50IG9mIHRoZSBib2R5LiBUaGlzIGNvdWxkIGZvciBleGFtcGxlIGJlIGEgcG9pbnQgb24gdGhlIEJvZHkgc3VyZmFjZS5cbiAgICogQXBwbHlpbmcgZm9yY2UgdGhpcyB3YXkgd2lsbCBhZGQgdG8gQm9keS5mb3JjZSBhbmQgQm9keS50b3JxdWUuXG4gICAqIEBwYXJhbSBmb3JjZSBUaGUgYW1vdW50IG9mIGZvcmNlIHRvIGFkZC5cbiAgICogQHBhcmFtIHJlbGF0aXZlUG9pbnQgQSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3MgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLlxuICAgKi9cblxuXG4gIGFwcGx5Rm9yY2UoZm9yY2UsIHJlbGF0aXZlUG9pbnQgPSBuZXcgVmVjMygpKSB7XG4gICAgLy8gTmVlZGVkP1xuICAgIGlmICh0aGlzLnR5cGUgIT09IEJvZHkuRFlOQU1JQykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgIHRoaXMud2FrZVVwKCk7XG4gICAgfSAvLyBDb21wdXRlIHByb2R1Y2VkIHJvdGF0aW9uYWwgZm9yY2VcblxuXG4gICAgY29uc3Qgcm90Rm9yY2UgPSBCb2R5X2FwcGx5Rm9yY2Vfcm90Rm9yY2U7XG4gICAgcmVsYXRpdmVQb2ludC5jcm9zcyhmb3JjZSwgcm90Rm9yY2UpOyAvLyBBZGQgbGluZWFyIGZvcmNlXG5cbiAgICB0aGlzLmZvcmNlLnZhZGQoZm9yY2UsIHRoaXMuZm9yY2UpOyAvLyBBZGQgcm90YXRpb25hbCBmb3JjZVxuXG4gICAgdGhpcy50b3JxdWUudmFkZChyb3RGb3JjZSwgdGhpcy50b3JxdWUpO1xuICB9XG4gIC8qKlxuICAgKiBBcHBseSBmb3JjZSB0byBhIGxvY2FsIHBvaW50IGluIHRoZSBib2R5LlxuICAgKiBAcGFyYW0gZm9yY2UgVGhlIGZvcmNlIHZlY3RvciB0byBhcHBseSwgZGVmaW5lZCBsb2NhbGx5IGluIHRoZSBib2R5IGZyYW1lLlxuICAgKiBAcGFyYW0gbG9jYWxQb2ludCBBIGxvY2FsIHBvaW50IGluIHRoZSBib2R5IHRvIGFwcGx5IHRoZSBmb3JjZSBvbi5cbiAgICovXG5cblxuICBhcHBseUxvY2FsRm9yY2UobG9jYWxGb3JjZSwgbG9jYWxQb2ludCA9IG5ldyBWZWMzKCkpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB3b3JsZEZvcmNlID0gQm9keV9hcHBseUxvY2FsRm9yY2Vfd29ybGRGb3JjZTtcbiAgICBjb25zdCByZWxhdGl2ZVBvaW50V29ybGQgPSBCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQ7IC8vIFRyYW5zZm9ybSB0aGUgZm9yY2UgdmVjdG9yIHRvIHdvcmxkIHNwYWNlXG5cbiAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbEZvcmNlLCB3b3JsZEZvcmNlKTtcbiAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbFBvaW50LCByZWxhdGl2ZVBvaW50V29ybGQpO1xuICAgIHRoaXMuYXBwbHlGb3JjZSh3b3JsZEZvcmNlLCByZWxhdGl2ZVBvaW50V29ybGQpO1xuICB9XG4gIC8qKlxuICAgKiBBcHBseSB0b3JxdWUgdG8gdGhlIGJvZHkuXG4gICAqIEBwYXJhbSB0b3JxdWUgVGhlIGFtb3VudCBvZiB0b3JxdWUgdG8gYWRkLlxuICAgKi9cblxuXG4gIGFwcGx5VG9ycXVlKHRvcnF1ZSkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09IEJvZHkuRFlOQU1JQykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgIHRoaXMud2FrZVVwKCk7XG4gICAgfSAvLyBBZGQgcm90YXRpb25hbCBmb3JjZVxuXG5cbiAgICB0aGlzLnRvcnF1ZS52YWRkKHRvcnF1ZSwgdGhpcy50b3JxdWUpO1xuICB9XG4gIC8qKlxuICAgKiBBcHBseSBpbXB1bHNlIHRvIGEgcG9pbnQgb2YgdGhlIGJvZHkuIFRoaXMgY291bGQgZm9yIGV4YW1wbGUgYmUgYSBwb2ludCBvbiB0aGUgQm9keSBzdXJmYWNlLlxuICAgKiBBbiBpbXB1bHNlIGlzIGEgZm9yY2UgYWRkZWQgdG8gYSBib2R5IGR1cmluZyBhIHNob3J0IHBlcmlvZCBvZiB0aW1lIChpbXB1bHNlID0gZm9yY2UgKiB0aW1lKS5cbiAgICogSW1wdWxzZXMgd2lsbCBiZSBhZGRlZCB0byBCb2R5LnZlbG9jaXR5IGFuZCBCb2R5LmFuZ3VsYXJWZWxvY2l0eS5cbiAgICogQHBhcmFtIGltcHVsc2UgVGhlIGFtb3VudCBvZiBpbXB1bHNlIHRvIGFkZC5cbiAgICogQHBhcmFtIHJlbGF0aXZlUG9pbnQgQSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3MgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLlxuICAgKi9cblxuXG4gIGFwcGx5SW1wdWxzZShpbXB1bHNlLCByZWxhdGl2ZVBvaW50ID0gbmV3IFZlYzMoKSkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09IEJvZHkuRFlOQU1JQykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgIHRoaXMud2FrZVVwKCk7XG4gICAgfSAvLyBDb21wdXRlIHBvaW50IHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBib2R5IGNlbnRlclxuXG5cbiAgICBjb25zdCByID0gcmVsYXRpdmVQb2ludDsgLy8gQ29tcHV0ZSBwcm9kdWNlZCBjZW50cmFsIGltcHVsc2UgdmVsb2NpdHlcblxuICAgIGNvbnN0IHZlbG8gPSBCb2R5X2FwcGx5SW1wdWxzZV92ZWxvO1xuICAgIHZlbG8uY29weShpbXB1bHNlKTtcbiAgICB2ZWxvLnNjYWxlKHRoaXMuaW52TWFzcywgdmVsbyk7IC8vIEFkZCBsaW5lYXIgaW1wdWxzZVxuXG4gICAgdGhpcy52ZWxvY2l0eS52YWRkKHZlbG8sIHRoaXMudmVsb2NpdHkpOyAvLyBDb21wdXRlIHByb2R1Y2VkIHJvdGF0aW9uYWwgaW1wdWxzZSB2ZWxvY2l0eVxuXG4gICAgY29uc3Qgcm90VmVsbyA9IEJvZHlfYXBwbHlJbXB1bHNlX3JvdFZlbG87XG4gICAgci5jcm9zcyhpbXB1bHNlLCByb3RWZWxvKTtcbiAgICAvKlxuICAgICByb3RWZWxvLnggKj0gdGhpcy5pbnZJbmVydGlhLng7XG4gICAgIHJvdFZlbG8ueSAqPSB0aGlzLmludkluZXJ0aWEueTtcbiAgICAgcm90VmVsby56ICo9IHRoaXMuaW52SW5lcnRpYS56O1xuICAgICAqL1xuXG4gICAgdGhpcy5pbnZJbmVydGlhV29ybGQudm11bHQocm90VmVsbywgcm90VmVsbyk7IC8vIEFkZCByb3RhdGlvbmFsIEltcHVsc2VcblxuICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LnZhZGQocm90VmVsbywgdGhpcy5hbmd1bGFyVmVsb2NpdHkpO1xuICB9XG4gIC8qKlxuICAgKiBBcHBseSBsb2NhbGx5LWRlZmluZWQgaW1wdWxzZSB0byBhIGxvY2FsIHBvaW50IGluIHRoZSBib2R5LlxuICAgKiBAcGFyYW0gZm9yY2UgVGhlIGZvcmNlIHZlY3RvciB0byBhcHBseSwgZGVmaW5lZCBsb2NhbGx5IGluIHRoZSBib2R5IGZyYW1lLlxuICAgKiBAcGFyYW0gbG9jYWxQb2ludCBBIGxvY2FsIHBvaW50IGluIHRoZSBib2R5IHRvIGFwcGx5IHRoZSBmb3JjZSBvbi5cbiAgICovXG5cblxuICBhcHBseUxvY2FsSW1wdWxzZShsb2NhbEltcHVsc2UsIGxvY2FsUG9pbnQgPSBuZXcgVmVjMygpKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgd29ybGRJbXB1bHNlID0gQm9keV9hcHBseUxvY2FsSW1wdWxzZV93b3JsZEltcHVsc2U7XG4gICAgY29uc3QgcmVsYXRpdmVQb2ludFdvcmxkID0gQm9keV9hcHBseUxvY2FsSW1wdWxzZV9yZWxhdGl2ZVBvaW50OyAvLyBUcmFuc2Zvcm0gdGhlIGZvcmNlIHZlY3RvciB0byB3b3JsZCBzcGFjZVxuXG4gICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxJbXB1bHNlLCB3b3JsZEltcHVsc2UpO1xuICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlbGF0aXZlUG9pbnRXb3JsZCk7XG4gICAgdGhpcy5hcHBseUltcHVsc2Uod29ybGRJbXB1bHNlLCByZWxhdGl2ZVBvaW50V29ybGQpO1xuICB9XG4gIC8qKlxuICAgKiBTaG91bGQgYmUgY2FsbGVkIHdoZW5ldmVyIHlvdSBjaGFuZ2UgdGhlIGJvZHkgc2hhcGUgb3IgbWFzcy5cbiAgICovXG5cblxuICB1cGRhdGVNYXNzUHJvcGVydGllcygpIHtcbiAgICBjb25zdCBoYWxmRXh0ZW50cyA9IEJvZHlfdXBkYXRlTWFzc1Byb3BlcnRpZXNfaGFsZkV4dGVudHM7XG4gICAgdGhpcy5pbnZNYXNzID0gdGhpcy5tYXNzID4gMCA/IDEuMCAvIHRoaXMubWFzcyA6IDA7XG4gICAgY29uc3QgSSA9IHRoaXMuaW5lcnRpYTtcbiAgICBjb25zdCBmaXhlZCA9IHRoaXMuZml4ZWRSb3RhdGlvbjsgLy8gQXBwcm94aW1hdGUgd2l0aCBBQUJCIGJveFxuXG4gICAgdGhpcy51cGRhdGVBQUJCKCk7XG4gICAgaGFsZkV4dGVudHMuc2V0KCh0aGlzLmFhYmIudXBwZXJCb3VuZC54IC0gdGhpcy5hYWJiLmxvd2VyQm91bmQueCkgLyAyLCAodGhpcy5hYWJiLnVwcGVyQm91bmQueSAtIHRoaXMuYWFiYi5sb3dlckJvdW5kLnkpIC8gMiwgKHRoaXMuYWFiYi51cHBlckJvdW5kLnogLSB0aGlzLmFhYmIubG93ZXJCb3VuZC56KSAvIDIpO1xuICAgIEJveC5jYWxjdWxhdGVJbmVydGlhKGhhbGZFeHRlbnRzLCB0aGlzLm1hc3MsIEkpO1xuICAgIHRoaXMuaW52SW5lcnRpYS5zZXQoSS54ID4gMCAmJiAhZml4ZWQgPyAxLjAgLyBJLnggOiAwLCBJLnkgPiAwICYmICFmaXhlZCA/IDEuMCAvIEkueSA6IDAsIEkueiA+IDAgJiYgIWZpeGVkID8gMS4wIC8gSS56IDogMCk7XG4gICAgdGhpcy51cGRhdGVJbmVydGlhV29ybGQodHJ1ZSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB3b3JsZCB2ZWxvY2l0eSBvZiBhIHBvaW50IGluIHRoZSBib2R5LlxuICAgKiBAcGFyYW0gd29ybGRQb2ludFxuICAgKiBAcGFyYW0gcmVzdWx0XG4gICAqIEByZXR1cm4gVGhlIHJlc3VsdCB2ZWN0b3IuXG4gICAqL1xuXG5cbiAgZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod29ybGRQb2ludCwgcmVzdWx0KSB7XG4gICAgY29uc3QgciA9IG5ldyBWZWMzKCk7XG4gICAgd29ybGRQb2ludC52c3ViKHRoaXMucG9zaXRpb24sIHIpO1xuICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHIsIHJlc3VsdCk7XG4gICAgdGhpcy52ZWxvY2l0eS52YWRkKHJlc3VsdCwgcmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIC8qKlxuICAgKiBNb3ZlIHRoZSBib2R5IGZvcndhcmQgaW4gdGltZS5cbiAgICogQHBhcmFtIGR0IFRpbWUgc3RlcFxuICAgKiBAcGFyYW0gcXVhdE5vcm1hbGl6ZSBTZXQgdG8gdHJ1ZSB0byBub3JtYWxpemUgdGhlIGJvZHkgcXVhdGVybmlvblxuICAgKiBAcGFyYW0gcXVhdE5vcm1hbGl6ZUZhc3QgSWYgdGhlIHF1YXRlcm5pb24gc2hvdWxkIGJlIG5vcm1hbGl6ZWQgdXNpbmcgXCJmYXN0XCIgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uXG4gICAqL1xuXG5cbiAgaW50ZWdyYXRlKGR0LCBxdWF0Tm9ybWFsaXplLCBxdWF0Tm9ybWFsaXplRmFzdCkge1xuICAgIC8vIFNhdmUgcHJldmlvdXMgcG9zaXRpb25cbiAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24uY29weSh0aGlzLnBvc2l0aW9uKTtcbiAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbi5jb3B5KHRoaXMucXVhdGVybmlvbik7XG5cbiAgICBpZiAoISh0aGlzLnR5cGUgPT09IEJvZHkuRFlOQU1JQyB8fCB0aGlzLnR5cGUgPT09IEJvZHkuS0lORU1BVElDKSB8fCB0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHtcbiAgICAgIC8vIE9ubHkgZm9yIGR5bmFtaWNcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB2ZWxvID0gdGhpcy52ZWxvY2l0eTtcbiAgICBjb25zdCBhbmd1bGFyVmVsbyA9IHRoaXMuYW5ndWxhclZlbG9jaXR5O1xuICAgIGNvbnN0IHBvcyA9IHRoaXMucG9zaXRpb247XG4gICAgY29uc3QgZm9yY2UgPSB0aGlzLmZvcmNlO1xuICAgIGNvbnN0IHRvcnF1ZSA9IHRoaXMudG9ycXVlO1xuICAgIGNvbnN0IHF1YXQgPSB0aGlzLnF1YXRlcm5pb247XG4gICAgY29uc3QgaW52TWFzcyA9IHRoaXMuaW52TWFzcztcbiAgICBjb25zdCBpbnZJbmVydGlhID0gdGhpcy5pbnZJbmVydGlhV29ybGQ7XG4gICAgY29uc3QgbGluZWFyRmFjdG9yID0gdGhpcy5saW5lYXJGYWN0b3I7XG4gICAgY29uc3QgaU1kdCA9IGludk1hc3MgKiBkdDtcbiAgICB2ZWxvLnggKz0gZm9yY2UueCAqIGlNZHQgKiBsaW5lYXJGYWN0b3IueDtcbiAgICB2ZWxvLnkgKz0gZm9yY2UueSAqIGlNZHQgKiBsaW5lYXJGYWN0b3IueTtcbiAgICB2ZWxvLnogKz0gZm9yY2UueiAqIGlNZHQgKiBsaW5lYXJGYWN0b3IuejtcbiAgICBjb25zdCBlID0gaW52SW5lcnRpYS5lbGVtZW50cztcbiAgICBjb25zdCBhbmd1bGFyRmFjdG9yID0gdGhpcy5hbmd1bGFyRmFjdG9yO1xuICAgIGNvbnN0IHR4ID0gdG9ycXVlLnggKiBhbmd1bGFyRmFjdG9yLng7XG4gICAgY29uc3QgdHkgPSB0b3JxdWUueSAqIGFuZ3VsYXJGYWN0b3IueTtcbiAgICBjb25zdCB0eiA9IHRvcnF1ZS56ICogYW5ndWxhckZhY3Rvci56O1xuICAgIGFuZ3VsYXJWZWxvLnggKz0gZHQgKiAoZVswXSAqIHR4ICsgZVsxXSAqIHR5ICsgZVsyXSAqIHR6KTtcbiAgICBhbmd1bGFyVmVsby55ICs9IGR0ICogKGVbM10gKiB0eCArIGVbNF0gKiB0eSArIGVbNV0gKiB0eik7XG4gICAgYW5ndWxhclZlbG8ueiArPSBkdCAqIChlWzZdICogdHggKyBlWzddICogdHkgKyBlWzhdICogdHopOyAvLyBVc2UgbmV3IHZlbG9jaXR5ICAtIGxlYXAgZnJvZ1xuXG4gICAgcG9zLnggKz0gdmVsby54ICogZHQ7XG4gICAgcG9zLnkgKz0gdmVsby55ICogZHQ7XG4gICAgcG9zLnogKz0gdmVsby56ICogZHQ7XG4gICAgcXVhdC5pbnRlZ3JhdGUodGhpcy5hbmd1bGFyVmVsb2NpdHksIGR0LCB0aGlzLmFuZ3VsYXJGYWN0b3IsIHF1YXQpO1xuXG4gICAgaWYgKHF1YXROb3JtYWxpemUpIHtcbiAgICAgIGlmIChxdWF0Tm9ybWFsaXplRmFzdCkge1xuICAgICAgICBxdWF0Lm5vcm1hbGl6ZUZhc3QoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHF1YXQubm9ybWFsaXplKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSB0cnVlOyAvLyBVcGRhdGUgd29ybGQgaW5lcnRpYVxuXG4gICAgdGhpcy51cGRhdGVJbmVydGlhV29ybGQoKTtcbiAgfVxuXG59XG5Cb2R5LmlkQ291bnRlciA9IDA7XG5Cb2R5LkNPTExJREVfRVZFTlRfTkFNRSA9ICdjb2xsaWRlJztcbkJvZHkuRFlOQU1JQyA9IEJPRFlfVFlQRVMuRFlOQU1JQztcbkJvZHkuU1RBVElDID0gQk9EWV9UWVBFUy5TVEFUSUM7XG5Cb2R5LktJTkVNQVRJQyA9IEJPRFlfVFlQRVMuS0lORU1BVElDO1xuQm9keS5BV0FLRSA9IEJPRFlfU0xFRVBfU1RBVEVTLkFXQUtFO1xuQm9keS5TTEVFUFkgPSBCT0RZX1NMRUVQX1NUQVRFUy5TTEVFUFk7XG5Cb2R5LlNMRUVQSU5HID0gQk9EWV9TTEVFUF9TVEFURVMuU0xFRVBJTkc7XG5Cb2R5Lndha2V1cEV2ZW50ID0ge1xuICB0eXBlOiAnd2FrZXVwJ1xufTtcbkJvZHkuc2xlZXB5RXZlbnQgPSB7XG4gIHR5cGU6ICdzbGVlcHknXG59O1xuQm9keS5zbGVlcEV2ZW50ID0ge1xuICB0eXBlOiAnc2xlZXAnXG59O1xuY29uc3QgdG1wVmVjID0gbmV3IFZlYzMoKTtcbmNvbnN0IHRtcFF1YXQgPSBuZXcgUXVhdGVybmlvbigpO1xuY29uc3QgdXBkYXRlQUFCQl9zaGFwZUFBQkIgPSBuZXcgQUFCQigpO1xuY29uc3QgdWl3X20xID0gbmV3IE1hdDMoKTtcbmNvbnN0IHVpd19tMiA9IG5ldyBNYXQzKCk7XG5jb25zdCBCb2R5X2FwcGx5Rm9yY2Vfcm90Rm9yY2UgPSBuZXcgVmVjMygpO1xuY29uc3QgQm9keV9hcHBseUxvY2FsRm9yY2Vfd29ybGRGb3JjZSA9IG5ldyBWZWMzKCk7XG5jb25zdCBCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQgPSBuZXcgVmVjMygpO1xuY29uc3QgQm9keV9hcHBseUltcHVsc2VfdmVsbyA9IG5ldyBWZWMzKCk7XG5jb25zdCBCb2R5X2FwcGx5SW1wdWxzZV9yb3RWZWxvID0gbmV3IFZlYzMoKTtcbmNvbnN0IEJvZHlfYXBwbHlMb2NhbEltcHVsc2Vfd29ybGRJbXB1bHNlID0gbmV3IFZlYzMoKTtcbmNvbnN0IEJvZHlfYXBwbHlMb2NhbEltcHVsc2VfcmVsYXRpdmVQb2ludCA9IG5ldyBWZWMzKCk7XG5jb25zdCBCb2R5X3VwZGF0ZU1hc3NQcm9wZXJ0aWVzX2hhbGZFeHRlbnRzID0gbmV3IFZlYzMoKTtcblxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBicm9hZHBoYXNlIGltcGxlbWVudGF0aW9uc1xuICogQGF1dGhvciBzY2h0ZXBwZVxuICovXG5jbGFzcyBCcm9hZHBoYXNlIHtcbiAgLyoqXG4gICAqIFRoZSB3b3JsZCB0byBzZWFyY2ggZm9yIGNvbGxpc2lvbnMgaW4uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJZiBzZXQgdG8gdHJ1ZSwgdGhlIGJyb2FkcGhhc2UgdXNlcyBib3VuZGluZyBib3hlcyBmb3IgaW50ZXJzZWN0aW9uIHRlc3RzLCBlbHNlIGl0IHVzZXMgYm91bmRpbmcgc3BoZXJlcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFNldCB0byB0cnVlIGlmIHRoZSBvYmplY3RzIGluIHRoZSB3b3JsZCBtb3ZlZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMud29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy51c2VCb3VuZGluZ0JveGVzID0gdm9pZCAwO1xuICAgIHRoaXMuZGlydHkgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZCA9IG51bGw7XG4gICAgdGhpcy51c2VCb3VuZGluZ0JveGVzID0gZmFsc2U7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgY29sbGlzaW9uIHBhaXJzIGZyb20gdGhlIHdvcmxkXG4gICAqIEBwYXJhbSB3b3JsZCBUaGUgd29ybGQgdG8gc2VhcmNoIGluXG4gICAqIEBwYXJhbSBwMSBFbXB0eSBhcnJheSB0byBiZSBmaWxsZWQgd2l0aCBib2R5IG9iamVjdHNcbiAgICogQHBhcmFtIHAyIEVtcHR5IGFycmF5IHRvIGJlIGZpbGxlZCB3aXRoIGJvZHkgb2JqZWN0c1xuICAgKi9cblxuXG4gIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwMSwgcDIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvbGxpc2lvblBhaXJzIG5vdCBpbXBsZW1lbnRlZCBmb3IgdGhpcyBCcm9hZFBoYXNlIGNsYXNzIScpO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIGJvZHkgcGFpciBuZWVkcyB0byBiZSBpbnRlcnNlY3Rpb24gdGVzdGVkIGF0IGFsbC5cbiAgICovXG5cblxuICBuZWVkQnJvYWRwaGFzZUNvbGxpc2lvbihib2R5QSwgYm9keUIpIHtcbiAgICAvLyBDaGVjayBjb2xsaXNpb24gZmlsdGVyIG1hc2tzXG4gICAgaWYgKChib2R5QS5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlCLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwIHx8IChib2R5Qi5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlBLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSAvLyBDaGVjayB0eXBlc1xuXG5cbiAgICBpZiAoKChib2R5QS50eXBlICYgQm9keS5TVEFUSUMpICE9PSAwIHx8IGJvZHlBLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpICYmICgoYm9keUIudHlwZSAmIEJvZHkuU1RBVElDKSAhPT0gMCB8fCBib2R5Qi5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSkge1xuICAgICAgLy8gQm90aCBib2RpZXMgYXJlIHN0YXRpYyBvciBzbGVlcGluZy4gU2tpcC5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIHZvbHVtZXMgb2YgdHdvIGJvZGllcyBpbnRlcnNlY3QuXG4gICAqL1xuXG5cbiAgaW50ZXJzZWN0aW9uVGVzdChib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7XG4gICAgaWYgKHRoaXMudXNlQm91bmRpbmdCb3hlcykge1xuICAgICAgdGhpcy5kb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kb0JvdW5kaW5nU3BoZXJlQnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyBzcGhlcmVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy5cbiAgICogQHBhcmFtIHBhaXJzMSBib2R5QSBpcyBhcHBlbmRlZCB0byB0aGlzIGFycmF5IGlmIGludGVyc2VjdGlvblxuICAgKiBAcGFyYW0gcGFpcnMyIGJvZHlCIGlzIGFwcGVuZGVkIHRvIHRoaXMgYXJyYXkgaWYgaW50ZXJzZWN0aW9uXG4gICAqL1xuXG5cbiAgZG9Cb3VuZGluZ1NwaGVyZUJyb2FkcGhhc2UoYm9keUEsIGJvZHlCLCBwYWlyczEsIHBhaXJzMikge1xuICAgIGNvbnN0IHIgPSBCcm9hZHBoYXNlX2NvbGxpc2lvblBhaXJzX3I7XG4gICAgYm9keUIucG9zaXRpb24udnN1Yihib2R5QS5wb3NpdGlvbiwgcik7XG4gICAgY29uc3QgYm91bmRpbmdSYWRpdXNTdW0yID0gKGJvZHlBLmJvdW5kaW5nUmFkaXVzICsgYm9keUIuYm91bmRpbmdSYWRpdXMpICoqIDI7XG4gICAgY29uc3Qgbm9ybTIgPSByLmxlbmd0aFNxdWFyZWQoKTtcblxuICAgIGlmIChub3JtMiA8IGJvdW5kaW5nUmFkaXVzU3VtMikge1xuICAgICAgcGFpcnMxLnB1c2goYm9keUEpO1xuICAgICAgcGFpcnMyLnB1c2goYm9keUIpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIGJveGVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy5cbiAgICovXG5cblxuICBkb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7XG4gICAgaWYgKGJvZHlBLmFhYmJOZWVkc1VwZGF0ZSkge1xuICAgICAgYm9keUEudXBkYXRlQUFCQigpO1xuICAgIH1cblxuICAgIGlmIChib2R5Qi5hYWJiTmVlZHNVcGRhdGUpIHtcbiAgICAgIGJvZHlCLnVwZGF0ZUFBQkIoKTtcbiAgICB9IC8vIENoZWNrIEFBQkIgLyBBQUJCXG5cblxuICAgIGlmIChib2R5QS5hYWJiLm92ZXJsYXBzKGJvZHlCLmFhYmIpKSB7XG4gICAgICBwYWlyczEucHVzaChib2R5QSk7XG4gICAgICBwYWlyczIucHVzaChib2R5Qik7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZW1vdmVzIGR1cGxpY2F0ZSBwYWlycyBmcm9tIHRoZSBwYWlyIGFycmF5cy5cbiAgICovXG5cblxuICBtYWtlUGFpcnNVbmlxdWUocGFpcnMxLCBwYWlyczIpIHtcbiAgICBjb25zdCB0ID0gQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfdGVtcDtcbiAgICBjb25zdCBwMSA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AxO1xuICAgIGNvbnN0IHAyID0gQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDI7XG4gICAgY29uc3QgTiA9IHBhaXJzMS5sZW5ndGg7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBwMVtpXSA9IHBhaXJzMVtpXTtcbiAgICAgIHAyW2ldID0gcGFpcnMyW2ldO1xuICAgIH1cblxuICAgIHBhaXJzMS5sZW5ndGggPSAwO1xuICAgIHBhaXJzMi5sZW5ndGggPSAwO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3QgaWQxID0gcDFbaV0uaWQ7XG4gICAgICBjb25zdCBpZDIgPSBwMltpXS5pZDtcbiAgICAgIGNvbnN0IGtleSA9IGlkMSA8IGlkMiA/IGlkMSArIFwiLFwiICsgaWQyIDogaWQyICsgXCIsXCIgKyBpZDE7XG4gICAgICB0W2tleV0gPSBpO1xuICAgICAgdC5rZXlzLnB1c2goa2V5KTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdC5rZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBrZXkgPSB0LmtleXMucG9wKCk7XG4gICAgICBjb25zdCBwYWlySW5kZXggPSB0W2tleV07XG4gICAgICBwYWlyczEucHVzaChwMVtwYWlySW5kZXhdKTtcbiAgICAgIHBhaXJzMi5wdXNoKHAyW3BhaXJJbmRleF0pO1xuICAgICAgZGVsZXRlIHRba2V5XTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFRvIGJlIGltcGxlbWVudGVkIGJ5IHN1YmNhc3Nlc1xuICAgKi9cblxuXG4gIHNldFdvcmxkKHdvcmxkKSB7fVxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIHNwaGVyZXMgb2YgdHdvIGJvZGllcyBvdmVybGFwLlxuICAgKi9cblxuXG4gIHN0YXRpYyBib3VuZGluZ1NwaGVyZUNoZWNrKGJvZHlBLCBib2R5Qikge1xuICAgIGNvbnN0IGRpc3QgPSBuZXcgVmVjMygpOyAvLyBic2NfZGlzdDtcblxuICAgIGJvZHlBLnBvc2l0aW9uLnZzdWIoYm9keUIucG9zaXRpb24sIGRpc3QpO1xuICAgIGNvbnN0IHNhID0gYm9keUEuc2hhcGVzWzBdO1xuICAgIGNvbnN0IHNiID0gYm9keUIuc2hhcGVzWzBdO1xuICAgIHJldHVybiBNYXRoLnBvdyhzYS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNiLmJvdW5kaW5nU3BoZXJlUmFkaXVzLCAyKSA+IGRpc3QubGVuZ3RoU3F1YXJlZCgpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCB0aGUgYm9kaWVzIHdpdGhpbiB0aGUgQUFCQi5cbiAgICovXG5cblxuICBhYWJiUXVlcnkod29ybGQsIGFhYmIsIHJlc3VsdCkge1xuICAgIGNvbnNvbGUud2FybignLmFhYmJRdWVyeSBpcyBub3QgaW1wbGVtZW50ZWQgaW4gdGhpcyBCcm9hZHBoYXNlIHN1YmNsYXNzLicpO1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG59IC8vIFRlbXAgb2JqZWN0c1xuXG5jb25zdCBCcm9hZHBoYXNlX2NvbGxpc2lvblBhaXJzX3IgPSBuZXcgVmVjMygpO1xuY29uc3QgQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfdGVtcCA9IHtcbiAga2V5czogW11cbn07XG5jb25zdCBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV9wMSA9IFtdO1xuY29uc3QgQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDIgPSBbXTtcblxuLyoqXG4gKiBBeGlzIGFsaWduZWQgdW5pZm9ybSBncmlkIGJyb2FkcGhhc2UuXG4gKiBAdG9kbyBOZWVkcyBzdXBwb3J0IGZvciBtb3JlIHRoYW4ganVzdCBwbGFuZXMgYW5kIHNwaGVyZXMuXG4gKi9cbmNsYXNzIEdyaWRCcm9hZHBoYXNlIGV4dGVuZHMgQnJvYWRwaGFzZSB7XG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgYm94ZXMgYWxvbmcgeFxuICAgKi9cblxuICAvKipcbiAgICogTnVtYmVyIG9mIGJveGVzIGFsb25nIHlcbiAgICovXG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiBib3hlcyBhbG9uZyB6XG4gICAqL1xuXG4gIC8qKlxuICAgKiBhYWJiTWluXG4gICAqL1xuXG4gIC8qKlxuICAgKiBhYWJiTWF4XG4gICAqL1xuXG4gIC8qKlxuICAgKiBiaW5zXG4gICAqL1xuXG4gIC8qKlxuICAgKiBiaW5MZW5ndGhzXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gbnggTnVtYmVyIG9mIGJveGVzIGFsb25nIHguXG4gICAqIEBwYXJhbSBueSBOdW1iZXIgb2YgYm94ZXMgYWxvbmcgeS5cbiAgICogQHBhcmFtIG56IE51bWJlciBvZiBib3hlcyBhbG9uZyB6LlxuICAgKi9cbiAgY29uc3RydWN0b3IoYWFiYk1pbiA9IG5ldyBWZWMzKDEwMCwgMTAwLCAxMDApLCBhYWJiTWF4ID0gbmV3IFZlYzMoLTEwMCwgLTEwMCwgLTEwMCksIG54ID0gMTAsIG55ID0gMTAsIG56ID0gMTApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMubnggPSB2b2lkIDA7XG4gICAgdGhpcy5ueSA9IHZvaWQgMDtcbiAgICB0aGlzLm56ID0gdm9pZCAwO1xuICAgIHRoaXMuYWFiYk1pbiA9IHZvaWQgMDtcbiAgICB0aGlzLmFhYmJNYXggPSB2b2lkIDA7XG4gICAgdGhpcy5iaW5zID0gdm9pZCAwO1xuICAgIHRoaXMuYmluTGVuZ3RocyA9IHZvaWQgMDtcbiAgICB0aGlzLm54ID0gbng7XG4gICAgdGhpcy5ueSA9IG55O1xuICAgIHRoaXMubnogPSBuejtcbiAgICB0aGlzLmFhYmJNaW4gPSBhYWJiTWluO1xuICAgIHRoaXMuYWFiYk1heCA9IGFhYmJNYXg7XG4gICAgY29uc3QgbmJpbnMgPSB0aGlzLm54ICogdGhpcy5ueSAqIHRoaXMubno7XG5cbiAgICBpZiAobmJpbnMgPD0gMCkge1xuICAgICAgdGhyb3cgXCJHcmlkQnJvYWRwaGFzZTogRWFjaCBkaW1lbnNpb24ncyBuIG11c3QgYmUgPjBcIjtcbiAgICB9XG5cbiAgICB0aGlzLmJpbnMgPSBbXTtcbiAgICB0aGlzLmJpbkxlbmd0aHMgPSBbXTsgLy8gUmF0aGVyIHRoYW4gY29udGludWFsbHkgcmVzaXppbmcgYXJyYXlzICh0aHJhc2hpbmcgdGhlIG1lbW9yeSksIGp1c3QgcmVjb3JkIGxlbmd0aCBhbmQgYWxsb3cgdGhlbSB0byBncm93XG5cbiAgICB0aGlzLmJpbnMubGVuZ3RoID0gbmJpbnM7XG4gICAgdGhpcy5iaW5MZW5ndGhzLmxlbmd0aCA9IG5iaW5zO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuYmluczsgaSsrKSB7XG4gICAgICB0aGlzLmJpbnNbaV0gPSBbXTtcbiAgICAgIHRoaXMuYmluTGVuZ3Roc1tpXSA9IDA7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgYWxsIHRoZSBjb2xsaXNpb24gcGFpcnMgaW4gdGhlIHBoeXNpY3Mgd29ybGRcbiAgICovXG5cblxuICBjb2xsaXNpb25QYWlycyh3b3JsZCwgcGFpcnMxLCBwYWlyczIpIHtcbiAgICBjb25zdCBOID0gd29ybGQubnVtT2JqZWN0cygpO1xuICAgIGNvbnN0IGJvZGllcyA9IHdvcmxkLmJvZGllcztcbiAgICBjb25zdCBtYXggPSB0aGlzLmFhYmJNYXg7XG4gICAgY29uc3QgbWluID0gdGhpcy5hYWJiTWluO1xuICAgIGNvbnN0IG54ID0gdGhpcy5ueDtcbiAgICBjb25zdCBueSA9IHRoaXMubnk7XG4gICAgY29uc3QgbnogPSB0aGlzLm56O1xuICAgIGNvbnN0IHhzdGVwID0gbnkgKiBuejtcbiAgICBjb25zdCB5c3RlcCA9IG56O1xuICAgIGNvbnN0IHpzdGVwID0gMTtcbiAgICBjb25zdCB4bWF4ID0gbWF4Lng7XG4gICAgY29uc3QgeW1heCA9IG1heC55O1xuICAgIGNvbnN0IHptYXggPSBtYXguejtcbiAgICBjb25zdCB4bWluID0gbWluLng7XG4gICAgY29uc3QgeW1pbiA9IG1pbi55O1xuICAgIGNvbnN0IHptaW4gPSBtaW4uejtcbiAgICBjb25zdCB4bXVsdCA9IG54IC8gKHhtYXggLSB4bWluKTtcbiAgICBjb25zdCB5bXVsdCA9IG55IC8gKHltYXggLSB5bWluKTtcbiAgICBjb25zdCB6bXVsdCA9IG56IC8gKHptYXggLSB6bWluKTtcbiAgICBjb25zdCBiaW5zaXplWCA9ICh4bWF4IC0geG1pbikgLyBueDtcbiAgICBjb25zdCBiaW5zaXplWSA9ICh5bWF4IC0geW1pbikgLyBueTtcbiAgICBjb25zdCBiaW5zaXplWiA9ICh6bWF4IC0gem1pbikgLyBuejtcbiAgICBjb25zdCBiaW5SYWRpdXMgPSBNYXRoLnNxcnQoYmluc2l6ZVggKiBiaW5zaXplWCArIGJpbnNpemVZICogYmluc2l6ZVkgKyBiaW5zaXplWiAqIGJpbnNpemVaKSAqIDAuNTtcbiAgICBjb25zdCB0eXBlcyA9IFNoYXBlLnR5cGVzO1xuICAgIGNvbnN0IFNQSEVSRSA9IHR5cGVzLlNQSEVSRTtcbiAgICBjb25zdCBQTEFORSA9IHR5cGVzLlBMQU5FO1xuICAgIHR5cGVzLkJPWDtcbiAgICB0eXBlcy5DT01QT1VORDtcbiAgICB0eXBlcy5DT05WRVhQT0xZSEVEUk9OO1xuICAgIGNvbnN0IGJpbnMgPSB0aGlzLmJpbnM7XG4gICAgY29uc3QgYmluTGVuZ3RocyA9IHRoaXMuYmluTGVuZ3RocztcbiAgICBjb25zdCBOYmlucyA9IHRoaXMuYmlucy5sZW5ndGg7IC8vIFJlc2V0IGJpbnNcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYmluczsgaSsrKSB7XG4gICAgICBiaW5MZW5ndGhzW2ldID0gMDtcbiAgICB9XG5cbiAgICBjb25zdCBjZWlsID0gTWF0aC5jZWlsO1xuXG4gICAgZnVuY3Rpb24gYWRkQm94VG9CaW5zKHgwLCB5MCwgejAsIHgxLCB5MSwgejEsIGJpKSB7XG4gICAgICBsZXQgeG9mZjAgPSAoeDAgLSB4bWluKSAqIHhtdWx0IHwgMDtcbiAgICAgIGxldCB5b2ZmMCA9ICh5MCAtIHltaW4pICogeW11bHQgfCAwO1xuICAgICAgbGV0IHpvZmYwID0gKHowIC0gem1pbikgKiB6bXVsdCB8IDA7XG4gICAgICBsZXQgeG9mZjEgPSBjZWlsKCh4MSAtIHhtaW4pICogeG11bHQpO1xuICAgICAgbGV0IHlvZmYxID0gY2VpbCgoeTEgLSB5bWluKSAqIHltdWx0KTtcbiAgICAgIGxldCB6b2ZmMSA9IGNlaWwoKHoxIC0gem1pbikgKiB6bXVsdCk7XG5cbiAgICAgIGlmICh4b2ZmMCA8IDApIHtcbiAgICAgICAgeG9mZjAgPSAwO1xuICAgICAgfSBlbHNlIGlmICh4b2ZmMCA+PSBueCkge1xuICAgICAgICB4b2ZmMCA9IG54IC0gMTtcbiAgICAgIH1cblxuICAgICAgaWYgKHlvZmYwIDwgMCkge1xuICAgICAgICB5b2ZmMCA9IDA7XG4gICAgICB9IGVsc2UgaWYgKHlvZmYwID49IG55KSB7XG4gICAgICAgIHlvZmYwID0gbnkgLSAxO1xuICAgICAgfVxuXG4gICAgICBpZiAoem9mZjAgPCAwKSB7XG4gICAgICAgIHpvZmYwID0gMDtcbiAgICAgIH0gZWxzZSBpZiAoem9mZjAgPj0gbnopIHtcbiAgICAgICAgem9mZjAgPSBueiAtIDE7XG4gICAgICB9XG5cbiAgICAgIGlmICh4b2ZmMSA8IDApIHtcbiAgICAgICAgeG9mZjEgPSAwO1xuICAgICAgfSBlbHNlIGlmICh4b2ZmMSA+PSBueCkge1xuICAgICAgICB4b2ZmMSA9IG54IC0gMTtcbiAgICAgIH1cblxuICAgICAgaWYgKHlvZmYxIDwgMCkge1xuICAgICAgICB5b2ZmMSA9IDA7XG4gICAgICB9IGVsc2UgaWYgKHlvZmYxID49IG55KSB7XG4gICAgICAgIHlvZmYxID0gbnkgLSAxO1xuICAgICAgfVxuXG4gICAgICBpZiAoem9mZjEgPCAwKSB7XG4gICAgICAgIHpvZmYxID0gMDtcbiAgICAgIH0gZWxzZSBpZiAoem9mZjEgPj0gbnopIHtcbiAgICAgICAgem9mZjEgPSBueiAtIDE7XG4gICAgICB9XG5cbiAgICAgIHhvZmYwICo9IHhzdGVwO1xuICAgICAgeW9mZjAgKj0geXN0ZXA7XG4gICAgICB6b2ZmMCAqPSB6c3RlcDtcbiAgICAgIHhvZmYxICo9IHhzdGVwO1xuICAgICAgeW9mZjEgKj0geXN0ZXA7XG4gICAgICB6b2ZmMSAqPSB6c3RlcDtcblxuICAgICAgZm9yIChsZXQgeG9mZiA9IHhvZmYwOyB4b2ZmIDw9IHhvZmYxOyB4b2ZmICs9IHhzdGVwKSB7XG4gICAgICAgIGZvciAobGV0IHlvZmYgPSB5b2ZmMDsgeW9mZiA8PSB5b2ZmMTsgeW9mZiArPSB5c3RlcCkge1xuICAgICAgICAgIGZvciAobGV0IHpvZmYgPSB6b2ZmMDsgem9mZiA8PSB6b2ZmMTsgem9mZiArPSB6c3RlcCkge1xuICAgICAgICAgICAgY29uc3QgaWR4ID0geG9mZiArIHlvZmYgKyB6b2ZmO1xuICAgICAgICAgICAgYmluc1tpZHhdW2Jpbkxlbmd0aHNbaWR4XSsrXSA9IGJpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gUHV0IGFsbCBib2RpZXMgaW50byB0aGUgYmluc1xuXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTtcbiAgICAgIGNvbnN0IHNpID0gYmkuc2hhcGVzWzBdO1xuXG4gICAgICBzd2l0Y2ggKHNpLnR5cGUpIHtcbiAgICAgICAgY2FzZSBTUEhFUkU6XG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uc3Qgc2hhcGUgPSBzaTsgLy8gUHV0IGluIGJpblxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgb3ZlcmxhcCB3aXRoIG90aGVyIGJpbnNcblxuICAgICAgICAgICAgY29uc3QgeCA9IGJpLnBvc2l0aW9uLng7XG4gICAgICAgICAgICBjb25zdCB5ID0gYmkucG9zaXRpb24ueTtcbiAgICAgICAgICAgIGNvbnN0IHogPSBiaS5wb3NpdGlvbi56O1xuICAgICAgICAgICAgY29uc3QgciA9IHNoYXBlLnJhZGl1cztcbiAgICAgICAgICAgIGFkZEJveFRvQmlucyh4IC0gciwgeSAtIHIsIHogLSByLCB4ICsgciwgeSArIHIsIHogKyByLCBiaSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgY2FzZSBQTEFORTpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBzaGFwZSA9IHNpO1xuXG4gICAgICAgICAgICBpZiAoc2hhcGUud29ybGROb3JtYWxOZWVkc1VwZGF0ZSkge1xuICAgICAgICAgICAgICBzaGFwZS5jb21wdXRlV29ybGROb3JtYWwoYmkucXVhdGVybmlvbik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHBsYW5lTm9ybWFsID0gc2hhcGUud29ybGROb3JtYWw7IC8vUmVsYXRpdmUgcG9zaXRpb24gZnJvbSBvcmlnaW4gb2YgcGxhbmUgb2JqZWN0IHRvIHRoZSBmaXJzdCBiaW5cbiAgICAgICAgICAgIC8vSW5jcmVtZW50ZWQgYXMgd2UgaXRlcmF0ZSB0aHJvdWdoIHRoZSBiaW5zXG5cbiAgICAgICAgICAgIGNvbnN0IHhyZXNldCA9IHhtaW4gKyBiaW5zaXplWCAqIDAuNSAtIGJpLnBvc2l0aW9uLng7XG4gICAgICAgICAgICBjb25zdCB5cmVzZXQgPSB5bWluICsgYmluc2l6ZVkgKiAwLjUgLSBiaS5wb3NpdGlvbi55O1xuICAgICAgICAgICAgY29uc3QgenJlc2V0ID0gem1pbiArIGJpbnNpemVaICogMC41IC0gYmkucG9zaXRpb24uejtcbiAgICAgICAgICAgIGNvbnN0IGQgPSBHcmlkQnJvYWRwaGFzZV9jb2xsaXNpb25QYWlyc19kO1xuICAgICAgICAgICAgZC5zZXQoeHJlc2V0LCB5cmVzZXQsIHpyZXNldCk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IHhpID0gMCwgeG9mZiA9IDA7IHhpICE9PSBueDsgeGkrKywgeG9mZiArPSB4c3RlcCwgZC55ID0geXJlc2V0LCBkLnggKz0gYmluc2l6ZVgpIHtcbiAgICAgICAgICAgICAgZm9yIChsZXQgeWkgPSAwLCB5b2ZmID0gMDsgeWkgIT09IG55OyB5aSsrLCB5b2ZmICs9IHlzdGVwLCBkLnogPSB6cmVzZXQsIGQueSArPSBiaW5zaXplWSkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IHppID0gMCwgem9mZiA9IDA7IHppICE9PSBuejsgemkrKywgem9mZiArPSB6c3RlcCwgZC56ICs9IGJpbnNpemVaKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoZC5kb3QocGxhbmVOb3JtYWwpIDwgYmluUmFkaXVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkeCA9IHhvZmYgKyB5b2ZmICsgem9mZjtcbiAgICAgICAgICAgICAgICAgICAgYmluc1tpZHhdW2Jpbkxlbmd0aHNbaWR4XSsrXSA9IGJpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZiAoYmkuYWFiYk5lZWRzVXBkYXRlKSB7XG4gICAgICAgICAgICAgIGJpLnVwZGF0ZUFBQkIoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYWRkQm94VG9CaW5zKGJpLmFhYmIubG93ZXJCb3VuZC54LCBiaS5hYWJiLmxvd2VyQm91bmQueSwgYmkuYWFiYi5sb3dlckJvdW5kLnosIGJpLmFhYmIudXBwZXJCb3VuZC54LCBiaS5hYWJiLnVwcGVyQm91bmQueSwgYmkuYWFiYi51cHBlckJvdW5kLnosIGJpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIENoZWNrIGVhY2ggYmluXG5cblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYmluczsgaSsrKSB7XG4gICAgICBjb25zdCBiaW5MZW5ndGggPSBiaW5MZW5ndGhzW2ldOyAvL1NraXAgYmlucyB3aXRoIG5vIHBvdGVudGlhbCBjb2xsaXNpb25zXG5cbiAgICAgIGlmIChiaW5MZW5ndGggPiAxKSB7XG4gICAgICAgIGNvbnN0IGJpbiA9IGJpbnNbaV07IC8vIERvIE5eMiBicm9hZHBoYXNlIGluc2lkZVxuXG4gICAgICAgIGZvciAobGV0IHhpID0gMDsgeGkgIT09IGJpbkxlbmd0aDsgeGkrKykge1xuICAgICAgICAgIGNvbnN0IGJpID0gYmluW3hpXTtcblxuICAgICAgICAgIGZvciAobGV0IHlpID0gMDsgeWkgIT09IHhpOyB5aSsrKSB7XG4gICAgICAgICAgICBjb25zdCBiaiA9IGJpblt5aV07XG5cbiAgICAgICAgICAgIGlmICh0aGlzLm5lZWRCcm9hZHBoYXNlQ29sbGlzaW9uKGJpLCBiaikpIHtcbiAgICAgICAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcGFpcnMxLCBwYWlyczIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy9cdGZvciAobGV0IHppID0gMCwgem9mZj0wOyB6aSA8IG56OyB6aSsrLCB6b2ZmKz0genN0ZXApIHtcbiAgICAvL1x0XHRjb25zb2xlLmxvZyhcImxheWVyIFwiK3ppKTtcbiAgICAvL1x0XHRmb3IgKGxldCB5aSA9IDAsIHlvZmY9MDsgeWkgPCBueTsgeWkrKywgeW9mZiArPSB5c3RlcCkge1xuICAgIC8vXHRcdFx0Y29uc3Qgcm93ID0gJyc7XG4gICAgLy9cdFx0XHRmb3IgKGxldCB4aSA9IDAsIHhvZmY9MDsgeGkgPCBueDsgeGkrKywgeG9mZiArPSB4c3RlcCkge1xuICAgIC8vXHRcdFx0XHRjb25zdCBpZHggPSB4b2ZmICsgeW9mZiArIHpvZmY7XG4gICAgLy9cdFx0XHRcdHJvdyArPSAnICcgKyBiaW5MZW5ndGhzW2lkeF07XG4gICAgLy9cdFx0XHR9XG4gICAgLy9cdFx0XHRjb25zb2xlLmxvZyhyb3cpO1xuICAgIC8vXHRcdH1cbiAgICAvL1x0fVxuXG5cbiAgICB0aGlzLm1ha2VQYWlyc1VuaXF1ZShwYWlyczEsIHBhaXJzMik7XG4gIH1cblxufVxuY29uc3QgR3JpZEJyb2FkcGhhc2VfY29sbGlzaW9uUGFpcnNfZCA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogTmFpdmUgYnJvYWRwaGFzZSBpbXBsZW1lbnRhdGlvbiwgdXNlZCBpbiBsYWNrIG9mIGJldHRlciBvbmVzLlxuICpcbiAqIFRoZSBuYWl2ZSBicm9hZHBoYXNlIGxvb2tzIGF0IGFsbCBwb3NzaWJsZSBwYWlycyB3aXRob3V0IHJlc3RyaWN0aW9uLCB0aGVyZWZvcmUgaXQgaGFzIGNvbXBsZXhpdHkgTl4yIF8od2hpY2ggaXMgYmFkKV9cbiAqL1xuY2xhc3MgTmFpdmVCcm9hZHBoYXNlIGV4dGVuZHMgQnJvYWRwaGFzZSB7XG4gIC8qKlxuICAgKiBAdG9kbyBSZW1vdmUgdXNlbGVzcyBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGFsbCB0aGUgY29sbGlzaW9uIHBhaXJzIGluIHRoZSBwaHlzaWNzIHdvcmxkXG4gICAqL1xuXG5cbiAgY29sbGlzaW9uUGFpcnMod29ybGQsIHBhaXJzMSwgcGFpcnMyKSB7XG4gICAgY29uc3QgYm9kaWVzID0gd29ybGQuYm9kaWVzO1xuICAgIGNvbnN0IG4gPSBib2RpZXMubGVuZ3RoO1xuICAgIGxldCBiaTtcbiAgICBsZXQgYmo7IC8vIE5haXZlIE5eMiBmdHchXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gbjsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gaTsgaisrKSB7XG4gICAgICAgIGJpID0gYm9kaWVzW2ldO1xuICAgICAgICBiaiA9IGJvZGllc1tqXTtcblxuICAgICAgICBpZiAoIXRoaXMubmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYmksIGJqKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcGFpcnMxLCBwYWlyczIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhbGwgdGhlIGJvZGllcyB3aXRoaW4gYW4gQUFCQi5cbiAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSB0byBzdG9yZSByZXN1bHRpbmcgYm9kaWVzIGluLlxuICAgKi9cblxuXG4gIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0ID0gW10pIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmxkLmJvZGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYiA9IHdvcmxkLmJvZGllc1tpXTtcblxuICAgICAgaWYgKGIuYWFiYk5lZWRzVXBkYXRlKSB7XG4gICAgICAgIGIudXBkYXRlQUFCQigpO1xuICAgICAgfSAvLyBVZ2x5IGhhY2sgdW50aWwgQm9keSBnZXRzIGFhYmJcblxuXG4gICAgICBpZiAoYi5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxufVxuXG4vKipcbiAqIFN0b3JhZ2UgZm9yIFJheSBjYXN0aW5nIGRhdGFcbiAqL1xuY2xhc3MgUmF5Y2FzdFJlc3VsdCB7XG4gIC8qKlxuICAgKiByYXlGcm9tV29ybGRcbiAgICovXG5cbiAgLyoqXG4gICAqIHJheVRvV29ybGRcbiAgICovXG5cbiAgLyoqXG4gICAqIGhpdE5vcm1hbFdvcmxkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBoaXRQb2ludFdvcmxkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBoYXNIaXRcbiAgICovXG5cbiAgLyoqXG4gICAqIHNoYXBlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBib2R5XG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgaW5kZXggb2YgdGhlIGhpdCB0cmlhbmdsZSwgaWYgdGhlIGhpdCBzaGFwZSB3YXMgYSB0cmltZXNoXG4gICAqL1xuXG4gIC8qKlxuICAgKiBEaXN0YW5jZSB0byB0aGUgaGl0LiBXaWxsIGJlIHNldCB0byAtMSBpZiB0aGVyZSB3YXMgbm8gaGl0XG4gICAqL1xuXG4gIC8qKlxuICAgKiBJZiB0aGUgcmF5IHNob3VsZCBzdG9wIHRyYXZlcnNpbmcgdGhlIGJvZGllc1xuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5yYXlGcm9tV29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy5yYXlUb1dvcmxkID0gdm9pZCAwO1xuICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy5oaXRQb2ludFdvcmxkID0gdm9pZCAwO1xuICAgIHRoaXMuaGFzSGl0ID0gdm9pZCAwO1xuICAgIHRoaXMuc2hhcGUgPSB2b2lkIDA7XG4gICAgdGhpcy5ib2R5ID0gdm9pZCAwO1xuICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gdm9pZCAwO1xuICAgIHRoaXMuZGlzdGFuY2UgPSB2b2lkIDA7XG4gICAgdGhpcy5zaG91bGRTdG9wID0gdm9pZCAwO1xuICAgIHRoaXMucmF5RnJvbVdvcmxkID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLnJheVRvV29ybGQgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMuaGl0UG9pbnRXb3JsZCA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5oYXNIaXQgPSBmYWxzZTtcbiAgICB0aGlzLnNoYXBlID0gbnVsbDtcbiAgICB0aGlzLmJvZHkgPSBudWxsO1xuICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gLTE7XG4gICAgdGhpcy5kaXN0YW5jZSA9IC0xO1xuICAgIHRoaXMuc2hvdWxkU3RvcCA9IGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBSZXNldCBhbGwgcmVzdWx0IGRhdGEuXG4gICAqL1xuXG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5yYXlGcm9tV29ybGQuc2V0WmVybygpO1xuICAgIHRoaXMucmF5VG9Xb3JsZC5zZXRaZXJvKCk7XG4gICAgdGhpcy5oaXROb3JtYWxXb3JsZC5zZXRaZXJvKCk7XG4gICAgdGhpcy5oaXRQb2ludFdvcmxkLnNldFplcm8oKTtcbiAgICB0aGlzLmhhc0hpdCA9IGZhbHNlO1xuICAgIHRoaXMuc2hhcGUgPSBudWxsO1xuICAgIHRoaXMuYm9keSA9IG51bGw7XG4gICAgdGhpcy5oaXRGYWNlSW5kZXggPSAtMTtcbiAgICB0aGlzLmRpc3RhbmNlID0gLTE7XG4gICAgdGhpcy5zaG91bGRTdG9wID0gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIGFib3J0XG4gICAqL1xuXG5cbiAgYWJvcnQoKSB7XG4gICAgdGhpcy5zaG91bGRTdG9wID0gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogU2V0IHJlc3VsdCBkYXRhLlxuICAgKi9cblxuXG4gIHNldChyYXlGcm9tV29ybGQsIHJheVRvV29ybGQsIGhpdE5vcm1hbFdvcmxkLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpIHtcbiAgICB0aGlzLnJheUZyb21Xb3JsZC5jb3B5KHJheUZyb21Xb3JsZCk7XG4gICAgdGhpcy5yYXlUb1dvcmxkLmNvcHkocmF5VG9Xb3JsZCk7XG4gICAgdGhpcy5oaXROb3JtYWxXb3JsZC5jb3B5KGhpdE5vcm1hbFdvcmxkKTtcbiAgICB0aGlzLmhpdFBvaW50V29ybGQuY29weShoaXRQb2ludFdvcmxkKTtcbiAgICB0aGlzLnNoYXBlID0gc2hhcGU7XG4gICAgdGhpcy5ib2R5ID0gYm9keTtcbiAgICB0aGlzLmRpc3RhbmNlID0gZGlzdGFuY2U7XG4gIH1cblxufVxuXG5sZXQgX1NoYXBlJHR5cGVzJFNQSEVSRSwgX1NoYXBlJHR5cGVzJFBMQU5FLCBfU2hhcGUkdHlwZXMkQk9YLCBfU2hhcGUkdHlwZXMkQ1lMSU5ERVIsIF9TaGFwZSR0eXBlcyRDT05WRVhQTywgX1NoYXBlJHR5cGVzJEhFSUdIVEZJLCBfU2hhcGUkdHlwZXMkVFJJTUVTSDtcblxuLyoqXG4gKiBSQVlfTU9ERVNcbiAqL1xuY29uc3QgUkFZX01PREVTID0ge1xuICAvKiogQ0xPU0VTVCAqL1xuICBDTE9TRVNUOiAxLFxuXG4gIC8qKiBBTlkgKi9cbiAgQU5ZOiAyLFxuXG4gIC8qKiBBTEwgKi9cbiAgQUxMOiA0XG59O1xuLyoqXG4gKiBSYXlNb2RlXG4gKi9cblxuX1NoYXBlJHR5cGVzJFNQSEVSRSA9IFNoYXBlLnR5cGVzLlNQSEVSRTtcbl9TaGFwZSR0eXBlcyRQTEFORSA9IFNoYXBlLnR5cGVzLlBMQU5FO1xuX1NoYXBlJHR5cGVzJEJPWCA9IFNoYXBlLnR5cGVzLkJPWDtcbl9TaGFwZSR0eXBlcyRDWUxJTkRFUiA9IFNoYXBlLnR5cGVzLkNZTElOREVSO1xuX1NoYXBlJHR5cGVzJENPTlZFWFBPID0gU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTjtcbl9TaGFwZSR0eXBlcyRIRUlHSFRGSSA9IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxEO1xuX1NoYXBlJHR5cGVzJFRSSU1FU0ggPSBTaGFwZS50eXBlcy5UUklNRVNIO1xuXG4vKipcbiAqIEEgbGluZSBpbiAzRCBzcGFjZSB0aGF0IGludGVyc2VjdHMgYm9kaWVzIGFuZCByZXR1cm4gcG9pbnRzLlxuICovXG5jbGFzcyBSYXkge1xuICAvKipcbiAgICogZnJvbVxuICAgKi9cblxuICAvKipcbiAgICogdG9cbiAgICovXG5cbiAgLyoqXG4gICAqIGRpcmVjdGlvblxuICAgKi9cblxuICAvKipcbiAgICogVGhlIHByZWNpc2lvbiBvZiB0aGUgcmF5LiBVc2VkIHdoZW4gY2hlY2tpbmcgcGFyYWxsZWxpdHkgZXRjLlxuICAgKiBAZGVmYXVsdCAwLjAwMDFcbiAgICovXG5cbiAgLyoqXG4gICAqIFNldCB0byBgZmFsc2VgIGlmIHlvdSBkb24ndCB3YW50IHRoZSBSYXkgdG8gdGFrZSBgY29sbGlzaW9uUmVzcG9uc2VgIGZsYWdzIGludG8gYWNjb3VudCBvbiBib2RpZXMgYW5kIHNoYXBlcy5cbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cblxuICAvKipcbiAgICogSWYgc2V0IHRvIGB0cnVlYCwgdGhlIHJheSBza2lwcyBhbnkgaGl0cyB3aXRoIG5vcm1hbC5kb3QocmF5RGlyZWN0aW9uKSA8IDAuXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBjb2xsaXNpb25GaWx0ZXJNYXNrXG4gICAqIEBkZWZhdWx0IC0xXG4gICAqL1xuXG4gIC8qKlxuICAgKiBjb2xsaXNpb25GaWx0ZXJHcm91cFxuICAgKiBAZGVmYXVsdCAtMVxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGludGVyc2VjdGlvbiBtb2RlLiBTaG91bGQgYmUgUmF5LkFOWSwgUmF5LkFMTCBvciBSYXkuQ0xPU0VTVC5cbiAgICogQGRlZmF1bHQgUkFZLkFOWVxuICAgKi9cblxuICAvKipcbiAgICogQ3VycmVudCByZXN1bHQgb2JqZWN0LlxuICAgKi9cblxuICAvKipcbiAgICogV2lsbCBiZSBzZXQgdG8gYHRydWVgIGR1cmluZyBpbnRlcnNlY3RXb3JsZCgpIGlmIHRoZSByYXkgaGl0IGFueXRoaW5nLlxuICAgKi9cblxuICAvKipcbiAgICogVXNlci1wcm92aWRlZCByZXN1bHQgY2FsbGJhY2suIFdpbGwgYmUgdXNlZCBpZiBtb2RlIGlzIFJheS5BTEwuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBDTE9TRVNUXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBTllcbiAgICovXG5cbiAgLyoqXG4gICAqIEFMTFxuICAgKi9cbiAgZ2V0IFtfU2hhcGUkdHlwZXMkU1BIRVJFXSgpIHtcbiAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0U3BoZXJlO1xuICB9XG5cbiAgZ2V0IFtfU2hhcGUkdHlwZXMkUExBTkVdKCkge1xuICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RQbGFuZTtcbiAgfVxuXG4gIGdldCBbX1NoYXBlJHR5cGVzJEJPWF0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdEJveDtcbiAgfVxuXG4gIGdldCBbX1NoYXBlJHR5cGVzJENZTElOREVSXSgpIHtcbiAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0Q29udmV4O1xuICB9XG5cbiAgZ2V0IFtfU2hhcGUkdHlwZXMkQ09OVkVYUE9dKCkge1xuICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXg7XG4gIH1cblxuICBnZXQgW19TaGFwZSR0eXBlcyRIRUlHSFRGSV0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdEhlaWdodGZpZWxkO1xuICB9XG5cbiAgZ2V0IFtfU2hhcGUkdHlwZXMkVFJJTUVTSF0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdFRyaW1lc2g7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihmcm9tID0gbmV3IFZlYzMoKSwgdG8gPSBuZXcgVmVjMygpKSB7XG4gICAgdGhpcy5mcm9tID0gdm9pZCAwO1xuICAgIHRoaXMudG8gPSB2b2lkIDA7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5wcmVjaXNpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5jaGVja0NvbGxpc2lvblJlc3BvbnNlID0gdm9pZCAwO1xuICAgIHRoaXMuc2tpcEJhY2tmYWNlcyA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB2b2lkIDA7XG4gICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IHZvaWQgMDtcbiAgICB0aGlzLm1vZGUgPSB2b2lkIDA7XG4gICAgdGhpcy5yZXN1bHQgPSB2b2lkIDA7XG4gICAgdGhpcy5oYXNIaXQgPSB2b2lkIDA7XG4gICAgdGhpcy5jYWxsYmFjayA9IHZvaWQgMDtcbiAgICB0aGlzLmZyb20gPSBmcm9tLmNsb25lKCk7XG4gICAgdGhpcy50byA9IHRvLmNsb25lKCk7XG4gICAgdGhpcy5kaXJlY3Rpb24gPSBuZXcgVmVjMygpO1xuICAgIHRoaXMucHJlY2lzaW9uID0gMC4wMDAxO1xuICAgIHRoaXMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSA9IHRydWU7XG4gICAgdGhpcy5za2lwQmFja2ZhY2VzID0gZmFsc2U7XG4gICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gLTE7XG4gICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCA9IC0xO1xuICAgIHRoaXMubW9kZSA9IFJheS5BTlk7XG4gICAgdGhpcy5yZXN1bHQgPSBuZXcgUmF5Y2FzdFJlc3VsdCgpO1xuICAgIHRoaXMuaGFzSGl0ID0gZmFsc2U7XG5cbiAgICB0aGlzLmNhbGxiYWNrID0gcmVzdWx0ID0+IHt9O1xuICB9XG4gIC8qKlxuICAgKiBEbyBpdGVyc2VjdGlvbiBhZ2FpbnN0IGFsbCBib2RpZXMgaW4gdGhlIGdpdmVuIFdvcmxkLlxuICAgKiBAcmV0dXJuIFRydWUgaWYgdGhlIHJheSBoaXQgYW55dGhpbmcsIG90aGVyd2lzZSBmYWxzZS5cbiAgICovXG5cblxuICBpbnRlcnNlY3RXb3JsZCh3b3JsZCwgb3B0aW9ucykge1xuICAgIHRoaXMubW9kZSA9IG9wdGlvbnMubW9kZSB8fCBSYXkuQU5ZO1xuICAgIHRoaXMucmVzdWx0ID0gb3B0aW9ucy5yZXN1bHQgfHwgbmV3IFJheWNhc3RSZXN1bHQoKTtcbiAgICB0aGlzLnNraXBCYWNrZmFjZXMgPSAhIW9wdGlvbnMuc2tpcEJhY2tmYWNlcztcbiAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xO1xuICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogLTE7XG4gICAgdGhpcy5jaGVja0NvbGxpc2lvblJlc3BvbnNlID0gdHlwZW9mIG9wdGlvbnMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgOiB0cnVlO1xuXG4gICAgaWYgKG9wdGlvbnMuZnJvbSkge1xuICAgICAgdGhpcy5mcm9tLmNvcHkob3B0aW9ucy5mcm9tKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy50bykge1xuICAgICAgdGhpcy50by5jb3B5KG9wdGlvbnMudG8pO1xuICAgIH1cblxuICAgIHRoaXMuY2FsbGJhY2sgPSBvcHRpb25zLmNhbGxiYWNrIHx8ICgoKSA9PiB7fSk7XG5cbiAgICB0aGlzLmhhc0hpdCA9IGZhbHNlO1xuICAgIHRoaXMucmVzdWx0LnJlc2V0KCk7XG4gICAgdGhpcy51cGRhdGVEaXJlY3Rpb24oKTtcbiAgICB0aGlzLmdldEFBQkIodG1wQUFCQiQxKTtcbiAgICB0bXBBcnJheS5sZW5ndGggPSAwO1xuICAgIHdvcmxkLmJyb2FkcGhhc2UuYWFiYlF1ZXJ5KHdvcmxkLCB0bXBBQUJCJDEsIHRtcEFycmF5KTtcbiAgICB0aGlzLmludGVyc2VjdEJvZGllcyh0bXBBcnJheSk7XG4gICAgcmV0dXJuIHRoaXMuaGFzSGl0O1xuICB9XG4gIC8qKlxuICAgKiBTaG9vdCBhIHJheSBhdCBhIGJvZHksIGdldCBiYWNrIGluZm9ybWF0aW9uIGFib3V0IHRoZSBoaXQuXG4gICAqIEBkZXByZWNhdGVkIEBwYXJhbSByZXN1bHQgc2V0IHRoZSByZXN1bHQgcHJvcGVydHkgb2YgdGhlIFJheSBpbnN0ZWFkLlxuICAgKi9cblxuXG4gIGludGVyc2VjdEJvZHkoYm9keSwgcmVzdWx0KSB7XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpO1xuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2U7XG5cbiAgICBpZiAoY2hlY2tDb2xsaXNpb25SZXNwb25zZSAmJiAhYm9keS5jb2xsaXNpb25SZXNwb25zZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICgodGhpcy5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHkuY29sbGlzaW9uRmlsdGVyTWFzaykgPT09IDAgfHwgKGJvZHkuY29sbGlzaW9uRmlsdGVyR3JvdXAgJiB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgeGkgPSBpbnRlcnNlY3RCb2R5X3hpO1xuICAgIGNvbnN0IHFpID0gaW50ZXJzZWN0Qm9keV9xaTtcblxuICAgIGZvciAobGV0IGkgPSAwLCBOID0gYm9keS5zaGFwZXMubGVuZ3RoOyBpIDwgTjsgaSsrKSB7XG4gICAgICBjb25zdCBzaGFwZSA9IGJvZHkuc2hhcGVzW2ldO1xuXG4gICAgICBpZiAoY2hlY2tDb2xsaXNpb25SZXNwb25zZSAmJiAhc2hhcGUuY29sbGlzaW9uUmVzcG9uc2UpIHtcbiAgICAgICAgY29udGludWU7IC8vIFNraXBcbiAgICAgIH1cblxuICAgICAgYm9keS5xdWF0ZXJuaW9uLm11bHQoYm9keS5zaGFwZU9yaWVudGF0aW9uc1tpXSwgcWkpO1xuICAgICAgYm9keS5xdWF0ZXJuaW9uLnZtdWx0KGJvZHkuc2hhcGVPZmZzZXRzW2ldLCB4aSk7XG4gICAgICB4aS52YWRkKGJvZHkucG9zaXRpb24sIHhpKTtcbiAgICAgIHRoaXMuaW50ZXJzZWN0U2hhcGUoc2hhcGUsIHFpLCB4aSwgYm9keSk7XG5cbiAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogU2hvb3QgYSByYXkgYXQgYW4gYXJyYXkgYm9kaWVzLCBnZXQgYmFjayBpbmZvcm1hdGlvbiBhYm91dCB0aGUgaGl0LlxuICAgKiBAcGFyYW0gYm9kaWVzIEFuIGFycmF5IG9mIEJvZHkgb2JqZWN0cy5cbiAgICogQGRlcHJlY2F0ZWQgQHBhcmFtIHJlc3VsdCBzZXQgdGhlIHJlc3VsdCBwcm9wZXJ0eSBvZiB0aGUgUmF5IGluc3RlYWQuXG4gICAqXG4gICAqL1xuXG5cbiAgaW50ZXJzZWN0Qm9kaWVzKGJvZGllcywgcmVzdWx0KSB7XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwLCBsID0gYm9kaWVzLmxlbmd0aDsgIXRoaXMucmVzdWx0LnNob3VsZFN0b3AgJiYgaSA8IGw7IGkrKykge1xuICAgICAgdGhpcy5pbnRlcnNlY3RCb2R5KGJvZGllc1tpXSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBkaXJlY3Rpb24gdmVjdG9yLlxuICAgKi9cblxuXG4gIHVwZGF0ZURpcmVjdGlvbigpIHtcbiAgICB0aGlzLnRvLnZzdWIodGhpcy5mcm9tLCB0aGlzLmRpcmVjdGlvbik7XG4gICAgdGhpcy5kaXJlY3Rpb24ubm9ybWFsaXplKCk7XG4gIH1cblxuICBpbnRlcnNlY3RTaGFwZShzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHkpIHtcbiAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOyAvLyBDaGVja2luZyBib3VuZGluZ1NwaGVyZVxuXG4gICAgY29uc3QgZGlzdGFuY2UgPSBkaXN0YW5jZUZyb21JbnRlcnNlY3Rpb24oZnJvbSwgdGhpcy5kaXJlY3Rpb24sIHBvc2l0aW9uKTtcblxuICAgIGlmIChkaXN0YW5jZSA+IHNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgaW50ZXJzZWN0TWV0aG9kID0gdGhpc1tzaGFwZS50eXBlXTtcblxuICAgIGlmIChpbnRlcnNlY3RNZXRob2QpIHtcbiAgICAgIGludGVyc2VjdE1ldGhvZC5jYWxsKHRoaXMsIHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgc2hhcGUpO1xuICAgIH1cbiAgfVxuXG4gIF9pbnRlcnNlY3RCb3goYm94LCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkge1xuICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXgoYm94LmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpO1xuICB9XG5cbiAgX2ludGVyc2VjdFBsYW5lKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkge1xuICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207XG4gICAgY29uc3QgdG8gPSB0aGlzLnRvO1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uOyAvLyBHZXQgcGxhbmUgbm9ybWFsXG5cbiAgICBjb25zdCB3b3JsZE5vcm1hbCA9IG5ldyBWZWMzKDAsIDAsIDEpO1xuICAgIHF1YXQudm11bHQod29ybGROb3JtYWwsIHdvcmxkTm9ybWFsKTtcbiAgICBjb25zdCBsZW4gPSBuZXcgVmVjMygpO1xuICAgIGZyb20udnN1Yihwb3NpdGlvbiwgbGVuKTtcbiAgICBjb25zdCBwbGFuZVRvRnJvbSA9IGxlbi5kb3Qod29ybGROb3JtYWwpO1xuICAgIHRvLnZzdWIocG9zaXRpb24sIGxlbik7XG4gICAgY29uc3QgcGxhbmVUb1RvID0gbGVuLmRvdCh3b3JsZE5vcm1hbCk7XG5cbiAgICBpZiAocGxhbmVUb0Zyb20gKiBwbGFuZVRvVG8gPiAwKSB7XG4gICAgICAvLyBcImZyb21cIiBhbmQgXCJ0b1wiIGFyZSBvbiB0aGUgc2FtZSBzaWRlIG9mIHRoZSBwbGFuZS4uLiBiYWlsIG91dFxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChmcm9tLmRpc3RhbmNlVG8odG8pIDwgcGxhbmVUb0Zyb20pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBuX2RvdF9kaXIgPSB3b3JsZE5vcm1hbC5kb3QoZGlyZWN0aW9uKTtcblxuICAgIGlmIChNYXRoLmFicyhuX2RvdF9kaXIpIDwgdGhpcy5wcmVjaXNpb24pIHtcbiAgICAgIC8vIE5vIGludGVyc2VjdGlvblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBsYW5lUG9pbnRUb0Zyb20gPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IGRpcl9zY2FsZWRfd2l0aF90ID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBoaXRQb2ludFdvcmxkID0gbmV3IFZlYzMoKTtcbiAgICBmcm9tLnZzdWIocG9zaXRpb24sIHBsYW5lUG9pbnRUb0Zyb20pO1xuICAgIGNvbnN0IHQgPSAtd29ybGROb3JtYWwuZG90KHBsYW5lUG9pbnRUb0Zyb20pIC8gbl9kb3RfZGlyO1xuICAgIGRpcmVjdGlvbi5zY2FsZSh0LCBkaXJfc2NhbGVkX3dpdGhfdCk7XG4gICAgZnJvbS52YWRkKGRpcl9zY2FsZWRfd2l0aF90LCBoaXRQb2ludFdvcmxkKTtcbiAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbih3b3JsZE5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIHdvcmxkIEFBQkIgb2YgdGhlIHJheS5cbiAgICovXG5cblxuICBnZXRBQUJCKGFhYmIpIHtcbiAgICBjb25zdCB7XG4gICAgICBsb3dlckJvdW5kLFxuICAgICAgdXBwZXJCb3VuZFxuICAgIH0gPSBhYWJiO1xuICAgIGNvbnN0IHRvID0gdGhpcy50bztcbiAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tO1xuICAgIGxvd2VyQm91bmQueCA9IE1hdGgubWluKHRvLngsIGZyb20ueCk7XG4gICAgbG93ZXJCb3VuZC55ID0gTWF0aC5taW4odG8ueSwgZnJvbS55KTtcbiAgICBsb3dlckJvdW5kLnogPSBNYXRoLm1pbih0by56LCBmcm9tLnopO1xuICAgIHVwcGVyQm91bmQueCA9IE1hdGgubWF4KHRvLngsIGZyb20ueCk7XG4gICAgdXBwZXJCb3VuZC55ID0gTWF0aC5tYXgodG8ueSwgZnJvbS55KTtcbiAgICB1cHBlckJvdW5kLnogPSBNYXRoLm1heCh0by56LCBmcm9tLnopO1xuICB9XG5cbiAgX2ludGVyc2VjdEhlaWdodGZpZWxkKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSkge1xuICAgIHNoYXBlLmRhdGE7XG4gICAgc2hhcGUuZWxlbWVudFNpemU7IC8vIENvbnZlcnQgdGhlIHJheSB0byBsb2NhbCBoZWlnaHRmaWVsZCBjb29yZGluYXRlc1xuXG4gICAgY29uc3QgbG9jYWxSYXkgPSBpbnRlcnNlY3RIZWlnaHRmaWVsZF9sb2NhbFJheTsgLy9uZXcgUmF5KHRoaXMuZnJvbSwgdGhpcy50byk7XG5cbiAgICBsb2NhbFJheS5mcm9tLmNvcHkodGhpcy5mcm9tKTtcbiAgICBsb2NhbFJheS50by5jb3B5KHRoaXMudG8pO1xuICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgbG9jYWxSYXkuZnJvbSwgbG9jYWxSYXkuZnJvbSk7XG4gICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBsb2NhbFJheS50bywgbG9jYWxSYXkudG8pO1xuICAgIGxvY2FsUmF5LnVwZGF0ZURpcmVjdGlvbigpOyAvLyBHZXQgdGhlIGluZGV4IG9mIHRoZSBkYXRhIHBvaW50cyB0byB0ZXN0IGFnYWluc3RcblxuICAgIGNvbnN0IGluZGV4ID0gaW50ZXJzZWN0SGVpZ2h0ZmllbGRfaW5kZXg7XG4gICAgbGV0IGlNaW5YO1xuICAgIGxldCBpTWluWTtcbiAgICBsZXQgaU1heFg7XG4gICAgbGV0IGlNYXhZOyAvLyBTZXQgdG8gbWF4XG5cbiAgICBpTWluWCA9IGlNaW5ZID0gMDtcbiAgICBpTWF4WCA9IGlNYXhZID0gc2hhcGUuZGF0YS5sZW5ndGggLSAxO1xuICAgIGNvbnN0IGFhYmIgPSBuZXcgQUFCQigpO1xuICAgIGxvY2FsUmF5LmdldEFBQkIoYWFiYik7XG4gICAgc2hhcGUuZ2V0SW5kZXhPZlBvc2l0aW9uKGFhYmIubG93ZXJCb3VuZC54LCBhYWJiLmxvd2VyQm91bmQueSwgaW5kZXgsIHRydWUpO1xuICAgIGlNaW5YID0gTWF0aC5tYXgoaU1pblgsIGluZGV4WzBdKTtcbiAgICBpTWluWSA9IE1hdGgubWF4KGlNaW5ZLCBpbmRleFsxXSk7XG4gICAgc2hhcGUuZ2V0SW5kZXhPZlBvc2l0aW9uKGFhYmIudXBwZXJCb3VuZC54LCBhYWJiLnVwcGVyQm91bmQueSwgaW5kZXgsIHRydWUpO1xuICAgIGlNYXhYID0gTWF0aC5taW4oaU1heFgsIGluZGV4WzBdICsgMSk7XG4gICAgaU1heFkgPSBNYXRoLm1pbihpTWF4WSwgaW5kZXhbMV0gKyAxKTtcblxuICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8IGlNYXhYOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHtcbiAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBzaGFwZS5nZXRBYWJiQXRJbmRleChpLCBqLCBhYWJiKTtcblxuICAgICAgICBpZiAoIWFhYmIub3ZlcmxhcHNSYXkobG9jYWxSYXkpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gLy8gTG93ZXIgdHJpYW5nbGVcblxuXG4gICAgICAgIHNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIGZhbHNlKTtcbiAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBzaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTtcblxuICAgICAgICB0aGlzLl9pbnRlcnNlY3RDb252ZXgoc2hhcGUucGlsbGFyQ29udmV4LCBxdWF0LCB3b3JsZFBpbGxhck9mZnNldCwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgaW50ZXJzZWN0Q29udmV4T3B0aW9ucyk7XG5cbiAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGVcblxuXG4gICAgICAgIHNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIHRydWUpO1xuICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXQsIHNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpO1xuXG4gICAgICAgIHRoaXMuX2ludGVyc2VjdENvbnZleChzaGFwZS5waWxsYXJDb252ZXgsIHF1YXQsIHdvcmxkUGlsbGFyT2Zmc2V0LCBib2R5LCByZXBvcnRlZFNoYXBlLCBpbnRlcnNlY3RDb252ZXhPcHRpb25zKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfaW50ZXJzZWN0U3BoZXJlKHNwaGVyZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHtcbiAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tO1xuICAgIGNvbnN0IHRvID0gdGhpcy50bztcbiAgICBjb25zdCByID0gc3BoZXJlLnJhZGl1cztcbiAgICBjb25zdCBhID0gKHRvLnggLSBmcm9tLngpICoqIDIgKyAodG8ueSAtIGZyb20ueSkgKiogMiArICh0by56IC0gZnJvbS56KSAqKiAyO1xuICAgIGNvbnN0IGIgPSAyICogKCh0by54IC0gZnJvbS54KSAqIChmcm9tLnggLSBwb3NpdGlvbi54KSArICh0by55IC0gZnJvbS55KSAqIChmcm9tLnkgLSBwb3NpdGlvbi55KSArICh0by56IC0gZnJvbS56KSAqIChmcm9tLnogLSBwb3NpdGlvbi56KSk7XG4gICAgY29uc3QgYyA9IChmcm9tLnggLSBwb3NpdGlvbi54KSAqKiAyICsgKGZyb20ueSAtIHBvc2l0aW9uLnkpICoqIDIgKyAoZnJvbS56IC0gcG9zaXRpb24ueikgKiogMiAtIHIgKiogMjtcbiAgICBjb25zdCBkZWx0YSA9IGIgKiogMiAtIDQgKiBhICogYztcbiAgICBjb25zdCBpbnRlcnNlY3Rpb25Qb2ludCA9IFJheV9pbnRlcnNlY3RTcGhlcmVfaW50ZXJzZWN0aW9uUG9pbnQ7XG4gICAgY29uc3Qgbm9ybWFsID0gUmF5X2ludGVyc2VjdFNwaGVyZV9ub3JtYWw7XG5cbiAgICBpZiAoZGVsdGEgPCAwKSB7XG4gICAgICAvLyBObyBpbnRlcnNlY3Rpb25cbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgaWYgKGRlbHRhID09PSAwKSB7XG4gICAgICAvLyBzaW5nbGUgaW50ZXJzZWN0aW9uIHBvaW50XG4gICAgICBmcm9tLmxlcnAodG8sIGRlbHRhLCBpbnRlcnNlY3Rpb25Qb2ludCk7XG4gICAgICBpbnRlcnNlY3Rpb25Qb2ludC52c3ViKHBvc2l0aW9uLCBub3JtYWwpO1xuICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpO1xuICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3Rpb25Qb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkMSA9ICgtYiAtIE1hdGguc3FydChkZWx0YSkpIC8gKDIgKiBhKTtcbiAgICAgIGNvbnN0IGQyID0gKC1iICsgTWF0aC5zcXJ0KGRlbHRhKSkgLyAoMiAqIGEpO1xuXG4gICAgICBpZiAoZDEgPj0gMCAmJiBkMSA8PSAxKSB7XG4gICAgICAgIGZyb20ubGVycCh0bywgZDEsIGludGVyc2VjdGlvblBvaW50KTtcbiAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQudnN1Yihwb3NpdGlvbiwgbm9ybWFsKTtcbiAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpO1xuICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdGlvblBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGQyID49IDAgJiYgZDIgPD0gMSkge1xuICAgICAgICBmcm9tLmxlcnAodG8sIGQyLCBpbnRlcnNlY3Rpb25Qb2ludCk7XG4gICAgICAgIGludGVyc2VjdGlvblBvaW50LnZzdWIocG9zaXRpb24sIG5vcm1hbCk7XG4gICAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTtcbiAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3Rpb25Qb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9pbnRlcnNlY3RDb252ZXgoc2hhcGUsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgbm9ybWFsID0gaW50ZXJzZWN0Q29udmV4X25vcm1hbDtcbiAgICBjb25zdCB2ZWN0b3IgPSBpbnRlcnNlY3RDb252ZXhfdmVjdG9yO1xuICAgIGNvbnN0IGZhY2VMaXN0ID0gb3B0aW9ucyAmJiBvcHRpb25zLmZhY2VMaXN0IHx8IG51bGw7IC8vIENoZWNraW5nIGZhY2VzXG5cbiAgICBjb25zdCBmYWNlcyA9IHNoYXBlLmZhY2VzO1xuICAgIGNvbnN0IHZlcnRpY2VzID0gc2hhcGUudmVydGljZXM7XG4gICAgY29uc3Qgbm9ybWFscyA9IHNoYXBlLmZhY2VOb3JtYWxzO1xuICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uO1xuICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207XG4gICAgY29uc3QgdG8gPSB0aGlzLnRvO1xuICAgIGNvbnN0IGZyb21Ub0Rpc3RhbmNlID0gZnJvbS5kaXN0YW5jZVRvKHRvKTtcbiAgICBjb25zdCBOZmFjZXMgPSBmYWNlTGlzdCA/IGZhY2VMaXN0Lmxlbmd0aCA6IGZhY2VzLmxlbmd0aDtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDtcblxuICAgIGZvciAobGV0IGogPSAwOyAhcmVzdWx0LnNob3VsZFN0b3AgJiYgaiA8IE5mYWNlczsgaisrKSB7XG4gICAgICBjb25zdCBmaSA9IGZhY2VMaXN0ID8gZmFjZUxpc3Rbal0gOiBqO1xuICAgICAgY29uc3QgZmFjZSA9IGZhY2VzW2ZpXTtcbiAgICAgIGNvbnN0IGZhY2VOb3JtYWwgPSBub3JtYWxzW2ZpXTtcbiAgICAgIGNvbnN0IHEgPSBxdWF0O1xuICAgICAgY29uc3QgeCA9IHBvc2l0aW9uOyAvLyBkZXRlcm1pbmUgaWYgcmF5IGludGVyc2VjdHMgdGhlIHBsYW5lIG9mIHRoZSBmYWNlXG4gICAgICAvLyBub3RlOiB0aGlzIHdvcmtzIHJlZ2FyZGxlc3Mgb2YgdGhlIGRpcmVjdGlvbiBvZiB0aGUgZmFjZSBub3JtYWxcbiAgICAgIC8vIEdldCBwbGFuZSBwb2ludCBpbiB3b3JsZCBjb29yZGluYXRlcy4uLlxuXG4gICAgICB2ZWN0b3IuY29weSh2ZXJ0aWNlc1tmYWNlWzBdXSk7XG4gICAgICBxLnZtdWx0KHZlY3RvciwgdmVjdG9yKTtcbiAgICAgIHZlY3Rvci52YWRkKHgsIHZlY3Rvcik7IC8vIC4uLmJ1dCBtYWtlIGl0IHJlbGF0aXZlIHRvIHRoZSByYXkgZnJvbS4gV2UnbGwgZml4IHRoaXMgbGF0ZXIuXG5cbiAgICAgIHZlY3Rvci52c3ViKGZyb20sIHZlY3Rvcik7IC8vIEdldCBwbGFuZSBub3JtYWxcblxuICAgICAgcS52bXVsdChmYWNlTm9ybWFsLCBub3JtYWwpOyAvLyBJZiB0aGlzIGRvdCBwcm9kdWN0IGlzIG5lZ2F0aXZlLCB3ZSBoYXZlIHNvbWV0aGluZyBpbnRlcmVzdGluZ1xuXG4gICAgICBjb25zdCBkb3QgPSBkaXJlY3Rpb24uZG90KG5vcm1hbCk7IC8vIEJhaWwgb3V0IGlmIHJheSBhbmQgcGxhbmUgYXJlIHBhcmFsbGVsXG5cbiAgICAgIGlmIChNYXRoLmFicyhkb3QpIDwgdGhpcy5wcmVjaXNpb24pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IC8vIGNhbGMgZGlzdGFuY2UgdG8gcGxhbmVcblxuXG4gICAgICBjb25zdCBzY2FsYXIgPSBub3JtYWwuZG90KHZlY3RvcikgLyBkb3Q7IC8vIGlmIG5lZ2F0aXZlIGRpc3RhbmNlLCB0aGVuIHBsYW5lIGlzIGJlaGluZCByYXlcblxuICAgICAgaWYgKHNjYWxhciA8IDApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IC8vIGlmIChkb3QgPCAwKSB7XG4gICAgICAvLyBJbnRlcnNlY3Rpb24gcG9pbnQgaXMgZnJvbSArIGRpcmVjdGlvbiAqIHNjYWxhclxuXG5cbiAgICAgIGRpcmVjdGlvbi5zY2FsZShzY2FsYXIsIGludGVyc2VjdFBvaW50KTtcbiAgICAgIGludGVyc2VjdFBvaW50LnZhZGQoZnJvbSwgaW50ZXJzZWN0UG9pbnQpOyAvLyBhIGlzIHRoZSBwb2ludCB3ZSBjb21wYXJlIHBvaW50cyBiIGFuZCBjIHdpdGguXG5cbiAgICAgIGEuY29weSh2ZXJ0aWNlc1tmYWNlWzBdXSk7XG4gICAgICBxLnZtdWx0KGEsIGEpO1xuICAgICAgeC52YWRkKGEsIGEpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMTsgIXJlc3VsdC5zaG91bGRTdG9wICYmIGkgPCBmYWNlLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICAvLyBUcmFuc2Zvcm0gMyB2ZXJ0aWNlcyB0byB3b3JsZCBjb29yZHNcbiAgICAgICAgYi5jb3B5KHZlcnRpY2VzW2ZhY2VbaV1dKTtcbiAgICAgICAgYy5jb3B5KHZlcnRpY2VzW2ZhY2VbaSArIDFdXSk7XG4gICAgICAgIHEudm11bHQoYiwgYik7XG4gICAgICAgIHEudm11bHQoYywgYyk7XG4gICAgICAgIHgudmFkZChiLCBiKTtcbiAgICAgICAgeC52YWRkKGMsIGMpO1xuICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGludGVyc2VjdFBvaW50LmRpc3RhbmNlVG8oZnJvbSk7XG5cbiAgICAgICAgaWYgKCEoUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYSwgYiwgYykgfHwgUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYiwgYSwgYykpIHx8IGRpc3RhbmNlID4gZnJvbVRvRGlzdGFuY2UpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVwb3J0SW50ZXJzZWN0aW9uKG5vcm1hbCwgaW50ZXJzZWN0UG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIGZpKTtcbiAgICAgIH0gLy8gfVxuXG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAdG9kbyBPcHRpbWl6ZSBieSB0cmFuc2Zvcm1pbmcgdGhlIHdvcmxkIHRvIGxvY2FsIHNwYWNlIGZpcnN0LlxuICAgKiBAdG9kbyBVc2UgT2N0cmVlIGxvb2t1cFxuICAgKi9cblxuXG4gIF9pbnRlcnNlY3RUcmltZXNoKG1lc2gsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgbm9ybWFsID0gaW50ZXJzZWN0VHJpbWVzaF9ub3JtYWw7XG4gICAgY29uc3QgdHJpYW5nbGVzID0gaW50ZXJzZWN0VHJpbWVzaF90cmlhbmdsZXM7XG4gICAgY29uc3QgdHJlZVRyYW5zZm9ybSA9IGludGVyc2VjdFRyaW1lc2hfdHJlZVRyYW5zZm9ybTtcbiAgICBjb25zdCB2ZWN0b3IgPSBpbnRlcnNlY3RDb252ZXhfdmVjdG9yO1xuICAgIGNvbnN0IGxvY2FsRGlyZWN0aW9uID0gaW50ZXJzZWN0VHJpbWVzaF9sb2NhbERpcmVjdGlvbjtcbiAgICBjb25zdCBsb2NhbEZyb20gPSBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRnJvbTtcbiAgICBjb25zdCBsb2NhbFRvID0gaW50ZXJzZWN0VHJpbWVzaF9sb2NhbFRvO1xuICAgIGNvbnN0IHdvcmxkSW50ZXJzZWN0UG9pbnQgPSBpbnRlcnNlY3RUcmltZXNoX3dvcmxkSW50ZXJzZWN0UG9pbnQ7XG4gICAgY29uc3Qgd29ybGROb3JtYWwgPSBpbnRlcnNlY3RUcmltZXNoX3dvcmxkTm9ybWFsOyAvLyBDaGVja2luZyBmYWNlc1xuXG4gICAgY29uc3QgaW5kaWNlcyA9IG1lc2guaW5kaWNlcztcbiAgICBtZXNoLnZlcnRpY2VzOyAvLyBjb25zdCBub3JtYWxzID0gbWVzaC5mYWNlTm9ybWFsc1xuXG4gICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTtcbiAgICBjb25zdCB0byA9IHRoaXMudG87XG4gICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5kaXJlY3Rpb247XG4gICAgdHJlZVRyYW5zZm9ybS5wb3NpdGlvbi5jb3B5KHBvc2l0aW9uKTtcbiAgICB0cmVlVHJhbnNmb3JtLnF1YXRlcm5pb24uY29weShxdWF0KTsgLy8gVHJhbnNmb3JtIHJheSB0byBsb2NhbCBzcGFjZSFcblxuICAgIFRyYW5zZm9ybS52ZWN0b3JUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGRpcmVjdGlvbiwgbG9jYWxEaXJlY3Rpb24pO1xuICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgZnJvbSwgbG9jYWxGcm9tKTtcbiAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIHRvLCBsb2NhbFRvKTtcbiAgICBsb2NhbFRvLnggKj0gbWVzaC5zY2FsZS54O1xuICAgIGxvY2FsVG8ueSAqPSBtZXNoLnNjYWxlLnk7XG4gICAgbG9jYWxUby56ICo9IG1lc2guc2NhbGUuejtcbiAgICBsb2NhbEZyb20ueCAqPSBtZXNoLnNjYWxlLng7XG4gICAgbG9jYWxGcm9tLnkgKj0gbWVzaC5zY2FsZS55O1xuICAgIGxvY2FsRnJvbS56ICo9IG1lc2guc2NhbGUuejtcbiAgICBsb2NhbFRvLnZzdWIobG9jYWxGcm9tLCBsb2NhbERpcmVjdGlvbik7XG4gICAgbG9jYWxEaXJlY3Rpb24ubm9ybWFsaXplKCk7XG4gICAgY29uc3QgZnJvbVRvRGlzdGFuY2VTcXVhcmVkID0gbG9jYWxGcm9tLmRpc3RhbmNlU3F1YXJlZChsb2NhbFRvKTtcbiAgICBtZXNoLnRyZWUucmF5UXVlcnkodGhpcywgdHJlZVRyYW5zZm9ybSwgdHJpYW5nbGVzKTtcblxuICAgIGZvciAobGV0IGkgPSAwLCBOID0gdHJpYW5nbGVzLmxlbmd0aDsgIXRoaXMucmVzdWx0LnNob3VsZFN0b3AgJiYgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCB0cmlhbmdsZXNJbmRleCA9IHRyaWFuZ2xlc1tpXTtcbiAgICAgIG1lc2guZ2V0Tm9ybWFsKHRyaWFuZ2xlc0luZGV4LCBub3JtYWwpOyAvLyBkZXRlcm1pbmUgaWYgcmF5IGludGVyc2VjdHMgdGhlIHBsYW5lIG9mIHRoZSBmYWNlXG4gICAgICAvLyBub3RlOiB0aGlzIHdvcmtzIHJlZ2FyZGxlc3Mgb2YgdGhlIGRpcmVjdGlvbiBvZiB0aGUgZmFjZSBub3JtYWxcbiAgICAgIC8vIEdldCBwbGFuZSBwb2ludCBpbiB3b3JsZCBjb29yZGluYXRlcy4uLlxuXG4gICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogM10sIGEpOyAvLyAuLi5idXQgbWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgcmF5IGZyb20uIFdlJ2xsIGZpeCB0aGlzIGxhdGVyLlxuXG4gICAgICBhLnZzdWIobG9jYWxGcm9tLCB2ZWN0b3IpOyAvLyBJZiB0aGlzIGRvdCBwcm9kdWN0IGlzIG5lZ2F0aXZlLCB3ZSBoYXZlIHNvbWV0aGluZyBpbnRlcmVzdGluZ1xuXG4gICAgICBjb25zdCBkb3QgPSBsb2NhbERpcmVjdGlvbi5kb3Qobm9ybWFsKTsgLy8gQmFpbCBvdXQgaWYgcmF5IGFuZCBwbGFuZSBhcmUgcGFyYWxsZWxcbiAgICAgIC8vIGlmIChNYXRoLmFicyggZG90ICkgPCB0aGlzLnByZWNpc2lvbil7XG4gICAgICAvLyAgICAgY29udGludWU7XG4gICAgICAvLyB9XG4gICAgICAvLyBjYWxjIGRpc3RhbmNlIHRvIHBsYW5lXG5cbiAgICAgIGNvbnN0IHNjYWxhciA9IG5vcm1hbC5kb3QodmVjdG9yKSAvIGRvdDsgLy8gaWYgbmVnYXRpdmUgZGlzdGFuY2UsIHRoZW4gcGxhbmUgaXMgYmVoaW5kIHJheVxuXG4gICAgICBpZiAoc2NhbGFyIDwgMCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gLy8gSW50ZXJzZWN0aW9uIHBvaW50IGlzIGZyb20gKyBkaXJlY3Rpb24gKiBzY2FsYXJcblxuXG4gICAgICBsb2NhbERpcmVjdGlvbi5zY2FsZShzY2FsYXIsIGludGVyc2VjdFBvaW50KTtcbiAgICAgIGludGVyc2VjdFBvaW50LnZhZGQobG9jYWxGcm9tLCBpbnRlcnNlY3RQb2ludCk7IC8vIEdldCB0cmlhbmdsZSB2ZXJ0aWNlc1xuXG4gICAgICBtZXNoLmdldFZlcnRleChpbmRpY2VzW3RyaWFuZ2xlc0luZGV4ICogMyArIDFdLCBiKTtcbiAgICAgIG1lc2guZ2V0VmVydGV4KGluZGljZXNbdHJpYW5nbGVzSW5kZXggKiAzICsgMl0sIGMpO1xuICAgICAgY29uc3Qgc3F1YXJlZERpc3RhbmNlID0gaW50ZXJzZWN0UG9pbnQuZGlzdGFuY2VTcXVhcmVkKGxvY2FsRnJvbSk7XG5cbiAgICAgIGlmICghKFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGIsIGEsIGMpIHx8IFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGEsIGIsIGMpKSB8fCBzcXVhcmVkRGlzdGFuY2UgPiBmcm9tVG9EaXN0YW5jZVNxdWFyZWQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IC8vIHRyYW5zZm9ybSBpbnRlcnNlY3Rwb2ludCBhbmQgbm9ybWFsIHRvIHdvcmxkXG5cblxuICAgICAgVHJhbnNmb3JtLnZlY3RvclRvV29ybGRGcmFtZShxdWF0LCBub3JtYWwsIHdvcmxkTm9ybWFsKTtcbiAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdCwgaW50ZXJzZWN0UG9pbnQsIHdvcmxkSW50ZXJzZWN0UG9pbnQpO1xuICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24od29ybGROb3JtYWwsIHdvcmxkSW50ZXJzZWN0UG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIHRyaWFuZ2xlc0luZGV4KTtcbiAgICB9XG5cbiAgICB0cmlhbmdsZXMubGVuZ3RoID0gMDtcbiAgfVxuICAvKipcbiAgICogQHJldHVybiBUcnVlIGlmIHRoZSBpbnRlcnNlY3Rpb25zIHNob3VsZCBjb250aW51ZVxuICAgKi9cblxuXG4gIHJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBoaXRGYWNlSW5kZXgpIHtcbiAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tO1xuICAgIGNvbnN0IHRvID0gdGhpcy50bztcbiAgICBjb25zdCBkaXN0YW5jZSA9IGZyb20uZGlzdGFuY2VUbyhoaXRQb2ludFdvcmxkKTtcbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDsgLy8gU2tpcCBiYWNrIGZhY2VzP1xuXG4gICAgaWYgKHRoaXMuc2tpcEJhY2tmYWNlcyAmJiBub3JtYWwuZG90KHRoaXMuZGlyZWN0aW9uKSA+IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXN1bHQuaGl0RmFjZUluZGV4ID0gdHlwZW9mIGhpdEZhY2VJbmRleCAhPT0gJ3VuZGVmaW5lZCcgPyBoaXRGYWNlSW5kZXggOiAtMTtcblxuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgICBjYXNlIFJheS5BTEw6XG4gICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgcmVzdWx0LnNldChmcm9tLCB0bywgbm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpO1xuICAgICAgICByZXN1bHQuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jYWxsYmFjayhyZXN1bHQpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBSYXkuQ0xPU0VTVDpcbiAgICAgICAgLy8gU3RvcmUgaWYgY2xvc2VyIHRoYW4gY3VycmVudCBjbG9zZXN0XG4gICAgICAgIGlmIChkaXN0YW5jZSA8IHJlc3VsdC5kaXN0YW5jZSB8fCAhcmVzdWx0Lmhhc0hpdCkge1xuICAgICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgICByZXN1bHQuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgICByZXN1bHQuc2V0KGZyb20sIHRvLCBub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBkaXN0YW5jZSk7XG4gICAgICAgIH1cblxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBSYXkuQU5ZOlxuICAgICAgICAvLyBSZXBvcnQgYW5kIHN0b3AuXG4gICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTtcbiAgICAgICAgcmVzdWx0Lmhhc0hpdCA9IHRydWU7XG4gICAgICAgIHJlc3VsdC5zZXQoZnJvbSwgdG8sIG5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKTtcbiAgICAgICAgcmVzdWx0LnNob3VsZFN0b3AgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEFzIHBlciBcIkJhcnljZW50cmljIFRlY2huaXF1ZVwiIGFzIG5hbWVkXG4gICAqIHtAbGluayBodHRwczovL3d3dy5ibGFja3Bhd24uY29tL3RleHRzL3BvaW50aW5wb2x5L2RlZmF1bHQuaHRtbCBoZXJlfSBidXQgd2l0aG91dCB0aGUgZGl2aXNpb25cbiAgICovXG5cblxuICBzdGF0aWMgcG9pbnRJblRyaWFuZ2xlKHAsIGEsIGIsIGMpIHtcbiAgICBjLnZzdWIoYSwgdjApO1xuICAgIGIudnN1YihhLCB2MSk7XG4gICAgcC52c3ViKGEsIHYyKTtcbiAgICBjb25zdCBkb3QwMCA9IHYwLmRvdCh2MCk7XG4gICAgY29uc3QgZG90MDEgPSB2MC5kb3QodjEpO1xuICAgIGNvbnN0IGRvdDAyID0gdjAuZG90KHYyKTtcbiAgICBjb25zdCBkb3QxMSA9IHYxLmRvdCh2MSk7XG4gICAgY29uc3QgZG90MTIgPSB2MS5kb3QodjIpO1xuICAgIGxldCB1O1xuICAgIGxldCB2O1xuICAgIHJldHVybiAodSA9IGRvdDExICogZG90MDIgLSBkb3QwMSAqIGRvdDEyKSA+PSAwICYmICh2ID0gZG90MDAgKiBkb3QxMiAtIGRvdDAxICogZG90MDIpID49IDAgJiYgdSArIHYgPCBkb3QwMCAqIGRvdDExIC0gZG90MDEgKiBkb3QwMTtcbiAgfVxuXG59XG5SYXkuQ0xPU0VTVCA9IFJBWV9NT0RFUy5DTE9TRVNUO1xuUmF5LkFOWSA9IFJBWV9NT0RFUy5BTlk7XG5SYXkuQUxMID0gUkFZX01PREVTLkFMTDtcbmNvbnN0IHRtcEFBQkIkMSA9IG5ldyBBQUJCKCk7XG5jb25zdCB0bXBBcnJheSA9IFtdO1xuY29uc3QgdjEgPSBuZXcgVmVjMygpO1xuY29uc3QgdjIgPSBuZXcgVmVjMygpO1xuY29uc3QgaW50ZXJzZWN0Qm9keV94aSA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnRlcnNlY3RCb2R5X3FpID0gbmV3IFF1YXRlcm5pb24oKTtcbmNvbnN0IGludGVyc2VjdFBvaW50ID0gbmV3IFZlYzMoKTtcbmNvbnN0IGEgPSBuZXcgVmVjMygpO1xuY29uc3QgYiA9IG5ldyBWZWMzKCk7XG5jb25zdCBjID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdENvbnZleE9wdGlvbnMgPSB7XG4gIGZhY2VMaXN0OiBbMF1cbn07XG5jb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnRlcnNlY3RIZWlnaHRmaWVsZF9sb2NhbFJheSA9IG5ldyBSYXkoKTtcbmNvbnN0IGludGVyc2VjdEhlaWdodGZpZWxkX2luZGV4ID0gW107XG5jb25zdCBSYXlfaW50ZXJzZWN0U3BoZXJlX2ludGVyc2VjdGlvblBvaW50ID0gbmV3IFZlYzMoKTtcbmNvbnN0IFJheV9pbnRlcnNlY3RTcGhlcmVfbm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdENvbnZleF9ub3JtYWwgPSBuZXcgVmVjMygpO1xuY29uc3QgaW50ZXJzZWN0Q29udmV4X3ZlY3RvciA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnRlcnNlY3RUcmltZXNoX25vcm1hbCA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnRlcnNlY3RUcmltZXNoX2xvY2FsRGlyZWN0aW9uID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdFRyaW1lc2hfbG9jYWxGcm9tID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdFRyaW1lc2hfbG9jYWxUbyA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnRlcnNlY3RUcmltZXNoX3dvcmxkTm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdFRyaW1lc2hfd29ybGRJbnRlcnNlY3RQb2ludCA9IG5ldyBWZWMzKCk7XG5uZXcgQUFCQigpO1xuY29uc3QgaW50ZXJzZWN0VHJpbWVzaF90cmlhbmdsZXMgPSBbXTtcbmNvbnN0IGludGVyc2VjdFRyaW1lc2hfdHJlZVRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTtcbmNvbnN0IHYwID0gbmV3IFZlYzMoKTtcbmNvbnN0IGludGVyc2VjdCA9IG5ldyBWZWMzKCk7XG5cbmZ1bmN0aW9uIGRpc3RhbmNlRnJvbUludGVyc2VjdGlvbihmcm9tLCBkaXJlY3Rpb24sIHBvc2l0aW9uKSB7XG4gIC8vIHYwIGlzIHZlY3RvciBmcm9tIGZyb20gdG8gcG9zaXRpb25cbiAgcG9zaXRpb24udnN1Yihmcm9tLCB2MCk7XG4gIGNvbnN0IGRvdCA9IHYwLmRvdChkaXJlY3Rpb24pOyAvLyBpbnRlcnNlY3QgPSBkaXJlY3Rpb24qZG90ICsgZnJvbVxuXG4gIGRpcmVjdGlvbi5zY2FsZShkb3QsIGludGVyc2VjdCk7XG4gIGludGVyc2VjdC52YWRkKGZyb20sIGludGVyc2VjdCk7XG4gIGNvbnN0IGRpc3RhbmNlID0gcG9zaXRpb24uZGlzdGFuY2VUbyhpbnRlcnNlY3QpO1xuICByZXR1cm4gZGlzdGFuY2U7XG59XG5cbi8qKlxuICogU3dlZXAgYW5kIHBydW5lIGJyb2FkcGhhc2UgYWxvbmcgb25lIGF4aXMuXG4gKi9cbmNsYXNzIFNBUEJyb2FkcGhhc2UgZXh0ZW5kcyBCcm9hZHBoYXNlIHtcbiAgLyoqXG4gICAqIExpc3Qgb2YgYm9kaWVzIGN1cnJlbnRseSBpbiB0aGUgYnJvYWRwaGFzZS5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSB3b3JsZCB0byBzZWFyY2ggaW4uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBeGlzIHRvIHNvcnQgdGhlIGJvZGllcyBhbG9uZy5cbiAgICogU2V0IHRvIDAgZm9yIHggYXhpcywgYW5kIDEgZm9yIHkgYXhpcy5cbiAgICogRm9yIGJlc3QgcGVyZm9ybWFuY2UsIHBpY2sgdGhlIGF4aXMgd2hlcmUgYm9kaWVzIGFyZSBtb3N0IGRpc3RyaWJ1dGVkLlxuICAgKi9cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGJvdW5kcyBvZiB0d28gYm9kaWVzIG92ZXJsYXAsIGFsb25nIHRoZSBnaXZlbiBTQVAgYXhpcy5cbiAgICovXG4gIHN0YXRpYyBjaGVja0JvdW5kcyhiaSwgYmosIGF4aXNJbmRleCkge1xuICAgIGxldCBiaVBvcztcbiAgICBsZXQgYmpQb3M7XG5cbiAgICBpZiAoYXhpc0luZGV4ID09PSAwKSB7XG4gICAgICBiaVBvcyA9IGJpLnBvc2l0aW9uLng7XG4gICAgICBialBvcyA9IGJqLnBvc2l0aW9uLng7XG4gICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDEpIHtcbiAgICAgIGJpUG9zID0gYmkucG9zaXRpb24ueTtcbiAgICAgIGJqUG9zID0gYmoucG9zaXRpb24ueTtcbiAgICB9IGVsc2UgaWYgKGF4aXNJbmRleCA9PT0gMikge1xuICAgICAgYmlQb3MgPSBiaS5wb3NpdGlvbi56O1xuICAgICAgYmpQb3MgPSBiai5wb3NpdGlvbi56O1xuICAgIH1cblxuICAgIGNvbnN0IHJpID0gYmkuYm91bmRpbmdSYWRpdXMsXG4gICAgICAgICAgcmogPSBiai5ib3VuZGluZ1JhZGl1cyxcbiAgICAgICAgICBib3VuZEEyID0gYmlQb3MgKyByaSxcbiAgICAgICAgICBib3VuZEIxID0gYmpQb3MgLSByajtcbiAgICByZXR1cm4gYm91bmRCMSA8IGJvdW5kQTI7XG4gIH0gLy8gTm90ZTogdGhlc2UgYXJlIGlkZW50aWNhbCwgc2F2ZSBmb3IgeC95L3ogbG93ZXJib3VuZFxuXG4gIC8qKlxuICAgKiBpbnNlcnRpb25Tb3J0WFxuICAgKi9cblxuXG4gIHN0YXRpYyBpbnNlcnRpb25Tb3J0WChhKSB7XG4gICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgY29uc3QgdiA9IGFbaV07XG4gICAgICBsZXQgajtcblxuICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC54IDw9IHYuYWFiYi5sb3dlckJvdW5kLngpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGFbaiArIDFdID0gYVtqXTtcbiAgICAgIH1cblxuICAgICAgYVtqICsgMV0gPSB2O1xuICAgIH1cblxuICAgIHJldHVybiBhO1xuICB9XG4gIC8qKlxuICAgKiBpbnNlcnRpb25Tb3J0WVxuICAgKi9cblxuXG4gIHN0YXRpYyBpbnNlcnRpb25Tb3J0WShhKSB7XG4gICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgY29uc3QgdiA9IGFbaV07XG4gICAgICBsZXQgajtcblxuICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC55IDw9IHYuYWFiYi5sb3dlckJvdW5kLnkpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGFbaiArIDFdID0gYVtqXTtcbiAgICAgIH1cblxuICAgICAgYVtqICsgMV0gPSB2O1xuICAgIH1cblxuICAgIHJldHVybiBhO1xuICB9XG4gIC8qKlxuICAgKiBpbnNlcnRpb25Tb3J0WlxuICAgKi9cblxuXG4gIHN0YXRpYyBpbnNlcnRpb25Tb3J0WihhKSB7XG4gICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgY29uc3QgdiA9IGFbaV07XG4gICAgICBsZXQgajtcblxuICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC56IDw9IHYuYWFiYi5sb3dlckJvdW5kLnopIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGFbaiArIDFdID0gYVtqXTtcbiAgICAgIH1cblxuICAgICAgYVtqICsgMV0gPSB2O1xuICAgIH1cblxuICAgIHJldHVybiBhO1xuICB9XG5cbiAgY29uc3RydWN0b3Iod29ybGQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuYXhpc0xpc3QgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZCA9IHZvaWQgMDtcbiAgICB0aGlzLmF4aXNJbmRleCA9IHZvaWQgMDtcbiAgICB0aGlzLl9hZGRCb2R5SGFuZGxlciA9IHZvaWQgMDtcbiAgICB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlciA9IHZvaWQgMDtcbiAgICB0aGlzLmF4aXNMaXN0ID0gW107XG4gICAgdGhpcy53b3JsZCA9IG51bGw7XG4gICAgdGhpcy5heGlzSW5kZXggPSAwO1xuICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDtcblxuICAgIHRoaXMuX2FkZEJvZHlIYW5kbGVyID0gZXZlbnQgPT4ge1xuICAgICAgYXhpc0xpc3QucHVzaChldmVudC5ib2R5KTtcbiAgICB9O1xuXG4gICAgdGhpcy5fcmVtb3ZlQm9keUhhbmRsZXIgPSBldmVudCA9PiB7XG4gICAgICBjb25zdCBpZHggPSBheGlzTGlzdC5pbmRleE9mKGV2ZW50LmJvZHkpO1xuXG4gICAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgICBheGlzTGlzdC5zcGxpY2UoaWR4LCAxKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHdvcmxkKSB7XG4gICAgICB0aGlzLnNldFdvcmxkKHdvcmxkKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENoYW5nZSB0aGUgd29ybGRcbiAgICovXG5cblxuICBzZXRXb3JsZCh3b3JsZCkge1xuICAgIC8vIENsZWFyIHRoZSBvbGQgYXhpcyBhcnJheVxuICAgIHRoaXMuYXhpc0xpc3QubGVuZ3RoID0gMDsgLy8gQWRkIGFsbCBib2RpZXMgZnJvbSB0aGUgbmV3IHdvcmxkXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdvcmxkLmJvZGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5heGlzTGlzdC5wdXNoKHdvcmxkLmJvZGllc1tpXSk7XG4gICAgfSAvLyBSZW1vdmUgb2xkIGhhbmRsZXJzLCBpZiBhbnlcblxuXG4gICAgd29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWRkQm9keScsIHRoaXMuX2FkZEJvZHlIYW5kbGVyKTtcbiAgICB3b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdyZW1vdmVCb2R5JywgdGhpcy5fcmVtb3ZlQm9keUhhbmRsZXIpOyAvLyBBZGQgaGFuZGxlcnMgdG8gdXBkYXRlIHRoZSBsaXN0IG9mIGJvZGllcy5cblxuICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZEJvZHknLCB0aGlzLl9hZGRCb2R5SGFuZGxlcik7XG4gICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncmVtb3ZlQm9keScsIHRoaXMuX3JlbW92ZUJvZHlIYW5kbGVyKTtcbiAgICB0aGlzLndvcmxkID0gd29ybGQ7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gIH1cbiAgLyoqXG4gICAqIENvbGxlY3QgYWxsIGNvbGxpc2lvbiBwYWlyc1xuICAgKi9cblxuXG4gIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwMSwgcDIpIHtcbiAgICBjb25zdCBib2RpZXMgPSB0aGlzLmF4aXNMaXN0O1xuICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoO1xuICAgIGNvbnN0IGF4aXNJbmRleCA9IHRoaXMuYXhpc0luZGV4O1xuICAgIGxldCBpO1xuICAgIGxldCBqO1xuXG4gICAgaWYgKHRoaXMuZGlydHkpIHtcbiAgICAgIHRoaXMuc29ydExpc3QoKTtcbiAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICB9IC8vIExvb2sgdGhyb3VnaCB0aGUgbGlzdFxuXG5cbiAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldO1xuXG4gICAgICBmb3IgKGogPSBpICsgMTsgaiA8IE47IGorKykge1xuICAgICAgICBjb25zdCBiaiA9IGJvZGllc1tqXTtcblxuICAgICAgICBpZiAoIXRoaXMubmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYmksIGJqKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFTQVBCcm9hZHBoYXNlLmNoZWNrQm91bmRzKGJpLCBiaiwgYXhpc0luZGV4KSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25UZXN0KGJpLCBiaiwgcDEsIHAyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzb3J0TGlzdCgpIHtcbiAgICBjb25zdCBheGlzTGlzdCA9IHRoaXMuYXhpc0xpc3Q7XG4gICAgY29uc3QgYXhpc0luZGV4ID0gdGhpcy5heGlzSW5kZXg7XG4gICAgY29uc3QgTiA9IGF4aXNMaXN0Lmxlbmd0aDsgLy8gVXBkYXRlIEFBQkJzXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCBiaSA9IGF4aXNMaXN0W2ldO1xuXG4gICAgICBpZiAoYmkuYWFiYk5lZWRzVXBkYXRlKSB7XG4gICAgICAgIGJpLnVwZGF0ZUFBQkIoKTtcbiAgICAgIH1cbiAgICB9IC8vIFNvcnQgdGhlIGxpc3RcblxuXG4gICAgaWYgKGF4aXNJbmRleCA9PT0gMCkge1xuICAgICAgU0FQQnJvYWRwaGFzZS5pbnNlcnRpb25Tb3J0WChheGlzTGlzdCk7XG4gICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDEpIHtcbiAgICAgIFNBUEJyb2FkcGhhc2UuaW5zZXJ0aW9uU29ydFkoYXhpc0xpc3QpO1xuICAgIH0gZWxzZSBpZiAoYXhpc0luZGV4ID09PSAyKSB7XG4gICAgICBTQVBCcm9hZHBoYXNlLmluc2VydGlvblNvcnRaKGF4aXNMaXN0KTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSB2YXJpYW5jZSBvZiB0aGUgYm9keSBwb3NpdGlvbnMgYW5kIGVzdGltYXRlcyB0aGUgYmVzdCBheGlzIHRvIHVzZS5cbiAgICogV2lsbCBhdXRvbWF0aWNhbGx5IHNldCBwcm9wZXJ0eSBgYXhpc0luZGV4YC5cbiAgICovXG5cblxuICBhdXRvRGV0ZWN0QXhpcygpIHtcbiAgICBsZXQgc3VtWCA9IDA7XG4gICAgbGV0IHN1bVgyID0gMDtcbiAgICBsZXQgc3VtWSA9IDA7XG4gICAgbGV0IHN1bVkyID0gMDtcbiAgICBsZXQgc3VtWiA9IDA7XG4gICAgbGV0IHN1bVoyID0gMDtcbiAgICBjb25zdCBib2RpZXMgPSB0aGlzLmF4aXNMaXN0O1xuICAgIGNvbnN0IE4gPSBib2RpZXMubGVuZ3RoO1xuICAgIGNvbnN0IGludk4gPSAxIC8gTjtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07XG4gICAgICBjb25zdCBjZW50ZXJYID0gYi5wb3NpdGlvbi54O1xuICAgICAgc3VtWCArPSBjZW50ZXJYO1xuICAgICAgc3VtWDIgKz0gY2VudGVyWCAqIGNlbnRlclg7XG4gICAgICBjb25zdCBjZW50ZXJZID0gYi5wb3NpdGlvbi55O1xuICAgICAgc3VtWSArPSBjZW50ZXJZO1xuICAgICAgc3VtWTIgKz0gY2VudGVyWSAqIGNlbnRlclk7XG4gICAgICBjb25zdCBjZW50ZXJaID0gYi5wb3NpdGlvbi56O1xuICAgICAgc3VtWiArPSBjZW50ZXJaO1xuICAgICAgc3VtWjIgKz0gY2VudGVyWiAqIGNlbnRlclo7XG4gICAgfVxuXG4gICAgY29uc3QgdmFyaWFuY2VYID0gc3VtWDIgLSBzdW1YICogc3VtWCAqIGludk47XG4gICAgY29uc3QgdmFyaWFuY2VZID0gc3VtWTIgLSBzdW1ZICogc3VtWSAqIGludk47XG4gICAgY29uc3QgdmFyaWFuY2VaID0gc3VtWjIgLSBzdW1aICogc3VtWiAqIGludk47XG5cbiAgICBpZiAodmFyaWFuY2VYID4gdmFyaWFuY2VZKSB7XG4gICAgICBpZiAodmFyaWFuY2VYID4gdmFyaWFuY2VaKSB7XG4gICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHZhcmlhbmNlWSA+IHZhcmlhbmNlWikge1xuICAgICAgdGhpcy5heGlzSW5kZXggPSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmF4aXNJbmRleCA9IDI7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCB0aGUgYm9kaWVzIHdpdGhpbiBhbiBBQUJCLlxuICAgKiBAcGFyYW0gcmVzdWx0IEFuIGFycmF5IHRvIHN0b3JlIHJlc3VsdGluZyBib2RpZXMgaW4uXG4gICAqL1xuXG5cbiAgYWFiYlF1ZXJ5KHdvcmxkLCBhYWJiLCByZXN1bHQgPSBbXSkge1xuICAgIGlmICh0aGlzLmRpcnR5KSB7XG4gICAgICB0aGlzLnNvcnRMaXN0KCk7XG4gICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgYXhpc0luZGV4ID0gdGhpcy5heGlzSW5kZXg7XG4gICAgbGV0IGF4aXMgPSAneCc7XG5cbiAgICBpZiAoYXhpc0luZGV4ID09PSAxKSB7XG4gICAgICBheGlzID0gJ3knO1xuICAgIH1cblxuICAgIGlmIChheGlzSW5kZXggPT09IDIpIHtcbiAgICAgIGF4aXMgPSAneic7XG4gICAgfVxuXG4gICAgY29uc3QgYXhpc0xpc3QgPSB0aGlzLmF4aXNMaXN0O1xuICAgIGFhYmIubG93ZXJCb3VuZFtheGlzXTtcbiAgICBhYWJiLnVwcGVyQm91bmRbYXhpc107XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF4aXNMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBiID0gYXhpc0xpc3RbaV07XG5cbiAgICAgIGlmIChiLmFhYmJOZWVkc1VwZGF0ZSkge1xuICAgICAgICBiLnVwZGF0ZUFBQkIoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGIuYWFiYi5vdmVybGFwcyhhYWJiKSkge1xuICAgICAgICByZXN1bHQucHVzaChiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbn1cblxuY2xhc3MgVXRpbHMge1xuICAvKipcbiAgICogRXh0ZW5kIGFuIG9wdGlvbnMgb2JqZWN0IHdpdGggZGVmYXVsdCB2YWx1ZXMuXG4gICAqIEBwYXJhbSBvcHRpb25zIFRoZSBvcHRpb25zIG9iamVjdC4gTWF5IGJlIGZhbHN5OiBpbiB0aGlzIGNhc2UsIGEgbmV3IG9iamVjdCBpcyBjcmVhdGVkIGFuZCByZXR1cm5lZC5cbiAgICogQHBhcmFtIGRlZmF1bHRzIEFuIG9iamVjdCBjb250YWluaW5nIGRlZmF1bHQgdmFsdWVzLlxuICAgKiBAcmV0dXJuIFRoZSBtb2RpZmllZCBvcHRpb25zIG9iamVjdC5cbiAgICovXG4gIHN0YXRpYyBkZWZhdWx0cyhvcHRpb25zID0ge30sIGRlZmF1bHRzKSB7XG4gICAgZm9yIChsZXQga2V5IGluIGRlZmF1bHRzKSB7XG4gICAgICBpZiAoIShrZXkgaW4gb3B0aW9ucykpIHtcbiAgICAgICAgb3B0aW9uc1trZXldID0gZGVmYXVsdHNba2V5XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3B0aW9ucztcbiAgfVxuXG59XG5cbi8qKlxuICogQ29uc3RyYWludCBiYXNlIGNsYXNzXG4gKi9cbmNsYXNzIENvbnN0cmFpbnQge1xuICAvKipcbiAgICogRXF1YXRpb25zIHRvIGJlIHNvbHZlZCBpbiB0aGlzIGNvbnN0cmFpbnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBCb2R5IEEuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBCb2R5IEIuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBTZXQgdG8gZmFsc2UgaWYgeW91IGRvbid0IHdhbnQgdGhlIGJvZGllcyB0byBjb2xsaWRlIHdoZW4gdGhleSBhcmUgY29ubmVjdGVkLlxuICAgKi9cbiAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmVxdWF0aW9ucyA9IHZvaWQgMDtcbiAgICB0aGlzLmJvZHlBID0gdm9pZCAwO1xuICAgIHRoaXMuYm9keUIgPSB2b2lkIDA7XG4gICAgdGhpcy5pZCA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSB2b2lkIDA7XG4gICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHtcbiAgICAgIGNvbGxpZGVDb25uZWN0ZWQ6IHRydWUsXG4gICAgICB3YWtlVXBCb2RpZXM6IHRydWVcbiAgICB9KTtcbiAgICB0aGlzLmVxdWF0aW9ucyA9IFtdO1xuICAgIHRoaXMuYm9keUEgPSBib2R5QTtcbiAgICB0aGlzLmJvZHlCID0gYm9keUI7XG4gICAgdGhpcy5pZCA9IENvbnN0cmFpbnQuaWRDb3VudGVyKys7XG4gICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gb3B0aW9ucy5jb2xsaWRlQ29ubmVjdGVkO1xuXG4gICAgaWYgKG9wdGlvbnMud2FrZVVwQm9kaWVzKSB7XG4gICAgICBpZiAoYm9keUEpIHtcbiAgICAgICAgYm9keUEud2FrZVVwKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChib2R5Qikge1xuICAgICAgICBib2R5Qi53YWtlVXAoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSBhbGwgdGhlIGVxdWF0aW9ucyB3aXRoIGRhdGEuXG4gICAqL1xuXG5cbiAgdXBkYXRlKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignbWV0aG9kIHVwZGF0ZSgpIG5vdCBpbXBsbWVtZW50ZWQgaW4gdGhpcyBDb25zdHJhaW50IHN1YmNsYXNzIScpO1xuICB9XG4gIC8qKlxuICAgKiBFbmFibGVzIGFsbCBlcXVhdGlvbnMgaW4gdGhlIGNvbnN0cmFpbnQuXG4gICAqL1xuXG5cbiAgZW5hYmxlKCkge1xuICAgIGNvbnN0IGVxcyA9IHRoaXMuZXF1YXRpb25zO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGVxc1tpXS5lbmFibGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIERpc2FibGVzIGFsbCBlcXVhdGlvbnMgaW4gdGhlIGNvbnN0cmFpbnQuXG4gICAqL1xuXG5cbiAgZGlzYWJsZSgpIHtcbiAgICBjb25zdCBlcXMgPSB0aGlzLmVxdWF0aW9ucztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXFzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBlcXNbaV0uZW5hYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG59XG5Db25zdHJhaW50LmlkQ291bnRlciA9IDA7XG5cbi8qKlxuICogQW4gZWxlbWVudCBjb250YWluaW5nIDYgZW50cmllcywgMyBzcGF0aWFsIGFuZCAzIHJvdGF0aW9uYWwgZGVncmVlcyBvZiBmcmVlZG9tLlxuICovXG5cbmNsYXNzIEphY29iaWFuRWxlbWVudCB7XG4gIC8qKlxuICAgKiBzcGF0aWFsXG4gICAqL1xuXG4gIC8qKlxuICAgKiByb3RhdGlvbmFsXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNwYXRpYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5yb3RhdGlvbmFsID0gdm9pZCAwO1xuICAgIHRoaXMuc3BhdGlhbCA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5yb3RhdGlvbmFsID0gbmV3IFZlYzMoKTtcbiAgfVxuICAvKipcbiAgICogTXVsdGlwbHkgd2l0aCBvdGhlciBKYWNvYmlhbkVsZW1lbnRcbiAgICovXG5cblxuICBtdWx0aXBseUVsZW1lbnQoZWxlbWVudCkge1xuICAgIHJldHVybiBlbGVtZW50LnNwYXRpYWwuZG90KHRoaXMuc3BhdGlhbCkgKyBlbGVtZW50LnJvdGF0aW9uYWwuZG90KHRoaXMucm90YXRpb25hbCk7XG4gIH1cbiAgLyoqXG4gICAqIE11bHRpcGx5IHdpdGggdHdvIHZlY3RvcnNcbiAgICovXG5cblxuICBtdWx0aXBseVZlY3RvcnMoc3BhdGlhbCwgcm90YXRpb25hbCkge1xuICAgIHJldHVybiBzcGF0aWFsLmRvdCh0aGlzLnNwYXRpYWwpICsgcm90YXRpb25hbC5kb3QodGhpcy5yb3RhdGlvbmFsKTtcbiAgfVxuXG59XG5cbi8qKlxuICogRXF1YXRpb24gYmFzZSBjbGFzcy5cbiAqXG4gKiBgYWAsIGBiYCBhbmQgYGVwc2AgYXJlIHtAbGluayBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci81RFYwNTgvVlQxNS9sZWN0dXJlcy9TUE9PS2xhYm5vdGVzLnBkZiBTUE9PS30gcGFyYW1ldGVycyB0aGF0IGRlZmF1bHQgdG8gYDAuMGAuIFNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL3NjaHRlcHBlL2Nhbm5vbi5qcy9pc3N1ZXMvMjM4I2lzc3VlY29tbWVudC0xNDcxNzIzMjcgdGhpcyBleGNoYW5nZX0gZm9yIG1vcmUgZGV0YWlscyBvbiBDYW5ub24ncyBwaHlzaWNzIGltcGxlbWVudGF0aW9uLlxuICovXG5jbGFzcyBFcXVhdGlvbiB7XG4gIC8qKlxuICAgKiBNaW5pbXVtIChyZWFkOiBuZWdhdGl2ZSBtYXgpIGZvcmNlIHRvIGJlIGFwcGxpZWQgYnkgdGhlIGNvbnN0cmFpbnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBNYXhpbXVtIChyZWFkOiBwb3NpdGl2ZSBtYXgpIGZvcmNlIHRvIGJlIGFwcGxpZWQgYnkgdGhlIGNvbnN0cmFpbnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBTUE9PSyBwYXJhbWV0ZXJcbiAgICovXG5cbiAgLyoqXG4gICAqIFNQT09LIHBhcmFtZXRlclxuICAgKi9cblxuICAvKipcbiAgICogU1BPT0sgcGFyYW1ldGVyXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBIG51bWJlciwgcHJvcG9ydGlvbmFsIHRvIHRoZSBmb3JjZSBhZGRlZCB0byB0aGUgYm9kaWVzLlxuICAgKi9cbiAgY29uc3RydWN0b3IoYmksIGJqLCBtaW5Gb3JjZSA9IC0xZTYsIG1heEZvcmNlID0gMWU2KSB7XG4gICAgdGhpcy5pZCA9IHZvaWQgMDtcbiAgICB0aGlzLm1pbkZvcmNlID0gdm9pZCAwO1xuICAgIHRoaXMubWF4Rm9yY2UgPSB2b2lkIDA7XG4gICAgdGhpcy5iaSA9IHZvaWQgMDtcbiAgICB0aGlzLmJqID0gdm9pZCAwO1xuICAgIHRoaXMuc2kgPSB2b2lkIDA7XG4gICAgdGhpcy5zaiA9IHZvaWQgMDtcbiAgICB0aGlzLmEgPSB2b2lkIDA7XG4gICAgdGhpcy5iID0gdm9pZCAwO1xuICAgIHRoaXMuZXBzID0gdm9pZCAwO1xuICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QSA9IHZvaWQgMDtcbiAgICB0aGlzLmphY29iaWFuRWxlbWVudEIgPSB2b2lkIDA7XG4gICAgdGhpcy5lbmFibGVkID0gdm9pZCAwO1xuICAgIHRoaXMubXVsdGlwbGllciA9IHZvaWQgMDtcbiAgICB0aGlzLmlkID0gRXF1YXRpb24uaWRDb3VudGVyKys7XG4gICAgdGhpcy5taW5Gb3JjZSA9IG1pbkZvcmNlO1xuICAgIHRoaXMubWF4Rm9yY2UgPSBtYXhGb3JjZTtcbiAgICB0aGlzLmJpID0gYmk7XG4gICAgdGhpcy5iaiA9IGJqO1xuICAgIHRoaXMuYSA9IDAuMDsgLy8gU1BPT0sgcGFyYW1ldGVyXG5cbiAgICB0aGlzLmIgPSAwLjA7IC8vIFNQT09LIHBhcmFtZXRlclxuXG4gICAgdGhpcy5lcHMgPSAwLjA7IC8vIFNQT09LIHBhcmFtZXRlclxuXG4gICAgdGhpcy5qYWNvYmlhbkVsZW1lbnRBID0gbmV3IEphY29iaWFuRWxlbWVudCgpO1xuICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QiA9IG5ldyBKYWNvYmlhbkVsZW1lbnQoKTtcbiAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMubXVsdGlwbGllciA9IDA7XG4gICAgdGhpcy5zZXRTcG9va1BhcmFtcygxZTcsIDQsIDEgLyA2MCk7IC8vIFNldCB0eXBpY2FsIHNwb29rIHBhcmFtc1xuICB9XG4gIC8qKlxuICAgKiBSZWNhbGN1bGF0ZXMgYSwgYiwgYW5kIGVwcy5cbiAgICpcbiAgICogVGhlIEVxdWF0aW9uIGNvbnN0cnVjdG9yIHNldHMgdHlwaWNhbCBTUE9PSyBwYXJhbWV0ZXJzIGFzIHN1Y2g6XG4gICAqICogYHN0aWZmbmVzc2AgPSAxZTdcbiAgICogKiBgcmVsYXhhdGlvbmAgPSA0XG4gICAqICogYHRpbWVTdGVwYD0gMSAvIDYwLCBfbm90ZSB0aGUgaGFyZGNvZGVkIHJlZnJlc2ggcmF0ZS5fXG4gICAqL1xuXG5cbiAgc2V0U3Bvb2tQYXJhbXMoc3RpZmZuZXNzLCByZWxheGF0aW9uLCB0aW1lU3RlcCkge1xuICAgIGNvbnN0IGQgPSByZWxheGF0aW9uO1xuICAgIGNvbnN0IGsgPSBzdGlmZm5lc3M7XG4gICAgY29uc3QgaCA9IHRpbWVTdGVwO1xuICAgIHRoaXMuYSA9IDQuMCAvIChoICogKDEgKyA0ICogZCkpO1xuICAgIHRoaXMuYiA9IDQuMCAqIGQgLyAoMSArIDQgKiBkKTtcbiAgICB0aGlzLmVwcyA9IDQuMCAvIChoICogaCAqIGsgKiAoMSArIDQgKiBkKSk7XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSByaWdodCBoYW5kIHNpZGUgb2YgdGhlIFNQT09LIGVxdWF0aW9uXG4gICAqL1xuXG5cbiAgY29tcHV0ZUIoYSwgYiwgaCkge1xuICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTtcbiAgICBjb25zdCBHcSA9IHRoaXMuY29tcHV0ZUdxKCk7XG4gICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTtcbiAgICByZXR1cm4gLUdxICogYSAtIEdXICogYiAtIEdpTWYgKiBoO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlcyBHKnEsIHdoZXJlIHEgYXJlIHRoZSBnZW5lcmFsaXplZCBib2R5IGNvb3JkaW5hdGVzXG4gICAqL1xuXG5cbiAgY29tcHV0ZUdxKCkge1xuICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBO1xuICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCO1xuICAgIGNvbnN0IGJpID0gdGhpcy5iaTtcbiAgICBjb25zdCBiaiA9IHRoaXMuYmo7XG4gICAgY29uc3QgeGkgPSBiaS5wb3NpdGlvbjtcbiAgICBjb25zdCB4aiA9IGJqLnBvc2l0aW9uO1xuICAgIHJldHVybiBHQS5zcGF0aWFsLmRvdCh4aSkgKyBHQi5zcGF0aWFsLmRvdCh4aik7XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGVzIEcqVywgd2hlcmUgVyBhcmUgdGhlIGJvZHkgdmVsb2NpdGllc1xuICAgKi9cblxuXG4gIGNvbXB1dGVHVygpIHtcbiAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTtcbiAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjtcbiAgICBjb25zdCBiaSA9IHRoaXMuYmk7XG4gICAgY29uc3QgYmogPSB0aGlzLmJqO1xuICAgIGNvbnN0IHZpID0gYmkudmVsb2NpdHk7XG4gICAgY29uc3QgdmogPSBiai52ZWxvY2l0eTtcbiAgICBjb25zdCB3aSA9IGJpLmFuZ3VsYXJWZWxvY2l0eTtcbiAgICBjb25zdCB3aiA9IGJqLmFuZ3VsYXJWZWxvY2l0eTtcbiAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKHZpLCB3aSkgKyBHQi5tdWx0aXBseVZlY3RvcnModmosIHdqKTtcbiAgfVxuICAvKipcbiAgICogQ29tcHV0ZXMgRypXbGFtYmRhLCB3aGVyZSBXIGFyZSB0aGUgYm9keSB2ZWxvY2l0aWVzXG4gICAqL1xuXG5cbiAgY29tcHV0ZUdXbGFtYmRhKCkge1xuICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBO1xuICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCO1xuICAgIGNvbnN0IGJpID0gdGhpcy5iaTtcbiAgICBjb25zdCBiaiA9IHRoaXMuYmo7XG4gICAgY29uc3QgdmkgPSBiaS52bGFtYmRhO1xuICAgIGNvbnN0IHZqID0gYmoudmxhbWJkYTtcbiAgICBjb25zdCB3aSA9IGJpLndsYW1iZGE7XG4gICAgY29uc3Qgd2ogPSBiai53bGFtYmRhO1xuICAgIHJldHVybiBHQS5tdWx0aXBseVZlY3RvcnModmksIHdpKSArIEdCLm11bHRpcGx5VmVjdG9ycyh2aiwgd2opO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlcyBHKmludihNKSpmLCB3aGVyZSBNIGlzIHRoZSBtYXNzIG1hdHJpeCB3aXRoIGRpYWdvbmFsIGJsb2NrcyBmb3IgZWFjaCBib2R5LCBhbmQgZiBhcmUgdGhlIGZvcmNlcyBvbiB0aGUgYm9kaWVzLlxuICAgKi9cblxuXG4gIGNvbXB1dGVHaU1mKCkge1xuICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBO1xuICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCO1xuICAgIGNvbnN0IGJpID0gdGhpcy5iaTtcbiAgICBjb25zdCBiaiA9IHRoaXMuYmo7XG4gICAgY29uc3QgZmkgPSBiaS5mb3JjZTtcbiAgICBjb25zdCB0aSA9IGJpLnRvcnF1ZTtcbiAgICBjb25zdCBmaiA9IGJqLmZvcmNlO1xuICAgIGNvbnN0IHRqID0gYmoudG9ycXVlO1xuICAgIGNvbnN0IGludk1hc3NpID0gYmkuaW52TWFzc1NvbHZlO1xuICAgIGNvbnN0IGludk1hc3NqID0gYmouaW52TWFzc1NvbHZlO1xuICAgIGZpLnNjYWxlKGludk1hc3NpLCBpTWZpKTtcbiAgICBmai5zY2FsZShpbnZNYXNzaiwgaU1maik7XG4gICAgYmkuaW52SW5lcnRpYVdvcmxkU29sdmUudm11bHQodGksIGludklpX3ZtdWx0X3RhdWkpO1xuICAgIGJqLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KHRqLCBpbnZJal92bXVsdF90YXVqKTtcbiAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKGlNZmksIGludklpX3ZtdWx0X3RhdWkpICsgR0IubXVsdGlwbHlWZWN0b3JzKGlNZmosIGludklqX3ZtdWx0X3RhdWopO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlcyBHKmludihNKSpHJ1xuICAgKi9cblxuXG4gIGNvbXB1dGVHaU1HdCgpIHtcbiAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTtcbiAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjtcbiAgICBjb25zdCBiaSA9IHRoaXMuYmk7XG4gICAgY29uc3QgYmogPSB0aGlzLmJqO1xuICAgIGNvbnN0IGludk1hc3NpID0gYmkuaW52TWFzc1NvbHZlO1xuICAgIGNvbnN0IGludk1hc3NqID0gYmouaW52TWFzc1NvbHZlO1xuICAgIGNvbnN0IGludklpID0gYmkuaW52SW5lcnRpYVdvcmxkU29sdmU7XG4gICAgY29uc3QgaW52SWogPSBiai5pbnZJbmVydGlhV29ybGRTb2x2ZTtcbiAgICBsZXQgcmVzdWx0ID0gaW52TWFzc2kgKyBpbnZNYXNzajtcbiAgICBpbnZJaS52bXVsdChHQS5yb3RhdGlvbmFsLCB0bXApO1xuICAgIHJlc3VsdCArPSB0bXAuZG90KEdBLnJvdGF0aW9uYWwpO1xuICAgIGludklqLnZtdWx0KEdCLnJvdGF0aW9uYWwsIHRtcCk7XG4gICAgcmVzdWx0ICs9IHRtcC5kb3QoR0Iucm90YXRpb25hbCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogQWRkIGNvbnN0cmFpbnQgdmVsb2NpdHkgdG8gdGhlIGJvZGllcy5cbiAgICovXG5cblxuICBhZGRUb1dsYW1iZGEoZGVsdGFsYW1iZGEpIHtcbiAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTtcbiAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjtcbiAgICBjb25zdCBiaSA9IHRoaXMuYmk7XG4gICAgY29uc3QgYmogPSB0aGlzLmJqO1xuICAgIGNvbnN0IHRlbXAgPSBhZGRUb1dsYW1iZGFfdGVtcDsgLy8gQWRkIHRvIGxpbmVhciB2ZWxvY2l0eVxuICAgIC8vIHZfbGFtYmRhICs9IGludihNKSAqIGRlbHRhX2xhbWJhICogR1xuXG4gICAgYmkudmxhbWJkYS5hZGRTY2FsZWRWZWN0b3IoYmkuaW52TWFzc1NvbHZlICogZGVsdGFsYW1iZGEsIEdBLnNwYXRpYWwsIGJpLnZsYW1iZGEpO1xuICAgIGJqLnZsYW1iZGEuYWRkU2NhbGVkVmVjdG9yKGJqLmludk1hc3NTb2x2ZSAqIGRlbHRhbGFtYmRhLCBHQi5zcGF0aWFsLCBiai52bGFtYmRhKTsgLy8gQWRkIHRvIGFuZ3VsYXIgdmVsb2NpdHlcblxuICAgIGJpLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KEdBLnJvdGF0aW9uYWwsIHRlbXApO1xuICAgIGJpLndsYW1iZGEuYWRkU2NhbGVkVmVjdG9yKGRlbHRhbGFtYmRhLCB0ZW1wLCBiaS53bGFtYmRhKTtcbiAgICBiai5pbnZJbmVydGlhV29ybGRTb2x2ZS52bXVsdChHQi5yb3RhdGlvbmFsLCB0ZW1wKTtcbiAgICBiai53bGFtYmRhLmFkZFNjYWxlZFZlY3RvcihkZWx0YWxhbWJkYSwgdGVtcCwgYmoud2xhbWJkYSk7XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGUgdGhlIGRlbm9taW5hdG9yIHBhcnQgb2YgdGhlIFNQT09LIGVxdWF0aW9uOiBDID0gRyppbnYoTSkqRycgKyBlcHNcbiAgICovXG5cblxuICBjb21wdXRlQygpIHtcbiAgICByZXR1cm4gdGhpcy5jb21wdXRlR2lNR3QoKSArIHRoaXMuZXBzO1xuICB9XG5cbn1cbkVxdWF0aW9uLmlkQ291bnRlciA9IDA7XG5jb25zdCBpTWZpID0gbmV3IFZlYzMoKTtcbmNvbnN0IGlNZmogPSBuZXcgVmVjMygpO1xuY29uc3QgaW52SWlfdm11bHRfdGF1aSA9IG5ldyBWZWMzKCk7XG5jb25zdCBpbnZJal92bXVsdF90YXVqID0gbmV3IFZlYzMoKTtcbmNvbnN0IHRtcCA9IG5ldyBWZWMzKCk7XG5jb25zdCBhZGRUb1dsYW1iZGFfdGVtcCA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogQ29udGFjdC9ub24tcGVuZXRyYXRpb24gY29uc3RyYWludCBlcXVhdGlvblxuICovXG5jbGFzcyBDb250YWN0RXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7XG4gIC8qKlxuICAgKiBcImJvdW5jaW5lc3NcIjogdTEgPSAtZSp1MFxuICAgKi9cblxuICAvKipcbiAgICogV29ybGQtb3JpZW50ZWQgdmVjdG9yIHRoYXQgZ29lcyBmcm9tIHRoZSBjZW50ZXIgb2YgYmkgdG8gdGhlIGNvbnRhY3QgcG9pbnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBXb3JsZC1vcmllbnRlZCB2ZWN0b3IgdGhhdCBzdGFydHMgaW4gYm9keSBqIHBvc2l0aW9uIGFuZCBnb2VzIHRvIHRoZSBjb250YWN0IHBvaW50LlxuICAgKi9cblxuICAvKipcbiAgICogQ29udGFjdCBub3JtYWwsIHBvaW50aW5nIG91dCBvZiBib2R5IGkuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG1heEZvcmNlID0gMWU2KSB7XG4gICAgc3VwZXIoYm9keUEsIGJvZHlCLCAwLCBtYXhGb3JjZSk7XG4gICAgdGhpcy5yZXN0aXR1dGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLnJpID0gdm9pZCAwO1xuICAgIHRoaXMucmogPSB2b2lkIDA7XG4gICAgdGhpcy5uaSA9IHZvaWQgMDtcbiAgICB0aGlzLnJlc3RpdHV0aW9uID0gMC4wO1xuICAgIHRoaXMucmkgPSBuZXcgVmVjMygpO1xuICAgIHRoaXMucmogPSBuZXcgVmVjMygpO1xuICAgIHRoaXMubmkgPSBuZXcgVmVjMygpO1xuICB9XG5cbiAgY29tcHV0ZUIoaCkge1xuICAgIGNvbnN0IGEgPSB0aGlzLmE7XG4gICAgY29uc3QgYiA9IHRoaXMuYjtcbiAgICBjb25zdCBiaSA9IHRoaXMuYmk7XG4gICAgY29uc3QgYmogPSB0aGlzLmJqO1xuICAgIGNvbnN0IHJpID0gdGhpcy5yaTtcbiAgICBjb25zdCByaiA9IHRoaXMucmo7XG4gICAgY29uc3Qgcml4biA9IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMTtcbiAgICBjb25zdCByanhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyO1xuICAgIGNvbnN0IHZpID0gYmkudmVsb2NpdHk7XG4gICAgY29uc3Qgd2kgPSBiaS5hbmd1bGFyVmVsb2NpdHk7XG4gICAgYmkuZm9yY2U7XG4gICAgYmkudG9ycXVlO1xuICAgIGNvbnN0IHZqID0gYmoudmVsb2NpdHk7XG4gICAgY29uc3Qgd2ogPSBiai5hbmd1bGFyVmVsb2NpdHk7XG4gICAgYmouZm9yY2U7XG4gICAgYmoudG9ycXVlO1xuICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzO1xuICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBO1xuICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCO1xuICAgIGNvbnN0IG4gPSB0aGlzLm5pOyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHNcblxuICAgIHJpLmNyb3NzKG4sIHJpeG4pO1xuICAgIHJqLmNyb3NzKG4sIHJqeG4pOyAvLyBnID0geGorcmogLSh4aStyaSlcbiAgICAvLyBHID0gWyAtbmkgIC1yaXhuICBuaSAgcmp4biBdXG5cbiAgICBuLm5lZ2F0ZShHQS5zcGF0aWFsKTtcbiAgICByaXhuLm5lZ2F0ZShHQS5yb3RhdGlvbmFsKTtcbiAgICBHQi5zcGF0aWFsLmNvcHkobik7XG4gICAgR0Iucm90YXRpb25hbC5jb3B5KHJqeG4pOyAvLyBDYWxjdWxhdGUgdGhlIHBlbmV0cmF0aW9uIHZlY3RvclxuXG4gICAgcGVuZXRyYXRpb25WZWMuY29weShiai5wb3NpdGlvbik7XG4gICAgcGVuZXRyYXRpb25WZWMudmFkZChyaiwgcGVuZXRyYXRpb25WZWMpO1xuICAgIHBlbmV0cmF0aW9uVmVjLnZzdWIoYmkucG9zaXRpb24sIHBlbmV0cmF0aW9uVmVjKTtcbiAgICBwZW5ldHJhdGlvblZlYy52c3ViKHJpLCBwZW5ldHJhdGlvblZlYyk7XG4gICAgY29uc3QgZyA9IG4uZG90KHBlbmV0cmF0aW9uVmVjKTsgLy8gQ29tcHV0ZSBpdGVyYXRpb25cblxuICAgIGNvbnN0IGVQbHVzT25lID0gdGhpcy5yZXN0aXR1dGlvbiArIDE7XG4gICAgY29uc3QgR1cgPSBlUGx1c09uZSAqIHZqLmRvdChuKSAtIGVQbHVzT25lICogdmkuZG90KG4pICsgd2ouZG90KHJqeG4pIC0gd2kuZG90KHJpeG4pO1xuICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7XG4gICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mO1xuICAgIHJldHVybiBCO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGN1cnJlbnQgcmVsYXRpdmUgdmVsb2NpdHkgaW4gdGhlIGNvbnRhY3QgcG9pbnQuXG4gICAqL1xuXG5cbiAgZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbCgpIHtcbiAgICBjb25zdCB2aSA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZpO1xuICAgIGNvbnN0IHZqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmo7XG4gICAgY29uc3QgeGkgPSBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94aTtcbiAgICBjb25zdCB4aiA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hqO1xuICAgIGNvbnN0IHJlbFZlbCA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbDtcbiAgICB0aGlzLmJpLnBvc2l0aW9uLnZhZGQodGhpcy5yaSwgeGkpO1xuICAgIHRoaXMuYmoucG9zaXRpb24udmFkZCh0aGlzLnJqLCB4aik7XG4gICAgdGhpcy5iaS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludCh4aSwgdmkpO1xuICAgIHRoaXMuYmouZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQoeGosIHZqKTtcbiAgICB2aS52c3ViKHZqLCByZWxWZWwpO1xuICAgIHJldHVybiB0aGlzLm5pLmRvdChyZWxWZWwpO1xuICB9XG5cbn1cbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMSA9IG5ldyBWZWMzKCk7IC8vIFRlbXAgdmVjdG9yc1xuXG5jb25zdCBDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDIgPSBuZXcgVmVjMygpO1xuY29uc3QgQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzID0gbmV3IFZlYzMoKTtcbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZpID0gbmV3IFZlYzMoKTtcbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZqID0gbmV3IFZlYzMoKTtcbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hpID0gbmV3IFZlYzMoKTtcbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hqID0gbmV3IFZlYzMoKTtcbmNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbCA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogQ29ubmVjdHMgdHdvIGJvZGllcyBhdCBnaXZlbiBvZmZzZXQgcG9pbnRzLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBib2R5QSA9IG5ldyBCb2R5KHsgbWFzczogMSB9KVxuICogICAgIGNvbnN0IGJvZHlCID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pXG4gKiAgICAgYm9keUEucG9zaXRpb24uc2V0KC0xLCAwLCAwKVxuICogICAgIGJvZHlCLnBvc2l0aW9uLnNldCgxLCAwLCAwKVxuICogICAgIGJvZHlBLmFkZFNoYXBlKHNoYXBlQSlcbiAqICAgICBib2R5Qi5hZGRTaGFwZShzaGFwZUIpXG4gKiAgICAgd29ybGQuYWRkQm9keShib2R5QSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlCKVxuICogICAgIGNvbnN0IGxvY2FsUGl2b3RBID0gbmV3IFZlYzMoMSwgMCwgMClcbiAqICAgICBjb25zdCBsb2NhbFBpdm90QiA9IG5ldyBWZWMzKC0xLCAwLCAwKVxuICogICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBuZXcgUG9pbnRUb1BvaW50Q29uc3RyYWludChib2R5QSwgbG9jYWxQaXZvdEEsIGJvZHlCLCBsb2NhbFBpdm90QilcbiAqICAgICB3b3JsZC5hZGRDb25zdHJhaW50KGNvbnN0cmFpbnQpXG4gKi9cbmNsYXNzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQgZXh0ZW5kcyBDb25zdHJhaW50IHtcbiAgLyoqXG4gICAqIFBpdm90LCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUEuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBQaXZvdCwgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlCLlxuICAgKi9cblxuICAvKipcbiAgICogQHBhcmFtIHBpdm90QSBUaGUgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIG9mIGJvZHlBIHdoaWNoIGJvZHlBIGlzIGNvbnN0cmFpbmVkIHRvLlxuICAgKiBAcGFyYW0gYm9keUIgQm9keSB0aGF0IHdpbGwgYmUgY29uc3RyYWluZWQgaW4gYSBzaW1pbGFyIHdheSB0byB0aGUgc2FtZSBwb2ludCBhcyBib2R5QS4gV2Ugd2lsbCB0aGVyZWZvcmUgZ2V0IGEgbGluayBiZXR3ZWVuIGJvZHlBIGFuZCBib2R5Qi4gSWYgbm90IHNwZWNpZmllZCwgYm9keUEgd2lsbCBiZSBjb25zdHJhaW5lZCB0byBhIHN0YXRpYyBwb2ludC5cbiAgICogQHBhcmFtIHBpdm90QiBUaGUgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIG9mIGJvZHlCIHdoaWNoIGJvZHlCIGlzIGNvbnN0cmFpbmVkIHRvLlxuICAgKiBAcGFyYW0gbWF4Rm9yY2UgVGhlIG1heGltdW0gZm9yY2UgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB0byBjb25zdHJhaW4gdGhlIGJvZGllcy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGJvZHlBLCBwaXZvdEEgPSBuZXcgVmVjMygpLCBib2R5QiwgcGl2b3RCID0gbmV3IFZlYzMoKSwgbWF4Rm9yY2UgPSAxZTYpIHtcbiAgICBzdXBlcihib2R5QSwgYm9keUIpO1xuICAgIHRoaXMucGl2b3RBID0gdm9pZCAwO1xuICAgIHRoaXMucGl2b3RCID0gdm9pZCAwO1xuICAgIHRoaXMuZXF1YXRpb25YID0gdm9pZCAwO1xuICAgIHRoaXMuZXF1YXRpb25ZID0gdm9pZCAwO1xuICAgIHRoaXMuZXF1YXRpb25aID0gdm9pZCAwO1xuICAgIHRoaXMucGl2b3RBID0gcGl2b3RBLmNsb25lKCk7XG4gICAgdGhpcy5waXZvdEIgPSBwaXZvdEIuY2xvbmUoKTtcbiAgICBjb25zdCB4ID0gdGhpcy5lcXVhdGlvblggPSBuZXcgQ29udGFjdEVxdWF0aW9uKGJvZHlBLCBib2R5Qik7XG4gICAgY29uc3QgeSA9IHRoaXMuZXF1YXRpb25ZID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpO1xuICAgIGNvbnN0IHogPSB0aGlzLmVxdWF0aW9uWiA9IG5ldyBDb250YWN0RXF1YXRpb24oYm9keUEsIGJvZHlCKTsgLy8gRXF1YXRpb25zIHRvIGJlIGZlZCB0byB0aGUgc29sdmVyXG5cbiAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKHgsIHksIHopOyAvLyBNYWtlIHRoZSBlcXVhdGlvbnMgYmlkaXJlY3Rpb25hbFxuXG4gICAgeC5taW5Gb3JjZSA9IHkubWluRm9yY2UgPSB6Lm1pbkZvcmNlID0gLW1heEZvcmNlO1xuICAgIHgubWF4Rm9yY2UgPSB5Lm1heEZvcmNlID0gei5tYXhGb3JjZSA9IG1heEZvcmNlO1xuICAgIHgubmkuc2V0KDEsIDAsIDApO1xuICAgIHkubmkuc2V0KDAsIDEsIDApO1xuICAgIHoubmkuc2V0KDAsIDAsIDEpO1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTtcbiAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7XG4gICAgY29uc3QgeCA9IHRoaXMuZXF1YXRpb25YO1xuICAgIGNvbnN0IHkgPSB0aGlzLmVxdWF0aW9uWTtcbiAgICBjb25zdCB6ID0gdGhpcy5lcXVhdGlvblo7IC8vIFJvdGF0ZSB0aGUgcGl2b3RzIHRvIHdvcmxkIHNwYWNlXG5cbiAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMucGl2b3RBLCB4LnJpKTtcbiAgICBib2R5Qi5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMucGl2b3RCLCB4LnJqKTtcbiAgICB5LnJpLmNvcHkoeC5yaSk7XG4gICAgeS5yai5jb3B5KHgucmopO1xuICAgIHoucmkuY29weSh4LnJpKTtcbiAgICB6LnJqLmNvcHkoeC5yaik7XG4gIH1cblxufVxuXG4vKipcbiAqIENvbmUgZXF1YXRpb24uIFdvcmtzIHRvIGtlZXAgdGhlIGdpdmVuIGJvZHkgd29ybGQgdmVjdG9ycyBhbGlnbmVkLCBvciB0aWx0ZWQgd2l0aGluIGEgZ2l2ZW4gYW5nbGUgZnJvbSBlYWNoIG90aGVyLlxuICovXG5jbGFzcyBDb25lRXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7XG4gIC8qKlxuICAgKiBMb2NhbCBheGlzIGluIEFcbiAgICovXG5cbiAgLyoqXG4gICAqIExvY2FsIGF4aXMgaW4gQlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIFwiY29uZSBhbmdsZVwiIHRvIGtlZXBcbiAgICovXG4gIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2O1xuICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7XG4gICAgdGhpcy5heGlzQSA9IHZvaWQgMDtcbiAgICB0aGlzLmF4aXNCID0gdm9pZCAwO1xuICAgIHRoaXMuYW5nbGUgPSB2b2lkIDA7XG4gICAgdGhpcy5heGlzQSA9IG9wdGlvbnMuYXhpc0EgPyBvcHRpb25zLmF4aXNBLmNsb25lKCkgOiBuZXcgVmVjMygxLCAwLCAwKTtcbiAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKDAsIDEsIDApO1xuICAgIHRoaXMuYW5nbGUgPSB0eXBlb2Ygb3B0aW9ucy5hbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ2xlIDogMDtcbiAgfVxuXG4gIGNvbXB1dGVCKGgpIHtcbiAgICBjb25zdCBhID0gdGhpcy5hO1xuICAgIGNvbnN0IGIgPSB0aGlzLmI7XG4gICAgY29uc3QgbmkgPSB0aGlzLmF4aXNBO1xuICAgIGNvbnN0IG5qID0gdGhpcy5heGlzQjtcbiAgICBjb25zdCBuaXhuaiA9IHRtcFZlYzEkMjtcbiAgICBjb25zdCBuanhuaSA9IHRtcFZlYzIkMjtcbiAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTtcbiAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzXG5cbiAgICBuaS5jcm9zcyhuaiwgbml4bmopO1xuICAgIG5qLmNyb3NzKG5pLCBuanhuaSk7IC8vIFRoZSBhbmdsZSBiZXR3ZWVuIHR3byB2ZWN0b3IgaXM6XG4gICAgLy8gY29zKHRoZXRhKSA9IGEgKiBiIC8gKGxlbmd0aChhKSAqIGxlbmd0aChiKSA9IHsgbGVuKGEpID0gbGVuKGIpID0gMSB9ID0gYSAqIGJcbiAgICAvLyBnID0gYSAqIGJcbiAgICAvLyBnZG90ID0gKGIgeCBhKSAqIHdpICsgKGEgeCBiKSAqIHdqXG4gICAgLy8gRyA9IFswIGJ4YSAwIGF4Yl1cbiAgICAvLyBXID0gW3ZpIHdpIHZqIHdqXVxuXG4gICAgR0Eucm90YXRpb25hbC5jb3B5KG5qeG5pKTtcbiAgICBHQi5yb3RhdGlvbmFsLmNvcHkobml4bmopO1xuICAgIGNvbnN0IGcgPSBNYXRoLmNvcyh0aGlzLmFuZ2xlKSAtIG5pLmRvdChuaik7XG4gICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpO1xuICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7XG4gICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mO1xuICAgIHJldHVybiBCO1xuICB9XG5cbn1cbmNvbnN0IHRtcFZlYzEkMiA9IG5ldyBWZWMzKCk7XG5jb25zdCB0bXBWZWMyJDIgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIFJvdGF0aW9uYWwgY29uc3RyYWludC4gV29ya3MgdG8ga2VlcCB0aGUgbG9jYWwgdmVjdG9ycyBvcnRob2dvbmFsIHRvIGVhY2ggb3RoZXIgaW4gd29ybGQgc3BhY2UuXG4gKi9cbmNsYXNzIFJvdGF0aW9uYWxFcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHtcbiAgLyoqXG4gICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIG1heEFuZ2xlXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IG1heEZvcmNlID0gdHlwZW9mIG9wdGlvbnMubWF4Rm9yY2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhGb3JjZSA6IDFlNjtcbiAgICBzdXBlcihib2R5QSwgYm9keUIsIC1tYXhGb3JjZSwgbWF4Rm9yY2UpO1xuICAgIHRoaXMuYXhpc0EgPSB2b2lkIDA7XG4gICAgdGhpcy5heGlzQiA9IHZvaWQgMDtcbiAgICB0aGlzLm1heEFuZ2xlID0gdm9pZCAwO1xuICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMCwgMCk7XG4gICAgdGhpcy5heGlzQiA9IG9wdGlvbnMuYXhpc0IgPyBvcHRpb25zLmF4aXNCLmNsb25lKCkgOiBuZXcgVmVjMygwLCAxLCAwKTtcbiAgICB0aGlzLm1heEFuZ2xlID0gTWF0aC5QSSAvIDI7XG4gIH1cblxuICBjb21wdXRlQihoKSB7XG4gICAgY29uc3QgYSA9IHRoaXMuYTtcbiAgICBjb25zdCBiID0gdGhpcy5iO1xuICAgIGNvbnN0IG5pID0gdGhpcy5heGlzQTtcbiAgICBjb25zdCBuaiA9IHRoaXMuYXhpc0I7XG4gICAgY29uc3Qgbml4bmogPSB0bXBWZWMxJDE7XG4gICAgY29uc3Qgbmp4bmkgPSB0bXBWZWMyJDE7XG4gICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7XG4gICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0c1xuXG4gICAgbmkuY3Jvc3MobmosIG5peG5qKTtcbiAgICBuai5jcm9zcyhuaSwgbmp4bmkpOyAvLyBnID0gbmkgKiBualxuICAgIC8vIGdkb3QgPSAobmogeCBuaSkgKiB3aSArIChuaSB4IG5qKSAqIHdqXG4gICAgLy8gRyA9IFswIG5qeG5pIDAgbml4bmpdXG4gICAgLy8gVyA9IFt2aSB3aSB2aiB3al1cblxuICAgIEdBLnJvdGF0aW9uYWwuY29weShuanhuaSk7XG4gICAgR0Iucm90YXRpb25hbC5jb3B5KG5peG5qKTtcbiAgICBjb25zdCBnID0gTWF0aC5jb3ModGhpcy5tYXhBbmdsZSkgLSBuaS5kb3QobmopO1xuICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTtcbiAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpO1xuICAgIGNvbnN0IEIgPSAtZyAqIGEgLSBHVyAqIGIgLSBoICogR2lNZjtcbiAgICByZXR1cm4gQjtcbiAgfVxuXG59XG5jb25zdCB0bXBWZWMxJDEgPSBuZXcgVmVjMygpO1xuY29uc3QgdG1wVmVjMiQxID0gbmV3IFZlYzMoKTtcblxuLyoqXG4gKiBBIENvbmUgVHdpc3QgY29uc3RyYWludCwgdXNlZnVsIGZvciByYWdkb2xscy5cbiAqL1xuY2xhc3MgQ29uZVR3aXN0Q29uc3RyYWludCBleHRlbmRzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQge1xuICAvKipcbiAgICogVGhlIGF4aXMgZGlyZWN0aW9uIGZvciB0aGUgY29uc3RyYWludCBvZiB0aGUgYm9keSBBLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGF4aXMgZGlyZWN0aW9uIGZvciB0aGUgY29uc3RyYWludCBvZiB0aGUgYm9keSBCLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGFwZXJ0dXJlIGFuZ2xlIG9mIHRoZSBjb25lLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIHR3aXN0IGFuZ2xlIG9mIHRoZSBqb2ludC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OyAvLyBTZXQgcGl2b3QgcG9pbnQgaW4gYmV0d2VlblxuXG4gICAgY29uc3QgcGl2b3RBID0gb3B0aW9ucy5waXZvdEEgPyBvcHRpb25zLnBpdm90QS5jbG9uZSgpIDogbmV3IFZlYzMoKTtcbiAgICBjb25zdCBwaXZvdEIgPSBvcHRpb25zLnBpdm90QiA/IG9wdGlvbnMucGl2b3RCLmNsb25lKCkgOiBuZXcgVmVjMygpO1xuICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTtcbiAgICB0aGlzLmF4aXNBID0gdm9pZCAwO1xuICAgIHRoaXMuYXhpc0IgPSB2b2lkIDA7XG4gICAgdGhpcy5hbmdsZSA9IHZvaWQgMDtcbiAgICB0aGlzLnR3aXN0QW5nbGUgPSB2b2lkIDA7XG4gICAgdGhpcy5jb25lRXF1YXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy50d2lzdEVxdWF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuYXhpc0EgPSBvcHRpb25zLmF4aXNBID8gb3B0aW9ucy5heGlzQS5jbG9uZSgpIDogbmV3IFZlYzMoKTtcbiAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gISFvcHRpb25zLmNvbGxpZGVDb25uZWN0ZWQ7XG4gICAgdGhpcy5hbmdsZSA9IHR5cGVvZiBvcHRpb25zLmFuZ2xlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuYW5nbGUgOiAwO1xuICAgIGNvbnN0IGMgPSB0aGlzLmNvbmVFcXVhdGlvbiA9IG5ldyBDb25lRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICBjb25zdCB0ID0gdGhpcy50d2lzdEVxdWF0aW9uID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpO1xuICAgIHRoaXMudHdpc3RBbmdsZSA9IHR5cGVvZiBvcHRpb25zLnR3aXN0QW5nbGUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy50d2lzdEFuZ2xlIDogMDsgLy8gTWFrZSB0aGUgY29uZSBlcXVhdGlvbiBwdXNoIHRoZSBib2RpZXMgdG93YXJkIHRoZSBjb25lIGF4aXMsIG5vdCBvdXR3YXJkXG5cbiAgICBjLm1heEZvcmNlID0gMDtcbiAgICBjLm1pbkZvcmNlID0gLW1heEZvcmNlOyAvLyBNYWtlIHRoZSB0d2lzdCBlcXVhdGlvbiBhZGQgdG9ycXVlIHRvd2FyZCB0aGUgaW5pdGlhbCBwb3NpdGlvblxuXG4gICAgdC5tYXhGb3JjZSA9IDA7XG4gICAgdC5taW5Gb3JjZSA9IC1tYXhGb3JjZTtcbiAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKGMsIHQpO1xuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTtcbiAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7XG4gICAgY29uc3QgY29uZSA9IHRoaXMuY29uZUVxdWF0aW9uO1xuICAgIGNvbnN0IHR3aXN0ID0gdGhpcy50d2lzdEVxdWF0aW9uO1xuICAgIHN1cGVyLnVwZGF0ZSgpOyAvLyBVcGRhdGUgdGhlIGF4ZXMgdG8gdGhlIGNvbmUgY29uc3RyYWludFxuXG4gICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuYXhpc0EsIGNvbmUuYXhpc0EpO1xuICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLmF4aXNCLCBjb25lLmF4aXNCKTsgLy8gVXBkYXRlIHRoZSB3b3JsZCBheGVzIGluIHRoZSB0d2lzdCBjb25zdHJhaW50XG5cbiAgICB0aGlzLmF4aXNBLnRhbmdlbnRzKHR3aXN0LmF4aXNBLCB0d2lzdC5heGlzQSk7XG4gICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHR3aXN0LmF4aXNBLCB0d2lzdC5heGlzQSk7XG4gICAgdGhpcy5heGlzQi50YW5nZW50cyh0d2lzdC5heGlzQiwgdHdpc3QuYXhpc0IpO1xuICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0d2lzdC5heGlzQiwgdHdpc3QuYXhpc0IpO1xuICAgIGNvbmUuYW5nbGUgPSB0aGlzLmFuZ2xlO1xuICAgIHR3aXN0Lm1heEFuZ2xlID0gdGhpcy50d2lzdEFuZ2xlO1xuICB9XG5cbn1cblxuLyoqXG4gKiBDb25zdHJhaW5zIHR3byBib2RpZXMgdG8gYmUgYXQgYSBjb25zdGFudCBkaXN0YW5jZSBmcm9tIGVhY2ggb3RoZXJzIGNlbnRlciBvZiBtYXNzLlxuICovXG5jbGFzcyBEaXN0YW5jZUNvbnN0cmFpbnQgZXh0ZW5kcyBDb25zdHJhaW50IHtcbiAgLyoqXG4gICAqIFRoZSBkaXN0YW5jZSB0byBrZWVwLiBJZiB1bmRlZmluZWQsIGl0IHdpbGwgYmUgc2V0IHRvIHRoZSBjdXJyZW50IGRpc3RhbmNlIGJldHdlZW4gYm9keUEgYW5kIGJvZHlCXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gZGlzdGFuY2UgVGhlIGRpc3RhbmNlIHRvIGtlZXAuIElmIHVuZGVmaW5lZCwgaXQgd2lsbCBiZSBzZXQgdG8gdGhlIGN1cnJlbnQgZGlzdGFuY2UgYmV0d2VlbiBib2R5QSBhbmQgYm9keUIuXG4gICAqIEBwYXJhbSBtYXhGb3JjZSBUaGUgbWF4aW11bSBmb3JjZSB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHRvIGNvbnN0cmFpbiB0aGUgYm9kaWVzLlxuICAgKi9cbiAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBkaXN0YW5jZSwgbWF4Rm9yY2UgPSAxZTYpIHtcbiAgICBzdXBlcihib2R5QSwgYm9keUIpO1xuICAgIHRoaXMuZGlzdGFuY2UgPSB2b2lkIDA7XG4gICAgdGhpcy5kaXN0YW5jZUVxdWF0aW9uID0gdm9pZCAwO1xuXG4gICAgaWYgKHR5cGVvZiBkaXN0YW5jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRpc3RhbmNlID0gYm9keUEucG9zaXRpb24uZGlzdGFuY2VUbyhib2R5Qi5wb3NpdGlvbik7XG4gICAgfVxuXG4gICAgdGhpcy5kaXN0YW5jZSA9IGRpc3RhbmNlO1xuICAgIGNvbnN0IGVxID0gdGhpcy5kaXN0YW5jZUVxdWF0aW9uID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpO1xuICAgIHRoaXMuZXF1YXRpb25zLnB1c2goZXEpOyAvLyBNYWtlIGl0IGJpZGlyZWN0aW9uYWxcblxuICAgIGVxLm1pbkZvcmNlID0gLW1heEZvcmNlO1xuICAgIGVxLm1heEZvcmNlID0gbWF4Rm9yY2U7XG4gIH1cbiAgLyoqXG4gICAqIHVwZGF0ZVxuICAgKi9cblxuXG4gIHVwZGF0ZSgpIHtcbiAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7XG4gICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCO1xuICAgIGNvbnN0IGVxID0gdGhpcy5kaXN0YW5jZUVxdWF0aW9uO1xuICAgIGNvbnN0IGhhbGZEaXN0ID0gdGhpcy5kaXN0YW5jZSAqIDAuNTtcbiAgICBjb25zdCBub3JtYWwgPSBlcS5uaTtcbiAgICBib2R5Qi5wb3NpdGlvbi52c3ViKGJvZHlBLnBvc2l0aW9uLCBub3JtYWwpO1xuICAgIG5vcm1hbC5ub3JtYWxpemUoKTtcbiAgICBub3JtYWwuc2NhbGUoaGFsZkRpc3QsIGVxLnJpKTtcbiAgICBub3JtYWwuc2NhbGUoLWhhbGZEaXN0LCBlcS5yaik7XG4gIH1cblxufVxuXG4vKipcbiAqIExvY2sgY29uc3RyYWludC4gV2lsbCByZW1vdmUgYWxsIGRlZ3JlZXMgb2YgZnJlZWRvbSBiZXR3ZWVuIHRoZSBib2RpZXMuXG4gKi9cbmNsYXNzIExvY2tDb25zdHJhaW50IGV4dGVuZHMgUG9pbnRUb1BvaW50Q29uc3RyYWludCB7XG4gIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OyAvLyBTZXQgcGl2b3QgcG9pbnQgaW4gYmV0d2VlblxuXG4gICAgY29uc3QgcGl2b3RBID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBwaXZvdEIgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IGhhbGZXYXkgPSBuZXcgVmVjMygpO1xuICAgIGJvZHlBLnBvc2l0aW9uLnZhZGQoYm9keUIucG9zaXRpb24sIGhhbGZXYXkpO1xuICAgIGhhbGZXYXkuc2NhbGUoMC41LCBoYWxmV2F5KTtcbiAgICBib2R5Qi5wb2ludFRvTG9jYWxGcmFtZShoYWxmV2F5LCBwaXZvdEIpO1xuICAgIGJvZHlBLnBvaW50VG9Mb2NhbEZyYW1lKGhhbGZXYXksIHBpdm90QSk7IC8vIFRoZSBwb2ludC10by1wb2ludCBjb25zdHJhaW50IHdpbGwga2VlcCBhIHBvaW50IHNoYXJlZCBiZXR3ZWVuIHRoZSBib2RpZXNcblxuICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsgLy8gU3RvcmUgaW5pdGlhbCByb3RhdGlvbiBvZiB0aGUgYm9kaWVzIGFzIHVuaXQgdmVjdG9ycyBpbiB0aGUgbG9jYWwgYm9keSBzcGFjZXNcblxuICAgIHRoaXMueEEgPSB2b2lkIDA7XG4gICAgdGhpcy54QiA9IHZvaWQgMDtcbiAgICB0aGlzLnlBID0gdm9pZCAwO1xuICAgIHRoaXMueUIgPSB2b2lkIDA7XG4gICAgdGhpcy56QSA9IHZvaWQgMDtcbiAgICB0aGlzLnpCID0gdm9pZCAwO1xuICAgIHRoaXMucm90YXRpb25hbEVxdWF0aW9uMSA9IHZvaWQgMDtcbiAgICB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjIgPSB2b2lkIDA7XG4gICAgdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24zID0gdm9pZCAwO1xuICAgIHRoaXMubW90b3JFcXVhdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLnhBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9YKTtcbiAgICB0aGlzLnhCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9YKTtcbiAgICB0aGlzLnlBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9ZKTtcbiAgICB0aGlzLnlCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9ZKTtcbiAgICB0aGlzLnpBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9aKTtcbiAgICB0aGlzLnpCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9aKTsgLy8gLi4uYW5kIHRoZSBmb2xsb3dpbmcgcm90YXRpb25hbCBlcXVhdGlvbnMgd2lsbCBrZWVwIGFsbCByb3RhdGlvbmFsIERPRidzIGluIHBsYWNlXG5cbiAgICBjb25zdCByMSA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMSA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICBjb25zdCByMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICBjb25zdCByMyA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMyA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKHIxLCByMiwgcjMpO1xuICB9XG4gIC8qKlxuICAgKiB1cGRhdGVcbiAgICovXG5cblxuICB1cGRhdGUoKSB7XG4gICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBO1xuICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjtcbiAgICB0aGlzLm1vdG9yRXF1YXRpb247XG4gICAgY29uc3QgcjEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjE7XG4gICAgY29uc3QgcjIgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjI7XG4gICAgY29uc3QgcjMgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjM7XG4gICAgc3VwZXIudXBkYXRlKCk7IC8vIFRoZXNlIHZlY3RvciBwYWlycyBtdXN0IGJlIG9ydGhvZ29uYWxcblxuICAgIGJvZHlBLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLnhBLCByMS5heGlzQSk7XG4gICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueUIsIHIxLmF4aXNCKTtcbiAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy55QSwgcjIuYXhpc0EpO1xuICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLnpCLCByMi5heGlzQik7XG4gICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuekEsIHIzLmF4aXNBKTtcbiAgICBib2R5Qi52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy54QiwgcjMuYXhpc0IpO1xuICB9XG5cbn1cblxuLyoqXG4gKiBSb3RhdGlvbmFsIG1vdG9yIGNvbnN0cmFpbnQuIFRyaWVzIHRvIGtlZXAgdGhlIHJlbGF0aXZlIGFuZ3VsYXIgdmVsb2NpdHkgb2YgdGhlIGJvZGllcyB0byBhIGdpdmVuIHZhbHVlLlxuICovXG5jbGFzcyBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHtcbiAgLyoqXG4gICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIE1vdG9yIHZlbG9jaXR5LlxuICAgKi9cbiAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBtYXhGb3JjZSA9IDFlNikge1xuICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7XG4gICAgdGhpcy5heGlzQSA9IHZvaWQgMDtcbiAgICB0aGlzLmF4aXNCID0gdm9pZCAwO1xuICAgIHRoaXMudGFyZ2V0VmVsb2NpdHkgPSB2b2lkIDA7XG4gICAgdGhpcy5heGlzQSA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5heGlzQiA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy50YXJnZXRWZWxvY2l0eSA9IDA7XG4gIH1cblxuICBjb21wdXRlQihoKSB7XG4gICAgdGhpcy5hO1xuICAgIGNvbnN0IGIgPSB0aGlzLmI7XG4gICAgdGhpcy5iaTtcbiAgICB0aGlzLmJqO1xuICAgIGNvbnN0IGF4aXNBID0gdGhpcy5heGlzQTtcbiAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0I7XG4gICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7XG4gICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIGcgPSAwXG4gICAgLy8gZ2RvdCA9IGF4aXNBICogd2kgLSBheGlzQiAqIHdqXG4gICAgLy8gZ2RvdCA9IEcgKiBXID0gRyAqIFt2aSB3aSB2aiB3al1cbiAgICAvLyA9PlxuICAgIC8vIEcgPSBbMCBheGlzQSAwIC1heGlzQl1cblxuICAgIEdBLnJvdGF0aW9uYWwuY29weShheGlzQSk7XG4gICAgYXhpc0IubmVnYXRlKEdCLnJvdGF0aW9uYWwpO1xuICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKSAtIHRoaXMudGFyZ2V0VmVsb2NpdHk7XG4gICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTtcbiAgICBjb25zdCBCID0gLUdXICogYiAtIGggKiBHaU1mO1xuICAgIHJldHVybiBCO1xuICB9XG5cbn1cblxuLyoqXG4gKiBIaW5nZSBjb25zdHJhaW50LiBUaGluayBvZiBpdCBhcyBhIGRvb3IgaGluZ2UuIEl0IHRyaWVzIHRvIGtlZXAgdGhlIGRvb3IgaW4gdGhlIGNvcnJlY3QgcGxhY2UgYW5kIHdpdGggdGhlIGNvcnJlY3Qgb3JpZW50YXRpb24uXG4gKi9cbmNsYXNzIEhpbmdlQ29uc3RyYWludCBleHRlbmRzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQge1xuICAvKipcbiAgICogUm90YXRpb24gYXhpcywgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlBLlxuICAgKi9cblxuICAvKipcbiAgICogUm90YXRpb24gYXhpcywgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlCLlxuICAgKi9cbiAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7XG4gICAgY29uc3QgcGl2b3RBID0gb3B0aW9ucy5waXZvdEEgPyBvcHRpb25zLnBpdm90QS5jbG9uZSgpIDogbmV3IFZlYzMoKTtcbiAgICBjb25zdCBwaXZvdEIgPSBvcHRpb25zLnBpdm90QiA/IG9wdGlvbnMucGl2b3RCLmNsb25lKCkgOiBuZXcgVmVjMygpO1xuICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTtcbiAgICB0aGlzLmF4aXNBID0gdm9pZCAwO1xuICAgIHRoaXMuYXhpc0IgPSB2b2lkIDA7XG4gICAgdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xID0gdm9pZCAwO1xuICAgIHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IHZvaWQgMDtcbiAgICB0aGlzLm1vdG9yRXF1YXRpb24gPSB2b2lkIDA7XG4gICAgY29uc3QgYXhpc0EgPSB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApO1xuICAgIGF4aXNBLm5vcm1hbGl6ZSgpO1xuICAgIGNvbnN0IGF4aXNCID0gdGhpcy5heGlzQiA9IG9wdGlvbnMuYXhpc0IgPyBvcHRpb25zLmF4aXNCLmNsb25lKCkgOiBuZXcgVmVjMygxLCAwLCAwKTtcbiAgICBheGlzQi5ub3JtYWxpemUoKTtcbiAgICB0aGlzLmNvbGxpZGVDb25uZWN0ZWQgPSAhIW9wdGlvbnMuY29sbGlkZUNvbm5lY3RlZDtcbiAgICBjb25zdCByb3RhdGlvbmFsMSA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMSA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICBjb25zdCByb3RhdGlvbmFsMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTtcbiAgICBjb25zdCBtb3RvciA9IHRoaXMubW90b3JFcXVhdGlvbiA9IG5ldyBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbihib2R5QSwgYm9keUIsIG1heEZvcmNlKTtcbiAgICBtb3Rvci5lbmFibGVkID0gZmFsc2U7IC8vIE5vdCBlbmFibGVkIGJ5IGRlZmF1bHRcbiAgICAvLyBFcXVhdGlvbnMgdG8gYmUgZmVkIHRvIHRoZSBzb2x2ZXJcblxuICAgIHRoaXMuZXF1YXRpb25zLnB1c2gocm90YXRpb25hbDEsIHJvdGF0aW9uYWwyLCBtb3Rvcik7XG4gIH1cbiAgLyoqXG4gICAqIGVuYWJsZU1vdG9yXG4gICAqL1xuXG5cbiAgZW5hYmxlTW90b3IoKSB7XG4gICAgdGhpcy5tb3RvckVxdWF0aW9uLmVuYWJsZWQgPSB0cnVlO1xuICB9XG4gIC8qKlxuICAgKiBkaXNhYmxlTW90b3JcbiAgICovXG5cblxuICBkaXNhYmxlTW90b3IoKSB7XG4gICAgdGhpcy5tb3RvckVxdWF0aW9uLmVuYWJsZWQgPSBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogc2V0TW90b3JTcGVlZFxuICAgKi9cblxuXG4gIHNldE1vdG9yU3BlZWQoc3BlZWQpIHtcbiAgICB0aGlzLm1vdG9yRXF1YXRpb24udGFyZ2V0VmVsb2NpdHkgPSBzcGVlZDtcbiAgfVxuICAvKipcbiAgICogc2V0TW90b3JNYXhGb3JjZVxuICAgKi9cblxuXG4gIHNldE1vdG9yTWF4Rm9yY2UobWF4Rm9yY2UpIHtcbiAgICB0aGlzLm1vdG9yRXF1YXRpb24ubWF4Rm9yY2UgPSBtYXhGb3JjZTtcbiAgICB0aGlzLm1vdG9yRXF1YXRpb24ubWluRm9yY2UgPSAtbWF4Rm9yY2U7XG4gIH1cbiAgLyoqXG4gICAqIHVwZGF0ZVxuICAgKi9cblxuXG4gIHVwZGF0ZSgpIHtcbiAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7XG4gICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCO1xuICAgIGNvbnN0IG1vdG9yID0gdGhpcy5tb3RvckVxdWF0aW9uO1xuICAgIGNvbnN0IHIxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xO1xuICAgIGNvbnN0IHIyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yO1xuICAgIGNvbnN0IHdvcmxkQXhpc0EgPSBIaW5nZUNvbnN0cmFpbnRfdXBkYXRlX3RtcFZlYzE7XG4gICAgY29uc3Qgd29ybGRBeGlzQiA9IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMjtcbiAgICBjb25zdCBheGlzQSA9IHRoaXMuYXhpc0E7XG4gICAgY29uc3QgYXhpc0IgPSB0aGlzLmF4aXNCO1xuICAgIHN1cGVyLnVwZGF0ZSgpOyAvLyBHZXQgd29ybGQgYXhlc1xuXG4gICAgYm9keUEucXVhdGVybmlvbi52bXVsdChheGlzQSwgd29ybGRBeGlzQSk7XG4gICAgYm9keUIucXVhdGVybmlvbi52bXVsdChheGlzQiwgd29ybGRBeGlzQik7XG4gICAgd29ybGRBeGlzQS50YW5nZW50cyhyMS5heGlzQSwgcjIuYXhpc0EpO1xuICAgIHIxLmF4aXNCLmNvcHkod29ybGRBeGlzQik7XG4gICAgcjIuYXhpc0IuY29weSh3b3JsZEF4aXNCKTtcblxuICAgIGlmICh0aGlzLm1vdG9yRXF1YXRpb24uZW5hYmxlZCkge1xuICAgICAgYm9keUEucXVhdGVybmlvbi52bXVsdCh0aGlzLmF4aXNBLCBtb3Rvci5heGlzQSk7XG4gICAgICBib2R5Qi5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMuYXhpc0IsIG1vdG9yLmF4aXNCKTtcbiAgICB9XG4gIH1cblxufVxuY29uc3QgSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxID0gbmV3IFZlYzMoKTtcbmNvbnN0IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMiA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogQ29uc3RyYWlucyB0aGUgc2xpcHBpbmcgaW4gYSBjb250YWN0IGFsb25nIGEgdGFuZ2VudFxuICovXG5jbGFzcyBGcmljdGlvbkVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24ge1xuICAvLyBUYW5nZW50XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBzbGlwRm9yY2Ugc2hvdWxkIGJlICstRl9mcmljdGlvbiA9ICstbXUgKiBGX25vcm1hbCA9ICstbXUgKiBtICogZ1xuICAgKi9cbiAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBzbGlwRm9yY2UpIHtcbiAgICBzdXBlcihib2R5QSwgYm9keUIsIC1zbGlwRm9yY2UsIHNsaXBGb3JjZSk7XG4gICAgdGhpcy5yaSA9IHZvaWQgMDtcbiAgICB0aGlzLnJqID0gdm9pZCAwO1xuICAgIHRoaXMudCA9IHZvaWQgMDtcbiAgICB0aGlzLnJpID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLnJqID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLnQgPSBuZXcgVmVjMygpO1xuICB9XG5cbiAgY29tcHV0ZUIoaCkge1xuICAgIHRoaXMuYTtcbiAgICBjb25zdCBiID0gdGhpcy5iO1xuICAgIHRoaXMuYmk7XG4gICAgdGhpcy5iajtcbiAgICBjb25zdCByaSA9IHRoaXMucmk7XG4gICAgY29uc3QgcmogPSB0aGlzLnJqO1xuICAgIGNvbnN0IHJpeHQgPSBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxO1xuICAgIGNvbnN0IHJqeHQgPSBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyO1xuICAgIGNvbnN0IHQgPSB0aGlzLnQ7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0c1xuXG4gICAgcmkuY3Jvc3ModCwgcml4dCk7XG4gICAgcmouY3Jvc3ModCwgcmp4dCk7IC8vIEcgPSBbLXQgLXJpeHQgdCByanh0XVxuICAgIC8vIEFuZCByZW1lbWJlciwgdGhpcyBpcyBhIHB1cmUgdmVsb2NpdHkgY29uc3RyYWludCwgZyBpcyBhbHdheXMgemVybyFcblxuICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBO1xuICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCO1xuICAgIHQubmVnYXRlKEdBLnNwYXRpYWwpO1xuICAgIHJpeHQubmVnYXRlKEdBLnJvdGF0aW9uYWwpO1xuICAgIEdCLnNwYXRpYWwuY29weSh0KTtcbiAgICBHQi5yb3RhdGlvbmFsLmNvcHkocmp4dCk7XG4gICAgY29uc3QgR1cgPSB0aGlzLmNvbXB1dGVHVygpO1xuICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7XG4gICAgY29uc3QgQiA9IC1HVyAqIGIgLSBoICogR2lNZjtcbiAgICByZXR1cm4gQjtcbiAgfVxuXG59XG5jb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxID0gbmV3IFZlYzMoKTtcbmNvbnN0IEZyaWN0aW9uRXF1YXRpb25fY29tcHV0ZUJfdGVtcDIgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIERlZmluZXMgd2hhdCBoYXBwZW5zIHdoZW4gdHdvIG1hdGVyaWFscyBtZWV0LlxuICogQHRvZG8gUmVmYWN0b3IgbWF0ZXJpYWxzIHRvIG1hdGVyaWFsQSBhbmQgbWF0ZXJpYWxCXG4gKi9cbmNsYXNzIENvbnRhY3RNYXRlcmlhbCB7XG4gIC8qKlxuICAgKiBJZGVudGlmaWVyIG9mIHRoaXMgbWF0ZXJpYWwuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBQYXJ0aWNpcGF0aW5nIG1hdGVyaWFscy5cbiAgICovXG5cbiAgLyoqXG4gICAqIEZyaWN0aW9uIGNvZWZmaWNpZW50LlxuICAgKiBAZGVmYXVsdCAwLjNcbiAgICovXG5cbiAgLyoqXG4gICAqIFJlc3RpdHV0aW9uIGNvZWZmaWNpZW50LlxuICAgKiBAZGVmYXVsdCAwLjNcbiAgICovXG5cbiAgLyoqXG4gICAqIFN0aWZmbmVzcyBvZiB0aGUgcHJvZHVjZWQgY29udGFjdCBlcXVhdGlvbnMuXG4gICAqIEBkZWZhdWx0IDFlN1xuICAgKi9cblxuICAvKipcbiAgICogUmVsYXhhdGlvbiB0aW1lIG9mIHRoZSBwcm9kdWNlZCBjb250YWN0IGVxdWF0aW9ucy5cbiAgICogQGRlZmF1bHQgM1xuICAgKi9cblxuICAvKipcbiAgICogU3RpZmZuZXNzIG9mIHRoZSBwcm9kdWNlZCBmcmljdGlvbiBlcXVhdGlvbnMuXG4gICAqIEBkZWZhdWx0IDFlN1xuICAgKi9cblxuICAvKipcbiAgICogUmVsYXhhdGlvbiB0aW1lIG9mIHRoZSBwcm9kdWNlZCBmcmljdGlvbiBlcXVhdGlvbnNcbiAgICogQGRlZmF1bHQgM1xuICAgKi9cbiAgY29uc3RydWN0b3IobTEsIG0yLCBvcHRpb25zKSB7XG4gICAgdGhpcy5pZCA9IHZvaWQgMDtcbiAgICB0aGlzLm1hdGVyaWFscyA9IHZvaWQgMDtcbiAgICB0aGlzLmZyaWN0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMucmVzdGl0dXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MgPSB2b2lkIDA7XG4gICAgdGhpcy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcyA9IHZvaWQgMDtcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uID0gdm9pZCAwO1xuICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7XG4gICAgICBmcmljdGlvbjogMC4zLFxuICAgICAgcmVzdGl0dXRpb246IDAuMyxcbiAgICAgIGNvbnRhY3RFcXVhdGlvblN0aWZmbmVzczogMWU3LFxuICAgICAgY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbjogMyxcbiAgICAgIGZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3M6IDFlNyxcbiAgICAgIGZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uOiAzXG4gICAgfSk7XG4gICAgdGhpcy5pZCA9IENvbnRhY3RNYXRlcmlhbC5pZENvdW50ZXIrKztcbiAgICB0aGlzLm1hdGVyaWFscyA9IFttMSwgbTJdO1xuICAgIHRoaXMuZnJpY3Rpb24gPSBvcHRpb25zLmZyaWN0aW9uO1xuICAgIHRoaXMucmVzdGl0dXRpb24gPSBvcHRpb25zLnJlc3RpdHV0aW9uO1xuICAgIHRoaXMuY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzID0gb3B0aW9ucy5jb250YWN0RXF1YXRpb25TdGlmZm5lc3M7XG4gICAgdGhpcy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uID0gb3B0aW9ucy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uO1xuICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcyA9IG9wdGlvbnMuZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcztcbiAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uID0gb3B0aW9ucy5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbjtcbiAgfVxuXG59XG5Db250YWN0TWF0ZXJpYWwuaWRDb3VudGVyID0gMDtcblxuLyoqXG4gKiBEZWZpbmVzIGEgcGh5c2ljcyBtYXRlcmlhbC5cbiAqL1xuY2xhc3MgTWF0ZXJpYWwge1xuICAvKipcbiAgICogTWF0ZXJpYWwgbmFtZS5cbiAgICogSWYgb3B0aW9ucyBpcyBhIHN0cmluZywgbmFtZSB3aWxsIGJlIHNldCB0byB0aGF0IHN0cmluZy5cbiAgICogQHRvZG8gRGVwcmVjYXRlIHRoaXNcbiAgICovXG5cbiAgLyoqIE1hdGVyaWFsIGlkLiAqL1xuXG4gIC8qKlxuICAgKiBGcmljdGlvbiBmb3IgdGhpcyBtYXRlcmlhbC5cbiAgICogSWYgbm9uLW5lZ2F0aXZlLCBpdCB3aWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgZnJpY3Rpb24gZ2l2ZW4gYnkgQ29udGFjdE1hdGVyaWFscy4gSWYgdGhlcmUncyBubyBtYXRjaGluZyBDb250YWN0TWF0ZXJpYWwsIHRoZSB2YWx1ZSBmcm9tIGBkZWZhdWx0Q29udGFjdE1hdGVyaWFsYCBpbiB0aGUgV29ybGQgd2lsbCBiZSB1c2VkLlxuICAgKi9cblxuICAvKipcbiAgICogUmVzdGl0dXRpb24gZm9yIHRoaXMgbWF0ZXJpYWwuXG4gICAqIElmIG5vbi1uZWdhdGl2ZSwgaXQgd2lsbCBiZSB1c2VkIGluc3RlYWQgb2YgdGhlIHJlc3RpdHV0aW9uIGdpdmVuIGJ5IENvbnRhY3RNYXRlcmlhbHMuIElmIHRoZXJlJ3Mgbm8gbWF0Y2hpbmcgQ29udGFjdE1hdGVyaWFsLCB0aGUgdmFsdWUgZnJvbSBgZGVmYXVsdENvbnRhY3RNYXRlcmlhbGAgaW4gdGhlIFdvcmxkIHdpbGwgYmUgdXNlZC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMubmFtZSA9IHZvaWQgMDtcbiAgICB0aGlzLmlkID0gdm9pZCAwO1xuICAgIHRoaXMuZnJpY3Rpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5yZXN0aXR1dGlvbiA9IHZvaWQgMDtcbiAgICBsZXQgbmFtZSA9ICcnOyAvLyBCYWNrd2FyZHMgY29tcGF0aWJpbGl0eSBmaXhcblxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vY29uc29sZS53YXJuKGBQYXNzaW5nIGEgc3RyaW5nIHRvIE1hdGVyaWFsT3B0aW9ucyBpcyBkZXByZWNhdGVkLCBhbmQgaGFzIG5vIGVmZmVjdGApXG4gICAgICBuYW1lID0gb3B0aW9ucztcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMuaWQgPSBNYXRlcmlhbC5pZENvdW50ZXIrKztcbiAgICB0aGlzLmZyaWN0aW9uID0gdHlwZW9mIG9wdGlvbnMuZnJpY3Rpb24gIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5mcmljdGlvbiA6IC0xO1xuICAgIHRoaXMucmVzdGl0dXRpb24gPSB0eXBlb2Ygb3B0aW9ucy5yZXN0aXR1dGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnJlc3RpdHV0aW9uIDogLTE7XG4gIH1cblxufVxuTWF0ZXJpYWwuaWRDb3VudGVyID0gMDtcblxuLyoqXG4gKiBBIHNwcmluZywgY29ubmVjdGluZyB0d28gYm9kaWVzLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCBzcHJpbmcgPSBuZXcgU3ByaW5nKGJveEJvZHksIHNwaGVyZUJvZHksIHtcbiAqICAgICAgIHJlc3RMZW5ndGg6IDAsXG4gKiAgICAgICBzdGlmZm5lc3M6IDUwLFxuICogICAgICAgZGFtcGluZzogMSxcbiAqICAgICB9KVxuICpcbiAqICAgICAvLyBDb21wdXRlIHRoZSBmb3JjZSBhZnRlciBlYWNoIHN0ZXBcbiAqICAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIChldmVudCkgPT4ge1xuICogICAgICAgc3ByaW5nLmFwcGx5Rm9yY2UoKVxuICogICAgIH0pXG4gKi9cbmNsYXNzIFNwcmluZyB7XG4gIC8qKlxuICAgKiBSZXN0IGxlbmd0aCBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+IDAuXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIFN0aWZmbmVzcyBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+PSAwLlxuICAgKiBAZGVmYXVsdCAxMDBcbiAgICovXG5cbiAgLyoqXG4gICAqIERhbXBpbmcgb2YgdGhlIHNwcmluZy4gQSBudW1iZXIgPj0gMC5cbiAgICogQGRlZmF1bHQgMVxuICAgKi9cblxuICAvKipcbiAgICogRmlyc3QgY29ubmVjdGVkIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBTZWNvbmQgY29ubmVjdGVkIGJvZHkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbmNob3IgZm9yIGJvZHlBIGluIGxvY2FsIGJvZHlBIGNvb3JkaW5hdGVzLlxuICAgKiBXaGVyZSB0byBob29rIHRoZSBzcHJpbmcgdG8gYm9keSBBLCBpbiBsb2NhbCBib2R5IGNvb3JkaW5hdGVzLlxuICAgKiBAZGVmYXVsdCBuZXcgVmVjMygpXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbmNob3IgZm9yIGJvZHlCIGluIGxvY2FsIGJvZHlCIGNvb3JkaW5hdGVzLlxuICAgKiBXaGVyZSB0byBob29rIHRoZSBzcHJpbmcgdG8gYm9keSBCLCBpbiBsb2NhbCBib2R5IGNvb3JkaW5hdGVzLlxuICAgKiBAZGVmYXVsdCBuZXcgVmVjMygpXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMucmVzdExlbmd0aCA9IHZvaWQgMDtcbiAgICB0aGlzLnN0aWZmbmVzcyA9IHZvaWQgMDtcbiAgICB0aGlzLmRhbXBpbmcgPSB2b2lkIDA7XG4gICAgdGhpcy5ib2R5QSA9IHZvaWQgMDtcbiAgICB0aGlzLmJvZHlCID0gdm9pZCAwO1xuICAgIHRoaXMubG9jYWxBbmNob3JBID0gdm9pZCAwO1xuICAgIHRoaXMubG9jYWxBbmNob3JCID0gdm9pZCAwO1xuICAgIHRoaXMucmVzdExlbmd0aCA9IHR5cGVvZiBvcHRpb25zLnJlc3RMZW5ndGggPT09ICdudW1iZXInID8gb3B0aW9ucy5yZXN0TGVuZ3RoIDogMTtcbiAgICB0aGlzLnN0aWZmbmVzcyA9IG9wdGlvbnMuc3RpZmZuZXNzIHx8IDEwMDtcbiAgICB0aGlzLmRhbXBpbmcgPSBvcHRpb25zLmRhbXBpbmcgfHwgMTtcbiAgICB0aGlzLmJvZHlBID0gYm9keUE7XG4gICAgdGhpcy5ib2R5QiA9IGJvZHlCO1xuICAgIHRoaXMubG9jYWxBbmNob3JBID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLmxvY2FsQW5jaG9yQiA9IG5ldyBWZWMzKCk7XG5cbiAgICBpZiAob3B0aW9ucy5sb2NhbEFuY2hvckEpIHtcbiAgICAgIHRoaXMubG9jYWxBbmNob3JBLmNvcHkob3B0aW9ucy5sb2NhbEFuY2hvckEpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmxvY2FsQW5jaG9yQikge1xuICAgICAgdGhpcy5sb2NhbEFuY2hvckIuY29weShvcHRpb25zLmxvY2FsQW5jaG9yQik7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMud29ybGRBbmNob3JBKSB7XG4gICAgICB0aGlzLnNldFdvcmxkQW5jaG9yQShvcHRpb25zLndvcmxkQW5jaG9yQSk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMud29ybGRBbmNob3JCKSB7XG4gICAgICB0aGlzLnNldFdvcmxkQW5jaG9yQihvcHRpb25zLndvcmxkQW5jaG9yQik7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEEsIHVzaW5nIHdvcmxkIGNvb3JkaW5hdGVzLlxuICAgKi9cblxuXG4gIHNldFdvcmxkQW5jaG9yQSh3b3JsZEFuY2hvckEpIHtcbiAgICB0aGlzLmJvZHlBLnBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkQW5jaG9yQSwgdGhpcy5sb2NhbEFuY2hvckEpO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEIsIHVzaW5nIHdvcmxkIGNvb3JkaW5hdGVzLlxuICAgKi9cblxuXG4gIHNldFdvcmxkQW5jaG9yQih3b3JsZEFuY2hvckIpIHtcbiAgICB0aGlzLmJvZHlCLnBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkQW5jaG9yQiwgdGhpcy5sb2NhbEFuY2hvckIpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEEsIGluIHdvcmxkIGNvb3JkaW5hdGVzLlxuICAgKiBAcGFyYW0gcmVzdWx0IFRoZSB2ZWN0b3IgdG8gc3RvcmUgdGhlIHJlc3VsdCBpbi5cbiAgICovXG5cblxuICBnZXRXb3JsZEFuY2hvckEocmVzdWx0KSB7XG4gICAgdGhpcy5ib2R5QS5wb2ludFRvV29ybGRGcmFtZSh0aGlzLmxvY2FsQW5jaG9yQSwgcmVzdWx0KTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBhbmNob3IgcG9pbnQgb24gYm9keSBCLCBpbiB3b3JsZCBjb29yZGluYXRlcy5cbiAgICogQHBhcmFtIHJlc3VsdCBUaGUgdmVjdG9yIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uXG4gICAqL1xuXG5cbiAgZ2V0V29ybGRBbmNob3JCKHJlc3VsdCkge1xuICAgIHRoaXMuYm9keUIucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5sb2NhbEFuY2hvckIsIHJlc3VsdCk7XG4gIH1cbiAgLyoqXG4gICAqIEFwcGx5IHRoZSBzcHJpbmcgZm9yY2UgdG8gdGhlIGNvbm5lY3RlZCBib2RpZXMuXG4gICAqL1xuXG5cbiAgYXBwbHlGb3JjZSgpIHtcbiAgICBjb25zdCBrID0gdGhpcy5zdGlmZm5lc3M7XG4gICAgY29uc3QgZCA9IHRoaXMuZGFtcGluZztcbiAgICBjb25zdCBsID0gdGhpcy5yZXN0TGVuZ3RoO1xuICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTtcbiAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7XG4gICAgY29uc3QgciA9IGFwcGx5Rm9yY2VfcjtcbiAgICBjb25zdCByX3VuaXQgPSBhcHBseUZvcmNlX3JfdW5pdDtcbiAgICBjb25zdCB1ID0gYXBwbHlGb3JjZV91O1xuICAgIGNvbnN0IGYgPSBhcHBseUZvcmNlX2Y7XG4gICAgY29uc3QgdG1wID0gYXBwbHlGb3JjZV90bXA7XG4gICAgY29uc3Qgd29ybGRBbmNob3JBID0gYXBwbHlGb3JjZV93b3JsZEFuY2hvckE7XG4gICAgY29uc3Qgd29ybGRBbmNob3JCID0gYXBwbHlGb3JjZV93b3JsZEFuY2hvckI7XG4gICAgY29uc3QgcmkgPSBhcHBseUZvcmNlX3JpO1xuICAgIGNvbnN0IHJqID0gYXBwbHlGb3JjZV9yajtcbiAgICBjb25zdCByaV94X2YgPSBhcHBseUZvcmNlX3JpX3hfZjtcbiAgICBjb25zdCByal94X2YgPSBhcHBseUZvcmNlX3JqX3hfZjsgLy8gR2V0IHdvcmxkIGFuY2hvcnNcblxuICAgIHRoaXMuZ2V0V29ybGRBbmNob3JBKHdvcmxkQW5jaG9yQSk7XG4gICAgdGhpcy5nZXRXb3JsZEFuY2hvckIod29ybGRBbmNob3JCKTsgLy8gR2V0IG9mZnNldCBwb2ludHNcblxuICAgIHdvcmxkQW5jaG9yQS52c3ViKGJvZHlBLnBvc2l0aW9uLCByaSk7XG4gICAgd29ybGRBbmNob3JCLnZzdWIoYm9keUIucG9zaXRpb24sIHJqKTsgLy8gQ29tcHV0ZSBkaXN0YW5jZSB2ZWN0b3IgYmV0d2VlbiB3b3JsZCBhbmNob3IgcG9pbnRzXG5cbiAgICB3b3JsZEFuY2hvckIudnN1Yih3b3JsZEFuY2hvckEsIHIpO1xuICAgIGNvbnN0IHJsZW4gPSByLmxlbmd0aCgpO1xuICAgIHJfdW5pdC5jb3B5KHIpO1xuICAgIHJfdW5pdC5ub3JtYWxpemUoKTsgLy8gQ29tcHV0ZSByZWxhdGl2ZSB2ZWxvY2l0eSBvZiB0aGUgYW5jaG9yIHBvaW50cywgdVxuXG4gICAgYm9keUIudmVsb2NpdHkudnN1Yihib2R5QS52ZWxvY2l0eSwgdSk7IC8vIEFkZCByb3RhdGlvbmFsIHZlbG9jaXR5XG5cbiAgICBib2R5Qi5hbmd1bGFyVmVsb2NpdHkuY3Jvc3MocmosIHRtcCk7XG4gICAgdS52YWRkKHRtcCwgdSk7XG4gICAgYm9keUEuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHJpLCB0bXApO1xuICAgIHUudnN1Yih0bXAsIHUpOyAvLyBGID0gLSBrICogKCB4IC0gTCApIC0gRCAqICggdSApXG5cbiAgICByX3VuaXQuc2NhbGUoLWsgKiAocmxlbiAtIGwpIC0gZCAqIHUuZG90KHJfdW5pdCksIGYpOyAvLyBBZGQgZm9yY2VzIHRvIGJvZGllc1xuXG4gICAgYm9keUEuZm9yY2UudnN1YihmLCBib2R5QS5mb3JjZSk7XG4gICAgYm9keUIuZm9yY2UudmFkZChmLCBib2R5Qi5mb3JjZSk7IC8vIEFuZ3VsYXIgZm9yY2VcblxuICAgIHJpLmNyb3NzKGYsIHJpX3hfZik7XG4gICAgcmouY3Jvc3MoZiwgcmpfeF9mKTtcbiAgICBib2R5QS50b3JxdWUudnN1YihyaV94X2YsIGJvZHlBLnRvcnF1ZSk7XG4gICAgYm9keUIudG9ycXVlLnZhZGQocmpfeF9mLCBib2R5Qi50b3JxdWUpO1xuICB9XG5cbn1cbmNvbnN0IGFwcGx5Rm9yY2VfciA9IG5ldyBWZWMzKCk7XG5jb25zdCBhcHBseUZvcmNlX3JfdW5pdCA9IG5ldyBWZWMzKCk7XG5jb25zdCBhcHBseUZvcmNlX3UgPSBuZXcgVmVjMygpO1xuY29uc3QgYXBwbHlGb3JjZV9mID0gbmV3IFZlYzMoKTtcbmNvbnN0IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JBID0gbmV3IFZlYzMoKTtcbmNvbnN0IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JCID0gbmV3IFZlYzMoKTtcbmNvbnN0IGFwcGx5Rm9yY2VfcmkgPSBuZXcgVmVjMygpO1xuY29uc3QgYXBwbHlGb3JjZV9yaiA9IG5ldyBWZWMzKCk7XG5jb25zdCBhcHBseUZvcmNlX3JpX3hfZiA9IG5ldyBWZWMzKCk7XG5jb25zdCBhcHBseUZvcmNlX3JqX3hfZiA9IG5ldyBWZWMzKCk7XG5jb25zdCBhcHBseUZvcmNlX3RtcCA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogV2hlZWxJbmZvXG4gKi9cbmNsYXNzIFdoZWVsSW5mbyB7XG4gIC8qKlxuICAgKiBNYXggdHJhdmVsIGRpc3RhbmNlIG9mIHRoZSBzdXNwZW5zaW9uLCBpbiBtZXRlcnMuXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIFNwZWVkIHRvIGFwcGx5IHRvIHRoZSB3aGVlbCByb3RhdGlvbiB3aGVuIHRoZSB3aGVlbCBpcyBzbGlkaW5nLlxuICAgKiBAZGVmYXVsdCAtMC4xXG4gICAqL1xuXG4gIC8qKlxuICAgKiBJZiB0aGUgY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCBzaG91bGQgYmUgdXNlZC5cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG5cbiAgLyoqXG4gICAqIHNsaWRpbmdcbiAgICovXG5cbiAgLyoqXG4gICAqIENvbm5lY3Rpb24gcG9pbnQsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgY2hhc3NpcyBib2R5IGZyYW1lLlxuICAgKi9cblxuICAvKipcbiAgICogY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBkaXJlY3Rpb25Mb2NhbFxuICAgKi9cblxuICAvKipcbiAgICogZGlyZWN0aW9uV29ybGRcbiAgICovXG5cbiAgLyoqXG4gICAqIGF4bGVMb2NhbFxuICAgKi9cblxuICAvKipcbiAgICogYXhsZVdvcmxkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBzdXNwZW5zaW9uUmVzdExlbmd0aFxuICAgKiBAZGVmYXVsdCAxXG4gICAqL1xuXG4gIC8qKlxuICAgKiBzdXNwZW5zaW9uTWF4TGVuZ3RoXG4gICAqIEBkZWZhdWx0IDJcbiAgICovXG5cbiAgLyoqXG4gICAqIHJhZGl1c1xuICAgKiBAZGVmYXVsdCAxXG4gICAqL1xuXG4gIC8qKlxuICAgKiBzdXNwZW5zaW9uU3RpZmZuZXNzXG4gICAqIEBkZWZhdWx0IDEwMFxuICAgKi9cblxuICAvKipcbiAgICogZGFtcGluZ0NvbXByZXNzaW9uXG4gICAqIEBkZWZhdWx0IDEwXG4gICAqL1xuXG4gIC8qKlxuICAgKiBkYW1waW5nUmVsYXhhdGlvblxuICAgKiBAZGVmYXVsdCAxMFxuICAgKi9cblxuICAvKipcbiAgICogZnJpY3Rpb25TbGlwXG4gICAqIEBkZWZhdWx0IDEwLjVcbiAgICovXG5cbiAgLyoqIGZvcndhcmRBY2NlbGVyYXRpb24gKi9cblxuICAvKiogc2lkZUFjY2VsZXJhdGlvbiAqL1xuXG4gIC8qKlxuICAgKiBzdGVlcmluZ1xuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuXG4gIC8qKlxuICAgKiBSb3RhdGlvbiB2YWx1ZSwgaW4gcmFkaWFucy5cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cblxuICAvKipcbiAgICogZGVsdGFSb3RhdGlvblxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuXG4gIC8qKlxuICAgKiByb2xsSW5mbHVlbmNlXG4gICAqIEBkZWZhdWx0IDAuMDFcbiAgICovXG5cbiAgLyoqXG4gICAqIG1heFN1c3BlbnNpb25Gb3JjZVxuICAgKi9cblxuICAvKipcbiAgICogZW5naW5lRm9yY2VcbiAgICovXG5cbiAgLyoqXG4gICAqIGJyYWtlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBpc0Zyb250V2hlZWxcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cblxuICAvKipcbiAgICogY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uXG4gICAqIEBkZWZhdWx0IDFcbiAgICovXG5cbiAgLyoqXG4gICAqIHN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5XG4gICAqIEBkZWZhdWx0IDBcbiAgICovXG5cbiAgLyoqXG4gICAqIHN1c3BlbnNpb25Gb3JjZVxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuXG4gIC8qKlxuICAgKiBzbGlwSW5mb1xuICAgKi9cblxuICAvKipcbiAgICogc2tpZEluZm9cbiAgICogQGRlZmF1bHQgMFxuICAgKi9cblxuICAvKipcbiAgICogc3VzcGVuc2lvbkxlbmd0aFxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuXG4gIC8qKlxuICAgKiBzaWRlSW1wdWxzZVxuICAgKi9cblxuICAvKipcbiAgICogZm9yd2FyZEltcHVsc2VcbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSByZXN1bHQgZnJvbSByYXljYXN0aW5nLlxuICAgKi9cblxuICAvKipcbiAgICogV2hlZWwgd29ybGQgdHJhbnNmb3JtLlxuICAgKi9cblxuICAvKipcbiAgICogaXNJbkNvbnRhY3RcbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMubWF4U3VzcGVuc2lvblRyYXZlbCA9IHZvaWQgMDtcbiAgICB0aGlzLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgPSB2b2lkIDA7XG4gICAgdGhpcy51c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkID0gdm9pZCAwO1xuICAgIHRoaXMuc2xpZGluZyA9IHZvaWQgMDtcbiAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCA9IHZvaWQgMDtcbiAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCA9IHZvaWQgMDtcbiAgICB0aGlzLmRpcmVjdGlvbkxvY2FsID0gdm9pZCAwO1xuICAgIHRoaXMuZGlyZWN0aW9uV29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy5heGxlTG9jYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5heGxlV29ybGQgPSB2b2lkIDA7XG4gICAgdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aCA9IHZvaWQgMDtcbiAgICB0aGlzLnN1c3BlbnNpb25NYXhMZW5ndGggPSB2b2lkIDA7XG4gICAgdGhpcy5yYWRpdXMgPSB2b2lkIDA7XG4gICAgdGhpcy5zdXNwZW5zaW9uU3RpZmZuZXNzID0gdm9pZCAwO1xuICAgIHRoaXMuZGFtcGluZ0NvbXByZXNzaW9uID0gdm9pZCAwO1xuICAgIHRoaXMuZGFtcGluZ1JlbGF4YXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5mcmljdGlvblNsaXAgPSB2b2lkIDA7XG4gICAgdGhpcy5mb3J3YXJkQWNjZWxlcmF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuc2lkZUFjY2VsZXJhdGlvbiA9IHZvaWQgMDtcbiAgICB0aGlzLnN0ZWVyaW5nID0gdm9pZCAwO1xuICAgIHRoaXMucm90YXRpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5kZWx0YVJvdGF0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMucm9sbEluZmx1ZW5jZSA9IHZvaWQgMDtcbiAgICB0aGlzLm1heFN1c3BlbnNpb25Gb3JjZSA9IHZvaWQgMDtcbiAgICB0aGlzLmVuZ2luZUZvcmNlID0gdm9pZCAwO1xuICAgIHRoaXMuYnJha2UgPSB2b2lkIDA7XG4gICAgdGhpcy5pc0Zyb250V2hlZWwgPSB2b2lkIDA7XG4gICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSB2b2lkIDA7XG4gICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IHZvaWQgMDtcbiAgICB0aGlzLnN1c3BlbnNpb25Gb3JjZSA9IHZvaWQgMDtcbiAgICB0aGlzLnNsaXBJbmZvID0gdm9pZCAwO1xuICAgIHRoaXMuc2tpZEluZm8gPSB2b2lkIDA7XG4gICAgdGhpcy5zdXNwZW5zaW9uTGVuZ3RoID0gdm9pZCAwO1xuICAgIHRoaXMuc2lkZUltcHVsc2UgPSB2b2lkIDA7XG4gICAgdGhpcy5mb3J3YXJkSW1wdWxzZSA9IHZvaWQgMDtcbiAgICB0aGlzLnJheWNhc3RSZXN1bHQgPSB2b2lkIDA7XG4gICAgdGhpcy53b3JsZFRyYW5zZm9ybSA9IHZvaWQgMDtcbiAgICB0aGlzLmlzSW5Db250YWN0ID0gdm9pZCAwO1xuICAgIG9wdGlvbnMgPSBVdGlscy5kZWZhdWx0cyhvcHRpb25zLCB7XG4gICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWw6IG5ldyBWZWMzKCksXG4gICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQ6IG5ldyBWZWMzKCksXG4gICAgICBkaXJlY3Rpb25Mb2NhbDogbmV3IFZlYzMoKSxcbiAgICAgIGRpcmVjdGlvbldvcmxkOiBuZXcgVmVjMygpLFxuICAgICAgYXhsZUxvY2FsOiBuZXcgVmVjMygpLFxuICAgICAgYXhsZVdvcmxkOiBuZXcgVmVjMygpLFxuICAgICAgc3VzcGVuc2lvblJlc3RMZW5ndGg6IDEsXG4gICAgICBzdXNwZW5zaW9uTWF4TGVuZ3RoOiAyLFxuICAgICAgcmFkaXVzOiAxLFxuICAgICAgc3VzcGVuc2lvblN0aWZmbmVzczogMTAwLFxuICAgICAgZGFtcGluZ0NvbXByZXNzaW9uOiAxMCxcbiAgICAgIGRhbXBpbmdSZWxheGF0aW9uOiAxMCxcbiAgICAgIGZyaWN0aW9uU2xpcDogMTAuNSxcbiAgICAgIGZvcndhcmRBY2NlbGVyYXRpb246IDEsXG4gICAgICBzaWRlQWNjZWxlcmF0aW9uOiAxLFxuICAgICAgc3RlZXJpbmc6IDAsXG4gICAgICByb3RhdGlvbjogMCxcbiAgICAgIGRlbHRhUm90YXRpb246IDAsXG4gICAgICByb2xsSW5mbHVlbmNlOiAwLjAxLFxuICAgICAgbWF4U3VzcGVuc2lvbkZvcmNlOiBOdW1iZXIuTUFYX1ZBTFVFLFxuICAgICAgaXNGcm9udFdoZWVsOiB0cnVlLFxuICAgICAgY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uOiAxLFxuICAgICAgc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHk6IDAsXG4gICAgICBzdXNwZW5zaW9uRm9yY2U6IDAsXG4gICAgICBzbGlwSW5mbzogMCxcbiAgICAgIHNraWRJbmZvOiAwLFxuICAgICAgc3VzcGVuc2lvbkxlbmd0aDogMCxcbiAgICAgIG1heFN1c3BlbnNpb25UcmF2ZWw6IDEsXG4gICAgICB1c2VDdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkOiBmYWxzZSxcbiAgICAgIGN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQ6IC0wLjFcbiAgICB9KTtcbiAgICB0aGlzLm1heFN1c3BlbnNpb25UcmF2ZWwgPSBvcHRpb25zLm1heFN1c3BlbnNpb25UcmF2ZWw7XG4gICAgdGhpcy5jdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkID0gb3B0aW9ucy5jdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkO1xuICAgIHRoaXMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCA9IG9wdGlvbnMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDtcbiAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCA9IG9wdGlvbnMuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsLmNsb25lKCk7XG4gICAgdGhpcy5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQgPSBvcHRpb25zLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZC5jbG9uZSgpO1xuICAgIHRoaXMuZGlyZWN0aW9uTG9jYWwgPSBvcHRpb25zLmRpcmVjdGlvbkxvY2FsLmNsb25lKCk7XG4gICAgdGhpcy5kaXJlY3Rpb25Xb3JsZCA9IG9wdGlvbnMuZGlyZWN0aW9uV29ybGQuY2xvbmUoKTtcbiAgICB0aGlzLmF4bGVMb2NhbCA9IG9wdGlvbnMuYXhsZUxvY2FsLmNsb25lKCk7XG4gICAgdGhpcy5heGxlV29ybGQgPSBvcHRpb25zLmF4bGVXb3JsZC5jbG9uZSgpO1xuICAgIHRoaXMuc3VzcGVuc2lvblJlc3RMZW5ndGggPSBvcHRpb25zLnN1c3BlbnNpb25SZXN0TGVuZ3RoO1xuICAgIHRoaXMuc3VzcGVuc2lvbk1heExlbmd0aCA9IG9wdGlvbnMuc3VzcGVuc2lvbk1heExlbmd0aDtcbiAgICB0aGlzLnJhZGl1cyA9IG9wdGlvbnMucmFkaXVzO1xuICAgIHRoaXMuc3VzcGVuc2lvblN0aWZmbmVzcyA9IG9wdGlvbnMuc3VzcGVuc2lvblN0aWZmbmVzcztcbiAgICB0aGlzLmRhbXBpbmdDb21wcmVzc2lvbiA9IG9wdGlvbnMuZGFtcGluZ0NvbXByZXNzaW9uO1xuICAgIHRoaXMuZGFtcGluZ1JlbGF4YXRpb24gPSBvcHRpb25zLmRhbXBpbmdSZWxheGF0aW9uO1xuICAgIHRoaXMuZnJpY3Rpb25TbGlwID0gb3B0aW9ucy5mcmljdGlvblNsaXA7XG4gICAgdGhpcy5mb3J3YXJkQWNjZWxlcmF0aW9uID0gb3B0aW9ucy5mb3J3YXJkQWNjZWxlcmF0aW9uO1xuICAgIHRoaXMuc2lkZUFjY2VsZXJhdGlvbiA9IG9wdGlvbnMuc2lkZUFjY2VsZXJhdGlvbjtcbiAgICB0aGlzLnN0ZWVyaW5nID0gMDtcbiAgICB0aGlzLnJvdGF0aW9uID0gMDtcbiAgICB0aGlzLmRlbHRhUm90YXRpb24gPSAwO1xuICAgIHRoaXMucm9sbEluZmx1ZW5jZSA9IG9wdGlvbnMucm9sbEluZmx1ZW5jZTtcbiAgICB0aGlzLm1heFN1c3BlbnNpb25Gb3JjZSA9IG9wdGlvbnMubWF4U3VzcGVuc2lvbkZvcmNlO1xuICAgIHRoaXMuZW5naW5lRm9yY2UgPSAwO1xuICAgIHRoaXMuYnJha2UgPSAwO1xuICAgIHRoaXMuaXNGcm9udFdoZWVsID0gb3B0aW9ucy5pc0Zyb250V2hlZWw7XG4gICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxO1xuICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSAwO1xuICAgIHRoaXMuc3VzcGVuc2lvbkZvcmNlID0gMDtcbiAgICB0aGlzLnNsaXBJbmZvID0gMDtcbiAgICB0aGlzLnNraWRJbmZvID0gMDtcbiAgICB0aGlzLnN1c3BlbnNpb25MZW5ndGggPSAwO1xuICAgIHRoaXMuc2lkZUltcHVsc2UgPSAwO1xuICAgIHRoaXMuZm9yd2FyZEltcHVsc2UgPSAwO1xuICAgIHRoaXMucmF5Y2FzdFJlc3VsdCA9IG5ldyBSYXljYXN0UmVzdWx0KCk7XG4gICAgdGhpcy53b3JsZFRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm0oKTtcbiAgICB0aGlzLmlzSW5Db250YWN0ID0gZmFsc2U7XG4gIH1cblxuICB1cGRhdGVXaGVlbChjaGFzc2lzKSB7XG4gICAgY29uc3QgcmF5Y2FzdFJlc3VsdCA9IHRoaXMucmF5Y2FzdFJlc3VsdDtcblxuICAgIGlmICh0aGlzLmlzSW5Db250YWN0KSB7XG4gICAgICBjb25zdCBwcm9qZWN0ID0gcmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZC5kb3QocmF5Y2FzdFJlc3VsdC5kaXJlY3Rpb25Xb3JsZCk7XG4gICAgICByYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1YihjaGFzc2lzLnBvc2l0aW9uLCByZWxwb3MpO1xuICAgICAgY2hhc3Npcy5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChyZWxwb3MsIGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTtcbiAgICAgIGNvbnN0IHByb2pWZWwgPSByYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdChjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7XG5cbiAgICAgIGlmIChwcm9qZWN0ID49IC0wLjEpIHtcbiAgICAgICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDAuMDtcbiAgICAgICAgdGhpcy5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjAgLyAwLjE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBpbnYgPSAtMSAvIHByb2plY3Q7XG4gICAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSBwcm9qVmVsICogaW52O1xuICAgICAgICB0aGlzLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbiA9IGludjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm90IGluIGNvbnRhY3QgOiBwb3NpdGlvbiB3aGVlbCBpbiBhIG5pY2UgKHJlc3QgbGVuZ3RoKSBwb3NpdGlvblxuICAgICAgcmF5Y2FzdFJlc3VsdC5zdXNwZW5zaW9uTGVuZ3RoID0gdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aDtcbiAgICAgIHRoaXMuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSAwLjA7XG4gICAgICByYXljYXN0UmVzdWx0LmRpcmVjdGlvbldvcmxkLnNjYWxlKC0xLCByYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkKTtcbiAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wO1xuICAgIH1cbiAgfVxuXG59XG5jb25zdCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCA9IG5ldyBWZWMzKCk7XG5jb25zdCByZWxwb3MgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIFZlaGljbGUgaGVscGVyIGNsYXNzIHRoYXQgY2FzdHMgcmF5cyBmcm9tIHRoZSB3aGVlbCBwb3NpdGlvbnMgdG93YXJkcyB0aGUgZ3JvdW5kIGFuZCBhcHBsaWVzIGZvcmNlcy5cbiAqL1xuY2xhc3MgUmF5Y2FzdFZlaGljbGUge1xuICAvKiogVGhlIGNhciBjaGFzc2lzIGJvZHkuICovXG5cbiAgLyoqIFRoZSB3aGVlbHMuICovXG5cbiAgLyoqIFdpbGwgYmUgc2V0IHRvIHRydWUgaWYgdGhlIGNhciBpcyBzbGlkaW5nLiAqL1xuXG4gIC8qKiBJbmRleCBvZiB0aGUgcmlnaHQgYXhpcy4geD0wLCB5PTEsIHo9MiAqL1xuXG4gIC8qKiBJbmRleCBvZiB0aGUgZm9yd2FyZCBheGlzLiB4PTAsIHk9MSwgej0yICovXG5cbiAgLyoqIEluZGV4IG9mIHRoZSB1cCBheGlzLiB4PTAsIHk9MSwgej0yICovXG5cbiAgLyoqIFRoZSBjb25zdHJhaW50cy4gKi9cblxuICAvKiogT3B0aW9uYWwgcHJlLXN0ZXAgY2FsbGJhY2suICovXG5cbiAgLyoqIE51bWJlciBvZiB3aGVlbHMgb24gdGhlIGdyb3VuZC4gKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuY2hhc3Npc0JvZHkgPSB2b2lkIDA7XG4gICAgdGhpcy53aGVlbEluZm9zID0gdm9pZCAwO1xuICAgIHRoaXMuc2xpZGluZyA9IHZvaWQgMDtcbiAgICB0aGlzLndvcmxkID0gdm9pZCAwO1xuICAgIHRoaXMuaW5kZXhSaWdodEF4aXMgPSB2b2lkIDA7XG4gICAgdGhpcy5pbmRleEZvcndhcmRBeGlzID0gdm9pZCAwO1xuICAgIHRoaXMuaW5kZXhVcEF4aXMgPSB2b2lkIDA7XG4gICAgdGhpcy5jb25zdHJhaW50cyA9IHZvaWQgMDtcbiAgICB0aGlzLnByZVN0ZXBDYWxsYmFjayA9IHZvaWQgMDtcbiAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgPSB2b2lkIDA7XG4gICAgdGhpcy5udW1XaGVlbHNPbkdyb3VuZCA9IHZvaWQgMDtcbiAgICB0aGlzLmNoYXNzaXNCb2R5ID0gb3B0aW9ucy5jaGFzc2lzQm9keTtcbiAgICB0aGlzLndoZWVsSW5mb3MgPSBbXTtcbiAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTtcbiAgICB0aGlzLndvcmxkID0gbnVsbDtcbiAgICB0aGlzLmluZGV4UmlnaHRBeGlzID0gdHlwZW9mIG9wdGlvbnMuaW5kZXhSaWdodEF4aXMgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5pbmRleFJpZ2h0QXhpcyA6IDI7XG4gICAgdGhpcy5pbmRleEZvcndhcmRBeGlzID0gdHlwZW9mIG9wdGlvbnMuaW5kZXhGb3J3YXJkQXhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmluZGV4Rm9yd2FyZEF4aXMgOiAwO1xuICAgIHRoaXMuaW5kZXhVcEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleFVwQXhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmluZGV4VXBBeGlzIDogMTtcbiAgICB0aGlzLmNvbnN0cmFpbnRzID0gW107XG4gICAgY29uc29sZS5sb2codGhpcy5pbmRleEZvcndhcmRBeGlzLCB0aGlzLmluZGV4UmlnaHRBeGlzLCB0aGlzLmluZGV4VXBBeGlzKVxuICAgIHRoaXMucHJlU3RlcENhbGxiYWNrID0gKCkgPT4ge307XG5cbiAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgPSAwO1xuICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQgPSAwO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgYSB3aGVlbC4gRm9yIGluZm9ybWF0aW9uIGFib3V0IHRoZSBvcHRpb25zLCBzZWUgYFdoZWVsSW5mb2AuXG4gICAqL1xuXG5cbiAgYWRkV2hlZWwob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgaW5mbyA9IG5ldyBXaGVlbEluZm8ob3B0aW9ucyk7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLndoZWVsSW5mb3MubGVuZ3RoO1xuICAgIHRoaXMud2hlZWxJbmZvcy5wdXNoKGluZm8pO1xuICAgIHJldHVybiBpbmRleDtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSBzdGVlcmluZyB2YWx1ZSBvZiBhIHdoZWVsLlxuICAgKi9cblxuXG4gIHNldFN0ZWVyaW5nVmFsdWUodmFsdWUsIHdoZWVsSW5kZXgpIHtcbiAgICBjb25zdCB3aGVlbCA9IHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XTtcbiAgICB3aGVlbC5zdGVlcmluZyA9IHZhbHVlO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHdoZWVsIGZvcmNlIHRvIGFwcGx5IG9uIG9uZSBvZiB0aGUgd2hlZWxzIGVhY2ggdGltZSBzdGVwXG4gICAqL1xuXG5cbiAgYXBwbHlFbmdpbmVGb3JjZSh2YWx1ZSwgd2hlZWxJbmRleCkge1xuICAgIHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XS5lbmdpbmVGb3JjZSA9IHZhbHVlO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIGJyYWtpbmcgZm9yY2Ugb2YgYSB3aGVlbFxuICAgKi9cblxuXG4gIHNldEJyYWtlKGJyYWtlLCB3aGVlbEluZGV4KSB7XG4gICAgdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdLmJyYWtlID0gYnJha2U7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCB0aGUgdmVoaWNsZSBpbmNsdWRpbmcgaXRzIGNvbnN0cmFpbnRzIHRvIHRoZSB3b3JsZC5cbiAgICovXG5cblxuICBhZGRUb1dvcmxkKHdvcmxkKSB7XG4gICAgd29ybGQuYWRkQm9keSh0aGlzLmNoYXNzaXNCb2R5KTtcbiAgICBjb25zdCB0aGF0ID0gdGhpcztcblxuICAgIHRoaXMucHJlU3RlcENhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgdGhhdC51cGRhdGVWZWhpY2xlKHdvcmxkLmR0KTtcbiAgICB9O1xuXG4gICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHRoaXMucHJlU3RlcENhbGxiYWNrKTtcbiAgICB0aGlzLndvcmxkID0gd29ybGQ7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBvbmUgb2YgdGhlIHdoZWVsIGF4bGVzLCB3b3JsZC1vcmllbnRlZC5cbiAgICovXG5cblxuICBnZXRWZWhpY2xlQXhpc1dvcmxkKGF4aXNJbmRleCwgcmVzdWx0KSB7XG4gICAgcmVzdWx0LnNldChheGlzSW5kZXggPT09IDAgPyAxIDogMCwgYXhpc0luZGV4ID09PSAxID8gMSA6IDAsIGF4aXNJbmRleCA9PT0gMiA/IDEgOiAwKTtcbiAgICB0aGlzLmNoYXNzaXNCb2R5LnZlY3RvclRvV29ybGRGcmFtZShyZXN1bHQsIHJlc3VsdCk7XG4gIH1cblxuICB1cGRhdGVWZWhpY2xlKHRpbWVTdGVwKSB7XG4gICAgY29uc3Qgd2hlZWxJbmZvcyA9IHRoaXMud2hlZWxJbmZvcztcbiAgICBjb25zdCBudW1XaGVlbHMgPSB3aGVlbEluZm9zLmxlbmd0aDtcbiAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7XG4gICAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtKGkpO1xuICAgIH1cblxuICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciA9IDMuNiAqIGNoYXNzaXNCb2R5LnZlbG9jaXR5Lmxlbmd0aCgpO1xuICAgIGNvbnN0IGZvcndhcmRXb3JsZCA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5nZXRWZWhpY2xlQXhpc1dvcmxkKHRoaXMuaW5kZXhGb3J3YXJkQXhpcywgZm9yd2FyZFdvcmxkKTtcblxuICAgIGlmIChmb3J3YXJkV29ybGQuZG90KGNoYXNzaXNCb2R5LnZlbG9jaXR5KSA8IDApIHtcbiAgICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciAqPSAtMTtcbiAgICB9IC8vIHNpbXVsYXRlIHN1c3BlbnNpb25cblxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykge1xuICAgICAgdGhpcy5jYXN0UmF5KHdoZWVsSW5mb3NbaV0pO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlU3VzcGVuc2lvbih0aW1lU3RlcCk7XG4gICAgY29uc3QgaW1wdWxzZSA9IG5ldyBWZWMzKCk7XG4gICAgY29uc3QgcmVscG9zID0gbmV3IFZlYzMoKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHtcbiAgICAgIC8vYXBwbHkgc3VzcGVuc2lvbiBmb3JjZVxuICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldO1xuICAgICAgbGV0IHN1c3BlbnNpb25Gb3JjZSA9IHdoZWVsLnN1c3BlbnNpb25Gb3JjZTtcblxuICAgICAgaWYgKHN1c3BlbnNpb25Gb3JjZSA+IHdoZWVsLm1heFN1c3BlbnNpb25Gb3JjZSkge1xuICAgICAgICBzdXNwZW5zaW9uRm9yY2UgPSB3aGVlbC5tYXhTdXNwZW5zaW9uRm9yY2U7XG4gICAgICB9XG5cbiAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuc2NhbGUoc3VzcGVuc2lvbkZvcmNlICogdGltZVN0ZXAsIGltcHVsc2UpO1xuICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLnZzdWIoY2hhc3Npc0JvZHkucG9zaXRpb24sIHJlbHBvcyk7XG4gICAgICBjaGFzc2lzQm9keS5hcHBseUltcHVsc2UoaW1wdWxzZSwgcmVscG9zKTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZUZyaWN0aW9uKHRpbWVTdGVwKTtcbiAgICBjb25zdCBoaXROb3JtYWxXb3JsZFNjYWxlZFdpdGhQcm9qID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBmd2QgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IHZlbCA9IG5ldyBWZWMzKCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7XG4gICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07IC8vY29uc3QgcmVscG9zID0gbmV3IFZlYzMoKTtcbiAgICAgIC8vd2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLnZzdWIoY2hhc3Npc0JvZHkucG9zaXRpb24sIHJlbHBvcyk7XG5cbiAgICAgIGNoYXNzaXNCb2R5LmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCwgdmVsKTsgLy8gSGFjayB0byBnZXQgdGhlIHJvdGF0aW9uIGluIHRoZSBjb3JyZWN0IGRpcmVjdGlvblxuXG4gICAgICBsZXQgbSA9IDE7XG5cbiAgICAgIHN3aXRjaCAodGhpcy5pbmRleFVwQXhpcykge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgbSA9IC0xO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBpZiAod2hlZWwuaXNJbkNvbnRhY3QpIHtcbiAgICAgICAgdGhpcy5nZXRWZWhpY2xlQXhpc1dvcmxkKHRoaXMuaW5kZXhGb3J3YXJkQXhpcywgZndkKTtcbiAgICAgICAgY29uc3QgcHJvaiA9IGZ3ZC5kb3Qod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7XG4gICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuc2NhbGUocHJvaiwgaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaik7XG4gICAgICAgIGZ3ZC52c3ViKGhpdE5vcm1hbFdvcmxkU2NhbGVkV2l0aFByb2osIGZ3ZCk7XG4gICAgICAgIGNvbnN0IHByb2oyID0gZndkLmRvdCh2ZWwpO1xuICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gbSAqIHByb2oyICogdGltZVN0ZXAgLyB3aGVlbC5yYWRpdXM7XG4gICAgICB9XG5cbiAgICAgIGlmICgod2hlZWwuc2xpZGluZyB8fCAhd2hlZWwuaXNJbkNvbnRhY3QpICYmIHdoZWVsLmVuZ2luZUZvcmNlICE9PSAwICYmIHdoZWVsLnVzZUN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQpIHtcbiAgICAgICAgLy8gQXBwbHkgY3VzdG9tIHJvdGF0aW9uIHdoZW4gYWNjZWxlcmF0aW5nIGFuZCBzbGlkaW5nXG4gICAgICAgIHdoZWVsLmRlbHRhUm90YXRpb24gPSAod2hlZWwuZW5naW5lRm9yY2UgPiAwID8gMSA6IC0xKSAqIHdoZWVsLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgKiB0aW1lU3RlcDtcbiAgICAgIH0gLy8gTG9jayB3aGVlbHNcblxuXG4gICAgICBpZiAoTWF0aC5hYnMod2hlZWwuYnJha2UpID4gTWF0aC5hYnMod2hlZWwuZW5naW5lRm9yY2UpKSB7XG4gICAgICAgIHdoZWVsLmRlbHRhUm90YXRpb24gPSAwO1xuICAgICAgfVxuXG4gICAgICB3aGVlbC5yb3RhdGlvbiArPSB3aGVlbC5kZWx0YVJvdGF0aW9uOyAvLyBVc2UgdGhlIG9sZCB2YWx1ZVxuXG4gICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uICo9IDAuOTk7IC8vIGRhbXBpbmcgb2Ygcm90YXRpb24gd2hlbiBub3QgaW4gY29udGFjdFxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVN1c3BlbnNpb24oZGVsdGFUaW1lKSB7XG4gICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5O1xuICAgIGNvbnN0IGNoYXNzaXNNYXNzID0gY2hhc3Npc0JvZHkubWFzcztcbiAgICBjb25zdCB3aGVlbEluZm9zID0gdGhpcy53aGVlbEluZm9zO1xuICAgIGNvbnN0IG51bVdoZWVscyA9IHdoZWVsSW5mb3MubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgd19pdCA9IDA7IHdfaXQgPCBudW1XaGVlbHM7IHdfaXQrKykge1xuICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW3dfaXRdO1xuXG4gICAgICBpZiAod2hlZWwuaXNJbkNvbnRhY3QpIHtcbiAgICAgICAgbGV0IGZvcmNlOyAvLyBTcHJpbmdcblxuICAgICAgICBjb25zdCBzdXNwX2xlbmd0aCA9IHdoZWVsLnN1c3BlbnNpb25SZXN0TGVuZ3RoO1xuICAgICAgICBjb25zdCBjdXJyZW50X2xlbmd0aCA9IHdoZWVsLnN1c3BlbnNpb25MZW5ndGg7XG4gICAgICAgIGNvbnN0IGxlbmd0aF9kaWZmID0gc3VzcF9sZW5ndGggLSBjdXJyZW50X2xlbmd0aDtcbiAgICAgICAgZm9yY2UgPSB3aGVlbC5zdXNwZW5zaW9uU3RpZmZuZXNzICogbGVuZ3RoX2RpZmYgKiB3aGVlbC5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb247IC8vIERhbXBlclxuXG4gICAgICAgIGNvbnN0IHByb2plY3RlZF9yZWxfdmVsID0gd2hlZWwuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHk7XG4gICAgICAgIGxldCBzdXNwX2RhbXBpbmc7XG5cbiAgICAgICAgaWYgKHByb2plY3RlZF9yZWxfdmVsIDwgMCkge1xuICAgICAgICAgIHN1c3BfZGFtcGluZyA9IHdoZWVsLmRhbXBpbmdDb21wcmVzc2lvbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdXNwX2RhbXBpbmcgPSB3aGVlbC5kYW1waW5nUmVsYXhhdGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvcmNlIC09IHN1c3BfZGFtcGluZyAqIHByb2plY3RlZF9yZWxfdmVsO1xuICAgICAgICB3aGVlbC5zdXNwZW5zaW9uRm9yY2UgPSBmb3JjZSAqIGNoYXNzaXNNYXNzO1xuXG4gICAgICAgIGlmICh3aGVlbC5zdXNwZW5zaW9uRm9yY2UgPCAwKSB7XG4gICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gMDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gMDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgdmVoaWNsZSBpbmNsdWRpbmcgaXRzIGNvbnN0cmFpbnRzIGZyb20gdGhlIHdvcmxkLlxuICAgKi9cblxuXG4gIHJlbW92ZUZyb21Xb3JsZCh3b3JsZCkge1xuICAgIHRoaXMuY29uc3RyYWludHM7XG4gICAgd29ybGQucmVtb3ZlQm9keSh0aGlzLmNoYXNzaXNCb2R5KTtcbiAgICB3b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgdGhpcy5wcmVTdGVwQ2FsbGJhY2spO1xuICAgIHRoaXMud29ybGQgPSBudWxsO1xuICB9XG5cbiAgY2FzdFJheSh3aGVlbCkge1xuICAgIGNvbnN0IHJheXZlY3RvciA9IGNhc3RSYXlfcmF5dmVjdG9yO1xuICAgIGNvbnN0IHRhcmdldCA9IGNhc3RSYXlfdGFyZ2V0O1xuICAgIHRoaXMudXBkYXRlV2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbCk7XG4gICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5O1xuICAgIGxldCBkZXB0aCA9IC0xO1xuICAgIGNvbnN0IHJheWxlbiA9IHdoZWVsLnN1c3BlbnNpb25SZXN0TGVuZ3RoICsgd2hlZWwucmFkaXVzO1xuICAgIHdoZWVsLmRpcmVjdGlvbldvcmxkLnNjYWxlKHJheWxlbiwgcmF5dmVjdG9yKTtcbiAgICBjb25zdCBzb3VyY2UgPSB3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQ7XG4gICAgc291cmNlLnZhZGQocmF5dmVjdG9yLCB0YXJnZXQpO1xuICAgIGNvbnN0IHJheWNhc3RSZXN1bHQgPSB3aGVlbC5yYXljYXN0UmVzdWx0O1xuICAgIHJheWNhc3RSZXN1bHQucmVzZXQoKTsgLy8gVHVybiBvZmYgcmF5IGNvbGxpc2lvbiB3aXRoIHRoZSBjaGFzc2lzIHRlbXBvcmFyaWx5XG5cbiAgICBjb25zdCBvbGRTdGF0ZSA9IGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlO1xuICAgIGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlID0gZmFsc2U7IC8vIENhc3QgcmF5IGFnYWluc3Qgd29ybGRcblxuICAgIHRoaXMud29ybGQucmF5VGVzdChzb3VyY2UsIHRhcmdldCwgcmF5Y2FzdFJlc3VsdCk7XG4gICAgY2hhc3Npc0JvZHkuY29sbGlzaW9uUmVzcG9uc2UgPSBvbGRTdGF0ZTtcbiAgICBjb25zdCBvYmplY3QgPSByYXljYXN0UmVzdWx0LmJvZHk7XG4gICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5ncm91bmRPYmplY3QgPSAwO1xuXG4gICAgaWYgKG9iamVjdCkge1xuICAgICAgZGVwdGggPSByYXljYXN0UmVzdWx0LmRpc3RhbmNlO1xuICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCA9IHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQ7XG4gICAgICB3aGVlbC5pc0luQ29udGFjdCA9IHRydWU7XG4gICAgICBjb25zdCBoaXREaXN0YW5jZSA9IHJheWNhc3RSZXN1bHQuZGlzdGFuY2U7XG4gICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gaGl0RGlzdGFuY2UgLSB3aGVlbC5yYWRpdXM7IC8vIGNsYW1wIG9uIG1heCBzdXNwZW5zaW9uIHRyYXZlbFxuXG4gICAgICBjb25zdCBtaW5TdXNwZW5zaW9uTGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGggLSB3aGVlbC5tYXhTdXNwZW5zaW9uVHJhdmVsO1xuICAgICAgY29uc3QgbWF4U3VzcGVuc2lvbkxlbmd0aCA9IHdoZWVsLnN1c3BlbnNpb25SZXN0TGVuZ3RoICsgd2hlZWwubWF4U3VzcGVuc2lvblRyYXZlbDtcblxuICAgICAgaWYgKHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPCBtaW5TdXNwZW5zaW9uTGVuZ3RoKSB7XG4gICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSBtaW5TdXNwZW5zaW9uTGVuZ3RoO1xuICAgICAgfVxuXG4gICAgICBpZiAod2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA+IG1heFN1c3BlbnNpb25MZW5ndGgpIHtcbiAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA9IG1heFN1c3BlbnNpb25MZW5ndGg7XG4gICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQucmVzZXQoKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZGVub21pbmF0b3IgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdCh3aGVlbC5kaXJlY3Rpb25Xb3JsZCk7XG4gICAgICBjb25zdCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCA9IG5ldyBWZWMzKCk7XG4gICAgICBjaGFzc2lzQm9keS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludCh3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQsIGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTtcbiAgICAgIGNvbnN0IHByb2pWZWwgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdChjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7XG5cbiAgICAgIGlmIChkZW5vbWluYXRvciA+PSAtMC4xKSB7XG4gICAgICAgIHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMDtcbiAgICAgICAgd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMSAvIDAuMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGludiA9IC0xIC8gZGVub21pbmF0b3I7XG4gICAgICAgIHdoZWVsLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gcHJvalZlbCAqIGludjtcbiAgICAgICAgd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gaW52O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvL3B1dCB3aGVlbCBpbmZvIGFzIGluIHJlc3QgcG9zaXRpb25cbiAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIDAgKiB3aGVlbC5tYXhTdXNwZW5zaW9uVHJhdmVsO1xuICAgICAgd2hlZWwuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSAwLjA7XG4gICAgICB3aGVlbC5kaXJlY3Rpb25Xb3JsZC5zY2FsZSgtMSwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7XG4gICAgICB3aGVlbC5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxLjA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRlcHRoO1xuICB9XG5cbiAgdXBkYXRlV2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbCkge1xuICAgIHdoZWVsLmlzSW5Db250YWN0ID0gZmFsc2U7XG4gICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5O1xuICAgIGNoYXNzaXNCb2R5LnBvaW50VG9Xb3JsZEZyYW1lKHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCwgd2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkKTtcbiAgICBjaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUod2hlZWwuZGlyZWN0aW9uTG9jYWwsIHdoZWVsLmRpcmVjdGlvbldvcmxkKTtcbiAgICBjaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUod2hlZWwuYXhsZUxvY2FsLCB3aGVlbC5heGxlV29ybGQpO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgb25lIG9mIHRoZSB3aGVlbCB0cmFuc2Zvcm0uXG4gICAqIE5vdGUgd2hlbiByZW5kZXJpbmcgd2hlZWxzOiBkdXJpbmcgZWFjaCBzdGVwLCB3aGVlbCB0cmFuc2Zvcm1zIGFyZSB1cGRhdGVkIEJFRk9SRSB0aGUgY2hhc3NpczsgaWUuIHRoZWlyIHBvc2l0aW9uIGJlY29tZXMgaW52YWxpZCBhZnRlciB0aGUgc3RlcC4gVGh1cyB3aGVuIHlvdSByZW5kZXIgd2hlZWxzLCB5b3UgbXVzdCB1cGRhdGUgd2hlZWwgdHJhbnNmb3JtcyBiZWZvcmUgcmVuZGVyaW5nIHRoZW0uIFNlZSByYXljYXN0VmVoaWNsZSBkZW1vIGZvciBhbiBleGFtcGxlLlxuICAgKiBAcGFyYW0gd2hlZWxJbmRleCBUaGUgd2hlZWwgaW5kZXggdG8gdXBkYXRlLlxuICAgKi9cblxuXG4gIHVwZGF0ZVdoZWVsVHJhbnNmb3JtKHdoZWVsSW5kZXgpIHtcbiAgICBjb25zdCB1cCA9IHRtcFZlYzQ7XG4gICAgY29uc3QgcmlnaHQgPSB0bXBWZWM1O1xuICAgIGNvbnN0IGZ3ZCA9IHRtcFZlYzY7XG4gICAgY29uc3Qgd2hlZWwgPSB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF07XG4gICAgdGhpcy51cGRhdGVXaGVlbFRyYW5zZm9ybVdvcmxkKHdoZWVsKTtcbiAgICB3aGVlbC5kaXJlY3Rpb25Mb2NhbC5zY2FsZSgtMSwgdXApO1xuICAgIHJpZ2h0LmNvcHkod2hlZWwuYXhsZUxvY2FsKTtcbiAgICB1cC5jcm9zcyhyaWdodCwgZndkKTtcbiAgICBmd2Qubm9ybWFsaXplKCk7XG4gICAgcmlnaHQubm9ybWFsaXplKCk7IC8vIFJvdGF0ZSBhcm91bmQgc3RlZXJpbmcgb3ZlciB0aGUgd2hlZWxBeGxlXG5cbiAgICBjb25zdCBzdGVlcmluZyA9IHdoZWVsLnN0ZWVyaW5nO1xuICAgIGNvbnN0IHN0ZWVyaW5nT3JuID0gbmV3IFF1YXRlcm5pb24oKTtcbiAgICBzdGVlcmluZ09ybi5zZXRGcm9tQXhpc0FuZ2xlKHVwLCBzdGVlcmluZyk7XG4gICAgY29uc3Qgcm90YXRpbmdPcm4gPSBuZXcgUXVhdGVybmlvbigpO1xuICAgIHJvdGF0aW5nT3JuLnNldEZyb21BeGlzQW5nbGUocmlnaHQsIHdoZWVsLnJvdGF0aW9uKTsgLy8gV29ybGQgcm90YXRpb24gb2YgdGhlIHdoZWVsXG5cbiAgICBjb25zdCBxID0gd2hlZWwud29ybGRUcmFuc2Zvcm0ucXVhdGVybmlvbjtcbiAgICB0aGlzLmNoYXNzaXNCb2R5LnF1YXRlcm5pb24ubXVsdChzdGVlcmluZ09ybiwgcSk7XG4gICAgcS5tdWx0KHJvdGF0aW5nT3JuLCBxKTtcbiAgICBxLm5vcm1hbGl6ZSgpOyAvLyB3b3JsZCBwb3NpdGlvbiBvZiB0aGUgd2hlZWxcblxuICAgIGNvbnN0IHAgPSB3aGVlbC53b3JsZFRyYW5zZm9ybS5wb3NpdGlvbjtcbiAgICBwLmNvcHkod2hlZWwuZGlyZWN0aW9uV29ybGQpO1xuICAgIHAuc2NhbGUod2hlZWwuc3VzcGVuc2lvbkxlbmd0aCwgcCk7XG4gICAgcC52YWRkKHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCwgcCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgd29ybGQgdHJhbnNmb3JtIG9mIG9uZSBvZiB0aGUgd2hlZWxzXG4gICAqL1xuXG5cbiAgZ2V0V2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbEluZGV4KSB7XG4gICAgcmV0dXJuIHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XS53b3JsZFRyYW5zZm9ybTtcbiAgfVxuXG4gIHVwZGF0ZUZyaWN0aW9uKHRpbWVTdGVwKSB7XG4gICAgY29uc3Qgc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qID0gdXBkYXRlRnJpY3Rpb25fc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qOyAvL2NhbGN1bGF0ZSB0aGUgaW1wdWxzZSwgc28gdGhhdCB0aGUgd2hlZWxzIGRvbid0IG1vdmUgc2lkZXdhcmRzXG5cbiAgICBjb25zdCB3aGVlbEluZm9zID0gdGhpcy53aGVlbEluZm9zO1xuICAgIGNvbnN0IG51bVdoZWVscyA9IHdoZWVsSW5mb3MubGVuZ3RoO1xuICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTtcbiAgICBjb25zdCBmb3J3YXJkV1MgPSB1cGRhdGVGcmljdGlvbl9mb3J3YXJkV1M7XG4gICAgY29uc3QgYXhsZSA9IHVwZGF0ZUZyaWN0aW9uX2F4bGU7XG4gICAgdGhpcy5udW1XaGVlbHNPbkdyb3VuZCA9IDA7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7XG4gICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07XG4gICAgICBjb25zdCBncm91bmRPYmplY3QgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmJvZHk7XG5cbiAgICAgIGlmIChncm91bmRPYmplY3QpIHtcbiAgICAgICAgdGhpcy5udW1XaGVlbHNPbkdyb3VuZCsrO1xuICAgICAgfVxuXG4gICAgICB3aGVlbC5zaWRlSW1wdWxzZSA9IDA7XG4gICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSA9IDA7XG5cbiAgICAgIGlmICghZm9yd2FyZFdTW2ldKSB7XG4gICAgICAgIGZvcndhcmRXU1tpXSA9IG5ldyBWZWMzKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghYXhsZVtpXSkge1xuICAgICAgICBheGxlW2ldID0gbmV3IFZlYzMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7XG4gICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07XG4gICAgICBjb25zdCBncm91bmRPYmplY3QgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmJvZHk7XG5cbiAgICAgIGlmIChncm91bmRPYmplY3QpIHtcbiAgICAgICAgY29uc3QgYXhsZWkgPSBheGxlW2ldO1xuICAgICAgICBjb25zdCB3aGVlbFRyYW5zID0gdGhpcy5nZXRXaGVlbFRyYW5zZm9ybVdvcmxkKGkpOyAvLyBHZXQgd29ybGQgYXhsZVxuXG4gICAgICAgIHdoZWVsVHJhbnMudmVjdG9yVG9Xb3JsZEZyYW1lKGRpcmVjdGlvbnNbdGhpcy5pbmRleFJpZ2h0QXhpc10sIGF4bGVpKTtcbiAgICAgICAgY29uc3Qgc3VyZk5vcm1hbFdTID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZDtcbiAgICAgICAgY29uc3QgcHJvaiA9IGF4bGVpLmRvdChzdXJmTm9ybWFsV1MpO1xuICAgICAgICBzdXJmTm9ybWFsV1Muc2NhbGUocHJvaiwgc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qKTtcbiAgICAgICAgYXhsZWkudnN1YihzdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2osIGF4bGVpKTtcbiAgICAgICAgYXhsZWkubm9ybWFsaXplKCk7XG4gICAgICAgIHN1cmZOb3JtYWxXUy5jcm9zcyhheGxlaSwgZm9yd2FyZFdTW2ldKTtcbiAgICAgICAgZm9yd2FyZFdTW2ldLm5vcm1hbGl6ZSgpO1xuICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWwoY2hhc3Npc0JvZHksIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgZ3JvdW5kT2JqZWN0LCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQsIGF4bGVpKTtcbiAgICAgICAgd2hlZWwuc2lkZUltcHVsc2UgKj0gc2lkZUZyaWN0aW9uU3RpZmZuZXNzMjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBzaWRlRmFjdG9yID0gMTtcbiAgICBjb25zdCBmd2RGYWN0b3IgPSAwLjU7XG4gICAgdGhpcy5zbGlkaW5nID0gZmFsc2U7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7XG4gICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07XG4gICAgICBjb25zdCBncm91bmRPYmplY3QgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmJvZHk7XG4gICAgICBsZXQgcm9sbGluZ0ZyaWN0aW9uID0gMDtcbiAgICAgIHdoZWVsLnNsaXBJbmZvID0gMTtcblxuICAgICAgaWYgKGdyb3VuZE9iamVjdCkge1xuICAgICAgICBjb25zdCBkZWZhdWx0Um9sbGluZ0ZyaWN0aW9uSW1wdWxzZSA9IDA7XG4gICAgICAgIGNvbnN0IG1heEltcHVsc2UgPSB3aGVlbC5icmFrZSA/IHdoZWVsLmJyYWtlIDogZGVmYXVsdFJvbGxpbmdGcmljdGlvbkltcHVsc2U7IC8vIGJ0V2hlZWxDb250YWN0UG9pbnQgY29udGFjdFB0KGNoYXNzaXNCb2R5LGdyb3VuZE9iamVjdCx3aGVlbEluZnJheWNhc3RJbmZvLmhpdFBvaW50V29ybGQsZm9yd2FyZFdTW3doZWVsXSxtYXhJbXB1bHNlKTtcbiAgICAgICAgLy8gcm9sbGluZ0ZyaWN0aW9uID0gY2FsY1JvbGxpbmdGcmljdGlvbihjb250YWN0UHQpO1xuXG4gICAgICAgIHJvbGxpbmdGcmljdGlvbiA9IGNhbGNSb2xsaW5nRnJpY3Rpb24oY2hhc3Npc0JvZHksIGdyb3VuZE9iamVjdCwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBmb3J3YXJkV1NbaV0sIG1heEltcHVsc2UpO1xuICAgICAgICByb2xsaW5nRnJpY3Rpb24gKz0gd2hlZWwuZW5naW5lRm9yY2UgKiB0aW1lU3RlcDsgLy8gcm9sbGluZ0ZyaWN0aW9uID0gMDtcblxuICAgICAgICBjb25zdCBmYWN0b3IgPSBtYXhJbXB1bHNlIC8gcm9sbGluZ0ZyaWN0aW9uO1xuICAgICAgICB3aGVlbC5zbGlwSW5mbyAqPSBmYWN0b3I7XG4gICAgICB9IC8vc3dpdGNoIGJldHdlZW4gYWN0aXZlIHJvbGxpbmcgKHRocm90dGxlKSwgYnJha2luZyBhbmQgbm9uLWFjdGl2ZSByb2xsaW5nIGZyaWN0aW9uIChudGhyb3R0bGUvYnJlYWspXG5cblxuICAgICAgd2hlZWwuZm9yd2FyZEltcHVsc2UgPSAwO1xuICAgICAgd2hlZWwuc2tpZEluZm8gPSAxO1xuXG4gICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7XG4gICAgICAgIHdoZWVsLnNraWRJbmZvID0gMTtcbiAgICAgICAgY29uc3QgbWF4aW1wID0gd2hlZWwuc3VzcGVuc2lvbkZvcmNlICogdGltZVN0ZXAgKiB3aGVlbC5mcmljdGlvblNsaXA7XG4gICAgICAgIGNvbnN0IG1heGltcFNpZGUgPSBtYXhpbXA7XG4gICAgICAgIGNvbnN0IG1heGltcFNxdWFyZWQgPSBtYXhpbXAgKiBtYXhpbXBTaWRlO1xuICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSA9IHJvbGxpbmdGcmljdGlvbjsgLy93aGVlbEluZm8uZW5naW5lRm9yY2UqIHRpbWVTdGVwO1xuXG4gICAgICAgIGNvbnN0IHggPSB3aGVlbC5mb3J3YXJkSW1wdWxzZSAqIGZ3ZEZhY3RvciAvIHdoZWVsLmZvcndhcmRBY2NlbGVyYXRpb247XG4gICAgICAgIGNvbnN0IHkgPSB3aGVlbC5zaWRlSW1wdWxzZSAqIHNpZGVGYWN0b3IgLyB3aGVlbC5zaWRlQWNjZWxlcmF0aW9uO1xuICAgICAgICBjb25zdCBpbXB1bHNlU3F1YXJlZCA9IHggKiB4ICsgeSAqIHk7XG4gICAgICAgIHdoZWVsLnNsaWRpbmcgPSBmYWxzZTtcblxuICAgICAgICBpZiAoaW1wdWxzZVNxdWFyZWQgPiBtYXhpbXBTcXVhcmVkKSB7XG4gICAgICAgICAgdGhpcy5zbGlkaW5nID0gdHJ1ZTtcbiAgICAgICAgICB3aGVlbC5zbGlkaW5nID0gdHJ1ZTtcbiAgICAgICAgICBjb25zdCBmYWN0b3IgPSBtYXhpbXAgLyBNYXRoLnNxcnQoaW1wdWxzZVNxdWFyZWQpO1xuICAgICAgICAgIHdoZWVsLnNraWRJbmZvICo9IGZhY3RvcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnNsaWRpbmcpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHtcbiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldO1xuXG4gICAgICAgIGlmICh3aGVlbC5zaWRlSW1wdWxzZSAhPT0gMCkge1xuICAgICAgICAgIGlmICh3aGVlbC5za2lkSW5mbyA8IDEpIHtcbiAgICAgICAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlICo9IHdoZWVsLnNraWRJbmZvO1xuICAgICAgICAgICAgd2hlZWwuc2lkZUltcHVsc2UgKj0gd2hlZWwuc2tpZEluZm87XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSAvLyBhcHBseSB0aGUgaW1wdWxzZXNcblxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykge1xuICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldO1xuICAgICAgY29uc3QgcmVsX3BvcyA9IG5ldyBWZWMzKCk7XG4gICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1YihjaGFzc2lzQm9keS5wb3NpdGlvbiwgcmVsX3Bvcyk7IC8vIGNhbm5vbnMgYXBwbHlpbXB1bHNlIGlzIHVzaW5nIHdvcmxkIGNvb3JkIGZvciB0aGUgcG9zaXRpb25cbiAgICAgIC8vcmVsX3Bvcy5jb3B5KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCk7XG5cbiAgICAgIGlmICh3aGVlbC5mb3J3YXJkSW1wdWxzZSAhPT0gMCkge1xuICAgICAgICBjb25zdCBpbXB1bHNlID0gbmV3IFZlYzMoKTtcbiAgICAgICAgZm9yd2FyZFdTW2ldLnNjYWxlKHdoZWVsLmZvcndhcmRJbXB1bHNlLCBpbXB1bHNlKTtcbiAgICAgICAgY2hhc3Npc0JvZHkuYXBwbHlJbXB1bHNlKGltcHVsc2UsIHJlbF9wb3MpO1xuICAgICAgfVxuXG4gICAgICBpZiAod2hlZWwuc2lkZUltcHVsc2UgIT09IDApIHtcbiAgICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5O1xuICAgICAgICBjb25zdCByZWxfcG9zMiA9IG5ldyBWZWMzKCk7XG4gICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGdyb3VuZE9iamVjdC5wb3NpdGlvbiwgcmVsX3BvczIpOyAvL3JlbF9wb3MyLmNvcHkod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkKTtcblxuICAgICAgICBjb25zdCBzaWRlSW1wID0gbmV3IFZlYzMoKTtcbiAgICAgICAgYXhsZVtpXS5zY2FsZSh3aGVlbC5zaWRlSW1wdWxzZSwgc2lkZUltcCk7IC8vIFNjYWxlIHRoZSByZWxhdGl2ZSBwb3NpdGlvbiBpbiB0aGUgdXAgZGlyZWN0aW9uIHdpdGggcm9sbEluZmx1ZW5jZS5cbiAgICAgICAgLy8gSWYgcm9sbEluZmx1ZW5jZSBpcyAxLCB0aGUgaW1wdWxzZSB3aWxsIGJlIGFwcGxpZWQgb24gdGhlIGhpdFBvaW50IChlYXN5IHRvIHJvbGwgb3ZlciksIGlmIGl0IGlzIHplcm8gaXQgd2lsbCBiZSBhcHBsaWVkIGluIHRoZSBzYW1lIHBsYW5lIGFzIHRoZSBjZW50ZXIgb2YgbWFzcyAobm90IGVhc3kgdG8gcm9sbCBvdmVyKS5cblxuICAgICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb0xvY2FsRnJhbWUocmVsX3BvcywgcmVsX3Bvcyk7XG4gICAgICAgIHJlbF9wb3NbJ3h5eidbdGhpcy5pbmRleFVwQXhpc11dICo9IHdoZWVsLnJvbGxJbmZsdWVuY2U7XG4gICAgICAgIGNoYXNzaXNCb2R5LnZlY3RvclRvV29ybGRGcmFtZShyZWxfcG9zLCByZWxfcG9zKTtcbiAgICAgICAgY2hhc3Npc0JvZHkuYXBwbHlJbXB1bHNlKHNpZGVJbXAsIHJlbF9wb3MpOyAvL2FwcGx5IGZyaWN0aW9uIGltcHVsc2Ugb24gdGhlIGdyb3VuZFxuXG4gICAgICAgIHNpZGVJbXAuc2NhbGUoLTEsIHNpZGVJbXApO1xuICAgICAgICBncm91bmRPYmplY3QuYXBwbHlJbXB1bHNlKHNpZGVJbXAsIHJlbF9wb3MyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufVxuY29uc3QgdG1wVmVjNCA9IG5ldyBWZWMzKCk7XG5jb25zdCB0bXBWZWM1ID0gbmV3IFZlYzMoKTtcbmNvbnN0IHRtcFZlYzYgPSBuZXcgVmVjMygpO1xubmV3IFJheSgpO1xuY29uc3QgY2FzdFJheV9yYXl2ZWN0b3IgPSBuZXcgVmVjMygpO1xuY29uc3QgY2FzdFJheV90YXJnZXQgPSBuZXcgVmVjMygpO1xuY29uc3QgZGlyZWN0aW9ucyA9IFtuZXcgVmVjMygxLCAwLCAwKSwgbmV3IFZlYzMoMCwgMSwgMCksIG5ldyBWZWMzKDAsIDAsIDEpXTtcbmNvbnN0IHVwZGF0ZUZyaWN0aW9uX3N1cmZOb3JtYWxXU19zY2FsZWRfcHJvaiA9IG5ldyBWZWMzKCk7XG5jb25zdCB1cGRhdGVGcmljdGlvbl9heGxlID0gW107XG5jb25zdCB1cGRhdGVGcmljdGlvbl9mb3J3YXJkV1MgPSBbXTtcbmNvbnN0IHNpZGVGcmljdGlvblN0aWZmbmVzczIgPSAxO1xuY29uc3QgY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwxID0gbmV3IFZlYzMoKTtcbmNvbnN0IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMiA9IG5ldyBWZWMzKCk7XG5jb25zdCBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbCA9IG5ldyBWZWMzKCk7XG5cbmZ1bmN0aW9uIGNhbGNSb2xsaW5nRnJpY3Rpb24oYm9keTAsIGJvZHkxLCBmcmljdGlvblBvc1dvcmxkLCBmcmljdGlvbkRpcmVjdGlvbldvcmxkLCBtYXhJbXB1bHNlKSB7XG4gIGxldCBqMSA9IDA7XG4gIGNvbnN0IGNvbnRhY3RQb3NXb3JsZCA9IGZyaWN0aW9uUG9zV29ybGQ7IC8vIGNvbnN0IHJlbF9wb3MxID0gbmV3IFZlYzMoKTtcbiAgLy8gY29uc3QgcmVsX3BvczIgPSBuZXcgVmVjMygpO1xuXG4gIGNvbnN0IHZlbDEgPSBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDE7XG4gIGNvbnN0IHZlbDIgPSBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDI7XG4gIGNvbnN0IHZlbCA9IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsOyAvLyBjb250YWN0UG9zV29ybGQudnN1Yihib2R5MC5wb3NpdGlvbiwgcmVsX3BvczEpO1xuICAvLyBjb250YWN0UG9zV29ybGQudnN1Yihib2R5MS5wb3NpdGlvbiwgcmVsX3BvczIpO1xuXG4gIGJvZHkwLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KGNvbnRhY3RQb3NXb3JsZCwgdmVsMSk7XG4gIGJvZHkxLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KGNvbnRhY3RQb3NXb3JsZCwgdmVsMik7XG4gIHZlbDEudnN1Yih2ZWwyLCB2ZWwpO1xuICBjb25zdCB2cmVsID0gZnJpY3Rpb25EaXJlY3Rpb25Xb3JsZC5kb3QodmVsKTtcbiAgY29uc3QgZGVub20wID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcihib2R5MCwgZnJpY3Rpb25Qb3NXb3JsZCwgZnJpY3Rpb25EaXJlY3Rpb25Xb3JsZCk7XG4gIGNvbnN0IGRlbm9tMSA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3IoYm9keTEsIGZyaWN0aW9uUG9zV29ybGQsIGZyaWN0aW9uRGlyZWN0aW9uV29ybGQpO1xuICBjb25zdCByZWxheGF0aW9uID0gMTtcbiAgY29uc3QgamFjRGlhZ0FCSW52ID0gcmVsYXhhdGlvbiAvIChkZW5vbTAgKyBkZW5vbTEpOyAvLyBjYWxjdWxhdGUgaiB0aGF0IG1vdmVzIHVzIHRvIHplcm8gcmVsYXRpdmUgdmVsb2NpdHlcblxuICBqMSA9IC12cmVsICogamFjRGlhZ0FCSW52O1xuXG4gIGlmIChtYXhJbXB1bHNlIDwgajEpIHtcbiAgICBqMSA9IG1heEltcHVsc2U7XG4gIH1cblxuICBpZiAoajEgPCAtbWF4SW1wdWxzZSkge1xuICAgIGoxID0gLW1heEltcHVsc2U7XG4gIH1cblxuICByZXR1cm4gajE7XG59XG5cbmNvbnN0IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfcjAgPSBuZXcgVmVjMygpO1xuY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9jMCA9IG5ldyBWZWMzKCk7XG5jb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3ZlYyA9IG5ldyBWZWMzKCk7XG5jb25zdCBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX20gPSBuZXcgVmVjMygpO1xuXG5mdW5jdGlvbiBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yKGJvZHksIHBvcywgbm9ybWFsKSB7XG4gIGNvbnN0IHIwID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9yMDtcbiAgY29uc3QgYzAgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX2MwO1xuICBjb25zdCB2ZWMgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX3ZlYztcbiAgY29uc3QgbSA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfbTtcbiAgcG9zLnZzdWIoYm9keS5wb3NpdGlvbiwgcjApO1xuICByMC5jcm9zcyhub3JtYWwsIGMwKTtcbiAgYm9keS5pbnZJbmVydGlhV29ybGQudm11bHQoYzAsIG0pO1xuICBtLmNyb3NzKHIwLCB2ZWMpO1xuICByZXR1cm4gYm9keS5pbnZNYXNzICsgbm9ybWFsLmRvdCh2ZWMpO1xufVxuXG5jb25zdCByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDEgPSBuZXcgVmVjMygpO1xuY29uc3QgcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwyID0gbmV3IFZlYzMoKTtcbmNvbnN0IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsID0gbmV3IFZlYzMoKTsgLy8gYmlsYXRlcmFsIGNvbnN0cmFpbnQgYmV0d2VlbiB0d28gZHluYW1pYyBvYmplY3RzXG5cbmZ1bmN0aW9uIHJlc29sdmVTaW5nbGVCaWxhdGVyYWwoYm9keTEsIHBvczEsIGJvZHkyLCBwb3MyLCBub3JtYWwpIHtcbiAgY29uc3Qgbm9ybWFsTGVuU3FyID0gbm9ybWFsLmxlbmd0aFNxdWFyZWQoKTtcblxuICBpZiAobm9ybWFsTGVuU3FyID4gMS4xKSB7XG4gICAgcmV0dXJuIDA7IC8vIG5vIGltcHVsc2VcbiAgfSAvLyBjb25zdCByZWxfcG9zMSA9IG5ldyBWZWMzKCk7XG4gIC8vIGNvbnN0IHJlbF9wb3MyID0gbmV3IFZlYzMoKTtcbiAgLy8gcG9zMS52c3ViKGJvZHkxLnBvc2l0aW9uLCByZWxfcG9zMSk7XG4gIC8vIHBvczIudnN1Yihib2R5Mi5wb3NpdGlvbiwgcmVsX3BvczIpO1xuXG5cbiAgY29uc3QgdmVsMSA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMTtcbiAgY29uc3QgdmVsMiA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMjtcbiAgY29uc3QgdmVsID0gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWw7XG4gIGJvZHkxLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHBvczEsIHZlbDEpO1xuICBib2R5Mi5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChwb3MyLCB2ZWwyKTtcbiAgdmVsMS52c3ViKHZlbDIsIHZlbCk7XG4gIGNvbnN0IHJlbF92ZWwgPSBub3JtYWwuZG90KHZlbCk7XG4gIGNvbnN0IGNvbnRhY3REYW1waW5nID0gMC4yO1xuICBjb25zdCBtYXNzVGVybSA9IDEgLyAoYm9keTEuaW52TWFzcyArIGJvZHkyLmludk1hc3MpO1xuICBjb25zdCBpbXB1bHNlID0gLWNvbnRhY3REYW1waW5nICogcmVsX3ZlbCAqIG1hc3NUZXJtO1xuICByZXR1cm4gaW1wdWxzZTtcbn1cblxuLyoqXG4gKiBTcGhlcmljYWwgc2hhcGVcbiAqIEBleGFtcGxlXG4gKiAgICAgY29uc3QgcmFkaXVzID0gMVxuICogICAgIGNvbnN0IHNwaGVyZVNoYXBlID0gbmV3IENBTk5PTi5TcGhlcmUocmFkaXVzKVxuICogICAgIGNvbnN0IHNwaGVyZUJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogc3BoZXJlU2hhcGUgfSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KHNwaGVyZUJvZHkpXG4gKi9cbmNsYXNzIFNwaGVyZSBleHRlbmRzIFNoYXBlIHtcbiAgLyoqXG4gICAqIFRoZSByYWRpdXMgb2YgdGhlIHNwaGVyZS5cbiAgICovXG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSByYWRpdXMgVGhlIHJhZGl1cyBvZiB0aGUgc3BoZXJlLCBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihyYWRpdXMpIHtcbiAgICBzdXBlcih7XG4gICAgICB0eXBlOiBTaGFwZS50eXBlcy5TUEhFUkVcbiAgICB9KTtcbiAgICB0aGlzLnJhZGl1cyA9IHZvaWQgMDtcbiAgICB0aGlzLnJhZGl1cyA9IHJhZGl1cyAhPT0gdW5kZWZpbmVkID8gcmFkaXVzIDogMS4wO1xuXG4gICAgaWYgKHRoaXMucmFkaXVzIDwgMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc3BoZXJlIHJhZGl1cyBjYW5ub3QgYmUgbmVnYXRpdmUuJyk7XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpO1xuICB9XG4gIC8qKiBjYWxjdWxhdGVMb2NhbEluZXJ0aWEgKi9cblxuXG4gIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQgPSBuZXcgVmVjMygpKSB7XG4gICAgY29uc3QgSSA9IDIuMCAqIG1hc3MgKiB0aGlzLnJhZGl1cyAqIHRoaXMucmFkaXVzIC8gNS4wO1xuICAgIHRhcmdldC54ID0gSTtcbiAgICB0YXJnZXQueSA9IEk7XG4gICAgdGFyZ2V0LnogPSBJO1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cbiAgLyoqIHZvbHVtZSAqL1xuXG5cbiAgdm9sdW1lKCkge1xuICAgIHJldHVybiA0LjAgKiBNYXRoLlBJICogTWF0aC5wb3codGhpcy5yYWRpdXMsIDMpIC8gMy4wO1xuICB9XG5cbiAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7XG4gICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IHRoaXMucmFkaXVzO1xuICB9XG5cbiAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHtcbiAgICBjb25zdCByID0gdGhpcy5yYWRpdXM7XG4gICAgY29uc3QgYXhlcyA9IFsneCcsICd5JywgJ3onXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXhlcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYXggPSBheGVzW2ldO1xuICAgICAgbWluW2F4XSA9IHBvc1theF0gLSByO1xuICAgICAgbWF4W2F4XSA9IHBvc1theF0gKyByO1xuICAgIH1cbiAgfVxuXG59XG5cbi8qKlxuICogU2ltcGxlIHZlaGljbGUgaGVscGVyIGNsYXNzIHdpdGggc3BoZXJpY2FsIHJpZ2lkIGJvZHkgd2hlZWxzLlxuICovXG5jbGFzcyBSaWdpZFZlaGljbGUge1xuICAvKipcbiAgICogVGhlIGJvZGllcyBvZiB0aGUgd2hlZWxzLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGNoYXNzaXMgYm9keS5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBjb25zdHJhaW50cy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSB3aGVlbCBheGVzLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIHdoZWVsIGZvcmNlcy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMud2hlZWxCb2RpZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5jb29yZGluYXRlU3lzdGVtID0gdm9pZCAwO1xuICAgIHRoaXMuY2hhc3Npc0JvZHkgPSB2b2lkIDA7XG4gICAgdGhpcy5jb25zdHJhaW50cyA9IHZvaWQgMDtcbiAgICB0aGlzLndoZWVsQXhlcyA9IHZvaWQgMDtcbiAgICB0aGlzLndoZWVsRm9yY2VzID0gdm9pZCAwO1xuICAgIHRoaXMud2hlZWxCb2RpZXMgPSBbXTtcbiAgICB0aGlzLmNvb3JkaW5hdGVTeXN0ZW0gPSB0eXBlb2Ygb3B0aW9ucy5jb29yZGluYXRlU3lzdGVtICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuY29vcmRpbmF0ZVN5c3RlbS5jbG9uZSgpIDogbmV3IFZlYzMoMSwgMiwgMyk7XG5cbiAgICBpZiAob3B0aW9ucy5jaGFzc2lzQm9keSkge1xuICAgICAgdGhpcy5jaGFzc2lzQm9keSA9IG9wdGlvbnMuY2hhc3Npc0JvZHk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE5vIGNoYXNzaXMgYm9keSBnaXZlbi4gQ3JlYXRlIGl0IVxuICAgICAgdGhpcy5jaGFzc2lzQm9keSA9IG5ldyBCb2R5KHtcbiAgICAgICAgbWFzczogMSxcbiAgICAgICAgc2hhcGU6IG5ldyBCb3gobmV3IFZlYzMoNSwgMC41LCAyKSlcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuY29uc3RyYWludHMgPSBbXTtcbiAgICB0aGlzLndoZWVsQXhlcyA9IFtdO1xuICAgIHRoaXMud2hlZWxGb3JjZXMgPSBbXTtcbiAgfVxuICAvKipcbiAgICogQWRkIGEgd2hlZWxcbiAgICovXG5cblxuICBhZGRXaGVlbChvcHRpb25zID0ge30pIHtcbiAgICBsZXQgd2hlZWxCb2R5O1xuXG4gICAgaWYgKG9wdGlvbnMuYm9keSkge1xuICAgICAgd2hlZWxCb2R5ID0gb3B0aW9ucy5ib2R5O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBObyB3aGVlbCBib2R5IGdpdmVuLiBDcmVhdGUgaXQhXG4gICAgICB3aGVlbEJvZHkgPSBuZXcgQm9keSh7XG4gICAgICAgIG1hc3M6IDEsXG4gICAgICAgIHNoYXBlOiBuZXcgU3BoZXJlKDEuMilcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMud2hlZWxCb2RpZXMucHVzaCh3aGVlbEJvZHkpO1xuICAgIHRoaXMud2hlZWxGb3JjZXMucHVzaCgwKTsgLy8gUG9zaXRpb24gY29uc3RyYWluIHdoZWVsc1xuXG4gICAgY29uc3QgcG9zaXRpb24gPSB0eXBlb2Ygb3B0aW9ucy5wb3NpdGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnBvc2l0aW9uLmNsb25lKCkgOiBuZXcgVmVjMygpOyAvLyBTZXQgcG9zaXRpb24gbG9jYWxseSB0byB0aGUgY2hhc3Npc1xuXG4gICAgY29uc3Qgd29ybGRQb3NpdGlvbiA9IG5ldyBWZWMzKCk7XG4gICAgdGhpcy5jaGFzc2lzQm9keS5wb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgd29ybGRQb3NpdGlvbik7XG4gICAgd2hlZWxCb2R5LnBvc2l0aW9uLnNldCh3b3JsZFBvc2l0aW9uLngsIHdvcmxkUG9zaXRpb24ueSwgd29ybGRQb3NpdGlvbi56KTsgLy8gQ29uc3RyYWluIHdoZWVsXG5cbiAgICBjb25zdCBheGlzID0gdHlwZW9mIG9wdGlvbnMuYXhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmF4aXMuY2xvbmUoKSA6IG5ldyBWZWMzKDAsIDAsIDEpO1xuICAgIHRoaXMud2hlZWxBeGVzLnB1c2goYXhpcyk7XG4gICAgY29uc3QgaGluZ2VDb25zdHJhaW50ID0gbmV3IEhpbmdlQ29uc3RyYWludCh0aGlzLmNoYXNzaXNCb2R5LCB3aGVlbEJvZHksIHtcbiAgICAgIHBpdm90QTogcG9zaXRpb24sXG4gICAgICBheGlzQTogYXhpcyxcbiAgICAgIHBpdm90QjogVmVjMy5aRVJPLFxuICAgICAgYXhpc0I6IGF4aXMsXG4gICAgICBjb2xsaWRlQ29ubmVjdGVkOiBmYWxzZVxuICAgIH0pO1xuICAgIHRoaXMuY29uc3RyYWludHMucHVzaChoaW5nZUNvbnN0cmFpbnQpO1xuICAgIHJldHVybiB0aGlzLndoZWVsQm9kaWVzLmxlbmd0aCAtIDE7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgc3RlZXJpbmcgdmFsdWUgb2YgYSB3aGVlbC5cbiAgICogQHRvZG8gY2hlY2sgY29vcmRpbmF0ZVN5c3RlbVxuICAgKi9cblxuXG4gIHNldFN0ZWVyaW5nVmFsdWUodmFsdWUsIHdoZWVsSW5kZXgpIHtcbiAgICAvLyBTZXQgYW5nbGUgb2YgdGhlIGhpbmdlIGF4aXNcbiAgICBjb25zdCBheGlzID0gdGhpcy53aGVlbEF4ZXNbd2hlZWxJbmRleF07XG4gICAgY29uc3QgYyA9IE1hdGguY29zKHZhbHVlKTtcbiAgICBjb25zdCBzID0gTWF0aC5zaW4odmFsdWUpO1xuICAgIGNvbnN0IHggPSBheGlzLng7XG4gICAgY29uc3QgeiA9IGF4aXMuejtcbiAgICB0aGlzLmNvbnN0cmFpbnRzW3doZWVsSW5kZXhdLmF4aXNBLnNldCgtYyAqIHggKyBzICogeiwgMCwgcyAqIHggKyBjICogeik7XG4gIH1cbiAgLyoqXG4gICAqIFNldCB0aGUgdGFyZ2V0IHJvdGF0aW9uYWwgc3BlZWQgb2YgdGhlIGhpbmdlIGNvbnN0cmFpbnQuXG4gICAqL1xuXG5cbiAgc2V0TW90b3JTcGVlZCh2YWx1ZSwgd2hlZWxJbmRleCkge1xuICAgIGNvbnN0IGhpbmdlQ29uc3RyYWludCA9IHRoaXMuY29uc3RyYWludHNbd2hlZWxJbmRleF07XG4gICAgaGluZ2VDb25zdHJhaW50LmVuYWJsZU1vdG9yKCk7XG4gICAgaGluZ2VDb25zdHJhaW50Lm1vdG9yVGFyZ2V0VmVsb2NpdHkgPSB2YWx1ZTtcbiAgfVxuICAvKipcbiAgICogU2V0IHRoZSB0YXJnZXQgcm90YXRpb25hbCBzcGVlZCBvZiB0aGUgaGluZ2UgY29uc3RyYWludC5cbiAgICovXG5cblxuICBkaXNhYmxlTW90b3Iod2hlZWxJbmRleCkge1xuICAgIGNvbnN0IGhpbmdlQ29uc3RyYWludCA9IHRoaXMuY29uc3RyYWludHNbd2hlZWxJbmRleF07XG4gICAgaGluZ2VDb25zdHJhaW50LmRpc2FibGVNb3RvcigpO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIHdoZWVsIGZvcmNlIHRvIGFwcGx5IG9uIG9uZSBvZiB0aGUgd2hlZWxzIGVhY2ggdGltZSBzdGVwXG4gICAqL1xuXG5cbiAgc2V0V2hlZWxGb3JjZSh2YWx1ZSwgd2hlZWxJbmRleCkge1xuICAgIHRoaXMud2hlZWxGb3JjZXNbd2hlZWxJbmRleF0gPSB2YWx1ZTtcbiAgfVxuICAvKipcbiAgICogQXBwbHkgYSB0b3JxdWUgb24gb25lIG9mIHRoZSB3aGVlbHMuXG4gICAqL1xuXG5cbiAgYXBwbHlXaGVlbEZvcmNlKHZhbHVlLCB3aGVlbEluZGV4KSB7XG4gICAgY29uc3QgYXhpcyA9IHRoaXMud2hlZWxBeGVzW3doZWVsSW5kZXhdO1xuICAgIGNvbnN0IHdoZWVsQm9keSA9IHRoaXMud2hlZWxCb2RpZXNbd2hlZWxJbmRleF07XG4gICAgY29uc3QgYm9keVRvcnF1ZSA9IHdoZWVsQm9keS50b3JxdWU7XG4gICAgYXhpcy5zY2FsZSh2YWx1ZSwgdG9ycXVlKTtcbiAgICB3aGVlbEJvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHRvcnF1ZSwgdG9ycXVlKTtcbiAgICBib2R5VG9ycXVlLnZhZGQodG9ycXVlLCBib2R5VG9ycXVlKTtcbiAgfVxuICAvKipcbiAgICogQWRkIHRoZSB2ZWhpY2xlIGluY2x1ZGluZyBpdHMgY29uc3RyYWludHMgdG8gdGhlIHdvcmxkLlxuICAgKi9cblxuXG4gIGFkZFRvV29ybGQod29ybGQpIHtcbiAgICBjb25zdCBjb25zdHJhaW50cyA9IHRoaXMuY29uc3RyYWludHM7XG4gICAgY29uc3QgYm9kaWVzID0gdGhpcy53aGVlbEJvZGllcy5jb25jYXQoW3RoaXMuY2hhc3Npc0JvZHldKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9kaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB3b3JsZC5hZGRCb2R5KGJvZGllc1tpXSk7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb25zdHJhaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgd29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50c1tpXSk7XG4gICAgfVxuXG4gICAgd29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHRoaXMuX3VwZGF0ZS5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIF91cGRhdGUoKSB7XG4gICAgY29uc3Qgd2hlZWxGb3JjZXMgPSB0aGlzLndoZWVsRm9yY2VzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3aGVlbEZvcmNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5hcHBseVdoZWVsRm9yY2Uod2hlZWxGb3JjZXNbaV0sIGkpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmVtb3ZlIHRoZSB2ZWhpY2xlIGluY2x1ZGluZyBpdHMgY29uc3RyYWludHMgZnJvbSB0aGUgd29ybGQuXG4gICAqL1xuXG5cbiAgcmVtb3ZlRnJvbVdvcmxkKHdvcmxkKSB7XG4gICAgY29uc3QgY29uc3RyYWludHMgPSB0aGlzLmNvbnN0cmFpbnRzO1xuICAgIGNvbnN0IGJvZGllcyA9IHRoaXMud2hlZWxCb2RpZXMuY29uY2F0KFt0aGlzLmNoYXNzaXNCb2R5XSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvZGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgd29ybGQucmVtb3ZlQm9keShib2RpZXNbaV0pO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29uc3RyYWludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHdvcmxkLnJlbW92ZUNvbnN0cmFpbnQoY29uc3RyYWludHNbaV0pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgcm90YXRpb25hbCB2ZWxvY2l0eSBvZiBhIHdoZWVsXG4gICAqL1xuXG5cbiAgZ2V0V2hlZWxTcGVlZCh3aGVlbEluZGV4KSB7XG4gICAgY29uc3QgYXhpcyA9IHRoaXMud2hlZWxBeGVzW3doZWVsSW5kZXhdO1xuICAgIGNvbnN0IHdoZWVsQm9keSA9IHRoaXMud2hlZWxCb2RpZXNbd2hlZWxJbmRleF07XG4gICAgY29uc3QgdyA9IHdoZWVsQm9keS5hbmd1bGFyVmVsb2NpdHk7XG4gICAgdGhpcy5jaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUoYXhpcywgd29ybGRBeGlzKTtcbiAgICByZXR1cm4gdy5kb3Qod29ybGRBeGlzKTtcbiAgfVxuXG59XG5jb25zdCB0b3JxdWUgPSBuZXcgVmVjMygpO1xuY29uc3Qgd29ybGRBeGlzID0gbmV3IFZlYzMoKTtcblxuLyoqXG4gKiBTbW9vdGhlZC1wYXJ0aWNsZSBoeWRyb2R5bmFtaWNzIHN5c3RlbVxuICogQHRvZG8gTWFrZSBwYXJhbWV0ZXJzIGN1c3RvbWl6YWJsZSBpbiB0aGUgY29uc3RydWN0b3JcbiAqL1xuY2xhc3MgU1BIU3lzdGVtIHtcbiAgLyoqXG4gICAqIFRoZSBwYXJ0aWNsZXMgYXJyYXkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBEZW5zaXR5IG9mIHRoZSBzeXN0ZW0gKGtnL20zKS5cbiAgICogQGRlZmF1bHQgMVxuICAgKi9cblxuICAvKipcbiAgICogRGlzdGFuY2UgYmVsb3cgd2hpY2ggdHdvIHBhcnRpY2xlcyBhcmUgY29uc2lkZXJlZCB0byBiZSBuZWlnaGJvcnMuXG4gICAqIEl0IHNob3VsZCBiZSBhZGp1c3RlZCBzbyB0aGVyZSBhcmUgYWJvdXQgMTUtMjAgbmVpZ2hib3IgcGFydGljbGVzIHdpdGhpbiB0aGlzIHJhZGl1cy5cbiAgICogQGRlZmF1bHQgMVxuICAgKi9cblxuICAvKipcbiAgICogQGRlZmF1bHQgMVxuICAgKi9cblxuICAvKipcbiAgICogVmlzY29zaXR5IG9mIHRoZSBzeXN0ZW0uXG4gICAqIEBkZWZhdWx0IDAuMDFcbiAgICovXG5cbiAgLyoqXG4gICAqIEBkZWZhdWx0IDAuMDAwMDAxXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnBhcnRpY2xlcyA9IHZvaWQgMDtcbiAgICB0aGlzLmRlbnNpdHkgPSB2b2lkIDA7XG4gICAgdGhpcy5zbW9vdGhpbmdSYWRpdXMgPSB2b2lkIDA7XG4gICAgdGhpcy5zcGVlZE9mU291bmQgPSB2b2lkIDA7XG4gICAgdGhpcy52aXNjb3NpdHkgPSB2b2lkIDA7XG4gICAgdGhpcy5lcHMgPSB2b2lkIDA7XG4gICAgdGhpcy5wcmVzc3VyZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5kZW5zaXRpZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5uZWlnaGJvcnMgPSB2b2lkIDA7XG4gICAgdGhpcy5wYXJ0aWNsZXMgPSBbXTtcbiAgICB0aGlzLmRlbnNpdHkgPSAxO1xuICAgIHRoaXMuc21vb3RoaW5nUmFkaXVzID0gMTtcbiAgICB0aGlzLnNwZWVkT2ZTb3VuZCA9IDE7XG4gICAgdGhpcy52aXNjb3NpdHkgPSAwLjAxO1xuICAgIHRoaXMuZXBzID0gMC4wMDAwMDE7IC8vIFN0dWZmIENvbXB1dGVkIHBlciBwYXJ0aWNsZVxuXG4gICAgdGhpcy5wcmVzc3VyZXMgPSBbXTtcbiAgICB0aGlzLmRlbnNpdGllcyA9IFtdO1xuICAgIHRoaXMubmVpZ2hib3JzID0gW107XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIHBhcnRpY2xlIHRvIHRoZSBzeXN0ZW0uXG4gICAqL1xuXG5cbiAgYWRkKHBhcnRpY2xlKSB7XG4gICAgdGhpcy5wYXJ0aWNsZXMucHVzaChwYXJ0aWNsZSk7XG5cbiAgICBpZiAodGhpcy5uZWlnaGJvcnMubGVuZ3RoIDwgdGhpcy5wYXJ0aWNsZXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLm5laWdoYm9ycy5wdXNoKFtdKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJlbW92ZSBhIHBhcnRpY2xlIGZyb20gdGhlIHN5c3RlbS5cbiAgICovXG5cblxuICByZW1vdmUocGFydGljbGUpIHtcbiAgICBjb25zdCBpZHggPSB0aGlzLnBhcnRpY2xlcy5pbmRleE9mKHBhcnRpY2xlKTtcblxuICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICB0aGlzLnBhcnRpY2xlcy5zcGxpY2UoaWR4LCAxKTtcblxuICAgICAgaWYgKHRoaXMubmVpZ2hib3JzLmxlbmd0aCA+IHRoaXMucGFydGljbGVzLmxlbmd0aCkge1xuICAgICAgICB0aGlzLm5laWdoYm9ycy5wb3AoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEdldCBuZWlnaGJvcnMgd2l0aGluIHNtb290aGluZyB2b2x1bWUsIHNhdmUgaW4gdGhlIGFycmF5IG5laWdoYm9yc1xuICAgKi9cblxuXG4gIGdldE5laWdoYm9ycyhwYXJ0aWNsZSwgbmVpZ2hib3JzKSB7XG4gICAgY29uc3QgTiA9IHRoaXMucGFydGljbGVzLmxlbmd0aDtcbiAgICBjb25zdCBpZCA9IHBhcnRpY2xlLmlkO1xuICAgIGNvbnN0IFIyID0gdGhpcy5zbW9vdGhpbmdSYWRpdXMgKiB0aGlzLnNtb290aGluZ1JhZGl1cztcbiAgICBjb25zdCBkaXN0ID0gU1BIU3lzdGVtX2dldE5laWdoYm9yc19kaXN0O1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3QgcCA9IHRoaXMucGFydGljbGVzW2ldO1xuICAgICAgcC5wb3NpdGlvbi52c3ViKHBhcnRpY2xlLnBvc2l0aW9uLCBkaXN0KTtcblxuICAgICAgaWYgKGlkICE9PSBwLmlkICYmIGRpc3QubGVuZ3RoU3F1YXJlZCgpIDwgUjIpIHtcbiAgICAgICAgbmVpZ2hib3JzLnB1c2gocCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlKCkge1xuICAgIGNvbnN0IE4gPSB0aGlzLnBhcnRpY2xlcy5sZW5ndGg7XG4gICAgY29uc3QgZGlzdCA9IFNQSFN5c3RlbV91cGRhdGVfZGlzdDtcbiAgICBjb25zdCBjcyA9IHRoaXMuc3BlZWRPZlNvdW5kO1xuICAgIGNvbnN0IGVwcyA9IHRoaXMuZXBzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3QgcCA9IHRoaXMucGFydGljbGVzW2ldOyAvLyBDdXJyZW50IHBhcnRpY2xlXG5cbiAgICAgIGNvbnN0IG5laWdoYm9ycyA9IHRoaXMubmVpZ2hib3JzW2ldOyAvLyBHZXQgbmVpZ2hib3JzXG5cbiAgICAgIG5laWdoYm9ycy5sZW5ndGggPSAwO1xuICAgICAgdGhpcy5nZXROZWlnaGJvcnMocCwgbmVpZ2hib3JzKTtcbiAgICAgIG5laWdoYm9ycy5wdXNoKHRoaXMucGFydGljbGVzW2ldKTsgLy8gQWRkIGN1cnJlbnQgdG9vXG5cbiAgICAgIGNvbnN0IG51bU5laWdoYm9ycyA9IG5laWdoYm9ycy5sZW5ndGg7IC8vIEFjY3VtdWxhdGUgZGVuc2l0eSBmb3IgdGhlIHBhcnRpY2xlXG5cbiAgICAgIGxldCBzdW0gPSAwLjA7XG5cbiAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBudW1OZWlnaGJvcnM7IGorKykge1xuICAgICAgICAvL3ByaW50ZihcIkN1cnJlbnQgcGFydGljbGUgaGFzIHBvc2l0aW9uICVmICVmICVmXFxuXCIsb2JqZWN0c1tpZF0ucG9zLngoKSxvYmplY3RzW2lkXS5wb3MueSgpLG9iamVjdHNbaWRdLnBvcy56KCkpO1xuICAgICAgICBwLnBvc2l0aW9uLnZzdWIobmVpZ2hib3JzW2pdLnBvc2l0aW9uLCBkaXN0KTtcbiAgICAgICAgY29uc3QgbGVuID0gZGlzdC5sZW5ndGgoKTtcbiAgICAgICAgY29uc3Qgd2VpZ2h0ID0gdGhpcy53KGxlbik7XG4gICAgICAgIHN1bSArPSBuZWlnaGJvcnNbal0ubWFzcyAqIHdlaWdodDtcbiAgICAgIH0gLy8gU2F2ZVxuXG5cbiAgICAgIHRoaXMuZGVuc2l0aWVzW2ldID0gc3VtO1xuICAgICAgdGhpcy5wcmVzc3VyZXNbaV0gPSBjcyAqIGNzICogKHRoaXMuZGVuc2l0aWVzW2ldIC0gdGhpcy5kZW5zaXR5KTtcbiAgICB9IC8vIEFkZCBmb3JjZXNcbiAgICAvLyBTdW0gdG8gdGhlc2UgYWNjZWxlcmF0aW9uc1xuXG5cbiAgICBjb25zdCBhX3ByZXNzdXJlID0gU1BIU3lzdGVtX3VwZGF0ZV9hX3ByZXNzdXJlO1xuICAgIGNvbnN0IGFfdmlzYyA9IFNQSFN5c3RlbV91cGRhdGVfYV92aXNjO1xuICAgIGNvbnN0IGdyYWRXID0gU1BIU3lzdGVtX3VwZGF0ZV9ncmFkVztcbiAgICBjb25zdCByX3ZlYyA9IFNQSFN5c3RlbV91cGRhdGVfcl92ZWM7XG4gICAgY29uc3QgdSA9IFNQSFN5c3RlbV91cGRhdGVfdTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IHBhcnRpY2xlID0gdGhpcy5wYXJ0aWNsZXNbaV07XG4gICAgICBhX3ByZXNzdXJlLnNldCgwLCAwLCAwKTtcbiAgICAgIGFfdmlzYy5zZXQoMCwgMCwgMCk7IC8vIEluaXQgdmFyc1xuXG4gICAgICBsZXQgUGlqO1xuICAgICAgbGV0IG5hYmxhO1xuXG4gICAgICBjb25zdCBuZWlnaGJvcnMgPSB0aGlzLm5laWdoYm9yc1tpXTtcbiAgICAgIGNvbnN0IG51bU5laWdoYm9ycyA9IG5laWdoYm9ycy5sZW5ndGg7IC8vcHJpbnRmKFwiTmVpZ2hib3JzOiBcIik7XG5cbiAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBudW1OZWlnaGJvcnM7IGorKykge1xuICAgICAgICBjb25zdCBuZWlnaGJvciA9IG5laWdoYm9yc1tqXTsgLy9wcmludGYoXCIlZCBcIixuaik7XG4gICAgICAgIC8vIEdldCByIG9uY2UgZm9yIGFsbC4uXG5cbiAgICAgICAgcGFydGljbGUucG9zaXRpb24udnN1YihuZWlnaGJvci5wb3NpdGlvbiwgcl92ZWMpO1xuICAgICAgICBjb25zdCByID0gcl92ZWMubGVuZ3RoKCk7IC8vIFByZXNzdXJlIGNvbnRyaWJ1dGlvblxuXG4gICAgICAgIFBpaiA9IC1uZWlnaGJvci5tYXNzICogKHRoaXMucHJlc3N1cmVzW2ldIC8gKHRoaXMuZGVuc2l0aWVzW2ldICogdGhpcy5kZW5zaXRpZXNbaV0gKyBlcHMpICsgdGhpcy5wcmVzc3VyZXNbal0gLyAodGhpcy5kZW5zaXRpZXNbal0gKiB0aGlzLmRlbnNpdGllc1tqXSArIGVwcykpO1xuICAgICAgICB0aGlzLmdyYWR3KHJfdmVjLCBncmFkVyk7IC8vIEFkZCB0byBwcmVzc3VyZSBhY2NlbGVyYXRpb25cblxuICAgICAgICBncmFkVy5zY2FsZShQaWosIGdyYWRXKTtcbiAgICAgICAgYV9wcmVzc3VyZS52YWRkKGdyYWRXLCBhX3ByZXNzdXJlKTsgLy8gVmlzY29zaXR5IGNvbnRyaWJ1dGlvblxuXG4gICAgICAgIG5laWdoYm9yLnZlbG9jaXR5LnZzdWIocGFydGljbGUudmVsb2NpdHksIHUpO1xuICAgICAgICB1LnNjYWxlKDEuMCAvICgwLjAwMDEgKyB0aGlzLmRlbnNpdGllc1tpXSAqIHRoaXMuZGVuc2l0aWVzW2pdKSAqIHRoaXMudmlzY29zaXR5ICogbmVpZ2hib3IubWFzcywgdSk7XG4gICAgICAgIG5hYmxhID0gdGhpcy5uYWJsYXcocik7XG4gICAgICAgIHUuc2NhbGUobmFibGEsIHUpOyAvLyBBZGQgdG8gdmlzY29zaXR5IGFjY2VsZXJhdGlvblxuXG4gICAgICAgIGFfdmlzYy52YWRkKHUsIGFfdmlzYyk7XG4gICAgICB9IC8vIENhbGN1bGF0ZSBmb3JjZVxuXG5cbiAgICAgIGFfdmlzYy5zY2FsZShwYXJ0aWNsZS5tYXNzLCBhX3Zpc2MpO1xuICAgICAgYV9wcmVzc3VyZS5zY2FsZShwYXJ0aWNsZS5tYXNzLCBhX3ByZXNzdXJlKTsgLy8gQWRkIGZvcmNlIHRvIHBhcnRpY2xlc1xuXG4gICAgICBwYXJ0aWNsZS5mb3JjZS52YWRkKGFfdmlzYywgcGFydGljbGUuZm9yY2UpO1xuICAgICAgcGFydGljbGUuZm9yY2UudmFkZChhX3ByZXNzdXJlLCBwYXJ0aWNsZS5mb3JjZSk7XG4gICAgfVxuICB9IC8vIENhbGN1bGF0ZSB0aGUgd2VpZ2h0IHVzaW5nIHRoZSBXKHIpIHdlaWdodGZ1bmN0aW9uXG5cblxuICB3KHIpIHtcbiAgICAvLyAzMTVcbiAgICBjb25zdCBoID0gdGhpcy5zbW9vdGhpbmdSYWRpdXM7XG4gICAgcmV0dXJuIDMxNS4wIC8gKDY0LjAgKiBNYXRoLlBJICogaCAqKiA5KSAqIChoICogaCAtIHIgKiByKSAqKiAzO1xuICB9IC8vIGNhbGN1bGF0ZSBncmFkaWVudCBvZiB0aGUgd2VpZ2h0IGZ1bmN0aW9uXG5cblxuICBncmFkdyhyVmVjLCByZXN1bHRWZWMpIHtcbiAgICBjb25zdCByID0gclZlYy5sZW5ndGgoKTtcbiAgICBjb25zdCBoID0gdGhpcy5zbW9vdGhpbmdSYWRpdXM7XG4gICAgclZlYy5zY2FsZSg5NDUuMCAvICgzMi4wICogTWF0aC5QSSAqIGggKiogOSkgKiAoaCAqIGggLSByICogcikgKiogMiwgcmVzdWx0VmVjKTtcbiAgfSAvLyBDYWxjdWxhdGUgbmFibGEoVylcblxuXG4gIG5hYmxhdyhyKSB7XG4gICAgY29uc3QgaCA9IHRoaXMuc21vb3RoaW5nUmFkaXVzO1xuICAgIGNvbnN0IG5hYmxhID0gOTQ1LjAgLyAoMzIuMCAqIE1hdGguUEkgKiBoICoqIDkpICogKGggKiBoIC0gciAqIHIpICogKDcgKiByICogciAtIDMgKiBoICogaCk7XG4gICAgcmV0dXJuIG5hYmxhO1xuICB9XG5cbn1cbmNvbnN0IFNQSFN5c3RlbV9nZXROZWlnaGJvcnNfZGlzdCA9IG5ldyBWZWMzKCk7IC8vIFRlbXAgdmVjdG9ycyBmb3IgY2FsY3VsYXRpb25cblxuY29uc3QgU1BIU3lzdGVtX3VwZGF0ZV9kaXN0ID0gbmV3IFZlYzMoKTsgLy8gUmVsYXRpdmUgdmVsb2NpdHlcblxuY29uc3QgU1BIU3lzdGVtX3VwZGF0ZV9hX3ByZXNzdXJlID0gbmV3IFZlYzMoKTtcbmNvbnN0IFNQSFN5c3RlbV91cGRhdGVfYV92aXNjID0gbmV3IFZlYzMoKTtcbmNvbnN0IFNQSFN5c3RlbV91cGRhdGVfZ3JhZFcgPSBuZXcgVmVjMygpO1xuY29uc3QgU1BIU3lzdGVtX3VwZGF0ZV9yX3ZlYyA9IG5ldyBWZWMzKCk7XG5jb25zdCBTUEhTeXN0ZW1fdXBkYXRlX3UgPSBuZXcgVmVjMygpO1xuXG4vKipcbiAqIEN5bGluZGVyIGNsYXNzLlxuICogQGV4YW1wbGVcbiAqICAgICBjb25zdCByYWRpdXNUb3AgPSAwLjVcbiAqICAgICBjb25zdCByYWRpdXNCb3R0b20gPSAwLjVcbiAqICAgICBjb25zdCBoZWlnaHQgPSAyXG4gKiAgICAgY29uc3QgbnVtU2VnbWVudHMgPSAxMlxuICogICAgIGNvbnN0IGN5bGluZGVyU2hhcGUgPSBuZXcgQ0FOTk9OLkN5bGluZGVyKHJhZGl1c1RvcCwgcmFkaXVzQm90dG9tLCBoZWlnaHQsIG51bVNlZ21lbnRzKVxuICogICAgIGNvbnN0IGN5bGluZGVyQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBjeWxpbmRlclNoYXBlIH0pXG4gKiAgICAgd29ybGQuYWRkQm9keShjeWxpbmRlckJvZHkpXG4gKi9cblxuY2xhc3MgQ3lsaW5kZXIgZXh0ZW5kcyBDb252ZXhQb2x5aGVkcm9uIHtcbiAgLyoqIFRoZSByYWRpdXMgb2YgdGhlIHRvcCBvZiB0aGUgQ3lsaW5kZXIuICovXG5cbiAgLyoqIFRoZSByYWRpdXMgb2YgdGhlIGJvdHRvbSBvZiB0aGUgQ3lsaW5kZXIuICovXG5cbiAgLyoqIFRoZSBoZWlnaHQgb2YgdGhlIEN5bGluZGVyLiAqL1xuXG4gIC8qKiBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIHRvIGJ1aWxkIHRoZSBjeWxpbmRlciBvdXQgb2YuICovXG5cbiAgLyoqXG4gICAqIEBwYXJhbSByYWRpdXNUb3AgVGhlIHJhZGl1cyBvZiB0aGUgdG9wIG9mIHRoZSBDeWxpbmRlci5cbiAgICogQHBhcmFtIHJhZGl1c0JvdHRvbSBUaGUgcmFkaXVzIG9mIHRoZSBib3R0b20gb2YgdGhlIEN5bGluZGVyLlxuICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIEN5bGluZGVyLlxuICAgKiBAcGFyYW0gbnVtU2VnbWVudHMgVGhlIG51bWJlciBvZiBzZWdtZW50cyB0byBidWlsZCB0aGUgY3lsaW5kZXIgb3V0IG9mLlxuICAgKi9cbiAgY29uc3RydWN0b3IocmFkaXVzVG9wID0gMSwgcmFkaXVzQm90dG9tID0gMSwgaGVpZ2h0ID0gMSwgbnVtU2VnbWVudHMgPSA4KSB7XG4gICAgaWYgKHJhZGl1c1RvcCA8IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGN5bGluZGVyIHJhZGl1c1RvcCBjYW5ub3QgYmUgbmVnYXRpdmUuJyk7XG4gICAgfVxuXG4gICAgaWYgKHJhZGl1c0JvdHRvbSA8IDApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGN5bGluZGVyIHJhZGl1c0JvdHRvbSBjYW5ub3QgYmUgbmVnYXRpdmUuJyk7XG4gICAgfVxuXG4gICAgY29uc3QgTiA9IG51bVNlZ21lbnRzO1xuICAgIGNvbnN0IHZlcnRpY2VzID0gW107XG4gICAgY29uc3QgYXhlcyA9IFtdO1xuICAgIGNvbnN0IGZhY2VzID0gW107XG4gICAgY29uc3QgYm90dG9tZmFjZSA9IFtdO1xuICAgIGNvbnN0IHRvcGZhY2UgPSBbXTtcbiAgICBjb25zdCBjb3MgPSBNYXRoLmNvcztcbiAgICBjb25zdCBzaW4gPSBNYXRoLnNpbjsgLy8gRmlyc3QgYm90dG9tIHBvaW50XG5cbiAgICB2ZXJ0aWNlcy5wdXNoKG5ldyBWZWMzKC1yYWRpdXNCb3R0b20gKiBzaW4oMCksIC1oZWlnaHQgKiAwLjUsIHJhZGl1c0JvdHRvbSAqIGNvcygwKSkpO1xuICAgIGJvdHRvbWZhY2UucHVzaCgwKTsgLy8gRmlyc3QgdG9wIHBvaW50XG5cbiAgICB2ZXJ0aWNlcy5wdXNoKG5ldyBWZWMzKC1yYWRpdXNUb3AgKiBzaW4oMCksIGhlaWdodCAqIDAuNSwgcmFkaXVzVG9wICogY29zKDApKSk7XG4gICAgdG9wZmFjZS5wdXNoKDEpO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBOOyBpKyspIHtcbiAgICAgIGNvbnN0IHRoZXRhID0gMiAqIE1hdGguUEkgLyBOICogKGkgKyAxKTtcbiAgICAgIGNvbnN0IHRoZXRhTiA9IDIgKiBNYXRoLlBJIC8gTiAqIChpICsgMC41KTtcblxuICAgICAgaWYgKGkgPCBOIC0gMSkge1xuICAgICAgICAvLyBCb3R0b21cbiAgICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzQm90dG9tICogc2luKHRoZXRhKSwgLWhlaWdodCAqIDAuNSwgcmFkaXVzQm90dG9tICogY29zKHRoZXRhKSkpO1xuICAgICAgICBib3R0b21mYWNlLnB1c2goMiAqIGkgKyAyKTsgLy8gVG9wXG5cbiAgICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzVG9wICogc2luKHRoZXRhKSwgaGVpZ2h0ICogMC41LCByYWRpdXNUb3AgKiBjb3ModGhldGEpKSk7XG4gICAgICAgIHRvcGZhY2UucHVzaCgyICogaSArIDMpOyAvLyBGYWNlXG5cbiAgICAgICAgZmFjZXMucHVzaChbMiAqIGksIDIgKiBpICsgMSwgMiAqIGkgKyAzLCAyICogaSArIDJdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZhY2VzLnB1c2goWzIgKiBpLCAyICogaSArIDEsIDEsIDBdKTsgLy8gQ29ubmVjdFxuICAgICAgfSAvLyBBeGlzOiB3ZSBjYW4gY3V0IG9mZiBoYWxmIG9mIHRoZW0gaWYgd2UgaGF2ZSBldmVuIG51bWJlciBvZiBzZWdtZW50c1xuXG5cbiAgICAgIGlmIChOICUgMiA9PT0gMSB8fCBpIDwgTiAvIDIpIHtcbiAgICAgICAgYXhlcy5wdXNoKG5ldyBWZWMzKC1zaW4odGhldGFOKSwgMCwgY29zKHRoZXRhTikpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmYWNlcy5wdXNoKGJvdHRvbWZhY2UpO1xuICAgIGF4ZXMucHVzaChuZXcgVmVjMygwLCAxLCAwKSk7IC8vIFJlb3JkZXIgdG9wIGZhY2VcblxuICAgIGNvbnN0IHRlbXAgPSBbXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9wZmFjZS5sZW5ndGg7IGkrKykge1xuICAgICAgdGVtcC5wdXNoKHRvcGZhY2VbdG9wZmFjZS5sZW5ndGggLSBpIC0gMV0pO1xuICAgIH1cblxuICAgIGZhY2VzLnB1c2godGVtcCk7XG4gICAgc3VwZXIoe1xuICAgICAgdmVydGljZXMsXG4gICAgICBmYWNlcyxcbiAgICAgIGF4ZXNcbiAgICB9KTtcbiAgICB0aGlzLnJhZGl1c1RvcCA9IHZvaWQgMDtcbiAgICB0aGlzLnJhZGl1c0JvdHRvbSA9IHZvaWQgMDtcbiAgICB0aGlzLmhlaWdodCA9IHZvaWQgMDtcbiAgICB0aGlzLm51bVNlZ21lbnRzID0gdm9pZCAwO1xuICAgIHRoaXMudHlwZSA9IFNoYXBlLnR5cGVzLkNZTElOREVSO1xuICAgIHRoaXMucmFkaXVzVG9wID0gcmFkaXVzVG9wO1xuICAgIHRoaXMucmFkaXVzQm90dG9tID0gcmFkaXVzQm90dG9tO1xuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMubnVtU2VnbWVudHMgPSBudW1TZWdtZW50cztcbiAgfVxuXG59XG5cbi8qKlxuICogUGFydGljbGUgc2hhcGUuXG4gKiBAZXhhbXBsZVxuICogICAgIGNvbnN0IHBhcnRpY2xlU2hhcGUgPSBuZXcgQ0FOTk9OLlBhcnRpY2xlKClcbiAqICAgICBjb25zdCBwYXJ0aWNsZUJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogcGFydGljbGVTaGFwZSB9KVxuICogICAgIHdvcmxkLmFkZEJvZHkocGFydGljbGVCb2R5KVxuICovXG5jbGFzcyBQYXJ0aWNsZSBleHRlbmRzIFNoYXBlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoe1xuICAgICAgdHlwZTogU2hhcGUudHlwZXMuUEFSVElDTEVcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogY2FsY3VsYXRlTG9jYWxJbmVydGlhXG4gICAqL1xuXG5cbiAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCA9IG5ldyBWZWMzKCkpIHtcbiAgICB0YXJnZXQuc2V0KDAsIDAsIDApO1xuICAgIHJldHVybiB0YXJnZXQ7XG4gIH1cblxuICB2b2x1bWUoKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHtcbiAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gMDtcbiAgfVxuXG4gIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7XG4gICAgLy8gR2V0IGVhY2ggYXhpcyBtYXhcbiAgICBtaW4uY29weShwb3MpO1xuICAgIG1heC5jb3B5KHBvcyk7XG4gIH1cblxufVxuXG4vKipcbiAqIEEgcGxhbmUsIGZhY2luZyBpbiB0aGUgWiBkaXJlY3Rpb24uIFRoZSBwbGFuZSBoYXMgaXRzIHN1cmZhY2UgYXQgej0wIGFuZCBldmVyeXRoaW5nIGJlbG93IHo9MCBpcyBhc3N1bWVkIHRvIGJlIHNvbGlkIHBsYW5lLiBUbyBtYWtlIHRoZSBwbGFuZSBmYWNlIGluIHNvbWUgb3RoZXIgZGlyZWN0aW9uIHRoYW4geiwgeW91IG11c3QgcHV0IGl0IGluc2lkZSBhIEJvZHkgYW5kIHJvdGF0ZSB0aGF0IGJvZHkuIFNlZSB0aGUgZGVtb3MuXG4gKiBAZXhhbXBsZVxuICogICAgIGNvbnN0IHBsYW5lU2hhcGUgPSBuZXcgQ0FOTk9OLlBsYW5lKClcbiAqICAgICBjb25zdCBwbGFuZUJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAwLCBzaGFwZTogIHBsYW5lU2hhcGUgfSlcbiAqICAgICBwbGFuZUJvZHkucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIoLU1hdGguUEkgLyAyLCAwLCAwKSAvLyBtYWtlIGl0IGZhY2UgdXBcbiAqICAgICB3b3JsZC5hZGRCb2R5KHBsYW5lQm9keSlcbiAqL1xuY2xhc3MgUGxhbmUgZXh0ZW5kcyBTaGFwZSB7XG4gIC8qKiB3b3JsZE5vcm1hbCAqL1xuXG4gIC8qKiB3b3JsZE5vcm1hbE5lZWRzVXBkYXRlICovXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKHtcbiAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLlBMQU5FXG4gICAgfSk7IC8vIFdvcmxkIG9yaWVudGVkIG5vcm1hbFxuXG4gICAgdGhpcy53b3JsZE5vcm1hbCA9IHZvaWQgMDtcbiAgICB0aGlzLndvcmxkTm9ybWFsTmVlZHNVcGRhdGUgPSB2b2lkIDA7XG4gICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IHZvaWQgMDtcbiAgICB0aGlzLndvcmxkTm9ybWFsID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLndvcmxkTm9ybWFsTmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBOdW1iZXIuTUFYX1ZBTFVFO1xuICB9XG4gIC8qKiBjb21wdXRlV29ybGROb3JtYWwgKi9cblxuXG4gIGNvbXB1dGVXb3JsZE5vcm1hbChxdWF0KSB7XG4gICAgY29uc3QgbiA9IHRoaXMud29ybGROb3JtYWw7XG4gICAgbi5zZXQoMCwgMCwgMSk7XG4gICAgcXVhdC52bXVsdChuLCBuKTtcbiAgICB0aGlzLndvcmxkTm9ybWFsTmVlZHNVcGRhdGUgPSBmYWxzZTtcbiAgfVxuXG4gIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQgPSBuZXcgVmVjMygpKSB7XG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfVxuXG4gIHZvbHVtZSgpIHtcbiAgICByZXR1cm4gKC8vIFRoZSBwbGFuZSBpcyBpbmZpbml0ZS4uLlxuICAgICAgTnVtYmVyLk1BWF9WQUxVRVxuICAgICk7XG4gIH1cblxuICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkge1xuICAgIC8vIFRoZSBwbGFuZSBBQUJCIGlzIGluZmluaXRlLCBleGNlcHQgaWYgdGhlIG5vcm1hbCBpcyBwb2ludGluZyBhbG9uZyBhbnkgYXhpc1xuICAgIHRlbXBOb3JtYWwuc2V0KDAsIDAsIDEpOyAvLyBEZWZhdWx0IHBsYW5lIG5vcm1hbCBpcyB6XG5cbiAgICBxdWF0LnZtdWx0KHRlbXBOb3JtYWwsIHRlbXBOb3JtYWwpO1xuICAgIGNvbnN0IG1heFZhbCA9IE51bWJlci5NQVhfVkFMVUU7XG4gICAgbWluLnNldCgtbWF4VmFsLCAtbWF4VmFsLCAtbWF4VmFsKTtcbiAgICBtYXguc2V0KG1heFZhbCwgbWF4VmFsLCBtYXhWYWwpO1xuXG4gICAgaWYgKHRlbXBOb3JtYWwueCA9PT0gMSkge1xuICAgICAgbWF4LnggPSBwb3MueDtcbiAgICB9IGVsc2UgaWYgKHRlbXBOb3JtYWwueCA9PT0gLTEpIHtcbiAgICAgIG1pbi54ID0gcG9zLng7XG4gICAgfVxuXG4gICAgaWYgKHRlbXBOb3JtYWwueSA9PT0gMSkge1xuICAgICAgbWF4LnkgPSBwb3MueTtcbiAgICB9IGVsc2UgaWYgKHRlbXBOb3JtYWwueSA9PT0gLTEpIHtcbiAgICAgIG1pbi55ID0gcG9zLnk7XG4gICAgfVxuXG4gICAgaWYgKHRlbXBOb3JtYWwueiA9PT0gMSkge1xuICAgICAgbWF4LnogPSBwb3MuejtcbiAgICB9IGVsc2UgaWYgKHRlbXBOb3JtYWwueiA9PT0gLTEpIHtcbiAgICAgIG1pbi56ID0gcG9zLno7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7XG4gICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE51bWJlci5NQVhfVkFMVUU7XG4gIH1cblxufVxuY29uc3QgdGVtcE5vcm1hbCA9IG5ldyBWZWMzKCk7XG5cbi8qKlxuICogSGVpZ2h0ZmllbGQgc2hhcGUgY2xhc3MuIEhlaWdodCBkYXRhIGlzIGdpdmVuIGFzIGFuIGFycmF5LiBUaGVzZSBkYXRhIHBvaW50cyBhcmUgc3ByZWFkIG91dCBldmVubHkgd2l0aCBhIGdpdmVuIGRpc3RhbmNlLlxuICogQHRvZG8gU2hvdWxkIGJlIHBvc3NpYmxlIHRvIHVzZSBhbG9uZyBhbGwgYXhlcywgbm90IGp1c3QgeVxuICogQHRvZG8gc2hvdWxkIGJlIHBvc3NpYmxlIHRvIHNjYWxlIGFsb25nIGFsbCBheGVzXG4gKiBAdG9kbyBSZWZhY3RvciBlbGVtZW50U2l6ZSB0byBlbGVtZW50U2l6ZVggYW5kIGVsZW1lbnRTaXplWVxuICpcbiAqIEBleGFtcGxlXG4gKiAgICAgLy8gR2VuZXJhdGUgc29tZSBoZWlnaHQgZGF0YSAoeS12YWx1ZXMpLlxuICogICAgIGNvbnN0IGRhdGEgPSBbXVxuICogICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwMDsgaSsrKSB7XG4gKiAgICAgICAgIGNvbnN0IHkgPSAwLjUgKiBNYXRoLmNvcygwLjIgKiBpKVxuICogICAgICAgICBkYXRhLnB1c2goeSlcbiAqICAgICB9XG4gKlxuICogICAgIC8vIENyZWF0ZSB0aGUgaGVpZ2h0ZmllbGQgc2hhcGVcbiAqICAgICBjb25zdCBoZWlnaHRmaWVsZFNoYXBlID0gbmV3IENBTk5PTi5IZWlnaHRmaWVsZChkYXRhLCB7XG4gKiAgICAgICAgIGVsZW1lbnRTaXplOiAxIC8vIERpc3RhbmNlIGJldHdlZW4gdGhlIGRhdGEgcG9pbnRzIGluIFggYW5kIFkgZGlyZWN0aW9uc1xuICogICAgIH0pXG4gKiAgICAgY29uc3QgaGVpZ2h0ZmllbGRCb2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsgc2hhcGU6IGhlaWdodGZpZWxkU2hhcGUgfSlcbiAqICAgICB3b3JsZC5hZGRCb2R5KGhlaWdodGZpZWxkQm9keSlcbiAqL1xuY2xhc3MgSGVpZ2h0ZmllbGQgZXh0ZW5kcyBTaGFwZSB7XG4gIC8qKlxuICAgKiBBbiBhcnJheSBvZiBudW1iZXJzLCBvciBoZWlnaHQgdmFsdWVzLCB0aGF0IGFyZSBzcHJlYWQgb3V0IGFsb25nIHRoZSB4IGF4aXMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBNYXggdmFsdWUgb2YgdGhlIGRhdGEgcG9pbnRzIGluIHRoZSBkYXRhIGFycmF5LlxuICAgKi9cblxuICAvKipcbiAgICogTWluaW11bSB2YWx1ZSBvZiB0aGUgZGF0YSBwb2ludHMgaW4gdGhlIGRhdGEgYXJyYXkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBXb3JsZCBzcGFjaW5nIGJldHdlZW4gdGhlIGRhdGEgcG9pbnRzIGluIFggYW5kIFkgZGlyZWN0aW9uLlxuICAgKiBAdG9kbyBlbGVtZW50U2l6ZVggYW5kIFlcbiAgICogQGRlZmF1bHQgMVxuICAgKi9cblxuICAvKipcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cblxuICAvKipcbiAgICogQHBhcmFtIGRhdGEgQW4gYXJyYXkgb2YgbnVtYmVycywgb3IgaGVpZ2h0IHZhbHVlcywgdGhhdCBhcmUgc3ByZWFkIG91dCBhbG9uZyB0aGUgeCBheGlzLlxuICAgKi9cbiAgY29uc3RydWN0b3IoZGF0YSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHtcbiAgICAgIG1heFZhbHVlOiBudWxsLFxuICAgICAgbWluVmFsdWU6IG51bGwsXG4gICAgICBlbGVtZW50U2l6ZTogMVxuICAgIH0pO1xuICAgIHN1cGVyKHtcbiAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxEXG4gICAgfSk7XG4gICAgdGhpcy5kYXRhID0gdm9pZCAwO1xuICAgIHRoaXMubWF4VmFsdWUgPSB2b2lkIDA7XG4gICAgdGhpcy5taW5WYWx1ZSA9IHZvaWQgMDtcbiAgICB0aGlzLmVsZW1lbnRTaXplID0gdm9pZCAwO1xuICAgIHRoaXMuY2FjaGVFbmFibGVkID0gdm9pZCAwO1xuICAgIHRoaXMucGlsbGFyQ29udmV4ID0gdm9pZCAwO1xuICAgIHRoaXMucGlsbGFyT2Zmc2V0ID0gdm9pZCAwO1xuICAgIHRoaXMuX2NhY2hlZFBpbGxhcnMgPSB2b2lkIDA7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB0aGlzLm1heFZhbHVlID0gb3B0aW9ucy5tYXhWYWx1ZTtcbiAgICB0aGlzLm1pblZhbHVlID0gb3B0aW9ucy5taW5WYWx1ZTtcbiAgICB0aGlzLmVsZW1lbnRTaXplID0gb3B0aW9ucy5lbGVtZW50U2l6ZTtcblxuICAgIGlmIChvcHRpb25zLm1pblZhbHVlID09PSBudWxsKSB7XG4gICAgICB0aGlzLnVwZGF0ZU1pblZhbHVlKCk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMubWF4VmFsdWUgPT09IG51bGwpIHtcbiAgICAgIHRoaXMudXBkYXRlTWF4VmFsdWUoKTtcbiAgICB9XG5cbiAgICB0aGlzLmNhY2hlRW5hYmxlZCA9IHRydWU7XG4gICAgdGhpcy5waWxsYXJDb252ZXggPSBuZXcgQ29udmV4UG9seWhlZHJvbigpO1xuICAgIHRoaXMucGlsbGFyT2Zmc2V0ID0gbmV3IFZlYzMoKTtcbiAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7IC8vIFwiaV9qX2lzVXBwZXJcIiA9PiB7IGNvbnZleDogLi4uLCBvZmZzZXQ6IC4uLiB9XG4gICAgLy8gZm9yIGV4YW1wbGU6XG4gICAgLy8gX2NhY2hlZFBpbGxhcnNbXCIwXzJfMVwiXVxuXG4gICAgdGhpcy5fY2FjaGVkUGlsbGFycyA9IHt9O1xuICB9XG4gIC8qKlxuICAgKiBDYWxsIHdoZW5ldmVyIHlvdSBjaGFuZ2UgdGhlIGRhdGEgYXJyYXkuXG4gICAqL1xuXG5cbiAgdXBkYXRlKCkge1xuICAgIHRoaXMuX2NhY2hlZFBpbGxhcnMgPSB7fTtcbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHRoZSBgbWluVmFsdWVgIHByb3BlcnR5XG4gICAqL1xuXG5cbiAgdXBkYXRlTWluVmFsdWUoKSB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBsZXQgbWluVmFsdWUgPSBkYXRhWzBdWzBdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSBkYXRhW2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGNvbnN0IHYgPSBkYXRhW2ldW2pdO1xuXG4gICAgICAgIGlmICh2IDwgbWluVmFsdWUpIHtcbiAgICAgICAgICBtaW5WYWx1ZSA9IHY7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLm1pblZhbHVlID0gbWluVmFsdWU7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgYG1heFZhbHVlYCBwcm9wZXJ0eVxuICAgKi9cblxuXG4gIHVwZGF0ZU1heFZhbHVlKCkge1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7XG4gICAgbGV0IG1heFZhbHVlID0gZGF0YVswXVswXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZGF0YVtpXS5sZW5ndGg7IGorKykge1xuICAgICAgICBjb25zdCB2ID0gZGF0YVtpXVtqXTtcblxuICAgICAgICBpZiAodiA+IG1heFZhbHVlKSB7XG4gICAgICAgICAgbWF4VmFsdWUgPSB2O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5tYXhWYWx1ZSA9IG1heFZhbHVlO1xuICB9XG4gIC8qKlxuICAgKiBTZXQgdGhlIGhlaWdodCB2YWx1ZSBhdCBhbiBpbmRleC4gRG9uJ3QgZm9yZ2V0IHRvIHVwZGF0ZSBtYXhWYWx1ZSBhbmQgbWluVmFsdWUgYWZ0ZXIgeW91J3JlIGRvbmUuXG4gICAqL1xuXG5cbiAgc2V0SGVpZ2h0VmFsdWVBdEluZGV4KHhpLCB5aSwgdmFsdWUpIHtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGRhdGFbeGldW3lpXSA9IHZhbHVlOyAvLyBJbnZhbGlkYXRlIGNhY2hlXG5cbiAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBmYWxzZSk7XG5cbiAgICBpZiAoeGkgPiAwKSB7XG4gICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGkgLSAxLCB5aSwgdHJ1ZSk7XG4gICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGkgLSAxLCB5aSwgZmFsc2UpO1xuICAgIH1cblxuICAgIGlmICh5aSA+IDApIHtcbiAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWkgLSAxLCB0cnVlKTtcbiAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWkgLSAxLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgaWYgKHlpID4gMCAmJiB4aSA+IDApIHtcbiAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSAtIDEsIHlpIC0gMSwgdHJ1ZSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgbWF4L21pbiBpbiBhIHJlY3RhbmdsZSBpbiB0aGUgbWF0cml4IGRhdGFcbiAgICogQHBhcmFtIHJlc3VsdCBBbiBhcnJheSB0byBzdG9yZSB0aGUgcmVzdWx0cyBpbi5cbiAgICogQHJldHVybiBUaGUgcmVzdWx0IGFycmF5LCBpZiBpdCB3YXMgcGFzc2VkIGluLiBNaW5pbXVtIHdpbGwgYmUgYXQgcG9zaXRpb24gMCBhbmQgbWF4IGF0IDEuXG4gICAqL1xuXG5cbiAgZ2V0UmVjdE1pbk1heChpTWluWCwgaU1pblksIGlNYXhYLCBpTWF4WSwgcmVzdWx0ID0gW10pIHtcbiAgICAvLyBHZXQgbWF4IGFuZCBtaW4gb2YgdGhlIGRhdGFcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOyAvLyBTZXQgZmlyc3QgdmFsdWVcblxuICAgIGxldCBtYXggPSB0aGlzLm1pblZhbHVlO1xuXG4gICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDw9IGlNYXhYOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8PSBpTWF4WTsgaisrKSB7XG4gICAgICAgIGNvbnN0IGhlaWdodCA9IGRhdGFbaV1bal07XG5cbiAgICAgICAgaWYgKGhlaWdodCA+IG1heCkge1xuICAgICAgICAgIG1heCA9IGhlaWdodDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJlc3VsdFswXSA9IHRoaXMubWluVmFsdWU7XG4gICAgcmVzdWx0WzFdID0gbWF4O1xuICB9XG4gIC8qKlxuICAgKiBHZXQgdGhlIGluZGV4IG9mIGEgbG9jYWwgcG9zaXRpb24gb24gdGhlIGhlaWdodGZpZWxkLiBUaGUgaW5kZXhlcyBpbmRpY2F0ZSB0aGUgcmVjdGFuZ2xlcywgc28gaWYgeW91ciB0ZXJyYWluIGlzIG1hZGUgb2YgTiB4IE4gaGVpZ2h0IGRhdGEgcG9pbnRzLCB5b3Ugd2lsbCBoYXZlIHJlY3RhbmdsZSBpbmRleGVzIHJhbmdpbmcgZnJvbSAwIHRvIE4tMS5cbiAgICogQHBhcmFtIHJlc3VsdCBUd28tZWxlbWVudCBhcnJheVxuICAgKiBAcGFyYW0gY2xhbXAgSWYgdGhlIHBvc2l0aW9uIHNob3VsZCBiZSBjbGFtcGVkIHRvIHRoZSBoZWlnaHRmaWVsZCBlZGdlLlxuICAgKi9cblxuXG4gIGdldEluZGV4T2ZQb3NpdGlvbih4LCB5LCByZXN1bHQsIGNsYW1wKSB7XG4gICAgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0XG4gICAgY29uc3QgdyA9IHRoaXMuZWxlbWVudFNpemU7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBsZXQgeGkgPSBNYXRoLmZsb29yKHggLyB3KTtcbiAgICBsZXQgeWkgPSBNYXRoLmZsb29yKHkgLyB3KTtcbiAgICByZXN1bHRbMF0gPSB4aTtcbiAgICByZXN1bHRbMV0gPSB5aTtcblxuICAgIGlmIChjbGFtcCkge1xuICAgICAgLy8gQ2xhbXAgaW5kZXggdG8gZWRnZXNcbiAgICAgIGlmICh4aSA8IDApIHtcbiAgICAgICAgeGkgPSAwO1xuICAgICAgfVxuXG4gICAgICBpZiAoeWkgPCAwKSB7XG4gICAgICAgIHlpID0gMDtcbiAgICAgIH1cblxuICAgICAgaWYgKHhpID49IGRhdGEubGVuZ3RoIC0gMSkge1xuICAgICAgICB4aSA9IGRhdGEubGVuZ3RoIC0gMTtcbiAgICAgIH1cblxuICAgICAgaWYgKHlpID49IGRhdGFbMF0ubGVuZ3RoIC0gMSkge1xuICAgICAgICB5aSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTtcbiAgICAgIH1cbiAgICB9IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW5cblxuXG4gICAgaWYgKHhpIDwgMCB8fCB5aSA8IDAgfHwgeGkgPj0gZGF0YS5sZW5ndGggLSAxIHx8IHlpID49IGRhdGFbMF0ubGVuZ3RoIC0gMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpIHtcbiAgICBjb25zdCBpZHggPSBnZXRIZWlnaHRBdF9pZHg7XG4gICAgdGhpcy5nZXRJbmRleE9mUG9zaXRpb24oeCwgeSwgaWR4LCBlZGdlQ2xhbXApO1xuICAgIGxldCB4aSA9IGlkeFswXTtcbiAgICBsZXQgeWkgPSBpZHhbMV07XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcblxuICAgIGlmIChlZGdlQ2xhbXApIHtcbiAgICAgIHhpID0gTWF0aC5taW4oZGF0YS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB4aSkpO1xuICAgICAgeWkgPSBNYXRoLm1pbihkYXRhWzBdLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHlpKSk7XG4gICAgfVxuXG4gICAgY29uc3QgZWxlbWVudFNpemUgPSB0aGlzLmVsZW1lbnRTaXplO1xuICAgIGNvbnN0IGxvd2VyRGlzdDIgPSAoeCAvIGVsZW1lbnRTaXplIC0geGkpICoqIDIgKyAoeSAvIGVsZW1lbnRTaXplIC0geWkpICoqIDI7XG4gICAgY29uc3QgdXBwZXJEaXN0MiA9ICh4IC8gZWxlbWVudFNpemUgLSAoeGkgKyAxKSkgKiogMiArICh5IC8gZWxlbWVudFNpemUgLSAoeWkgKyAxKSkgKiogMjtcbiAgICBjb25zdCB1cHBlciA9IGxvd2VyRGlzdDIgPiB1cHBlckRpc3QyO1xuICAgIHRoaXMuZ2V0VHJpYW5nbGUoeGksIHlpLCB1cHBlciwgYSwgYiwgYyk7XG4gICAgcmV0dXJuIHVwcGVyO1xuICB9XG5cbiAgZ2V0Tm9ybWFsQXQoeCwgeSwgZWRnZUNsYW1wLCByZXN1bHQpIHtcbiAgICBjb25zdCBhID0gZ2V0Tm9ybWFsQXRfYTtcbiAgICBjb25zdCBiID0gZ2V0Tm9ybWFsQXRfYjtcbiAgICBjb25zdCBjID0gZ2V0Tm9ybWFsQXRfYztcbiAgICBjb25zdCBlMCA9IGdldE5vcm1hbEF0X2UwO1xuICAgIGNvbnN0IGUxID0gZ2V0Tm9ybWFsQXRfZTE7XG4gICAgdGhpcy5nZXRUcmlhbmdsZUF0KHgsIHksIGVkZ2VDbGFtcCwgYSwgYiwgYyk7XG4gICAgYi52c3ViKGEsIGUwKTtcbiAgICBjLnZzdWIoYSwgZTEpO1xuICAgIGUwLmNyb3NzKGUxLCByZXN1bHQpO1xuICAgIHJlc3VsdC5ub3JtYWxpemUoKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGFuIEFBQkIgb2YgYSBzcXVhcmUgaW4gdGhlIGhlaWdodGZpZWxkXG4gICAqIEBwYXJhbSB4aVxuICAgKiBAcGFyYW0geWlcbiAgICogQHBhcmFtIHJlc3VsdFxuICAgKi9cblxuXG4gIGdldEFhYmJBdEluZGV4KHhpLCB5aSwge1xuICAgIGxvd2VyQm91bmQsXG4gICAgdXBwZXJCb3VuZFxuICB9KSB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7XG4gICAgbG93ZXJCb3VuZC5zZXQoeGkgKiBlbGVtZW50U2l6ZSwgeWkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWldKTtcbiAgICB1cHBlckJvdW5kLnNldCgoeGkgKyAxKSAqIGVsZW1lbnRTaXplLCAoeWkgKyAxKSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWkgKyAxXSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgaGVpZ2h0IGluIHRoZSBoZWlnaHRmaWVsZCBhdCBhIGdpdmVuIHBvc2l0aW9uXG4gICAqL1xuXG5cbiAgZ2V0SGVpZ2h0QXQoeCwgeSwgZWRnZUNsYW1wKSB7XG4gICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICBjb25zdCBhID0gZ2V0SGVpZ2h0QXRfYTtcbiAgICBjb25zdCBiID0gZ2V0SGVpZ2h0QXRfYjtcbiAgICBjb25zdCBjID0gZ2V0SGVpZ2h0QXRfYztcbiAgICBjb25zdCBpZHggPSBnZXRIZWlnaHRBdF9pZHg7XG4gICAgdGhpcy5nZXRJbmRleE9mUG9zaXRpb24oeCwgeSwgaWR4LCBlZGdlQ2xhbXApO1xuICAgIGxldCB4aSA9IGlkeFswXTtcbiAgICBsZXQgeWkgPSBpZHhbMV07XG5cbiAgICBpZiAoZWRnZUNsYW1wKSB7XG4gICAgICB4aSA9IE1hdGgubWluKGRhdGEubGVuZ3RoIC0gMiwgTWF0aC5tYXgoMCwgeGkpKTtcbiAgICAgIHlpID0gTWF0aC5taW4oZGF0YVswXS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB5aSkpO1xuICAgIH1cblxuICAgIGNvbnN0IHVwcGVyID0gdGhpcy5nZXRUcmlhbmdsZUF0KHgsIHksIGVkZ2VDbGFtcCwgYSwgYiwgYyk7XG4gICAgYmFyeWNlbnRyaWNXZWlnaHRzKHgsIHksIGEueCwgYS55LCBiLngsIGIueSwgYy54LCBjLnksIGdldEhlaWdodEF0X3dlaWdodHMpO1xuICAgIGNvbnN0IHcgPSBnZXRIZWlnaHRBdF93ZWlnaHRzO1xuXG4gICAgaWYgKHVwcGVyKSB7XG4gICAgICAvLyBUb3AgdHJpYW5nbGUgdmVydHNcbiAgICAgIHJldHVybiBkYXRhW3hpICsgMV1beWkgKyAxXSAqIHcueCArIGRhdGFbeGldW3lpICsgMV0gKiB3LnkgKyBkYXRhW3hpICsgMV1beWldICogdy56O1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUb3AgdHJpYW5nbGUgdmVydHNcbiAgICAgIHJldHVybiBkYXRhW3hpXVt5aV0gKiB3LnggKyBkYXRhW3hpICsgMV1beWldICogdy55ICsgZGF0YVt4aV1beWkgKyAxXSAqIHcuejtcbiAgICB9XG4gIH1cblxuICBnZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5KHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkge1xuICAgIHJldHVybiB4aSArIFwiX1wiICsgeWkgKyBcIl9cIiArIChnZXRVcHBlclRyaWFuZ2xlID8gMSA6IDApO1xuICB9XG5cbiAgZ2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhY2hlZFBpbGxhcnNbdGhpcy5nZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5KHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSldO1xuICB9XG5cbiAgc2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlLCBjb252ZXgsIG9mZnNldCkge1xuICAgIHRoaXMuX2NhY2hlZFBpbGxhcnNbdGhpcy5nZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5KHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSldID0ge1xuICAgICAgY29udmV4LFxuICAgICAgb2Zmc2V0XG4gICAgfTtcbiAgfVxuXG4gIGNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKSB7XG4gICAgZGVsZXRlIHRoaXMuX2NhY2hlZFBpbGxhcnNbdGhpcy5nZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5KHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSldO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgYSB0cmlhbmdsZSBmcm9tIHRoZSBoZWlnaHRmaWVsZFxuICAgKi9cblxuXG4gIGdldFRyaWFuZ2xlKHhpLCB5aSwgdXBwZXIsIGEsIGIsIGMpIHtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTtcblxuICAgIGlmICh1cHBlcikge1xuICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzXG4gICAgICBhLnNldCgoeGkgKyAxKSAqIGVsZW1lbnRTaXplLCAoeWkgKyAxKSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWkgKyAxXSk7XG4gICAgICBiLnNldCh4aSAqIGVsZW1lbnRTaXplLCAoeWkgKyAxKSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aSArIDFdKTtcbiAgICAgIGMuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aV0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUb3AgdHJpYW5nbGUgdmVydHNcbiAgICAgIGEuc2V0KHhpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSk7XG4gICAgICBiLnNldCgoeGkgKyAxKSAqIGVsZW1lbnRTaXplLCB5aSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldKTtcbiAgICAgIGMuc2V0KHhpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogR2V0IGEgdHJpYW5nbGUgaW4gdGhlIHRlcnJhaW4gaW4gdGhlIGZvcm0gb2YgYSB0cmlhbmd1bGFyIGNvbnZleCBzaGFwZS5cbiAgICovXG5cblxuICBnZXRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHtcbiAgICBsZXQgcmVzdWx0ID0gdGhpcy5waWxsYXJDb252ZXg7XG4gICAgbGV0IG9mZnNldFJlc3VsdCA9IHRoaXMucGlsbGFyT2Zmc2V0O1xuXG4gICAgaWYgKHRoaXMuY2FjaGVFbmFibGVkKSB7XG4gICAgICBjb25zdCBkYXRhID0gdGhpcy5nZXRDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpO1xuXG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICB0aGlzLnBpbGxhckNvbnZleCA9IGRhdGEuY29udmV4O1xuICAgICAgICB0aGlzLnBpbGxhck9mZnNldCA9IGRhdGEub2Zmc2V0O1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHJlc3VsdCA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKCk7XG4gICAgICBvZmZzZXRSZXN1bHQgPSBuZXcgVmVjMygpO1xuICAgICAgdGhpcy5waWxsYXJDb252ZXggPSByZXN1bHQ7XG4gICAgICB0aGlzLnBpbGxhck9mZnNldCA9IG9mZnNldFJlc3VsdDtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTtcbiAgICBjb25zdCBmYWNlcyA9IHJlc3VsdC5mYWNlczsgLy8gUmV1c2UgdmVydHMgaWYgcG9zc2libGVcblxuICAgIHJlc3VsdC52ZXJ0aWNlcy5sZW5ndGggPSA2O1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspIHtcbiAgICAgIGlmICghcmVzdWx0LnZlcnRpY2VzW2ldKSB7XG4gICAgICAgIHJlc3VsdC52ZXJ0aWNlc1tpXSA9IG5ldyBWZWMzKCk7XG4gICAgICB9XG4gICAgfSAvLyBSZXVzZSBmYWNlcyBpZiBwb3NzaWJsZVxuXG5cbiAgICBmYWNlcy5sZW5ndGggPSA1O1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgIGlmICghZmFjZXNbaV0pIHtcbiAgICAgICAgZmFjZXNbaV0gPSBbXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB2ZXJ0cyA9IHJlc3VsdC52ZXJ0aWNlcztcbiAgICBjb25zdCBoID0gKE1hdGgubWluKGRhdGFbeGldW3lpXSwgZGF0YVt4aSArIDFdW3lpXSwgZGF0YVt4aV1beWkgKyAxXSwgZGF0YVt4aSArIDFdW3lpICsgMV0pIC0gdGhpcy5taW5WYWx1ZSkgLyAyICsgdGhpcy5taW5WYWx1ZTtcblxuICAgIGlmICghZ2V0VXBwZXJUcmlhbmdsZSkge1xuICAgICAgLy8gQ2VudGVyIG9mIHRoZSB0cmlhbmdsZSBwaWxsYXIgLSBhbGwgcG9seWdvbnMgYXJlIGdpdmVuIHJlbGF0aXZlIHRvIHRoaXMgb25lXG4gICAgICBvZmZzZXRSZXN1bHQuc2V0KCh4aSArIDAuMjUpICogZWxlbWVudFNpemUsIC8vIHNvcnQgb2YgY2VudGVyIG9mIGEgdHJpYW5nbGVcbiAgICAgICh5aSArIDAuMjUpICogZWxlbWVudFNpemUsIGggLy8gdmVydGljYWwgY2VudGVyXG4gICAgICApOyAvLyBUb3AgdHJpYW5nbGUgdmVydHNcblxuICAgICAgdmVydHNbMF0uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSAtIGgpO1xuICAgICAgdmVydHNbMV0uc2V0KDAuNzUgKiBlbGVtZW50U2l6ZSwgLTAuMjUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpXSAtIGgpO1xuICAgICAgdmVydHNbMl0uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIDAuNzUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWkgKyAxXSAtIGgpOyAvLyBib3R0b20gdHJpYW5nbGUgdmVydHNcblxuICAgICAgdmVydHNbM10uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpO1xuICAgICAgdmVydHNbNF0uc2V0KDAuNzUgKiBlbGVtZW50U2l6ZSwgLTAuMjUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7XG4gICAgICB2ZXJ0c1s1XS5zZXQoLTAuMjUgKiBlbGVtZW50U2l6ZSwgMC43NSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTsgLy8gdG9wIHRyaWFuZ2xlXG5cbiAgICAgIGZhY2VzWzBdWzBdID0gMDtcbiAgICAgIGZhY2VzWzBdWzFdID0gMTtcbiAgICAgIGZhY2VzWzBdWzJdID0gMjsgLy8gYm90dG9tIHRyaWFuZ2xlXG5cbiAgICAgIGZhY2VzWzFdWzBdID0gNTtcbiAgICAgIGZhY2VzWzFdWzFdID0gNDtcbiAgICAgIGZhY2VzWzFdWzJdID0gMzsgLy8gLXggZmFjaW5nIHF1YWRcblxuICAgICAgZmFjZXNbMl1bMF0gPSAwO1xuICAgICAgZmFjZXNbMl1bMV0gPSAyO1xuICAgICAgZmFjZXNbMl1bMl0gPSA1O1xuICAgICAgZmFjZXNbMl1bM10gPSAzOyAvLyAteSBmYWNpbmcgcXVhZFxuXG4gICAgICBmYWNlc1szXVswXSA9IDE7XG4gICAgICBmYWNlc1szXVsxXSA9IDA7XG4gICAgICBmYWNlc1szXVsyXSA9IDM7XG4gICAgICBmYWNlc1szXVszXSA9IDQ7IC8vICt4eSBmYWNpbmcgcXVhZFxuXG4gICAgICBmYWNlc1s0XVswXSA9IDQ7XG4gICAgICBmYWNlc1s0XVsxXSA9IDU7XG4gICAgICBmYWNlc1s0XVsyXSA9IDI7XG4gICAgICBmYWNlc1s0XVszXSA9IDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIENlbnRlciBvZiB0aGUgdHJpYW5nbGUgcGlsbGFyIC0gYWxsIHBvbHlnb25zIGFyZSBnaXZlbiByZWxhdGl2ZSB0byB0aGlzIG9uZVxuICAgICAgb2Zmc2V0UmVzdWx0LnNldCgoeGkgKyAwLjc1KSAqIGVsZW1lbnRTaXplLCAvLyBzb3J0IG9mIGNlbnRlciBvZiBhIHRyaWFuZ2xlXG4gICAgICAoeWkgKyAwLjc1KSAqIGVsZW1lbnRTaXplLCBoIC8vIHZlcnRpY2FsIGNlbnRlclxuICAgICAgKTsgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzXG5cbiAgICAgIHZlcnRzWzBdLnNldCgwLjI1ICogZWxlbWVudFNpemUsIDAuMjUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpICsgMV0gLSBoKTtcbiAgICAgIHZlcnRzWzFdLnNldCgtMC43NSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0gLSBoKTtcbiAgICAgIHZlcnRzWzJdLnNldCgwLjI1ICogZWxlbWVudFNpemUsIC0wLjc1ICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aV0gLSBoKTsgLy8gYm90dG9tIHRyaWFuZ2xlIHZlcnRzXG5cbiAgICAgIHZlcnRzWzNdLnNldCgwLjI1ICogZWxlbWVudFNpemUsIDAuMjUgKiBlbGVtZW50U2l6ZSwgLU1hdGguYWJzKGgpIC0gMSk7XG4gICAgICB2ZXJ0c1s0XS5zZXQoLTAuNzUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCAtTWF0aC5hYnMoaCkgLSAxKTtcbiAgICAgIHZlcnRzWzVdLnNldCgwLjI1ICogZWxlbWVudFNpemUsIC0wLjc1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOyAvLyBUb3AgdHJpYW5nbGVcblxuICAgICAgZmFjZXNbMF1bMF0gPSAwO1xuICAgICAgZmFjZXNbMF1bMV0gPSAxO1xuICAgICAgZmFjZXNbMF1bMl0gPSAyOyAvLyBib3R0b20gdHJpYW5nbGVcblxuICAgICAgZmFjZXNbMV1bMF0gPSA1O1xuICAgICAgZmFjZXNbMV1bMV0gPSA0O1xuICAgICAgZmFjZXNbMV1bMl0gPSAzOyAvLyAreCBmYWNpbmcgcXVhZFxuXG4gICAgICBmYWNlc1syXVswXSA9IDI7XG4gICAgICBmYWNlc1syXVsxXSA9IDU7XG4gICAgICBmYWNlc1syXVsyXSA9IDM7XG4gICAgICBmYWNlc1syXVszXSA9IDA7IC8vICt5IGZhY2luZyBxdWFkXG5cbiAgICAgIGZhY2VzWzNdWzBdID0gMztcbiAgICAgIGZhY2VzWzNdWzFdID0gNDtcbiAgICAgIGZhY2VzWzNdWzJdID0gMTtcbiAgICAgIGZhY2VzWzNdWzNdID0gMDsgLy8gLXh5IGZhY2luZyBxdWFkXG5cbiAgICAgIGZhY2VzWzRdWzBdID0gMTtcbiAgICAgIGZhY2VzWzRdWzFdID0gNDtcbiAgICAgIGZhY2VzWzRdWzJdID0gNTtcbiAgICAgIGZhY2VzWzRdWzNdID0gMjtcbiAgICB9XG5cbiAgICByZXN1bHQuY29tcHV0ZU5vcm1hbHMoKTtcbiAgICByZXN1bHQuY29tcHV0ZUVkZ2VzKCk7XG4gICAgcmVzdWx0LnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7XG4gICAgdGhpcy5zZXRDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUsIHJlc3VsdCwgb2Zmc2V0UmVzdWx0KTtcbiAgfVxuXG4gIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQgPSBuZXcgVmVjMygpKSB7XG4gICAgdGFyZ2V0LnNldCgwLCAwLCAwKTtcbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9XG5cbiAgdm9sdW1lKCkge1xuICAgIHJldHVybiAoLy8gVGhlIHRlcnJhaW4gaXMgaW5maW5pdGVcbiAgICAgIE51bWJlci5NQVhfVkFMVUVcbiAgICApO1xuICB9XG5cbiAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHtcbiAgICAvKiogQFRPRE8gZG8gaXQgcHJvcGVybHkgKi9cbiAgICBtaW4uc2V0KC1OdW1iZXIuTUFYX1ZBTFVFLCAtTnVtYmVyLk1BWF9WQUxVRSwgLU51bWJlci5NQVhfVkFMVUUpO1xuICAgIG1heC5zZXQoTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRSk7XG4gIH1cblxuICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHtcbiAgICAvLyBVc2UgdGhlIGJvdW5kaW5nIGJveCBvZiB0aGUgbWluL21heCB2YWx1ZXNcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGNvbnN0IHMgPSB0aGlzLmVsZW1lbnRTaXplO1xuICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBuZXcgVmVjMyhkYXRhLmxlbmd0aCAqIHMsIGRhdGFbMF0ubGVuZ3RoICogcywgTWF0aC5tYXgoTWF0aC5hYnModGhpcy5tYXhWYWx1ZSksIE1hdGguYWJzKHRoaXMubWluVmFsdWUpKSkubGVuZ3RoKCk7XG4gIH1cbiAgLyoqXG4gICAqIFNldHMgdGhlIGhlaWdodCB2YWx1ZXMgZnJvbSBhbiBpbWFnZS4gQ3VycmVudGx5IG9ubHkgc3VwcG9ydGVkIGluIGJyb3dzZXIuXG4gICAqL1xuXG5cbiAgc2V0SGVpZ2h0c0Zyb21JbWFnZShpbWFnZSwgc2NhbGUpIHtcbiAgICBjb25zdCB7XG4gICAgICB4LFxuICAgICAgeixcbiAgICAgIHlcbiAgICB9ID0gc2NhbGU7XG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgY2FudmFzLndpZHRoID0gaW1hZ2Uud2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IGltYWdlLmhlaWdodDtcbiAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDApO1xuICAgIGNvbnN0IGltYWdlRGF0YSA9IGNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIGltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHQpO1xuICAgIGNvbnN0IG1hdHJpeCA9IHRoaXMuZGF0YTtcbiAgICBtYXRyaXgubGVuZ3RoID0gMDtcbiAgICB0aGlzLmVsZW1lbnRTaXplID0gTWF0aC5hYnMoeCkgLyBpbWFnZURhdGEud2lkdGg7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGltYWdlRGF0YS5oZWlnaHQ7IGkrKykge1xuICAgICAgY29uc3Qgcm93ID0gW107XG5cbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaW1hZ2VEYXRhLndpZHRoOyBqKyspIHtcbiAgICAgICAgY29uc3QgYSA9IGltYWdlRGF0YS5kYXRhWyhpICogaW1hZ2VEYXRhLmhlaWdodCArIGopICogNF07XG4gICAgICAgIGNvbnN0IGIgPSBpbWFnZURhdGEuZGF0YVsoaSAqIGltYWdlRGF0YS5oZWlnaHQgKyBqKSAqIDQgKyAxXTtcbiAgICAgICAgY29uc3QgYyA9IGltYWdlRGF0YS5kYXRhWyhpICogaW1hZ2VEYXRhLmhlaWdodCArIGopICogNCArIDJdO1xuICAgICAgICBjb25zdCBoZWlnaHQgPSAoYSArIGIgKyBjKSAvIDQgLyAyNTUgKiB6O1xuXG4gICAgICAgIGlmICh4IDwgMCkge1xuICAgICAgICAgIHJvdy5wdXNoKGhlaWdodCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcm93LnVuc2hpZnQoaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoeSA8IDApIHtcbiAgICAgICAgbWF0cml4LnVuc2hpZnQocm93KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1hdHJpeC5wdXNoKHJvdyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVNYXhWYWx1ZSgpO1xuICAgIHRoaXMudXBkYXRlTWluVmFsdWUoKTtcbiAgICB0aGlzLnVwZGF0ZSgpO1xuICB9XG5cbn1cbmNvbnN0IGdldEhlaWdodEF0X2lkeCA9IFtdO1xuY29uc3QgZ2V0SGVpZ2h0QXRfd2VpZ2h0cyA9IG5ldyBWZWMzKCk7XG5jb25zdCBnZXRIZWlnaHRBdF9hID0gbmV3IFZlYzMoKTtcbmNvbnN0IGdldEhlaWdodEF0X2IgPSBuZXcgVmVjMygpO1xuY29uc3QgZ2V0SGVpZ2h0QXRfYyA9IG5ldyBWZWMzKCk7XG5jb25zdCBnZXROb3JtYWxBdF9hID0gbmV3IFZlYzMoKTtcbmNvbnN0IGdldE5vcm1hbEF0X2IgPSBuZXcgVmVjMygpO1xuY29uc3QgZ2V0Tm9ybWFsQXRfYyA9IG5ldyBWZWMzKCk7XG5jb25zdCBnZXROb3JtYWxBdF9lMCA9IG5ldyBWZWMzKCk7XG5jb25zdCBnZXROb3JtYWxBdF9lMSA9IG5ldyBWZWMzKCk7IC8vIGZyb20gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQmFyeWNlbnRyaWNfY29vcmRpbmF0ZV9zeXN0ZW1cblxuZnVuY3Rpb24gYmFyeWNlbnRyaWNXZWlnaHRzKHgsIHksIGF4LCBheSwgYngsIGJ5LCBjeCwgY3ksIHJlc3VsdCkge1xuICByZXN1bHQueCA9ICgoYnkgLSBjeSkgKiAoeCAtIGN4KSArIChjeCAtIGJ4KSAqICh5IC0gY3kpKSAvICgoYnkgLSBjeSkgKiAoYXggLSBjeCkgKyAoY3ggLSBieCkgKiAoYXkgLSBjeSkpO1xuICByZXN1bHQueSA9ICgoY3kgLSBheSkgKiAoeCAtIGN4KSArIChheCAtIGN4KSAqICh5IC0gY3kpKSAvICgoYnkgLSBjeSkgKiAoYXggLSBjeCkgKyAoY3ggLSBieCkgKiAoYXkgLSBjeSkpO1xuICByZXN1bHQueiA9IDEgLSByZXN1bHQueCAtIHJlc3VsdC55O1xufVxuXG4vKipcbiAqIE9jdHJlZU5vZGVcbiAqL1xuY2xhc3MgT2N0cmVlTm9kZSB7XG4gIC8qKiBUaGUgcm9vdCBub2RlICovXG5cbiAgLyoqIEJvdW5kYXJ5IG9mIHRoaXMgbm9kZSAqL1xuXG4gIC8qKiBDb250YWluZWQgZGF0YSBhdCB0aGUgY3VycmVudCBub2RlIGxldmVsICovXG5cbiAgLyoqIENoaWxkcmVuIHRvIHRoaXMgbm9kZSAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLnJvb3QgPSB2b2lkIDA7XG4gICAgdGhpcy5hYWJiID0gdm9pZCAwO1xuICAgIHRoaXMuZGF0YSA9IHZvaWQgMDtcbiAgICB0aGlzLmNoaWxkcmVuID0gdm9pZCAwO1xuICAgIHRoaXMucm9vdCA9IG9wdGlvbnMucm9vdCB8fCBudWxsO1xuICAgIHRoaXMuYWFiYiA9IG9wdGlvbnMuYWFiYiA/IG9wdGlvbnMuYWFiYi5jbG9uZSgpIDogbmV3IEFBQkIoKTtcbiAgICB0aGlzLmRhdGEgPSBbXTtcbiAgICB0aGlzLmNoaWxkcmVuID0gW107XG4gIH1cbiAgLyoqXG4gICAqIHJlc2V0XG4gICAqL1xuXG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5jaGlsZHJlbi5sZW5ndGggPSB0aGlzLmRhdGEubGVuZ3RoID0gMDtcbiAgfVxuICAvKipcbiAgICogSW5zZXJ0IGRhdGEgaW50byB0aGlzIG5vZGVcbiAgICogQHJldHVybiBUcnVlIGlmIHN1Y2Nlc3NmdWwsIG90aGVyd2lzZSBmYWxzZVxuICAgKi9cblxuXG4gIGluc2VydChhYWJiLCBlbGVtZW50RGF0YSwgbGV2ZWwgPSAwKSB7XG4gICAgY29uc3Qgbm9kZURhdGEgPSB0aGlzLmRhdGE7IC8vIElnbm9yZSBvYmplY3RzIHRoYXQgZG8gbm90IGJlbG9uZyBpbiB0aGlzIG5vZGVcblxuICAgIGlmICghdGhpcy5hYWJiLmNvbnRhaW5zKGFhYmIpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIG9iamVjdCBjYW5ub3QgYmUgYWRkZWRcbiAgICB9XG5cbiAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuY2hpbGRyZW47XG4gICAgY29uc3QgbWF4RGVwdGggPSB0aGlzLm1heERlcHRoIHx8IHRoaXMucm9vdC5tYXhEZXB0aDtcblxuICAgIGlmIChsZXZlbCA8IG1heERlcHRoKSB7XG4gICAgICAvLyBTdWJkaXZpZGUgaWYgdGhlcmUgYXJlIG5vIGNoaWxkcmVuIHlldFxuICAgICAgbGV0IHN1YmRpdmlkZWQgPSBmYWxzZTtcblxuICAgICAgaWYgKCFjaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5zdWJkaXZpZGUoKTtcbiAgICAgICAgc3ViZGl2aWRlZCA9IHRydWU7XG4gICAgICB9IC8vIGFkZCB0byB3aGljaGV2ZXIgbm9kZSB3aWxsIGFjY2VwdCBpdFxuXG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHtcbiAgICAgICAgaWYgKGNoaWxkcmVuW2ldLmluc2VydChhYWJiLCBlbGVtZW50RGF0YSwgbGV2ZWwgKyAxKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChzdWJkaXZpZGVkKSB7XG4gICAgICAgIC8vIE5vIGNoaWxkcmVuIGFjY2VwdGVkISBNaWdodCBhcyB3ZWxsIGp1c3QgcmVtb3ZlIGVtIHNpbmNlIHRoZXkgY29udGFpbiBub25lXG4gICAgICAgIGNoaWxkcmVuLmxlbmd0aCA9IDA7XG4gICAgICB9XG4gICAgfSAvLyBUb28gZGVlcCwgb3IgY2hpbGRyZW4gZGlkbnQgd2FudCBpdC4gYWRkIGl0IGluIGN1cnJlbnQgbm9kZVxuXG5cbiAgICBub2RlRGF0YS5wdXNoKGVsZW1lbnREYXRhKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIDggZXF1YWxseSBzaXplZCBjaGlsZHJlbiBub2RlcyBhbmQgcHV0IHRoZW0gaW4gdGhlIGBjaGlsZHJlbmAgYXJyYXkuXG4gICAqL1xuXG5cbiAgc3ViZGl2aWRlKCkge1xuICAgIGNvbnN0IGFhYmIgPSB0aGlzLmFhYmI7XG4gICAgY29uc3QgbCA9IGFhYmIubG93ZXJCb3VuZDtcbiAgICBjb25zdCB1ID0gYWFiYi51cHBlckJvdW5kO1xuICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbjtcbiAgICBjaGlsZHJlbi5wdXNoKG5ldyBPY3RyZWVOb2RlKHtcbiAgICAgIGFhYmI6IG5ldyBBQUJCKHtcbiAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMCwgMCwgMClcbiAgICAgIH0pXG4gICAgfSksIG5ldyBPY3RyZWVOb2RlKHtcbiAgICAgIGFhYmI6IG5ldyBBQUJCKHtcbiAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMCwgMClcbiAgICAgIH0pXG4gICAgfSksIG5ldyBPY3RyZWVOb2RlKHtcbiAgICAgIGFhYmI6IG5ldyBBQUJCKHtcbiAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMSwgMClcbiAgICAgIH0pXG4gICAgfSksIG5ldyBPY3RyZWVOb2RlKHtcbiAgICAgIGFhYmI6IG5ldyBBQUJCKHtcbiAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMSwgMSlcbiAgICAgIH0pXG4gICAgfSksIG5ldyBPY3RyZWVOb2RlKHtcbiAgICAgIGFhYmI6IG5ldyBBQUJCKHtcbiAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMCwgMSwgMSlcbiAgICAgIH0pXG4gICAgfSksIG5ldyBPY3RyZWVOb2RlKHtcbiAgICAgIGFhYmI6IG5ldyBBQUJCKHtcbiAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMCwgMCwgMSlcbiAgICAgIH0pXG4gICAgfSksIG5ldyBPY3RyZWVOb2RlKHtcbiAgICAgIGFhYmI6IG5ldyBBQUJCKHtcbiAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMCwgMSlcbiAgICAgIH0pXG4gICAgfSksIG5ldyBPY3RyZWVOb2RlKHtcbiAgICAgIGFhYmI6IG5ldyBBQUJCKHtcbiAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMCwgMSwgMClcbiAgICAgIH0pXG4gICAgfSkpO1xuICAgIHUudnN1YihsLCBoYWxmRGlhZ29uYWwpO1xuICAgIGhhbGZEaWFnb25hbC5zY2FsZSgwLjUsIGhhbGZEaWFnb25hbCk7XG4gICAgY29uc3Qgcm9vdCA9IHRoaXMucm9vdCB8fCB0aGlzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykge1xuICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTsgLy8gU2V0IGN1cnJlbnQgbm9kZSBhcyByb290XG5cbiAgICAgIGNoaWxkLnJvb3QgPSByb290OyAvLyBDb21wdXRlIGJvdW5kc1xuXG4gICAgICBjb25zdCBsb3dlckJvdW5kID0gY2hpbGQuYWFiYi5sb3dlckJvdW5kO1xuICAgICAgbG93ZXJCb3VuZC54ICo9IGhhbGZEaWFnb25hbC54O1xuICAgICAgbG93ZXJCb3VuZC55ICo9IGhhbGZEaWFnb25hbC55O1xuICAgICAgbG93ZXJCb3VuZC56ICo9IGhhbGZEaWFnb25hbC56O1xuICAgICAgbG93ZXJCb3VuZC52YWRkKGwsIGxvd2VyQm91bmQpOyAvLyBVcHBlciBib3VuZCBpcyBhbHdheXMgbG93ZXIgYm91bmQgKyBoYWxmRGlhZ29uYWxcblxuICAgICAgbG93ZXJCb3VuZC52YWRkKGhhbGZEaWFnb25hbCwgY2hpbGQuYWFiYi51cHBlckJvdW5kKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgd2l0aGluIGFuIEFBQkJcbiAgICogQHJldHVybiBUaGUgXCJyZXN1bHRcIiBvYmplY3RcbiAgICovXG5cblxuICBhYWJiUXVlcnkoYWFiYiwgcmVzdWx0KSB7XG4gICAgdGhpcy5kYXRhOyAvLyBhYm9ydCBpZiB0aGUgcmFuZ2UgZG9lcyBub3QgaW50ZXJzZWN0IHRoaXMgbm9kZVxuICAgIC8vIGlmICghdGhpcy5hYWJiLm92ZXJsYXBzKGFhYmIpKXtcbiAgICAvLyAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAvLyB9XG4gICAgLy8gQWRkIG9iamVjdHMgYXQgdGhpcyBsZXZlbFxuICAgIC8vIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHJlc3VsdCwgbm9kZURhdGEpO1xuICAgIC8vIEFkZCBjaGlsZCBkYXRhXG4gICAgLy8gQHRvZG8gdW53cmFwIHJlY3Vyc2lvbiBpbnRvIGEgcXVldWUgLyBsb29wLCB0aGF0J3MgZmFzdGVyIGluIEpTXG5cbiAgICB0aGlzLmNoaWxkcmVuOyAvLyBmb3IgKGxldCBpID0gMCwgTiA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpICE9PSBOOyBpKyspIHtcbiAgICAvLyAgICAgY2hpbGRyZW5baV0uYWFiYlF1ZXJ5KGFhYmIsIHJlc3VsdCk7XG4gICAgLy8gfVxuXG4gICAgY29uc3QgcXVldWUgPSBbdGhpc107XG5cbiAgICB3aGlsZSAocXVldWUubGVuZ3RoKSB7XG4gICAgICBjb25zdCBub2RlID0gcXVldWUucG9wKCk7XG5cbiAgICAgIGlmIChub2RlLmFhYmIub3ZlcmxhcHMoYWFiYikpIHtcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocmVzdWx0LCBub2RlLmRhdGEpO1xuICAgICAgfVxuXG4gICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShxdWV1ZSwgbm9kZS5jaGlsZHJlbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogR2V0IGFsbCBkYXRhLCBwb3RlbnRpYWxseSBpbnRlcnNlY3RlZCBieSBhIHJheS5cbiAgICogQHJldHVybiBUaGUgXCJyZXN1bHRcIiBvYmplY3RcbiAgICovXG5cblxuICByYXlRdWVyeShyYXksIHRyZWVUcmFuc2Zvcm0sIHJlc3VsdCkge1xuICAgIC8vIFVzZSBhYWJiIHF1ZXJ5IGZvciBub3cuXG5cbiAgICAvKiogQHRvZG8gaW1wbGVtZW50IHJlYWwgcmF5IHF1ZXJ5IHdoaWNoIG5lZWRzIGxlc3MgbG9va3VwcyAqL1xuICAgIHJheS5nZXRBQUJCKHRtcEFBQkIpO1xuICAgIHRtcEFBQkIudG9Mb2NhbEZyYW1lKHRyZWVUcmFuc2Zvcm0sIHRtcEFBQkIpO1xuICAgIHRoaXMuYWFiYlF1ZXJ5KHRtcEFBQkIsIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICAvKipcbiAgICogcmVtb3ZlRW1wdHlOb2Rlc1xuICAgKi9cblxuXG4gIHJlbW92ZUVtcHR5Tm9kZXMoKSB7XG4gICAgZm9yIChsZXQgaSA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHRoaXMuY2hpbGRyZW5baV0ucmVtb3ZlRW1wdHlOb2RlcygpO1xuXG4gICAgICBpZiAoIXRoaXMuY2hpbGRyZW5baV0uY2hpbGRyZW4ubGVuZ3RoICYmICF0aGlzLmNoaWxkcmVuW2ldLmRhdGEubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4uc3BsaWNlKGksIDEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG59XG4vKipcbiAqIE9jdHJlZVxuICovXG5cblxuY2xhc3MgT2N0cmVlIGV4dGVuZHMgT2N0cmVlTm9kZSB7XG4gIC8qKlxuICAgKiBNYXhpbXVtIHN1YmRpdmlzaW9uIGRlcHRoXG4gICAqIEBkZWZhdWx0IDhcbiAgICovXG5cbiAgLyoqXG4gICAqIEBwYXJhbSBhYWJiIFRoZSB0b3RhbCBBQUJCIG9mIHRoZSB0cmVlXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhYWJiLCBvcHRpb25zID0ge30pIHtcbiAgICBzdXBlcih7XG4gICAgICByb290OiBudWxsLFxuICAgICAgYWFiYlxuICAgIH0pO1xuICAgIHRoaXMubWF4RGVwdGggPSB2b2lkIDA7XG4gICAgdGhpcy5tYXhEZXB0aCA9IHR5cGVvZiBvcHRpb25zLm1heERlcHRoICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4RGVwdGggOiA4O1xuICB9XG5cbn1cbmNvbnN0IGhhbGZEaWFnb25hbCA9IG5ldyBWZWMzKCk7XG5jb25zdCB0bXBBQUJCID0gbmV3IEFBQkIoKTtcblxuLyoqXG4gKiBUcmltZXNoLlxuICogQGV4YW1wbGVcbiAqICAgICAvLyBIb3cgdG8gbWFrZSBhIG1lc2ggd2l0aCBhIHNpbmdsZSB0cmlhbmdsZVxuICogICAgIGNvbnN0IHZlcnRpY2VzID0gW1xuICogICAgICAgICAwLCAwLCAwLCAvLyB2ZXJ0ZXggMFxuICogICAgICAgICAxLCAwLCAwLCAvLyB2ZXJ0ZXggMVxuICogICAgICAgICAwLCAxLCAwICAvLyB2ZXJ0ZXggMlxuICogICAgIF1cbiAqICAgICBjb25zdCBpbmRpY2VzID0gW1xuICogICAgICAgICAwLCAxLCAyICAvLyB0cmlhbmdsZSAwXG4gKiAgICAgXVxuICogICAgIGNvbnN0IHRyaW1lc2hTaGFwZSA9IG5ldyBDQU5OT04uVHJpbWVzaCh2ZXJ0aWNlcywgaW5kaWNlcylcbiAqL1xuY2xhc3MgVHJpbWVzaCBleHRlbmRzIFNoYXBlIHtcbiAgLyoqXG4gICAqIHZlcnRpY2VzXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBcnJheSBvZiBpbnRlZ2VycywgaW5kaWNhdGluZyB3aGljaCB2ZXJ0aWNlcyBlYWNoIHRyaWFuZ2xlIGNvbnNpc3RzIG9mLiBUaGUgbGVuZ3RoIG9mIHRoaXMgYXJyYXkgaXMgdGh1cyAzIHRpbWVzIHRoZSBudW1iZXIgb2YgdHJpYW5nbGVzLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIG5vcm1hbHMgZGF0YS5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBsb2NhbCBBQUJCIG9mIHRoZSBtZXNoLlxuICAgKi9cblxuICAvKipcbiAgICogUmVmZXJlbmNlcyB0byB2ZXJ0ZXggcGFpcnMsIG1ha2luZyB1cCBhbGwgdW5pcXVlIGVkZ2VzIGluIHRoZSB0cmltZXNoLlxuICAgKi9cblxuICAvKipcbiAgICogTG9jYWwgc2NhbGluZyBvZiB0aGUgbWVzaC4gVXNlIC5zZXRTY2FsZSgpIHRvIHNldCBpdC5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBpbmRleGVkIHRyaWFuZ2xlcy4gVXNlIC51cGRhdGVUcmVlKCkgdG8gdXBkYXRlIGl0LlxuICAgKi9cbiAgY29uc3RydWN0b3IodmVydGljZXMsIGluZGljZXMpIHtcbiAgICBzdXBlcih7XG4gICAgICB0eXBlOiBTaGFwZS50eXBlcy5UUklNRVNIXG4gICAgfSk7XG4gICAgdGhpcy52ZXJ0aWNlcyA9IHZvaWQgMDtcbiAgICB0aGlzLmluZGljZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5ub3JtYWxzID0gdm9pZCAwO1xuICAgIHRoaXMuYWFiYiA9IHZvaWQgMDtcbiAgICB0aGlzLmVkZ2VzID0gdm9pZCAwO1xuICAgIHRoaXMuc2NhbGUgPSB2b2lkIDA7XG4gICAgdGhpcy50cmVlID0gdm9pZCAwO1xuICAgIHRoaXMudmVydGljZXMgPSBuZXcgRmxvYXQzMkFycmF5KHZlcnRpY2VzKTtcbiAgICB0aGlzLmluZGljZXMgPSBuZXcgSW50MTZBcnJheShpbmRpY2VzKTtcbiAgICB0aGlzLm5vcm1hbHMgPSBuZXcgRmxvYXQzMkFycmF5KGluZGljZXMubGVuZ3RoKTtcbiAgICB0aGlzLmFhYmIgPSBuZXcgQUFCQigpO1xuICAgIHRoaXMuZWRnZXMgPSBudWxsO1xuICAgIHRoaXMuc2NhbGUgPSBuZXcgVmVjMygxLCAxLCAxKTtcbiAgICB0aGlzLnRyZWUgPSBuZXcgT2N0cmVlKCk7XG4gICAgdGhpcy51cGRhdGVFZGdlcygpO1xuICAgIHRoaXMudXBkYXRlTm9ybWFscygpO1xuICAgIHRoaXMudXBkYXRlQUFCQigpO1xuICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTtcbiAgICB0aGlzLnVwZGF0ZVRyZWUoKTtcbiAgfVxuICAvKipcbiAgICogdXBkYXRlVHJlZVxuICAgKi9cblxuXG4gIHVwZGF0ZVRyZWUoKSB7XG4gICAgY29uc3QgdHJlZSA9IHRoaXMudHJlZTtcbiAgICB0cmVlLnJlc2V0KCk7XG4gICAgdHJlZS5hYWJiLmNvcHkodGhpcy5hYWJiKTtcbiAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7IC8vIFRoZSBsb2NhbCBtZXNoIEFBQkIgaXMgc2NhbGVkLCBidXQgdGhlIG9jdHJlZSBBQUJCIHNob3VsZCBiZSB1bnNjYWxlZFxuXG4gICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueCAqPSAxIC8gc2NhbGUueDtcbiAgICB0cmVlLmFhYmIubG93ZXJCb3VuZC55ICo9IDEgLyBzY2FsZS55O1xuICAgIHRyZWUuYWFiYi5sb3dlckJvdW5kLnogKj0gMSAvIHNjYWxlLno7XG4gICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueCAqPSAxIC8gc2NhbGUueDtcbiAgICB0cmVlLmFhYmIudXBwZXJCb3VuZC55ICo9IDEgLyBzY2FsZS55O1xuICAgIHRyZWUuYWFiYi51cHBlckJvdW5kLnogKj0gMSAvIHNjYWxlLno7IC8vIEluc2VydCBhbGwgdHJpYW5nbGVzXG5cbiAgICBjb25zdCB0cmlhbmdsZUFBQkIgPSBuZXcgQUFCQigpO1xuICAgIGNvbnN0IGEgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IGIgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IGMgPSBuZXcgVmVjMygpO1xuICAgIGNvbnN0IHBvaW50cyA9IFthLCBiLCBjXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykge1xuICAgICAgLy90aGlzLmdldFRyaWFuZ2xlVmVydGljZXMoaSwgYSwgYiwgYyk7XG4gICAgICAvLyBHZXQgdW5zY2FsZWQgdHJpYW5nbGUgdmVydHNcbiAgICAgIGNvbnN0IGkzID0gaSAqIDM7XG5cbiAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpM10sIGEpO1xuXG4gICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAxXSwgYik7XG5cbiAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDJdLCBjKTtcblxuICAgICAgdHJpYW5nbGVBQUJCLnNldEZyb21Qb2ludHMocG9pbnRzKTtcbiAgICAgIHRyZWUuaW5zZXJ0KHRyaWFuZ2xlQUFCQiwgaSk7XG4gICAgfVxuXG4gICAgdHJlZS5yZW1vdmVFbXB0eU5vZGVzKCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0cmlhbmdsZXMgaW4gYSBsb2NhbCBBQUJCIGZyb20gdGhlIHRyaW1lc2guXG4gICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgb2YgaW50ZWdlcnMsIHJlZmVyZW5jaW5nIHRoZSBxdWVyaWVkIHRyaWFuZ2xlcy5cbiAgICovXG5cblxuICBnZXRUcmlhbmdsZXNJbkFBQkIoYWFiYiwgcmVzdWx0KSB7XG4gICAgdW5zY2FsZWRBQUJCLmNvcHkoYWFiYik7IC8vIFNjYWxlIGl0IHRvIGxvY2FsXG5cbiAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7XG4gICAgY29uc3QgaXN4ID0gc2NhbGUueDtcbiAgICBjb25zdCBpc3kgPSBzY2FsZS55O1xuICAgIGNvbnN0IGlzeiA9IHNjYWxlLno7XG4gICAgY29uc3QgbCA9IHVuc2NhbGVkQUFCQi5sb3dlckJvdW5kO1xuICAgIGNvbnN0IHUgPSB1bnNjYWxlZEFBQkIudXBwZXJCb3VuZDtcbiAgICBsLnggLz0gaXN4O1xuICAgIGwueSAvPSBpc3k7XG4gICAgbC56IC89IGlzejtcbiAgICB1LnggLz0gaXN4O1xuICAgIHUueSAvPSBpc3k7XG4gICAgdS56IC89IGlzejtcbiAgICByZXR1cm4gdGhpcy50cmVlLmFhYmJRdWVyeSh1bnNjYWxlZEFBQkIsIHJlc3VsdCk7XG4gIH1cbiAgLyoqXG4gICAqIHNldFNjYWxlXG4gICAqL1xuXG5cbiAgc2V0U2NhbGUoc2NhbGUpIHtcbiAgICBjb25zdCB3YXNVbmlmb3JtID0gdGhpcy5zY2FsZS54ID09PSB0aGlzLnNjYWxlLnkgJiYgdGhpcy5zY2FsZS55ID09PSB0aGlzLnNjYWxlLno7XG4gICAgY29uc3QgaXNVbmlmb3JtID0gc2NhbGUueCA9PT0gc2NhbGUueSAmJiBzY2FsZS55ID09PSBzY2FsZS56O1xuXG4gICAgaWYgKCEod2FzVW5pZm9ybSAmJiBpc1VuaWZvcm0pKSB7XG4gICAgICAvLyBOb24tdW5pZm9ybSBzY2FsaW5nLiBOZWVkIHRvIHVwZGF0ZSBub3JtYWxzLlxuICAgICAgdGhpcy51cGRhdGVOb3JtYWxzKCk7XG4gICAgfVxuXG4gICAgdGhpcy5zY2FsZS5jb3B5KHNjYWxlKTtcbiAgICB0aGlzLnVwZGF0ZUFBQkIoKTtcbiAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7XG4gIH1cbiAgLyoqXG4gICAqIENvbXB1dGUgdGhlIG5vcm1hbHMgb2YgdGhlIGZhY2VzLiBXaWxsIHNhdmUgaW4gdGhlIGAubm9ybWFsc2AgYXJyYXkuXG4gICAqL1xuXG5cbiAgdXBkYXRlTm9ybWFscygpIHtcbiAgICBjb25zdCBuID0gY29tcHV0ZU5vcm1hbHNfbjsgLy8gR2VuZXJhdGUgbm9ybWFsc1xuXG4gICAgY29uc3Qgbm9ybWFscyA9IHRoaXMubm9ybWFscztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykge1xuICAgICAgY29uc3QgaTMgPSBpICogMztcbiAgICAgIGNvbnN0IGEgPSB0aGlzLmluZGljZXNbaTNdO1xuICAgICAgY29uc3QgYiA9IHRoaXMuaW5kaWNlc1tpMyArIDFdO1xuICAgICAgY29uc3QgYyA9IHRoaXMuaW5kaWNlc1tpMyArIDJdO1xuICAgICAgdGhpcy5nZXRWZXJ0ZXgoYSwgdmEpO1xuICAgICAgdGhpcy5nZXRWZXJ0ZXgoYiwgdmIpO1xuICAgICAgdGhpcy5nZXRWZXJ0ZXgoYywgdmMpO1xuICAgICAgVHJpbWVzaC5jb21wdXRlTm9ybWFsKHZiLCB2YSwgdmMsIG4pO1xuICAgICAgbm9ybWFsc1tpM10gPSBuLng7XG4gICAgICBub3JtYWxzW2kzICsgMV0gPSBuLnk7XG4gICAgICBub3JtYWxzW2kzICsgMl0gPSBuLno7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIGAuZWRnZXNgIHByb3BlcnR5XG4gICAqL1xuXG5cbiAgdXBkYXRlRWRnZXMoKSB7XG4gICAgY29uc3QgZWRnZXMgPSB7fTtcblxuICAgIGNvbnN0IGFkZCA9IChhLCBiKSA9PiB7XG4gICAgICBjb25zdCBrZXkgPSBhIDwgYiA/IGEgKyBcIl9cIiArIGIgOiBiICsgXCJfXCIgKyBhO1xuICAgICAgZWRnZXNba2V5XSA9IHRydWU7XG4gICAgfTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykge1xuICAgICAgY29uc3QgaTMgPSBpICogMztcbiAgICAgIGNvbnN0IGEgPSB0aGlzLmluZGljZXNbaTNdO1xuICAgICAgY29uc3QgYiA9IHRoaXMuaW5kaWNlc1tpMyArIDFdO1xuICAgICAgY29uc3QgYyA9IHRoaXMuaW5kaWNlc1tpMyArIDJdO1xuICAgICAgYWRkKGEsIGIpO1xuICAgICAgYWRkKGIsIGMpO1xuICAgICAgYWRkKGMsIGEpO1xuICAgIH1cblxuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhlZGdlcyk7XG4gICAgdGhpcy5lZGdlcyA9IG5ldyBJbnQxNkFycmF5KGtleXMubGVuZ3RoICogMik7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGluZGljZXMgPSBrZXlzW2ldLnNwbGl0KCdfJyk7XG4gICAgICB0aGlzLmVkZ2VzWzIgKiBpXSA9IHBhcnNlSW50KGluZGljZXNbMF0sIDEwKTtcbiAgICAgIHRoaXMuZWRnZXNbMiAqIGkgKyAxXSA9IHBhcnNlSW50KGluZGljZXNbMV0sIDEwKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhbiBlZGdlIHZlcnRleFxuICAgKiBAcGFyYW0gZmlyc3RPclNlY29uZCAwIG9yIDEsIGRlcGVuZGluZyBvbiB3aGljaCBvbmUgb2YgdGhlIHZlcnRpY2VzIHlvdSBuZWVkLlxuICAgKiBAcGFyYW0gdmVydGV4U3RvcmUgV2hlcmUgdG8gc3RvcmUgdGhlIHJlc3VsdFxuICAgKi9cblxuXG4gIGdldEVkZ2VWZXJ0ZXgoZWRnZUluZGV4LCBmaXJzdE9yU2Vjb25kLCB2ZXJ0ZXhTdG9yZSkge1xuICAgIGNvbnN0IHZlcnRleEluZGV4ID0gdGhpcy5lZGdlc1tlZGdlSW5kZXggKiAyICsgKGZpcnN0T3JTZWNvbmQgPyAxIDogMCldO1xuICAgIHRoaXMuZ2V0VmVydGV4KHZlcnRleEluZGV4LCB2ZXJ0ZXhTdG9yZSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhIHZlY3RvciBhbG9uZyBhbiBlZGdlLlxuICAgKi9cblxuXG4gIGdldEVkZ2VWZWN0b3IoZWRnZUluZGV4LCB2ZWN0b3JTdG9yZSkge1xuICAgIGNvbnN0IHZhID0gZ2V0RWRnZVZlY3Rvcl92YTtcbiAgICBjb25zdCB2YiA9IGdldEVkZ2VWZWN0b3JfdmI7XG4gICAgdGhpcy5nZXRFZGdlVmVydGV4KGVkZ2VJbmRleCwgMCwgdmEpO1xuICAgIHRoaXMuZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIDEsIHZiKTtcbiAgICB2Yi52c3ViKHZhLCB2ZWN0b3JTdG9yZSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBmYWNlIG5vcm1hbCBnaXZlbiAzIHZlcnRpY2VzXG4gICAqL1xuXG5cbiAgc3RhdGljIGNvbXB1dGVOb3JtYWwodmEsIHZiLCB2YywgdGFyZ2V0KSB7XG4gICAgdmIudnN1Yih2YSwgYWIpO1xuICAgIHZjLnZzdWIodmIsIGNiKTtcbiAgICBjYi5jcm9zcyhhYiwgdGFyZ2V0KTtcblxuICAgIGlmICghdGFyZ2V0LmlzWmVybygpKSB7XG4gICAgICB0YXJnZXQubm9ybWFsaXplKCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBHZXQgdmVydGV4IGkuXG4gICAqIEByZXR1cm4gVGhlIFwib3V0XCIgdmVjdG9yIG9iamVjdFxuICAgKi9cblxuXG4gIGdldFZlcnRleChpLCBvdXQpIHtcbiAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7XG5cbiAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleChpLCBvdXQpO1xuXG4gICAgb3V0LnggKj0gc2NhbGUueDtcbiAgICBvdXQueSAqPSBzY2FsZS55O1xuICAgIG91dC56ICo9IHNjYWxlLno7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuICAvKipcbiAgICogR2V0IHJhdyB2ZXJ0ZXggaVxuICAgKiBAcmV0dXJuIFRoZSBcIm91dFwiIHZlY3RvciBvYmplY3RcbiAgICovXG5cblxuICBfZ2V0VW5zY2FsZWRWZXJ0ZXgoaSwgb3V0KSB7XG4gICAgY29uc3QgaTMgPSBpICogMztcbiAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7XG4gICAgcmV0dXJuIG91dC5zZXQodmVydGljZXNbaTNdLCB2ZXJ0aWNlc1tpMyArIDFdLCB2ZXJ0aWNlc1tpMyArIDJdKTtcbiAgfVxuICAvKipcbiAgICogR2V0IGEgdmVydGV4IGZyb20gdGhlIHRyaW1lc2gsdHJhbnNmb3JtZWQgYnkgdGhlIGdpdmVuIHBvc2l0aW9uIGFuZCBxdWF0ZXJuaW9uLlxuICAgKiBAcmV0dXJuIFRoZSBcIm91dFwiIHZlY3RvciBvYmplY3RcbiAgICovXG5cblxuICBnZXRXb3JsZFZlcnRleChpLCBwb3MsIHF1YXQsIG91dCkge1xuICAgIHRoaXMuZ2V0VmVydGV4KGksIG91dCk7XG4gICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvcywgcXVhdCwgb3V0LCBvdXQpO1xuICAgIHJldHVybiBvdXQ7XG4gIH1cbiAgLyoqXG4gICAqIEdldCB0aGUgdGhyZWUgdmVydGljZXMgZm9yIHRyaWFuZ2xlIGkuXG4gICAqL1xuXG5cbiAgZ2V0VHJpYW5nbGVWZXJ0aWNlcyhpLCBhLCBiLCBjKSB7XG4gICAgY29uc3QgaTMgPSBpICogMztcbiAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTNdLCBhKTtcbiAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAxXSwgYik7XG4gICAgdGhpcy5nZXRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzICsgMl0sIGMpO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlIHRoZSBub3JtYWwgb2YgdHJpYW5nbGUgaS5cbiAgICogQHJldHVybiBUaGUgXCJ0YXJnZXRcIiB2ZWN0b3Igb2JqZWN0XG4gICAqL1xuXG5cbiAgZ2V0Tm9ybWFsKGksIHRhcmdldCkge1xuICAgIGNvbnN0IGkzID0gaSAqIDM7XG4gICAgcmV0dXJuIHRhcmdldC5zZXQodGhpcy5ub3JtYWxzW2kzXSwgdGhpcy5ub3JtYWxzW2kzICsgMV0sIHRoaXMubm9ybWFsc1tpMyArIDJdKTtcbiAgfVxuICAvKipcbiAgICogQHJldHVybiBUaGUgXCJ0YXJnZXRcIiB2ZWN0b3Igb2JqZWN0XG4gICAqL1xuXG5cbiAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkge1xuICAgIC8vIEFwcHJveGltYXRlIHdpdGggYm94IGluZXJ0aWFcbiAgICAvLyBFeGFjdCBpbmVydGlhIGNhbGN1bGF0aW9uIGlzIG92ZXJraWxsLCBidXQgc2VlIGh0dHA6Ly9nZW9tZXRyaWN0b29scy5jb20vRG9jdW1lbnRhdGlvbi9Qb2x5aGVkcmFsTWFzc1Byb3BlcnRpZXMucGRmIGZvciB0aGUgY29ycmVjdCB3YXkgdG8gZG8gaXRcbiAgICB0aGlzLmNvbXB1dGVMb2NhbEFBQkIoY2xpX2FhYmIpO1xuICAgIGNvbnN0IHggPSBjbGlfYWFiYi51cHBlckJvdW5kLnggLSBjbGlfYWFiYi5sb3dlckJvdW5kLng7XG4gICAgY29uc3QgeSA9IGNsaV9hYWJiLnVwcGVyQm91bmQueSAtIGNsaV9hYWJiLmxvd2VyQm91bmQueTtcbiAgICBjb25zdCB6ID0gY2xpX2FhYmIudXBwZXJCb3VuZC56IC0gY2xpX2FhYmIubG93ZXJCb3VuZC56O1xuICAgIHJldHVybiB0YXJnZXQuc2V0KDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB5ICogMiAqIHkgKyAyICogeiAqIDIgKiB6KSwgMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHggKiAyICogeCArIDIgKiB6ICogMiAqIHopLCAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHggKiAyICogeCkpO1xuICB9XG4gIC8qKlxuICAgKiBDb21wdXRlIHRoZSBsb2NhbCBBQUJCIGZvciB0aGUgdHJpbWVzaFxuICAgKi9cblxuXG4gIGNvbXB1dGVMb2NhbEFBQkIoYWFiYikge1xuICAgIGNvbnN0IGwgPSBhYWJiLmxvd2VyQm91bmQ7XG4gICAgY29uc3QgdSA9IGFhYmIudXBwZXJCb3VuZDtcbiAgICBjb25zdCBuID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7XG4gICAgdGhpcy52ZXJ0aWNlcztcbiAgICBjb25zdCB2ID0gY29tcHV0ZUxvY2FsQUFCQl93b3JsZFZlcnQ7XG4gICAgdGhpcy5nZXRWZXJ0ZXgoMCwgdik7XG4gICAgbC5jb3B5KHYpO1xuICAgIHUuY29weSh2KTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBuOyBpKyspIHtcbiAgICAgIHRoaXMuZ2V0VmVydGV4KGksIHYpO1xuXG4gICAgICBpZiAodi54IDwgbC54KSB7XG4gICAgICAgIGwueCA9IHYueDtcbiAgICAgIH0gZWxzZSBpZiAodi54ID4gdS54KSB7XG4gICAgICAgIHUueCA9IHYueDtcbiAgICAgIH1cblxuICAgICAgaWYgKHYueSA8IGwueSkge1xuICAgICAgICBsLnkgPSB2Lnk7XG4gICAgICB9IGVsc2UgaWYgKHYueSA+IHUueSkge1xuICAgICAgICB1LnkgPSB2Lnk7XG4gICAgICB9XG5cbiAgICAgIGlmICh2LnogPCBsLnopIHtcbiAgICAgICAgbC56ID0gdi56O1xuICAgICAgfSBlbHNlIGlmICh2LnogPiB1LnopIHtcbiAgICAgICAgdS56ID0gdi56O1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKipcbiAgICogVXBkYXRlIHRoZSBgLmFhYmJgIHByb3BlcnR5XG4gICAqL1xuXG5cbiAgdXBkYXRlQUFCQigpIHtcbiAgICB0aGlzLmNvbXB1dGVMb2NhbEFBQkIodGhpcy5hYWJiKTtcbiAgfVxuICAvKipcbiAgICogV2lsbCB1cGRhdGUgdGhlIGAuYm91bmRpbmdTcGhlcmVSYWRpdXNgIHByb3BlcnR5XG4gICAqL1xuXG5cbiAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7XG4gICAgLy8gQXNzdW1lIHBvaW50cyBhcmUgZGlzdHJpYnV0ZWQgd2l0aCBsb2NhbCAoMCwwLDApIGFzIGNlbnRlclxuICAgIGxldCBtYXgyID0gMDtcbiAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7XG4gICAgY29uc3QgdiA9IG5ldyBWZWMzKCk7XG5cbiAgICBmb3IgKGxldCBpID0gMCwgTiA9IHZlcnRpY2VzLmxlbmd0aCAvIDM7IGkgIT09IE47IGkrKykge1xuICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7XG4gICAgICBjb25zdCBub3JtMiA9IHYubGVuZ3RoU3F1YXJlZCgpO1xuXG4gICAgICBpZiAobm9ybTIgPiBtYXgyKSB7XG4gICAgICAgIG1heDIgPSBub3JtMjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gTWF0aC5zcXJ0KG1heDIpO1xuICB9XG4gIC8qKlxuICAgKiBjYWxjdWxhdGVXb3JsZEFBQkJcbiAgICovXG5cblxuICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkge1xuICAgIC8qXG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aCAvIDMsXG4gICAgICAgICAgICB2ZXJ0cyA9IHRoaXMudmVydGljZXM7XG4gICAgICAgIGNvbnN0IG1pbngsbWlueSxtaW56LG1heHgsbWF4eSxtYXh6O1xuICAgICAgICAgY29uc3QgdiA9IHRlbXBXb3JsZFZlcnRleDtcbiAgICAgICAgZm9yKGxldCBpPTA7IGk8bjsgaSsrKXtcbiAgICAgICAgICAgIHRoaXMuZ2V0VmVydGV4KGksIHYpO1xuICAgICAgICAgICAgcXVhdC52bXVsdCh2LCB2KTtcbiAgICAgICAgICAgIHBvcy52YWRkKHYsIHYpO1xuICAgICAgICAgICAgaWYgKHYueCA8IG1pbnggfHwgbWlueD09PXVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgICAgbWlueCA9IHYueDtcbiAgICAgICAgICAgIH0gZWxzZSBpZih2LnggPiBtYXh4IHx8IG1heHg9PT11bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIG1heHggPSB2Lng7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAgaWYgKHYueSA8IG1pbnkgfHwgbWlueT09PXVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgICAgbWlueSA9IHYueTtcbiAgICAgICAgICAgIH0gZWxzZSBpZih2LnkgPiBtYXh5IHx8IG1heHk9PT11bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIG1heHkgPSB2Lnk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAgaWYgKHYueiA8IG1pbnogfHwgbWluej09PXVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgICAgbWlueiA9IHYuejtcbiAgICAgICAgICAgIH0gZWxzZSBpZih2LnogPiBtYXh6IHx8IG1heHo9PT11bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIG1heHogPSB2Lno7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbWluLnNldChtaW54LG1pbnksbWlueik7XG4gICAgICAgIG1heC5zZXQobWF4eCxtYXh5LG1heHopO1xuICAgICAgICAqL1xuICAgIC8vIEZhc3RlciBhcHByb3hpbWF0aW9uIHVzaW5nIGxvY2FsIEFBQkJcbiAgICBjb25zdCBmcmFtZSA9IGNhbGN1bGF0ZVdvcmxkQUFCQl9mcmFtZTtcbiAgICBjb25zdCByZXN1bHQgPSBjYWxjdWxhdGVXb3JsZEFBQkJfYWFiYjtcbiAgICBmcmFtZS5wb3NpdGlvbiA9IHBvcztcbiAgICBmcmFtZS5xdWF0ZXJuaW9uID0gcXVhdDtcbiAgICB0aGlzLmFhYmIudG9Xb3JsZEZyYW1lKGZyYW1lLCByZXN1bHQpO1xuICAgIG1pbi5jb3B5KHJlc3VsdC5sb3dlckJvdW5kKTtcbiAgICBtYXguY29weShyZXN1bHQudXBwZXJCb3VuZCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBhcHByb3hpbWF0ZSB2b2x1bWVcbiAgICovXG5cblxuICB2b2x1bWUoKSB7XG4gICAgcmV0dXJuIDQuMCAqIE1hdGguUEkgKiB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzIC8gMy4wO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBUcmltZXNoIGluc3RhbmNlLCBzaGFwZWQgYXMgYSB0b3J1cy5cbiAgICovXG5cblxuICBzdGF0aWMgY3JlYXRlVG9ydXMocmFkaXVzID0gMSwgdHViZSA9IDAuNSwgcmFkaWFsU2VnbWVudHMgPSA4LCB0dWJ1bGFyU2VnbWVudHMgPSA2LCBhcmMgPSBNYXRoLlBJICogMikge1xuICAgIGNvbnN0IHZlcnRpY2VzID0gW107XG4gICAgY29uc3QgaW5kaWNlcyA9IFtdO1xuXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPD0gcmFkaWFsU2VnbWVudHM7IGorKykge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdHVidWxhclNlZ21lbnRzOyBpKyspIHtcbiAgICAgICAgY29uc3QgdSA9IGkgLyB0dWJ1bGFyU2VnbWVudHMgKiBhcmM7XG4gICAgICAgIGNvbnN0IHYgPSBqIC8gcmFkaWFsU2VnbWVudHMgKiBNYXRoLlBJICogMjtcbiAgICAgICAgY29uc3QgeCA9IChyYWRpdXMgKyB0dWJlICogTWF0aC5jb3ModikpICogTWF0aC5jb3ModSk7XG4gICAgICAgIGNvbnN0IHkgPSAocmFkaXVzICsgdHViZSAqIE1hdGguY29zKHYpKSAqIE1hdGguc2luKHUpO1xuICAgICAgICBjb25zdCB6ID0gdHViZSAqIE1hdGguc2luKHYpO1xuICAgICAgICB2ZXJ0aWNlcy5wdXNoKHgsIHksIHopO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAobGV0IGogPSAxOyBqIDw9IHJhZGlhbFNlZ21lbnRzOyBqKyspIHtcbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHR1YnVsYXJTZWdtZW50czsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGEgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiBqICsgaSAtIDE7XG4gICAgICAgIGNvbnN0IGIgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiAoaiAtIDEpICsgaSAtIDE7XG4gICAgICAgIGNvbnN0IGMgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiAoaiAtIDEpICsgaTtcbiAgICAgICAgY29uc3QgZCA9ICh0dWJ1bGFyU2VnbWVudHMgKyAxKSAqIGogKyBpO1xuICAgICAgICBpbmRpY2VzLnB1c2goYSwgYiwgZCk7XG4gICAgICAgIGluZGljZXMucHVzaChiLCBjLCBkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFRyaW1lc2godmVydGljZXMsIGluZGljZXMpO1xuICB9XG5cbn1cbmNvbnN0IGNvbXB1dGVOb3JtYWxzX24gPSBuZXcgVmVjMygpO1xuY29uc3QgdW5zY2FsZWRBQUJCID0gbmV3IEFBQkIoKTtcbmNvbnN0IGdldEVkZ2VWZWN0b3JfdmEgPSBuZXcgVmVjMygpO1xuY29uc3QgZ2V0RWRnZVZlY3Rvcl92YiA9IG5ldyBWZWMzKCk7XG5jb25zdCBjYiA9IG5ldyBWZWMzKCk7XG5jb25zdCBhYiA9IG5ldyBWZWMzKCk7XG5jb25zdCB2YSA9IG5ldyBWZWMzKCk7XG5jb25zdCB2YiA9IG5ldyBWZWMzKCk7XG5jb25zdCB2YyA9IG5ldyBWZWMzKCk7XG5jb25zdCBjbGlfYWFiYiA9IG5ldyBBQUJCKCk7XG5jb25zdCBjb21wdXRlTG9jYWxBQUJCX3dvcmxkVmVydCA9IG5ldyBWZWMzKCk7XG5jb25zdCBjYWxjdWxhdGVXb3JsZEFBQkJfZnJhbWUgPSBuZXcgVHJhbnNmb3JtKCk7XG5jb25zdCBjYWxjdWxhdGVXb3JsZEFBQkJfYWFiYiA9IG5ldyBBQUJCKCk7XG5cbi8qKlxuICogQ29uc3RyYWludCBlcXVhdGlvbiBzb2x2ZXIgYmFzZSBjbGFzcy5cbiAqL1xuY2xhc3MgU29sdmVyIHtcbiAgLyoqXG4gICAqIEFsbCBlcXVhdGlvbnMgdG8gYmUgc29sdmVkXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAdG9kbyByZW1vdmUgdXNlbGVzcyBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5lcXVhdGlvbnMgPSB2b2lkIDA7XG4gICAgdGhpcy5lcXVhdGlvbnMgPSBbXTtcbiAgfVxuICAvKipcbiAgICogU2hvdWxkIGJlIGltcGxlbWVudGVkIGluIHN1YmNsYXNzZXMhXG4gICAqIEB0b2RvIHVzZSBhYnN0cmFjdFxuICAgKiBAcmV0dXJuIG51bWJlciBvZiBpdGVyYXRpb25zIHBlcmZvcm1lZFxuICAgKi9cblxuXG4gIHNvbHZlKGR0LCB3b3JsZCkge1xuICAgIHJldHVybiAoLy8gU2hvdWxkIHJldHVybiB0aGUgbnVtYmVyIG9mIGl0ZXJhdGlvbnMgZG9uZSFcbiAgICAgIDBcbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBBZGQgYW4gZXF1YXRpb25cbiAgICovXG5cblxuICBhZGRFcXVhdGlvbihlcSkge1xuICAgIGlmIChlcS5lbmFibGVkICYmICFlcS5iaS5pc1RyaWdnZXIgJiYgIWVxLmJqLmlzVHJpZ2dlcikge1xuICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChlcSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBSZW1vdmUgYW4gZXF1YXRpb25cbiAgICovXG5cblxuICByZW1vdmVFcXVhdGlvbihlcSkge1xuICAgIGNvbnN0IGVxcyA9IHRoaXMuZXF1YXRpb25zO1xuICAgIGNvbnN0IGkgPSBlcXMuaW5kZXhPZihlcSk7XG5cbiAgICBpZiAoaSAhPT0gLTEpIHtcbiAgICAgIGVxcy5zcGxpY2UoaSwgMSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBBZGQgYWxsIGVxdWF0aW9uc1xuICAgKi9cblxuXG4gIHJlbW92ZUFsbEVxdWF0aW9ucygpIHtcbiAgICB0aGlzLmVxdWF0aW9ucy5sZW5ndGggPSAwO1xuICB9XG5cbn1cblxuLyoqXG4gKiBDb25zdHJhaW50IGVxdWF0aW9uIEdhdXNzLVNlaWRlbCBzb2x2ZXIuXG4gKiBAdG9kbyBUaGUgc3Bvb2sgcGFyYW1ldGVycyBzaG91bGQgYmUgc3BlY2lmaWVkIGZvciBlYWNoIGNvbnN0cmFpbnQsIG5vdCBnbG9iYWxseS5cbiAqIEBzZWUgaHR0cHM6Ly93d3c4LmNzLnVtdS5zZS9rdXJzZXIvNURWMDU4L1ZUMDkvbGVjdHVyZXMvc3Bvb2tub3Rlcy5wZGZcbiAqL1xuY2xhc3MgR1NTb2x2ZXIgZXh0ZW5kcyBTb2x2ZXIge1xuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBzb2x2ZXIgaXRlcmF0aW9ucyBkZXRlcm1pbmVzIHF1YWxpdHkgb2YgdGhlIGNvbnN0cmFpbnRzIGluIHRoZSB3b3JsZC5cbiAgICogVGhlIG1vcmUgaXRlcmF0aW9ucywgdGhlIG1vcmUgY29ycmVjdCBzaW11bGF0aW9uLiBNb3JlIGl0ZXJhdGlvbnMgbmVlZCBtb3JlIGNvbXB1dGF0aW9ucyB0aG91Z2guIElmIHlvdSBoYXZlIGEgbGFyZ2UgZ3Jhdml0eSBmb3JjZSBpbiB5b3VyIHdvcmxkLCB5b3Ugd2lsbCBuZWVkIG1vcmUgaXRlcmF0aW9ucy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFdoZW4gdG9sZXJhbmNlIGlzIHJlYWNoZWQsIHRoZSBzeXN0ZW0gaXMgYXNzdW1lZCB0byBiZSBjb252ZXJnZWQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAdG9kbyByZW1vdmUgdXNlbGVzcyBjb25zdHJ1Y3RvclxuICAgKi9cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLml0ZXJhdGlvbnMgPSB2b2lkIDA7XG4gICAgdGhpcy50b2xlcmFuY2UgPSB2b2lkIDA7XG4gICAgdGhpcy5pdGVyYXRpb25zID0gMTA7XG4gICAgdGhpcy50b2xlcmFuY2UgPSAxZS03O1xuICB9XG4gIC8qKlxuICAgKiBTb2x2ZVxuICAgKiBAcmV0dXJuIG51bWJlciBvZiBpdGVyYXRpb25zIHBlcmZvcm1lZFxuICAgKi9cblxuXG4gIHNvbHZlKGR0LCB3b3JsZCkge1xuICAgIGxldCBpdGVyID0gMDtcbiAgICBjb25zdCBtYXhJdGVyID0gdGhpcy5pdGVyYXRpb25zO1xuICAgIGNvbnN0IHRvbFNxdWFyZWQgPSB0aGlzLnRvbGVyYW5jZSAqIHRoaXMudG9sZXJhbmNlO1xuICAgIGNvbnN0IGVxdWF0aW9ucyA9IHRoaXMuZXF1YXRpb25zO1xuICAgIGNvbnN0IE5lcSA9IGVxdWF0aW9ucy5sZW5ndGg7XG4gICAgY29uc3QgYm9kaWVzID0gd29ybGQuYm9kaWVzO1xuICAgIGNvbnN0IE5ib2RpZXMgPSBib2RpZXMubGVuZ3RoO1xuICAgIGNvbnN0IGggPSBkdDtcbiAgICBsZXQgQjtcbiAgICBsZXQgaW52QztcbiAgICBsZXQgZGVsdGFsYW1iZGE7XG4gICAgbGV0IGRlbHRhbGFtYmRhVG90O1xuICAgIGxldCBHV2xhbWJkYTtcbiAgICBsZXQgbGFtYmRhajsgLy8gVXBkYXRlIHNvbHZlIG1hc3NcblxuICAgIGlmIChOZXEgIT09IDApIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYm9kaWVzOyBpKyspIHtcbiAgICAgICAgYm9kaWVzW2ldLnVwZGF0ZVNvbHZlTWFzc1Byb3BlcnRpZXMoKTtcbiAgICAgIH1cbiAgICB9IC8vIFRoaW5ncyB0aGF0IGRvIG5vdCBjaGFuZ2UgZHVyaW5nIGl0ZXJhdGlvbiBjYW4gYmUgY29tcHV0ZWQgb25jZVxuXG5cbiAgICBjb25zdCBpbnZDcyA9IEdTU29sdmVyX3NvbHZlX2ludkNzO1xuICAgIGNvbnN0IEJzID0gR1NTb2x2ZXJfc29sdmVfQnM7XG4gICAgY29uc3QgbGFtYmRhID0gR1NTb2x2ZXJfc29sdmVfbGFtYmRhO1xuICAgIGludkNzLmxlbmd0aCA9IE5lcTtcbiAgICBCcy5sZW5ndGggPSBOZXE7XG4gICAgbGFtYmRhLmxlbmd0aCA9IE5lcTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOZXE7IGkrKykge1xuICAgICAgY29uc3QgYyA9IGVxdWF0aW9uc1tpXTtcbiAgICAgIGxhbWJkYVtpXSA9IDAuMDtcbiAgICAgIEJzW2ldID0gYy5jb21wdXRlQihoKTtcbiAgICAgIGludkNzW2ldID0gMS4wIC8gYy5jb21wdXRlQygpO1xuICAgIH1cblxuICAgIGlmIChOZXEgIT09IDApIHtcbiAgICAgIC8vIFJlc2V0IHZsYW1iZGFcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYm9kaWVzOyBpKyspIHtcbiAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTtcbiAgICAgICAgY29uc3QgdmxhbWJkYSA9IGIudmxhbWJkYTtcbiAgICAgICAgY29uc3Qgd2xhbWJkYSA9IGIud2xhbWJkYTtcbiAgICAgICAgdmxhbWJkYS5zZXQoMCwgMCwgMCk7XG4gICAgICAgIHdsYW1iZGEuc2V0KDAsIDAsIDApO1xuICAgICAgfSAvLyBJdGVyYXRlIG92ZXIgZXF1YXRpb25zXG5cblxuICAgICAgZm9yIChpdGVyID0gMDsgaXRlciAhPT0gbWF4SXRlcjsgaXRlcisrKSB7XG4gICAgICAgIC8vIEFjY3VtdWxhdGUgdGhlIHRvdGFsIGVycm9yIGZvciBlYWNoIGl0ZXJhdGlvbi5cbiAgICAgICAgZGVsdGFsYW1iZGFUb3QgPSAwLjA7XG5cbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IE5lcTsgaisrKSB7XG4gICAgICAgICAgY29uc3QgYyA9IGVxdWF0aW9uc1tqXTsgLy8gQ29tcHV0ZSBpdGVyYXRpb25cblxuICAgICAgICAgIEIgPSBCc1tqXTtcbiAgICAgICAgICBpbnZDID0gaW52Q3Nbal07XG4gICAgICAgICAgbGFtYmRhaiA9IGxhbWJkYVtqXTtcbiAgICAgICAgICBHV2xhbWJkYSA9IGMuY29tcHV0ZUdXbGFtYmRhKCk7XG4gICAgICAgICAgZGVsdGFsYW1iZGEgPSBpbnZDICogKEIgLSBHV2xhbWJkYSAtIGMuZXBzICogbGFtYmRhaik7IC8vIENsYW1wIGlmIHdlIGFyZSBub3Qgd2l0aGluIHRoZSBtaW4vbWF4IGludGVydmFsXG5cbiAgICAgICAgICBpZiAobGFtYmRhaiArIGRlbHRhbGFtYmRhIDwgYy5taW5Gb3JjZSkge1xuICAgICAgICAgICAgZGVsdGFsYW1iZGEgPSBjLm1pbkZvcmNlIC0gbGFtYmRhajtcbiAgICAgICAgICB9IGVsc2UgaWYgKGxhbWJkYWogKyBkZWx0YWxhbWJkYSA+IGMubWF4Rm9yY2UpIHtcbiAgICAgICAgICAgIGRlbHRhbGFtYmRhID0gYy5tYXhGb3JjZSAtIGxhbWJkYWo7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGFtYmRhW2pdICs9IGRlbHRhbGFtYmRhO1xuICAgICAgICAgIGRlbHRhbGFtYmRhVG90ICs9IGRlbHRhbGFtYmRhID4gMC4wID8gZGVsdGFsYW1iZGEgOiAtZGVsdGFsYW1iZGE7IC8vIGFicyhkZWx0YWxhbWJkYSlcblxuICAgICAgICAgIGMuYWRkVG9XbGFtYmRhKGRlbHRhbGFtYmRhKTtcbiAgICAgICAgfSAvLyBJZiB0aGUgdG90YWwgZXJyb3IgaXMgc21hbGwgZW5vdWdoIC0gc3RvcCBpdGVyYXRlXG5cblxuICAgICAgICBpZiAoZGVsdGFsYW1iZGFUb3QgKiBkZWx0YWxhbWJkYVRvdCA8IHRvbFNxdWFyZWQpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSAvLyBBZGQgcmVzdWx0IHRvIHZlbG9jaXR5XG5cblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykge1xuICAgICAgICBjb25zdCBiID0gYm9kaWVzW2ldO1xuICAgICAgICBjb25zdCB2ID0gYi52ZWxvY2l0eTtcbiAgICAgICAgY29uc3QgdyA9IGIuYW5ndWxhclZlbG9jaXR5O1xuICAgICAgICBiLnZsYW1iZGEudm11bChiLmxpbmVhckZhY3RvciwgYi52bGFtYmRhKTtcbiAgICAgICAgdi52YWRkKGIudmxhbWJkYSwgdik7XG4gICAgICAgIGIud2xhbWJkYS52bXVsKGIuYW5ndWxhckZhY3RvciwgYi53bGFtYmRhKTtcbiAgICAgICAgdy52YWRkKGIud2xhbWJkYSwgdyk7XG4gICAgICB9IC8vIFNldCB0aGUgYC5tdWx0aXBsaWVyYCBwcm9wZXJ0eSBvZiBlYWNoIGVxdWF0aW9uXG5cblxuICAgICAgbGV0IGwgPSBlcXVhdGlvbnMubGVuZ3RoO1xuICAgICAgY29uc3QgaW52RHQgPSAxIC8gaDtcblxuICAgICAgd2hpbGUgKGwtLSkge1xuICAgICAgICBlcXVhdGlvbnNbbF0ubXVsdGlwbGllciA9IGxhbWJkYVtsXSAqIGludkR0O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpdGVyO1xuICB9XG5cbn0gLy8gSnVzdCB0ZW1wb3JhcnkgbnVtYmVyIGhvbGRlcnMgdGhhdCB3ZSB3YW50IHRvIHJldXNlIGVhY2ggaXRlcmF0aW9uLlxuXG5jb25zdCBHU1NvbHZlcl9zb2x2ZV9sYW1iZGEgPSBbXTtcbmNvbnN0IEdTU29sdmVyX3NvbHZlX2ludkNzID0gW107XG5jb25zdCBHU1NvbHZlcl9zb2x2ZV9CcyA9IFtdO1xuXG4vKipcbiAqIFNwbGl0cyB0aGUgZXF1YXRpb25zIGludG8gaXNsYW5kcyBhbmQgc29sdmVzIHRoZW0gaW5kZXBlbmRlbnRseS4gQ2FuIGltcHJvdmUgcGVyZm9ybWFuY2UuXG4gKi9cbmNsYXNzIFNwbGl0U29sdmVyIGV4dGVuZHMgU29sdmVyIHtcbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2Ygc29sdmVyIGl0ZXJhdGlvbnMgZGV0ZXJtaW5lcyBxdWFsaXR5IG9mIHRoZSBjb25zdHJhaW50cyBpbiB0aGUgd29ybGQuIFRoZSBtb3JlIGl0ZXJhdGlvbnMsIHRoZSBtb3JlIGNvcnJlY3Qgc2ltdWxhdGlvbi4gTW9yZSBpdGVyYXRpb25zIG5lZWQgbW9yZSBjb21wdXRhdGlvbnMgdGhvdWdoLiBJZiB5b3UgaGF2ZSBhIGxhcmdlIGdyYXZpdHkgZm9yY2UgaW4geW91ciB3b3JsZCwgeW91IHdpbGwgbmVlZCBtb3JlIGl0ZXJhdGlvbnMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBXaGVuIHRvbGVyYW5jZSBpcyByZWFjaGVkLCB0aGUgc3lzdGVtIGlzIGFzc3VtZWQgdG8gYmUgY29udmVyZ2VkLlxuICAgKi9cblxuICAvKiogc3Vic29sdmVyICovXG4gIGNvbnN0cnVjdG9yKHN1YnNvbHZlcikge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5pdGVyYXRpb25zID0gdm9pZCAwO1xuICAgIHRoaXMudG9sZXJhbmNlID0gdm9pZCAwO1xuICAgIHRoaXMuc3Vic29sdmVyID0gdm9pZCAwO1xuICAgIHRoaXMubm9kZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5ub2RlUG9vbCA9IHZvaWQgMDtcbiAgICB0aGlzLml0ZXJhdGlvbnMgPSAxMDtcbiAgICB0aGlzLnRvbGVyYW5jZSA9IDFlLTc7XG4gICAgdGhpcy5zdWJzb2x2ZXIgPSBzdWJzb2x2ZXI7XG4gICAgdGhpcy5ub2RlcyA9IFtdO1xuICAgIHRoaXMubm9kZVBvb2wgPSBbXTsgLy8gQ3JlYXRlIG5lZWRlZCBub2RlcywgcmV1c2UgaWYgcG9zc2libGVcblxuICAgIHdoaWxlICh0aGlzLm5vZGVQb29sLmxlbmd0aCA8IDEyOCkge1xuICAgICAgdGhpcy5ub2RlUG9vbC5wdXNoKHRoaXMuY3JlYXRlTm9kZSgpKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIGNyZWF0ZU5vZGVcbiAgICovXG5cblxuICBjcmVhdGVOb2RlKCkge1xuICAgIHJldHVybiB7XG4gICAgICBib2R5OiBudWxsLFxuICAgICAgY2hpbGRyZW46IFtdLFxuICAgICAgZXFzOiBbXSxcbiAgICAgIHZpc2l0ZWQ6IGZhbHNlXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogU29sdmUgdGhlIHN1YnN5c3RlbXNcbiAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWRcbiAgICovXG5cblxuICBzb2x2ZShkdCwgd29ybGQpIHtcbiAgICBjb25zdCBub2RlcyA9IFNwbGl0U29sdmVyX3NvbHZlX25vZGVzO1xuICAgIGNvbnN0IG5vZGVQb29sID0gdGhpcy5ub2RlUG9vbDtcbiAgICBjb25zdCBib2RpZXMgPSB3b3JsZC5ib2RpZXM7XG4gICAgY29uc3QgZXF1YXRpb25zID0gdGhpcy5lcXVhdGlvbnM7XG4gICAgY29uc3QgTmVxID0gZXF1YXRpb25zLmxlbmd0aDtcbiAgICBjb25zdCBOYm9kaWVzID0gYm9kaWVzLmxlbmd0aDtcbiAgICBjb25zdCBzdWJzb2x2ZXIgPSB0aGlzLnN1YnNvbHZlcjsgLy8gQ3JlYXRlIG5lZWRlZCBub2RlcywgcmV1c2UgaWYgcG9zc2libGVcblxuICAgIHdoaWxlIChub2RlUG9vbC5sZW5ndGggPCBOYm9kaWVzKSB7XG4gICAgICBub2RlUG9vbC5wdXNoKHRoaXMuY3JlYXRlTm9kZSgpKTtcbiAgICB9XG5cbiAgICBub2Rlcy5sZW5ndGggPSBOYm9kaWVzO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBOYm9kaWVzOyBpKyspIHtcbiAgICAgIG5vZGVzW2ldID0gbm9kZVBvb2xbaV07XG4gICAgfSAvLyBSZXNldCBub2RlIHZhbHVlc1xuXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmJvZGllczsgaSsrKSB7XG4gICAgICBjb25zdCBub2RlID0gbm9kZXNbaV07XG4gICAgICBub2RlLmJvZHkgPSBib2RpZXNbaV07XG4gICAgICBub2RlLmNoaWxkcmVuLmxlbmd0aCA9IDA7XG4gICAgICBub2RlLmVxcy5sZW5ndGggPSAwO1xuICAgICAgbm9kZS52aXNpdGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgayA9IDA7IGsgIT09IE5lcTsgaysrKSB7XG4gICAgICBjb25zdCBlcSA9IGVxdWF0aW9uc1trXTtcbiAgICAgIGNvbnN0IGkgPSBib2RpZXMuaW5kZXhPZihlcS5iaSk7XG4gICAgICBjb25zdCBqID0gYm9kaWVzLmluZGV4T2YoZXEuYmopO1xuICAgICAgY29uc3QgbmkgPSBub2Rlc1tpXTtcbiAgICAgIGNvbnN0IG5qID0gbm9kZXNbal07XG4gICAgICBuaS5jaGlsZHJlbi5wdXNoKG5qKTtcbiAgICAgIG5pLmVxcy5wdXNoKGVxKTtcbiAgICAgIG5qLmNoaWxkcmVuLnB1c2gobmkpO1xuICAgICAgbmouZXFzLnB1c2goZXEpO1xuICAgIH1cblxuICAgIGxldCBjaGlsZDtcbiAgICBsZXQgbiA9IDA7XG4gICAgbGV0IGVxcyA9IFNwbGl0U29sdmVyX3NvbHZlX2VxcztcbiAgICBzdWJzb2x2ZXIudG9sZXJhbmNlID0gdGhpcy50b2xlcmFuY2U7XG4gICAgc3Vic29sdmVyLml0ZXJhdGlvbnMgPSB0aGlzLml0ZXJhdGlvbnM7XG4gICAgY29uc3QgZHVtbXlXb3JsZCA9IFNwbGl0U29sdmVyX3NvbHZlX2R1bW15V29ybGQ7XG5cbiAgICB3aGlsZSAoY2hpbGQgPSBnZXRVbnZpc2l0ZWROb2RlKG5vZGVzKSkge1xuICAgICAgZXFzLmxlbmd0aCA9IDA7XG4gICAgICBkdW1teVdvcmxkLmJvZGllcy5sZW5ndGggPSAwO1xuICAgICAgYmZzKGNoaWxkLCB2aXNpdEZ1bmMsIGR1bW15V29ybGQuYm9kaWVzLCBlcXMpO1xuICAgICAgY29uc3QgTmVxcyA9IGVxcy5sZW5ndGg7XG4gICAgICBlcXMgPSBlcXMuc29ydChzb3J0QnlJZCk7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOZXFzOyBpKyspIHtcbiAgICAgICAgc3Vic29sdmVyLmFkZEVxdWF0aW9uKGVxc1tpXSk7XG4gICAgICB9XG5cbiAgICAgIHN1YnNvbHZlci5zb2x2ZShkdCwgZHVtbXlXb3JsZCk7XG4gICAgICBzdWJzb2x2ZXIucmVtb3ZlQWxsRXF1YXRpb25zKCk7XG4gICAgICBuKys7XG4gICAgfVxuXG4gICAgcmV0dXJuIG47XG4gIH1cblxufSAvLyBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygc3Vic3lzdGVtc1xuXG5jb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9ub2RlcyA9IFtdOyAvLyBBbGwgYWxsb2NhdGVkIG5vZGUgb2JqZWN0c1xuXG5jb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9lcXMgPSBbXTsgLy8gVGVtcCBhcnJheVxuXG5jb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9kdW1teVdvcmxkID0ge1xuICBib2RpZXM6IFtdXG59OyAvLyBUZW1wIG9iamVjdFxuXG5jb25zdCBTVEFUSUMgPSBCb2R5LlNUQVRJQztcblxuZnVuY3Rpb24gZ2V0VW52aXNpdGVkTm9kZShub2Rlcykge1xuICBjb25zdCBObm9kZXMgPSBub2Rlcy5sZW5ndGg7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ub2RlczsgaSsrKSB7XG4gICAgY29uc3Qgbm9kZSA9IG5vZGVzW2ldO1xuXG4gICAgaWYgKCFub2RlLnZpc2l0ZWQgJiYgIShub2RlLmJvZHkudHlwZSAmIFNUQVRJQykpIHtcbiAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuY29uc3QgcXVldWUgPSBbXTtcblxuZnVuY3Rpb24gYmZzKHJvb3QsIHZpc2l0RnVuYywgYmRzLCBlcXMpIHtcbiAgcXVldWUucHVzaChyb290KTtcbiAgcm9vdC52aXNpdGVkID0gdHJ1ZTtcbiAgdmlzaXRGdW5jKHJvb3QsIGJkcywgZXFzKTtcblxuICB3aGlsZSAocXVldWUubGVuZ3RoKSB7XG4gICAgY29uc3Qgbm9kZSA9IHF1ZXVlLnBvcCgpOyAvLyBMb29wIG92ZXIgdW52aXNpdGVkIGNoaWxkIG5vZGVzXG5cbiAgICBsZXQgY2hpbGQ7XG5cbiAgICB3aGlsZSAoY2hpbGQgPSBnZXRVbnZpc2l0ZWROb2RlKG5vZGUuY2hpbGRyZW4pKSB7XG4gICAgICBjaGlsZC52aXNpdGVkID0gdHJ1ZTtcbiAgICAgIHZpc2l0RnVuYyhjaGlsZCwgYmRzLCBlcXMpO1xuICAgICAgcXVldWUucHVzaChjaGlsZCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHZpc2l0RnVuYyhub2RlLCBiZHMsIGVxcykge1xuICBiZHMucHVzaChub2RlLmJvZHkpO1xuICBjb25zdCBOZXFzID0gbm9kZS5lcXMubGVuZ3RoO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpICE9PSBOZXFzOyBpKyspIHtcbiAgICBjb25zdCBlcSA9IG5vZGUuZXFzW2ldO1xuXG4gICAgaWYgKCFlcXMuaW5jbHVkZXMoZXEpKSB7XG4gICAgICBlcXMucHVzaChlcSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHNvcnRCeUlkKGEsIGIpIHtcbiAgcmV0dXJuIGIuaWQgLSBhLmlkO1xufVxuXG4vKipcbiAqIEZvciBwb29saW5nIG9iamVjdHMgdGhhdCBjYW4gYmUgcmV1c2VkLlxuICovXG5jbGFzcyBQb29sIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5vYmplY3RzID0gW107XG4gICAgdGhpcy50eXBlID0gT2JqZWN0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbGVhc2UgYW4gb2JqZWN0IGFmdGVyIHVzZVxuICAgKi9cbiAgcmVsZWFzZSguLi5hcmdzKSB7XG4gICAgY29uc3QgTmFyZ3MgPSBhcmdzLmxlbmd0aDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYXJnczsgaSsrKSB7XG4gICAgICB0aGlzLm9iamVjdHMucHVzaChhcmdzW2ldKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICAvKipcbiAgICogR2V0IGFuIG9iamVjdFxuICAgKi9cblxuXG4gIGdldCgpIHtcbiAgICBpZiAodGhpcy5vYmplY3RzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0T2JqZWN0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLm9iamVjdHMucG9wKCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDb25zdHJ1Y3QgYW4gb2JqZWN0LiBTaG91bGQgYmUgaW1wbGVtZW50ZWQgaW4gZWFjaCBzdWJjbGFzcy5cbiAgICovXG5cblxuICBjb25zdHJ1Y3RPYmplY3QoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjb25zdHJ1Y3RPYmplY3QoKSBub3QgaW1wbGVtZW50ZWQgaW4gdGhpcyBQb29sIHN1YmNsYXNzIHlldCEnKTtcbiAgfVxuICAvKipcbiAgICogQHJldHVybiBTZWxmLCBmb3IgY2hhaW5pbmdcbiAgICovXG5cblxuICByZXNpemUoc2l6ZSkge1xuICAgIGNvbnN0IG9iamVjdHMgPSB0aGlzLm9iamVjdHM7XG5cbiAgICB3aGlsZSAob2JqZWN0cy5sZW5ndGggPiBzaXplKSB7XG4gICAgICBvYmplY3RzLnBvcCgpO1xuICAgIH1cblxuICAgIHdoaWxlIChvYmplY3RzLmxlbmd0aCA8IHNpemUpIHtcbiAgICAgIG9iamVjdHMucHVzaCh0aGlzLmNvbnN0cnVjdE9iamVjdCgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG59XG5cbi8qKlxuICogVmVjM1Bvb2xcbiAqL1xuXG5jbGFzcyBWZWMzUG9vbCBleHRlbmRzIFBvb2wge1xuICBjb25zdHJ1Y3RvciguLi5hcmdzKSB7XG4gICAgc3VwZXIoLi4uYXJncyk7XG4gICAgdGhpcy50eXBlID0gVmVjMztcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3QgYSB2ZWN0b3JcbiAgICovXG4gIGNvbnN0cnVjdE9iamVjdCgpIHtcbiAgICByZXR1cm4gbmV3IFZlYzMoKTtcbiAgfVxuXG59XG5cbmxldCBfQ09MTElTSU9OX1RZUEVTJHNwaGUsIF9DT0xMSVNJT05fVFlQRVMkc3BoZTIsIF9DT0xMSVNJT05fVFlQRVMkYm94QiwgX0NPTExJU0lPTl9UWVBFUyRzcGhlMywgX0NPTExJU0lPTl9UWVBFUyRwbGFuLCBfQ09MTElTSU9OX1RZUEVTJGNvbnYsIF9DT0xMSVNJT05fVFlQRVMkc3BoZTQsIF9DT0xMSVNJT05fVFlQRVMkcGxhbjIsIF9DT0xMSVNJT05fVFlQRVMkYm94QywgX0NPTExJU0lPTl9UWVBFUyRzcGhlNSwgX0NPTExJU0lPTl9UWVBFUyRib3hILCBfQ09MTElTSU9OX1RZUEVTJGNvbnYyLCBfQ09MTElTSU9OX1RZUEVTJHNwaGU2LCBfQ09MTElTSU9OX1RZUEVTJHBsYW4zLCBfQ09MTElTSU9OX1RZUEVTJGJveFAsIF9DT0xMSVNJT05fVFlQRVMkY29udjMsIF9DT0xMSVNJT05fVFlQRVMkY3lsaSwgX0NPTExJU0lPTl9UWVBFUyRzcGhlNywgX0NPTExJU0lPTl9UWVBFUyRwbGFuNCwgX0NPTExJU0lPTl9UWVBFUyRib3hDMiwgX0NPTExJU0lPTl9UWVBFUyRjb252NCwgX0NPTExJU0lPTl9UWVBFUyRoZWlnLCBfQ09MTElTSU9OX1RZUEVTJHBhcnQsIF9DT0xMSVNJT05fVFlQRVMkc3BoZTgsIF9DT0xMSVNJT05fVFlQRVMkcGxhbjU7XG4vLyBOYW1pbmcgcnVsZTogYmFzZWQgb2YgdGhlIG9yZGVyIGluIFNIQVBFX1RZUEVTLFxuLy8gdGhlIGZpcnN0IHBhcnQgb2YgdGhlIG1ldGhvZCBpcyBmb3JtZWQgYnkgdGhlXG4vLyBzaGFwZSB0eXBlIHRoYXQgY29tZXMgYmVmb3JlLCBpbiB0aGUgc2Vjb25kIHBhcnRcbi8vIHRoZXJlIGlzIHRoZSBzaGFwZSB0eXBlIHRoYXQgY29tZXMgYWZ0ZXIgaW4gdGhlIFNIQVBFX1RZUEVTIGxpc3RcbmNvbnN0IENPTExJU0lPTl9UWVBFUyA9IHtcbiAgc3BoZXJlU3BoZXJlOiBTaGFwZS50eXBlcy5TUEhFUkUsXG4gIHNwaGVyZVBsYW5lOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5QTEFORSxcbiAgYm94Qm94OiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5CT1gsXG4gIHNwaGVyZUJveDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuQk9YLFxuICBwbGFuZUJveDogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5CT1gsXG4gIGNvbnZleENvbnZleDogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTixcbiAgc3BoZXJlQ29udmV4OiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OLFxuICBwbGFuZUNvbnZleDogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OLFxuICBib3hDb252ZXg6IFNoYXBlLnR5cGVzLkJPWCB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sXG4gIHNwaGVyZUhlaWdodGZpZWxkOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRCxcbiAgYm94SGVpZ2h0ZmllbGQ6IFNoYXBlLnR5cGVzLkJPWCB8IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxELFxuICBjb252ZXhIZWlnaHRmaWVsZDogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiB8IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxELFxuICBzcGhlcmVQYXJ0aWNsZTogU2hhcGUudHlwZXMuUEFSVElDTEUgfCBTaGFwZS50eXBlcy5TUEhFUkUsXG4gIHBsYW5lUGFydGljbGU6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuUEFSVElDTEUsXG4gIGJveFBhcnRpY2xlOiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5QQVJUSUNMRSxcbiAgY29udmV4UGFydGljbGU6IFNoYXBlLnR5cGVzLlBBUlRJQ0xFIHwgU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTixcbiAgY3lsaW5kZXJDeWxpbmRlcjogU2hhcGUudHlwZXMuQ1lMSU5ERVIsXG4gIHNwaGVyZUN5bGluZGVyOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5DWUxJTkRFUixcbiAgcGxhbmVDeWxpbmRlcjogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5DWUxJTkRFUixcbiAgYm94Q3lsaW5kZXI6IFNoYXBlLnR5cGVzLkJPWCB8IFNoYXBlLnR5cGVzLkNZTElOREVSLFxuICBjb252ZXhDeWxpbmRlcjogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTiB8IFNoYXBlLnR5cGVzLkNZTElOREVSLFxuICBoZWlnaHRmaWVsZEN5bGluZGVyOiBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRCB8IFNoYXBlLnR5cGVzLkNZTElOREVSLFxuICBwYXJ0aWNsZUN5bGluZGVyOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLkNZTElOREVSLFxuICBzcGhlcmVUcmltZXNoOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5UUklNRVNILFxuICBwbGFuZVRyaW1lc2g6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuVFJJTUVTSFxufTtcbl9DT0xMSVNJT05fVFlQRVMkc3BoZSA9IENPTExJU0lPTl9UWVBFUy5zcGhlcmVTcGhlcmU7XG5fQ09MTElTSU9OX1RZUEVTJHNwaGUyID0gQ09MTElTSU9OX1RZUEVTLnNwaGVyZVBsYW5lO1xuX0NPTExJU0lPTl9UWVBFUyRib3hCID0gQ09MTElTSU9OX1RZUEVTLmJveEJveDtcbl9DT0xMSVNJT05fVFlQRVMkc3BoZTMgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlQm94O1xuX0NPTExJU0lPTl9UWVBFUyRwbGFuID0gQ09MTElTSU9OX1RZUEVTLnBsYW5lQm94O1xuX0NPTExJU0lPTl9UWVBFUyRjb252ID0gQ09MTElTSU9OX1RZUEVTLmNvbnZleENvbnZleDtcbl9DT0xMSVNJT05fVFlQRVMkc3BoZTQgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlQ29udmV4O1xuX0NPTExJU0lPTl9UWVBFUyRwbGFuMiA9IENPTExJU0lPTl9UWVBFUy5wbGFuZUNvbnZleDtcbl9DT0xMSVNJT05fVFlQRVMkYm94QyA9IENPTExJU0lPTl9UWVBFUy5ib3hDb252ZXg7XG5fQ09MTElTSU9OX1RZUEVTJHNwaGU1ID0gQ09MTElTSU9OX1RZUEVTLnNwaGVyZUhlaWdodGZpZWxkO1xuX0NPTExJU0lPTl9UWVBFUyRib3hIID0gQ09MTElTSU9OX1RZUEVTLmJveEhlaWdodGZpZWxkO1xuX0NPTExJU0lPTl9UWVBFUyRjb252MiA9IENPTExJU0lPTl9UWVBFUy5jb252ZXhIZWlnaHRmaWVsZDtcbl9DT0xMSVNJT05fVFlQRVMkc3BoZTYgPSBDT0xMSVNJT05fVFlQRVMuc3BoZXJlUGFydGljbGU7XG5fQ09MTElTSU9OX1RZUEVTJHBsYW4zID0gQ09MTElTSU9OX1RZUEVTLnBsYW5lUGFydGljbGU7XG5fQ09MTElTSU9OX1RZUEVTJGJveFAgPSBDT0xMSVNJT05fVFlQRVMuYm94UGFydGljbGU7XG5fQ09MTElTSU9OX1RZUEVTJGNvbnYzID0gQ09MTElTSU9OX1RZUEVTLmNvbnZleFBhcnRpY2xlO1xuX0NPTExJU0lPTl9UWVBFUyRjeWxpID0gQ09MTElTSU9OX1RZUEVTLmN5bGluZGVyQ3lsaW5kZXI7XG5fQ09MTElTSU9OX1RZUEVTJHNwaGU3ID0gQ09MTElTSU9OX1RZUEVTLnNwaGVyZUN5bGluZGVyO1xuX0NPTExJU0lPTl9UWVBFUyRwbGFuNCA9IENPTExJU0lPTl9UWVBFUy5wbGFuZUN5bGluZGVyO1xuX0NPTExJU0lPTl9UWVBFUyRib3hDMiA9IENPTExJU0lPTl9UWVBFUy5ib3hDeWxpbmRlcjtcbl9DT0xMSVNJT05fVFlQRVMkY29udjQgPSBDT0xMSVNJT05fVFlQRVMuY29udmV4Q3lsaW5kZXI7XG5fQ09MTElTSU9OX1RZUEVTJGhlaWcgPSBDT0xMSVNJT05fVFlQRVMuaGVpZ2h0ZmllbGRDeWxpbmRlcjtcbl9DT0xMSVNJT05fVFlQRVMkcGFydCA9IENPTExJU0lPTl9UWVBFUy5wYXJ0aWNsZUN5bGluZGVyO1xuX0NPTExJU0lPTl9UWVBFUyRzcGhlOCA9IENPTExJU0lPTl9UWVBFUy5zcGhlcmVUcmltZXNoO1xuX0NPTExJU0lPTl9UWVBFUyRwbGFuNSA9IENPTExJU0lPTl9UWVBFUy5wbGFuZVRyaW1lc2g7XG5cbi8qKlxuICogSGVscGVyIGNsYXNzIGZvciB0aGUgV29ybGQuIEdlbmVyYXRlcyBDb250YWN0RXF1YXRpb25zLlxuICogQHRvZG8gU3BoZXJlLUNvbnZleFBvbHloZWRyb24gY29udGFjdHNcbiAqIEB0b2RvIENvbnRhY3QgcmVkdWN0aW9uXG4gKiBAdG9kbyBzaG91bGQgbW92ZSBtZXRob2RzIHRvIHByb3RvdHlwZVxuICovXG5jbGFzcyBOYXJyb3dwaGFzZSB7XG4gIC8qKlxuICAgKiBJbnRlcm5hbCBzdG9yYWdlIG9mIHBvb2xlZCBjb250YWN0IHBvaW50cy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFBvb2xlZCB2ZWN0b3JzLlxuICAgKi9cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGVdKCkge1xuICAgIHJldHVybiB0aGlzLnNwaGVyZVNwaGVyZTtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlMl0oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3BoZXJlUGxhbmU7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkYm94Ql0oKSB7XG4gICAgcmV0dXJuIHRoaXMuYm94Qm94O1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGUzXSgpIHtcbiAgICByZXR1cm4gdGhpcy5zcGhlcmVCb3g7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkcGxhbl0oKSB7XG4gICAgcmV0dXJuIHRoaXMucGxhbmVCb3g7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkY29udl0oKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4O1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGU0XSgpIHtcbiAgICByZXR1cm4gdGhpcy5zcGhlcmVDb252ZXg7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkcGxhbjJdKCkge1xuICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4O1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGJveENdKCkge1xuICAgIHJldHVybiB0aGlzLmJveENvbnZleDtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRzcGhlNV0oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3BoZXJlSGVpZ2h0ZmllbGQ7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkYm94SF0oKSB7XG4gICAgcmV0dXJuIHRoaXMuYm94SGVpZ2h0ZmllbGQ7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkY29udjJdKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnZleEhlaWdodGZpZWxkO1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGU2XSgpIHtcbiAgICByZXR1cm4gdGhpcy5zcGhlcmVQYXJ0aWNsZTtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRwbGFuM10oKSB7XG4gICAgcmV0dXJuIHRoaXMucGxhbmVQYXJ0aWNsZTtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRib3hQXSgpIHtcbiAgICByZXR1cm4gdGhpcy5ib3hQYXJ0aWNsZTtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRjb252M10oKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udmV4UGFydGljbGU7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkY3lsaV0oKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4O1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHNwaGU3XSgpIHtcbiAgICByZXR1cm4gdGhpcy5zcGhlcmVDb252ZXg7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkcGxhbjRdKCkge1xuICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4O1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJGJveEMyXSgpIHtcbiAgICByZXR1cm4gdGhpcy5ib3hDb252ZXg7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkY29udjRdKCkge1xuICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleDtcbiAgfVxuXG4gIGdldCBbX0NPTExJU0lPTl9UWVBFUyRoZWlnXSgpIHtcbiAgICByZXR1cm4gdGhpcy5oZWlnaHRmaWVsZEN5bGluZGVyO1xuICB9XG5cbiAgZ2V0IFtfQ09MTElTSU9OX1RZUEVTJHBhcnRdKCkge1xuICAgIHJldHVybiB0aGlzLnBhcnRpY2xlQ3lsaW5kZXI7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkc3BoZThdKCkge1xuICAgIHJldHVybiB0aGlzLnNwaGVyZVRyaW1lc2g7XG4gIH1cblxuICBnZXQgW19DT0xMSVNJT05fVFlQRVMkcGxhbjVdKCkge1xuICAgIHJldHVybiB0aGlzLnBsYW5lVHJpbWVzaDtcbiAgfSAvLyBnZXQgW0NPTExJU0lPTl9UWVBFUy5jb252ZXhUcmltZXNoXSgpIHtcbiAgLy8gICByZXR1cm4gdGhpcy5jb252ZXhUcmltZXNoXG4gIC8vIH1cblxuXG4gIGNvbnN0cnVjdG9yKHdvcmxkKSB7XG4gICAgdGhpcy5jb250YWN0UG9pbnRQb29sID0gdm9pZCAwO1xuICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblBvb2wgPSB2b2lkIDA7XG4gICAgdGhpcy5yZXN1bHQgPSB2b2lkIDA7XG4gICAgdGhpcy5mcmljdGlvblJlc3VsdCA9IHZvaWQgMDtcbiAgICB0aGlzLnYzcG9vbCA9IHZvaWQgMDtcbiAgICB0aGlzLndvcmxkID0gdm9pZCAwO1xuICAgIHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbCA9IHZvaWQgMDtcbiAgICB0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uID0gdm9pZCAwO1xuICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IFtdO1xuICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblBvb2wgPSBbXTtcbiAgICB0aGlzLnJlc3VsdCA9IFtdO1xuICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSBbXTtcbiAgICB0aGlzLnYzcG9vbCA9IG5ldyBWZWMzUG9vbCgpO1xuICAgIHRoaXMud29ybGQgPSB3b3JsZDtcbiAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsO1xuICAgIHRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24gPSBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogTWFrZSBhIGNvbnRhY3Qgb2JqZWN0LCBieSB1c2luZyB0aGUgaW50ZXJuYWwgcG9vbCBvciBjcmVhdGluZyBhIG5ldyBvbmUuXG4gICAqL1xuXG5cbiAgY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCBvdmVycmlkZVNoYXBlQSwgb3ZlcnJpZGVTaGFwZUIpIHtcbiAgICBsZXQgYztcblxuICAgIGlmICh0aGlzLmNvbnRhY3RQb2ludFBvb2wubGVuZ3RoKSB7XG4gICAgICBjID0gdGhpcy5jb250YWN0UG9pbnRQb29sLnBvcCgpO1xuICAgICAgYy5iaSA9IGJpO1xuICAgICAgYy5iaiA9IGJqO1xuICAgIH0gZWxzZSB7XG4gICAgICBjID0gbmV3IENvbnRhY3RFcXVhdGlvbihiaSwgYmopO1xuICAgIH1cblxuICAgIGMuZW5hYmxlZCA9IGJpLmNvbGxpc2lvblJlc3BvbnNlICYmIGJqLmNvbGxpc2lvblJlc3BvbnNlICYmIHNpLmNvbGxpc2lvblJlc3BvbnNlICYmIHNqLmNvbGxpc2lvblJlc3BvbnNlO1xuICAgIGNvbnN0IGNtID0gdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsO1xuICAgIGMucmVzdGl0dXRpb24gPSBjbS5yZXN0aXR1dGlvbjtcbiAgICBjLnNldFNwb29rUGFyYW1zKGNtLmNvbnRhY3RFcXVhdGlvblN0aWZmbmVzcywgY20uY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbiwgdGhpcy53b3JsZC5kdCk7XG4gICAgY29uc3QgbWF0QSA9IHNpLm1hdGVyaWFsIHx8IGJpLm1hdGVyaWFsO1xuICAgIGNvbnN0IG1hdEIgPSBzai5tYXRlcmlhbCB8fCBiai5tYXRlcmlhbDtcblxuICAgIGlmIChtYXRBICYmIG1hdEIgJiYgbWF0QS5yZXN0aXR1dGlvbiA+PSAwICYmIG1hdEIucmVzdGl0dXRpb24gPj0gMCkge1xuICAgICAgYy5yZXN0aXR1dGlvbiA9IG1hdEEucmVzdGl0dXRpb24gKiBtYXRCLnJlc3RpdHV0aW9uO1xuICAgIH1cblxuICAgIGMuc2kgPSBvdmVycmlkZVNoYXBlQSB8fCBzaTtcbiAgICBjLnNqID0gb3ZlcnJpZGVTaGFwZUIgfHwgc2o7XG4gICAgcmV0dXJuIGM7XG4gIH1cblxuICBjcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGNvbnRhY3RFcXVhdGlvbiwgb3V0QXJyYXkpIHtcbiAgICBjb25zdCBib2R5QSA9IGNvbnRhY3RFcXVhdGlvbi5iaTtcbiAgICBjb25zdCBib2R5QiA9IGNvbnRhY3RFcXVhdGlvbi5iajtcbiAgICBjb25zdCBzaGFwZUEgPSBjb250YWN0RXF1YXRpb24uc2k7XG4gICAgY29uc3Qgc2hhcGVCID0gY29udGFjdEVxdWF0aW9uLnNqO1xuICAgIGNvbnN0IHdvcmxkID0gdGhpcy53b3JsZDtcbiAgICBjb25zdCBjbSA9IHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbDsgLy8gSWYgZnJpY3Rpb24gb3IgcmVzdGl0dXRpb24gd2VyZSBzcGVjaWZpZWQgaW4gdGhlIG1hdGVyaWFsLCB1c2UgdGhlbVxuXG4gICAgbGV0IGZyaWN0aW9uID0gY20uZnJpY3Rpb247XG4gICAgY29uc3QgbWF0QSA9IHNoYXBlQS5tYXRlcmlhbCB8fCBib2R5QS5tYXRlcmlhbDtcbiAgICBjb25zdCBtYXRCID0gc2hhcGVCLm1hdGVyaWFsIHx8IGJvZHlCLm1hdGVyaWFsO1xuXG4gICAgaWYgKG1hdEEgJiYgbWF0QiAmJiBtYXRBLmZyaWN0aW9uID49IDAgJiYgbWF0Qi5mcmljdGlvbiA+PSAwKSB7XG4gICAgICBmcmljdGlvbiA9IG1hdEEuZnJpY3Rpb24gKiBtYXRCLmZyaWN0aW9uO1xuICAgIH1cblxuICAgIGlmIChmcmljdGlvbiA+IDApIHtcbiAgICAgIC8vIENyZWF0ZSAyIHRhbmdlbnQgZXF1YXRpb25zXG4gICAgICBjb25zdCBtdWcgPSBmcmljdGlvbiAqIHdvcmxkLmdyYXZpdHkubGVuZ3RoKCk7XG4gICAgICBsZXQgcmVkdWNlZE1hc3MgPSBib2R5QS5pbnZNYXNzICsgYm9keUIuaW52TWFzcztcblxuICAgICAgaWYgKHJlZHVjZWRNYXNzID4gMCkge1xuICAgICAgICByZWR1Y2VkTWFzcyA9IDEgLyByZWR1Y2VkTWFzcztcbiAgICAgIH1cblxuICAgICAgY29uc3QgcG9vbCA9IHRoaXMuZnJpY3Rpb25FcXVhdGlvblBvb2w7XG4gICAgICBjb25zdCBjMSA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJvZHlBLCBib2R5QiwgbXVnICogcmVkdWNlZE1hc3MpO1xuICAgICAgY29uc3QgYzIgPSBwb29sLmxlbmd0aCA/IHBvb2wucG9wKCkgOiBuZXcgRnJpY3Rpb25FcXVhdGlvbihib2R5QSwgYm9keUIsIG11ZyAqIHJlZHVjZWRNYXNzKTtcbiAgICAgIGMxLmJpID0gYzIuYmkgPSBib2R5QTtcbiAgICAgIGMxLmJqID0gYzIuYmogPSBib2R5QjtcbiAgICAgIGMxLm1pbkZvcmNlID0gYzIubWluRm9yY2UgPSAtbXVnICogcmVkdWNlZE1hc3M7XG4gICAgICBjMS5tYXhGb3JjZSA9IGMyLm1heEZvcmNlID0gbXVnICogcmVkdWNlZE1hc3M7IC8vIENvcHkgb3ZlciB0aGUgcmVsYXRpdmUgdmVjdG9yc1xuXG4gICAgICBjMS5yaS5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaSk7XG4gICAgICBjMS5yai5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaik7XG4gICAgICBjMi5yaS5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaSk7XG4gICAgICBjMi5yai5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaik7IC8vIENvbnN0cnVjdCB0YW5nZW50c1xuXG4gICAgICBjb250YWN0RXF1YXRpb24ubmkudGFuZ2VudHMoYzEudCwgYzIudCk7IC8vIFNldCBzcG9vayBwYXJhbXNcblxuICAgICAgYzEuc2V0U3Bvb2tQYXJhbXMoY20uZnJpY3Rpb25FcXVhdGlvblN0aWZmbmVzcywgY20uZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24sIHdvcmxkLmR0KTtcbiAgICAgIGMyLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCB3b3JsZC5kdCk7XG4gICAgICBjMS5lbmFibGVkID0gYzIuZW5hYmxlZCA9IGNvbnRhY3RFcXVhdGlvbi5lbmFibGVkO1xuICAgICAgb3V0QXJyYXkucHVzaChjMSwgYzIpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBUYWtlIHRoZSBhdmVyYWdlIE4gbGF0ZXN0IGNvbnRhY3QgcG9pbnQgb24gdGhlIHBsYW5lLlxuICAgKi9cblxuXG4gIGNyZWF0ZUZyaWN0aW9uRnJvbUF2ZXJhZ2UobnVtQ29udGFjdHMpIHtcbiAgICAvLyBUaGUgbGFzdCBjb250YWN0RXF1YXRpb25cbiAgICBsZXQgYyA9IHRoaXMucmVzdWx0W3RoaXMucmVzdWx0Lmxlbmd0aCAtIDFdOyAvLyBDcmVhdGUgdGhlIHJlc3VsdDogdHdvIFwiYXZlcmFnZVwiIGZyaWN0aW9uIGVxdWF0aW9uc1xuXG4gICAgaWYgKCF0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QoYywgdGhpcy5mcmljdGlvblJlc3VsdCkgfHwgbnVtQ29udGFjdHMgPT09IDEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBmMSA9IHRoaXMuZnJpY3Rpb25SZXN1bHRbdGhpcy5mcmljdGlvblJlc3VsdC5sZW5ndGggLSAyXTtcbiAgICBjb25zdCBmMiA9IHRoaXMuZnJpY3Rpb25SZXN1bHRbdGhpcy5mcmljdGlvblJlc3VsdC5sZW5ndGggLSAxXTtcbiAgICBhdmVyYWdlTm9ybWFsLnNldFplcm8oKTtcbiAgICBhdmVyYWdlQ29udGFjdFBvaW50QS5zZXRaZXJvKCk7XG4gICAgYXZlcmFnZUNvbnRhY3RQb2ludEIuc2V0WmVybygpO1xuICAgIGNvbnN0IGJvZHlBID0gYy5iaTtcbiAgICBjLmJqO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IG51bUNvbnRhY3RzOyBpKyspIHtcbiAgICAgIGMgPSB0aGlzLnJlc3VsdFt0aGlzLnJlc3VsdC5sZW5ndGggLSAxIC0gaV07XG5cbiAgICAgIGlmIChjLmJpICE9PSBib2R5QSkge1xuICAgICAgICBhdmVyYWdlTm9ybWFsLnZhZGQoYy5uaSwgYXZlcmFnZU5vcm1hbCk7XG4gICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnZhZGQoYy5yaSwgYXZlcmFnZUNvbnRhY3RQb2ludEEpO1xuICAgICAgICBhdmVyYWdlQ29udGFjdFBvaW50Qi52YWRkKGMucmosIGF2ZXJhZ2VDb250YWN0UG9pbnRCKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF2ZXJhZ2VOb3JtYWwudnN1YihjLm5pLCBhdmVyYWdlTm9ybWFsKTtcbiAgICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEEudmFkZChjLnJqLCBhdmVyYWdlQ29udGFjdFBvaW50QSk7XG4gICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnZhZGQoYy5yaSwgYXZlcmFnZUNvbnRhY3RQb2ludEIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGludk51bUNvbnRhY3RzID0gMSAvIG51bUNvbnRhY3RzO1xuICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnNjYWxlKGludk51bUNvbnRhY3RzLCBmMS5yaSk7XG4gICAgYXZlcmFnZUNvbnRhY3RQb2ludEIuc2NhbGUoaW52TnVtQ29udGFjdHMsIGYxLnJqKTtcbiAgICBmMi5yaS5jb3B5KGYxLnJpKTsgLy8gU2hvdWxkIGJlIHRoZSBzYW1lXG5cbiAgICBmMi5yai5jb3B5KGYxLnJqKTtcbiAgICBhdmVyYWdlTm9ybWFsLm5vcm1hbGl6ZSgpO1xuICAgIGF2ZXJhZ2VOb3JtYWwudGFuZ2VudHMoZjEudCwgZjIudCk7IC8vIHJldHVybiBlcTtcbiAgfVxuICAvKipcbiAgICogR2VuZXJhdGUgYWxsIGNvbnRhY3RzIGJldHdlZW4gYSBsaXN0IG9mIGJvZHkgcGFpcnNcbiAgICogQHBhcmFtIHAxIEFycmF5IG9mIGJvZHkgaW5kaWNlc1xuICAgKiBAcGFyYW0gcDIgQXJyYXkgb2YgYm9keSBpbmRpY2VzXG4gICAqIEBwYXJhbSByZXN1bHQgQXJyYXkgdG8gc3RvcmUgZ2VuZXJhdGVkIGNvbnRhY3RzXG4gICAqIEBwYXJhbSBvbGRjb250YWN0cyBPcHRpb25hbC4gQXJyYXkgb2YgcmV1c2FibGUgY29udGFjdCBvYmplY3RzXG4gICAqL1xuXG5cbiAgZ2V0Q29udGFjdHMocDEsIHAyLCB3b3JsZCwgcmVzdWx0LCBvbGRjb250YWN0cywgZnJpY3Rpb25SZXN1bHQsIGZyaWN0aW9uUG9vbCkge1xuICAgIC8vIFNhdmUgb2xkIGNvbnRhY3Qgb2JqZWN0c1xuICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IG9sZGNvbnRhY3RzO1xuICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblBvb2wgPSBmcmljdGlvblBvb2w7XG4gICAgdGhpcy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgdGhpcy5mcmljdGlvblJlc3VsdCA9IGZyaWN0aW9uUmVzdWx0O1xuICAgIGNvbnN0IHFpID0gdG1wUXVhdDE7XG4gICAgY29uc3QgcWogPSB0bXBRdWF0MjtcbiAgICBjb25zdCB4aSA9IHRtcFZlYzE7XG4gICAgY29uc3QgeGogPSB0bXBWZWMyO1xuXG4gICAgZm9yIChsZXQgayA9IDAsIE4gPSBwMS5sZW5ndGg7IGsgIT09IE47IGsrKykge1xuICAgICAgLy8gR2V0IGN1cnJlbnQgY29sbGlzaW9uIGJvZGllc1xuICAgICAgY29uc3QgYmkgPSBwMVtrXTtcbiAgICAgIGNvbnN0IGJqID0gcDJba107IC8vIEdldCBjb250YWN0IG1hdGVyaWFsXG5cbiAgICAgIGxldCBib2R5Q29udGFjdE1hdGVyaWFsID0gbnVsbDtcblxuICAgICAgaWYgKGJpLm1hdGVyaWFsICYmIGJqLm1hdGVyaWFsKSB7XG4gICAgICAgIGJvZHlDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5nZXRDb250YWN0TWF0ZXJpYWwoYmkubWF0ZXJpYWwsIGJqLm1hdGVyaWFsKSB8fCBudWxsO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBqdXN0VGVzdCA9IGJpLnR5cGUgJiBCb2R5LktJTkVNQVRJQyAmJiBiai50eXBlICYgQm9keS5TVEFUSUMgfHwgYmkudHlwZSAmIEJvZHkuU1RBVElDICYmIGJqLnR5cGUgJiBCb2R5LktJTkVNQVRJQyB8fCBiaS50eXBlICYgQm9keS5LSU5FTUFUSUMgJiYgYmoudHlwZSAmIEJvZHkuS0lORU1BVElDO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpLnNoYXBlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBiaS5xdWF0ZXJuaW9uLm11bHQoYmkuc2hhcGVPcmllbnRhdGlvbnNbaV0sIHFpKTtcbiAgICAgICAgYmkucXVhdGVybmlvbi52bXVsdChiaS5zaGFwZU9mZnNldHNbaV0sIHhpKTtcbiAgICAgICAgeGkudmFkZChiaS5wb3NpdGlvbiwgeGkpO1xuICAgICAgICBjb25zdCBzaSA9IGJpLnNoYXBlc1tpXTtcblxuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGJqLnNoYXBlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgIC8vIENvbXB1dGUgd29ybGQgdHJhbnNmb3JtIG9mIHNoYXBlc1xuICAgICAgICAgIGJqLnF1YXRlcm5pb24ubXVsdChiai5zaGFwZU9yaWVudGF0aW9uc1tqXSwgcWopO1xuICAgICAgICAgIGJqLnF1YXRlcm5pb24udm11bHQoYmouc2hhcGVPZmZzZXRzW2pdLCB4aik7XG4gICAgICAgICAgeGoudmFkZChiai5wb3NpdGlvbiwgeGopO1xuICAgICAgICAgIGNvbnN0IHNqID0gYmouc2hhcGVzW2pdO1xuXG4gICAgICAgICAgaWYgKCEoc2kuY29sbGlzaW9uRmlsdGVyTWFzayAmIHNqLmNvbGxpc2lvbkZpbHRlckdyb3VwICYmIHNqLmNvbGxpc2lvbkZpbHRlck1hc2sgJiBzaS5jb2xsaXNpb25GaWx0ZXJHcm91cCkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh4aS5kaXN0YW5jZVRvKHhqKSA+IHNpLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2ouYm91bmRpbmdTcGhlcmVSYWRpdXMpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH0gLy8gR2V0IGNvbGxpc2lvbiBtYXRlcmlhbFxuXG5cbiAgICAgICAgICBsZXQgc2hhcGVDb250YWN0TWF0ZXJpYWwgPSBudWxsO1xuXG4gICAgICAgICAgaWYgKHNpLm1hdGVyaWFsICYmIHNqLm1hdGVyaWFsKSB7XG4gICAgICAgICAgICBzaGFwZUNvbnRhY3RNYXRlcmlhbCA9IHdvcmxkLmdldENvbnRhY3RNYXRlcmlhbChzaS5tYXRlcmlhbCwgc2oubWF0ZXJpYWwpIHx8IG51bGw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsID0gc2hhcGVDb250YWN0TWF0ZXJpYWwgfHwgYm9keUNvbnRhY3RNYXRlcmlhbCB8fCB3b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOyAvLyBHZXQgY29udGFjdHNcblxuICAgICAgICAgIGNvbnN0IHJlc29sdmVySW5kZXggPSBzaS50eXBlIHwgc2oudHlwZTtcbiAgICAgICAgICBjb25zdCByZXNvbHZlciA9IHRoaXNbcmVzb2x2ZXJJbmRleF07XG5cbiAgICAgICAgICBpZiAocmVzb2x2ZXIpIHtcbiAgICAgICAgICAgIGxldCByZXR2YWwgPSBmYWxzZTsgLy8gVE8gRE86IGludmVzdGlnYXRlIHdoeSBzcGhlcmVQYXJ0aWNsZSBhbmQgY29udmV4UGFydGljbGVcbiAgICAgICAgICAgIC8vIHJlc29sdmVycyBleHBlY3Qgc2kgYW5kIHNqIHNoYXBlcyB0byBiZSBpbiByZXZlcnNlIG9yZGVyXG4gICAgICAgICAgICAvLyAoaS5lLiBsYXJnZXIgaW50ZWdlciB2YWx1ZSB0eXBlIGZpcnN0IGluc3RlYWQgb2Ygc21hbGxlciBmaXJzdClcblxuICAgICAgICAgICAgaWYgKHNpLnR5cGUgPCBzai50eXBlKSB7XG4gICAgICAgICAgICAgIHJldHZhbCA9IHJlc29sdmVyLmNhbGwodGhpcywgc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHZhbCA9IHJlc29sdmVyLmNhbGwodGhpcywgc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCBzaSwgc2osIGp1c3RUZXN0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJldHZhbCAmJiBqdXN0VGVzdCkge1xuICAgICAgICAgICAgICAvLyBSZWdpc3RlciBvdmVybGFwXG4gICAgICAgICAgICAgIHdvcmxkLnNoYXBlT3ZlcmxhcEtlZXBlci5zZXQoc2kuaWQsIHNqLmlkKTtcbiAgICAgICAgICAgICAgd29ybGQuYm9keU92ZXJsYXBLZWVwZXIuc2V0KGJpLmlkLCBiai5pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3BoZXJlU3BoZXJlKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICByZXR1cm4geGkuZGlzdGFuY2VTcXVhcmVkKHhqKSA8IChzaS5yYWRpdXMgKyBzai5yYWRpdXMpICoqIDI7XG4gICAgfSAvLyBXZSB3aWxsIGhhdmUgb25seSBvbmUgY29udGFjdCBpbiB0aGlzIGNhc2VcblxuXG4gICAgY29uc3QgY29udGFjdEVxID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsgLy8gQ29udGFjdCBub3JtYWxcblxuICAgIHhqLnZzdWIoeGksIGNvbnRhY3RFcS5uaSk7XG4gICAgY29udGFjdEVxLm5pLm5vcm1hbGl6ZSgpOyAvLyBDb250YWN0IHBvaW50IGxvY2F0aW9uc1xuXG4gICAgY29udGFjdEVxLnJpLmNvcHkoY29udGFjdEVxLm5pKTtcbiAgICBjb250YWN0RXEucmouY29weShjb250YWN0RXEubmkpO1xuICAgIGNvbnRhY3RFcS5yaS5zY2FsZShzaS5yYWRpdXMsIGNvbnRhY3RFcS5yaSk7XG4gICAgY29udGFjdEVxLnJqLnNjYWxlKC1zai5yYWRpdXMsIGNvbnRhY3RFcS5yaik7XG4gICAgY29udGFjdEVxLnJpLnZhZGQoeGksIGNvbnRhY3RFcS5yaSk7XG4gICAgY29udGFjdEVxLnJpLnZzdWIoYmkucG9zaXRpb24sIGNvbnRhY3RFcS5yaSk7XG4gICAgY29udGFjdEVxLnJqLnZhZGQoeGosIGNvbnRhY3RFcS5yaik7XG4gICAgY29udGFjdEVxLnJqLnZzdWIoYmoucG9zaXRpb24sIGNvbnRhY3RFcS5yaik7XG4gICAgdGhpcy5yZXN1bHQucHVzaChjb250YWN0RXEpO1xuICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChjb250YWN0RXEsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICB9XG5cbiAgc3BoZXJlUGxhbmUoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICAvLyBXZSB3aWxsIGhhdmUgb25lIGNvbnRhY3QgaW4gdGhpcyBjYXNlXG4gICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7IC8vIENvbnRhY3Qgbm9ybWFsXG5cbiAgICByLm5pLnNldCgwLCAwLCAxKTtcbiAgICBxai52bXVsdChyLm5pLCByLm5pKTtcbiAgICByLm5pLm5lZ2F0ZShyLm5pKTsgLy8gYm9keSBpIGlzIHRoZSBzcGhlcmUsIGZsaXAgbm9ybWFsXG5cbiAgICByLm5pLm5vcm1hbGl6ZSgpOyAvLyBOZWVkZWQ/XG4gICAgLy8gVmVjdG9yIGZyb20gc3BoZXJlIGNlbnRlciB0byBjb250YWN0IHBvaW50XG5cbiAgICByLm5pLnNjYWxlKHNpLnJhZGl1cywgci5yaSk7IC8vIFByb2plY3QgZG93biBzcGhlcmUgb24gcGxhbmVcblxuICAgIHhpLnZzdWIoeGosIHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZSk7XG4gICAgci5uaS5zY2FsZShyLm5pLmRvdChwb2ludF9vbl9wbGFuZV90b19zcGhlcmUpLCBwbGFuZV90b19zcGhlcmVfb3J0aG8pO1xuICAgIHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZS52c3ViKHBsYW5lX3RvX3NwaGVyZV9vcnRobywgci5yaik7IC8vIFRoZSBzcGhlcmUgcG9zaXRpb24gcHJvamVjdGVkIHRvIHBsYW5lXG5cbiAgICBpZiAoLXBvaW50X29uX3BsYW5lX3RvX3NwaGVyZS5kb3Qoci5uaSkgPD0gc2kucmFkaXVzKSB7XG4gICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IC8vIE1ha2UgaXQgcmVsYXRpdmUgdG8gdGhlIGJvZHlcblxuXG4gICAgICBjb25zdCByaSA9IHIucmk7XG4gICAgICBjb25zdCByaiA9IHIucmo7XG4gICAgICByaS52YWRkKHhpLCByaSk7XG4gICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7XG4gICAgICByai52YWRkKHhqLCByaik7XG4gICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7XG4gICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgIH1cbiAgfVxuXG4gIGJveEJveChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsO1xuICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNqLm1hdGVyaWFsO1xuICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlO1xuICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNqLmNvbGxpc2lvblJlc3BvbnNlO1xuICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleChzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7XG4gIH1cblxuICBzcGhlcmVCb3goc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICBjb25zdCB2M3Bvb2wgPSB0aGlzLnYzcG9vbDsgLy8gd2UgcmVmZXIgdG8gdGhlIGJveCBhcyBib2R5IGpcblxuICAgIGNvbnN0IHNpZGVzID0gc3BoZXJlQm94X3NpZGVzO1xuICAgIHhpLnZzdWIoeGosIGJveF90b19zcGhlcmUpO1xuICAgIHNqLmdldFNpZGVOb3JtYWxzKHNpZGVzLCBxaik7XG4gICAgY29uc3QgUiA9IHNpLnJhZGl1cztcblxuICAgIGxldCBmb3VuZCA9IGZhbHNlOyAvLyBTdG9yZSB0aGUgcmVzdWx0aW5nIHNpZGUgcGVuZXRyYXRpb24gaW5mb1xuXG4gICAgY29uc3Qgc2lkZV9ucyA9IHNwaGVyZUJveF9zaWRlX25zO1xuICAgIGNvbnN0IHNpZGVfbnMxID0gc3BoZXJlQm94X3NpZGVfbnMxO1xuICAgIGNvbnN0IHNpZGVfbnMyID0gc3BoZXJlQm94X3NpZGVfbnMyO1xuICAgIGxldCBzaWRlX2ggPSBudWxsO1xuICAgIGxldCBzaWRlX3BlbmV0cmF0aW9ucyA9IDA7XG4gICAgbGV0IHNpZGVfZG90MSA9IDA7XG4gICAgbGV0IHNpZGVfZG90MiA9IDA7XG4gICAgbGV0IHNpZGVfZGlzdGFuY2UgPSBudWxsO1xuXG4gICAgZm9yIChsZXQgaWR4ID0gMCwgbnNpZGVzID0gc2lkZXMubGVuZ3RoOyBpZHggIT09IG5zaWRlcyAmJiBmb3VuZCA9PT0gZmFsc2U7IGlkeCsrKSB7XG4gICAgICAvLyBHZXQgdGhlIHBsYW5lIHNpZGUgbm9ybWFsIChucylcbiAgICAgIGNvbnN0IG5zID0gc3BoZXJlQm94X25zO1xuICAgICAgbnMuY29weShzaWRlc1tpZHhdKTtcbiAgICAgIGNvbnN0IGggPSBucy5sZW5ndGgoKTtcbiAgICAgIG5zLm5vcm1hbGl6ZSgpOyAvLyBUaGUgbm9ybWFsL2Rpc3RhbmNlIGRvdCBwcm9kdWN0IHRlbGxzIHdoaWNoIHNpZGUgb2YgdGhlIHBsYW5lIHdlIGFyZVxuXG4gICAgICBjb25zdCBkb3QgPSBib3hfdG9fc3BoZXJlLmRvdChucyk7XG5cbiAgICAgIGlmIChkb3QgPCBoICsgUiAmJiBkb3QgPiAwKSB7XG4gICAgICAgIC8vIEludGVyc2VjdHMgcGxhbmUuIE5vdyBjaGVjayB0aGUgb3RoZXIgdHdvIGRpbWVuc2lvbnNcbiAgICAgICAgY29uc3QgbnMxID0gc3BoZXJlQm94X25zMTtcbiAgICAgICAgY29uc3QgbnMyID0gc3BoZXJlQm94X25zMjtcbiAgICAgICAgbnMxLmNvcHkoc2lkZXNbKGlkeCArIDEpICUgM10pO1xuICAgICAgICBuczIuY29weShzaWRlc1soaWR4ICsgMikgJSAzXSk7XG4gICAgICAgIGNvbnN0IGgxID0gbnMxLmxlbmd0aCgpO1xuICAgICAgICBjb25zdCBoMiA9IG5zMi5sZW5ndGgoKTtcbiAgICAgICAgbnMxLm5vcm1hbGl6ZSgpO1xuICAgICAgICBuczIubm9ybWFsaXplKCk7XG4gICAgICAgIGNvbnN0IGRvdDEgPSBib3hfdG9fc3BoZXJlLmRvdChuczEpO1xuICAgICAgICBjb25zdCBkb3QyID0gYm94X3RvX3NwaGVyZS5kb3QobnMyKTtcblxuICAgICAgICBpZiAoZG90MSA8IGgxICYmIGRvdDEgPiAtaDEgJiYgZG90MiA8IGgyICYmIGRvdDIgPiAtaDIpIHtcbiAgICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5hYnMoZG90IC0gaCAtIFIpO1xuXG4gICAgICAgICAgaWYgKHNpZGVfZGlzdGFuY2UgPT09IG51bGwgfHwgZGlzdCA8IHNpZGVfZGlzdGFuY2UpIHtcbiAgICAgICAgICAgIHNpZGVfZGlzdGFuY2UgPSBkaXN0O1xuICAgICAgICAgICAgc2lkZV9kb3QxID0gZG90MTtcbiAgICAgICAgICAgIHNpZGVfZG90MiA9IGRvdDI7XG4gICAgICAgICAgICBzaWRlX2ggPSBoO1xuICAgICAgICAgICAgc2lkZV9ucy5jb3B5KG5zKTtcbiAgICAgICAgICAgIHNpZGVfbnMxLmNvcHkobnMxKTtcbiAgICAgICAgICAgIHNpZGVfbnMyLmNvcHkobnMyKTtcbiAgICAgICAgICAgIHNpZGVfcGVuZXRyYXRpb25zKys7XG5cbiAgICAgICAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc2lkZV9wZW5ldHJhdGlvbnMpIHtcbiAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opO1xuICAgICAgc2lkZV9ucy5zY2FsZSgtUiwgci5yaSk7IC8vIFNwaGVyZSByXG5cbiAgICAgIHIubmkuY29weShzaWRlX25zKTtcbiAgICAgIHIubmkubmVnYXRlKHIubmkpOyAvLyBOb3JtYWwgc2hvdWxkIGJlIG91dCBvZiBzcGhlcmVcblxuICAgICAgc2lkZV9ucy5zY2FsZShzaWRlX2gsIHNpZGVfbnMpO1xuICAgICAgc2lkZV9uczEuc2NhbGUoc2lkZV9kb3QxLCBzaWRlX25zMSk7XG4gICAgICBzaWRlX25zLnZhZGQoc2lkZV9uczEsIHNpZGVfbnMpO1xuICAgICAgc2lkZV9uczIuc2NhbGUoc2lkZV9kb3QyLCBzaWRlX25zMik7XG4gICAgICBzaWRlX25zLnZhZGQoc2lkZV9uczIsIHIucmopOyAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllc1xuXG4gICAgICByLnJpLnZhZGQoeGksIHIucmkpO1xuICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTtcbiAgICAgIHIucmoudmFkZCh4aiwgci5yaik7XG4gICAgICByLnJqLnZzdWIoYmoucG9zaXRpb24sIHIucmopO1xuICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICB9IC8vIENoZWNrIGNvcm5lcnNcblxuXG4gICAgbGV0IHJqID0gdjNwb29sLmdldCgpO1xuICAgIGNvbnN0IHNwaGVyZV90b19jb3JuZXIgPSBzcGhlcmVCb3hfc3BoZXJlX3RvX2Nvcm5lcjtcblxuICAgIGZvciAobGV0IGogPSAwOyBqICE9PSAyICYmICFmb3VuZDsgaisrKSB7XG4gICAgICBmb3IgKGxldCBrID0gMDsgayAhPT0gMiAmJiAhZm91bmQ7IGsrKykge1xuICAgICAgICBmb3IgKGxldCBsID0gMDsgbCAhPT0gMiAmJiAhZm91bmQ7IGwrKykge1xuICAgICAgICAgIHJqLnNldCgwLCAwLCAwKTtcblxuICAgICAgICAgIGlmIChqKSB7XG4gICAgICAgICAgICByai52YWRkKHNpZGVzWzBdLCByaik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJqLnZzdWIoc2lkZXNbMF0sIHJqKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaykge1xuICAgICAgICAgICAgcmoudmFkZChzaWRlc1sxXSwgcmopO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByai52c3ViKHNpZGVzWzFdLCByaik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGwpIHtcbiAgICAgICAgICAgIHJqLnZhZGQoc2lkZXNbMl0sIHJqKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmoudnN1YihzaWRlc1syXSwgcmopO1xuICAgICAgICAgIH0gLy8gV29ybGQgcG9zaXRpb24gb2YgY29ybmVyXG5cblxuICAgICAgICAgIHhqLnZhZGQocmosIHNwaGVyZV90b19jb3JuZXIpO1xuICAgICAgICAgIHNwaGVyZV90b19jb3JuZXIudnN1Yih4aSwgc3BoZXJlX3RvX2Nvcm5lcik7XG5cbiAgICAgICAgICBpZiAoc3BoZXJlX3RvX2Nvcm5lci5sZW5ndGhTcXVhcmVkKCkgPCBSICogUikge1xuICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTtcbiAgICAgICAgICAgIHIucmkuY29weShzcGhlcmVfdG9fY29ybmVyKTtcbiAgICAgICAgICAgIHIucmkubm9ybWFsaXplKCk7XG4gICAgICAgICAgICByLm5pLmNvcHkoci5yaSk7XG4gICAgICAgICAgICByLnJpLnNjYWxlKFIsIHIucmkpO1xuICAgICAgICAgICAgci5yai5jb3B5KHJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXNcblxuICAgICAgICAgICAgci5yaS52YWRkKHhpLCByLnJpKTtcbiAgICAgICAgICAgIHIucmkudnN1YihiaS5wb3NpdGlvbiwgci5yaSk7XG4gICAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopO1xuICAgICAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdjNwb29sLnJlbGVhc2UocmopO1xuICAgIHJqID0gbnVsbDsgLy8gQ2hlY2sgZWRnZXNcblxuICAgIGNvbnN0IGVkZ2VUYW5nZW50ID0gdjNwb29sLmdldCgpO1xuICAgIGNvbnN0IGVkZ2VDZW50ZXIgPSB2M3Bvb2wuZ2V0KCk7XG4gICAgY29uc3QgciA9IHYzcG9vbC5nZXQoKTsgLy8gciA9IGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBjZW50ZXJcblxuICAgIGNvbnN0IG9ydGhvZ29uYWwgPSB2M3Bvb2wuZ2V0KCk7XG4gICAgY29uc3QgZGlzdCA9IHYzcG9vbC5nZXQoKTtcbiAgICBjb25zdCBOc2lkZXMgPSBzaWRlcy5sZW5ndGg7XG5cbiAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gTnNpZGVzICYmICFmb3VuZDsgaisrKSB7XG4gICAgICBmb3IgKGxldCBrID0gMDsgayAhPT0gTnNpZGVzICYmICFmb3VuZDsgaysrKSB7XG4gICAgICAgIGlmIChqICUgMyAhPT0gayAlIDMpIHtcbiAgICAgICAgICAvLyBHZXQgZWRnZSB0YW5nZW50XG4gICAgICAgICAgc2lkZXNba10uY3Jvc3Moc2lkZXNbal0sIGVkZ2VUYW5nZW50KTtcbiAgICAgICAgICBlZGdlVGFuZ2VudC5ub3JtYWxpemUoKTtcbiAgICAgICAgICBzaWRlc1tqXS52YWRkKHNpZGVzW2tdLCBlZGdlQ2VudGVyKTtcbiAgICAgICAgICByLmNvcHkoeGkpO1xuICAgICAgICAgIHIudnN1YihlZGdlQ2VudGVyLCByKTtcbiAgICAgICAgICByLnZzdWIoeGosIHIpO1xuICAgICAgICAgIGNvbnN0IG9ydGhvbm9ybSA9IHIuZG90KGVkZ2VUYW5nZW50KTsgLy8gZGlzdGFuY2UgZnJvbSBlZGdlIGNlbnRlciB0byBzcGhlcmUgY2VudGVyIGluIHRoZSB0YW5nZW50IGRpcmVjdGlvblxuXG4gICAgICAgICAgZWRnZVRhbmdlbnQuc2NhbGUob3J0aG9ub3JtLCBvcnRob2dvbmFsKTsgLy8gVmVjdG9yIGZyb20gZWRnZSBjZW50ZXIgdG8gc3BoZXJlIGNlbnRlciBpbiB0aGUgdGFuZ2VudCBkaXJlY3Rpb25cbiAgICAgICAgICAvLyBGaW5kIHRoZSB0aGlyZCBzaWRlIG9ydGhvZ29uYWwgdG8gdGhpcyBvbmVcblxuICAgICAgICAgIGxldCBsID0gMDtcblxuICAgICAgICAgIHdoaWxlIChsID09PSBqICUgMyB8fCBsID09PSBrICUgMykge1xuICAgICAgICAgICAgbCsrO1xuICAgICAgICAgIH0gLy8gdmVjIGZyb20gZWRnZSBjZW50ZXIgdG8gc3BoZXJlIHByb2plY3RlZCB0byB0aGUgcGxhbmUgb3J0aG9nb25hbCB0byB0aGUgZWRnZSB0YW5nZW50XG5cblxuICAgICAgICAgIGRpc3QuY29weSh4aSk7XG4gICAgICAgICAgZGlzdC52c3ViKG9ydGhvZ29uYWwsIGRpc3QpO1xuICAgICAgICAgIGRpc3QudnN1YihlZGdlQ2VudGVyLCBkaXN0KTtcbiAgICAgICAgICBkaXN0LnZzdWIoeGosIGRpc3QpOyAvLyBEaXN0YW5jZXMgaW4gdGFuZ2VudCBkaXJlY3Rpb24gYW5kIGRpc3RhbmNlIGluIHRoZSBwbGFuZSBvcnRob2dvbmFsIHRvIGl0XG5cbiAgICAgICAgICBjb25zdCB0ZGlzdCA9IE1hdGguYWJzKG9ydGhvbm9ybSk7XG4gICAgICAgICAgY29uc3QgbmRpc3QgPSBkaXN0Lmxlbmd0aCgpO1xuXG4gICAgICAgICAgaWYgKHRkaXN0IDwgc2lkZXNbbF0ubGVuZ3RoKCkgJiYgbmRpc3QgPCBSKSB7XG4gICAgICAgICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7XG4gICAgICAgICAgICBlZGdlQ2VudGVyLnZhZGQob3J0aG9nb25hbCwgcmVzLnJqKTsgLy8gYm94IHJqXG5cbiAgICAgICAgICAgIHJlcy5yai5jb3B5KHJlcy5yaik7XG4gICAgICAgICAgICBkaXN0Lm5lZ2F0ZShyZXMubmkpO1xuICAgICAgICAgICAgcmVzLm5pLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgcmVzLnJpLmNvcHkocmVzLnJqKTtcbiAgICAgICAgICAgIHJlcy5yaS52YWRkKHhqLCByZXMucmkpO1xuICAgICAgICAgICAgcmVzLnJpLnZzdWIoeGksIHJlcy5yaSk7XG4gICAgICAgICAgICByZXMucmkubm9ybWFsaXplKCk7XG4gICAgICAgICAgICByZXMucmkuc2NhbGUoUiwgcmVzLnJpKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXNcblxuICAgICAgICAgICAgcmVzLnJpLnZhZGQoeGksIHJlcy5yaSk7XG4gICAgICAgICAgICByZXMucmkudnN1YihiaS5wb3NpdGlvbiwgcmVzLnJpKTtcbiAgICAgICAgICAgIHJlcy5yai52YWRkKHhqLCByZXMucmopO1xuICAgICAgICAgICAgcmVzLnJqLnZzdWIoYmoucG9zaXRpb24sIHJlcy5yaik7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHJlcyk7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QocmVzLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB2M3Bvb2wucmVsZWFzZShlZGdlVGFuZ2VudCwgZWRnZUNlbnRlciwgciwgb3J0aG9nb25hbCwgZGlzdCk7XG4gIH1cblxuICBwbGFuZUJveChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNqLm1hdGVyaWFsO1xuICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNqLmNvbGxpc2lvblJlc3BvbnNlO1xuICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5pZCA9IHNqLmlkO1xuICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4KHNpLCBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpO1xuICB9XG5cbiAgY29udmV4Q29udmV4KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0LCBmYWNlTGlzdEEsIGZhY2VMaXN0Qikge1xuICAgIGNvbnN0IHNlcEF4aXMgPSBjb252ZXhDb252ZXhfc2VwQXhpcztcblxuICAgIGlmICh4aS5kaXN0YW5jZVRvKHhqKSA+IHNpLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2ouYm91bmRpbmdTcGhlcmVSYWRpdXMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc2kuZmluZFNlcGFyYXRpbmdBeGlzKHNqLCB4aSwgcWksIHhqLCBxaiwgc2VwQXhpcywgZmFjZUxpc3RBLCBmYWNlTGlzdEIpKSB7XG4gICAgICBjb25zdCByZXMgPSBbXTtcbiAgICAgIGNvbnN0IHEgPSBjb252ZXhDb252ZXhfcTtcbiAgICAgIHNpLmNsaXBBZ2FpbnN0SHVsbCh4aSwgcWksIHNqLCB4aiwgcWosIHNlcEF4aXMsIC0xMDAsIDEwMCwgcmVzKTtcbiAgICAgIGxldCBudW1Db250YWN0cyA9IDA7XG5cbiAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSByZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTtcbiAgICAgICAgY29uc3QgcmkgPSByLnJpO1xuICAgICAgICBjb25zdCByaiA9IHIucmo7XG4gICAgICAgIHNlcEF4aXMubmVnYXRlKHIubmkpO1xuICAgICAgICByZXNbal0ubm9ybWFsLm5lZ2F0ZShxKTtcbiAgICAgICAgcS5zY2FsZShyZXNbal0uZGVwdGgsIHEpO1xuICAgICAgICByZXNbal0ucG9pbnQudmFkZChxLCByaSk7XG4gICAgICAgIHJqLmNvcHkocmVzW2pdLnBvaW50KTsgLy8gQ29udGFjdCBwb2ludHMgYXJlIGluIHdvcmxkIGNvb3JkaW5hdGVzLiBUcmFuc2Zvcm0gYmFjayB0byByZWxhdGl2ZVxuXG4gICAgICAgIHJpLnZzdWIoeGksIHJpKTtcbiAgICAgICAgcmoudnN1Yih4aiwgcmopOyAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllc1xuXG4gICAgICAgIHJpLnZhZGQoeGksIHJpKTtcbiAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpO1xuICAgICAgICByai52YWRkKHhqLCByaik7XG4gICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTtcbiAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgICAgbnVtQ29udGFjdHMrKztcblxuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24pIHtcbiAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24gJiYgbnVtQ29udGFjdHMpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkZyb21BdmVyYWdlKG51bUNvbnRhY3RzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzcGhlcmVDb252ZXgoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICBjb25zdCB2M3Bvb2wgPSB0aGlzLnYzcG9vbDtcbiAgICB4aS52c3ViKHhqLCBjb252ZXhfdG9fc3BoZXJlKTtcbiAgICBjb25zdCBub3JtYWxzID0gc2ouZmFjZU5vcm1hbHM7XG4gICAgY29uc3QgZmFjZXMgPSBzai5mYWNlcztcbiAgICBjb25zdCB2ZXJ0cyA9IHNqLnZlcnRpY2VzO1xuICAgIGNvbnN0IFIgPSBzaS5yYWRpdXM7XG4gICAgLy8gICAgIHJldHVybjtcbiAgICAvLyB9XG5cbiAgICBsZXQgZm91bmQgPSBmYWxzZTsgLy8gQ2hlY2sgY29ybmVyc1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IHZlcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCB2ID0gdmVydHNbaV07IC8vIFdvcmxkIHBvc2l0aW9uIG9mIGNvcm5lclxuXG4gICAgICBjb25zdCB3b3JsZENvcm5lciA9IHNwaGVyZUNvbnZleF93b3JsZENvcm5lcjtcbiAgICAgIHFqLnZtdWx0KHYsIHdvcmxkQ29ybmVyKTtcbiAgICAgIHhqLnZhZGQod29ybGRDb3JuZXIsIHdvcmxkQ29ybmVyKTtcbiAgICAgIGNvbnN0IHNwaGVyZV90b19jb3JuZXIgPSBzcGhlcmVDb252ZXhfc3BoZXJlVG9Db3JuZXI7XG4gICAgICB3b3JsZENvcm5lci52c3ViKHhpLCBzcGhlcmVfdG9fY29ybmVyKTtcblxuICAgICAgaWYgKHNwaGVyZV90b19jb3JuZXIubGVuZ3RoU3F1YXJlZCgpIDwgUiAqIFIpIHtcbiAgICAgICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opO1xuICAgICAgICByLnJpLmNvcHkoc3BoZXJlX3RvX2Nvcm5lcik7XG4gICAgICAgIHIucmkubm9ybWFsaXplKCk7XG4gICAgICAgIHIubmkuY29weShyLnJpKTtcbiAgICAgICAgci5yaS5zY2FsZShSLCByLnJpKTtcbiAgICAgICAgd29ybGRDb3JuZXIudnN1Yih4aiwgci5yaik7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS5cblxuICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpO1xuICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuXG5cbiAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTtcbiAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTtcbiAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSAvLyBDaGVjayBzaWRlIChwbGFuZSkgaW50ZXJzZWN0aW9uc1xuXG5cbiAgICBmb3IgKGxldCBpID0gMCwgbmZhY2VzID0gZmFjZXMubGVuZ3RoOyBpICE9PSBuZmFjZXMgJiYgZm91bmQgPT09IGZhbHNlOyBpKyspIHtcbiAgICAgIGNvbnN0IG5vcm1hbCA9IG5vcm1hbHNbaV07XG4gICAgICBjb25zdCBmYWNlID0gZmFjZXNbaV07IC8vIEdldCB3b3JsZC10cmFuc2Zvcm1lZCBub3JtYWwgb2YgdGhlIGZhY2VcblxuICAgICAgY29uc3Qgd29ybGROb3JtYWwgPSBzcGhlcmVDb252ZXhfd29ybGROb3JtYWw7XG4gICAgICBxai52bXVsdChub3JtYWwsIHdvcmxkTm9ybWFsKTsgLy8gR2V0IGEgd29ybGQgdmVydGV4IGZyb20gdGhlIGZhY2VcblxuICAgICAgY29uc3Qgd29ybGRQb2ludCA9IHNwaGVyZUNvbnZleF93b3JsZFBvaW50O1xuICAgICAgcWoudm11bHQodmVydHNbZmFjZVswXV0sIHdvcmxkUG9pbnQpO1xuICAgICAgd29ybGRQb2ludC52YWRkKHhqLCB3b3JsZFBvaW50KTsgLy8gR2V0IGEgcG9pbnQgb24gdGhlIHNwaGVyZSwgY2xvc2VzdCB0byB0aGUgZmFjZSBub3JtYWxcblxuICAgICAgY29uc3Qgd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lID0gc3BoZXJlQ29udmV4X3dvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZTtcbiAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1SLCB3b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUpO1xuICAgICAgeGkudmFkZCh3b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUsIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSk7IC8vIFZlY3RvciBmcm9tIGEgZmFjZSBwb2ludCB0byB0aGUgY2xvc2VzdCBwb2ludCBvbiB0aGUgc3BoZXJlXG5cbiAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gc3BoZXJlQ29udmV4X3BlbmV0cmF0aW9uVmVjO1xuICAgICAgd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lLnZzdWIod29ybGRQb2ludCwgcGVuZXRyYXRpb25WZWMpOyAvLyBUaGUgcGVuZXRyYXRpb24uIE5lZ2F0aXZlIHZhbHVlIG1lYW5zIG92ZXJsYXAuXG5cbiAgICAgIGNvbnN0IHBlbmV0cmF0aW9uID0gcGVuZXRyYXRpb25WZWMuZG90KHdvcmxkTm9ybWFsKTtcbiAgICAgIGNvbnN0IHdvcmxkUG9pbnRUb1NwaGVyZSA9IHNwaGVyZUNvbnZleF9zcGhlcmVUb1dvcmxkUG9pbnQ7XG4gICAgICB4aS52c3ViKHdvcmxkUG9pbnQsIHdvcmxkUG9pbnRUb1NwaGVyZSk7XG5cbiAgICAgIGlmIChwZW5ldHJhdGlvbiA8IDAgJiYgd29ybGRQb2ludFRvU3BoZXJlLmRvdCh3b3JsZE5vcm1hbCkgPiAwKSB7XG4gICAgICAgIC8vIEludGVyc2VjdHMgcGxhbmUuIE5vdyBjaGVjayBpZiB0aGUgc3BoZXJlIGlzIGluc2lkZSB0aGUgZmFjZSBwb2x5Z29uXG4gICAgICAgIGNvbnN0IGZhY2VWZXJ0cyA9IFtdOyAvLyBGYWNlIHZlcnRpY2VzLCBpbiB3b3JsZCBjb29yZHNcblxuICAgICAgICBmb3IgKGxldCBqID0gMCwgTnZlcnRzID0gZmFjZS5sZW5ndGg7IGogIT09IE52ZXJ0czsgaisrKSB7XG4gICAgICAgICAgY29uc3Qgd29ybGRWZXJ0ZXggPSB2M3Bvb2wuZ2V0KCk7XG4gICAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVtqXV0sIHdvcmxkVmVydGV4KTtcbiAgICAgICAgICB4ai52YWRkKHdvcmxkVmVydGV4LCB3b3JsZFZlcnRleCk7XG4gICAgICAgICAgZmFjZVZlcnRzLnB1c2god29ybGRWZXJ0ZXgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBvaW50SW5Qb2x5Z29uKGZhY2VWZXJ0cywgd29ybGROb3JtYWwsIHhpKSkge1xuICAgICAgICAgIC8vIElzIHRoZSBzcGhlcmUgY2VudGVyIGluIHRoZSBmYWNlIHBvbHlnb24/XG4gICAgICAgICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7XG4gICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHIucmkpOyAvLyBDb250YWN0IG9mZnNldCwgZnJvbSBzcGhlcmUgY2VudGVyIHRvIGNvbnRhY3RcblxuICAgICAgICAgIHdvcmxkTm9ybWFsLm5lZ2F0ZShyLm5pKTsgLy8gTm9ybWFsIHBvaW50aW5nIG91dCBvZiBzcGhlcmVcblxuICAgICAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjMiA9IHYzcG9vbC5nZXQoKTtcbiAgICAgICAgICB3b3JsZE5vcm1hbC5zY2FsZSgtcGVuZXRyYXRpb24sIHBlbmV0cmF0aW9uVmVjMik7XG4gICAgICAgICAgY29uc3QgcGVuZXRyYXRpb25TcGhlcmVQb2ludCA9IHYzcG9vbC5nZXQoKTtcbiAgICAgICAgICB3b3JsZE5vcm1hbC5zY2FsZSgtUiwgcGVuZXRyYXRpb25TcGhlcmVQb2ludCk7IC8veGkudnN1Yih4aikudmFkZChwZW5ldHJhdGlvblNwaGVyZVBvaW50KS52YWRkKHBlbmV0cmF0aW9uVmVjMiAsIHIucmopO1xuXG4gICAgICAgICAgeGkudnN1Yih4aiwgci5yaik7XG4gICAgICAgICAgci5yai52YWRkKHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQsIHIucmopO1xuICAgICAgICAgIHIucmoudmFkZChwZW5ldHJhdGlvblZlYzIsIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuXG5cbiAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopO1xuICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS5cblxuICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7XG4gICAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTtcbiAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwZW5ldHJhdGlvblZlYzIpO1xuICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQpO1xuICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7XG4gICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOyAvLyBSZWxlYXNlIHdvcmxkIHZlcnRpY2VzXG5cbiAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykge1xuICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoZmFjZVZlcnRzW2pdKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm47IC8vIFdlIG9ubHkgZXhwZWN0ICpvbmUqIGZhY2UgY29udGFjdFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEVkZ2U/XG4gICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IGZhY2UubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIC8vIEdldCB0d28gd29ybGQgdHJhbnNmb3JtZWQgdmVydGljZXNcbiAgICAgICAgICAgIGNvbnN0IHYxID0gdjNwb29sLmdldCgpO1xuICAgICAgICAgICAgY29uc3QgdjIgPSB2M3Bvb2wuZ2V0KCk7XG4gICAgICAgICAgICBxai52bXVsdCh2ZXJ0c1tmYWNlWyhqICsgMSkgJSBmYWNlLmxlbmd0aF1dLCB2MSk7XG4gICAgICAgICAgICBxai52bXVsdCh2ZXJ0c1tmYWNlWyhqICsgMikgJSBmYWNlLmxlbmd0aF1dLCB2Mik7XG4gICAgICAgICAgICB4ai52YWRkKHYxLCB2MSk7XG4gICAgICAgICAgICB4ai52YWRkKHYyLCB2Mik7IC8vIENvbnN0cnVjdCBlZGdlIHZlY3RvclxuXG4gICAgICAgICAgICBjb25zdCBlZGdlID0gc3BoZXJlQ29udmV4X2VkZ2U7XG4gICAgICAgICAgICB2Mi52c3ViKHYxLCBlZGdlKTsgLy8gQ29uc3RydWN0IHRoZSBzYW1lIHZlY3RvciwgYnV0IG5vcm1hbGl6ZWRcblxuICAgICAgICAgICAgY29uc3QgZWRnZVVuaXQgPSBzcGhlcmVDb252ZXhfZWRnZVVuaXQ7XG4gICAgICAgICAgICBlZGdlLnVuaXQoZWRnZVVuaXQpOyAvLyBwIGlzIHhpIHByb2plY3RlZCBvbnRvIHRoZSBlZGdlXG5cbiAgICAgICAgICAgIGNvbnN0IHAgPSB2M3Bvb2wuZ2V0KCk7XG4gICAgICAgICAgICBjb25zdCB2MV90b194aSA9IHYzcG9vbC5nZXQoKTtcbiAgICAgICAgICAgIHhpLnZzdWIodjEsIHYxX3RvX3hpKTtcbiAgICAgICAgICAgIGNvbnN0IGRvdCA9IHYxX3RvX3hpLmRvdChlZGdlVW5pdCk7XG4gICAgICAgICAgICBlZGdlVW5pdC5zY2FsZShkb3QsIHApO1xuICAgICAgICAgICAgcC52YWRkKHYxLCBwKTsgLy8gQ29tcHV0ZSBhIHZlY3RvciBmcm9tIHAgdG8gdGhlIGNlbnRlciBvZiB0aGUgc3BoZXJlXG5cbiAgICAgICAgICAgIGNvbnN0IHhpX3RvX3AgPSB2M3Bvb2wuZ2V0KCk7XG4gICAgICAgICAgICBwLnZzdWIoeGksIHhpX3RvX3ApOyAvLyBDb2xsaXNpb24gaWYgdGhlIGVkZ2Utc3BoZXJlIGRpc3RhbmNlIGlzIGxlc3MgdGhhbiB0aGUgcmFkaXVzXG4gICAgICAgICAgICAvLyBBTkQgaWYgcCBpcyBpbiBiZXR3ZWVuIHYxIGFuZCB2MlxuXG4gICAgICAgICAgICBpZiAoZG90ID4gMCAmJiBkb3QgKiBkb3QgPCBlZGdlLmxlbmd0aFNxdWFyZWQoKSAmJiB4aV90b19wLmxlbmd0aFNxdWFyZWQoKSA8IFIgKiBSKSB7XG4gICAgICAgICAgICAgIC8vIENvbGxpc2lvbiBpZiB0aGUgZWRnZS1zcGhlcmUgZGlzdGFuY2UgaXMgbGVzcyB0aGFuIHRoZSByYWRpdXNcbiAgICAgICAgICAgICAgLy8gRWRnZSBjb250YWN0IVxuICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opO1xuICAgICAgICAgICAgICBwLnZzdWIoeGosIHIucmopO1xuICAgICAgICAgICAgICBwLnZzdWIoeGksIHIubmkpO1xuICAgICAgICAgICAgICByLm5pLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgICByLm5pLnNjYWxlKFIsIHIucmkpOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuXG5cbiAgICAgICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTtcbiAgICAgICAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LlxuXG4gICAgICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7XG4gICAgICAgICAgICAgIHIucmkudnN1YihiaS5wb3NpdGlvbiwgci5yaSk7XG4gICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7XG4gICAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsgLy8gUmVsZWFzZSB3b3JsZCB2ZXJ0aWNlc1xuXG4gICAgICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOZmFjZXZlcnRzID0gZmFjZVZlcnRzLmxlbmd0aDsgaiAhPT0gTmZhY2V2ZXJ0czsgaisrKSB7XG4gICAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoZmFjZVZlcnRzW2pdKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxKTtcbiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjIpO1xuICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwKTtcbiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoeGlfdG9fcCk7XG4gICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxX3RvX3hpKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MSk7XG4gICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2Mik7XG4gICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwKTtcbiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHhpX3RvX3ApO1xuICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjFfdG9feGkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSAvLyBSZWxlYXNlIHdvcmxkIHZlcnRpY2VzXG5cblxuICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykge1xuICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwbGFuZUNvbnZleChwbGFuZVNoYXBlLCBjb252ZXhTaGFwZSwgcGxhbmVQb3NpdGlvbiwgY29udmV4UG9zaXRpb24sIHBsYW5lUXVhdCwgY29udmV4UXVhdCwgcGxhbmVCb2R5LCBjb252ZXhCb2R5LCBzaSwgc2osIGp1c3RUZXN0KSB7XG4gICAgLy8gU2ltcGx5IHJldHVybiB0aGUgcG9pbnRzIGJlaGluZCB0aGUgcGxhbmUuXG4gICAgY29uc3Qgd29ybGRWZXJ0ZXggPSBwbGFuZUNvbnZleF92O1xuICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gcGxhbmVDb252ZXhfbm9ybWFsO1xuICAgIHdvcmxkTm9ybWFsLnNldCgwLCAwLCAxKTtcbiAgICBwbGFuZVF1YXQudm11bHQod29ybGROb3JtYWwsIHdvcmxkTm9ybWFsKTsgLy8gVHVybiBub3JtYWwgYWNjb3JkaW5nIHRvIHBsYW5lIG9yaWVudGF0aW9uXG5cbiAgICBsZXQgbnVtQ29udGFjdHMgPSAwO1xuICAgIGNvbnN0IHJlbHBvcyA9IHBsYW5lQ29udmV4X3JlbHBvcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBjb252ZXhTaGFwZS52ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgLy8gR2V0IHdvcmxkIGNvbnZleCB2ZXJ0ZXhcbiAgICAgIHdvcmxkVmVydGV4LmNvcHkoY29udmV4U2hhcGUudmVydGljZXNbaV0pO1xuICAgICAgY29udmV4UXVhdC52bXVsdCh3b3JsZFZlcnRleCwgd29ybGRWZXJ0ZXgpO1xuICAgICAgY29udmV4UG9zaXRpb24udmFkZCh3b3JsZFZlcnRleCwgd29ybGRWZXJ0ZXgpO1xuICAgICAgd29ybGRWZXJ0ZXgudnN1YihwbGFuZVBvc2l0aW9uLCByZWxwb3MpO1xuICAgICAgY29uc3QgZG90ID0gd29ybGROb3JtYWwuZG90KHJlbHBvcyk7XG5cbiAgICAgIGlmIChkb3QgPD0gMC4wKSB7XG4gICAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKHBsYW5lQm9keSwgY29udmV4Qm9keSwgcGxhbmVTaGFwZSwgY29udmV4U2hhcGUsIHNpLCBzaik7IC8vIEdldCB2ZXJ0ZXggcG9zaXRpb24gcHJvamVjdGVkIG9uIHBsYW5lXG5cbiAgICAgICAgY29uc3QgcHJvamVjdGVkID0gcGxhbmVDb252ZXhfcHJvamVjdGVkO1xuICAgICAgICB3b3JsZE5vcm1hbC5zY2FsZSh3b3JsZE5vcm1hbC5kb3QocmVscG9zKSwgcHJvamVjdGVkKTtcbiAgICAgICAgd29ybGRWZXJ0ZXgudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7XG4gICAgICAgIHByb2plY3RlZC52c3ViKHBsYW5lUG9zaXRpb24sIHIucmkpOyAvLyBGcm9tIHBsYW5lIHRvIHZlcnRleCBwcm9qZWN0ZWQgb24gcGxhbmVcblxuICAgICAgICByLm5pLmNvcHkod29ybGROb3JtYWwpOyAvLyBDb250YWN0IG5vcm1hbCBpcyB0aGUgcGxhbmUgbm9ybWFsIG91dCBmcm9tIHBsYW5lXG4gICAgICAgIC8vIHJqIGlzIG5vdyBqdXN0IHRoZSB2ZWN0b3IgZnJvbSB0aGUgY29udmV4IGNlbnRlciB0byB0aGUgdmVydGV4XG5cbiAgICAgICAgd29ybGRWZXJ0ZXgudnN1Yihjb252ZXhQb3NpdGlvbiwgci5yaik7IC8vIE1ha2UgaXQgcmVsYXRpdmUgdG8gdGhlIGJvZHlcblxuICAgICAgICByLnJpLnZhZGQocGxhbmVQb3NpdGlvbiwgci5yaSk7XG4gICAgICAgIHIucmkudnN1YihwbGFuZUJvZHkucG9zaXRpb24sIHIucmkpO1xuICAgICAgICByLnJqLnZhZGQoY29udmV4UG9zaXRpb24sIHIucmopO1xuICAgICAgICByLnJqLnZzdWIoY29udmV4Qm9keS5wb3NpdGlvbiwgci5yaik7XG4gICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7XG4gICAgICAgIG51bUNvbnRhY3RzKys7XG5cbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uKSB7XG4gICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24gJiYgbnVtQ29udGFjdHMpIHtcbiAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cyk7XG4gICAgfVxuICB9XG5cbiAgYm94Q29udmV4KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7XG4gICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmNvbGxpc2lvblJlc3BvbnNlID0gc2kuY29sbGlzaW9uUmVzcG9uc2U7XG4gICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4KHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpO1xuICB9XG5cbiAgc3BoZXJlSGVpZ2h0ZmllbGQoc3BoZXJlU2hhcGUsIGhmU2hhcGUsIHNwaGVyZVBvcywgaGZQb3MsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICBjb25zdCBkYXRhID0gaGZTaGFwZS5kYXRhO1xuICAgIGNvbnN0IHJhZGl1cyA9IHNwaGVyZVNoYXBlLnJhZGl1cztcbiAgICBjb25zdCB3ID0gaGZTaGFwZS5lbGVtZW50U2l6ZTtcbiAgICBjb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IHNwaGVyZUhlaWdodGZpZWxkX3RtcDI7IC8vIEdldCBzcGhlcmUgcG9zaXRpb24gdG8gaGVpZ2h0ZmllbGQgbG9jYWwhXG5cbiAgICBjb25zdCBsb2NhbFNwaGVyZVBvcyA9IHNwaGVyZUhlaWdodGZpZWxkX3RtcDE7XG4gICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKGhmUG9zLCBoZlF1YXQsIHNwaGVyZVBvcywgbG9jYWxTcGhlcmVQb3MpOyAvLyBHZXQgdGhlIGluZGV4IG9mIHRoZSBkYXRhIHBvaW50cyB0byB0ZXN0IGFnYWluc3RcblxuICAgIGxldCBpTWluWCA9IE1hdGguZmxvb3IoKGxvY2FsU3BoZXJlUG9zLnggLSByYWRpdXMpIC8gdykgLSAxO1xuICAgIGxldCBpTWF4WCA9IE1hdGguY2VpbCgobG9jYWxTcGhlcmVQb3MueCArIHJhZGl1cykgLyB3KSArIDE7XG4gICAgbGV0IGlNaW5ZID0gTWF0aC5mbG9vcigobG9jYWxTcGhlcmVQb3MueSAtIHJhZGl1cykgLyB3KSAtIDE7XG4gICAgbGV0IGlNYXhZID0gTWF0aC5jZWlsKChsb2NhbFNwaGVyZVBvcy55ICsgcmFkaXVzKSAvIHcpICsgMTsgLy8gQmFpbCBvdXQgaWYgd2UgYXJlIG91dCBvZiB0aGUgdGVycmFpblxuXG4gICAgaWYgKGlNYXhYIDwgMCB8fCBpTWF4WSA8IDAgfHwgaU1pblggPiBkYXRhLmxlbmd0aCB8fCBpTWluWSA+IGRhdGFbMF0ubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfSAvLyBDbGFtcCBpbmRleCB0byBlZGdlc1xuXG5cbiAgICBpZiAoaU1pblggPCAwKSB7XG4gICAgICBpTWluWCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGlNYXhYIDwgMCkge1xuICAgICAgaU1heFggPSAwO1xuICAgIH1cblxuICAgIGlmIChpTWluWSA8IDApIHtcbiAgICAgIGlNaW5ZID0gMDtcbiAgICB9XG5cbiAgICBpZiAoaU1heFkgPCAwKSB7XG4gICAgICBpTWF4WSA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGlNaW5YID49IGRhdGEubGVuZ3RoKSB7XG4gICAgICBpTWluWCA9IGRhdGEubGVuZ3RoIC0gMTtcbiAgICB9XG5cbiAgICBpZiAoaU1heFggPj0gZGF0YS5sZW5ndGgpIHtcbiAgICAgIGlNYXhYID0gZGF0YS5sZW5ndGggLSAxO1xuICAgIH1cblxuICAgIGlmIChpTWF4WSA+PSBkYXRhWzBdLmxlbmd0aCkge1xuICAgICAgaU1heFkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7XG4gICAgfVxuXG4gICAgaWYgKGlNaW5ZID49IGRhdGFbMF0ubGVuZ3RoKSB7XG4gICAgICBpTWluWSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTtcbiAgICB9XG5cbiAgICBjb25zdCBtaW5NYXggPSBbXTtcbiAgICBoZlNoYXBlLmdldFJlY3RNaW5NYXgoaU1pblgsIGlNaW5ZLCBpTWF4WCwgaU1heFksIG1pbk1heCk7XG4gICAgY29uc3QgbWluID0gbWluTWF4WzBdO1xuICAgIGNvbnN0IG1heCA9IG1pbk1heFsxXTsgLy8gQmFpbCBvdXQgaWYgd2UgY2FuJ3QgdG91Y2ggdGhlIGJvdW5kaW5nIGhlaWdodCBib3hcblxuICAgIGlmIChsb2NhbFNwaGVyZVBvcy56IC0gcmFkaXVzID4gbWF4IHx8IGxvY2FsU3BoZXJlUG9zLnogKyByYWRpdXMgPCBtaW4pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDtcblxuICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8IGlNYXhYOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHtcbiAgICAgICAgY29uc3QgbnVtQ29udGFjdHNCZWZvcmUgPSByZXN1bHQubGVuZ3RoO1xuICAgICAgICBsZXQgaW50ZXJzZWN0aW5nID0gZmFsc2U7IC8vIExvd2VyIHRyaWFuZ2xlXG5cbiAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCBmYWxzZSk7XG4gICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpO1xuXG4gICAgICAgIGlmIChzcGhlcmVQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNwaGVyZVNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7XG4gICAgICAgICAgaW50ZXJzZWN0aW5nID0gdGhpcy5zcGhlcmVDb252ZXgoc3BoZXJlU2hhcGUsIGhmU2hhcGUucGlsbGFyQ29udmV4LCBzcGhlcmVQb3MsIHdvcmxkUGlsbGFyT2Zmc2V0LCBzcGhlcmVRdWF0LCBoZlF1YXQsIHNwaGVyZUJvZHksIGhmQm9keSwgc3BoZXJlU2hhcGUsIGhmU2hhcGUsIGp1c3RUZXN0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSAvLyBVcHBlciB0cmlhbmdsZVxuXG5cbiAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCB0cnVlKTtcbiAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKGhmUG9zLCBoZlF1YXQsIGhmU2hhcGUucGlsbGFyT2Zmc2V0LCB3b3JsZFBpbGxhck9mZnNldCk7XG5cbiAgICAgICAgaWYgKHNwaGVyZVBvcy5kaXN0YW5jZVRvKHdvcmxkUGlsbGFyT2Zmc2V0KSA8IGhmU2hhcGUucGlsbGFyQ29udmV4LmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc3BoZXJlU2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXMpIHtcbiAgICAgICAgICBpbnRlcnNlY3RpbmcgPSB0aGlzLnNwaGVyZUNvbnZleChzcGhlcmVTaGFwZSwgaGZTaGFwZS5waWxsYXJDb252ZXgsIHNwaGVyZVBvcywgd29ybGRQaWxsYXJPZmZzZXQsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCBzcGhlcmVTaGFwZSwgaGZTaGFwZSwganVzdFRlc3QpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbnVtQ29udGFjdHMgPSByZXN1bHQubGVuZ3RoIC0gbnVtQ29udGFjdHNCZWZvcmU7XG5cbiAgICAgICAgaWYgKG51bUNvbnRhY3RzID4gMikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvKlxuICAgICAgICAgIC8vIFNraXAgYWxsIGJ1dCAxXG4gICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBudW1Db250YWN0cyAtIDE7IGsrKykge1xuICAgICAgICAgICAgICByZXN1bHQucG9wKCk7XG4gICAgICAgICAgfVxuICAgICAgICAqL1xuXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYm94SGVpZ2h0ZmllbGQoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzaS5tYXRlcmlhbDtcbiAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTtcbiAgICByZXR1cm4gdGhpcy5jb252ZXhIZWlnaHRmaWVsZChzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCBzaSwgc2osIGp1c3RUZXN0KTtcbiAgfVxuXG4gIGNvbnZleEhlaWdodGZpZWxkKGNvbnZleFNoYXBlLCBoZlNoYXBlLCBjb252ZXhQb3MsIGhmUG9zLCBjb252ZXhRdWF0LCBoZlF1YXQsIGNvbnZleEJvZHksIGhmQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgY29uc3QgZGF0YSA9IGhmU2hhcGUuZGF0YTtcbiAgICBjb25zdCB3ID0gaGZTaGFwZS5lbGVtZW50U2l6ZTtcbiAgICBjb25zdCByYWRpdXMgPSBjb252ZXhTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cztcbiAgICBjb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IGNvbnZleEhlaWdodGZpZWxkX3RtcDI7XG4gICAgY29uc3QgZmFjZUxpc3QgPSBjb252ZXhIZWlnaHRmaWVsZF9mYWNlTGlzdDsgLy8gR2V0IHNwaGVyZSBwb3NpdGlvbiB0byBoZWlnaHRmaWVsZCBsb2NhbCFcblxuICAgIGNvbnN0IGxvY2FsQ29udmV4UG9zID0gY29udmV4SGVpZ2h0ZmllbGRfdG1wMTtcbiAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUoaGZQb3MsIGhmUXVhdCwgY29udmV4UG9zLCBsb2NhbENvbnZleFBvcyk7IC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdFxuXG4gICAgbGV0IGlNaW5YID0gTWF0aC5mbG9vcigobG9jYWxDb252ZXhQb3MueCAtIHJhZGl1cykgLyB3KSAtIDE7XG4gICAgbGV0IGlNYXhYID0gTWF0aC5jZWlsKChsb2NhbENvbnZleFBvcy54ICsgcmFkaXVzKSAvIHcpICsgMTtcbiAgICBsZXQgaU1pblkgPSBNYXRoLmZsb29yKChsb2NhbENvbnZleFBvcy55IC0gcmFkaXVzKSAvIHcpIC0gMTtcbiAgICBsZXQgaU1heFkgPSBNYXRoLmNlaWwoKGxvY2FsQ29udmV4UG9zLnkgKyByYWRpdXMpIC8gdykgKyAxOyAvLyBCYWlsIG91dCBpZiB3ZSBhcmUgb3V0IG9mIHRoZSB0ZXJyYWluXG5cbiAgICBpZiAoaU1heFggPCAwIHx8IGlNYXhZIDwgMCB8fCBpTWluWCA+IGRhdGEubGVuZ3RoIHx8IGlNaW5ZID4gZGF0YVswXS5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9IC8vIENsYW1wIGluZGV4IHRvIGVkZ2VzXG5cblxuICAgIGlmIChpTWluWCA8IDApIHtcbiAgICAgIGlNaW5YID0gMDtcbiAgICB9XG5cbiAgICBpZiAoaU1heFggPCAwKSB7XG4gICAgICBpTWF4WCA9IDA7XG4gICAgfVxuXG4gICAgaWYgKGlNaW5ZIDwgMCkge1xuICAgICAgaU1pblkgPSAwO1xuICAgIH1cblxuICAgIGlmIChpTWF4WSA8IDApIHtcbiAgICAgIGlNYXhZID0gMDtcbiAgICB9XG5cbiAgICBpZiAoaU1pblggPj0gZGF0YS5sZW5ndGgpIHtcbiAgICAgIGlNaW5YID0gZGF0YS5sZW5ndGggLSAxO1xuICAgIH1cblxuICAgIGlmIChpTWF4WCA+PSBkYXRhLmxlbmd0aCkge1xuICAgICAgaU1heFggPSBkYXRhLmxlbmd0aCAtIDE7XG4gICAgfVxuXG4gICAgaWYgKGlNYXhZID49IGRhdGFbMF0ubGVuZ3RoKSB7XG4gICAgICBpTWF4WSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTtcbiAgICB9XG5cbiAgICBpZiAoaU1pblkgPj0gZGF0YVswXS5sZW5ndGgpIHtcbiAgICAgIGlNaW5ZID0gZGF0YVswXS5sZW5ndGggLSAxO1xuICAgIH1cblxuICAgIGNvbnN0IG1pbk1heCA9IFtdO1xuICAgIGhmU2hhcGUuZ2V0UmVjdE1pbk1heChpTWluWCwgaU1pblksIGlNYXhYLCBpTWF4WSwgbWluTWF4KTtcbiAgICBjb25zdCBtaW4gPSBtaW5NYXhbMF07XG4gICAgY29uc3QgbWF4ID0gbWluTWF4WzFdOyAvLyBCYWlsIG91dCBpZiB3ZSdyZSBjYW50IHRvdWNoIHRoZSBib3VuZGluZyBoZWlnaHQgYm94XG5cbiAgICBpZiAobG9jYWxDb252ZXhQb3MueiAtIHJhZGl1cyA+IG1heCB8fCBsb2NhbENvbnZleFBvcy56ICsgcmFkaXVzIDwgbWluKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDwgaU1heFg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IGlNaW5ZOyBqIDwgaU1heFk7IGorKykge1xuICAgICAgICBsZXQgaW50ZXJzZWN0aW5nID0gZmFsc2U7IC8vIExvd2VyIHRyaWFuZ2xlXG5cbiAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCBmYWxzZSk7XG4gICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpO1xuXG4gICAgICAgIGlmIChjb252ZXhQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7XG4gICAgICAgICAgaW50ZXJzZWN0aW5nID0gdGhpcy5jb252ZXhDb252ZXgoY29udmV4U2hhcGUsIGhmU2hhcGUucGlsbGFyQ29udmV4LCBjb252ZXhQb3MsIHdvcmxkUGlsbGFyT2Zmc2V0LCBjb252ZXhRdWF0LCBoZlF1YXQsIGNvbnZleEJvZHksIGhmQm9keSwgbnVsbCwgbnVsbCwganVzdFRlc3QsIGZhY2VMaXN0LCBudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSAvLyBVcHBlciB0cmlhbmdsZVxuXG5cbiAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCB0cnVlKTtcbiAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKGhmUG9zLCBoZlF1YXQsIGhmU2hhcGUucGlsbGFyT2Zmc2V0LCB3b3JsZFBpbGxhck9mZnNldCk7XG5cbiAgICAgICAgaWYgKGNvbnZleFBvcy5kaXN0YW5jZVRvKHdvcmxkUGlsbGFyT2Zmc2V0KSA8IGhmU2hhcGUucGlsbGFyQ29udmV4LmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgY29udmV4U2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXMpIHtcbiAgICAgICAgICBpbnRlcnNlY3RpbmcgPSB0aGlzLmNvbnZleENvbnZleChjb252ZXhTaGFwZSwgaGZTaGFwZS5waWxsYXJDb252ZXgsIGNvbnZleFBvcywgd29ybGRQaWxsYXJPZmZzZXQsIGNvbnZleFF1YXQsIGhmUXVhdCwgY29udmV4Qm9keSwgaGZCb2R5LCBudWxsLCBudWxsLCBqdXN0VGVzdCwgZmFjZUxpc3QsIG51bGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3BoZXJlUGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICAvLyBUaGUgbm9ybWFsIGlzIHRoZSB1bml0IHZlY3RvciBmcm9tIHNwaGVyZSBjZW50ZXIgdG8gcGFydGljbGUgY2VudGVyXG4gICAgY29uc3Qgbm9ybWFsID0gcGFydGljbGVTcGhlcmVfbm9ybWFsO1xuICAgIG5vcm1hbC5zZXQoMCwgMCwgMSk7XG4gICAgeGkudnN1Yih4aiwgbm9ybWFsKTtcbiAgICBjb25zdCBsZW5ndGhTcXVhcmVkID0gbm9ybWFsLmxlbmd0aFNxdWFyZWQoKTtcblxuICAgIGlmIChsZW5ndGhTcXVhcmVkIDw9IHNqLnJhZGl1cyAqIHNqLnJhZGl1cykge1xuICAgICAgaWYgKGp1c3RUZXN0KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTtcbiAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTtcbiAgICAgIHIucmouY29weShub3JtYWwpO1xuICAgICAgci5yai5zY2FsZShzai5yYWRpdXMsIHIucmopO1xuICAgICAgci5uaS5jb3B5KG5vcm1hbCk7IC8vIENvbnRhY3Qgbm9ybWFsXG5cbiAgICAgIHIubmkubmVnYXRlKHIubmkpO1xuICAgICAgci5yaS5zZXQoMCwgMCwgMCk7IC8vIENlbnRlciBvZiBwYXJ0aWNsZVxuXG4gICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgIH1cbiAgfVxuXG4gIHBsYW5lUGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHtcbiAgICBjb25zdCBub3JtYWwgPSBwYXJ0aWNsZVBsYW5lX25vcm1hbDtcbiAgICBub3JtYWwuc2V0KDAsIDAsIDEpO1xuICAgIGJqLnF1YXRlcm5pb24udm11bHQobm9ybWFsLCBub3JtYWwpOyAvLyBUdXJuIG5vcm1hbCBhY2NvcmRpbmcgdG8gcGxhbmUgb3JpZW50YXRpb25cblxuICAgIGNvbnN0IHJlbHBvcyA9IHBhcnRpY2xlUGxhbmVfcmVscG9zO1xuICAgIHhpLnZzdWIoYmoucG9zaXRpb24sIHJlbHBvcyk7XG4gICAgY29uc3QgZG90ID0gbm9ybWFsLmRvdChyZWxwb3MpO1xuXG4gICAgaWYgKGRvdCA8PSAwLjApIHtcbiAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7XG4gICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbFxuXG4gICAgICByLm5pLm5lZ2F0ZShyLm5pKTtcbiAgICAgIHIucmkuc2V0KDAsIDAsIDApOyAvLyBDZW50ZXIgb2YgcGFydGljbGVcbiAgICAgIC8vIEdldCBwYXJ0aWNsZSBwb3NpdGlvbiBwcm9qZWN0ZWQgb24gcGxhbmVcblxuICAgICAgY29uc3QgcHJvamVjdGVkID0gcGFydGljbGVQbGFuZV9wcm9qZWN0ZWQ7XG4gICAgICBub3JtYWwuc2NhbGUobm9ybWFsLmRvdCh4aSksIHByb2plY3RlZCk7XG4gICAgICB4aS52c3ViKHByb2plY3RlZCwgcHJvamVjdGVkKTsgLy9wcm9qZWN0ZWQudmFkZChiai5wb3NpdGlvbixwcm9qZWN0ZWQpO1xuICAgICAgLy8gcmogaXMgbm93IHRoZSBwcm9qZWN0ZWQgd29ybGQgcG9zaXRpb24gbWludXMgcGxhbmUgcG9zaXRpb25cblxuICAgICAgci5yai5jb3B5KHByb2plY3RlZCk7XG4gICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgIH1cbiAgfVxuXG4gIGJveFBhcnRpY2xlKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7XG4gICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmNvbGxpc2lvblJlc3BvbnNlID0gc2kuY29sbGlzaW9uUmVzcG9uc2U7XG4gICAgcmV0dXJuIHRoaXMuY29udmV4UGFydGljbGUoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7XG4gIH1cblxuICBjb252ZXhQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIGxldCBwZW5ldHJhdGVkRmFjZUluZGV4ID0gLTE7XG4gICAgY29uc3QgcGVuZXRyYXRlZEZhY2VOb3JtYWwgPSBjb252ZXhQYXJ0aWNsZV9wZW5ldHJhdGVkRmFjZU5vcm1hbDtcbiAgICBjb25zdCB3b3JsZFBlbmV0cmF0aW9uVmVjID0gY29udmV4UGFydGljbGVfd29ybGRQZW5ldHJhdGlvblZlYztcbiAgICBsZXQgbWluUGVuZXRyYXRpb24gPSBudWxsO1xuXG4gICAgY29uc3QgbG9jYWwgPSBjb252ZXhQYXJ0aWNsZV9sb2NhbDtcbiAgICBsb2NhbC5jb3B5KHhpKTtcbiAgICBsb2NhbC52c3ViKHhqLCBsb2NhbCk7IC8vIENvbnZlcnQgcG9zaXRpb24gdG8gcmVsYXRpdmUgdGhlIGNvbnZleCBvcmlnaW5cblxuICAgIHFqLmNvbmp1Z2F0ZShjcWopO1xuICAgIGNxai52bXVsdChsb2NhbCwgbG9jYWwpO1xuXG4gICAgaWYgKHNqLnBvaW50SXNJbnNpZGUobG9jYWwpKSB7XG4gICAgICBpZiAoc2oud29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlKSB7XG4gICAgICAgIHNqLmNvbXB1dGVXb3JsZFZlcnRpY2VzKHhqLCBxaik7XG4gICAgICB9XG5cbiAgICAgIGlmIChzai53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUpIHtcbiAgICAgICAgc2ouY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocWopO1xuICAgICAgfSAvLyBGb3IgZWFjaCB3b3JsZCBwb2x5Z29uIGluIHRoZSBwb2x5aGVkcmFcblxuXG4gICAgICBmb3IgKGxldCBpID0gMCwgbmZhY2VzID0gc2ouZmFjZXMubGVuZ3RoOyBpICE9PSBuZmFjZXM7IGkrKykge1xuICAgICAgICAvLyBDb25zdHJ1Y3Qgd29ybGQgZmFjZSB2ZXJ0aWNlc1xuICAgICAgICBjb25zdCB2ZXJ0cyA9IFtzai53b3JsZFZlcnRpY2VzW3NqLmZhY2VzW2ldWzBdXV07XG4gICAgICAgIGNvbnN0IG5vcm1hbCA9IHNqLndvcmxkRmFjZU5vcm1hbHNbaV07IC8vIENoZWNrIGhvdyBtdWNoIHRoZSBwYXJ0aWNsZSBwZW5ldHJhdGVzIHRoZSBwb2x5Z29uIHBsYW5lLlxuXG4gICAgICAgIHhpLnZzdWIodmVydHNbMF0sIGNvbnZleFBhcnRpY2xlX3ZlcnRleFRvUGFydGljbGUpO1xuICAgICAgICBjb25zdCBwZW5ldHJhdGlvbiA9IC1ub3JtYWwuZG90KGNvbnZleFBhcnRpY2xlX3ZlcnRleFRvUGFydGljbGUpO1xuXG4gICAgICAgIGlmIChtaW5QZW5ldHJhdGlvbiA9PT0gbnVsbCB8fCBNYXRoLmFicyhwZW5ldHJhdGlvbikgPCBNYXRoLmFicyhtaW5QZW5ldHJhdGlvbikpIHtcbiAgICAgICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG1pblBlbmV0cmF0aW9uID0gcGVuZXRyYXRpb247XG4gICAgICAgICAgcGVuZXRyYXRlZEZhY2VJbmRleCA9IGk7XG4gICAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwuY29weShub3JtYWwpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwZW5ldHJhdGVkRmFjZUluZGV4ICE9PSAtMSkge1xuICAgICAgICAvLyBTZXR1cCBjb250YWN0XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opO1xuICAgICAgICBwZW5ldHJhdGVkRmFjZU5vcm1hbC5zY2FsZShtaW5QZW5ldHJhdGlvbiwgd29ybGRQZW5ldHJhdGlvblZlYyk7IC8vIHJqIGlzIHRoZSBwYXJ0aWNsZSBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gdGhlIGZhY2VcblxuICAgICAgICB3b3JsZFBlbmV0cmF0aW9uVmVjLnZhZGQoeGksIHdvcmxkUGVuZXRyYXRpb25WZWMpO1xuICAgICAgICB3b3JsZFBlbmV0cmF0aW9uVmVjLnZzdWIoeGosIHdvcmxkUGVuZXRyYXRpb25WZWMpO1xuICAgICAgICByLnJqLmNvcHkod29ybGRQZW5ldHJhdGlvblZlYyk7IC8vY29uc3QgcHJvamVjdGVkVG9GYWNlID0geGkudnN1Yih4aikudmFkZCh3b3JsZFBlbmV0cmF0aW9uVmVjKTtcbiAgICAgICAgLy9wcm9qZWN0ZWRUb0ZhY2UuY29weShyLnJqKTtcbiAgICAgICAgLy9xai52bXVsdChyLnJqLHIucmopO1xuXG4gICAgICAgIHBlbmV0cmF0ZWRGYWNlTm9ybWFsLm5lZ2F0ZShyLm5pKTsgLy8gQ29udGFjdCBub3JtYWxcblxuICAgICAgICByLnJpLnNldCgwLCAwLCAwKTsgLy8gQ2VudGVyIG9mIHBhcnRpY2xlXG5cbiAgICAgICAgY29uc3QgcmkgPSByLnJpO1xuICAgICAgICBjb25zdCByaiA9IHIucmo7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzXG5cbiAgICAgICAgcmkudmFkZCh4aSwgcmkpO1xuICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7XG4gICAgICAgIHJqLnZhZGQoeGosIHJqKTtcbiAgICAgICAgcmoudnN1Yihiai5wb3NpdGlvbiwgcmopO1xuICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1BvaW50IGZvdW5kIGluc2lkZSBjb252ZXgsIGJ1dCBkaWQgbm90IGZpbmQgcGVuZXRyYXRpbmcgZmFjZSEnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBoZWlnaHRmaWVsZEN5bGluZGVyKGhmU2hhcGUsIGNvbnZleFNoYXBlLCBoZlBvcywgY29udmV4UG9zLCBoZlF1YXQsIGNvbnZleFF1YXQsIGhmQm9keSwgY29udmV4Qm9keSwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgcmV0dXJuIHRoaXMuY29udmV4SGVpZ2h0ZmllbGQoY29udmV4U2hhcGUsIGhmU2hhcGUsIGNvbnZleFBvcywgaGZQb3MsIGNvbnZleFF1YXQsIGhmUXVhdCwgY29udmV4Qm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpO1xuICB9XG5cbiAgcGFydGljbGVDeWxpbmRlcihzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIHJldHVybiB0aGlzLmNvbnZleFBhcnRpY2xlKHNqLCBzaSwgeGosIHhpLCBxaiwgcWksIGJqLCBiaSwgcnNpLCByc2osIGp1c3RUZXN0KTtcbiAgfVxuXG4gIHNwaGVyZVRyaW1lc2goc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgc3BoZXJlUG9zLCB0cmltZXNoUG9zLCBzcGhlcmVRdWF0LCB0cmltZXNoUXVhdCwgc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkge1xuICAgIGNvbnN0IGVkZ2VWZXJ0ZXhBID0gc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QTtcbiAgICBjb25zdCBlZGdlVmVydGV4QiA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEI7XG4gICAgY29uc3QgZWRnZVZlY3RvciA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvcjtcbiAgICBjb25zdCBlZGdlVmVjdG9yVW5pdCA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvclVuaXQ7XG4gICAgY29uc3QgbG9jYWxTcGhlcmVQb3MgPSBzcGhlcmVUcmltZXNoX2xvY2FsU3BoZXJlUG9zO1xuICAgIGNvbnN0IHRtcCA9IHNwaGVyZVRyaW1lc2hfdG1wO1xuICAgIGNvbnN0IGxvY2FsU3BoZXJlQUFCQiA9IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCO1xuICAgIGNvbnN0IHYyID0gc3BoZXJlVHJpbWVzaF92MjtcbiAgICBjb25zdCByZWxwb3MgPSBzcGhlcmVUcmltZXNoX3JlbHBvcztcbiAgICBjb25zdCB0cmlhbmdsZXMgPSBzcGhlcmVUcmltZXNoX3RyaWFuZ2xlczsgLy8gQ29udmVydCBzcGhlcmUgcG9zaXRpb24gdG8gbG9jYWwgaW4gdGhlIHRyaW1lc2hcblxuICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgc3BoZXJlUG9zLCBsb2NhbFNwaGVyZVBvcyk7IC8vIEdldCB0aGUgYWFiYiBvZiB0aGUgc3BoZXJlIGxvY2FsbHkgaW4gdGhlIHRyaW1lc2hcblxuICAgIGNvbnN0IHNwaGVyZVJhZGl1cyA9IHNwaGVyZVNoYXBlLnJhZGl1cztcbiAgICBsb2NhbFNwaGVyZUFBQkIubG93ZXJCb3VuZC5zZXQobG9jYWxTcGhlcmVQb3MueCAtIHNwaGVyZVJhZGl1cywgbG9jYWxTcGhlcmVQb3MueSAtIHNwaGVyZVJhZGl1cywgbG9jYWxTcGhlcmVQb3MueiAtIHNwaGVyZVJhZGl1cyk7XG4gICAgbG9jYWxTcGhlcmVBQUJCLnVwcGVyQm91bmQuc2V0KGxvY2FsU3BoZXJlUG9zLnggKyBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnkgKyBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnogKyBzcGhlcmVSYWRpdXMpO1xuICAgIHRyaW1lc2hTaGFwZS5nZXRUcmlhbmdsZXNJbkFBQkIobG9jYWxTcGhlcmVBQUJCLCB0cmlhbmdsZXMpOyAvL2ZvciAobGV0IGkgPSAwOyBpIDwgdHJpbWVzaFNoYXBlLmluZGljZXMubGVuZ3RoIC8gMzsgaSsrKSB0cmlhbmdsZXMucHVzaChpKTsgLy8gQWxsXG4gICAgLy8gVmVydGljZXNcblxuICAgIGNvbnN0IHYgPSBzcGhlcmVUcmltZXNoX3Y7XG4gICAgY29uc3QgcmFkaXVzU3F1YXJlZCA9IHNwaGVyZVNoYXBlLnJhZGl1cyAqIHNwaGVyZVNoYXBlLnJhZGl1cztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJpYW5nbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IDM7IGorKykge1xuICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KHRyaW1lc2hTaGFwZS5pbmRpY2VzW3RyaWFuZ2xlc1tpXSAqIDMgKyBqXSwgdik7IC8vIENoZWNrIHZlcnRleCBvdmVybGFwIGluIHNwaGVyZVxuXG4gICAgICAgIHYudnN1Yihsb2NhbFNwaGVyZVBvcywgcmVscG9zKTtcblxuICAgICAgICBpZiAocmVscG9zLmxlbmd0aFNxdWFyZWQoKSA8PSByYWRpdXNTcXVhcmVkKSB7XG4gICAgICAgICAgLy8gU2FmZSB1cFxuICAgICAgICAgIHYyLmNvcHkodik7XG4gICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB2Miwgdik7XG4gICAgICAgICAgdi52c3ViKHNwaGVyZVBvcywgcmVscG9zKTtcblxuICAgICAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opO1xuICAgICAgICAgIHIubmkuY29weShyZWxwb3MpO1xuICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7IC8vIHJpIGlzIHRoZSB2ZWN0b3IgZnJvbSBzcGhlcmUgY2VudGVyIHRvIHRoZSBzcGhlcmUgc3VyZmFjZVxuXG4gICAgICAgICAgci5yaS5jb3B5KHIubmkpO1xuICAgICAgICAgIHIucmkuc2NhbGUoc3BoZXJlU2hhcGUucmFkaXVzLCByLnJpKTtcbiAgICAgICAgICByLnJpLnZhZGQoc3BoZXJlUG9zLCByLnJpKTtcbiAgICAgICAgICByLnJpLnZzdWIoc3BoZXJlQm9keS5wb3NpdGlvbiwgci5yaSk7XG4gICAgICAgICAgci5yai5jb3B5KHYpO1xuICAgICAgICAgIHIucmoudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7IC8vIFN0b3JlIHJlc3VsdFxuXG4gICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTtcbiAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IC8vIENoZWNrIGFsbCBlZGdlc1xuXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyaWFuZ2xlcy5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHtcbiAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleCh0cmltZXNoU2hhcGUuaW5kaWNlc1t0cmlhbmdsZXNbaV0gKiAzICsgal0sIGVkZ2VWZXJ0ZXhBKTtcbiAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleCh0cmltZXNoU2hhcGUuaW5kaWNlc1t0cmlhbmdsZXNbaV0gKiAzICsgKGogKyAxKSAlIDNdLCBlZGdlVmVydGV4Qik7XG4gICAgICAgIGVkZ2VWZXJ0ZXhCLnZzdWIoZWRnZVZlcnRleEEsIGVkZ2VWZWN0b3IpOyAvLyBQcm9qZWN0IHNwaGVyZSBwb3NpdGlvbiB0byB0aGUgZWRnZVxuXG4gICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIoZWRnZVZlcnRleEIsIHRtcCk7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uQWxvbmdFZGdlQiA9IHRtcC5kb3QoZWRnZVZlY3Rvcik7XG4gICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIoZWRnZVZlcnRleEEsIHRtcCk7XG4gICAgICAgIGxldCBwb3NpdGlvbkFsb25nRWRnZUEgPSB0bXAuZG90KGVkZ2VWZWN0b3IpO1xuXG4gICAgICAgIGlmIChwb3NpdGlvbkFsb25nRWRnZUEgPiAwICYmIHBvc2l0aW9uQWxvbmdFZGdlQiA8IDApIHtcbiAgICAgICAgICAvLyBOb3cgY2hlY2sgdGhlIG9ydGhvZ29uYWwgZGlzdGFuY2UgZnJvbSBlZGdlIHRvIHNwaGVyZSBjZW50ZXJcbiAgICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKGVkZ2VWZXJ0ZXhBLCB0bXApO1xuICAgICAgICAgIGVkZ2VWZWN0b3JVbml0LmNvcHkoZWRnZVZlY3Rvcik7XG4gICAgICAgICAgZWRnZVZlY3RvclVuaXQubm9ybWFsaXplKCk7XG4gICAgICAgICAgcG9zaXRpb25BbG9uZ0VkZ2VBID0gdG1wLmRvdChlZGdlVmVjdG9yVW5pdCk7XG4gICAgICAgICAgZWRnZVZlY3RvclVuaXQuc2NhbGUocG9zaXRpb25BbG9uZ0VkZ2VBLCB0bXApO1xuICAgICAgICAgIHRtcC52YWRkKGVkZ2VWZXJ0ZXhBLCB0bXApOyAvLyB0bXAgaXMgbm93IHRoZSBzcGhlcmUgY2VudGVyIHBvc2l0aW9uIHByb2plY3RlZCB0byB0aGUgZWRnZSwgZGVmaW5lZCBsb2NhbGx5IGluIHRoZSB0cmltZXNoIGZyYW1lXG5cbiAgICAgICAgICBjb25zdCBkaXN0ID0gdG1wLmRpc3RhbmNlVG8obG9jYWxTcGhlcmVQb3MpO1xuXG4gICAgICAgICAgaWYgKGRpc3QgPCBzcGhlcmVTaGFwZS5yYWRpdXMpIHtcbiAgICAgICAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKHNwaGVyZUJvZHksIHRyaW1lc2hCb2R5LCBzcGhlcmVTaGFwZSwgdHJpbWVzaFNoYXBlLCByc2ksIHJzaik7XG4gICAgICAgICAgICB0bXAudnN1Yihsb2NhbFNwaGVyZVBvcywgci5uaSk7XG4gICAgICAgICAgICByLm5pLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgci5uaS5zY2FsZShzcGhlcmVTaGFwZS5yYWRpdXMsIHIucmkpO1xuICAgICAgICAgICAgci5yaS52YWRkKHNwaGVyZVBvcywgci5yaSk7XG4gICAgICAgICAgICByLnJpLnZzdWIoc3BoZXJlQm9keS5wb3NpdGlvbiwgci5yaSk7XG4gICAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodHJpbWVzaFBvcywgdHJpbWVzaFF1YXQsIHRtcCwgdG1wKTtcbiAgICAgICAgICAgIHRtcC52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTtcbiAgICAgICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIubmksIHIubmkpO1xuICAgICAgICAgICAgVHJhbnNmb3JtLnZlY3RvclRvV29ybGRGcmFtZSh0cmltZXNoUXVhdCwgci5yaSwgci5yaSk7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gLy8gVHJpYW5nbGUgZmFjZXNcblxuXG4gICAgY29uc3QgdmEgPSBzcGhlcmVUcmltZXNoX3ZhO1xuICAgIGNvbnN0IHZiID0gc3BoZXJlVHJpbWVzaF92YjtcbiAgICBjb25zdCB2YyA9IHNwaGVyZVRyaW1lc2hfdmM7XG4gICAgY29uc3Qgbm9ybWFsID0gc3BoZXJlVHJpbWVzaF9ub3JtYWw7XG5cbiAgICBmb3IgKGxldCBpID0gMCwgTiA9IHRyaWFuZ2xlcy5sZW5ndGg7IGkgIT09IE47IGkrKykge1xuICAgICAgdHJpbWVzaFNoYXBlLmdldFRyaWFuZ2xlVmVydGljZXModHJpYW5nbGVzW2ldLCB2YSwgdmIsIHZjKTtcbiAgICAgIHRyaW1lc2hTaGFwZS5nZXROb3JtYWwodHJpYW5nbGVzW2ldLCBub3JtYWwpO1xuICAgICAgbG9jYWxTcGhlcmVQb3MudnN1Yih2YSwgdG1wKTtcbiAgICAgIGxldCBkaXN0ID0gdG1wLmRvdChub3JtYWwpO1xuICAgICAgbm9ybWFsLnNjYWxlKGRpc3QsIHRtcCk7XG4gICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKHRtcCwgdG1wKTsgLy8gdG1wIGlzIG5vdyB0aGUgc3BoZXJlIHBvc2l0aW9uIHByb2plY3RlZCB0byB0aGUgdHJpYW5nbGUgcGxhbmVcblxuICAgICAgZGlzdCA9IHRtcC5kaXN0YW5jZVRvKGxvY2FsU3BoZXJlUG9zKTtcblxuICAgICAgaWYgKFJheS5wb2ludEluVHJpYW5nbGUodG1wLCB2YSwgdmIsIHZjKSAmJiBkaXN0IDwgc3BoZXJlU2hhcGUucmFkaXVzKSB7XG4gICAgICAgIGlmIChqdXN0VGVzdCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihzcGhlcmVCb2R5LCB0cmltZXNoQm9keSwgc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opO1xuICAgICAgICB0bXAudnN1Yihsb2NhbFNwaGVyZVBvcywgci5uaSk7XG4gICAgICAgIHIubmkubm9ybWFsaXplKCk7XG4gICAgICAgIHIubmkuc2NhbGUoc3BoZXJlU2hhcGUucmFkaXVzLCByLnJpKTtcbiAgICAgICAgci5yaS52YWRkKHNwaGVyZVBvcywgci5yaSk7XG4gICAgICAgIHIucmkudnN1YihzcGhlcmVCb2R5LnBvc2l0aW9uLCByLnJpKTtcbiAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHRyaW1lc2hQb3MsIHRyaW1lc2hRdWF0LCB0bXAsIHRtcCk7XG4gICAgICAgIHRtcC52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTtcbiAgICAgICAgVHJhbnNmb3JtLnZlY3RvclRvV29ybGRGcmFtZSh0cmltZXNoUXVhdCwgci5uaSwgci5uaSk7XG4gICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUodHJpbWVzaFF1YXQsIHIucmksIHIucmkpO1xuICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpO1xuICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdHJpYW5nbGVzLmxlbmd0aCA9IDA7XG4gIH1cblxuICBwbGFuZVRyaW1lc2gocGxhbmVTaGFwZSwgdHJpbWVzaFNoYXBlLCBwbGFuZVBvcywgdHJpbWVzaFBvcywgcGxhbmVRdWF0LCB0cmltZXNoUXVhdCwgcGxhbmVCb2R5LCB0cmltZXNoQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KSB7XG4gICAgLy8gTWFrZSBjb250YWN0cyFcbiAgICBjb25zdCB2ID0gbmV3IFZlYzMoKTtcbiAgICBjb25zdCBub3JtYWwgPSBwbGFuZVRyaW1lc2hfbm9ybWFsO1xuICAgIG5vcm1hbC5zZXQoMCwgMCwgMSk7XG4gICAgcGxhbmVRdWF0LnZtdWx0KG5vcm1hbCwgbm9ybWFsKTsgLy8gVHVybiBub3JtYWwgYWNjb3JkaW5nIHRvIHBsYW5lXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyaW1lc2hTaGFwZS52ZXJ0aWNlcy5sZW5ndGggLyAzOyBpKyspIHtcbiAgICAgIC8vIEdldCB3b3JsZCB2ZXJ0ZXggZnJvbSB0cmltZXNoXG4gICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KGksIHYpOyAvLyBTYWZlIHVwXG5cbiAgICAgIGNvbnN0IHYyID0gbmV3IFZlYzMoKTtcbiAgICAgIHYyLmNvcHkodik7XG4gICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodHJpbWVzaFBvcywgdHJpbWVzaFF1YXQsIHYyLCB2KTsgLy8gQ2hlY2sgcGxhbmUgc2lkZVxuXG4gICAgICBjb25zdCByZWxwb3MgPSBwbGFuZVRyaW1lc2hfcmVscG9zO1xuICAgICAgdi52c3ViKHBsYW5lUG9zLCByZWxwb3MpO1xuICAgICAgY29uc3QgZG90ID0gbm9ybWFsLmRvdChyZWxwb3MpO1xuXG4gICAgICBpZiAoZG90IDw9IDAuMCkge1xuICAgICAgICBpZiAoanVzdFRlc3QpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihwbGFuZUJvZHksIHRyaW1lc2hCb2R5LCBwbGFuZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTtcbiAgICAgICAgci5uaS5jb3B5KG5vcm1hbCk7IC8vIENvbnRhY3Qgbm9ybWFsIGlzIHRoZSBwbGFuZSBub3JtYWxcbiAgICAgICAgLy8gR2V0IHZlcnRleCBwb3NpdGlvbiBwcm9qZWN0ZWQgb24gcGxhbmVcblxuICAgICAgICBjb25zdCBwcm9qZWN0ZWQgPSBwbGFuZVRyaW1lc2hfcHJvamVjdGVkO1xuICAgICAgICBub3JtYWwuc2NhbGUocmVscG9zLmRvdChub3JtYWwpLCBwcm9qZWN0ZWQpO1xuICAgICAgICB2LnZzdWIocHJvamVjdGVkLCBwcm9qZWN0ZWQpOyAvLyByaSBpcyB0aGUgcHJvamVjdGVkIHdvcmxkIHBvc2l0aW9uIG1pbnVzIHBsYW5lIHBvc2l0aW9uXG5cbiAgICAgICAgci5yaS5jb3B5KHByb2plY3RlZCk7XG4gICAgICAgIHIucmkudnN1YihwbGFuZUJvZHkucG9zaXRpb24sIHIucmkpO1xuICAgICAgICByLnJqLmNvcHkodik7XG4gICAgICAgIHIucmoudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7IC8vIFN0b3JlIHJlc3VsdFxuXG4gICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7XG4gICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTtcbiAgICAgIH1cbiAgICB9XG4gIH0gLy8gY29udmV4VHJpbWVzaChcbiAgLy8gICBzaTogQ29udmV4UG9seWhlZHJvbiwgc2o6IFRyaW1lc2gsIHhpOiBWZWMzLCB4ajogVmVjMywgcWk6IFF1YXRlcm5pb24sIHFqOiBRdWF0ZXJuaW9uLFxuICAvLyAgIGJpOiBCb2R5LCBiajogQm9keSwgcnNpPzogU2hhcGUgfCBudWxsLCByc2o/OiBTaGFwZSB8IG51bGwsXG4gIC8vICAgZmFjZUxpc3RBPzogbnVtYmVyW10gfCBudWxsLCBmYWNlTGlzdEI/OiBudW1iZXJbXSB8IG51bGwsXG4gIC8vICkge1xuICAvLyAgIGNvbnN0IHNlcEF4aXMgPSBjb252ZXhDb252ZXhfc2VwQXhpcztcbiAgLy8gICBpZih4aS5kaXN0YW5jZVRvKHhqKSA+IHNpLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2ouYm91bmRpbmdTcGhlcmVSYWRpdXMpe1xuICAvLyAgICAgICByZXR1cm47XG4gIC8vICAgfVxuICAvLyAgIC8vIENvbnN0cnVjdCBhIHRlbXAgaHVsbCBmb3IgZWFjaCB0cmlhbmdsZVxuICAvLyAgIGNvbnN0IGh1bGxCID0gbmV3IENvbnZleFBvbHloZWRyb24oKTtcbiAgLy8gICBodWxsQi5mYWNlcyA9IFtbMCwxLDJdXTtcbiAgLy8gICBjb25zdCB2YSA9IG5ldyBWZWMzKCk7XG4gIC8vICAgY29uc3QgdmIgPSBuZXcgVmVjMygpO1xuICAvLyAgIGNvbnN0IHZjID0gbmV3IFZlYzMoKTtcbiAgLy8gICBodWxsQi52ZXJ0aWNlcyA9IFtcbiAgLy8gICAgICAgdmEsXG4gIC8vICAgICAgIHZiLFxuICAvLyAgICAgICB2Y1xuICAvLyAgIF07XG4gIC8vICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzai5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykge1xuICAvLyAgICAgICBjb25zdCB0cmlhbmdsZU5vcm1hbCA9IG5ldyBWZWMzKCk7XG4gIC8vICAgICAgIHNqLmdldE5vcm1hbChpLCB0cmlhbmdsZU5vcm1hbCk7XG4gIC8vICAgICAgIGh1bGxCLmZhY2VOb3JtYWxzID0gW3RyaWFuZ2xlTm9ybWFsXTtcbiAgLy8gICAgICAgc2ouZ2V0VHJpYW5nbGVWZXJ0aWNlcyhpLCB2YSwgdmIsIHZjKTtcbiAgLy8gICAgICAgbGV0IGQgPSBzaS50ZXN0U2VwQXhpcyh0cmlhbmdsZU5vcm1hbCwgaHVsbEIsIHhpLCBxaSwgeGosIHFqKTtcbiAgLy8gICAgICAgaWYoIWQpe1xuICAvLyAgICAgICAgICAgdHJpYW5nbGVOb3JtYWwuc2NhbGUoLTEsIHRyaWFuZ2xlTm9ybWFsKTtcbiAgLy8gICAgICAgICAgIGQgPSBzaS50ZXN0U2VwQXhpcyh0cmlhbmdsZU5vcm1hbCwgaHVsbEIsIHhpLCBxaSwgeGosIHFqKTtcbiAgLy8gICAgICAgICAgIGlmKCFkKXtcbiAgLy8gICAgICAgICAgICAgICBjb250aW51ZTtcbiAgLy8gICAgICAgICAgIH1cbiAgLy8gICAgICAgfVxuICAvLyAgICAgICBjb25zdCByZXM6IENvbnZleFBvbHloZWRyb25Db250YWN0UG9pbnRbXSA9IFtdO1xuICAvLyAgICAgICBjb25zdCBxID0gY29udmV4Q29udmV4X3E7XG4gIC8vICAgICAgIHNpLmNsaXBBZ2FpbnN0SHVsbCh4aSxxaSxodWxsQix4aixxaix0cmlhbmdsZU5vcm1hbCwtMTAwLDEwMCxyZXMpO1xuICAvLyAgICAgICBmb3IobGV0IGogPSAwOyBqICE9PSByZXMubGVuZ3RoOyBqKyspe1xuICAvLyAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLGJqLHNpLHNqLHJzaSxyc2opLFxuICAvLyAgICAgICAgICAgICAgIHJpID0gci5yaSxcbiAgLy8gICAgICAgICAgICAgICByaiA9IHIucmo7XG4gIC8vICAgICAgICAgICByLm5pLmNvcHkodHJpYW5nbGVOb3JtYWwpO1xuICAvLyAgICAgICAgICAgci5uaS5uZWdhdGUoci5uaSk7XG4gIC8vICAgICAgICAgICByZXNbal0ubm9ybWFsLm5lZ2F0ZShxKTtcbiAgLy8gICAgICAgICAgIHEubXVsdChyZXNbal0uZGVwdGgsIHEpO1xuICAvLyAgICAgICAgICAgcmVzW2pdLnBvaW50LnZhZGQocSwgcmkpO1xuICAvLyAgICAgICAgICAgcmouY29weShyZXNbal0ucG9pbnQpO1xuICAvLyAgICAgICAgICAgLy8gQ29udGFjdCBwb2ludHMgYXJlIGluIHdvcmxkIGNvb3JkaW5hdGVzLiBUcmFuc2Zvcm0gYmFjayB0byByZWxhdGl2ZVxuICAvLyAgICAgICAgICAgcmkudnN1Yih4aSxyaSk7XG4gIC8vICAgICAgICAgICByai52c3ViKHhqLHJqKTtcbiAgLy8gICAgICAgICAgIC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzXG4gIC8vICAgICAgICAgICByaS52YWRkKHhpLCByaSk7XG4gIC8vICAgICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7XG4gIC8vICAgICAgICAgICByai52YWRkKHhqLCByaik7XG4gIC8vICAgICAgICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7XG4gIC8vICAgICAgICAgICByZXN1bHQucHVzaChyKTtcbiAgLy8gICAgICAgfVxuICAvLyAgIH1cbiAgLy8gfVxuXG5cbn1cbmNvbnN0IGF2ZXJhZ2VOb3JtYWwgPSBuZXcgVmVjMygpO1xuY29uc3QgYXZlcmFnZUNvbnRhY3RQb2ludEEgPSBuZXcgVmVjMygpO1xuY29uc3QgYXZlcmFnZUNvbnRhY3RQb2ludEIgPSBuZXcgVmVjMygpO1xuY29uc3QgdG1wVmVjMSA9IG5ldyBWZWMzKCk7XG5jb25zdCB0bXBWZWMyID0gbmV3IFZlYzMoKTtcbmNvbnN0IHRtcFF1YXQxID0gbmV3IFF1YXRlcm5pb24oKTtcbmNvbnN0IHRtcFF1YXQyID0gbmV3IFF1YXRlcm5pb24oKTtcblxuY29uc3QgcGxhbmVUcmltZXNoX25vcm1hbCA9IG5ldyBWZWMzKCk7XG5jb25zdCBwbGFuZVRyaW1lc2hfcmVscG9zID0gbmV3IFZlYzMoKTtcbmNvbnN0IHBsYW5lVHJpbWVzaF9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlVHJpbWVzaF9ub3JtYWwgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlVHJpbWVzaF9yZWxwb3MgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlVHJpbWVzaF92ID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfdjIgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QSA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVUcmltZXNoX2VkZ2VWZXJ0ZXhCID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvciA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3JVbml0ID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVQb3MgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlVHJpbWVzaF90bXAgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlVHJpbWVzaF92YSA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVUcmltZXNoX3ZiID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZVRyaW1lc2hfdmMgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZUFBQkIgPSBuZXcgQUFCQigpO1xuY29uc3Qgc3BoZXJlVHJpbWVzaF90cmlhbmdsZXMgPSBbXTtcbmNvbnN0IHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZSA9IG5ldyBWZWMzKCk7XG5jb25zdCBwbGFuZV90b19zcGhlcmVfb3J0aG8gPSBuZXcgVmVjMygpOyAvLyBTZWUgaHR0cDovL2J1bGxldHBoeXNpY3MuY29tL0J1bGxldC9CdWxsZXRGdWxsL1NwaGVyZVRyaWFuZ2xlRGV0ZWN0b3JfOGNwcF9zb3VyY2UuaHRtbFxuXG5jb25zdCBwb2ludEluUG9seWdvbl9lZGdlID0gbmV3IFZlYzMoKTtcbmNvbnN0IHBvaW50SW5Qb2x5Z29uX2VkZ2VfeF9ub3JtYWwgPSBuZXcgVmVjMygpO1xuY29uc3QgcG9pbnRJblBvbHlnb25fdnRwID0gbmV3IFZlYzMoKTtcblxuZnVuY3Rpb24gcG9pbnRJblBvbHlnb24odmVydHMsIG5vcm1hbCwgcCkge1xuICBsZXQgcG9zaXRpdmVSZXN1bHQgPSBudWxsO1xuICBjb25zdCBOID0gdmVydHMubGVuZ3RoO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICBjb25zdCB2ID0gdmVydHNbaV07IC8vIEdldCBlZGdlIHRvIHRoZSBuZXh0IHZlcnRleFxuXG4gICAgY29uc3QgZWRnZSA9IHBvaW50SW5Qb2x5Z29uX2VkZ2U7XG4gICAgdmVydHNbKGkgKyAxKSAlIE5dLnZzdWIodiwgZWRnZSk7IC8vIEdldCBjcm9zcyBwcm9kdWN0IGJldHdlZW4gcG9seWdvbiBub3JtYWwgYW5kIHRoZSBlZGdlXG5cbiAgICBjb25zdCBlZGdlX3hfbm9ybWFsID0gcG9pbnRJblBvbHlnb25fZWRnZV94X25vcm1hbDsgLy9jb25zdCBlZGdlX3hfbm9ybWFsID0gbmV3IFZlYzMoKTtcblxuICAgIGVkZ2UuY3Jvc3Mobm9ybWFsLCBlZGdlX3hfbm9ybWFsKTsgLy8gR2V0IHZlY3RvciBiZXR3ZWVuIHBvaW50IGFuZCBjdXJyZW50IHZlcnRleFxuXG4gICAgY29uc3QgdmVydGV4X3RvX3AgPSBwb2ludEluUG9seWdvbl92dHA7XG4gICAgcC52c3ViKHYsIHZlcnRleF90b19wKTsgLy8gVGhpcyBkb3QgcHJvZHVjdCBkZXRlcm1pbmVzIHdoaWNoIHNpZGUgb2YgdGhlIGVkZ2UgdGhlIHBvaW50IGlzXG5cbiAgICBjb25zdCByID0gZWRnZV94X25vcm1hbC5kb3QodmVydGV4X3RvX3ApOyAvLyBJZiBhbGwgc3VjaCBkb3QgcHJvZHVjdHMgaGF2ZSBzYW1lIHNpZ24sIHdlIGFyZSBpbnNpZGUgdGhlIHBvbHlnb24uXG5cbiAgICBpZiAocG9zaXRpdmVSZXN1bHQgPT09IG51bGwgfHwgciA+IDAgJiYgcG9zaXRpdmVSZXN1bHQgPT09IHRydWUgfHwgciA8PSAwICYmIHBvc2l0aXZlUmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgaWYgKHBvc2l0aXZlUmVzdWx0ID09PSBudWxsKSB7XG4gICAgICAgIHBvc2l0aXZlUmVzdWx0ID0gciA+IDA7XG4gICAgICB9XG5cbiAgICAgIGNvbnRpbnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIEVuY291bnRlcmVkIHNvbWUgb3RoZXIgc2lnbi4gRXhpdC5cbiAgICB9XG4gIH0gLy8gSWYgd2UgZ290IGhlcmUsIGFsbCBkb3QgcHJvZHVjdHMgd2VyZSBvZiB0aGUgc2FtZSBzaWduLlxuXG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmNvbnN0IGJveF90b19zcGhlcmUgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlQm94X25zID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUJveF9uczEgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlQm94X25zMiA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVCb3hfc2lkZXMgPSBbbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKSwgbmV3IFZlYzMoKV07XG5jb25zdCBzcGhlcmVCb3hfc3BoZXJlX3RvX2Nvcm5lciA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVCb3hfc2lkZV9ucyA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVCb3hfc2lkZV9uczEgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlQm94X3NpZGVfbnMyID0gbmV3IFZlYzMoKTtcbmNvbnN0IGNvbnZleF90b19zcGhlcmUgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlQ29udmV4X2VkZ2UgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlQ29udmV4X2VkZ2VVbml0ID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUNvbnZleF9zcGhlcmVUb0Nvcm5lciA9IG5ldyBWZWMzKCk7XG5jb25zdCBzcGhlcmVDb252ZXhfd29ybGRDb3JuZXIgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlQ29udmV4X3dvcmxkTm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUNvbnZleF93b3JsZFBvaW50ID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUNvbnZleF93b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUgPSBuZXcgVmVjMygpO1xuY29uc3Qgc3BoZXJlQ29udmV4X3BlbmV0cmF0aW9uVmVjID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUNvbnZleF9zcGhlcmVUb1dvcmxkUG9pbnQgPSBuZXcgVmVjMygpO1xuY29uc3QgcGxhbmVDb252ZXhfdiA9IG5ldyBWZWMzKCk7XG5jb25zdCBwbGFuZUNvbnZleF9ub3JtYWwgPSBuZXcgVmVjMygpO1xuY29uc3QgcGxhbmVDb252ZXhfcmVscG9zID0gbmV3IFZlYzMoKTtcbmNvbnN0IHBsYW5lQ29udmV4X3Byb2plY3RlZCA9IG5ldyBWZWMzKCk7XG5jb25zdCBjb252ZXhDb252ZXhfc2VwQXhpcyA9IG5ldyBWZWMzKCk7XG5jb25zdCBjb252ZXhDb252ZXhfcSA9IG5ldyBWZWMzKCk7XG5jb25zdCBwYXJ0aWNsZVBsYW5lX25vcm1hbCA9IG5ldyBWZWMzKCk7XG5jb25zdCBwYXJ0aWNsZVBsYW5lX3JlbHBvcyA9IG5ldyBWZWMzKCk7XG5jb25zdCBwYXJ0aWNsZVBsYW5lX3Byb2plY3RlZCA9IG5ldyBWZWMzKCk7XG5jb25zdCBwYXJ0aWNsZVNwaGVyZV9ub3JtYWwgPSBuZXcgVmVjMygpOyAvLyBXSVBcblxuY29uc3QgY3FqID0gbmV3IFF1YXRlcm5pb24oKTtcbmNvbnN0IGNvbnZleFBhcnRpY2xlX2xvY2FsID0gbmV3IFZlYzMoKTtcbmNvbnN0IGNvbnZleFBhcnRpY2xlX3BlbmV0cmF0ZWRGYWNlTm9ybWFsID0gbmV3IFZlYzMoKTtcbmNvbnN0IGNvbnZleFBhcnRpY2xlX3ZlcnRleFRvUGFydGljbGUgPSBuZXcgVmVjMygpO1xuY29uc3QgY29udmV4UGFydGljbGVfd29ybGRQZW5ldHJhdGlvblZlYyA9IG5ldyBWZWMzKCk7XG5jb25zdCBjb252ZXhIZWlnaHRmaWVsZF90bXAxID0gbmV3IFZlYzMoKTtcbmNvbnN0IGNvbnZleEhlaWdodGZpZWxkX3RtcDIgPSBuZXcgVmVjMygpO1xuY29uc3QgY29udmV4SGVpZ2h0ZmllbGRfZmFjZUxpc3QgPSBbMF07XG5jb25zdCBzcGhlcmVIZWlnaHRmaWVsZF90bXAxID0gbmV3IFZlYzMoKTtcbmNvbnN0IHNwaGVyZUhlaWdodGZpZWxkX3RtcDIgPSBuZXcgVmVjMygpO1xuXG5jbGFzcyBPdmVybGFwS2VlcGVyIHtcbiAgLyoqXG4gICAqIEB0b2RvIFJlbW92ZSB1c2VsZXNzIGNvbnN0cnVjdG9yXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmN1cnJlbnQgPSB2b2lkIDA7XG4gICAgdGhpcy5wcmV2aW91cyA9IHZvaWQgMDtcbiAgICB0aGlzLmN1cnJlbnQgPSBbXTtcbiAgICB0aGlzLnByZXZpb3VzID0gW107XG4gIH1cbiAgLyoqXG4gICAqIGdldEtleVxuICAgKi9cblxuXG4gIGdldEtleShpLCBqKSB7XG4gICAgaWYgKGogPCBpKSB7XG4gICAgICBjb25zdCB0ZW1wID0gajtcbiAgICAgIGogPSBpO1xuICAgICAgaSA9IHRlbXA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGkgPDwgMTYgfCBqO1xuICB9XG4gIC8qKlxuICAgKiBzZXRcbiAgICovXG5cblxuICBzZXQoaSwgaikge1xuICAgIC8vIEluc2VydGlvbiBzb3J0LiBUaGlzIHdheSB0aGUgZGlmZiB3aWxsIGhhdmUgbGluZWFyIGNvbXBsZXhpdHkuXG4gICAgY29uc3Qga2V5ID0gdGhpcy5nZXRLZXkoaSwgaik7XG4gICAgY29uc3QgY3VycmVudCA9IHRoaXMuY3VycmVudDtcbiAgICBsZXQgaW5kZXggPSAwO1xuXG4gICAgd2hpbGUgKGtleSA+IGN1cnJlbnRbaW5kZXhdKSB7XG4gICAgICBpbmRleCsrO1xuICAgIH1cblxuICAgIGlmIChrZXkgPT09IGN1cnJlbnRbaW5kZXhdKSB7XG4gICAgICByZXR1cm47IC8vIFBhaXIgd2FzIGFscmVhZHkgYWRkZWRcbiAgICB9XG5cbiAgICBmb3IgKGxldCBqID0gY3VycmVudC5sZW5ndGggLSAxOyBqID49IGluZGV4OyBqLS0pIHtcbiAgICAgIGN1cnJlbnRbaiArIDFdID0gY3VycmVudFtqXTtcbiAgICB9XG5cbiAgICBjdXJyZW50W2luZGV4XSA9IGtleTtcbiAgfVxuICAvKipcbiAgICogdGlja1xuICAgKi9cblxuXG4gIHRpY2soKSB7XG4gICAgY29uc3QgdG1wID0gdGhpcy5jdXJyZW50O1xuICAgIHRoaXMuY3VycmVudCA9IHRoaXMucHJldmlvdXM7XG4gICAgdGhpcy5wcmV2aW91cyA9IHRtcDtcbiAgICB0aGlzLmN1cnJlbnQubGVuZ3RoID0gMDtcbiAgfVxuICAvKipcbiAgICogZ2V0RGlmZlxuICAgKi9cblxuXG4gIGdldERpZmYoYWRkaXRpb25zLCByZW1vdmFscykge1xuICAgIGNvbnN0IGEgPSB0aGlzLmN1cnJlbnQ7XG4gICAgY29uc3QgYiA9IHRoaXMucHJldmlvdXM7XG4gICAgY29uc3QgYWwgPSBhLmxlbmd0aDtcbiAgICBjb25zdCBibCA9IGIubGVuZ3RoO1xuICAgIGxldCBqID0gMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWw7IGkrKykge1xuICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgICBjb25zdCBrZXlBID0gYVtpXTtcblxuICAgICAgd2hpbGUgKGtleUEgPiBiW2pdKSB7XG4gICAgICAgIGorKztcbiAgICAgIH1cblxuICAgICAgZm91bmQgPSBrZXlBID09PSBiW2pdO1xuXG4gICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgIHVucGFja0FuZFB1c2goYWRkaXRpb25zLCBrZXlBKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBqID0gMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmw7IGkrKykge1xuICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgICBjb25zdCBrZXlCID0gYltpXTtcblxuICAgICAgd2hpbGUgKGtleUIgPiBhW2pdKSB7XG4gICAgICAgIGorKztcbiAgICAgIH1cblxuICAgICAgZm91bmQgPSBhW2pdID09PSBrZXlCO1xuXG4gICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgIHVucGFja0FuZFB1c2gocmVtb3ZhbHMsIGtleUIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG59XG5cbmZ1bmN0aW9uIHVucGFja0FuZFB1c2goYXJyYXksIGtleSkge1xuICBhcnJheS5wdXNoKChrZXkgJiAweGZmZmYwMDAwKSA+PiAxNiwga2V5ICYgMHgwMDAwZmZmZik7XG59XG5cbi8qKlxuICogVHVwbGVEaWN0aW9uYXJ5XG4gKi9cbmNsYXNzIFR1cGxlRGljdGlvbmFyeSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZGF0YSA9IHtcbiAgICAgIGtleXM6IFtdXG4gICAgfTtcbiAgfVxuXG4gIC8qKiBnZXQgKi9cbiAgZ2V0KGksIGopIHtcbiAgICBpZiAoaSA+IGopIHtcbiAgICAgIC8vIHN3YXBcbiAgICAgIGNvbnN0IHRlbXAgPSBqO1xuICAgICAgaiA9IGk7XG4gICAgICBpID0gdGVtcDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhW2kgKyBcIi1cIiArIGpdO1xuICB9XG4gIC8qKiBzZXQgKi9cblxuXG4gIHNldChpLCBqLCB2YWx1ZSkge1xuICAgIGlmIChpID4gaikge1xuICAgICAgY29uc3QgdGVtcCA9IGo7XG4gICAgICBqID0gaTtcbiAgICAgIGkgPSB0ZW1wO1xuICAgIH1cblxuICAgIGNvbnN0IGtleSA9IGkgKyBcIi1cIiArIGo7IC8vIENoZWNrIGlmIGtleSBhbHJlYWR5IGV4aXN0c1xuXG4gICAgaWYgKCF0aGlzLmdldChpLCBqKSkge1xuICAgICAgdGhpcy5kYXRhLmtleXMucHVzaChrZXkpO1xuICAgIH1cblxuICAgIHRoaXMuZGF0YVtrZXldID0gdmFsdWU7XG4gIH1cbiAgLyoqIHJlc2V0ICovXG5cblxuICByZXNldCgpIHtcbiAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhO1xuICAgIGNvbnN0IGtleXMgPSBkYXRhLmtleXM7XG5cbiAgICB3aGlsZSAoa2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBrZXkgPSBrZXlzLnBvcCgpO1xuICAgICAgZGVsZXRlIGRhdGFba2V5XTtcbiAgICB9XG4gIH1cblxufVxuXG4vKipcbiAqIFRoZSBwaHlzaWNzIHdvcmxkXG4gKi9cbmNsYXNzIFdvcmxkIGV4dGVuZHMgRXZlbnRUYXJnZXQge1xuICAvKipcbiAgICogQ3VycmVudGx5IC8gbGFzdCB1c2VkIHRpbWVzdGVwLiBJcyBzZXQgdG8gLTEgaWYgbm90IGF2YWlsYWJsZS4gVGhpcyB2YWx1ZSBpcyB1cGRhdGVkIGJlZm9yZSBlYWNoIGludGVybmFsIHN0ZXAsIHdoaWNoIG1lYW5zIHRoYXQgaXQgaXMgXCJmcmVzaFwiIGluc2lkZSBldmVudCBjYWxsYmFja3MuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBNYWtlcyBib2RpZXMgZ28gdG8gc2xlZXAgd2hlbiB0aGV5J3ZlIGJlZW4gaW5hY3RpdmUuXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbGwgdGhlIGN1cnJlbnQgY29udGFjdHMgKGluc3RhbmNlcyBvZiBDb250YWN0RXF1YXRpb24pIGluIHRoZSB3b3JsZC5cbiAgICovXG5cbiAgLyoqXG4gICAqIEhvdyBvZnRlbiB0byBub3JtYWxpemUgcXVhdGVybmlvbnMuIFNldCB0byAwIGZvciBldmVyeSBzdGVwLCAxIGZvciBldmVyeSBzZWNvbmQgZXRjLi4gQSBsYXJnZXIgdmFsdWUgaW5jcmVhc2VzIHBlcmZvcm1hbmNlLiBJZiBib2RpZXMgdGVuZCB0byBleHBsb2RlLCBzZXQgdG8gYSBzbWFsbGVyIHZhbHVlICh6ZXJvIHRvIGJlIHN1cmUgbm90aGluZyBjYW4gZ28gd3JvbmcpLlxuICAgKiBAZGVmYXVsdCAwXG4gICAqL1xuXG4gIC8qKlxuICAgKiBTZXQgdG8gdHJ1ZSB0byB1c2UgZmFzdCBxdWF0ZXJuaW9uIG5vcm1hbGl6YXRpb24uIEl0IGlzIG9mdGVuIGVub3VnaCBhY2N1cmF0ZSB0byB1c2UuXG4gICAqIElmIGJvZGllcyB0ZW5kIHRvIGV4cGxvZGUsIHNldCB0byBmYWxzZS5cbiAgICogQGRlZmF1bHQgZmFsc2VcbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSB3YWxsLWNsb2NrIHRpbWUgc2luY2Ugc2ltdWxhdGlvbiBzdGFydC5cbiAgICovXG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiB0aW1lc3RlcHMgdGFrZW4gc2luY2Ugc3RhcnQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBEZWZhdWx0IGFuZCBsYXN0IHRpbWVzdGVwIHNpemVzLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGdyYXZpdHkgb2YgdGhlIHdvcmxkLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIGJyb2FkcGhhc2UgYWxnb3JpdGhtIHRvIHVzZS5cbiAgICogQGRlZmF1bHQgTmFpdmVCcm9hZHBoYXNlXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbGwgYm9kaWVzIGluIHRoaXMgd29ybGRcbiAgICovXG5cbiAgLyoqXG4gICAqIFRydWUgaWYgYW55IGJvZGllcyBhcmUgbm90IHNsZWVwaW5nLCBmYWxzZSBpZiBldmVyeSBib2R5IGlzIHNsZWVwaW5nLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIHNvbHZlciBhbGdvcml0aG0gdG8gdXNlLlxuICAgKiBAZGVmYXVsdCBHU1NvbHZlclxuICAgKi9cblxuICAvKipcbiAgICogY29sbGlzaW9uTWF0cml4XG4gICAqL1xuXG4gIC8qKlxuICAgKiBDb2xsaXNpb25NYXRyaXggZnJvbSB0aGUgcHJldmlvdXMgc3RlcC5cbiAgICovXG5cbiAgLyoqXG4gICAqIEFsbCBhZGRlZCBtYXRlcmlhbHMuXG4gICAqIEBkZXByZWNhdGVkXG4gICAqIEB0b2RvIFJlbW92ZVxuICAgKi9cblxuICAvKipcbiAgICogQWxsIGFkZGVkIGNvbnRhY3RtYXRlcmlhbHMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBVc2VkIHRvIGxvb2sgdXAgYSBDb250YWN0TWF0ZXJpYWwgZ2l2ZW4gdHdvIGluc3RhbmNlcyBvZiBNYXRlcmlhbC5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IG1hdGVyaWFsIG9mIHRoZSBib2RpZXMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGlzIGNvbnRhY3QgbWF0ZXJpYWwgaXMgdXNlZCBpZiBubyBzdWl0YWJsZSBjb250YWN0bWF0ZXJpYWwgaXMgZm91bmQgZm9yIGEgY29udGFjdC5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRpbWUgYWNjdW11bGF0b3IgZm9yIGludGVycG9sYXRpb24uXG4gICAqIEBzZWUgaHR0cHM6Ly9nYWZmZXJvbmdhbWVzLmNvbS9nYW1lLXBoeXNpY3MvZml4LXlvdXItdGltZXN0ZXAvXG4gICAqL1xuXG4gIC8qKlxuICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgYmVlbiBhZGRlZCB0byB0aGUgd29ybGQuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgYmVlbiByZW1vdmVkIGZyb20gdGhlIHdvcmxkLlxuICAgKi9cbiAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmR0ID0gdm9pZCAwO1xuICAgIHRoaXMuYWxsb3dTbGVlcCA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbnRhY3RzID0gdm9pZCAwO1xuICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMgPSB2b2lkIDA7XG4gICAgdGhpcy5xdWF0Tm9ybWFsaXplU2tpcCA9IHZvaWQgMDtcbiAgICB0aGlzLnF1YXROb3JtYWxpemVGYXN0ID0gdm9pZCAwO1xuICAgIHRoaXMudGltZSA9IHZvaWQgMDtcbiAgICB0aGlzLnN0ZXBudW1iZXIgPSB2b2lkIDA7XG4gICAgdGhpcy5kZWZhdWx0X2R0ID0gdm9pZCAwO1xuICAgIHRoaXMubmV4dElkID0gdm9pZCAwO1xuICAgIHRoaXMuZ3Jhdml0eSA9IHZvaWQgMDtcbiAgICB0aGlzLmJyb2FkcGhhc2UgPSB2b2lkIDA7XG4gICAgdGhpcy5ib2RpZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5oYXNBY3RpdmVCb2RpZXMgPSB2b2lkIDA7XG4gICAgdGhpcy5zb2x2ZXIgPSB2b2lkIDA7XG4gICAgdGhpcy5jb25zdHJhaW50cyA9IHZvaWQgMDtcbiAgICB0aGlzLm5hcnJvd3BoYXNlID0gdm9pZCAwO1xuICAgIHRoaXMuY29sbGlzaW9uTWF0cml4ID0gdm9pZCAwO1xuICAgIHRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXMgPSB2b2lkIDA7XG4gICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlciA9IHZvaWQgMDtcbiAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlciA9IHZvaWQgMDtcbiAgICB0aGlzLm1hdGVyaWFscyA9IHZvaWQgMDtcbiAgICB0aGlzLmNvbnRhY3RtYXRlcmlhbHMgPSB2b2lkIDA7XG4gICAgdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZSA9IHZvaWQgMDtcbiAgICB0aGlzLmRlZmF1bHRNYXRlcmlhbCA9IHZvaWQgMDtcbiAgICB0aGlzLmRlZmF1bHRDb250YWN0TWF0ZXJpYWwgPSB2b2lkIDA7XG4gICAgdGhpcy5kb1Byb2ZpbGluZyA9IHZvaWQgMDtcbiAgICB0aGlzLnByb2ZpbGUgPSB2b2lkIDA7XG4gICAgdGhpcy5hY2N1bXVsYXRvciA9IHZvaWQgMDtcbiAgICB0aGlzLnN1YnN5c3RlbXMgPSB2b2lkIDA7XG4gICAgdGhpcy5hZGRCb2R5RXZlbnQgPSB2b2lkIDA7XG4gICAgdGhpcy5yZW1vdmVCb2R5RXZlbnQgPSB2b2lkIDA7XG4gICAgdGhpcy5pZFRvQm9keU1hcCA9IHZvaWQgMDtcbiAgICB0aGlzLmR0ID0gLTE7XG4gICAgdGhpcy5hbGxvd1NsZWVwID0gISFvcHRpb25zLmFsbG93U2xlZXA7XG4gICAgdGhpcy5jb250YWN0cyA9IFtdO1xuICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMgPSBbXTtcbiAgICB0aGlzLnF1YXROb3JtYWxpemVTa2lwID0gb3B0aW9ucy5xdWF0Tm9ybWFsaXplU2tpcCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5xdWF0Tm9ybWFsaXplU2tpcCA6IDA7XG4gICAgdGhpcy5xdWF0Tm9ybWFsaXplRmFzdCA9IG9wdGlvbnMucXVhdE5vcm1hbGl6ZUZhc3QgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucXVhdE5vcm1hbGl6ZUZhc3QgOiBmYWxzZTtcbiAgICB0aGlzLnRpbWUgPSAwLjA7XG4gICAgdGhpcy5zdGVwbnVtYmVyID0gMDtcbiAgICB0aGlzLmRlZmF1bHRfZHQgPSAxIC8gNjA7XG4gICAgdGhpcy5uZXh0SWQgPSAwO1xuICAgIHRoaXMuZ3Jhdml0eSA9IG5ldyBWZWMzKCk7XG5cbiAgICBpZiAob3B0aW9ucy5ncmF2aXR5KSB7XG4gICAgICB0aGlzLmdyYXZpdHkuY29weShvcHRpb25zLmdyYXZpdHkpO1xuICAgIH1cblxuICAgIHRoaXMuYnJvYWRwaGFzZSA9IG9wdGlvbnMuYnJvYWRwaGFzZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5icm9hZHBoYXNlIDogbmV3IE5haXZlQnJvYWRwaGFzZSgpO1xuICAgIHRoaXMuYm9kaWVzID0gW107XG4gICAgdGhpcy5oYXNBY3RpdmVCb2RpZXMgPSBmYWxzZTtcbiAgICB0aGlzLnNvbHZlciA9IG9wdGlvbnMuc29sdmVyICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnNvbHZlciA6IG5ldyBHU1NvbHZlcigpO1xuICAgIHRoaXMuY29uc3RyYWludHMgPSBbXTtcbiAgICB0aGlzLm5hcnJvd3BoYXNlID0gbmV3IE5hcnJvd3BoYXNlKHRoaXMpO1xuICAgIHRoaXMuY29sbGlzaW9uTWF0cml4ID0gbmV3IEFycmF5Q29sbGlzaW9uTWF0cml4KCk7XG4gICAgdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91cyA9IG5ldyBBcnJheUNvbGxpc2lvbk1hdHJpeCgpO1xuICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIgPSBuZXcgT3ZlcmxhcEtlZXBlcigpO1xuICAgIHRoaXMuc2hhcGVPdmVybGFwS2VlcGVyID0gbmV3IE92ZXJsYXBLZWVwZXIoKTtcbiAgICB0aGlzLm1hdGVyaWFscyA9IFtdO1xuICAgIHRoaXMuY29udGFjdG1hdGVyaWFscyA9IFtdO1xuICAgIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUgPSBuZXcgVHVwbGVEaWN0aW9uYXJ5KCk7XG4gICAgdGhpcy5kZWZhdWx0TWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwoJ2RlZmF1bHQnKTtcbiAgICB0aGlzLmRlZmF1bHRDb250YWN0TWF0ZXJpYWwgPSBuZXcgQ29udGFjdE1hdGVyaWFsKHRoaXMuZGVmYXVsdE1hdGVyaWFsLCB0aGlzLmRlZmF1bHRNYXRlcmlhbCwge1xuICAgICAgZnJpY3Rpb246IDAuMyxcbiAgICAgIHJlc3RpdHV0aW9uOiAwLjBcbiAgICB9KTtcbiAgICB0aGlzLmRvUHJvZmlsaW5nID0gZmFsc2U7XG4gICAgdGhpcy5wcm9maWxlID0ge1xuICAgICAgc29sdmU6IDAsXG4gICAgICBtYWtlQ29udGFjdENvbnN0cmFpbnRzOiAwLFxuICAgICAgYnJvYWRwaGFzZTogMCxcbiAgICAgIGludGVncmF0ZTogMCxcbiAgICAgIG5hcnJvd3BoYXNlOiAwXG4gICAgfTtcbiAgICB0aGlzLmFjY3VtdWxhdG9yID0gMDtcbiAgICB0aGlzLnN1YnN5c3RlbXMgPSBbXTtcbiAgICB0aGlzLmFkZEJvZHlFdmVudCA9IHtcbiAgICAgIHR5cGU6ICdhZGRCb2R5JyxcbiAgICAgIGJvZHk6IG51bGxcbiAgICB9O1xuICAgIHRoaXMucmVtb3ZlQm9keUV2ZW50ID0ge1xuICAgICAgdHlwZTogJ3JlbW92ZUJvZHknLFxuICAgICAgYm9keTogbnVsbFxuICAgIH07XG4gICAgdGhpcy5pZFRvQm9keU1hcCA9IHt9O1xuICAgIHRoaXMuYnJvYWRwaGFzZS5zZXRXb3JsZCh0aGlzKTtcbiAgfVxuICAvKipcbiAgICogR2V0IHRoZSBjb250YWN0IG1hdGVyaWFsIGJldHdlZW4gbWF0ZXJpYWxzIG0xIGFuZCBtMlxuICAgKiBAcmV0dXJuIFRoZSBjb250YWN0IG1hdGVyaWFsIGlmIGl0IHdhcyBmb3VuZC5cbiAgICovXG5cblxuICBnZXRDb250YWN0TWF0ZXJpYWwobTEsIG0yKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUuZ2V0KG0xLmlkLCBtMi5pZCk7XG4gIH1cbiAgLyoqXG4gICAqIEdldCBudW1iZXIgb2Ygb2JqZWN0cyBpbiB0aGUgd29ybGQuXG4gICAqIEBkZXByZWNhdGVkXG4gICAqL1xuXG5cbiAgbnVtT2JqZWN0cygpIHtcbiAgICByZXR1cm4gdGhpcy5ib2RpZXMubGVuZ3RoO1xuICB9XG4gIC8qKlxuICAgKiBTdG9yZSBvbGQgY29sbGlzaW9uIHN0YXRlIGluZm9cbiAgICovXG5cblxuICBjb2xsaXNpb25NYXRyaXhUaWNrKCkge1xuICAgIGNvbnN0IHRlbXAgPSB0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzO1xuICAgIHRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXMgPSB0aGlzLmNvbGxpc2lvbk1hdHJpeDtcbiAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeCA9IHRlbXA7XG4gICAgdGhpcy5jb2xsaXNpb25NYXRyaXgucmVzZXQoKTtcbiAgICB0aGlzLmJvZHlPdmVybGFwS2VlcGVyLnRpY2soKTtcbiAgICB0aGlzLnNoYXBlT3ZlcmxhcEtlZXBlci50aWNrKCk7XG4gIH1cbiAgLyoqXG4gICAqIEFkZCBhIGNvbnN0cmFpbnQgdG8gdGhlIHNpbXVsYXRpb24uXG4gICAqL1xuXG5cbiAgYWRkQ29uc3RyYWludChjKSB7XG4gICAgdGhpcy5jb25zdHJhaW50cy5wdXNoKGMpO1xuICB9XG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgY29uc3RyYWludFxuICAgKi9cblxuXG4gIHJlbW92ZUNvbnN0cmFpbnQoYykge1xuICAgIGNvbnN0IGlkeCA9IHRoaXMuY29uc3RyYWludHMuaW5kZXhPZihjKTtcblxuICAgIGlmIChpZHggIT09IC0xKSB7XG4gICAgICB0aGlzLmNvbnN0cmFpbnRzLnNwbGljZShpZHgsIDEpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmF5Y2FzdCB0ZXN0XG4gICAqIEBkZXByZWNhdGVkIFVzZSAucmF5Y2FzdEFsbCwgLnJheWNhc3RDbG9zZXN0IG9yIC5yYXljYXN0QW55IGluc3RlYWQuXG4gICAqL1xuXG5cbiAgcmF5VGVzdChmcm9tLCB0bywgcmVzdWx0KSB7XG4gICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFJheWNhc3RSZXN1bHQpIHtcbiAgICAgIC8vIERvIHJheWNhc3RDbG9zZXN0XG4gICAgICB0aGlzLnJheWNhc3RDbG9zZXN0KGZyb20sIHRvLCB7XG4gICAgICAgIHNraXBCYWNrZmFjZXM6IHRydWVcbiAgICAgIH0sIHJlc3VsdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERvIHJheWNhc3RBbGxcbiAgICAgIHRoaXMucmF5Y2FzdEFsbChmcm9tLCB0bywge1xuICAgICAgICBza2lwQmFja2ZhY2VzOiB0cnVlXG4gICAgICB9LCByZXN1bHQpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmF5IGNhc3QgYWdhaW5zdCBhbGwgYm9kaWVzLiBUaGUgcHJvdmlkZWQgY2FsbGJhY2sgd2lsbCBiZSBleGVjdXRlZCBmb3IgZWFjaCBoaXQgd2l0aCBhIFJheWNhc3RSZXN1bHQgYXMgc2luZ2xlIGFyZ3VtZW50LlxuICAgKiBAcmV0dXJuIFRydWUgaWYgYW55IGJvZHkgd2FzIGhpdC5cbiAgICovXG5cblxuICByYXljYXN0QWxsKGZyb20sIHRvLCBvcHRpb25zID0ge30sIGNhbGxiYWNrKSB7XG4gICAgb3B0aW9ucy5tb2RlID0gUmF5LkFMTDtcbiAgICBvcHRpb25zLmZyb20gPSBmcm9tO1xuICAgIG9wdGlvbnMudG8gPSB0bztcbiAgICBvcHRpb25zLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgcmV0dXJuIHRtcFJheS5pbnRlcnNlY3RXb3JsZCh0aGlzLCBvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogUmF5IGNhc3QsIGFuZCBzdG9wIGF0IHRoZSBmaXJzdCByZXN1bHQuIE5vdGUgdGhhdCB0aGUgb3JkZXIgaXMgcmFuZG9tIC0gYnV0IHRoZSBtZXRob2QgaXMgZmFzdC5cbiAgICogQHJldHVybiBUcnVlIGlmIGFueSBib2R5IHdhcyBoaXQuXG4gICAqL1xuXG5cbiAgcmF5Y2FzdEFueShmcm9tLCB0bywgb3B0aW9ucyA9IHt9LCByZXN1bHQpIHtcbiAgICBvcHRpb25zLm1vZGUgPSBSYXkuQU5ZO1xuICAgIG9wdGlvbnMuZnJvbSA9IGZyb207XG4gICAgb3B0aW9ucy50byA9IHRvO1xuICAgIG9wdGlvbnMucmVzdWx0ID0gcmVzdWx0O1xuICAgIHJldHVybiB0bXBSYXkuaW50ZXJzZWN0V29ybGQodGhpcywgb3B0aW9ucyk7XG4gIH1cbiAgLyoqXG4gICAqIFJheSBjYXN0LCBhbmQgcmV0dXJuIGluZm9ybWF0aW9uIG9mIHRoZSBjbG9zZXN0IGhpdC5cbiAgICogQHJldHVybiBUcnVlIGlmIGFueSBib2R5IHdhcyBoaXQuXG4gICAqL1xuXG5cbiAgcmF5Y2FzdENsb3Nlc3QoZnJvbSwgdG8sIG9wdGlvbnMgPSB7fSwgcmVzdWx0KSB7XG4gICAgb3B0aW9ucy5tb2RlID0gUmF5LkNMT1NFU1Q7XG4gICAgb3B0aW9ucy5mcm9tID0gZnJvbTtcbiAgICBvcHRpb25zLnRvID0gdG87XG4gICAgb3B0aW9ucy5yZXN1bHQgPSByZXN1bHQ7XG4gICAgcmV0dXJuIHRtcFJheS5pbnRlcnNlY3RXb3JsZCh0aGlzLCBvcHRpb25zKTtcbiAgfVxuICAvKipcbiAgICogQWRkIGEgcmlnaWQgYm9keSB0byB0aGUgc2ltdWxhdGlvbi5cbiAgICogQHRvZG8gSWYgdGhlIHNpbXVsYXRpb24gaGFzIG5vdCB5ZXQgc3RhcnRlZCwgd2h5IHJlY3JldGUgYW5kIGNvcHkgYXJyYXlzIGZvciBlYWNoIGJvZHk/IEFjY3VtdWxhdGUgaW4gZHluYW1pYyBhcnJheXMgaW4gdGhpcyBjYXNlLlxuICAgKiBAdG9kbyBBZGRpbmcgYW4gYXJyYXkgb2YgYm9kaWVzIHNob3VsZCBiZSBwb3NzaWJsZS4gVGhpcyB3b3VsZCBzYXZlIHNvbWUgbG9vcHMgdG9vXG4gICAqL1xuXG5cbiAgYWRkQm9keShib2R5KSB7XG4gICAgaWYgKHRoaXMuYm9kaWVzLmluY2x1ZGVzKGJvZHkpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgYm9keS5pbmRleCA9IHRoaXMuYm9kaWVzLmxlbmd0aDtcbiAgICB0aGlzLmJvZGllcy5wdXNoKGJvZHkpO1xuICAgIGJvZHkud29ybGQgPSB0aGlzO1xuICAgIGJvZHkuaW5pdFBvc2l0aW9uLmNvcHkoYm9keS5wb3NpdGlvbik7XG4gICAgYm9keS5pbml0VmVsb2NpdHkuY29weShib2R5LnZlbG9jaXR5KTtcbiAgICBib2R5LnRpbWVMYXN0U2xlZXB5ID0gdGhpcy50aW1lO1xuXG4gICAgaWYgKGJvZHkgaW5zdGFuY2VvZiBCb2R5KSB7XG4gICAgICBib2R5LmluaXRBbmd1bGFyVmVsb2NpdHkuY29weShib2R5LmFuZ3VsYXJWZWxvY2l0eSk7XG4gICAgICBib2R5LmluaXRRdWF0ZXJuaW9uLmNvcHkoYm9keS5xdWF0ZXJuaW9uKTtcbiAgICB9XG5cbiAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeC5zZXROdW1PYmplY3RzKHRoaXMuYm9kaWVzLmxlbmd0aCk7XG4gICAgdGhpcy5hZGRCb2R5RXZlbnQuYm9keSA9IGJvZHk7XG4gICAgdGhpcy5pZFRvQm9keU1hcFtib2R5LmlkXSA9IGJvZHk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KHRoaXMuYWRkQm9keUV2ZW50KTtcbiAgfVxuICAvKipcbiAgICogUmVtb3ZlIGEgcmlnaWQgYm9keSBmcm9tIHRoZSBzaW11bGF0aW9uLlxuICAgKi9cblxuXG4gIHJlbW92ZUJvZHkoYm9keSkge1xuICAgIGJvZHkud29ybGQgPSBudWxsO1xuICAgIGNvbnN0IG4gPSB0aGlzLmJvZGllcy5sZW5ndGggLSAxO1xuICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzO1xuICAgIGNvbnN0IGlkeCA9IGJvZGllcy5pbmRleE9mKGJvZHkpO1xuXG4gICAgaWYgKGlkeCAhPT0gLTEpIHtcbiAgICAgIGJvZGllcy5zcGxpY2UoaWR4LCAxKTsgLy8gVG9kbzogc2hvdWxkIHVzZSBhIGdhcmJhZ2UgZnJlZSBtZXRob2RcbiAgICAgIC8vIFJlY29tcHV0ZSBpbmRleFxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gYm9kaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGJvZGllc1tpXS5pbmRleCA9IGk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4LnNldE51bU9iamVjdHMobik7XG4gICAgICB0aGlzLnJlbW92ZUJvZHlFdmVudC5ib2R5ID0gYm9keTtcbiAgICAgIGRlbGV0ZSB0aGlzLmlkVG9Cb2R5TWFwW2JvZHkuaWRdO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHRoaXMucmVtb3ZlQm9keUV2ZW50KTtcbiAgICB9XG4gIH1cblxuICBnZXRCb2R5QnlJZChpZCkge1xuICAgIHJldHVybiB0aGlzLmlkVG9Cb2R5TWFwW2lkXTtcbiAgfVxuICAvKipcbiAgICogQHRvZG8gTWFrZSBhIGZhc3RlciBtYXBcbiAgICovXG5cblxuICBnZXRTaGFwZUJ5SWQoaWQpIHtcbiAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllcztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYm9kaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBzaGFwZXMgPSBib2RpZXNbaV0uc2hhcGVzO1xuXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHNoYXBlcy5sZW5ndGg7IGorKykge1xuICAgICAgICBjb25zdCBzaGFwZSA9IHNoYXBlc1tqXTtcblxuICAgICAgICBpZiAoc2hhcGUuaWQgPT09IGlkKSB7XG4gICAgICAgICAgcmV0dXJuIHNoYXBlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIEFkZHMgYSBtYXRlcmlhbCB0byB0aGUgV29ybGQuXG4gICAqIEBkZXByZWNhdGVkXG4gICAqIEB0b2RvIFJlbW92ZVxuICAgKi9cblxuXG4gIGFkZE1hdGVyaWFsKG0pIHtcbiAgICB0aGlzLm1hdGVyaWFscy5wdXNoKG0pO1xuICB9XG4gIC8qKlxuICAgKiBBZGRzIGEgY29udGFjdCBtYXRlcmlhbCB0byB0aGUgV29ybGRcbiAgICovXG5cblxuICBhZGRDb250YWN0TWF0ZXJpYWwoY21hdCkge1xuICAgIC8vIEFkZCBjb250YWN0IG1hdGVyaWFsXG4gICAgdGhpcy5jb250YWN0bWF0ZXJpYWxzLnB1c2goY21hdCk7IC8vIEFkZCBjdXJyZW50IGNvbnRhY3QgbWF0ZXJpYWwgdG8gdGhlIG1hdGVyaWFsIHRhYmxlXG5cbiAgICB0aGlzLmNvbnRhY3RNYXRlcmlhbFRhYmxlLnNldChjbWF0Lm1hdGVyaWFsc1swXS5pZCwgY21hdC5tYXRlcmlhbHNbMV0uaWQsIGNtYXQpO1xuICB9XG4gIC8qKlxuICAgKiBTdGVwIHRoZSBwaHlzaWNzIHdvcmxkIGZvcndhcmQgaW4gdGltZS5cbiAgICpcbiAgICogVGhlcmUgYXJlIHR3byBtb2Rlcy4gVGhlIHNpbXBsZSBtb2RlIGlzIGZpeGVkIHRpbWVzdGVwcGluZyB3aXRob3V0IGludGVycG9sYXRpb24uIEluIHRoaXMgY2FzZSB5b3Ugb25seSB1c2UgdGhlIGZpcnN0IGFyZ3VtZW50LiBUaGUgc2Vjb25kIGNhc2UgdXNlcyBpbnRlcnBvbGF0aW9uLiBJbiB0aGF0IHlvdSBhbHNvIHByb3ZpZGUgdGhlIHRpbWUgc2luY2UgdGhlIGZ1bmN0aW9uIHdhcyBsYXN0IHVzZWQsIGFzIHdlbGwgYXMgdGhlIG1heGltdW0gZml4ZWQgdGltZXN0ZXBzIHRvIHRha2UuXG4gICAqXG4gICAqIEBwYXJhbSBkdCBUaGUgZml4ZWQgdGltZSBzdGVwIHNpemUgdG8gdXNlLlxuICAgKiBAcGFyYW0gdGltZVNpbmNlTGFzdENhbGxlZCBUaGUgdGltZSBlbGFwc2VkIHNpbmNlIHRoZSBmdW5jdGlvbiB3YXMgbGFzdCBjYWxsZWQuXG4gICAqIEBwYXJhbSBtYXhTdWJTdGVwcyBNYXhpbXVtIG51bWJlciBvZiBmaXhlZCBzdGVwcyB0byB0YWtlIHBlciBmdW5jdGlvbiBjYWxsLlxuICAgKiBAc2VlIGh0dHBzOi8vd2ViLmFyY2hpdmUub3JnL3dlYi8yMDE4MDQyNjE1NDUzMS9odHRwOi8vYnVsbGV0cGh5c2ljcy5vcmcvbWVkaWF3aWtpLTEuNS44L2luZGV4LnBocC9TdGVwcGluZ19UaGVfV29ybGQjV2hhdF9kb190aGVfcGFyYW1ldGVyc190b19idER5bmFtaWNzV29ybGQ6OnN0ZXBTaW11bGF0aW9uX21lYW4uM0ZcbiAgICogQGV4YW1wbGVcbiAgICogICAgIC8vIGZpeGVkIHRpbWVzdGVwcGluZyB3aXRob3V0IGludGVycG9sYXRpb25cbiAgICogICAgIHdvcmxkLnN0ZXAoMSAvIDYwKVxuICAgKi9cblxuXG4gIHN0ZXAoZHQsIHRpbWVTaW5jZUxhc3RDYWxsZWQsIG1heFN1YlN0ZXBzID0gMTApIHtcbiAgICBpZiAodGltZVNpbmNlTGFzdENhbGxlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBGaXhlZCwgc2ltcGxlIHN0ZXBwaW5nXG4gICAgICB0aGlzLmludGVybmFsU3RlcChkdCk7IC8vIEluY3JlbWVudCB0aW1lXG5cbiAgICAgIHRoaXMudGltZSArPSBkdDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hY2N1bXVsYXRvciArPSB0aW1lU2luY2VMYXN0Q2FsbGVkO1xuICAgICAgY29uc3QgdDAgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgIGxldCBzdWJzdGVwcyA9IDA7XG5cbiAgICAgIHdoaWxlICh0aGlzLmFjY3VtdWxhdG9yID49IGR0ICYmIHN1YnN0ZXBzIDwgbWF4U3ViU3RlcHMpIHtcbiAgICAgICAgLy8gRG8gZml4ZWQgc3RlcHMgdG8gY2F0Y2ggdXBcbiAgICAgICAgdGhpcy5pbnRlcm5hbFN0ZXAoZHQpO1xuICAgICAgICB0aGlzLmFjY3VtdWxhdG9yIC09IGR0O1xuICAgICAgICBzdWJzdGVwcysrO1xuXG4gICAgICAgIGlmIChwZXJmb3JtYW5jZS5ub3coKSAtIHQwID4gZHQgKiAxMDAwKSB7XG4gICAgICAgICAgLy8gVGhlIGZyYW1lcmF0ZSBpcyBub3QgaW50ZXJhY3RpdmUgYW55bW9yZS5cbiAgICAgICAgICAvLyBXZSBhcmUgYmVsb3cgdGhlIHRhcmdldCBmcmFtZXJhdGUuXG4gICAgICAgICAgLy8gQmV0dGVyIGJhaWwgb3V0LlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9IC8vIFJlbW92ZSB0aGUgZXhjZXNzIGFjY3VtdWxhdG9yLCBzaW5jZSB3ZSBtYXkgbm90XG4gICAgICAvLyBoYXZlIGhhZCBlbm91Z2ggc3Vic3RlcHMgYXZhaWxhYmxlIHRvIGNhdGNoIHVwXG5cblxuICAgICAgdGhpcy5hY2N1bXVsYXRvciA9IHRoaXMuYWNjdW11bGF0b3IgJSBkdDtcbiAgICAgIGNvbnN0IHQgPSB0aGlzLmFjY3VtdWxhdG9yIC8gZHQ7XG5cbiAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSB0aGlzLmJvZGllcy5sZW5ndGg7IGorKykge1xuICAgICAgICBjb25zdCBiID0gdGhpcy5ib2RpZXNbal07XG4gICAgICAgIGIucHJldmlvdXNQb3NpdGlvbi5sZXJwKGIucG9zaXRpb24sIHQsIGIuaW50ZXJwb2xhdGVkUG9zaXRpb24pO1xuICAgICAgICBiLnByZXZpb3VzUXVhdGVybmlvbi5zbGVycChiLnF1YXRlcm5pb24sIHQsIGIuaW50ZXJwb2xhdGVkUXVhdGVybmlvbik7XG4gICAgICAgIGIucHJldmlvdXNRdWF0ZXJuaW9uLm5vcm1hbGl6ZSgpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnRpbWUgKz0gdGltZVNpbmNlTGFzdENhbGxlZDtcbiAgICB9XG4gIH1cblxuICBpbnRlcm5hbFN0ZXAoZHQpIHtcbiAgICB0aGlzLmR0ID0gZHQ7XG4gICAgY29uc3QgY29udGFjdHMgPSB0aGlzLmNvbnRhY3RzO1xuICAgIGNvbnN0IHAxID0gV29ybGRfc3RlcF9wMTtcbiAgICBjb25zdCBwMiA9IFdvcmxkX3N0ZXBfcDI7XG4gICAgY29uc3QgTiA9IHRoaXMubnVtT2JqZWN0cygpO1xuICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzO1xuICAgIGNvbnN0IHNvbHZlciA9IHRoaXMuc29sdmVyO1xuICAgIGNvbnN0IGdyYXZpdHkgPSB0aGlzLmdyYXZpdHk7XG4gICAgY29uc3QgZG9Qcm9maWxpbmcgPSB0aGlzLmRvUHJvZmlsaW5nO1xuICAgIGNvbnN0IHByb2ZpbGUgPSB0aGlzLnByb2ZpbGU7XG4gICAgY29uc3QgRFlOQU1JQyA9IEJvZHkuRFlOQU1JQztcbiAgICBsZXQgcHJvZmlsaW5nU3RhcnQgPSAtSW5maW5pdHk7XG4gICAgY29uc3QgY29uc3RyYWludHMgPSB0aGlzLmNvbnN0cmFpbnRzO1xuICAgIGNvbnN0IGZyaWN0aW9uRXF1YXRpb25Qb29sID0gV29ybGRfc3RlcF9mcmljdGlvbkVxdWF0aW9uUG9vbDtcbiAgICBncmF2aXR5Lmxlbmd0aCgpO1xuICAgIGNvbnN0IGd4ID0gZ3Jhdml0eS54O1xuICAgIGNvbnN0IGd5ID0gZ3Jhdml0eS55O1xuICAgIGNvbnN0IGd6ID0gZ3Jhdml0eS56O1xuICAgIGxldCBpID0gMDtcblxuICAgIGlmIChkb1Byb2ZpbGluZykge1xuICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICB9IC8vIEFkZCBncmF2aXR5IHRvIGFsbCBvYmplY3RzXG5cblxuICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07XG5cbiAgICAgIGlmIChiaS50eXBlID09PSBEWU5BTUlDKSB7XG4gICAgICAgIC8vIE9ubHkgZm9yIGR5bmFtaWMgYm9kaWVzXG4gICAgICAgIGNvbnN0IGYgPSBiaS5mb3JjZTtcbiAgICAgICAgY29uc3QgbSA9IGJpLm1hc3M7XG4gICAgICAgIGYueCArPSBtICogZ3g7XG4gICAgICAgIGYueSArPSBtICogZ3k7XG4gICAgICAgIGYueiArPSBtICogZ3o7XG4gICAgICB9XG4gICAgfSAvLyBVcGRhdGUgc3Vic3lzdGVtc1xuXG5cbiAgICBmb3IgKGxldCBpID0gMCwgTnN1YnN5c3RlbXMgPSB0aGlzLnN1YnN5c3RlbXMubGVuZ3RoOyBpICE9PSBOc3Vic3lzdGVtczsgaSsrKSB7XG4gICAgICB0aGlzLnN1YnN5c3RlbXNbaV0udXBkYXRlKCk7XG4gICAgfSAvLyBDb2xsaXNpb24gZGV0ZWN0aW9uXG5cblxuICAgIGlmIChkb1Byb2ZpbGluZykge1xuICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICB9XG5cbiAgICBwMS5sZW5ndGggPSAwOyAvLyBDbGVhbiB1cCBwYWlyIGFycmF5cyBmcm9tIGxhc3Qgc3RlcFxuXG4gICAgcDIubGVuZ3RoID0gMDtcbiAgICB0aGlzLmJyb2FkcGhhc2UuY29sbGlzaW9uUGFpcnModGhpcywgcDEsIHAyKTtcblxuICAgIGlmIChkb1Byb2ZpbGluZykge1xuICAgICAgcHJvZmlsZS5icm9hZHBoYXNlID0gcGVyZm9ybWFuY2Uubm93KCkgLSBwcm9maWxpbmdTdGFydDtcbiAgICB9IC8vIFJlbW92ZSBjb25zdHJhaW5lZCBwYWlycyB3aXRoIGNvbGxpZGVDb25uZWN0ZWQgPT0gZmFsc2VcblxuXG4gICAgbGV0IE5jb25zdHJhaW50cyA9IGNvbnN0cmFpbnRzLmxlbmd0aDtcblxuICAgIGZvciAoaSA9IDA7IGkgIT09IE5jb25zdHJhaW50czsgaSsrKSB7XG4gICAgICBjb25zdCBjID0gY29uc3RyYWludHNbaV07XG5cbiAgICAgIGlmICghYy5jb2xsaWRlQ29ubmVjdGVkKSB7XG4gICAgICAgIGZvciAobGV0IGogPSBwMS5sZW5ndGggLSAxOyBqID49IDA7IGogLT0gMSkge1xuICAgICAgICAgIGlmIChjLmJvZHlBID09PSBwMVtqXSAmJiBjLmJvZHlCID09PSBwMltqXSB8fCBjLmJvZHlCID09PSBwMVtqXSAmJiBjLmJvZHlBID09PSBwMltqXSkge1xuICAgICAgICAgICAgcDEuc3BsaWNlKGosIDEpO1xuICAgICAgICAgICAgcDIuc3BsaWNlKGosIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuY29sbGlzaW9uTWF0cml4VGljaygpOyAvLyBHZW5lcmF0ZSBjb250YWN0c1xuXG4gICAgaWYgKGRvUHJvZmlsaW5nKSB7XG4gICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZGNvbnRhY3RzID0gV29ybGRfc3RlcF9vbGRDb250YWN0cztcbiAgICBjb25zdCBOb2xkQ29udGFjdHMgPSBjb250YWN0cy5sZW5ndGg7XG5cbiAgICBmb3IgKGkgPSAwOyBpICE9PSBOb2xkQ29udGFjdHM7IGkrKykge1xuICAgICAgb2xkY29udGFjdHMucHVzaChjb250YWN0c1tpXSk7XG4gICAgfVxuXG4gICAgY29udGFjdHMubGVuZ3RoID0gMDsgLy8gVHJhbnNmZXIgRnJpY3Rpb25FcXVhdGlvbiBmcm9tIGN1cnJlbnQgbGlzdCB0byB0aGUgcG9vbCBmb3IgcmV1c2VcblxuICAgIGNvbnN0IE5vbGRGcmljdGlvbkVxdWF0aW9ucyA9IHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMubGVuZ3RoO1xuXG4gICAgZm9yIChpID0gMDsgaSAhPT0gTm9sZEZyaWN0aW9uRXF1YXRpb25zOyBpKyspIHtcbiAgICAgIGZyaWN0aW9uRXF1YXRpb25Qb29sLnB1c2godGhpcy5mcmljdGlvbkVxdWF0aW9uc1tpXSk7XG4gICAgfVxuXG4gICAgdGhpcy5mcmljdGlvbkVxdWF0aW9ucy5sZW5ndGggPSAwO1xuICAgIHRoaXMubmFycm93cGhhc2UuZ2V0Q29udGFjdHMocDEsIHAyLCB0aGlzLCBjb250YWN0cywgb2xkY29udGFjdHMsIC8vIFRvIGJlIHJldXNlZFxuICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMsIGZyaWN0aW9uRXF1YXRpb25Qb29sKTtcblxuICAgIGlmIChkb1Byb2ZpbGluZykge1xuICAgICAgcHJvZmlsZS5uYXJyb3dwaGFzZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7XG4gICAgfSAvLyBMb29wIG92ZXIgYWxsIGNvbGxpc2lvbnNcblxuXG4gICAgaWYgKGRvUHJvZmlsaW5nKSB7XG4gICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIH0gLy8gQWRkIGFsbCBmcmljdGlvbiBlcXNcblxuXG4gICAgZm9yIChpID0gMDsgaSA8IHRoaXMuZnJpY3Rpb25FcXVhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHNvbHZlci5hZGRFcXVhdGlvbih0aGlzLmZyaWN0aW9uRXF1YXRpb25zW2ldKTtcbiAgICB9XG5cbiAgICBjb25zdCBuY29udGFjdHMgPSBjb250YWN0cy5sZW5ndGg7XG5cbiAgICBmb3IgKGxldCBrID0gMDsgayAhPT0gbmNvbnRhY3RzOyBrKyspIHtcbiAgICAgIC8vIEN1cnJlbnQgY29udGFjdFxuICAgICAgY29uc3QgYyA9IGNvbnRhY3RzW2tdOyAvLyBHZXQgY3VycmVudCBjb2xsaXNpb24gaW5kZWNlc1xuXG4gICAgICBjb25zdCBiaSA9IGMuYmk7XG4gICAgICBjb25zdCBiaiA9IGMuYmo7XG4gICAgICBjb25zdCBzaSA9IGMuc2k7XG4gICAgICBjb25zdCBzaiA9IGMuc2o7IC8vIEdldCBjb2xsaXNpb24gcHJvcGVydGllc1xuXG4gICAgICBsZXQgY207XG5cbiAgICAgIGlmIChiaS5tYXRlcmlhbCAmJiBiai5tYXRlcmlhbCkge1xuICAgICAgICBjbSA9IHRoaXMuZ2V0Q29udGFjdE1hdGVyaWFsKGJpLm1hdGVyaWFsLCBiai5tYXRlcmlhbCkgfHwgdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY20gPSB0aGlzLmRlZmF1bHRDb250YWN0TWF0ZXJpYWw7XG4gICAgICB9IC8vIGMuZW5hYmxlZCA9IGJpLmNvbGxpc2lvblJlc3BvbnNlICYmIGJqLmNvbGxpc2lvblJlc3BvbnNlICYmIHNpLmNvbGxpc2lvblJlc3BvbnNlICYmIHNqLmNvbGxpc2lvblJlc3BvbnNlO1xuXG5cbiAgICAgIGNtLmZyaWN0aW9uOyAvLyBjLnJlc3RpdHV0aW9uID0gY20ucmVzdGl0dXRpb247XG4gICAgICAvLyBJZiBmcmljdGlvbiBvciByZXN0aXR1dGlvbiB3ZXJlIHNwZWNpZmllZCBpbiB0aGUgbWF0ZXJpYWwsIHVzZSB0aGVtXG5cbiAgICAgIGlmIChiaS5tYXRlcmlhbCAmJiBiai5tYXRlcmlhbCkge1xuICAgICAgICBpZiAoYmkubWF0ZXJpYWwuZnJpY3Rpb24gPj0gMCAmJiBiai5tYXRlcmlhbC5mcmljdGlvbiA+PSAwKSB7XG4gICAgICAgICAgYmkubWF0ZXJpYWwuZnJpY3Rpb24gKiBiai5tYXRlcmlhbC5mcmljdGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChiaS5tYXRlcmlhbC5yZXN0aXR1dGlvbiA+PSAwICYmIGJqLm1hdGVyaWFsLnJlc3RpdHV0aW9uID49IDApIHtcbiAgICAgICAgICBjLnJlc3RpdHV0aW9uID0gYmkubWF0ZXJpYWwucmVzdGl0dXRpb24gKiBiai5tYXRlcmlhbC5yZXN0aXR1dGlvbjtcbiAgICAgICAgfVxuICAgICAgfSAvLyBjLnNldFNwb29rUGFyYW1zKFxuICAgICAgLy8gICAgICAgICAgIGNtLmNvbnRhY3RFcXVhdGlvblN0aWZmbmVzcyxcbiAgICAgIC8vICAgICAgICAgICBjbS5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uLFxuICAgICAgLy8gICAgICAgICAgIGR0XG4gICAgICAvLyAgICAgICApO1xuXG5cbiAgICAgIHNvbHZlci5hZGRFcXVhdGlvbihjKTsgLy8gLy8gQWRkIGZyaWN0aW9uIGNvbnN0cmFpbnQgZXF1YXRpb25cbiAgICAgIC8vIGlmKG11ID4gMCl7XG4gICAgICAvLyBcdC8vIENyZWF0ZSAyIHRhbmdlbnQgZXF1YXRpb25zXG4gICAgICAvLyBcdGNvbnN0IG11ZyA9IG11ICogZ25vcm07XG4gICAgICAvLyBcdGNvbnN0IHJlZHVjZWRNYXNzID0gKGJpLmludk1hc3MgKyBiai5pbnZNYXNzKTtcbiAgICAgIC8vIFx0aWYocmVkdWNlZE1hc3MgPiAwKXtcbiAgICAgIC8vIFx0XHRyZWR1Y2VkTWFzcyA9IDEvcmVkdWNlZE1hc3M7XG4gICAgICAvLyBcdH1cbiAgICAgIC8vIFx0Y29uc3QgcG9vbCA9IGZyaWN0aW9uRXF1YXRpb25Qb29sO1xuICAgICAgLy8gXHRjb25zdCBjMSA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJpLGJqLG11ZypyZWR1Y2VkTWFzcyk7XG4gICAgICAvLyBcdGNvbnN0IGMyID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYmksYmosbXVnKnJlZHVjZWRNYXNzKTtcbiAgICAgIC8vIFx0dGhpcy5mcmljdGlvbkVxdWF0aW9ucy5wdXNoKGMxLCBjMik7XG4gICAgICAvLyBcdGMxLmJpID0gYzIuYmkgPSBiaTtcbiAgICAgIC8vIFx0YzEuYmogPSBjMi5iaiA9IGJqO1xuICAgICAgLy8gXHRjMS5taW5Gb3JjZSA9IGMyLm1pbkZvcmNlID0gLW11ZypyZWR1Y2VkTWFzcztcbiAgICAgIC8vIFx0YzEubWF4Rm9yY2UgPSBjMi5tYXhGb3JjZSA9IG11ZypyZWR1Y2VkTWFzcztcbiAgICAgIC8vIFx0Ly8gQ29weSBvdmVyIHRoZSByZWxhdGl2ZSB2ZWN0b3JzXG4gICAgICAvLyBcdGMxLnJpLmNvcHkoYy5yaSk7XG4gICAgICAvLyBcdGMxLnJqLmNvcHkoYy5yaik7XG4gICAgICAvLyBcdGMyLnJpLmNvcHkoYy5yaSk7XG4gICAgICAvLyBcdGMyLnJqLmNvcHkoYy5yaik7XG4gICAgICAvLyBcdC8vIENvbnN0cnVjdCB0YW5nZW50c1xuICAgICAgLy8gXHRjLm5pLnRhbmdlbnRzKGMxLnQsIGMyLnQpO1xuICAgICAgLy8gICAgICAgICAgIC8vIFNldCBzcG9vayBwYXJhbXNcbiAgICAgIC8vICAgICAgICAgICBjMS5zZXRTcG9va1BhcmFtcyhjbS5mcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzLCBjbS5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiwgZHQpO1xuICAgICAgLy8gICAgICAgICAgIGMyLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCBkdCk7XG4gICAgICAvLyAgICAgICAgICAgYzEuZW5hYmxlZCA9IGMyLmVuYWJsZWQgPSBjLmVuYWJsZWQ7XG4gICAgICAvLyBcdC8vIEFkZCBlcXVhdGlvbnMgdG8gc29sdmVyXG4gICAgICAvLyBcdHNvbHZlci5hZGRFcXVhdGlvbihjMSk7XG4gICAgICAvLyBcdHNvbHZlci5hZGRFcXVhdGlvbihjMik7XG4gICAgICAvLyB9XG5cbiAgICAgIGlmIChiaS5hbGxvd1NsZWVwICYmIGJpLnR5cGUgPT09IEJvZHkuRFlOQU1JQyAmJiBiaS5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HICYmIGJqLnNsZWVwU3RhdGUgPT09IEJvZHkuQVdBS0UgJiYgYmoudHlwZSAhPT0gQm9keS5TVEFUSUMpIHtcbiAgICAgICAgY29uc3Qgc3BlZWRTcXVhcmVkQiA9IGJqLnZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKSArIGJqLmFuZ3VsYXJWZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCk7XG4gICAgICAgIGNvbnN0IHNwZWVkTGltaXRTcXVhcmVkQiA9IGJqLnNsZWVwU3BlZWRMaW1pdCAqKiAyO1xuXG4gICAgICAgIGlmIChzcGVlZFNxdWFyZWRCID49IHNwZWVkTGltaXRTcXVhcmVkQiAqIDIpIHtcbiAgICAgICAgICBiaS53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoYmouYWxsb3dTbGVlcCAmJiBiai50eXBlID09PSBCb2R5LkRZTkFNSUMgJiYgYmouc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORyAmJiBiaS5zbGVlcFN0YXRlID09PSBCb2R5LkFXQUtFICYmIGJpLnR5cGUgIT09IEJvZHkuU1RBVElDKSB7XG4gICAgICAgIGNvbnN0IHNwZWVkU3F1YXJlZEEgPSBiaS52ZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCkgKyBiaS5hbmd1bGFyVmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpO1xuICAgICAgICBjb25zdCBzcGVlZExpbWl0U3F1YXJlZEEgPSBiaS5zbGVlcFNwZWVkTGltaXQgKiogMjtcblxuICAgICAgICBpZiAoc3BlZWRTcXVhcmVkQSA+PSBzcGVlZExpbWl0U3F1YXJlZEEgKiAyKSB7XG4gICAgICAgICAgYmoud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gLy8gTm93IHdlIGtub3cgdGhhdCBpIGFuZCBqIGFyZSBpbiBjb250YWN0LiBTZXQgY29sbGlzaW9uIG1hdHJpeCBzdGF0ZVxuXG5cbiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4LnNldChiaSwgYmosIHRydWUpO1xuXG4gICAgICBpZiAoIXRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXMuZ2V0KGJpLCBiaikpIHtcbiAgICAgICAgLy8gRmlyc3QgY29udGFjdCFcbiAgICAgICAgLy8gV2UgcmV1c2UgdGhlIGNvbGxpZGVFdmVudCBvYmplY3QsIG90aGVyd2lzZSB3ZSB3aWxsIGVuZCB1cCBjcmVhdGluZyBuZXcgb2JqZWN0cyBmb3IgZWFjaCBuZXcgY29udGFjdCwgZXZlbiBpZiB0aGVyZSdzIG5vIGV2ZW50IGxpc3RlbmVyIGF0dGFjaGVkLlxuICAgICAgICBXb3JsZF9zdGVwX2NvbGxpZGVFdmVudC5ib2R5ID0gYmo7XG4gICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmNvbnRhY3QgPSBjO1xuICAgICAgICBiaS5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50KTtcbiAgICAgICAgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQuYm9keSA9IGJpO1xuICAgICAgICBiai5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci5zZXQoYmkuaWQsIGJqLmlkKTtcbiAgICAgIHRoaXMuc2hhcGVPdmVybGFwS2VlcGVyLnNldChzaS5pZCwgc2ouaWQpO1xuICAgIH1cblxuICAgIHRoaXMuZW1pdENvbnRhY3RFdmVudHMoKTtcblxuICAgIGlmIChkb1Byb2ZpbGluZykge1xuICAgICAgcHJvZmlsZS5tYWtlQ29udGFjdENvbnN0cmFpbnRzID0gcGVyZm9ybWFuY2Uubm93KCkgLSBwcm9maWxpbmdTdGFydDtcbiAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgfSAvLyBXYWtlIHVwIGJvZGllc1xuXG5cbiAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHtcbiAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldO1xuXG4gICAgICBpZiAoYmkud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSkge1xuICAgICAgICBiaS53YWtlVXAoKTtcbiAgICAgICAgYmkud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0gLy8gQWRkIHVzZXItYWRkZWQgY29uc3RyYWludHNcblxuXG4gICAgTmNvbnN0cmFpbnRzID0gY29uc3RyYWludHMubGVuZ3RoO1xuXG4gICAgZm9yIChpID0gMDsgaSAhPT0gTmNvbnN0cmFpbnRzOyBpKyspIHtcbiAgICAgIGNvbnN0IGMgPSBjb25zdHJhaW50c1tpXTtcbiAgICAgIGMudXBkYXRlKCk7XG5cbiAgICAgIGZvciAobGV0IGogPSAwLCBOZXEgPSBjLmVxdWF0aW9ucy5sZW5ndGg7IGogIT09IE5lcTsgaisrKSB7XG4gICAgICAgIGNvbnN0IGVxID0gYy5lcXVhdGlvbnNbal07XG4gICAgICAgIHNvbHZlci5hZGRFcXVhdGlvbihlcSk7XG4gICAgICB9XG4gICAgfSAvLyBTb2x2ZSB0aGUgY29uc3RyYWluZWQgc3lzdGVtXG5cblxuICAgIHNvbHZlci5zb2x2ZShkdCwgdGhpcyk7XG5cbiAgICBpZiAoZG9Qcm9maWxpbmcpIHtcbiAgICAgIHByb2ZpbGUuc29sdmUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0O1xuICAgIH0gLy8gUmVtb3ZlIGFsbCBjb250YWN0cyBmcm9tIHNvbHZlclxuXG5cbiAgICBzb2x2ZXIucmVtb3ZlQWxsRXF1YXRpb25zKCk7IC8vIEFwcGx5IGRhbXBpbmcsIHNlZSBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvYnVsbGV0L2lzc3Vlcy9kZXRhaWw/aWQ9NzQgZm9yIGRldGFpbHNcblxuICAgIGNvbnN0IHBvdyA9IE1hdGgucG93O1xuXG4gICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTtcblxuICAgICAgaWYgKGJpLnR5cGUgJiBEWU5BTUlDKSB7XG4gICAgICAgIC8vIE9ubHkgZm9yIGR5bmFtaWMgYm9kaWVzXG4gICAgICAgIGNvbnN0IGxkID0gcG93KDEuMCAtIGJpLmxpbmVhckRhbXBpbmcsIGR0KTtcbiAgICAgICAgY29uc3QgdiA9IGJpLnZlbG9jaXR5O1xuICAgICAgICB2LnNjYWxlKGxkLCB2KTtcbiAgICAgICAgY29uc3QgYXYgPSBiaS5hbmd1bGFyVmVsb2NpdHk7XG5cbiAgICAgICAgaWYgKGF2KSB7XG4gICAgICAgICAgY29uc3QgYWQgPSBwb3coMS4wIC0gYmkuYW5ndWxhckRhbXBpbmcsIGR0KTtcbiAgICAgICAgICBhdi5zY2FsZShhZCwgYXYpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfcHJlU3RlcEV2ZW50KTsgLy8gSW52b2tlIHByZS1zdGVwIGNhbGxiYWNrc1xuXG4gICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTtcblxuICAgICAgaWYgKGJpLnByZVN0ZXApIHtcbiAgICAgICAgYmkucHJlU3RlcC5jYWxsKGJpKTtcbiAgICAgIH1cbiAgICB9IC8vIExlYXAgZnJvZ1xuICAgIC8vIHZuZXcgPSB2ICsgaCpmL21cbiAgICAvLyB4bmV3ID0geCArIGgqdm5ld1xuXG5cbiAgICBpZiAoZG9Qcm9maWxpbmcpIHtcbiAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RlcG51bWJlciA9IHRoaXMuc3RlcG51bWJlcjtcbiAgICBjb25zdCBxdWF0Tm9ybWFsaXplID0gc3RlcG51bWJlciAlICh0aGlzLnF1YXROb3JtYWxpemVTa2lwICsgMSkgPT09IDA7XG4gICAgY29uc3QgcXVhdE5vcm1hbGl6ZUZhc3QgPSB0aGlzLnF1YXROb3JtYWxpemVGYXN0O1xuXG4gICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBib2RpZXNbaV0uaW50ZWdyYXRlKGR0LCBxdWF0Tm9ybWFsaXplLCBxdWF0Tm9ybWFsaXplRmFzdCk7XG4gICAgfVxuXG4gICAgdGhpcy5jbGVhckZvcmNlcygpO1xuICAgIHRoaXMuYnJvYWRwaGFzZS5kaXJ0eSA9IHRydWU7XG5cbiAgICBpZiAoZG9Qcm9maWxpbmcpIHtcbiAgICAgIHByb2ZpbGUuaW50ZWdyYXRlID0gcGVyZm9ybWFuY2Uubm93KCkgLSBwcm9maWxpbmdTdGFydDtcbiAgICB9IC8vIFVwZGF0ZSBzdGVwIG51bWJlclxuXG5cbiAgICB0aGlzLnN0ZXBudW1iZXIgKz0gMTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoV29ybGRfc3RlcF9wb3N0U3RlcEV2ZW50KTsgLy8gSW52b2tlIHBvc3Qtc3RlcCBjYWxsYmFja3NcblxuICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykge1xuICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07XG4gICAgICBjb25zdCBwb3N0U3RlcCA9IGJpLnBvc3RTdGVwO1xuXG4gICAgICBpZiAocG9zdFN0ZXApIHtcbiAgICAgICAgcG9zdFN0ZXAuY2FsbChiaSk7XG4gICAgICB9XG4gICAgfSAvLyBTbGVlcGluZyB1cGRhdGVcblxuXG4gICAgbGV0IGhhc0FjdGl2ZUJvZGllcyA9IHRydWU7XG5cbiAgICBpZiAodGhpcy5hbGxvd1NsZWVwKSB7XG4gICAgICBoYXNBY3RpdmVCb2RpZXMgPSBmYWxzZTtcblxuICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldO1xuICAgICAgICBiaS5zbGVlcFRpY2sodGhpcy50aW1lKTtcblxuICAgICAgICBpZiAoYmkuc2xlZXBTdGF0ZSAhPT0gQm9keS5TTEVFUElORykge1xuICAgICAgICAgIGhhc0FjdGl2ZUJvZGllcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmhhc0FjdGl2ZUJvZGllcyA9IGhhc0FjdGl2ZUJvZGllcztcbiAgfVxuXG4gIGVtaXRDb250YWN0RXZlbnRzKCkge1xuICAgIGNvbnN0IGhhc0JlZ2luQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignYmVnaW5Db250YWN0Jyk7XG4gICAgY29uc3QgaGFzRW5kQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignZW5kQ29udGFjdCcpO1xuXG4gICAgaWYgKGhhc0JlZ2luQ29udGFjdCB8fCBoYXNFbmRDb250YWN0KSB7XG4gICAgICB0aGlzLmJvZHlPdmVybGFwS2VlcGVyLmdldERpZmYoYWRkaXRpb25zLCByZW1vdmFscyk7XG4gICAgfVxuXG4gICAgaWYgKGhhc0JlZ2luQ29udGFjdCkge1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBhZGRpdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7XG4gICAgICAgIGJlZ2luQ29udGFjdEV2ZW50LmJvZHlBID0gdGhpcy5nZXRCb2R5QnlJZChhZGRpdGlvbnNbaV0pO1xuICAgICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QiA9IHRoaXMuZ2V0Qm9keUJ5SWQoYWRkaXRpb25zW2kgKyAxXSk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChiZWdpbkNvbnRhY3RFdmVudCk7XG4gICAgICB9XG5cbiAgICAgIGJlZ2luQ29udGFjdEV2ZW50LmJvZHlBID0gYmVnaW5Db250YWN0RXZlbnQuYm9keUIgPSBudWxsO1xuICAgIH1cblxuICAgIGlmIChoYXNFbmRDb250YWN0KSB7XG4gICAgICBmb3IgKGxldCBpID0gMCwgbCA9IHJlbW92YWxzLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikge1xuICAgICAgICBlbmRDb250YWN0RXZlbnQuYm9keUEgPSB0aGlzLmdldEJvZHlCeUlkKHJlbW92YWxzW2ldKTtcbiAgICAgICAgZW5kQ29udGFjdEV2ZW50LmJvZHlCID0gdGhpcy5nZXRCb2R5QnlJZChyZW1vdmFsc1tpICsgMV0pO1xuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZW5kQ29udGFjdEV2ZW50KTtcbiAgICAgIH1cblxuICAgICAgZW5kQ29udGFjdEV2ZW50LmJvZHlBID0gZW5kQ29udGFjdEV2ZW50LmJvZHlCID0gbnVsbDtcbiAgICB9XG5cbiAgICBhZGRpdGlvbnMubGVuZ3RoID0gcmVtb3ZhbHMubGVuZ3RoID0gMDtcbiAgICBjb25zdCBoYXNCZWdpblNoYXBlQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignYmVnaW5TaGFwZUNvbnRhY3QnKTtcbiAgICBjb25zdCBoYXNFbmRTaGFwZUNvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2VuZFNoYXBlQ29udGFjdCcpO1xuXG4gICAgaWYgKGhhc0JlZ2luU2hhcGVDb250YWN0IHx8IGhhc0VuZFNoYXBlQ29udGFjdCkge1xuICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIuZ2V0RGlmZihhZGRpdGlvbnMsIHJlbW92YWxzKTtcbiAgICB9XG5cbiAgICBpZiAoaGFzQmVnaW5TaGFwZUNvbnRhY3QpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYWRkaXRpb25zLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikge1xuICAgICAgICBjb25zdCBzaGFwZUEgPSB0aGlzLmdldFNoYXBlQnlJZChhZGRpdGlvbnNbaV0pO1xuICAgICAgICBjb25zdCBzaGFwZUIgPSB0aGlzLmdldFNoYXBlQnlJZChhZGRpdGlvbnNbaSArIDFdKTtcbiAgICAgICAgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5zaGFwZUEgPSBzaGFwZUE7XG4gICAgICAgIGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gc2hhcGVCO1xuICAgICAgICBpZiAoc2hhcGVBKSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlBID0gc2hhcGVBLmJvZHk7XG4gICAgICAgIGlmIChzaGFwZUIpIGJlZ2luU2hhcGVDb250YWN0RXZlbnQuYm9keUIgPSBzaGFwZUIuYm9keTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGJlZ2luU2hhcGVDb250YWN0RXZlbnQpO1xuICAgICAgfVxuXG4gICAgICBiZWdpblNoYXBlQ29udGFjdEV2ZW50LmJvZHlBID0gYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5zaGFwZUIgPSBudWxsO1xuICAgIH1cblxuICAgIGlmIChoYXNFbmRTaGFwZUNvbnRhY3QpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gcmVtb3ZhbHMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7XG4gICAgICAgIGNvbnN0IHNoYXBlQSA9IHRoaXMuZ2V0U2hhcGVCeUlkKHJlbW92YWxzW2ldKTtcbiAgICAgICAgY29uc3Qgc2hhcGVCID0gdGhpcy5nZXRTaGFwZUJ5SWQocmVtb3ZhbHNbaSArIDFdKTtcbiAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gc2hhcGVBO1xuICAgICAgICBlbmRTaGFwZUNvbnRhY3RFdmVudC5zaGFwZUIgPSBzaGFwZUI7XG4gICAgICAgIGlmIChzaGFwZUEpIGVuZFNoYXBlQ29udGFjdEV2ZW50LmJvZHlBID0gc2hhcGVBLmJvZHk7XG4gICAgICAgIGlmIChzaGFwZUIpIGVuZFNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gc2hhcGVCLmJvZHk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChlbmRTaGFwZUNvbnRhY3RFdmVudCk7XG4gICAgICB9XG5cbiAgICAgIGVuZFNoYXBlQ29udGFjdEV2ZW50LmJvZHlBID0gZW5kU2hhcGVDb250YWN0RXZlbnQuYm9keUIgPSBlbmRTaGFwZUNvbnRhY3RFdmVudC5zaGFwZUEgPSBlbmRTaGFwZUNvbnRhY3RFdmVudC5zaGFwZUIgPSBudWxsO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogU2V0cyBhbGwgYm9keSBmb3JjZXMgaW4gdGhlIHdvcmxkIHRvIHplcm8uXG4gICAqL1xuXG5cbiAgY2xlYXJGb3JjZXMoKSB7XG4gICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7XG4gICAgY29uc3QgTiA9IGJvZGllcy5sZW5ndGg7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7XG4gICAgICBjb25zdCBiID0gYm9kaWVzW2ldO1xuICAgICAgYi5mb3JjZTtcbiAgICAgIGIudG9ycXVlO1xuICAgICAgYi5mb3JjZS5zZXQoMCwgMCwgMCk7XG4gICAgICBiLnRvcnF1ZS5zZXQoMCwgMCwgMCk7XG4gICAgfVxuICB9XG5cbn0gLy8gVGVtcCBzdHVmZlxuXG5uZXcgQUFCQigpO1xuY29uc3QgdG1wUmF5ID0gbmV3IFJheSgpOyAvLyBwZXJmb3JtYW5jZS5ub3coKSBmYWxsYmFjayBvbiBEYXRlLm5vdygpXG5cbmNvbnN0IHBlcmZvcm1hbmNlID0gZ2xvYmFsVGhpcy5wZXJmb3JtYW5jZSB8fCB7fTtcblxuaWYgKCFwZXJmb3JtYW5jZS5ub3cpIHtcbiAgbGV0IG5vd09mZnNldCA9IERhdGUubm93KCk7XG5cbiAgaWYgKHBlcmZvcm1hbmNlLnRpbWluZyAmJiBwZXJmb3JtYW5jZS50aW1pbmcubmF2aWdhdGlvblN0YXJ0KSB7XG4gICAgbm93T2Zmc2V0ID0gcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydDtcbiAgfVxuXG4gIHBlcmZvcm1hbmNlLm5vdyA9ICgpID0+IERhdGUubm93KCkgLSBub3dPZmZzZXQ7XG59XG4vLyBSZXVzYWJsZSBldmVudCBvYmplY3RzIHRvIHNhdmUgbWVtb3J5LlxuXG5jb25zdCBXb3JsZF9zdGVwX3Bvc3RTdGVwRXZlbnQgPSB7XG4gIHR5cGU6ICdwb3N0U3RlcCdcbn07IC8vIERpc3BhdGNoZWQgYmVmb3JlIHRoZSB3b3JsZCBzdGVwcyBmb3J3YXJkIGluIHRpbWUuXG5cbmNvbnN0IFdvcmxkX3N0ZXBfcHJlU3RlcEV2ZW50ID0ge1xuICB0eXBlOiAncHJlU3RlcCdcbn07XG5jb25zdCBXb3JsZF9zdGVwX2NvbGxpZGVFdmVudCA9IHtcbiAgdHlwZTogQm9keS5DT0xMSURFX0VWRU5UX05BTUUsXG4gIGJvZHk6IG51bGwsXG4gIGNvbnRhY3Q6IG51bGxcbn07IC8vIFBvb2xzIGZvciB1bnVzZWQgb2JqZWN0c1xuXG5jb25zdCBXb3JsZF9zdGVwX29sZENvbnRhY3RzID0gW107XG5jb25zdCBXb3JsZF9zdGVwX2ZyaWN0aW9uRXF1YXRpb25Qb29sID0gW107IC8vIFJldXNhYmxlIGFycmF5cyBmb3IgY29sbGlzaW9uIHBhaXJzXG5cbmNvbnN0IFdvcmxkX3N0ZXBfcDEgPSBbXTtcbmNvbnN0IFdvcmxkX3N0ZXBfcDIgPSBbXTsgLy8gU3R1ZmYgZm9yIGVtaXRDb250YWN0RXZlbnRzXG5cbmNvbnN0IGFkZGl0aW9ucyA9IFtdO1xuY29uc3QgcmVtb3ZhbHMgPSBbXTtcbmNvbnN0IGJlZ2luQ29udGFjdEV2ZW50ID0ge1xuICB0eXBlOiAnYmVnaW5Db250YWN0JyxcbiAgYm9keUE6IG51bGwsXG4gIGJvZHlCOiBudWxsXG59O1xuY29uc3QgZW5kQ29udGFjdEV2ZW50ID0ge1xuICB0eXBlOiAnZW5kQ29udGFjdCcsXG4gIGJvZHlBOiBudWxsLFxuICBib2R5QjogbnVsbFxufTtcbmNvbnN0IGJlZ2luU2hhcGVDb250YWN0RXZlbnQgPSB7XG4gIHR5cGU6ICdiZWdpblNoYXBlQ29udGFjdCcsXG4gIGJvZHlBOiBudWxsLFxuICBib2R5QjogbnVsbCxcbiAgc2hhcGVBOiBudWxsLFxuICBzaGFwZUI6IG51bGxcbn07XG5jb25zdCBlbmRTaGFwZUNvbnRhY3RFdmVudCA9IHtcbiAgdHlwZTogJ2VuZFNoYXBlQ29udGFjdCcsXG4gIGJvZHlBOiBudWxsLFxuICBib2R5QjogbnVsbCxcbiAgc2hhcGVBOiBudWxsLFxuICBzaGFwZUI6IG51bGxcbn07XG5cbmV4cG9ydCB7IEFBQkIsIEFycmF5Q29sbGlzaW9uTWF0cml4LCBCT0RZX1NMRUVQX1NUQVRFUywgQk9EWV9UWVBFUywgQm9keSwgQm94LCBCcm9hZHBoYXNlLCBDT0xMSVNJT05fVFlQRVMsIENvbmVUd2lzdENvbnN0cmFpbnQsIENvbnN0cmFpbnQsIENvbnRhY3RFcXVhdGlvbiwgQ29udGFjdE1hdGVyaWFsLCBDb252ZXhQb2x5aGVkcm9uLCBDeWxpbmRlciwgRGlzdGFuY2VDb25zdHJhaW50LCBFcXVhdGlvbiwgRXZlbnRUYXJnZXQsIEZyaWN0aW9uRXF1YXRpb24sIEdTU29sdmVyLCBHcmlkQnJvYWRwaGFzZSwgSGVpZ2h0ZmllbGQsIEhpbmdlQ29uc3RyYWludCwgSmFjb2JpYW5FbGVtZW50LCBMb2NrQ29uc3RyYWludCwgTWF0MywgTWF0ZXJpYWwsIE5haXZlQnJvYWRwaGFzZSwgTmFycm93cGhhc2UsIE9iamVjdENvbGxpc2lvbk1hdHJpeCwgUGFydGljbGUsIFBsYW5lLCBQb2ludFRvUG9pbnRDb25zdHJhaW50LCBQb29sLCBRdWF0ZXJuaW9uLCBSQVlfTU9ERVMsIFJheSwgUmF5Y2FzdFJlc3VsdCwgUmF5Y2FzdFZlaGljbGUsIFJpZ2lkVmVoaWNsZSwgUm90YXRpb25hbEVxdWF0aW9uLCBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbiwgU0FQQnJvYWRwaGFzZSwgU0hBUEVfVFlQRVMsIFNQSFN5c3RlbSwgU2hhcGUsIFNvbHZlciwgU3BoZXJlLCBTcGxpdFNvbHZlciwgU3ByaW5nLCBUcmFuc2Zvcm0sIFRyaW1lc2gsIFZlYzMsIFZlYzNQb29sLCBXaGVlbEluZm8sIFdvcmxkIH07XG4iLCJpbXBvcnQge1xuICBCb2R5LFxuICBCb3gsXG4gIENvbnZleFBvbHloZWRyb24sXG4gIEN5bGluZGVyLFxuICBIZWlnaHRmaWVsZCxcbiAgTWF0ZXJpYWwsXG4gIFBhcnRpY2xlLFxuICBQbGFuZSxcbiAgUXVhdGVybmlvbixcbiAgU3BoZXJlLFxuICBUcmltZXNoLFxuICBWZWMzLFxufSBmcm9tICdjYW5ub24tZXMnXG5cbmNvbnN0IG1ha2VWZWMzID0gKFt4LCB5LCB6XSkgPT4gbmV3IFZlYzMoeCwgeSwgeilcbmNvbnN0IHByZXBhcmVTcGhlcmUgPSAoYXJncykgPT4gKEFycmF5LmlzQXJyYXkoYXJncykgPyBhcmdzIDogW2FyZ3NdKVxuY29uc3QgcHJlcGFyZUNvbnZleFBvbHloZWRyb24gPSAoW3YsIGZhY2VzLCBuLCBhLCBib3VuZGluZ1NwaGVyZVJhZGl1c10pID0+IFtcbiAge1xuICAgIHZlcnRpY2VzOiB2ID8gdi5tYXAobWFrZVZlYzMpIDogdW5kZWZpbmVkLFxuICAgIGZhY2VzLFxuICAgIG5vcm1hbHM6IG4gPyBuLm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQsXG4gICAgYXhlczogYSA/IGEubWFwKG1ha2VWZWMzKSA6IHVuZGVmaW5lZCxcbiAgICBib3VuZGluZ1NwaGVyZVJhZGl1cyxcbiAgfSxcbl1cblxuZnVuY3Rpb24gY3JlYXRlU2hhcGUodHlwZSwgYXJncykge1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdCb3gnOlxuICAgICAgcmV0dXJuIG5ldyBCb3gobmV3IFZlYzMoLi4uYXJncy5tYXAoKHYpID0+IHYgLyAyKSkpIC8vIGV4dGVudHMgPT4gaGFsZkV4dGVudHNcbiAgICBjYXNlICdDb252ZXhQb2x5aGVkcm9uJzpcbiAgICAgIHJldHVybiBuZXcgQ29udmV4UG9seWhlZHJvbiguLi5wcmVwYXJlQ29udmV4UG9seWhlZHJvbihhcmdzKSlcbiAgICBjYXNlICdDeWxpbmRlcic6XG4gICAgICByZXR1cm4gbmV3IEN5bGluZGVyKC4uLmFyZ3MpIC8vIFsgcmFkaXVzVG9wLCByYWRpdXNCb3R0b20sIGhlaWdodCwgbnVtU2VnbWVudHMgXSA9IGFyZ3NcbiAgICBjYXNlICdIZWlnaHRmaWVsZCc6XG4gICAgICByZXR1cm4gbmV3IEhlaWdodGZpZWxkKC4uLmFyZ3MpIC8vIFsgQXJyYXkgZGF0YSwgb3B0aW9uczoge21pblZhbHVlLCBtYXhWYWx1ZSwgZWxlbWVudFNpemV9ICBdID0gYXJnc1xuICAgIGNhc2UgJ1BhcnRpY2xlJzpcbiAgICAgIHJldHVybiBuZXcgUGFydGljbGUoKSAvLyBubyBhcmdzXG4gICAgY2FzZSAnUGxhbmUnOlxuICAgICAgcmV0dXJuIG5ldyBQbGFuZSgpIC8vIG5vIGFyZ3MsIGluZmluaXRlIHggYW5kIHlcbiAgICBjYXNlICdTcGhlcmUnOlxuICAgICAgcmV0dXJuIG5ldyBTcGhlcmUoLi4ucHJlcGFyZVNwaGVyZShhcmdzKSkgLy8gcmFkaXVzID0gYXJnc1xuICAgIGNhc2UgJ1RyaW1lc2gnOlxuICAgICAgcmV0dXJuIG5ldyBUcmltZXNoKC4uLmFyZ3MpIC8vIFt2ZXJ0aWNlcywgaW5kaWNlc10gPSBhcmdzXG4gIH1cbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHV1aWQge3N0cmluZ31cbiAqIEBwYXJhbSBwcm9wcyB7Qm9keVByb3BzfVxuICogQHBhcmFtIHR5cGUge0JvZHlTaGFwZVR5cGV9XG4gKiBAcmV0dXJuIHttb2R1bGU6b2JqZWN0cy9Cb2R5LkJvZHl9XG4gKi9cbmNvbnN0IHByb3BzVG9Cb2R5ID0gKHV1aWQsIHByb3BzLCB0eXBlKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBhcmdzID0gW10sXG4gICAgcG9zaXRpb24gPSBbMCwgMCwgMF0sXG4gICAgcm90YXRpb24gPSBbMCwgMCwgMF0sXG4gICAgdmVsb2NpdHkgPSBbMCwgMCwgMF0sXG4gICAgYW5ndWxhclZlbG9jaXR5ID0gWzAsIDAsIDBdLFxuICAgIGxpbmVhckZhY3RvciA9IFsxLCAxLCAxXSxcbiAgICBhbmd1bGFyRmFjdG9yID0gWzEsIDEsIDFdLFxuICAgIHR5cGU6IGJvZHlUeXBlLFxuICAgIG1hc3MsXG4gICAgbWF0ZXJpYWwsXG4gICAgc2hhcGVzLFxuICAgIG9uQ29sbGlkZSxcbiAgICBjb2xsaXNpb25SZXNwb25zZSxcbiAgICAuLi5leHRyYVxuICB9ID0gcHJvcHNcblxuICBjb25zdCBib2R5ID0gbmV3IEJvZHkoe1xuICAgIC4uLmV4dHJhLFxuICAgIG1hc3M6IGJvZHlUeXBlID09PSAnU3RhdGljJyA/IDAgOiBtYXNzLFxuICAgIHR5cGU6IGJvZHlUeXBlID8gQm9keVtib2R5VHlwZS50b1VwcGVyQ2FzZSgpXSA6IHVuZGVmaW5lZCxcbiAgICBtYXRlcmlhbDogbWF0ZXJpYWwgPyBuZXcgTWF0ZXJpYWwobWF0ZXJpYWwpIDogdW5kZWZpbmVkLFxuICB9KVxuICBib2R5LnV1aWQgPSB1dWlkXG5cbiAgaWYgKGNvbGxpc2lvblJlc3BvbnNlICE9PSB1bmRlZmluZWQpIHtcbiAgICBib2R5LmNvbGxpc2lvblJlc3BvbnNlID0gY29sbGlzaW9uUmVzcG9uc2VcbiAgfVxuXG4gIGlmICh0eXBlID09PSAnQ29tcG91bmQnKSB7XG4gICAgc2hhcGVzLmZvckVhY2goKHsgdHlwZSwgYXJncywgcG9zaXRpb24sIHJvdGF0aW9uLCBtYXRlcmlhbCwgLi4uZXh0cmEgfSkgPT4ge1xuICAgICAgY29uc3Qgc2hhcGVCb2R5ID0gYm9keS5hZGRTaGFwZShcbiAgICAgICAgY3JlYXRlU2hhcGUodHlwZSwgYXJncyksXG4gICAgICAgIHBvc2l0aW9uID8gbmV3IFZlYzMoLi4ucG9zaXRpb24pIDogdW5kZWZpbmVkLFxuICAgICAgICByb3RhdGlvbiA/IG5ldyBRdWF0ZXJuaW9uKCkuc2V0RnJvbUV1bGVyKC4uLnJvdGF0aW9uKSA6IHVuZGVmaW5lZCxcbiAgICAgIClcbiAgICAgIGlmIChtYXRlcmlhbCkgc2hhcGVCb2R5Lm1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKG1hdGVyaWFsKVxuICAgICAgT2JqZWN0LmFzc2lnbihzaGFwZUJvZHksIGV4dHJhKVxuICAgIH0pXG4gIH0gZWxzZSB7XG4gICAgYm9keS5hZGRTaGFwZShjcmVhdGVTaGFwZSh0eXBlLCBhcmdzKSlcbiAgfVxuXG4gIGJvZHkucG9zaXRpb24uc2V0KHBvc2l0aW9uWzBdLCBwb3NpdGlvblsxXSwgcG9zaXRpb25bMl0pXG4gIGJvZHkucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIocm90YXRpb25bMF0sIHJvdGF0aW9uWzFdLCByb3RhdGlvblsyXSlcbiAgYm9keS52ZWxvY2l0eS5zZXQodmVsb2NpdHlbMF0sIHZlbG9jaXR5WzFdLCB2ZWxvY2l0eVsyXSlcbiAgYm9keS5hbmd1bGFyVmVsb2NpdHkuc2V0KGFuZ3VsYXJWZWxvY2l0eVswXSwgYW5ndWxhclZlbG9jaXR5WzFdLCBhbmd1bGFyVmVsb2NpdHlbMl0pXG4gIGJvZHkubGluZWFyRmFjdG9yLnNldChsaW5lYXJGYWN0b3JbMF0sIGxpbmVhckZhY3RvclsxXSwgbGluZWFyRmFjdG9yWzJdKVxuICBib2R5LmFuZ3VsYXJGYWN0b3Iuc2V0KGFuZ3VsYXJGYWN0b3JbMF0sIGFuZ3VsYXJGYWN0b3JbMV0sIGFuZ3VsYXJGYWN0b3JbMl0pXG4gIHJldHVybiBib2R5XG59XG5cbmV4cG9ydCBkZWZhdWx0IHByb3BzVG9Cb2R5XG4iLCJpbXBvcnQge1xuICBXb3JsZCxcbiAgTmFpdmVCcm9hZHBoYXNlLFxuICBTQVBCcm9hZHBoYXNlLFxuICBWZWMzLFxuICBQb2ludFRvUG9pbnRDb25zdHJhaW50LFxuICBDb25lVHdpc3RDb25zdHJhaW50LFxuICBIaW5nZUNvbnN0cmFpbnQsXG4gIERpc3RhbmNlQ29uc3RyYWludCxcbiAgTG9ja0NvbnN0cmFpbnQsXG4gIENvbnN0cmFpbnQsXG4gIFNwcmluZyxcbiAgUXVhdGVybmlvbixcbiAgUmF5LFxuICBSYXljYXN0UmVzdWx0LFxuICBSYXljYXN0VmVoaWNsZSxcbiAgR1NTb2x2ZXIsXG4gIFNwbGl0U29sdmVyLFxufSBmcm9tICdjYW5ub24tZXMnXG5pbXBvcnQgcHJvcHNUb0JvZHkgZnJvbSAnLi9wcm9wc1RvQm9keSdcblxuY29uc3Qgc3RhdGUgPSB7XG4gIGJvZGllczoge30sXG4gIHZlaGljbGVzOiB7fSxcbiAgc3ByaW5nczoge30sXG4gIHNwcmluZ0luc3RhbmNlczoge30sXG4gIGNvbnN0cmFpbnRzOiB7fSxcbiAgcmF5czoge30sXG4gIHdvcmxkOiBuZXcgV29ybGQoKSxcbiAgY29uZmlnOiB7IHN0ZXA6IDEgLyA2MCB9LFxuICBzdWJzY3JpcHRpb25zOiB7fSxcbiAgYm9kaWVzTmVlZFN5bmNpbmc6IGZhbHNlLFxuICBsYXN0Q2FsbFRpbWU6IHVuZGVmaW5lZCxcbn1cblxuZnVuY3Rpb24gc3luY0JvZGllcygpIHtcbiAgc3RhdGUuYm9kaWVzTmVlZFN5bmNpbmcgPSB0cnVlXG4gIHN0YXRlLmJvZGllcyA9IHN0YXRlLndvcmxkLmJvZGllcy5yZWR1Y2UoKGFjYywgYm9keSkgPT4gKHsgLi4uYWNjLCBbYm9keS51dWlkXTogYm9keSB9KSwge30pXG59XG5cbmZ1bmN0aW9uIGVtaXRCZWdpbkNvbnRhY3QoeyBib2R5QSwgYm9keUIgfSkge1xuICBpZiAoIWJvZHlBIHx8ICFib2R5QikgcmV0dXJuXG4gIHNlbGYucG9zdE1lc3NhZ2UoeyBvcDogJ2V2ZW50JywgdHlwZTogJ2NvbGxpZGVCZWdpbicsIGJvZHlBOiBib2R5QS51dWlkLCBib2R5QjogYm9keUIudXVpZCB9KVxufVxuXG5mdW5jdGlvbiBlbWl0RW5kQ29udGFjdCh7IGJvZHlBLCBib2R5QiB9KSB7XG4gIGlmICghYm9keUEgfHwgIWJvZHlCKSByZXR1cm5cbiAgc2VsZi5wb3N0TWVzc2FnZSh7IG9wOiAnZXZlbnQnLCB0eXBlOiAnY29sbGlkZUVuZCcsIGJvZHlBOiBib2R5QS51dWlkLCBib2R5QjogYm9keUIudXVpZCB9KVxufVxuXG5zZWxmLm9ubWVzc2FnZSA9IChlKSA9PiB7XG4gIGNvbnN0IHsgb3AsIHV1aWQsIHR5cGUsIHBvc2l0aW9ucywgcXVhdGVybmlvbnMsIHByb3BzIH0gPSBlLmRhdGFcbiAgY29uc3QgYnJvYWRwaGFzZXMgPSB7IE5haXZlQnJvYWRwaGFzZSwgU0FQQnJvYWRwaGFzZSB9XG4gIHN3aXRjaCAob3ApIHtcbiAgICBjYXNlICdpbml0Jzoge1xuICAgICAgY29uc3Qge1xuICAgICAgICBncmF2aXR5LFxuICAgICAgICB0b2xlcmFuY2UsXG4gICAgICAgIHN0ZXAsXG4gICAgICAgIGl0ZXJhdGlvbnMsXG4gICAgICAgIGFsbG93U2xlZXAsXG4gICAgICAgIGJyb2FkcGhhc2UsXG4gICAgICAgIGF4aXNJbmRleCxcbiAgICAgICAgZGVmYXVsdENvbnRhY3RNYXRlcmlhbCxcbiAgICAgICAgcXVhdE5vcm1hbGl6ZUZhc3QsXG4gICAgICAgIHF1YXROb3JtYWxpemVTa2lwLFxuICAgICAgICBzb2x2ZXIsXG4gICAgICB9ID0gcHJvcHNcbiAgICAgIHN0YXRlLndvcmxkLmFsbG93U2xlZXAgPSBhbGxvd1NsZWVwXG4gICAgICBzdGF0ZS53b3JsZC5ncmF2aXR5LnNldChncmF2aXR5WzBdLCBncmF2aXR5WzFdLCBncmF2aXR5WzJdKVxuICAgICAgc3RhdGUud29ybGQucXVhdE5vcm1hbGl6ZUZhc3QgPSBxdWF0Tm9ybWFsaXplRmFzdFxuICAgICAgc3RhdGUud29ybGQucXVhdE5vcm1hbGl6ZVNraXAgPSBxdWF0Tm9ybWFsaXplU2tpcFxuXG4gICAgICBpZiAoc29sdmVyID09PSAnU3BsaXQnKSB7XG4gICAgICAgIHN0YXRlLndvcmxkLnNvbHZlciA9IG5ldyBTcGxpdFNvbHZlcihuZXcgR1NTb2x2ZXIoKSlcbiAgICAgIH1cblxuICAgICAgc3RhdGUud29ybGQuc29sdmVyLnRvbGVyYW5jZSA9IHRvbGVyYW5jZVxuICAgICAgc3RhdGUud29ybGQuc29sdmVyLml0ZXJhdGlvbnMgPSBpdGVyYXRpb25zXG4gICAgICBzdGF0ZS53b3JsZC5icm9hZHBoYXNlID0gbmV3IChicm9hZHBoYXNlc1ticm9hZHBoYXNlICsgJ0Jyb2FkcGhhc2UnXSB8fCBOYWl2ZUJyb2FkcGhhc2UpKHN0YXRlLndvcmxkKVxuICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZS5heGlzSW5kZXggPSBheGlzSW5kZXggPT09IHVuZGVmaW5lZCB8fCBheGlzSW5kZXggPT09IG51bGwgPyAwIDogYXhpc0luZGV4XG4gICAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdiZWdpbkNvbnRhY3QnLCBlbWl0QmVnaW5Db250YWN0KVxuICAgICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcignZW5kQ29udGFjdCcsIGVtaXRFbmRDb250YWN0KVxuICAgICAgT2JqZWN0LmFzc2lnbihzdGF0ZS53b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsLCBkZWZhdWx0Q29udGFjdE1hdGVyaWFsKVxuICAgICAgc3RhdGUuY29uZmlnLnN0ZXAgPSBzdGVwXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdzdGVwJzoge1xuICAgICAgY29uc3Qgbm93ID0gcGVyZm9ybWFuY2Uubm93KCkgLyAxMDAwXG4gICAgICBpZiAoIXN0YXRlLmxhc3RDYWxsVGltZSkge1xuICAgICAgICBzdGF0ZS53b3JsZC5zdGVwKHN0YXRlLmNvbmZpZy5zdGVwKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdENhbGwgPSBub3cgLSBzdGF0ZS5sYXN0Q2FsbFRpbWVcbiAgICAgICAgc3RhdGUud29ybGQuc3RlcChzdGF0ZS5jb25maWcuc3RlcCwgdGltZVNpbmNlTGFzdENhbGwpXG4gICAgICB9XG4gICAgICBzdGF0ZS5sYXN0Q2FsbFRpbWUgPSBub3dcblxuICAgICAgY29uc3QgbnVtYmVyT2ZCb2RpZXMgPSBzdGF0ZS53b3JsZC5ib2RpZXMubGVuZ3RoXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bWJlck9mQm9kaWVzOyBpKyspIHtcbiAgICAgICAgbGV0IGIgPSBzdGF0ZS53b3JsZC5ib2RpZXNbaV0sXG4gICAgICAgICAgcCA9IGIucG9zaXRpb24sXG4gICAgICAgICAgcSA9IGIucXVhdGVybmlvblxuICAgICAgICBwb3NpdGlvbnNbMyAqIGkgKyAwXSA9IHAueFxuICAgICAgICBwb3NpdGlvbnNbMyAqIGkgKyAxXSA9IHAueVxuICAgICAgICBwb3NpdGlvbnNbMyAqIGkgKyAyXSA9IHAuelxuICAgICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDBdID0gcS54XG4gICAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgMV0gPSBxLnlcbiAgICAgICAgcXVhdGVybmlvbnNbNCAqIGkgKyAyXSA9IHEuelxuICAgICAgICBxdWF0ZXJuaW9uc1s0ICogaSArIDNdID0gcS53XG4gICAgICB9XG4gICAgICBjb25zdCBvYnNlcnZhdGlvbnMgPSBbXVxuICAgICAgZm9yIChjb25zdCBpZCBvZiBPYmplY3Qua2V5cyhzdGF0ZS5zdWJzY3JpcHRpb25zKSkge1xuICAgICAgICBsZXQgW3V1aWQsIHR5cGUsIHRhcmdldCA9ICdib2RpZXMnXSA9IHN0YXRlLnN1YnNjcmlwdGlvbnNbaWRdXG4gICAgICAgIGxldCBvYmplY3QgPSBzdGF0ZVt0YXJnZXRdXG4gICAgICAgIGlmICghb2JqZWN0IHx8ICFvYmplY3RbdXVpZF0pIGNvbnRpbnVlXG4gICAgICAgIGxldCB2YWx1ZSA9IG9iamVjdFt1dWlkXVt0eXBlXVxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBWZWMzIHx8IHZhbHVlIGluc3RhbmNlb2YgUXVhdGVybmlvbikgdmFsdWUgPSB2YWx1ZS50b0FycmF5KClcbiAgICAgICAgb2JzZXJ2YXRpb25zLnB1c2goW2lkLCB2YWx1ZSwgdHlwZV0pXG4gICAgICB9XG4gICAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgICBvcDogJ2ZyYW1lJyxcbiAgICAgICAgcG9zaXRpb25zLFxuICAgICAgICBxdWF0ZXJuaW9ucyxcbiAgICAgICAgb2JzZXJ2YXRpb25zLFxuICAgICAgICBhY3RpdmU6IHN0YXRlLndvcmxkLmhhc0FjdGl2ZUJvZGllcyxcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS5ib2RpZXNOZWVkU3luY2luZykge1xuICAgICAgICBtZXNzYWdlLmJvZGllcyA9IHN0YXRlLndvcmxkLmJvZGllcy5tYXAoKGJvZHkpID0+IGJvZHkudXVpZClcbiAgICAgICAgc3RhdGUuYm9kaWVzTmVlZFN5bmNpbmcgPSBmYWxzZVxuICAgICAgfVxuICAgICAgc2VsZi5wb3N0TWVzc2FnZShtZXNzYWdlLCBbcG9zaXRpb25zLmJ1ZmZlciwgcXVhdGVybmlvbnMuYnVmZmVyXSlcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ2FkZEJvZGllcyc6IHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXVpZC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBib2R5ID0gcHJvcHNUb0JvZHkodXVpZFtpXSwgcHJvcHNbaV0sIHR5cGUpXG4gICAgICAgIHN0YXRlLndvcmxkLmFkZEJvZHkoYm9keSlcblxuICAgICAgICBpZiAocHJvcHNbaV0ub25Db2xsaWRlKVxuICAgICAgICAgIGJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY29sbGlkZScsICh7IHR5cGUsIGJvZHksIHRhcmdldCwgY29udGFjdCB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7IG5pLCByaSwgcmosIGJpLCBiaiwgaWQgfSA9IGNvbnRhY3RcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhY3RQb2ludCA9IGJpLnBvc2l0aW9uLnZhZGQocmkpXG4gICAgICAgICAgICBjb25zdCBjb250YWN0Tm9ybWFsID0gYmkgPT09IGJvZHkgPyBuaSA6IG5pLnNjYWxlKC0xKVxuICAgICAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgIG9wOiAnZXZlbnQnLFxuICAgICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgICBib2R5OiBib2R5LnV1aWQsXG4gICAgICAgICAgICAgIHRhcmdldDogdGFyZ2V0LnV1aWQsXG4gICAgICAgICAgICAgIGNvbnRhY3Q6IHtcbiAgICAgICAgICAgICAgICBuaTogbmkudG9BcnJheSgpLFxuICAgICAgICAgICAgICAgIHJpOiByaS50b0FycmF5KCksXG4gICAgICAgICAgICAgICAgcmo6IHJqLnRvQXJyYXkoKSxcbiAgICAgICAgICAgICAgICBiaTogYmkudXVpZCxcbiAgICAgICAgICAgICAgICBiajogYmoudXVpZCxcbiAgICAgICAgICAgICAgICBpbXBhY3RWZWxvY2l0eTogY29udGFjdC5nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsKCksXG4gICAgICAgICAgICAgICAgLy8gV29ybGQgcG9zaXRpb24gb2YgdGhlIGNvbnRhY3RcbiAgICAgICAgICAgICAgICBjb250YWN0UG9pbnQ6IGNvbnRhY3RQb2ludC50b0FycmF5KCksXG4gICAgICAgICAgICAgICAgLy8gTm9ybWFsIG9mIHRoZSBjb250YWN0LCByZWxhdGl2ZSB0byB0aGUgY29sbGlkaW5nIGJvZHlcbiAgICAgICAgICAgICAgICBjb250YWN0Tm9ybWFsOiBjb250YWN0Tm9ybWFsLnRvQXJyYXkoKSxcbiAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY29sbGlzaW9uRmlsdGVyczoge1xuICAgICAgICAgICAgICAgIGJvZHlGaWx0ZXJHcm91cDogYm9keS5jb2xsaXNpb25GaWx0ZXJHcm91cCxcbiAgICAgICAgICAgICAgICBib2R5RmlsdGVyTWFzazogYm9keS5jb2xsaXNpb25GaWx0ZXJNYXNrLFxuICAgICAgICAgICAgICAgIHRhcmdldEZpbHRlckdyb3VwOiB0YXJnZXQuY29sbGlzaW9uRmlsdGVyR3JvdXAsXG4gICAgICAgICAgICAgICAgdGFyZ2V0RmlsdGVyTWFzazogdGFyZ2V0LmNvbGxpc2lvbkZpbHRlck1hc2ssXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgICBzeW5jQm9kaWVzKClcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ3JlbW92ZUJvZGllcyc6IHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXVpZC5sZW5ndGg7IGkrKykgc3RhdGUud29ybGQucmVtb3ZlQm9keShzdGF0ZS5ib2RpZXNbdXVpZFtpXV0pXG4gICAgICBzeW5jQm9kaWVzKClcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ3N1YnNjcmliZSc6IHtcbiAgICAgIGNvbnN0IHsgaWQsIHR5cGUsIHRhcmdldCB9ID0gcHJvcHNcbiAgICAgIHN0YXRlLnN1YnNjcmlwdGlvbnNbaWRdID0gW3V1aWQsIHR5cGUsIHRhcmdldF1cbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ3Vuc3Vic2NyaWJlJzoge1xuICAgICAgZGVsZXRlIHN0YXRlLnN1YnNjcmlwdGlvbnNbcHJvcHNdXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdzZXRQb3NpdGlvbic6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0ucG9zaXRpb24uc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldFF1YXRlcm5pb24nOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnF1YXRlcm5pb24uc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0sIHByb3BzWzNdKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRSb3RhdGlvbic6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0ucXVhdGVybmlvbi5zZXRGcm9tRXVsZXIocHJvcHNbMF0sIHByb3BzWzFdLCBwcm9wc1syXSlcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0VmVsb2NpdHknOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnZlbG9jaXR5LnNldChwcm9wc1swXSwgcHJvcHNbMV0sIHByb3BzWzJdKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRBbmd1bGFyVmVsb2NpdHknOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFuZ3VsYXJWZWxvY2l0eS5zZXQocHJvcHNbMF0sIHByb3BzWzFdLCBwcm9wc1syXSlcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0TGluZWFyRmFjdG9yJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5saW5lYXJGYWN0b3Iuc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldEFuZ3VsYXJGYWN0b3InOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFuZ3VsYXJGYWN0b3Iuc2V0KHByb3BzWzBdLCBwcm9wc1sxXSwgcHJvcHNbMl0pXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldE1hc3MnOlxuICAgICAgLy8gYXNzdW1lIHRoYXQgYW4gdXBkYXRlIGZyb20gemVyby1tYXNzIGltcGxpZXMgYSBuZWVkIGZvciBkeW5hbWljcyBvbiBzdGF0aWMgb2JqLlxuICAgICAgaWYgKHByb3BzICE9PSAwICYmIHN0YXRlLmJvZGllc1t1dWlkXS50eXBlID09PSAwKSBzdGF0ZS5ib2RpZXNbdXVpZF0udHlwZSA9IDFcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5tYXNzID0gcHJvcHNcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS51cGRhdGVNYXNzUHJvcGVydGllcygpXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldExpbmVhckRhbXBpbmcnOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmxpbmVhckRhbXBpbmcgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRBbmd1bGFyRGFtcGluZyc6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uYW5ndWxhckRhbXBpbmcgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRBbGxvd1NsZWVwJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5hbGxvd1NsZWVwID0gcHJvcHNcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0U2xlZXBTcGVlZExpbWl0JzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5zbGVlcFNwZWVkTGltaXQgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRTbGVlcFRpbWVMaW1pdCc6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uc2xlZXBUaW1lTGltaXQgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRDb2xsaXNpb25GaWx0ZXJHcm91cCc6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uY29sbGlzaW9uRmlsdGVyR3JvdXAgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRDb2xsaXNpb25GaWx0ZXJNYXNrJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5jb2xsaXNpb25GaWx0ZXJNYXNrID0gcHJvcHNcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0Q29sbGlzaW9uUmVzcG9uc2UnOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmNvbGxpc2lvblJlc3BvbnNlID0gcHJvcHNcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0Rml4ZWRSb3RhdGlvbic6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uZml4ZWRSb3RhdGlvbiA9IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldElzVHJpZ2dlcic6XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0uaXNUcmlnZ2VyID0gcHJvcHNcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0R3Jhdml0eSc6XG4gICAgICBzdGF0ZS53b3JsZC5ncmF2aXR5LnNldChwcm9wc1swXSwgcHJvcHNbMV0sIHByb3BzWzJdKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRUb2xlcmFuY2UnOlxuICAgICAgc3RhdGUud29ybGQuc29sdmVyLnRvbGVyYW5jZSA9IHByb3BzXG4gICAgICBicmVha1xuICAgIGNhc2UgJ3NldFN0ZXAnOlxuICAgICAgc3RhdGUuY29uZmlnLnN0ZXAgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdzZXRJdGVyYXRpb25zJzpcbiAgICAgIHN0YXRlLndvcmxkLnNvbHZlci5pdGVyYXRpb25zID0gcHJvcHNcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0QnJvYWRwaGFzZSc6XG4gICAgICBzdGF0ZS53b3JsZC5icm9hZHBoYXNlID0gbmV3IChicm9hZHBoYXNlc1twcm9wcyArICdCcm9hZHBoYXNlJ10gfHwgTmFpdmVCcm9hZHBoYXNlKShzdGF0ZS53b3JsZClcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnc2V0QXhpc0luZGV4JzpcbiAgICAgIHN0YXRlLndvcmxkLmJyb2FkcGhhc2UuYXhpc0luZGV4ID0gcHJvcHMgPT09IHVuZGVmaW5lZCB8fCBwcm9wcyA9PT0gbnVsbCA/IDAgOiBwcm9wc1xuICAgICAgYnJlYWtcbiAgICBjYXNlICdhcHBseUZvcmNlJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5hcHBseUZvcmNlKG5ldyBWZWMzKC4uLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4ucHJvcHNbMV0pKVxuICAgICAgYnJlYWtcbiAgICBjYXNlICdhcHBseUltcHVsc2UnOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFwcGx5SW1wdWxzZShuZXcgVmVjMyguLi5wcm9wc1swXSksIG5ldyBWZWMzKC4uLnByb3BzWzFdKSlcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnYXBwbHlMb2NhbEZvcmNlJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5hcHBseUxvY2FsRm9yY2UobmV3IFZlYzMoLi4ucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5wcm9wc1sxXSkpXG4gICAgICBicmVha1xuICAgIGNhc2UgJ2FwcGx5TG9jYWxJbXB1bHNlJzpcbiAgICAgIHN0YXRlLmJvZGllc1t1dWlkXS5hcHBseUxvY2FsSW1wdWxzZShuZXcgVmVjMyguLi5wcm9wc1swXSksIG5ldyBWZWMzKC4uLnByb3BzWzFdKSlcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnYXBwbHlUb3JxdWUnOlxuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLmFwcGx5VG9ycXVlKG5ldyBWZWMzKC4uLnByb3BzWzBdKSlcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnYWRkQ29uc3RyYWludCc6IHtcbiAgICAgIGNvbnN0IFtib2R5QSwgYm9keUIsIG9wdG5zXSA9IHByb3BzXG4gICAgICBsZXQgeyBwaXZvdEEsIHBpdm90QiwgYXhpc0EsIGF4aXNCLCBtYXhNdWx0aXBsaWVyLCAuLi5vcHRpb25zIH0gPSBvcHRuc1xuXG4gICAgICAvLyBpcyB0aGVyZSBhIGJldHRlciB3YXkgdG8gZW5mb3JjZSBkZWZhdWx0cz9cbiAgICAgIHBpdm90QSA9IEFycmF5LmlzQXJyYXkocGl2b3RBKSA/IG5ldyBWZWMzKC4uLnBpdm90QSkgOiB1bmRlZmluZWRcbiAgICAgIHBpdm90QiA9IEFycmF5LmlzQXJyYXkocGl2b3RCKSA/IG5ldyBWZWMzKC4uLnBpdm90QikgOiB1bmRlZmluZWRcbiAgICAgIGF4aXNBID0gQXJyYXkuaXNBcnJheShheGlzQSkgPyBuZXcgVmVjMyguLi5heGlzQSkgOiB1bmRlZmluZWRcbiAgICAgIGF4aXNCID0gQXJyYXkuaXNBcnJheShheGlzQikgPyBuZXcgVmVjMyguLi5heGlzQikgOiB1bmRlZmluZWRcblxuICAgICAgbGV0IGNvbnN0cmFpbnRcblxuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ1BvaW50VG9Qb2ludCc6XG4gICAgICAgICAgY29uc3RyYWludCA9IG5ldyBQb2ludFRvUG9pbnRDb25zdHJhaW50KFxuICAgICAgICAgICAgc3RhdGUuYm9kaWVzW2JvZHlBXSxcbiAgICAgICAgICAgIHBpdm90QSxcbiAgICAgICAgICAgIHN0YXRlLmJvZGllc1tib2R5Ql0sXG4gICAgICAgICAgICBwaXZvdEIsXG4gICAgICAgICAgICBvcHRucy5tYXhGb3JjZSxcbiAgICAgICAgICApXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnQ29uZVR3aXN0JzpcbiAgICAgICAgICBjb25zdHJhaW50ID0gbmV3IENvbmVUd2lzdENvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwge1xuICAgICAgICAgICAgcGl2b3RBLFxuICAgICAgICAgICAgcGl2b3RCLFxuICAgICAgICAgICAgYXhpc0EsXG4gICAgICAgICAgICBheGlzQixcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdIaW5nZSc6XG4gICAgICAgICAgY29uc3RyYWludCA9IG5ldyBIaW5nZUNvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwge1xuICAgICAgICAgICAgcGl2b3RBLFxuICAgICAgICAgICAgcGl2b3RCLFxuICAgICAgICAgICAgYXhpc0EsXG4gICAgICAgICAgICBheGlzQixcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdEaXN0YW5jZSc6XG4gICAgICAgICAgY29uc3RyYWludCA9IG5ldyBEaXN0YW5jZUNvbnN0cmFpbnQoXG4gICAgICAgICAgICBzdGF0ZS5ib2RpZXNbYm9keUFdLFxuICAgICAgICAgICAgc3RhdGUuYm9kaWVzW2JvZHlCXSxcbiAgICAgICAgICAgIG9wdG5zLmRpc3RhbmNlLFxuICAgICAgICAgICAgb3B0bnMubWF4Rm9yY2UsXG4gICAgICAgICAgKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ0xvY2snOlxuICAgICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgTG9ja0NvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgb3B0bnMpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBjb25zdHJhaW50ID0gbmV3IENvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgb3B0bnMpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNvbnN0cmFpbnQudXVpZCA9IHV1aWRcbiAgICAgIHN0YXRlLndvcmxkLmFkZENvbnN0cmFpbnQoY29uc3RyYWludClcblxuICAgICAgaWYgKG1heE11bHRpcGxpZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBjb25zdCBwb3N0U3RlcENvbnN0cmFpbnQgPSAoKSA9PiB7XG4gICAgICAgICAgLy8gVGhlIG11bHRpcGxpZXIgaXMgcHJvcG9ydGlvbmFsIHRvIGhvdyBtdWNoIGZvcmNlIGlzIGFkZGVkIHRvIHRoZSBib2RpZXMgYnkgdGhlIGNvbnN0cmFpbnQuXG4gICAgICAgICAgLy8gSWYgdGhpcyBleGNlZWRzIGEgbGltaXQgdGhlIGNvbnN0cmFpbnQgaXMgZGlzYWJsZWQuXG4gICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IE1hdGguYWJzKGNvbnN0cmFpbnQuZXF1YXRpb25zWzBdLm11bHRpcGxpZXIpXG4gICAgICAgICAgaWYgKG11bHRpcGxpZXIgPiBtYXhNdWx0aXBsaWVyKSB7XG4gICAgICAgICAgICBjb25zdHJhaW50LmRpc2FibGUoKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5jb25zdHJhaW50c1t1dWlkXSA9IHBvc3RTdGVwQ29uc3RyYWludFxuICAgICAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLmNvbnN0cmFpbnRzW3V1aWRdKVxuICAgICAgfVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAncmVtb3ZlQ29uc3RyYWludCc6XG4gICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50c1xuICAgICAgICAuZmlsdGVyKCh7IHV1aWQ6IHRoaXNJZCB9KSA9PiB0aGlzSWQgPT09IHV1aWQpXG4gICAgICAgIC5tYXAoKGMpID0+IHN0YXRlLndvcmxkLnJlbW92ZUNvbnN0cmFpbnQoYykpXG4gICAgICBpZiAoc3RhdGUuY29uc3RyYWludHNbdXVpZF0pIHtcbiAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS5jb25zdHJhaW50c1t1dWlkXSlcbiAgICAgICAgZGVsZXRlIHN0YXRlLmNvbnN0cmFpbnRzW3V1aWRdXG4gICAgICB9XG4gICAgICBicmVha1xuXG4gICAgY2FzZSAnZW5hYmxlQ29uc3RyYWludCc6XG4gICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoKHsgdXVpZDogdGhpc0lkIH0pID0+IHRoaXNJZCA9PT0gdXVpZCkubWFwKChjKSA9PiBjLmVuYWJsZSgpKVxuICAgICAgYnJlYWtcblxuICAgIGNhc2UgJ2Rpc2FibGVDb25zdHJhaW50JzpcbiAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcigoeyB1dWlkOiB0aGlzSWQgfSkgPT4gdGhpc0lkID09PSB1dWlkKS5tYXAoKGMpID0+IGMuZGlzYWJsZSgpKVxuICAgICAgYnJlYWtcblxuICAgIGNhc2UgJ2VuYWJsZUNvbnN0cmFpbnRNb3Rvcic6XG4gICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoKHsgdXVpZDogdGhpc0lkIH0pID0+IHRoaXNJZCA9PT0gdXVpZCkubWFwKChjKSA9PiBjLmVuYWJsZU1vdG9yKCkpXG4gICAgICBicmVha1xuXG4gICAgY2FzZSAnZGlzYWJsZUNvbnN0cmFpbnRNb3Rvcic6XG4gICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoKHsgdXVpZDogdGhpc0lkIH0pID0+IHRoaXNJZCA9PT0gdXVpZCkubWFwKChjKSA9PiBjLmRpc2FibGVNb3RvcigpKVxuICAgICAgYnJlYWtcblxuICAgIGNhc2UgJ3NldENvbnN0cmFpbnRNb3RvclNwZWVkJzpcbiAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcigoeyB1dWlkOiB0aGlzSWQgfSkgPT4gdGhpc0lkID09PSB1dWlkKS5tYXAoKGMpID0+IGMuc2V0TW90b3JTcGVlZChwcm9wcykpXG4gICAgICBicmVha1xuXG4gICAgY2FzZSAnc2V0Q29uc3RyYWludE1vdG9yTWF4Rm9yY2UnOlxuICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHNcbiAgICAgICAgLmZpbHRlcigoeyB1dWlkOiB0aGlzSWQgfSkgPT4gdGhpc0lkID09PSB1dWlkKVxuICAgICAgICAubWFwKChjKSA9PiBjLnNldE1vdG9yTWF4Rm9yY2UocHJvcHMpKVxuICAgICAgYnJlYWtcblxuICAgIGNhc2UgJ2FkZFNwcmluZyc6IHtcbiAgICAgIGNvbnN0IFtib2R5QSwgYm9keUIsIG9wdG5zXSA9IHByb3BzXG4gICAgICBsZXQgeyB3b3JsZEFuY2hvckEsIHdvcmxkQW5jaG9yQiwgbG9jYWxBbmNob3JBLCBsb2NhbEFuY2hvckIsIHJlc3RMZW5ndGgsIHN0aWZmbmVzcywgZGFtcGluZyB9ID0gb3B0bnNcblxuICAgICAgd29ybGRBbmNob3JBID0gQXJyYXkuaXNBcnJheSh3b3JsZEFuY2hvckEpID8gbmV3IFZlYzMoLi4ud29ybGRBbmNob3JBKSA6IHVuZGVmaW5lZFxuICAgICAgd29ybGRBbmNob3JCID0gQXJyYXkuaXNBcnJheSh3b3JsZEFuY2hvckIpID8gbmV3IFZlYzMoLi4ud29ybGRBbmNob3JCKSA6IHVuZGVmaW5lZFxuICAgICAgbG9jYWxBbmNob3JBID0gQXJyYXkuaXNBcnJheShsb2NhbEFuY2hvckEpID8gbmV3IFZlYzMoLi4ubG9jYWxBbmNob3JBKSA6IHVuZGVmaW5lZFxuICAgICAgbG9jYWxBbmNob3JCID0gQXJyYXkuaXNBcnJheShsb2NhbEFuY2hvckIpID8gbmV3IFZlYzMoLi4ubG9jYWxBbmNob3JCKSA6IHVuZGVmaW5lZFxuXG4gICAgICBsZXQgc3ByaW5nID0gbmV3IFNwcmluZyhzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7XG4gICAgICAgIHdvcmxkQW5jaG9yQSxcbiAgICAgICAgd29ybGRBbmNob3JCLFxuICAgICAgICBsb2NhbEFuY2hvckEsXG4gICAgICAgIGxvY2FsQW5jaG9yQixcbiAgICAgICAgcmVzdExlbmd0aCxcbiAgICAgICAgc3RpZmZuZXNzLFxuICAgICAgICBkYW1waW5nLFxuICAgICAgfSlcblxuICAgICAgc3ByaW5nLnV1aWQgPSB1dWlkXG5cbiAgICAgIGxldCBwb3N0U3RlcFNwcmluZyA9ICgpID0+IHNwcmluZy5hcHBseUZvcmNlKClcblxuICAgICAgc3RhdGUuc3ByaW5nc1t1dWlkXSA9IHBvc3RTdGVwU3ByaW5nXG4gICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbdXVpZF0gPSBzcHJpbmdcblxuICAgICAgLy8gQ29tcHV0ZSB0aGUgZm9yY2UgYWZ0ZXIgZWFjaCBzdGVwXG4gICAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLnNwcmluZ3NbdXVpZF0pXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdzZXRTcHJpbmdTdGlmZm5lc3MnOiB7XG4gICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbdXVpZF0uc3RpZmZuZXNzID0gcHJvcHNcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ3NldFNwcmluZ1Jlc3RMZW5ndGgnOiB7XG4gICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbdXVpZF0ucmVzdExlbmd0aCA9IHByb3BzXG4gICAgICBicmVha1xuICAgIH1cbiAgICBjYXNlICdzZXRTcHJpbmdEYW1waW5nJzoge1xuICAgICAgc3RhdGUuc3ByaW5nSW5zdGFuY2VzW3V1aWRdLmRhbXBpbmcgPSBwcm9wc1xuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAncmVtb3ZlU3ByaW5nJzoge1xuICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS5zcHJpbmdzW3V1aWRdKVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAnYWRkUmF5Jzoge1xuICAgICAgY29uc3QgeyBmcm9tLCB0bywgLi4ub3B0aW9ucyB9ID0gcHJvcHNcbiAgICAgIGNvbnN0IHJheSA9IG5ldyBSYXkoZnJvbSA/IG5ldyBWZWMzKC4uLmZyb20pIDogdW5kZWZpbmVkLCB0byA/IG5ldyBWZWMzKC4uLnRvKSA6IHVuZGVmaW5lZClcbiAgICAgIG9wdGlvbnMubW9kZSA9IFJheVtvcHRpb25zLm1vZGUudG9VcHBlckNhc2UoKV1cbiAgICAgIG9wdGlvbnMucmVzdWx0ID0gbmV3IFJheWNhc3RSZXN1bHQoKVxuICAgICAgc3RhdGUucmF5c1t1dWlkXSA9ICgpID0+IHtcbiAgICAgICAgcmF5LmludGVyc2VjdFdvcmxkKHN0YXRlLndvcmxkLCBvcHRpb25zKVxuICAgICAgICBjb25zdCB7IGJvZHksIHNoYXBlLCByYXlGcm9tV29ybGQsIHJheVRvV29ybGQsIGhpdE5vcm1hbFdvcmxkLCBoaXRQb2ludFdvcmxkLCAuLi5yZXN0IH0gPVxuICAgICAgICAgIG9wdGlvbnMucmVzdWx0XG4gICAgICAgIHNlbGYucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgIG9wOiAnZXZlbnQnLFxuICAgICAgICAgIHR5cGU6ICdyYXloaXQnLFxuICAgICAgICAgIHJheToge1xuICAgICAgICAgICAgZnJvbSxcbiAgICAgICAgICAgIHRvLFxuICAgICAgICAgICAgZGlyZWN0aW9uOiByYXkuZGlyZWN0aW9uLnRvQXJyYXkoKSxcbiAgICAgICAgICAgIGNvbGxpc2lvbkZpbHRlckdyb3VwOiByYXkuY29sbGlzaW9uRmlsdGVyR3JvdXAsXG4gICAgICAgICAgICBjb2xsaXNpb25GaWx0ZXJNYXNrOiByYXkuY29sbGlzaW9uRmlsdGVyTWFzayxcbiAgICAgICAgICAgIHV1aWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBib2R5ID8gYm9keS51dWlkIDogbnVsbCxcbiAgICAgICAgICBzaGFwZTogc2hhcGUgPyB7IC4uLnNoYXBlLCBib2R5OiBib2R5LnV1aWQgfSA6IG51bGwsXG4gICAgICAgICAgcmF5RnJvbVdvcmxkOiByYXlGcm9tV29ybGQudG9BcnJheSgpLFxuICAgICAgICAgIHJheVRvV29ybGQ6IHJheVRvV29ybGQudG9BcnJheSgpLFxuICAgICAgICAgIGhpdE5vcm1hbFdvcmxkOiBoaXROb3JtYWxXb3JsZC50b0FycmF5KCksXG4gICAgICAgICAgaGl0UG9pbnRXb3JsZDogaGl0UG9pbnRXb3JsZC50b0FycmF5KCksXG4gICAgICAgICAgLi4ucmVzdCxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS5yYXlzW3V1aWRdKVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAncmVtb3ZlUmF5Jzoge1xuICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHN0YXRlLnJheXNbdXVpZF0pXG4gICAgICBkZWxldGUgc3RhdGUucmF5c1t1dWlkXVxuICAgICAgYnJlYWtcbiAgICB9XG4gICAgY2FzZSAnYWRkUmF5Y2FzdFZlaGljbGUnOiB7XG4gICAgICBjb25zdCBbY2hhc3Npc0JvZHksIHdoZWVscywgd2hlZWxJbmZvcywgaW5kZXhGb3J3YXJkQXhpcywgaW5kZXhSaWdodEF4aXMsIGluZGV4VXBBeGlzXSA9IHByb3BzXG4gICAgICBjb25zdCB2ZWhpY2xlID0gbmV3IFJheWNhc3RWZWhpY2xlKHtcbiAgICAgICAgY2hhc3Npc0JvZHk6IHN0YXRlLmJvZGllc1tjaGFzc2lzQm9keV0sXG4gICAgICAgIGluZGV4Rm9yd2FyZEF4aXMsXG4gICAgICAgIGluZGV4UmlnaHRBeGlzLFxuICAgICAgICBpbmRleFVwQXhpcyxcbiAgICAgIH0pXG4gICAgICB2ZWhpY2xlLndvcmxkID0gc3RhdGUud29ybGRcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd2hlZWxJbmZvcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB3aGVlbEluZm8gPSB3aGVlbEluZm9zW2ldXG4gICAgICAgIHdoZWVsSW5mby5kaXJlY3Rpb25Mb2NhbCA9IG5ldyBWZWMzKC4uLndoZWVsSW5mby5kaXJlY3Rpb25Mb2NhbClcbiAgICAgICAgd2hlZWxJbmZvLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCA9IG5ldyBWZWMzKC4uLndoZWVsSW5mby5jaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwpXG4gICAgICAgIHdoZWVsSW5mby5heGxlTG9jYWwgPSBuZXcgVmVjMyguLi53aGVlbEluZm8uYXhsZUxvY2FsKVxuICAgICAgICB2ZWhpY2xlLmFkZFdoZWVsKHdoZWVsSW5mbylcbiAgICAgIH1cblxuICAgICAgdmVoaWNsZS5wcmVTdGVwID0gKCkgPT4ge1xuICAgICAgICBzdGF0ZS52ZWhpY2xlc1t1dWlkXS51cGRhdGVWZWhpY2xlKHN0YXRlLndvcmxkLmR0KVxuICAgICAgfVxuICAgICAgOyh2ZWhpY2xlLnBvc3RTdGVwID0gKCkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXRlLnZlaGljbGVzW3V1aWRdLndoZWVsSW5mb3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1t1dWlkXS51cGRhdGVXaGVlbFRyYW5zZm9ybShpKVxuICAgICAgICAgIGNvbnN0IHQgPSBzdGF0ZS52ZWhpY2xlc1t1dWlkXS53aGVlbEluZm9zW2ldLndvcmxkVHJhbnNmb3JtXG4gICAgICAgICAgY29uc3Qgd2hlZWxCb2R5ID0gc3RhdGUuYm9kaWVzW3doZWVsc1tpXV1cbiAgICAgICAgICB3aGVlbEJvZHkucG9zaXRpb24uY29weSh0LnBvc2l0aW9uKVxuICAgICAgICAgIHdoZWVsQm9keS5xdWF0ZXJuaW9uLmNvcHkodC5xdWF0ZXJuaW9uKVxuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgICAgKHN0YXRlLnZlaGljbGVzW3V1aWRdID0gdmVoaWNsZSlcbiAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5wcmVTdGVwKVxuICAgICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1t1dWlkXS5wb3N0U3RlcClcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ3JlbW92ZVJheWNhc3RWZWhpY2xlJzoge1xuICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncHJlU3RlcCcsIHN0YXRlLnZlaGljbGVzW3V1aWRdLnByZVN0ZXApXG4gICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLnZlaGljbGVzW3V1aWRdLnBvc3RTdGVwKVxuICAgICAgc3RhdGUudmVoaWNsZXNbdXVpZF0ud29ybGQgPSBudWxsXG4gICAgICBkZWxldGUgc3RhdGUudmVoaWNsZXNbdXVpZF1cbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ3NldFJheWNhc3RWZWhpY2xlU3RlZXJpbmdWYWx1ZSc6IHtcbiAgICAgIGNvbnN0IFt2YWx1ZSwgd2hlZWxJbmRleF0gPSBwcm9wc1xuICAgICAgc3RhdGUudmVoaWNsZXNbdXVpZF0uc2V0U3RlZXJpbmdWYWx1ZSh2YWx1ZSwgd2hlZWxJbmRleClcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ2FwcGx5UmF5Y2FzdFZlaGljbGVFbmdpbmVGb3JjZSc6IHtcbiAgICAgIGNvbnN0IFt2YWx1ZSwgd2hlZWxJbmRleF0gPSBwcm9wc1xuICAgICAgc3RhdGUudmVoaWNsZXNbdXVpZF0uYXBwbHlFbmdpbmVGb3JjZSh2YWx1ZSwgd2hlZWxJbmRleClcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ3NldFJheWNhc3RWZWhpY2xlQnJha2UnOiB7XG4gICAgICBjb25zdCBbYnJha2UsIHdoZWVsSW5kZXhdID0gcHJvcHNcbiAgICAgIHN0YXRlLnZlaGljbGVzW3V1aWRdLnNldEJyYWtlKGJyYWtlLCB3aGVlbEluZGV4KVxuICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBjYXNlICd3YWtlVXAnOiB7XG4gICAgICBzdGF0ZS5ib2RpZXNbdXVpZF0ud2FrZVVwKClcbiAgICAgIGJyZWFrXG4gICAgfVxuICAgIGNhc2UgJ3NsZWVwJzoge1xuICAgICAgc3RhdGUuYm9kaWVzW3V1aWRdLnNsZWVwKClcbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiTWF0MyIsImNvbnN0cnVjdG9yIiwiZWxlbWVudHMiLCJpZGVudGl0eSIsImUiLCJzZXRaZXJvIiwic2V0VHJhY2UiLCJ2ZWN0b3IiLCJ4IiwieSIsInoiLCJnZXRUcmFjZSIsInRhcmdldCIsIlZlYzMiLCJ2bXVsdCIsInYiLCJzbXVsdCIsInMiLCJpIiwibGVuZ3RoIiwibW11bHQiLCJtYXRyaXgiLCJBIiwiQiIsIlQiLCJhMTEiLCJhMTIiLCJhMTMiLCJhMjEiLCJhMjIiLCJhMjMiLCJhMzEiLCJhMzIiLCJhMzMiLCJiMTEiLCJiMTIiLCJiMTMiLCJiMjEiLCJiMjIiLCJiMjMiLCJiMzEiLCJiMzIiLCJiMzMiLCJzY2FsZSIsInQiLCJzb2x2ZSIsImIiLCJuciIsIm5jIiwiZXFucyIsImoiLCJwdXNoIiwibiIsImsiLCJucCIsImtwIiwicCIsIm11bHRpcGxpZXIiLCJpc05hTiIsIkluZmluaXR5IiwidG9TdHJpbmciLCJyb3ciLCJjb2x1bW4iLCJ2YWx1ZSIsInVuZGVmaW5lZCIsImNvcHkiLCJyIiwic2VwIiwicmV2ZXJzZSIsInJldmVyc2VfZXFucyIsInNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24iLCJxIiwidyIsIngyIiwieTIiLCJ6MiIsInh4IiwieHkiLCJ4eiIsInl5IiwieXoiLCJ6eiIsInd4Iiwid3kiLCJ3eiIsInRyYW5zcG9zZSIsIk0iLCJ0bXAiLCJjcm9zcyIsInZ4IiwidnkiLCJ2eiIsInNldCIsInZhZGQiLCJ2c3ViIiwiY3Jvc3NtYXQiLCJub3JtYWxpemUiLCJNYXRoIiwic3FydCIsImludk4iLCJ1bml0IiwibmludiIsImxlbmd0aFNxdWFyZWQiLCJkb3QiLCJkaXN0YW5jZVRvIiwicHgiLCJweSIsInB6IiwiZGlzdGFuY2VTcXVhcmVkIiwic2NhbGFyIiwidm11bCIsImFkZFNjYWxlZFZlY3RvciIsImlzWmVybyIsIm5lZ2F0ZSIsInRhbmdlbnRzIiwidDEiLCJ0MiIsIm5vcm0iLCJWZWMzX3RhbmdlbnRzX24iLCJpbm9ybSIsInJhbmRWZWMiLCJWZWMzX3RhbmdlbnRzX3JhbmRWZWMiLCJhYnMiLCJ0b0FycmF5IiwibGVycCIsImFsbW9zdEVxdWFscyIsInByZWNpc2lvbiIsImFsbW9zdFplcm8iLCJpc0FudGlwYXJhbGxlbFRvIiwiYW50aXBfbmVnIiwiY2xvbmUiLCJaRVJPIiwiVU5JVF9YIiwiVU5JVF9ZIiwiVU5JVF9aIiwiQUFCQiIsIm9wdGlvbnMiLCJsb3dlckJvdW5kIiwidXBwZXJCb3VuZCIsInNldEZyb21Qb2ludHMiLCJwb2ludHMiLCJwb3NpdGlvbiIsInF1YXRlcm5pb24iLCJza2luU2l6ZSIsImwiLCJ1IiwidG1wJDEiLCJhYWJiIiwiZXh0ZW5kIiwibWluIiwibWF4Iiwib3ZlcmxhcHMiLCJsMSIsInUxIiwibDIiLCJ1MiIsIm92ZXJsYXBzWCIsIm92ZXJsYXBzWSIsIm92ZXJsYXBzWiIsInZvbHVtZSIsImNvbnRhaW5zIiwiZ2V0Q29ybmVycyIsImEiLCJjIiwiZCIsImYiLCJnIiwiaCIsInRvTG9jYWxGcmFtZSIsImZyYW1lIiwiY29ybmVycyIsInRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzIiwiY29ybmVyIiwicG9pbnRUb0xvY2FsIiwidG9Xb3JsZEZyYW1lIiwicG9pbnRUb1dvcmxkIiwib3ZlcmxhcHNSYXkiLCJyYXkiLCJkaXJlY3Rpb24iLCJmcm9tIiwiZGlyRnJhY1giLCJkaXJGcmFjWSIsImRpckZyYWNaIiwidDMiLCJ0NCIsInQ1IiwidDYiLCJ0bWluIiwidG1heCIsIkFycmF5Q29sbGlzaW9uTWF0cml4IiwiZ2V0IiwiYmkiLCJiaiIsImluZGV4IiwidGVtcCIsInJlc2V0Iiwic2V0TnVtT2JqZWN0cyIsIkV2ZW50VGFyZ2V0IiwiX2xpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0eXBlIiwibGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJpbmNsdWRlcyIsImhhc0V2ZW50TGlzdGVuZXIiLCJoYXNBbnlFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImluZGV4T2YiLCJzcGxpY2UiLCJkaXNwYXRjaEV2ZW50IiwiZXZlbnQiLCJsaXN0ZW5lckFycmF5IiwiY2FsbCIsIlF1YXRlcm5pb24iLCJzZXRGcm9tQXhpc0FuZ2xlIiwiYW5nbGUiLCJzaW4iLCJjb3MiLCJ0b0F4aXNBbmdsZSIsInRhcmdldEF4aXMiLCJhY29zIiwic2V0RnJvbVZlY3RvcnMiLCJzZnZfdDEiLCJzZnZfdDIiLCJQSSIsIm11bHQiLCJxdWF0IiwiYXgiLCJheSIsImF6IiwiYXciLCJieCIsImJ5IiwiYnoiLCJidyIsImludmVyc2UiLCJjb25qdWdhdGUiLCJpbm9ybTIiLCJub3JtYWxpemVGYXN0IiwicXgiLCJxeSIsInF6IiwicXciLCJpeCIsIml5IiwiaXoiLCJpdyIsInRvRXVsZXIiLCJvcmRlciIsImhlYWRpbmciLCJhdHRpdHVkZSIsImJhbmsiLCJ0ZXN0IiwiYXRhbjIiLCJzcXgiLCJzcXkiLCJzcXoiLCJhc2luIiwiRXJyb3IiLCJzZXRGcm9tRXVsZXIiLCJjMSIsImMyIiwiYzMiLCJzMSIsInMyIiwiczMiLCJzbGVycCIsInRvUXVhdCIsIm9tZWdhIiwiY29zb20iLCJzaW5vbSIsInNjYWxlMCIsInNjYWxlMSIsImludGVncmF0ZSIsImFuZ3VsYXJWZWxvY2l0eSIsImR0IiwiYW5ndWxhckZhY3RvciIsImhhbGZfZHQiLCJTSEFQRV9UWVBFUyIsIlNQSEVSRSIsIlBMQU5FIiwiQk9YIiwiQ09NUE9VTkQiLCJDT05WRVhQT0xZSEVEUk9OIiwiSEVJR0hURklFTEQiLCJQQVJUSUNMRSIsIkNZTElOREVSIiwiVFJJTUVTSCIsIlNoYXBlIiwiaWQiLCJib3VuZGluZ1NwaGVyZVJhZGl1cyIsImNvbGxpc2lvblJlc3BvbnNlIiwiY29sbGlzaW9uRmlsdGVyR3JvdXAiLCJjb2xsaXNpb25GaWx0ZXJNYXNrIiwibWF0ZXJpYWwiLCJib2R5IiwiaWRDb3VudGVyIiwidXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMiLCJjYWxjdWxhdGVMb2NhbEluZXJ0aWEiLCJtYXNzIiwiY2FsY3VsYXRlV29ybGRBQUJCIiwicG9zIiwidHlwZXMiLCJUcmFuc2Zvcm0iLCJ3b3JsZFBvaW50IiwicmVzdWx0IiwicG9pbnRUb0xvY2FsRnJhbWUiLCJsb2NhbFBvaW50IiwicG9pbnRUb1dvcmxkRnJhbWUiLCJ2ZWN0b3JUb1dvcmxkRnJhbWUiLCJsb2NhbFZlY3RvciIsInRtcFF1YXQkMSIsInZlY3RvclRvTG9jYWxGcmFtZSIsIndvcmxkVmVjdG9yIiwiQ29udmV4UG9seWhlZHJvbiIsInByb3BzIiwidmVydGljZXMiLCJmYWNlcyIsIm5vcm1hbHMiLCJheGVzIiwiZmFjZU5vcm1hbHMiLCJ3b3JsZFZlcnRpY2VzIiwid29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlIiwid29ybGRGYWNlTm9ybWFscyIsIndvcmxkRmFjZU5vcm1hbHNOZWVkc1VwZGF0ZSIsInVuaXF1ZUF4ZXMiLCJ1bmlxdWVFZGdlcyIsImNvbXB1dGVOb3JtYWxzIiwic2xpY2UiLCJjb21wdXRlRWRnZXMiLCJlZGdlcyIsImVkZ2UiLCJmYWNlIiwibnVtVmVydGljZXMiLCJmb3VuZCIsImdldEZhY2VOb3JtYWwiLCJ2ZXJ0ZXgiLCJjb25zb2xlIiwiZXJyb3IiLCJ3YXJuIiwidmEiLCJ2YiIsInZjIiwiY29tcHV0ZU5vcm1hbCIsImNiIiwiYWIiLCJjbGlwQWdhaW5zdEh1bGwiLCJwb3NBIiwicXVhdEEiLCJodWxsQiIsInBvc0IiLCJxdWF0QiIsInNlcGFyYXRpbmdOb3JtYWwiLCJtaW5EaXN0IiwibWF4RGlzdCIsIldvcmxkTm9ybWFsIiwiY2xvc2VzdEZhY2VCIiwiZG1heCIsIk51bWJlciIsIk1BWF9WQUxVRSIsIndvcmxkVmVydHNCMSIsIndvcmxkYiIsImNsaXBGYWNlQWdhaW5zdEh1bGwiLCJmaW5kU2VwYXJhdGluZ0F4aXMiLCJmYWNlTGlzdEEiLCJmYWNlTGlzdEIiLCJmYWNlQU5vcm1hbFdTMyIsIldvcmxkbm9ybWFsMSIsImRlbHRhQyIsIndvcmxkRWRnZTAiLCJ3b3JsZEVkZ2UxIiwiQ3Jvc3MiLCJkbWluIiwiaHVsbEEiLCJudW1GYWNlc0EiLCJmaSIsInRlc3RTZXBBeGlzIiwibnVtRmFjZXNCIiwiZTAiLCJlMSIsImRpc3QiLCJheGlzIiwicHJvamVjdCIsIm1heG1pbkEiLCJtYXhtaW5CIiwibWF4QSIsIm1pbkEiLCJtYXhCIiwibWluQiIsImQwIiwiZDEiLCJkZXB0aCIsImFhYmJtYXgiLCJhYWJibWluIiwiY29tcHV0ZUxvY2FsQUFCQiIsImdldFBsYW5lQ29uc3RhbnRPZkZhY2UiLCJmYWNlX2kiLCJmYWNlQU5vcm1hbFdTIiwiZWRnZTAiLCJXb3JsZEVkZ2UwIiwid29ybGRQbGFuZUFub3JtYWwxIiwicGxhbmVOb3JtYWxXUzEiLCJ3b3JsZEExIiwibG9jYWxQbGFuZU5vcm1hbCIsInBsYW5lTm9ybWFsV1MiLCJ3b3JsZFZlcnRzQjIiLCJwVnR4SW4iLCJwVnR4T3V0IiwiY2xvc2VzdEZhY2VBIiwicG9seUEiLCJjb25uZWN0ZWRGYWNlcyIsIm51bVZlcnRpY2VzQSIsIm90aGVyRmFjZSIsImxvY2FsUGxhbmVFcSIsInBsYW5lRXFXUyIsImNsaXBGYWNlQWdhaW5zdFBsYW5lIiwic2hpZnQiLCJsb2ciLCJwb2ludCIsIm5vcm1hbCIsImluVmVydGljZXMiLCJvdXRWZXJ0aWNlcyIsInBsYW5lTm9ybWFsIiwicGxhbmVDb25zdGFudCIsIm5fZG90X2ZpcnN0Iiwibl9kb3RfbGFzdCIsIm51bVZlcnRzIiwiZmlyc3RWZXJ0ZXgiLCJsYXN0VmVydGV4IiwidmkiLCJuZXd2IiwiY29tcHV0ZVdvcmxkVmVydGljZXMiLCJ2ZXJ0cyIsIndvcmxkVmVydHMiLCJjb21wdXRlV29ybGRGYWNlTm9ybWFscyIsIk4iLCJ3b3JsZE5vcm1hbHMiLCJtYXgyIiwibm9ybTIiLCJtaW54IiwibWlueSIsIm1pbnoiLCJtYXh4IiwibWF4eSIsIm1heHoiLCJ0ZW1wV29ybGRWZXJ0ZXgiLCJnZXRBdmVyYWdlUG9pbnRMb2NhbCIsInRyYW5zZm9ybUFsbFBvaW50cyIsIm9mZnNldCIsInBvaW50SXNJbnNpZGUiLCJwb2ludEluc2lkZSIsInZUb1AiLCJyMSIsInZUb1BvaW50SW5zaWRlIiwicjIiLCJzaGFwZSIsImxvY2FsQXhpcyIsInByb2plY3RfbG9jYWxBeGlzIiwibG9jYWxPcmlnaW4iLCJwcm9qZWN0X2xvY2FsT3JpZ2luIiwidnMiLCJhZGQiLCJ2YWwiLCJCb3giLCJoYWxmRXh0ZW50cyIsImNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiIsInVwZGF0ZUNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiIsInN4Iiwic3kiLCJzeiIsIlYiLCJjYWxjdWxhdGVJbmVydGlhIiwiZ2V0U2lkZU5vcm1hbHMiLCJzaXhUYXJnZXRWZWN0b3JzIiwic2lkZXMiLCJleCIsImZvckVhY2hXb3JsZENvcm5lciIsImNhbGxiYWNrIiwid29ybGRDb3JuZXJUZW1wUG9zIiwid29ybGRDb3JuZXJzVGVtcCIsIndjIiwiQk9EWV9UWVBFUyIsIkRZTkFNSUMiLCJTVEFUSUMiLCJLSU5FTUFUSUMiLCJCT0RZX1NMRUVQX1NUQVRFUyIsIkFXQUtFIiwiU0xFRVBZIiwiU0xFRVBJTkciLCJCb2R5Iiwid29ybGQiLCJwcmVTdGVwIiwicG9zdFN0ZXAiLCJ2bGFtYmRhIiwicHJldmlvdXNQb3NpdGlvbiIsImludGVycG9sYXRlZFBvc2l0aW9uIiwiaW5pdFBvc2l0aW9uIiwidmVsb2NpdHkiLCJpbml0VmVsb2NpdHkiLCJmb3JjZSIsImludk1hc3MiLCJsaW5lYXJEYW1waW5nIiwiYWxsb3dTbGVlcCIsInNsZWVwU3RhdGUiLCJzbGVlcFNwZWVkTGltaXQiLCJzbGVlcFRpbWVMaW1pdCIsInRpbWVMYXN0U2xlZXB5Iiwid2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSIsInRvcnF1ZSIsImluaXRRdWF0ZXJuaW9uIiwicHJldmlvdXNRdWF0ZXJuaW9uIiwiaW50ZXJwb2xhdGVkUXVhdGVybmlvbiIsImluaXRBbmd1bGFyVmVsb2NpdHkiLCJzaGFwZXMiLCJzaGFwZU9mZnNldHMiLCJzaGFwZU9yaWVudGF0aW9ucyIsImluZXJ0aWEiLCJpbnZJbmVydGlhIiwiaW52SW5lcnRpYVdvcmxkIiwiaW52TWFzc1NvbHZlIiwiaW52SW5lcnRpYVNvbHZlIiwiaW52SW5lcnRpYVdvcmxkU29sdmUiLCJmaXhlZFJvdGF0aW9uIiwiYW5ndWxhckRhbXBpbmciLCJsaW5lYXJGYWN0b3IiLCJhYWJiTmVlZHNVcGRhdGUiLCJib3VuZGluZ1JhZGl1cyIsIndsYW1iZGEiLCJpc1RyaWdnZXIiLCJCb29sZWFuIiwiYWRkU2hhcGUiLCJ1cGRhdGVNYXNzUHJvcGVydGllcyIsIndha2VVcCIsInByZXZTdGF0ZSIsIndha2V1cEV2ZW50Iiwic2xlZXAiLCJzbGVlcFRpY2siLCJ0aW1lIiwic3BlZWRTcXVhcmVkIiwic3BlZWRMaW1pdFNxdWFyZWQiLCJzbGVlcHlFdmVudCIsInNsZWVwRXZlbnQiLCJ1cGRhdGVTb2x2ZU1hc3NQcm9wZXJ0aWVzIiwiX29mZnNldCIsIl9vcmllbnRhdGlvbiIsIm9yaWVudGF0aW9uIiwidXBkYXRlQm91bmRpbmdSYWRpdXMiLCJyZW1vdmVTaGFwZSIsInJhZGl1cyIsInVwZGF0ZUFBQkIiLCJ0bXBWZWMiLCJ0bXBRdWF0IiwiYm9keVF1YXQiLCJzaGFwZUFBQkIiLCJ1cGRhdGVBQUJCX3NoYXBlQUFCQiIsInVwZGF0ZUluZXJ0aWFXb3JsZCIsIkkiLCJtMSIsInVpd19tMSIsIm0yIiwidWl3X20yIiwiYXBwbHlGb3JjZSIsInJlbGF0aXZlUG9pbnQiLCJyb3RGb3JjZSIsIkJvZHlfYXBwbHlGb3JjZV9yb3RGb3JjZSIsImFwcGx5TG9jYWxGb3JjZSIsImxvY2FsRm9yY2UiLCJ3b3JsZEZvcmNlIiwiQm9keV9hcHBseUxvY2FsRm9yY2Vfd29ybGRGb3JjZSIsInJlbGF0aXZlUG9pbnRXb3JsZCIsIkJvZHlfYXBwbHlMb2NhbEZvcmNlX3JlbGF0aXZlUG9pbnRXb3JsZCIsImFwcGx5VG9ycXVlIiwiYXBwbHlJbXB1bHNlIiwiaW1wdWxzZSIsInZlbG8iLCJCb2R5X2FwcGx5SW1wdWxzZV92ZWxvIiwicm90VmVsbyIsIkJvZHlfYXBwbHlJbXB1bHNlX3JvdFZlbG8iLCJhcHBseUxvY2FsSW1wdWxzZSIsImxvY2FsSW1wdWxzZSIsIndvcmxkSW1wdWxzZSIsIkJvZHlfYXBwbHlMb2NhbEltcHVsc2Vfd29ybGRJbXB1bHNlIiwiQm9keV9hcHBseUxvY2FsSW1wdWxzZV9yZWxhdGl2ZVBvaW50IiwiQm9keV91cGRhdGVNYXNzUHJvcGVydGllc19oYWxmRXh0ZW50cyIsImZpeGVkIiwiZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQiLCJxdWF0Tm9ybWFsaXplIiwicXVhdE5vcm1hbGl6ZUZhc3QiLCJhbmd1bGFyVmVsbyIsImlNZHQiLCJ0eCIsInR5IiwidHoiLCJDT0xMSURFX0VWRU5UX05BTUUiLCJCcm9hZHBoYXNlIiwidXNlQm91bmRpbmdCb3hlcyIsImRpcnR5IiwiY29sbGlzaW9uUGFpcnMiLCJwMSIsInAyIiwibmVlZEJyb2FkcGhhc2VDb2xsaXNpb24iLCJib2R5QSIsImJvZHlCIiwiaW50ZXJzZWN0aW9uVGVzdCIsInBhaXJzMSIsInBhaXJzMiIsImRvQm91bmRpbmdCb3hCcm9hZHBoYXNlIiwiZG9Cb3VuZGluZ1NwaGVyZUJyb2FkcGhhc2UiLCJCcm9hZHBoYXNlX2NvbGxpc2lvblBhaXJzX3IiLCJib3VuZGluZ1JhZGl1c1N1bTIiLCJtYWtlUGFpcnNVbmlxdWUiLCJCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV90ZW1wIiwiQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfcDEiLCJCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV9wMiIsImlkMSIsImlkMiIsImtleSIsImtleXMiLCJwb3AiLCJwYWlySW5kZXgiLCJzZXRXb3JsZCIsImJvdW5kaW5nU3BoZXJlQ2hlY2siLCJzYSIsInNiIiwicG93IiwiYWFiYlF1ZXJ5IiwiTmFpdmVCcm9hZHBoYXNlIiwiYm9kaWVzIiwiUmF5Y2FzdFJlc3VsdCIsInJheUZyb21Xb3JsZCIsInJheVRvV29ybGQiLCJoaXROb3JtYWxXb3JsZCIsImhpdFBvaW50V29ybGQiLCJoYXNIaXQiLCJoaXRGYWNlSW5kZXgiLCJkaXN0YW5jZSIsInNob3VsZFN0b3AiLCJhYm9ydCIsIl9TaGFwZSR0eXBlcyRTUEhFUkUiLCJfU2hhcGUkdHlwZXMkUExBTkUiLCJfU2hhcGUkdHlwZXMkQk9YIiwiX1NoYXBlJHR5cGVzJENZTElOREVSIiwiX1NoYXBlJHR5cGVzJENPTlZFWFBPIiwiX1NoYXBlJHR5cGVzJEhFSUdIVEZJIiwiX1NoYXBlJHR5cGVzJFRSSU1FU0giLCJSQVlfTU9ERVMiLCJDTE9TRVNUIiwiQU5ZIiwiQUxMIiwiUmF5IiwiX2ludGVyc2VjdFNwaGVyZSIsIl9pbnRlcnNlY3RQbGFuZSIsIl9pbnRlcnNlY3RCb3giLCJfaW50ZXJzZWN0Q29udmV4IiwiX2ludGVyc2VjdEhlaWdodGZpZWxkIiwiX2ludGVyc2VjdFRyaW1lc2giLCJ0byIsImNoZWNrQ29sbGlzaW9uUmVzcG9uc2UiLCJza2lwQmFja2ZhY2VzIiwibW9kZSIsImludGVyc2VjdFdvcmxkIiwidXBkYXRlRGlyZWN0aW9uIiwiZ2V0QUFCQiIsInRtcEFBQkIkMSIsInRtcEFycmF5IiwiYnJvYWRwaGFzZSIsImludGVyc2VjdEJvZGllcyIsImludGVyc2VjdEJvZHkiLCJ4aSIsImludGVyc2VjdEJvZHlfeGkiLCJxaSIsImludGVyc2VjdEJvZHlfcWkiLCJpbnRlcnNlY3RTaGFwZSIsImRpc3RhbmNlRnJvbUludGVyc2VjdGlvbiIsImludGVyc2VjdE1ldGhvZCIsImJveCIsInJlcG9ydGVkU2hhcGUiLCJ3b3JsZE5vcm1hbCIsImxlbiIsInBsYW5lVG9Gcm9tIiwicGxhbmVUb1RvIiwibl9kb3RfZGlyIiwicGxhbmVQb2ludFRvRnJvbSIsImRpcl9zY2FsZWRfd2l0aF90IiwicmVwb3J0SW50ZXJzZWN0aW9uIiwiZGF0YSIsImVsZW1lbnRTaXplIiwibG9jYWxSYXkiLCJpbnRlcnNlY3RIZWlnaHRmaWVsZF9sb2NhbFJheSIsImludGVyc2VjdEhlaWdodGZpZWxkX2luZGV4IiwiaU1pblgiLCJpTWluWSIsImlNYXhYIiwiaU1heFkiLCJnZXRJbmRleE9mUG9zaXRpb24iLCJnZXRBYWJiQXRJbmRleCIsImdldENvbnZleFRyaWFuZ2xlUGlsbGFyIiwicGlsbGFyT2Zmc2V0Iiwid29ybGRQaWxsYXJPZmZzZXQiLCJwaWxsYXJDb252ZXgiLCJpbnRlcnNlY3RDb252ZXhPcHRpb25zIiwic3BoZXJlIiwiZGVsdGEiLCJpbnRlcnNlY3Rpb25Qb2ludCIsIlJheV9pbnRlcnNlY3RTcGhlcmVfaW50ZXJzZWN0aW9uUG9pbnQiLCJSYXlfaW50ZXJzZWN0U3BoZXJlX25vcm1hbCIsImQyIiwiaW50ZXJzZWN0Q29udmV4X25vcm1hbCIsImludGVyc2VjdENvbnZleF92ZWN0b3IiLCJmYWNlTGlzdCIsImZyb21Ub0Rpc3RhbmNlIiwiTmZhY2VzIiwiZmFjZU5vcm1hbCIsImludGVyc2VjdFBvaW50IiwicG9pbnRJblRyaWFuZ2xlIiwibWVzaCIsImludGVyc2VjdFRyaW1lc2hfbm9ybWFsIiwidHJpYW5nbGVzIiwiaW50ZXJzZWN0VHJpbWVzaF90cmlhbmdsZXMiLCJ0cmVlVHJhbnNmb3JtIiwiaW50ZXJzZWN0VHJpbWVzaF90cmVlVHJhbnNmb3JtIiwibG9jYWxEaXJlY3Rpb24iLCJpbnRlcnNlY3RUcmltZXNoX2xvY2FsRGlyZWN0aW9uIiwibG9jYWxGcm9tIiwiaW50ZXJzZWN0VHJpbWVzaF9sb2NhbEZyb20iLCJsb2NhbFRvIiwiaW50ZXJzZWN0VHJpbWVzaF9sb2NhbFRvIiwid29ybGRJbnRlcnNlY3RQb2ludCIsImludGVyc2VjdFRyaW1lc2hfd29ybGRJbnRlcnNlY3RQb2ludCIsImludGVyc2VjdFRyaW1lc2hfd29ybGROb3JtYWwiLCJpbmRpY2VzIiwiZnJvbVRvRGlzdGFuY2VTcXVhcmVkIiwidHJlZSIsInJheVF1ZXJ5IiwidHJpYW5nbGVzSW5kZXgiLCJnZXROb3JtYWwiLCJnZXRWZXJ0ZXgiLCJzcXVhcmVkRGlzdGFuY2UiLCJ2MCIsInYxIiwidjIiLCJkb3QwMCIsImRvdDAxIiwiZG90MDIiLCJkb3QxMSIsImRvdDEyIiwiaW50ZXJzZWN0IiwiU0FQQnJvYWRwaGFzZSIsImNoZWNrQm91bmRzIiwiYXhpc0luZGV4IiwiYmlQb3MiLCJialBvcyIsInJpIiwicmoiLCJib3VuZEEyIiwiYm91bmRCMSIsImluc2VydGlvblNvcnRYIiwiaW5zZXJ0aW9uU29ydFkiLCJpbnNlcnRpb25Tb3J0WiIsImF4aXNMaXN0IiwiX2FkZEJvZHlIYW5kbGVyIiwiX3JlbW92ZUJvZHlIYW5kbGVyIiwiaWR4Iiwic29ydExpc3QiLCJhdXRvRGV0ZWN0QXhpcyIsInN1bVgiLCJzdW1YMiIsInN1bVkiLCJzdW1ZMiIsInN1bVoiLCJzdW1aMiIsImNlbnRlclgiLCJjZW50ZXJZIiwiY2VudGVyWiIsInZhcmlhbmNlWCIsInZhcmlhbmNlWSIsInZhcmlhbmNlWiIsIlV0aWxzIiwiZGVmYXVsdHMiLCJDb25zdHJhaW50IiwiZXF1YXRpb25zIiwiY29sbGlkZUNvbm5lY3RlZCIsIndha2VVcEJvZGllcyIsInVwZGF0ZSIsImVuYWJsZSIsImVxcyIsImVuYWJsZWQiLCJkaXNhYmxlIiwiSmFjb2JpYW5FbGVtZW50Iiwic3BhdGlhbCIsInJvdGF0aW9uYWwiLCJtdWx0aXBseUVsZW1lbnQiLCJlbGVtZW50IiwibXVsdGlwbHlWZWN0b3JzIiwiRXF1YXRpb24iLCJtaW5Gb3JjZSIsIm1heEZvcmNlIiwic2kiLCJzaiIsImVwcyIsImphY29iaWFuRWxlbWVudEEiLCJqYWNvYmlhbkVsZW1lbnRCIiwic2V0U3Bvb2tQYXJhbXMiLCJzdGlmZm5lc3MiLCJyZWxheGF0aW9uIiwidGltZVN0ZXAiLCJjb21wdXRlQiIsIkdXIiwiY29tcHV0ZUdXIiwiR3EiLCJjb21wdXRlR3EiLCJHaU1mIiwiY29tcHV0ZUdpTWYiLCJHQSIsIkdCIiwieGoiLCJ2aiIsIndpIiwid2oiLCJjb21wdXRlR1dsYW1iZGEiLCJ0aSIsImZqIiwidGoiLCJpbnZNYXNzaSIsImludk1hc3NqIiwiaU1maSIsImlNZmoiLCJpbnZJaV92bXVsdF90YXVpIiwiaW52SWpfdm11bHRfdGF1aiIsImNvbXB1dGVHaU1HdCIsImludklpIiwiaW52SWoiLCJhZGRUb1dsYW1iZGEiLCJkZWx0YWxhbWJkYSIsImFkZFRvV2xhbWJkYV90ZW1wIiwiY29tcHV0ZUMiLCJDb250YWN0RXF1YXRpb24iLCJyZXN0aXR1dGlvbiIsIm5pIiwicml4biIsIkNvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMSIsInJqeG4iLCJDb250YWN0RXF1YXRpb25fY29tcHV0ZUJfdGVtcDIiLCJwZW5ldHJhdGlvblZlYyIsIkNvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMyIsImVQbHVzT25lIiwiZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbCIsIkNvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3ZpIiwiQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmoiLCJDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94aSIsIkNvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hqIiwicmVsVmVsIiwiQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfcmVsVmVsIiwiUG9pbnRUb1BvaW50Q29uc3RyYWludCIsInBpdm90QSIsInBpdm90QiIsImVxdWF0aW9uWCIsImVxdWF0aW9uWSIsImVxdWF0aW9uWiIsIkNvbmVFcXVhdGlvbiIsImF4aXNBIiwiYXhpc0IiLCJuaiIsIm5peG5qIiwidG1wVmVjMSQyIiwibmp4bmkiLCJ0bXBWZWMyJDIiLCJSb3RhdGlvbmFsRXF1YXRpb24iLCJtYXhBbmdsZSIsInRtcFZlYzEkMSIsInRtcFZlYzIkMSIsIkNvbmVUd2lzdENvbnN0cmFpbnQiLCJ0d2lzdEFuZ2xlIiwiY29uZUVxdWF0aW9uIiwidHdpc3RFcXVhdGlvbiIsImNvbmUiLCJ0d2lzdCIsIkRpc3RhbmNlQ29uc3RyYWludCIsImRpc3RhbmNlRXF1YXRpb24iLCJlcSIsImhhbGZEaXN0IiwiTG9ja0NvbnN0cmFpbnQiLCJoYWxmV2F5IiwieEEiLCJ4QiIsInlBIiwieUIiLCJ6QSIsInpCIiwicm90YXRpb25hbEVxdWF0aW9uMSIsInJvdGF0aW9uYWxFcXVhdGlvbjIiLCJyb3RhdGlvbmFsRXF1YXRpb24zIiwibW90b3JFcXVhdGlvbiIsInIzIiwiUm90YXRpb25hbE1vdG9yRXF1YXRpb24iLCJ0YXJnZXRWZWxvY2l0eSIsIkhpbmdlQ29uc3RyYWludCIsInJvdGF0aW9uYWwxIiwicm90YXRpb25hbDIiLCJtb3RvciIsImVuYWJsZU1vdG9yIiwiZGlzYWJsZU1vdG9yIiwic2V0TW90b3JTcGVlZCIsInNwZWVkIiwic2V0TW90b3JNYXhGb3JjZSIsIndvcmxkQXhpc0EiLCJIaW5nZUNvbnN0cmFpbnRfdXBkYXRlX3RtcFZlYzEiLCJ3b3JsZEF4aXNCIiwiSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMyIiwiRnJpY3Rpb25FcXVhdGlvbiIsInNsaXBGb3JjZSIsInJpeHQiLCJGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxIiwicmp4dCIsIkZyaWN0aW9uRXF1YXRpb25fY29tcHV0ZUJfdGVtcDIiLCJDb250YWN0TWF0ZXJpYWwiLCJtYXRlcmlhbHMiLCJmcmljdGlvbiIsImNvbnRhY3RFcXVhdGlvblN0aWZmbmVzcyIsImNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb24iLCJmcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzIiwiZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24iLCJNYXRlcmlhbCIsIm5hbWUiLCJTcHJpbmciLCJyZXN0TGVuZ3RoIiwiZGFtcGluZyIsImxvY2FsQW5jaG9yQSIsImxvY2FsQW5jaG9yQiIsIndvcmxkQW5jaG9yQSIsInNldFdvcmxkQW5jaG9yQSIsIndvcmxkQW5jaG9yQiIsInNldFdvcmxkQW5jaG9yQiIsImdldFdvcmxkQW5jaG9yQSIsImdldFdvcmxkQW5jaG9yQiIsImFwcGx5Rm9yY2VfciIsInJfdW5pdCIsImFwcGx5Rm9yY2Vfcl91bml0IiwiYXBwbHlGb3JjZV91IiwiYXBwbHlGb3JjZV9mIiwiYXBwbHlGb3JjZV90bXAiLCJhcHBseUZvcmNlX3dvcmxkQW5jaG9yQSIsImFwcGx5Rm9yY2Vfd29ybGRBbmNob3JCIiwiYXBwbHlGb3JjZV9yaSIsImFwcGx5Rm9yY2VfcmoiLCJyaV94X2YiLCJhcHBseUZvcmNlX3JpX3hfZiIsInJqX3hfZiIsImFwcGx5Rm9yY2VfcmpfeF9mIiwicmxlbiIsIldoZWVsSW5mbyIsIm1heFN1c3BlbnNpb25UcmF2ZWwiLCJjdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkIiwidXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCIsInNsaWRpbmciLCJjaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwiLCJjaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQiLCJkaXJlY3Rpb25Mb2NhbCIsImRpcmVjdGlvbldvcmxkIiwiYXhsZUxvY2FsIiwiYXhsZVdvcmxkIiwic3VzcGVuc2lvblJlc3RMZW5ndGgiLCJzdXNwZW5zaW9uTWF4TGVuZ3RoIiwic3VzcGVuc2lvblN0aWZmbmVzcyIsImRhbXBpbmdDb21wcmVzc2lvbiIsImRhbXBpbmdSZWxheGF0aW9uIiwiZnJpY3Rpb25TbGlwIiwiZm9yd2FyZEFjY2VsZXJhdGlvbiIsInNpZGVBY2NlbGVyYXRpb24iLCJzdGVlcmluZyIsInJvdGF0aW9uIiwiZGVsdGFSb3RhdGlvbiIsInJvbGxJbmZsdWVuY2UiLCJtYXhTdXNwZW5zaW9uRm9yY2UiLCJlbmdpbmVGb3JjZSIsImJyYWtlIiwiaXNGcm9udFdoZWVsIiwiY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uIiwic3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkiLCJzdXNwZW5zaW9uRm9yY2UiLCJzbGlwSW5mbyIsInNraWRJbmZvIiwic3VzcGVuc2lvbkxlbmd0aCIsInNpZGVJbXB1bHNlIiwiZm9yd2FyZEltcHVsc2UiLCJyYXljYXN0UmVzdWx0Iiwid29ybGRUcmFuc2Zvcm0iLCJpc0luQ29udGFjdCIsInVwZGF0ZVdoZWVsIiwiY2hhc3NpcyIsInJlbHBvcyIsImNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50IiwicHJvalZlbCIsImludiIsIlJheWNhc3RWZWhpY2xlIiwiY2hhc3Npc0JvZHkiLCJ3aGVlbEluZm9zIiwiaW5kZXhSaWdodEF4aXMiLCJpbmRleEZvcndhcmRBeGlzIiwiaW5kZXhVcEF4aXMiLCJjb25zdHJhaW50cyIsInByZVN0ZXBDYWxsYmFjayIsImN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIiLCJudW1XaGVlbHNPbkdyb3VuZCIsImFkZFdoZWVsIiwiaW5mbyIsInNldFN0ZWVyaW5nVmFsdWUiLCJ3aGVlbEluZGV4Iiwid2hlZWwiLCJhcHBseUVuZ2luZUZvcmNlIiwic2V0QnJha2UiLCJhZGRUb1dvcmxkIiwiYWRkQm9keSIsInRoYXQiLCJ1cGRhdGVWZWhpY2xlIiwiZ2V0VmVoaWNsZUF4aXNXb3JsZCIsIm51bVdoZWVscyIsInVwZGF0ZVdoZWVsVHJhbnNmb3JtIiwiZm9yd2FyZFdvcmxkIiwiY2FzdFJheSIsInVwZGF0ZVN1c3BlbnNpb24iLCJ1cGRhdGVGcmljdGlvbiIsImhpdE5vcm1hbFdvcmxkU2NhbGVkV2l0aFByb2oiLCJmd2QiLCJ2ZWwiLCJtIiwicHJvaiIsInByb2oyIiwiZGVsdGFUaW1lIiwiY2hhc3Npc01hc3MiLCJ3X2l0Iiwic3VzcF9sZW5ndGgiLCJjdXJyZW50X2xlbmd0aCIsImxlbmd0aF9kaWZmIiwicHJvamVjdGVkX3JlbF92ZWwiLCJzdXNwX2RhbXBpbmciLCJyZW1vdmVGcm9tV29ybGQiLCJyZW1vdmVCb2R5IiwicmF5dmVjdG9yIiwiY2FzdFJheV9yYXl2ZWN0b3IiLCJjYXN0UmF5X3RhcmdldCIsInVwZGF0ZVdoZWVsVHJhbnNmb3JtV29ybGQiLCJyYXlsZW4iLCJzb3VyY2UiLCJvbGRTdGF0ZSIsInJheVRlc3QiLCJvYmplY3QiLCJncm91bmRPYmplY3QiLCJoaXREaXN0YW5jZSIsIm1pblN1c3BlbnNpb25MZW5ndGgiLCJtYXhTdXNwZW5zaW9uTGVuZ3RoIiwiZGVub21pbmF0b3IiLCJ1cCIsInRtcFZlYzQiLCJyaWdodCIsInRtcFZlYzUiLCJ0bXBWZWM2Iiwic3RlZXJpbmdPcm4iLCJyb3RhdGluZ09ybiIsImdldFdoZWVsVHJhbnNmb3JtV29ybGQiLCJzdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2oiLCJ1cGRhdGVGcmljdGlvbl9zdXJmTm9ybWFsV1Nfc2NhbGVkX3Byb2oiLCJmb3J3YXJkV1MiLCJ1cGRhdGVGcmljdGlvbl9mb3J3YXJkV1MiLCJheGxlIiwidXBkYXRlRnJpY3Rpb25fYXhsZSIsImF4bGVpIiwid2hlZWxUcmFucyIsImRpcmVjdGlvbnMiLCJzdXJmTm9ybWFsV1MiLCJyZXNvbHZlU2luZ2xlQmlsYXRlcmFsIiwic2lkZUZyaWN0aW9uU3RpZmZuZXNzMiIsInNpZGVGYWN0b3IiLCJmd2RGYWN0b3IiLCJyb2xsaW5nRnJpY3Rpb24iLCJkZWZhdWx0Um9sbGluZ0ZyaWN0aW9uSW1wdWxzZSIsIm1heEltcHVsc2UiLCJjYWxjUm9sbGluZ0ZyaWN0aW9uIiwiZmFjdG9yIiwibWF4aW1wIiwibWF4aW1wU2lkZSIsIm1heGltcFNxdWFyZWQiLCJpbXB1bHNlU3F1YXJlZCIsInJlbF9wb3MiLCJyZWxfcG9zMiIsInNpZGVJbXAiLCJjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDEiLCJjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDIiLCJjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbCIsImJvZHkwIiwiYm9keTEiLCJmcmljdGlvblBvc1dvcmxkIiwiZnJpY3Rpb25EaXJlY3Rpb25Xb3JsZCIsImoxIiwiY29udGFjdFBvc1dvcmxkIiwidmVsMSIsInZlbDIiLCJ2cmVsIiwiZGVub20wIiwiY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvciIsImRlbm9tMSIsImphY0RpYWdBQkludiIsImNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfcjAiLCJjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX2MwIiwiY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl92ZWMiLCJjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yX20iLCJyMCIsImMwIiwidmVjIiwicmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwxIiwicmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwyIiwicmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwiLCJwb3MxIiwiYm9keTIiLCJwb3MyIiwibm9ybWFsTGVuU3FyIiwicmVsX3ZlbCIsImNvbnRhY3REYW1waW5nIiwibWFzc1Rlcm0iLCJTcGhlcmUiLCJDeWxpbmRlciIsInJhZGl1c1RvcCIsInJhZGl1c0JvdHRvbSIsImhlaWdodCIsIm51bVNlZ21lbnRzIiwiYm90dG9tZmFjZSIsInRvcGZhY2UiLCJ0aGV0YSIsInRoZXRhTiIsIlBhcnRpY2xlIiwiUGxhbmUiLCJ3b3JsZE5vcm1hbE5lZWRzVXBkYXRlIiwiY29tcHV0ZVdvcmxkTm9ybWFsIiwidGVtcE5vcm1hbCIsIm1heFZhbCIsIkhlaWdodGZpZWxkIiwibWF4VmFsdWUiLCJtaW5WYWx1ZSIsImNhY2hlRW5hYmxlZCIsIl9jYWNoZWRQaWxsYXJzIiwidXBkYXRlTWluVmFsdWUiLCJ1cGRhdGVNYXhWYWx1ZSIsInNldEhlaWdodFZhbHVlQXRJbmRleCIsInlpIiwiY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhciIsImdldFJlY3RNaW5NYXgiLCJjbGFtcCIsImZsb29yIiwiZ2V0VHJpYW5nbGVBdCIsImVkZ2VDbGFtcCIsImdldEhlaWdodEF0X2lkeCIsImxvd2VyRGlzdDIiLCJ1cHBlckRpc3QyIiwidXBwZXIiLCJnZXRUcmlhbmdsZSIsImdldE5vcm1hbEF0IiwiZ2V0Tm9ybWFsQXRfYSIsImdldE5vcm1hbEF0X2IiLCJnZXROb3JtYWxBdF9jIiwiZ2V0Tm9ybWFsQXRfZTAiLCJnZXROb3JtYWxBdF9lMSIsImdldEhlaWdodEF0IiwiZ2V0SGVpZ2h0QXRfYSIsImdldEhlaWdodEF0X2IiLCJnZXRIZWlnaHRBdF9jIiwiYmFyeWNlbnRyaWNXZWlnaHRzIiwiZ2V0SGVpZ2h0QXRfd2VpZ2h0cyIsImdldENhY2hlQ29udmV4VHJpYW5nbGVQaWxsYXJLZXkiLCJnZXRVcHBlclRyaWFuZ2xlIiwiZ2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIiLCJzZXRDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhciIsImNvbnZleCIsIm9mZnNldFJlc3VsdCIsInNldEhlaWdodHNGcm9tSW1hZ2UiLCJpbWFnZSIsImNhbnZhcyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsIndpZHRoIiwiY29udGV4dCIsImdldENvbnRleHQiLCJkcmF3SW1hZ2UiLCJpbWFnZURhdGEiLCJnZXRJbWFnZURhdGEiLCJ1bnNoaWZ0IiwiY3giLCJjeSIsIk9jdHJlZU5vZGUiLCJyb290IiwiY2hpbGRyZW4iLCJpbnNlcnQiLCJlbGVtZW50RGF0YSIsImxldmVsIiwibm9kZURhdGEiLCJtYXhEZXB0aCIsInN1YmRpdmlkZWQiLCJzdWJkaXZpZGUiLCJoYWxmRGlhZ29uYWwiLCJjaGlsZCIsInF1ZXVlIiwibm9kZSIsIkFycmF5IiwicHJvdG90eXBlIiwiYXBwbHkiLCJ0bXBBQUJCIiwicmVtb3ZlRW1wdHlOb2RlcyIsIk9jdHJlZSIsIlRyaW1lc2giLCJGbG9hdDMyQXJyYXkiLCJJbnQxNkFycmF5IiwidXBkYXRlRWRnZXMiLCJ1cGRhdGVOb3JtYWxzIiwidXBkYXRlVHJlZSIsInRyaWFuZ2xlQUFCQiIsImkzIiwiX2dldFVuc2NhbGVkVmVydGV4IiwiZ2V0VHJpYW5nbGVzSW5BQUJCIiwidW5zY2FsZWRBQUJCIiwiaXN4IiwiaXN5IiwiaXN6Iiwic2V0U2NhbGUiLCJ3YXNVbmlmb3JtIiwiaXNVbmlmb3JtIiwiY29tcHV0ZU5vcm1hbHNfbiIsIk9iamVjdCIsInNwbGl0IiwicGFyc2VJbnQiLCJnZXRFZGdlVmVydGV4IiwiZWRnZUluZGV4IiwiZmlyc3RPclNlY29uZCIsInZlcnRleFN0b3JlIiwidmVydGV4SW5kZXgiLCJnZXRFZGdlVmVjdG9yIiwidmVjdG9yU3RvcmUiLCJnZXRFZGdlVmVjdG9yX3ZhIiwiZ2V0RWRnZVZlY3Rvcl92YiIsIm91dCIsImdldFdvcmxkVmVydGV4IiwiZ2V0VHJpYW5nbGVWZXJ0aWNlcyIsImNsaV9hYWJiIiwiY29tcHV0ZUxvY2FsQUFCQl93b3JsZFZlcnQiLCJjYWxjdWxhdGVXb3JsZEFBQkJfZnJhbWUiLCJjYWxjdWxhdGVXb3JsZEFBQkJfYWFiYiIsImNyZWF0ZVRvcnVzIiwidHViZSIsInJhZGlhbFNlZ21lbnRzIiwidHVidWxhclNlZ21lbnRzIiwiYXJjIiwiU29sdmVyIiwiYWRkRXF1YXRpb24iLCJyZW1vdmVFcXVhdGlvbiIsInJlbW92ZUFsbEVxdWF0aW9ucyIsIkdTU29sdmVyIiwiaXRlcmF0aW9ucyIsInRvbGVyYW5jZSIsIml0ZXIiLCJtYXhJdGVyIiwidG9sU3F1YXJlZCIsIk5lcSIsIk5ib2RpZXMiLCJpbnZDIiwiZGVsdGFsYW1iZGFUb3QiLCJHV2xhbWJkYSIsImxhbWJkYWoiLCJpbnZDcyIsIkdTU29sdmVyX3NvbHZlX2ludkNzIiwiQnMiLCJHU1NvbHZlcl9zb2x2ZV9CcyIsImxhbWJkYSIsIkdTU29sdmVyX3NvbHZlX2xhbWJkYSIsImludkR0IiwiU3BsaXRTb2x2ZXIiLCJzdWJzb2x2ZXIiLCJub2RlcyIsIm5vZGVQb29sIiwiY3JlYXRlTm9kZSIsInZpc2l0ZWQiLCJTcGxpdFNvbHZlcl9zb2x2ZV9ub2RlcyIsIlNwbGl0U29sdmVyX3NvbHZlX2VxcyIsImR1bW15V29ybGQiLCJTcGxpdFNvbHZlcl9zb2x2ZV9kdW1teVdvcmxkIiwiZ2V0VW52aXNpdGVkTm9kZSIsImJmcyIsInZpc2l0RnVuYyIsIk5lcXMiLCJzb3J0Iiwic29ydEJ5SWQiLCJObm9kZXMiLCJiZHMiLCJQb29sIiwib2JqZWN0cyIsInJlbGVhc2UiLCJOYXJncyIsImNvbnN0cnVjdE9iamVjdCIsInJlc2l6ZSIsInNpemUiLCJWZWMzUG9vbCIsIl9DT0xMSVNJT05fVFlQRVMkc3BoZSIsIl9DT0xMSVNJT05fVFlQRVMkc3BoZTIiLCJfQ09MTElTSU9OX1RZUEVTJGJveEIiLCJfQ09MTElTSU9OX1RZUEVTJHNwaGUzIiwiX0NPTExJU0lPTl9UWVBFUyRwbGFuIiwiX0NPTExJU0lPTl9UWVBFUyRjb252IiwiX0NPTExJU0lPTl9UWVBFUyRzcGhlNCIsIl9DT0xMSVNJT05fVFlQRVMkcGxhbjIiLCJfQ09MTElTSU9OX1RZUEVTJGJveEMiLCJfQ09MTElTSU9OX1RZUEVTJHNwaGU1IiwiX0NPTExJU0lPTl9UWVBFUyRib3hIIiwiX0NPTExJU0lPTl9UWVBFUyRjb252MiIsIl9DT0xMSVNJT05fVFlQRVMkc3BoZTYiLCJfQ09MTElTSU9OX1RZUEVTJHBsYW4zIiwiX0NPTExJU0lPTl9UWVBFUyRib3hQIiwiX0NPTExJU0lPTl9UWVBFUyRjb252MyIsIl9DT0xMSVNJT05fVFlQRVMkY3lsaSIsIl9DT0xMSVNJT05fVFlQRVMkc3BoZTciLCJfQ09MTElTSU9OX1RZUEVTJHBsYW40IiwiX0NPTExJU0lPTl9UWVBFUyRib3hDMiIsIl9DT0xMSVNJT05fVFlQRVMkY29udjQiLCJfQ09MTElTSU9OX1RZUEVTJGhlaWciLCJfQ09MTElTSU9OX1RZUEVTJHBhcnQiLCJfQ09MTElTSU9OX1RZUEVTJHNwaGU4IiwiX0NPTExJU0lPTl9UWVBFUyRwbGFuNSIsIkNPTExJU0lPTl9UWVBFUyIsInNwaGVyZVNwaGVyZSIsInNwaGVyZVBsYW5lIiwiYm94Qm94Iiwic3BoZXJlQm94IiwicGxhbmVCb3giLCJjb252ZXhDb252ZXgiLCJzcGhlcmVDb252ZXgiLCJwbGFuZUNvbnZleCIsImJveENvbnZleCIsInNwaGVyZUhlaWdodGZpZWxkIiwiYm94SGVpZ2h0ZmllbGQiLCJjb252ZXhIZWlnaHRmaWVsZCIsInNwaGVyZVBhcnRpY2xlIiwicGxhbmVQYXJ0aWNsZSIsImJveFBhcnRpY2xlIiwiY29udmV4UGFydGljbGUiLCJjeWxpbmRlckN5bGluZGVyIiwic3BoZXJlQ3lsaW5kZXIiLCJwbGFuZUN5bGluZGVyIiwiYm94Q3lsaW5kZXIiLCJjb252ZXhDeWxpbmRlciIsImhlaWdodGZpZWxkQ3lsaW5kZXIiLCJwYXJ0aWNsZUN5bGluZGVyIiwic3BoZXJlVHJpbWVzaCIsInBsYW5lVHJpbWVzaCIsIk5hcnJvd3BoYXNlIiwiY29udGFjdFBvaW50UG9vbCIsImZyaWN0aW9uRXF1YXRpb25Qb29sIiwiZnJpY3Rpb25SZXN1bHQiLCJ2M3Bvb2wiLCJjdXJyZW50Q29udGFjdE1hdGVyaWFsIiwiZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24iLCJkZWZhdWx0Q29udGFjdE1hdGVyaWFsIiwiY3JlYXRlQ29udGFjdEVxdWF0aW9uIiwib3ZlcnJpZGVTaGFwZUEiLCJvdmVycmlkZVNoYXBlQiIsImNtIiwibWF0QSIsIm1hdEIiLCJjcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0IiwiY29udGFjdEVxdWF0aW9uIiwib3V0QXJyYXkiLCJzaGFwZUEiLCJzaGFwZUIiLCJtdWciLCJncmF2aXR5IiwicmVkdWNlZE1hc3MiLCJwb29sIiwiY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZSIsIm51bUNvbnRhY3RzIiwiZjEiLCJmMiIsImF2ZXJhZ2VOb3JtYWwiLCJhdmVyYWdlQ29udGFjdFBvaW50QSIsImF2ZXJhZ2VDb250YWN0UG9pbnRCIiwiaW52TnVtQ29udGFjdHMiLCJnZXRDb250YWN0cyIsIm9sZGNvbnRhY3RzIiwiZnJpY3Rpb25Qb29sIiwidG1wUXVhdDEiLCJxaiIsInRtcFF1YXQyIiwidG1wVmVjMSIsInRtcFZlYzIiLCJib2R5Q29udGFjdE1hdGVyaWFsIiwiZ2V0Q29udGFjdE1hdGVyaWFsIiwianVzdFRlc3QiLCJzaGFwZUNvbnRhY3RNYXRlcmlhbCIsInJlc29sdmVySW5kZXgiLCJyZXNvbHZlciIsInJldHZhbCIsInNoYXBlT3ZlcmxhcEtlZXBlciIsImJvZHlPdmVybGFwS2VlcGVyIiwicnNpIiwicnNqIiwiY29udGFjdEVxIiwicG9pbnRfb25fcGxhbmVfdG9fc3BoZXJlIiwicGxhbmVfdG9fc3BoZXJlX29ydGhvIiwic3BoZXJlQm94X3NpZGVzIiwiYm94X3RvX3NwaGVyZSIsIlIiLCJzaWRlX25zIiwic3BoZXJlQm94X3NpZGVfbnMiLCJzaWRlX25zMSIsInNwaGVyZUJveF9zaWRlX25zMSIsInNpZGVfbnMyIiwic3BoZXJlQm94X3NpZGVfbnMyIiwic2lkZV9oIiwic2lkZV9wZW5ldHJhdGlvbnMiLCJzaWRlX2RvdDEiLCJzaWRlX2RvdDIiLCJzaWRlX2Rpc3RhbmNlIiwibnNpZGVzIiwibnMiLCJzcGhlcmVCb3hfbnMiLCJuczEiLCJzcGhlcmVCb3hfbnMxIiwibnMyIiwic3BoZXJlQm94X25zMiIsImgxIiwiaDIiLCJkb3QxIiwiZG90MiIsInNwaGVyZV90b19jb3JuZXIiLCJzcGhlcmVCb3hfc3BoZXJlX3RvX2Nvcm5lciIsImVkZ2VUYW5nZW50IiwiZWRnZUNlbnRlciIsIm9ydGhvZ29uYWwiLCJOc2lkZXMiLCJvcnRob25vcm0iLCJ0ZGlzdCIsIm5kaXN0IiwicmVzIiwic2VwQXhpcyIsImNvbnZleENvbnZleF9zZXBBeGlzIiwiY29udmV4Q29udmV4X3EiLCJjb252ZXhfdG9fc3BoZXJlIiwid29ybGRDb3JuZXIiLCJzcGhlcmVDb252ZXhfd29ybGRDb3JuZXIiLCJzcGhlcmVDb252ZXhfc3BoZXJlVG9Db3JuZXIiLCJuZmFjZXMiLCJzcGhlcmVDb252ZXhfd29ybGROb3JtYWwiLCJzcGhlcmVDb252ZXhfd29ybGRQb2ludCIsIndvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSIsInNwaGVyZUNvbnZleF93b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUiLCJzcGhlcmVDb252ZXhfcGVuZXRyYXRpb25WZWMiLCJwZW5ldHJhdGlvbiIsIndvcmxkUG9pbnRUb1NwaGVyZSIsInNwaGVyZUNvbnZleF9zcGhlcmVUb1dvcmxkUG9pbnQiLCJmYWNlVmVydHMiLCJOdmVydHMiLCJ3b3JsZFZlcnRleCIsInBvaW50SW5Qb2x5Z29uIiwicGVuZXRyYXRpb25WZWMyIiwicGVuZXRyYXRpb25TcGhlcmVQb2ludCIsIk5mYWNldmVydHMiLCJzcGhlcmVDb252ZXhfZWRnZSIsImVkZ2VVbml0Iiwic3BoZXJlQ29udmV4X2VkZ2VVbml0IiwidjFfdG9feGkiLCJ4aV90b19wIiwicGxhbmVTaGFwZSIsImNvbnZleFNoYXBlIiwicGxhbmVQb3NpdGlvbiIsImNvbnZleFBvc2l0aW9uIiwicGxhbmVRdWF0IiwiY29udmV4UXVhdCIsInBsYW5lQm9keSIsImNvbnZleEJvZHkiLCJwbGFuZUNvbnZleF92IiwicGxhbmVDb252ZXhfbm9ybWFsIiwicGxhbmVDb252ZXhfcmVscG9zIiwicHJvamVjdGVkIiwicGxhbmVDb252ZXhfcHJvamVjdGVkIiwic3BoZXJlU2hhcGUiLCJoZlNoYXBlIiwic3BoZXJlUG9zIiwiaGZQb3MiLCJzcGhlcmVRdWF0IiwiaGZRdWF0Iiwic3BoZXJlQm9keSIsImhmQm9keSIsInNwaGVyZUhlaWdodGZpZWxkX3RtcDIiLCJsb2NhbFNwaGVyZVBvcyIsInNwaGVyZUhlaWdodGZpZWxkX3RtcDEiLCJjZWlsIiwibWluTWF4IiwibnVtQ29udGFjdHNCZWZvcmUiLCJpbnRlcnNlY3RpbmciLCJjb252ZXhQb3MiLCJjb252ZXhIZWlnaHRmaWVsZF90bXAyIiwiY29udmV4SGVpZ2h0ZmllbGRfZmFjZUxpc3QiLCJsb2NhbENvbnZleFBvcyIsImNvbnZleEhlaWdodGZpZWxkX3RtcDEiLCJwYXJ0aWNsZVNwaGVyZV9ub3JtYWwiLCJwYXJ0aWNsZVBsYW5lX25vcm1hbCIsInBhcnRpY2xlUGxhbmVfcmVscG9zIiwicGFydGljbGVQbGFuZV9wcm9qZWN0ZWQiLCJwZW5ldHJhdGVkRmFjZUluZGV4IiwicGVuZXRyYXRlZEZhY2VOb3JtYWwiLCJjb252ZXhQYXJ0aWNsZV9wZW5ldHJhdGVkRmFjZU5vcm1hbCIsIndvcmxkUGVuZXRyYXRpb25WZWMiLCJjb252ZXhQYXJ0aWNsZV93b3JsZFBlbmV0cmF0aW9uVmVjIiwibWluUGVuZXRyYXRpb24iLCJsb2NhbCIsImNvbnZleFBhcnRpY2xlX2xvY2FsIiwiY3FqIiwiY29udmV4UGFydGljbGVfdmVydGV4VG9QYXJ0aWNsZSIsInRyaW1lc2hTaGFwZSIsInRyaW1lc2hQb3MiLCJ0cmltZXNoUXVhdCIsInRyaW1lc2hCb2R5IiwiZWRnZVZlcnRleEEiLCJzcGhlcmVUcmltZXNoX2VkZ2VWZXJ0ZXhBIiwiZWRnZVZlcnRleEIiLCJzcGhlcmVUcmltZXNoX2VkZ2VWZXJ0ZXhCIiwiZWRnZVZlY3RvciIsInNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvciIsImVkZ2VWZWN0b3JVbml0Iiwic3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yVW5pdCIsInNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVQb3MiLCJzcGhlcmVUcmltZXNoX3RtcCIsImxvY2FsU3BoZXJlQUFCQiIsInNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCIiwic3BoZXJlVHJpbWVzaF92MiIsInNwaGVyZVRyaW1lc2hfcmVscG9zIiwic3BoZXJlVHJpbWVzaF90cmlhbmdsZXMiLCJzcGhlcmVSYWRpdXMiLCJzcGhlcmVUcmltZXNoX3YiLCJyYWRpdXNTcXVhcmVkIiwicG9zaXRpb25BbG9uZ0VkZ2VCIiwicG9zaXRpb25BbG9uZ0VkZ2VBIiwic3BoZXJlVHJpbWVzaF92YSIsInNwaGVyZVRyaW1lc2hfdmIiLCJzcGhlcmVUcmltZXNoX3ZjIiwic3BoZXJlVHJpbWVzaF9ub3JtYWwiLCJwbGFuZVBvcyIsInBsYW5lVHJpbWVzaF9ub3JtYWwiLCJwbGFuZVRyaW1lc2hfcmVscG9zIiwicGxhbmVUcmltZXNoX3Byb2plY3RlZCIsInBvaW50SW5Qb2x5Z29uX2VkZ2UiLCJwb2ludEluUG9seWdvbl9lZGdlX3hfbm9ybWFsIiwicG9pbnRJblBvbHlnb25fdnRwIiwicG9zaXRpdmVSZXN1bHQiLCJlZGdlX3hfbm9ybWFsIiwidmVydGV4X3RvX3AiLCJPdmVybGFwS2VlcGVyIiwiY3VycmVudCIsInByZXZpb3VzIiwiZ2V0S2V5IiwidGljayIsImdldERpZmYiLCJhZGRpdGlvbnMiLCJyZW1vdmFscyIsImFsIiwiYmwiLCJrZXlBIiwidW5wYWNrQW5kUHVzaCIsImtleUIiLCJhcnJheSIsIlR1cGxlRGljdGlvbmFyeSIsIldvcmxkIiwiY29udGFjdHMiLCJmcmljdGlvbkVxdWF0aW9ucyIsInF1YXROb3JtYWxpemVTa2lwIiwic3RlcG51bWJlciIsImRlZmF1bHRfZHQiLCJuZXh0SWQiLCJoYXNBY3RpdmVCb2RpZXMiLCJzb2x2ZXIiLCJuYXJyb3dwaGFzZSIsImNvbGxpc2lvbk1hdHJpeCIsImNvbGxpc2lvbk1hdHJpeFByZXZpb3VzIiwiY29udGFjdG1hdGVyaWFscyIsImNvbnRhY3RNYXRlcmlhbFRhYmxlIiwiZGVmYXVsdE1hdGVyaWFsIiwiZG9Qcm9maWxpbmciLCJwcm9maWxlIiwiYWNjdW11bGF0b3IiLCJzdWJzeXN0ZW1zIiwiYWRkQm9keUV2ZW50IiwicmVtb3ZlQm9keUV2ZW50IiwiaWRUb0JvZHlNYXAiLCJtYWtlQ29udGFjdENvbnN0cmFpbnRzIiwibnVtT2JqZWN0cyIsImNvbGxpc2lvbk1hdHJpeFRpY2siLCJhZGRDb25zdHJhaW50IiwicmVtb3ZlQ29uc3RyYWludCIsInJheWNhc3RDbG9zZXN0IiwicmF5Y2FzdEFsbCIsInRtcFJheSIsInJheWNhc3RBbnkiLCJnZXRCb2R5QnlJZCIsImdldFNoYXBlQnlJZCIsImFkZE1hdGVyaWFsIiwiYWRkQ29udGFjdE1hdGVyaWFsIiwiY21hdCIsInN0ZXAiLCJ0aW1lU2luY2VMYXN0Q2FsbGVkIiwibWF4U3ViU3RlcHMiLCJpbnRlcm5hbFN0ZXAiLCJ0MCIsInBlcmZvcm1hbmNlIiwibm93Iiwic3Vic3RlcHMiLCJXb3JsZF9zdGVwX3AxIiwiV29ybGRfc3RlcF9wMiIsInByb2ZpbGluZ1N0YXJ0IiwiV29ybGRfc3RlcF9mcmljdGlvbkVxdWF0aW9uUG9vbCIsImd4IiwiZ3kiLCJneiIsIk5zdWJzeXN0ZW1zIiwiTmNvbnN0cmFpbnRzIiwiV29ybGRfc3RlcF9vbGRDb250YWN0cyIsIk5vbGRDb250YWN0cyIsIk5vbGRGcmljdGlvbkVxdWF0aW9ucyIsIm5jb250YWN0cyIsInNwZWVkU3F1YXJlZEIiLCJzcGVlZExpbWl0U3F1YXJlZEIiLCJzcGVlZFNxdWFyZWRBIiwic3BlZWRMaW1pdFNxdWFyZWRBIiwiV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQiLCJjb250YWN0IiwiZW1pdENvbnRhY3RFdmVudHMiLCJsZCIsImF2IiwiYWQiLCJXb3JsZF9zdGVwX3ByZVN0ZXBFdmVudCIsImNsZWFyRm9yY2VzIiwiV29ybGRfc3RlcF9wb3N0U3RlcEV2ZW50IiwiaGFzQmVnaW5Db250YWN0IiwiaGFzRW5kQ29udGFjdCIsImJlZ2luQ29udGFjdEV2ZW50IiwiZW5kQ29udGFjdEV2ZW50IiwiaGFzQmVnaW5TaGFwZUNvbnRhY3QiLCJoYXNFbmRTaGFwZUNvbnRhY3QiLCJiZWdpblNoYXBlQ29udGFjdEV2ZW50IiwiZW5kU2hhcGVDb250YWN0RXZlbnQiLCJnbG9iYWxUaGlzIiwibm93T2Zmc2V0IiwiRGF0ZSIsInRpbWluZyIsIm5hdmlnYXRpb25TdGFydCIsIm1ha2VWZWMzIiwicHJlcGFyZVNwaGVyZSIsImFyZ3MiLCJpc0FycmF5IiwicHJlcGFyZUNvbnZleFBvbHloZWRyb24iLCJtYXAiLCJjcmVhdGVTaGFwZSIsInByb3BzVG9Cb2R5IiwidXVpZCIsImJvZHlUeXBlIiwib25Db2xsaWRlIiwiZXh0cmEiLCJ0b1VwcGVyQ2FzZSIsImZvckVhY2giLCJzaGFwZUJvZHkiLCJhc3NpZ24iLCJzdGF0ZSIsInZlaGljbGVzIiwic3ByaW5ncyIsInNwcmluZ0luc3RhbmNlcyIsInJheXMiLCJjb25maWciLCJzdWJzY3JpcHRpb25zIiwiYm9kaWVzTmVlZFN5bmNpbmciLCJsYXN0Q2FsbFRpbWUiLCJzeW5jQm9kaWVzIiwicmVkdWNlIiwiYWNjIiwiZW1pdEJlZ2luQ29udGFjdCIsInNlbGYiLCJwb3N0TWVzc2FnZSIsIm9wIiwiZW1pdEVuZENvbnRhY3QiLCJvbm1lc3NhZ2UiLCJwb3NpdGlvbnMiLCJxdWF0ZXJuaW9ucyIsImJyb2FkcGhhc2VzIiwidGltZVNpbmNlTGFzdENhbGwiLCJudW1iZXJPZkJvZGllcyIsIm9ic2VydmF0aW9ucyIsIm1lc3NhZ2UiLCJhY3RpdmUiLCJidWZmZXIiLCJjb250YWN0UG9pbnQiLCJjb250YWN0Tm9ybWFsIiwiaW1wYWN0VmVsb2NpdHkiLCJjb2xsaXNpb25GaWx0ZXJzIiwiYm9keUZpbHRlckdyb3VwIiwiYm9keUZpbHRlck1hc2siLCJ0YXJnZXRGaWx0ZXJHcm91cCIsInRhcmdldEZpbHRlck1hc2siLCJvcHRucyIsIm1heE11bHRpcGxpZXIiLCJjb25zdHJhaW50IiwicG9zdFN0ZXBDb25zdHJhaW50IiwiZmlsdGVyIiwidGhpc0lkIiwic3ByaW5nIiwicG9zdFN0ZXBTcHJpbmciLCJyZXN0Iiwid2hlZWxzIiwidmVoaWNsZSIsIndoZWVsSW5mbyIsIndoZWVsQm9keSJdLCJtYXBwaW5ncyI6Ijs7O0VBQUE7RUFDQTtFQUNBO0VBNEVBO0VBQ0E7RUFDQTtFQUNBOzs7RUFDQSxNQUFNQSxJQUFOLENBQVc7RUFDVDtFQUNGO0VBQ0E7O0VBRUU7RUFDRjtFQUNBO0VBQ0VDLEVBQUFBLFdBQVcsQ0FBQ0MsUUFBRCxFQUF5QztFQUFBLFFBQXhDQSxRQUF3QztFQUF4Q0EsTUFBQUEsUUFBd0MsR0FBN0IsQ0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsRUFBVSxDQUFWLEVBQWEsQ0FBYixFQUFnQixDQUFoQixFQUFtQixDQUFuQixFQUFzQixDQUF0QixFQUF5QixDQUF6QixDQUE2QjtFQUFBOztFQUNsRCxTQUFLQSxRQUFMLEdBQWdCLEtBQUssQ0FBckI7RUFDQSxTQUFLQSxRQUFMLEdBQWdCQSxRQUFoQjtFQUNEO0VBQ0Q7RUFDRjtFQUNBO0VBQ0E7RUFDQTs7O0VBR0VDLEVBQUFBLFFBQVEsR0FBRztFQUNULFVBQU1DLENBQUMsR0FBRyxLQUFLRixRQUFmO0VBQ0FFLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBTyxDQUFQO0VBQ0FBLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBTyxDQUFQO0VBQ0FBLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBTyxDQUFQO0VBQ0FBLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBTyxDQUFQO0VBQ0FBLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBTyxDQUFQO0VBQ0FBLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBTyxDQUFQO0VBQ0FBLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBTyxDQUFQO0VBQ0FBLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBTyxDQUFQO0VBQ0FBLElBQUFBLENBQUMsQ0FBQyxDQUFELENBQUQsR0FBTyxDQUFQO0VBQ0Q7RUFDRDtFQUNGO0VBQ0E7OztFQUdFQyxFQUFBQSxPQUFPLEdBQUc7RUFDUixVQUFNRCxDQUFDLEdBQUcsS0FBS0YsUUFBZjtFQUNBRSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNBQSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU8sQ0FBUDtFQUNEO0VBQ0Q7RUFDRjtFQUNBOzs7RUFHRUUsRUFBQUEsUUFBUSxDQUFDQyxNQUFELEVBQVM7RUFDZixVQUFNSCxDQUFDLEdBQUcsS0FBS0YsUUFBZjtFQUNBRSxJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU9HLE1BQU0sQ0FBQ0MsQ0FBZDtFQUNBSixJQUFBQSxDQUFDLENBQUMsQ0FBRCxDQUFELEdBQU9HLE1BQU0sQ0FBQ0UsQ0FBZDtFQUNBTCxJQUFBQSxDQUFD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QjtFQUNBQyxFQUFBQSxNQUFNLEVBQUUsQ0FMZ0I7O0VBT3hCO0VBQ0FDLEVBQUFBLFFBQVEsRUFBRTtFQVJjLENBQTFCO0VBVUE7RUFDQTtFQUNBOztFQUVBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztFQUNBLE1BQU1DLElBQU4sU0FBbUJwUyxXQUFuQixDQUErQjtFQUM3QjtFQUNGO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7O0VBRUU7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7O0VBRUU7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7O0VBRUU7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7O0VBRUU7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7O0VBRUU7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7O0VBRUU7RUFDRjtFQUNBO0VBQ0E7O0VBRUU7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTtFQUNBOztFQUVFO0VBQ0Y7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7O0VBRUU7RUFDRjtFQUNBO0VBQ0E7O0VBRUU7RUFDRjtFQUNBO0VBQ0E7O0VBRUU7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7O0VBRUU7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTs7RUFFRTtFQUNGO0VBQ0E7O0VBRUU7RUFDRjtFQUNBOztFQUVFO0VBQ0Y7RUFDQTs7RUFFRTtF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', false);
/* eslint-enable */

function noop() {
  /**/
}

const v$1 = new Vector3();
const s$1 = new Vector3(1, 1, 1);
const q$2 = new Quaternion$1();
const m = new Matrix4();

function apply(index, buffers, object) {
  if (index !== undefined) {
    m.compose(v$1.fromArray(buffers.positions, index * 3), q$2.fromArray(buffers.quaternions, index * 4), object ? object.scale : s$1);

    if (object) {
      object.matrixAutoUpdate = false;
      object.matrix.copy(m);
    }

    return m;
  }

  return m.identity();
}

function Provider(_ref) {
  let {
    allowSleep = false,
    axisIndex = 0,
    broadphase = 'Naive',
    children,
    defaultContactMaterial = {
      contactEquationStiffness: 1e6
    },
    gravity = [0, -9.81, 0],
    iterations = 5,
    quatNormalizeFast = false,
    quatNormalizeSkip = 0,
    shouldInvalidate = true,
    size = 1000,
    solver = 'GS',
    step = 1 / 60,
    tolerance = 0.001
  } = _ref;
  const {
    invalidate
  } = useThree();
  const [worker] = useState(() => new WorkerFactory());
  const [refs] = useState({});
  const [buffers] = useState(() => ({
    positions: new Float32Array(size * 3),
    quaternions: new Float32Array(size * 4)
  }));
  const [events] = useState({});
  const [subscriptions] = useState({});
  const bodies = useRef({});
  const loop = useCallback(() => {
    if (buffers.positions.byteLength !== 0 && buffers.quaternions.byteLength !== 0) {
      worker.postMessage({
        op: 'step',
        ...buffers
      }, [buffers.positions.buffer, buffers.quaternions.buffer]);
    }
  }, []); // Run loop *after* all the physics objects have ran theirs!
  // Otherwise the buffers will be invalidated by the browser

  useFrame(loop);
  useLayoutEffect(() => {
    worker.postMessage({
      op: 'init',
      props: {
        gravity,
        tolerance,
        step,
        iterations,
        broadphase,
        allowSleep,
        axisIndex,
        defaultContactMaterial,
        quatNormalizeFast,
        quatNormalizeSkip,
        solver
      }
    });
    let i = 0;
    let body;
    let callback;

    worker.onmessage = e => {
      var _events$e$data$target, _events$e$data$bodyA, _events$e$data$bodyB, _events$e$data$bodyA2, _events$e$data$bodyB2, _events$e$data$ray$uu;

      switch (e.data.op) {
        case 'frame':
          buffers.positions = e.data.positions;
          buffers.quaternions = e.data.quaternions;

          if (e.data.bodies) {
            for (i = 0; i < e.data.bodies.length; i++) {
              body = e.data.bodies[i];
              bodies.current[body] = e.data.bodies.indexOf(body);
            }
          }

          e.data.observations.forEach(_ref2 => {
            let [id, value, type] = _ref2;
            const subscription = subscriptions[id] || {};
            callback = subscription[type] || noop; // HELP: We clearly know the type of the callback, but typescript can't deal with it

            callback(value);
          });

          if (e.data.active) {
            for (const ref of Object.values(refs)) {
              if (ref instanceof InstancedMesh) {
                for (let i = 0; i < ref.count; i++) {
                  const index = bodies.current[`${ref.uuid}/${i}`];

                  if (index !== undefined) {
                    ref.setMatrixAt(i, apply(index, buffers));
                  }

                  ref.instanceMatrix.needsUpdate = true;
                }
              } else {
                apply(bodies.current[ref.uuid], buffers, ref);
              }
            }

            if (shouldInvalidate) {
              invalidate();
            }
          }

          break;

        case 'event':
          switch (e.data.type) {
            case 'collide':
              callback = ((_events$e$data$target = events[e.data.target]) == null ? void 0 : _events$e$data$target.collide) || noop;
              callback({ ...e.data,
                target: refs[e.data.target],
                body: refs[e.data.body],
                contact: { ...e.data.contact,
                  bi: refs[e.data.contact.bi],
                  bj: refs[e.data.contact.bj]
                }
              });
              break;

            case 'collideBegin':
              callback = ((_events$e$data$bodyA = events[e.data.bodyA]) == null ? void 0 : _events$e$data$bodyA.collideBegin) || noop;
              callback({
                op: 'event',
                type: 'collideBegin',
                target: refs[e.data.bodyA],
                body: refs[e.data.bodyB]
              });
              callback = ((_events$e$data$bodyB = events[e.data.bodyB]) == null ? void 0 : _events$e$data$bodyB.collideBegin) || noop;
              callback({
                op: 'event',
                type: 'collideBegin',
                target: refs[e.data.bodyB],
                body: refs[e.data.bodyA]
              });
              break;

            case 'collideEnd':
              callback = ((_events$e$data$bodyA2 = events[e.data.bodyA]) == null ? void 0 : _events$e$data$bodyA2.collideEnd) || noop;
              callback({
                op: 'event',
                type: 'collideEnd',
                target: refs[e.data.bodyA],
                body: refs[e.data.bodyB]
              });
              callback = ((_events$e$data$bodyB2 = events[e.data.bodyB]) == null ? void 0 : _events$e$data$bodyB2.collideEnd) || noop;
              callback({
                op: 'event',
                type: 'collideEnd',
                target: refs[e.data.bodyB],
                body: refs[e.data.bodyA]
              });
              break;

            case 'rayhit':
              callback = ((_events$e$data$ray$uu = events[e.data.ray.uuid]) == null ? void 0 : _events$e$data$ray$uu.rayhit) || noop;
              callback({ ...e.data,
                body: e.data.body ? refs[e.data.body] : null
              });
              break;
          }

          break;
      }
    };

    return () => worker.terminate();
  }, []);
  useUpdateWorldPropsEffect({
    axisIndex,
    broadphase,
    gravity,
    iterations,
    step,
    tolerance,
    worker
  });
  const api = useMemo(() => ({
    worker,
    bodies,
    refs,
    buffers,
    events,
    subscriptions
  }), [worker, bodies, refs, buffers, events, subscriptions]);
  return /*#__PURE__*/jsx(context.Provider, {
    value: api,
    children: children
  });
}

/**
 * Records what objects are colliding with each other
 */
/**
 * A 3x3 matrix.
 * Authored by {@link http://github.com/schteppe/ schteppe}
 */


class Mat3 {
  /**
   * A vector of length 9, containing all matrix elements.
   */

  /**
   * @param elements A vector of length 9, containing all matrix elements.
   */
  constructor(elements) {
    if (elements === void 0) {
      elements = [0, 0, 0, 0, 0, 0, 0, 0, 0];
    }

    this.elements = void 0;
    this.elements = elements;
  }
  /**
   * Sets the matrix to identity
   * @todo Should perhaps be renamed to `setIdentity()` to be more clear.
   * @todo Create another function that immediately creates an identity matrix eg. `eye()`
   */


  identity() {
    const e = this.elements;
    e[0] = 1;
    e[1] = 0;
    e[2] = 0;
    e[3] = 0;
    e[4] = 1;
    e[5] = 0;
    e[6] = 0;
    e[7] = 0;
    e[8] = 1;
  }
  /**
   * Set all elements to zero
   */


  setZero() {
    const e = this.elements;
    e[0] = 0;
    e[1] = 0;
    e[2] = 0;
    e[3] = 0;
    e[4] = 0;
    e[5] = 0;
    e[6] = 0;
    e[7] = 0;
    e[8] = 0;
  }
  /**
   * Sets the matrix diagonal elements from a Vec3
   */


  setTrace(vector) {
    const e = this.elements;
    e[0] = vector.x;
    e[4] = vector.y;
    e[8] = vector.z;
  }
  /**
   * Gets the matrix diagonal elements
   */


  getTrace(target) {
    if (target === void 0) {
      target = new Vec3();
    }

    const e = this.elements;
    target.x = e[0];
    target.y = e[4];
    target.z = e[8];
    return target;
  }
  /**
   * Matrix-Vector multiplication
   * @param v The vector to multiply with
   * @param target Optional, target to save the result in.
   */


  vmult(v, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    const e = this.elements;
    const x = v.x;
    const y = v.y;
    const z = v.z;
    target.x = e[0] * x + e[1] * y + e[2] * z;
    target.y = e[3] * x + e[4] * y + e[5] * z;
    target.z = e[6] * x + e[7] * y + e[8] * z;
    return target;
  }
  /**
   * Matrix-scalar multiplication
   */


  smult(s) {
    for (let i = 0; i < this.elements.length; i++) {
      this.elements[i] *= s;
    }
  }
  /**
   * Matrix multiplication
   * @param matrix Matrix to multiply with from left side.
   */


  mmult(matrix, target) {
    if (target === void 0) {
      target = new Mat3();
    }

    const A = this.elements;
    const B = matrix.elements;
    const T = target.elements;
    const a11 = A[0],
          a12 = A[1],
          a13 = A[2],
          a21 = A[3],
          a22 = A[4],
          a23 = A[5],
          a31 = A[6],
          a32 = A[7],
          a33 = A[8];
    const b11 = B[0],
          b12 = B[1],
          b13 = B[2],
          b21 = B[3],
          b22 = B[4],
          b23 = B[5],
          b31 = B[6],
          b32 = B[7],
          b33 = B[8];
    T[0] = a11 * b11 + a12 * b21 + a13 * b31;
    T[1] = a11 * b12 + a12 * b22 + a13 * b32;
    T[2] = a11 * b13 + a12 * b23 + a13 * b33;
    T[3] = a21 * b11 + a22 * b21 + a23 * b31;
    T[4] = a21 * b12 + a22 * b22 + a23 * b32;
    T[5] = a21 * b13 + a22 * b23 + a23 * b33;
    T[6] = a31 * b11 + a32 * b21 + a33 * b31;
    T[7] = a31 * b12 + a32 * b22 + a33 * b32;
    T[8] = a31 * b13 + a32 * b23 + a33 * b33;
    return target;
  }
  /**
   * Scale each column of the matrix
   */


  scale(vector, target) {
    if (target === void 0) {
      target = new Mat3();
    }

    const e = this.elements;
    const t = target.elements;

    for (let i = 0; i !== 3; i++) {
      t[3 * i + 0] = vector.x * e[3 * i + 0];
      t[3 * i + 1] = vector.y * e[3 * i + 1];
      t[3 * i + 2] = vector.z * e[3 * i + 2];
    }

    return target;
  }
  /**
   * Solve Ax=b
   * @param b The right hand side
   * @param target Optional. Target vector to save in.
   * @return The solution x
   * @todo should reuse arrays
   */


  solve(b, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    // Construct equations
    const nr = 3; // num rows

    const nc = 4; // num cols

    const eqns = [];
    let i;
    let j;

    for (i = 0; i < nr * nc; i++) {
      eqns.push(0);
    }

    for (i = 0; i < 3; i++) {
      for (j = 0; j < 3; j++) {
        eqns[i + nc * j] = this.elements[i + 3 * j];
      }
    }

    eqns[3 + 4 * 0] = b.x;
    eqns[3 + 4 * 1] = b.y;
    eqns[3 + 4 * 2] = b.z; // Compute right upper triangular version of the matrix - Gauss elimination

    let n = 3;
    const k = n;
    let np;
    const kp = 4; // num rows

    let p;

    do {
      i = k - n;

      if (eqns[i + nc * i] === 0) {
        // the pivot is null, swap lines
        for (j = i + 1; j < k; j++) {
          if (eqns[i + nc * j] !== 0) {
            np = kp;

            do {
              // do ligne( i ) = ligne( i ) + ligne( k )
              p = kp - np;
              eqns[p + nc * i] += eqns[p + nc * j];
            } while (--np);

            break;
          }
        }
      }

      if (eqns[i + nc * i] !== 0) {
        for (j = i + 1; j < k; j++) {
          const multiplier = eqns[i + nc * j] / eqns[i + nc * i];
          np = kp;

          do {
            // do ligne( k ) = ligne( k ) - multiplier * ligne( i )
            p = kp - np;
            eqns[p + nc * j] = p <= i ? 0 : eqns[p + nc * j] - eqns[p + nc * i] * multiplier;
          } while (--np);
        }
      }
    } while (--n); // Get the solution


    target.z = eqns[2 * nc + 3] / eqns[2 * nc + 2];
    target.y = (eqns[1 * nc + 3] - eqns[1 * nc + 2] * target.z) / eqns[1 * nc + 1];
    target.x = (eqns[0 * nc + 3] - eqns[0 * nc + 2] * target.z - eqns[0 * nc + 1] * target.y) / eqns[0 * nc + 0];

    if (isNaN(target.x) || isNaN(target.y) || isNaN(target.z) || target.x === Infinity || target.y === Infinity || target.z === Infinity) {
      throw "Could not solve equation! Got x=[" + target.toString() + "], b=[" + b.toString() + "], A=[" + this.toString() + "]";
    }

    return target;
  }
  /**
   * Get an element in the matrix by index. Index starts at 0, not 1!!!
   * @param value If provided, the matrix element will be set to this value.
   */


  e(row, column, value) {
    if (value === undefined) {
      return this.elements[column + 3 * row];
    } else {
      // Set value
      this.elements[column + 3 * row] = value;
    }
  }
  /**
   * Copy another matrix into this matrix object.
   */


  copy(matrix) {
    for (let i = 0; i < matrix.elements.length; i++) {
      this.elements[i] = matrix.elements[i];
    }

    return this;
  }
  /**
   * Returns a string representation of the matrix.
   */


  toString() {
    let r = '';
    const sep = ',';

    for (let i = 0; i < 9; i++) {
      r += this.elements[i] + sep;
    }

    return r;
  }
  /**
   * reverse the matrix
   * @param target Target matrix to save in.
   * @return The solution x
   */


  reverse(target) {
    if (target === void 0) {
      target = new Mat3();
    }

    // Construct equations
    const nr = 3; // num rows

    const nc = 6; // num cols

    const eqns = reverse_eqns;
    let i;
    let j;

    for (i = 0; i < 3; i++) {
      for (j = 0; j < 3; j++) {
        eqns[i + nc * j] = this.elements[i + 3 * j];
      }
    }

    eqns[3 + 6 * 0] = 1;
    eqns[3 + 6 * 1] = 0;
    eqns[3 + 6 * 2] = 0;
    eqns[4 + 6 * 0] = 0;
    eqns[4 + 6 * 1] = 1;
    eqns[4 + 6 * 2] = 0;
    eqns[5 + 6 * 0] = 0;
    eqns[5 + 6 * 1] = 0;
    eqns[5 + 6 * 2] = 1; // Compute right upper triangular version of the matrix - Gauss elimination

    let n = 3;
    const k = n;
    let np;
    const kp = nc; // num rows

    let p;

    do {
      i = k - n;

      if (eqns[i + nc * i] === 0) {
        // the pivot is null, swap lines
        for (j = i + 1; j < k; j++) {
          if (eqns[i + nc * j] !== 0) {
            np = kp;

            do {
              // do line( i ) = line( i ) + line( k )
              p = kp - np;
              eqns[p + nc * i] += eqns[p + nc * j];
            } while (--np);

            break;
          }
        }
      }

      if (eqns[i + nc * i] !== 0) {
        for (j = i + 1; j < k; j++) {
          const multiplier = eqns[i + nc * j] / eqns[i + nc * i];
          np = kp;

          do {
            // do line( k ) = line( k ) - multiplier * line( i )
            p = kp - np;
            eqns[p + nc * j] = p <= i ? 0 : eqns[p + nc * j] - eqns[p + nc * i] * multiplier;
          } while (--np);
        }
      }
    } while (--n); // eliminate the upper left triangle of the matrix


    i = 2;

    do {
      j = i - 1;

      do {
        const multiplier = eqns[i + nc * j] / eqns[i + nc * i];
        np = nc;

        do {
          p = nc - np;
          eqns[p + nc * j] = eqns[p + nc * j] - eqns[p + nc * i] * multiplier;
        } while (--np);
      } while (j--);
    } while (--i); // operations on the diagonal


    i = 2;

    do {
      const multiplier = 1 / eqns[i + nc * i];
      np = nc;

      do {
        p = nc - np;
        eqns[p + nc * i] = eqns[p + nc * i] * multiplier;
      } while (--np);
    } while (i--);

    i = 2;

    do {
      j = 2;

      do {
        p = eqns[nr + j + nc * i];

        if (isNaN(p) || p === Infinity) {
          throw "Could not reverse! A=[" + this.toString() + "]";
        }

        target.e(i, j, p);
      } while (j--);
    } while (i--);

    return target;
  }
  /**
   * Set the matrix from a quaterion
   */


  setRotationFromQuaternion(q) {
    const x = q.x;
    const y = q.y;
    const z = q.z;
    const w = q.w;
    const x2 = x + x;
    const y2 = y + y;
    const z2 = z + z;
    const xx = x * x2;
    const xy = x * y2;
    const xz = x * z2;
    const yy = y * y2;
    const yz = y * z2;
    const zz = z * z2;
    const wx = w * x2;
    const wy = w * y2;
    const wz = w * z2;
    const e = this.elements;
    e[3 * 0 + 0] = 1 - (yy + zz);
    e[3 * 0 + 1] = xy - wz;
    e[3 * 0 + 2] = xz + wy;
    e[3 * 1 + 0] = xy + wz;
    e[3 * 1 + 1] = 1 - (xx + zz);
    e[3 * 1 + 2] = yz - wx;
    e[3 * 2 + 0] = xz - wy;
    e[3 * 2 + 1] = yz + wx;
    e[3 * 2 + 2] = 1 - (xx + yy);
    return this;
  }
  /**
   * Transpose the matrix
   * @param target Optional. Where to store the result.
   * @return The target Mat3, or a new Mat3 if target was omitted.
   */


  transpose(target) {
    if (target === void 0) {
      target = new Mat3();
    }

    const M = this.elements;
    const T = target.elements;
    let tmp; //Set diagonals

    T[0] = M[0];
    T[4] = M[4];
    T[8] = M[8];
    tmp = M[1];
    T[1] = M[3];
    T[3] = tmp;
    tmp = M[2];
    T[2] = M[6];
    T[6] = tmp;
    tmp = M[5];
    T[5] = M[7];
    T[7] = tmp;
    return target;
  }

}

const reverse_eqns = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
/**
 * 3-dimensional vector
 * @example
 *     const v = new Vec3(1, 2, 3)
 *     console.log('x=' + v.x) // x=1
 */

class Vec3 {
  constructor(x, y, z) {
    if (x === void 0) {
      x = 0.0;
    }

    if (y === void 0) {
      y = 0.0;
    }

    if (z === void 0) {
      z = 0.0;
    }

    this.x = void 0;
    this.y = void 0;
    this.z = void 0;
    this.x = x;
    this.y = y;
    this.z = z;
  }
  /**
   * Vector cross product
   * @param target Optional target to save in.
   */


  cross(vector, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    const vx = vector.x;
    const vy = vector.y;
    const vz = vector.z;
    const x = this.x;
    const y = this.y;
    const z = this.z;
    target.x = y * vz - z * vy;
    target.y = z * vx - x * vz;
    target.z = x * vy - y * vx;
    return target;
  }
  /**
   * Set the vectors' 3 elements
   */


  set(x, y, z) {
    this.x = x;
    this.y = y;
    this.z = z;
    return this;
  }
  /**
   * Set all components of the vector to zero.
   */


  setZero() {
    this.x = this.y = this.z = 0;
  }
  /**
   * Vector addition
   */


  vadd(vector, target) {
    if (target) {
      target.x = vector.x + this.x;
      target.y = vector.y + this.y;
      target.z = vector.z + this.z;
    } else {
      return new Vec3(this.x + vector.x, this.y + vector.y, this.z + vector.z);
    }
  }
  /**
   * Vector subtraction
   * @param target Optional target to save in.
   */


  vsub(vector, target) {
    if (target) {
      target.x = this.x - vector.x;
      target.y = this.y - vector.y;
      target.z = this.z - vector.z;
    } else {
      return new Vec3(this.x - vector.x, this.y - vector.y, this.z - vector.z);
    }
  }
  /**
   * Get the cross product matrix a_cross from a vector, such that a x b = a_cross * b = c
   *
   * See {@link https://www8.cs.umu.se/kurser/TDBD24/VT06/lectures/Lecture6.pdf Ume University Lecture}
   */


  crossmat() {
    return new Mat3([0, -this.z, this.y, this.z, 0, -this.x, -this.y, this.x, 0]);
  }
  /**
   * Normalize the vector. Note that this changes the values in the vector.
    * @return Returns the norm of the vector
   */


  normalize() {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    const n = Math.sqrt(x * x + y * y + z * z);

    if (n > 0.0) {
      const invN = 1 / n;
      this.x *= invN;
      this.y *= invN;
      this.z *= invN;
    } else {
      // Make something up
      this.x = 0;
      this.y = 0;
      this.z = 0;
    }

    return n;
  }
  /**
   * Get the version of this vector that is of length 1.
   * @param target Optional target to save in
   * @return Returns the unit vector
   */


  unit(target) {
    if (target === void 0) {
      target = new Vec3();
    }

    const x = this.x;
    const y = this.y;
    const z = this.z;
    let ninv = Math.sqrt(x * x + y * y + z * z);

    if (ninv > 0.0) {
      ninv = 1.0 / ninv;
      target.x = x * ninv;
      target.y = y * ninv;
      target.z = z * ninv;
    } else {
      target.x = 1;
      target.y = 0;
      target.z = 0;
    }

    return target;
  }
  /**
   * Get the length of the vector
   */


  length() {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    return Math.sqrt(x * x + y * y + z * z);
  }
  /**
   * Get the squared length of the vector.
   */


  lengthSquared() {
    return this.dot(this);
  }
  /**
   * Get distance from this point to another point
   */


  distanceTo(p) {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    const px = p.x;
    const py = p.y;
    const pz = p.z;
    return Math.sqrt((px - x) * (px - x) + (py - y) * (py - y) + (pz - z) * (pz - z));
  }
  /**
   * Get squared distance from this point to another point
   */


  distanceSquared(p) {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    const px = p.x;
    const py = p.y;
    const pz = p.z;
    return (px - x) * (px - x) + (py - y) * (py - y) + (pz - z) * (pz - z);
  }
  /**
   * Multiply all the components of the vector with a scalar.
   * @param target The vector to save the result in.
   */


  scale(scalar, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    const x = this.x;
    const y = this.y;
    const z = this.z;
    target.x = scalar * x;
    target.y = scalar * y;
    target.z = scalar * z;
    return target;
  }
  /**
   * Multiply the vector with an other vector, component-wise.
   * @param target The vector to save the result in.
   */


  vmul(vector, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    target.x = vector.x * this.x;
    target.y = vector.y * this.y;
    target.z = vector.z * this.z;
    return target;
  }
  /**
   * Scale a vector and add it to this vector. Save the result in "target". (target = this + vector * scalar)
   * @param target The vector to save the result in.
   */


  addScaledVector(scalar, vector, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    target.x = this.x + scalar * vector.x;
    target.y = this.y + scalar * vector.y;
    target.z = this.z + scalar * vector.z;
    return target;
  }
  /**
   * Calculate dot product
   * @param vector
   */


  dot(vector) {
    return this.x * vector.x + this.y * vector.y + this.z * vector.z;
  }

  isZero() {
    return this.x === 0 && this.y === 0 && this.z === 0;
  }
  /**
   * Make the vector point in the opposite direction.
   * @param target Optional target to save in
   */


  negate(target) {
    if (target === void 0) {
      target = new Vec3();
    }

    target.x = -this.x;
    target.y = -this.y;
    target.z = -this.z;
    return target;
  }
  /**
   * Compute two artificial tangents to the vector
   * @param t1 Vector object to save the first tangent in
   * @param t2 Vector object to save the second tangent in
   */


  tangents(t1, t2) {
    const norm = this.length();

    if (norm > 0.0) {
      const n = Vec3_tangents_n;
      const inorm = 1 / norm;
      n.set(this.x * inorm, this.y * inorm, this.z * inorm);
      const randVec = Vec3_tangents_randVec;

      if (Math.abs(n.x) < 0.9) {
        randVec.set(1, 0, 0);
        n.cross(randVec, t1);
      } else {
        randVec.set(0, 1, 0);
        n.cross(randVec, t1);
      }

      n.cross(t1, t2);
    } else {
      // The normal length is zero, make something up
      t1.set(1, 0, 0);
      t2.set(0, 1, 0);
    }
  }
  /**
   * Converts to a more readable format
   */


  toString() {
    return this.x + "," + this.y + "," + this.z;
  }
  /**
   * Converts to an array
   */


  toArray() {
    return [this.x, this.y, this.z];
  }
  /**
   * Copies value of source to this vector.
   */


  copy(vector) {
    this.x = vector.x;
    this.y = vector.y;
    this.z = vector.z;
    return this;
  }
  /**
   * Do a linear interpolation between two vectors
   * @param t A number between 0 and 1. 0 will make this function return u, and 1 will make it return v. Numbers in between will generate a vector in between them.
   */


  lerp(vector, t, target) {
    const x = this.x;
    const y = this.y;
    const z = this.z;
    target.x = x + (vector.x - x) * t;
    target.y = y + (vector.y - y) * t;
    target.z = z + (vector.z - z) * t;
  }
  /**
   * Check if a vector equals is almost equal to another one.
   */


  almostEquals(vector, precision) {
    if (precision === void 0) {
      precision = 1e-6;
    }

    if (Math.abs(this.x - vector.x) > precision || Math.abs(this.y - vector.y) > precision || Math.abs(this.z - vector.z) > precision) {
      return false;
    }

    return true;
  }
  /**
   * Check if a vector is almost zero
   */


  almostZero(precision) {
    if (precision === void 0) {
      precision = 1e-6;
    }

    if (Math.abs(this.x) > precision || Math.abs(this.y) > precision || Math.abs(this.z) > precision) {
      return false;
    }

    return true;
  }
  /**
   * Check if the vector is anti-parallel to another vector.
   * @param precision Set to zero for exact comparisons
   */


  isAntiparallelTo(vector, precision) {
    this.negate(antip_neg);
    return antip_neg.almostEquals(vector, precision);
  }
  /**
   * Clone the vector
   */


  clone() {
    return new Vec3(this.x, this.y, this.z);
  }

}

Vec3.ZERO = void 0;
Vec3.UNIT_X = void 0;
Vec3.UNIT_Y = void 0;
Vec3.UNIT_Z = void 0;
Vec3.ZERO = new Vec3(0, 0, 0);
Vec3.UNIT_X = new Vec3(1, 0, 0);
Vec3.UNIT_Y = new Vec3(0, 1, 0);
Vec3.UNIT_Z = new Vec3(0, 0, 1);
const Vec3_tangents_n = new Vec3();
const Vec3_tangents_randVec = new Vec3();
const antip_neg = new Vec3();
/**
 * Axis aligned bounding box class.
 */

class AABB {
  /**
   * The lower bound of the bounding box
   */

  /**
   * The upper bound of the bounding box
   */
  constructor(options) {
    if (options === void 0) {
      options = {};
    }

    this.lowerBound = void 0;
    this.upperBound = void 0;
    this.lowerBound = new Vec3();
    this.upperBound = new Vec3();

    if (options.lowerBound) {
      this.lowerBound.copy(options.lowerBound);
    }

    if (options.upperBound) {
      this.upperBound.copy(options.upperBound);
    }
  }
  /**
   * Set the AABB bounds from a set of points.
   * @param points An array of Vec3's.
   * @return The self object
   */


  setFromPoints(points, position, quaternion, skinSize) {
    const l = this.lowerBound;
    const u = this.upperBound;
    const q = quaternion; // Set to the first point

    l.copy(points[0]);

    if (q) {
      q.vmult(l, l);
    }

    u.copy(l);

    for (let i = 1; i < points.length; i++) {
      let p = points[i];

      if (q) {
        q.vmult(p, tmp$1);
        p = tmp$1;
      }

      if (p.x > u.x) {
        u.x = p.x;
      }

      if (p.x < l.x) {
        l.x = p.x;
      }

      if (p.y > u.y) {
        u.y = p.y;
      }

      if (p.y < l.y) {
        l.y = p.y;
      }

      if (p.z > u.z) {
        u.z = p.z;
      }

      if (p.z < l.z) {
        l.z = p.z;
      }
    } // Add offset


    if (position) {
      position.vadd(l, l);
      position.vadd(u, u);
    }

    if (skinSize) {
      l.x -= skinSize;
      l.y -= skinSize;
      l.z -= skinSize;
      u.x += skinSize;
      u.y += skinSize;
      u.z += skinSize;
    }

    return this;
  }
  /**
   * Copy bounds from an AABB to this AABB
   * @param aabb Source to copy from
   * @return The this object, for chainability
   */


  copy(aabb) {
    this.lowerBound.copy(aabb.lowerBound);
    this.upperBound.copy(aabb.upperBound);
    return this;
  }
  /**
   * Clone an AABB
   */


  clone() {
    return new AABB().copy(this);
  }
  /**
   * Extend this AABB so that it covers the given AABB too.
   */


  extend(aabb) {
    this.lowerBound.x = Math.min(this.lowerBound.x, aabb.lowerBound.x);
    this.upperBound.x = Math.max(this.upperBound.x, aabb.upperBound.x);
    this.lowerBound.y = Math.min(this.lowerBound.y, aabb.lowerBound.y);
    this.upperBound.y = Math.max(this.upperBound.y, aabb.upperBound.y);
    this.lowerBound.z = Math.min(this.lowerBound.z, aabb.lowerBound.z);
    this.upperBound.z = Math.max(this.upperBound.z, aabb.upperBound.z);
  }
  /**
   * Returns true if the given AABB overlaps this AABB.
   */


  overlaps(aabb) {
    const l1 = this.lowerBound;
    const u1 = this.upperBound;
    const l2 = aabb.lowerBound;
    const u2 = aabb.upperBound; //      l2        u2
    //      |---------|
    // |--------|
    // l1       u1

    const overlapsX = l2.x <= u1.x && u1.x <= u2.x || l1.x <= u2.x && u2.x <= u1.x;
    const overlapsY = l2.y <= u1.y && u1.y <= u2.y || l1.y <= u2.y && u2.y <= u1.y;
    const overlapsZ = l2.z <= u1.z && u1.z <= u2.z || l1.z <= u2.z && u2.z <= u1.z;
    return overlapsX && overlapsY && overlapsZ;
  } // Mostly for debugging


  volume() {
    const l = this.lowerBound;
    const u = this.upperBound;
    return (u.x - l.x) * (u.y - l.y) * (u.z - l.z);
  }
  /**
   * Returns true if the given AABB is fully contained in this AABB.
   */


  contains(aabb) {
    const l1 = this.lowerBound;
    const u1 = this.upperBound;
    const l2 = aabb.lowerBound;
    const u2 = aabb.upperBound; //      l2        u2
    //      |---------|
    // |---------------|
    // l1              u1

    return l1.x <= l2.x && u1.x >= u2.x && l1.y <= l2.y && u1.y >= u2.y && l1.z <= l2.z && u1.z >= u2.z;
  }

  getCorners(a, b, c, d, e, f, g, h) {
    const l = this.lowerBound;
    const u = this.upperBound;
    a.copy(l);
    b.set(u.x, l.y, l.z);
    c.set(u.x, u.y, l.z);
    d.set(l.x, u.y, u.z);
    e.set(u.x, l.y, u.z);
    f.set(l.x, u.y, l.z);
    g.set(l.x, l.y, u.z);
    h.copy(u);
  }
  /**
   * Get the representation of an AABB in another frame.
   * @return The "target" AABB object.
   */


  toLocalFrame(frame, target) {
    const corners = transformIntoFrame_corners;
    const a = corners[0];
    const b = corners[1];
    const c = corners[2];
    const d = corners[3];
    const e = corners[4];
    const f = corners[5];
    const g = corners[6];
    const h = corners[7]; // Get corners in current frame

    this.getCorners(a, b, c, d, e, f, g, h); // Transform them to new local frame

    for (let i = 0; i !== 8; i++) {
      const corner = corners[i];
      frame.pointToLocal(corner, corner);
    }

    return target.setFromPoints(corners);
  }
  /**
   * Get the representation of an AABB in the global frame.
   * @return The "target" AABB object.
   */


  toWorldFrame(frame, target) {
    const corners = transformIntoFrame_corners;
    const a = corners[0];
    const b = corners[1];
    const c = corners[2];
    const d = corners[3];
    const e = corners[4];
    const f = corners[5];
    const g = corners[6];
    const h = corners[7]; // Get corners in current frame

    this.getCorners(a, b, c, d, e, f, g, h); // Transform them to new local frame

    for (let i = 0; i !== 8; i++) {
      const corner = corners[i];
      frame.pointToWorld(corner, corner);
    }

    return target.setFromPoints(corners);
  }
  /**
   * Check if the AABB is hit by a ray.
   */


  overlapsRay(ray) {
    const {
      direction,
      from
    } = ray; // const t = 0
    // ray.direction is unit direction vector of ray

    const dirFracX = 1 / direction.x;
    const dirFracY = 1 / direction.y;
    const dirFracZ = 1 / direction.z; // this.lowerBound is the corner of AABB with minimal coordinates - left bottom, rt is maximal corner

    const t1 = (this.lowerBound.x - from.x) * dirFracX;
    const t2 = (this.upperBound.x - from.x) * dirFracX;
    const t3 = (this.lowerBound.y - from.y) * dirFracY;
    const t4 = (this.upperBound.y - from.y) * dirFracY;
    const t5 = (this.lowerBound.z - from.z) * dirFracZ;
    const t6 = (this.upperBound.z - from.z) * dirFracZ; // const tmin = Math.max(Math.max(Math.min(t1, t2), Math.min(t3, t4)));
    // const tmax = Math.min(Math.min(Math.max(t1, t2), Math.max(t3, t4)));

    const tmin = Math.max(Math.max(Math.min(t1, t2), Math.min(t3, t4)), Math.min(t5, t6));
    const tmax = Math.min(Math.min(Math.max(t1, t2), Math.max(t3, t4)), Math.max(t5, t6)); // if tmax < 0, ray (line) is intersecting AABB, but whole AABB is behing us

    if (tmax < 0) {
      //t = tmax;
      return false;
    } // if tmin > tmax, ray doesn't intersect AABB


    if (tmin > tmax) {
      //t = tmax;
      return false;
    }

    return true;
  }

}

const tmp$1 = new Vec3();
const transformIntoFrame_corners = [new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];
/**
 * Base class for objects that dispatches events.
 */


class EventTarget {
  constructor() {
    this._listeners = void 0;
  }
  /**
   * Add an event listener
   * @return The self object, for chainability.
   */


  addEventListener(type, listener) {
    if (this._listeners === undefined) {
      this._listeners = {};
    }

    const listeners = this._listeners;

    if (listeners[type] === undefined) {
      listeners[type] = [];
    }

    if (!listeners[type].includes(listener)) {
      listeners[type].push(listener);
    }

    return this;
  }
  /**
   * Check if an event listener is added
   */


  hasEventListener(type, listener) {
    if (this._listeners === undefined) {
      return false;
    }

    const listeners = this._listeners;

    if (listeners[type] !== undefined && listeners[type].includes(listener)) {
      return true;
    }

    return false;
  }
  /**
   * Check if any event listener of the given type is added
   */


  hasAnyEventListener(type) {
    if (this._listeners === undefined) {
      return false;
    }

    const listeners = this._listeners;
    return listeners[type] !== undefined;
  }
  /**
   * Remove an event listener
   * @return The self object, for chainability.
   */


  removeEventListener(type, listener) {
    if (this._listeners === undefined) {
      return this;
    }

    const listeners = this._listeners;

    if (listeners[type] === undefined) {
      return this;
    }

    const index = listeners[type].indexOf(listener);

    if (index !== -1) {
      listeners[type].splice(index, 1);
    }

    return this;
  }
  /**
   * Emit an event.
   * @return The self object, for chainability.
   */


  dispatchEvent(event) {
    if (this._listeners === undefined) {
      return this;
    }

    const listeners = this._listeners;
    const listenerArray = listeners[event.type];

    if (listenerArray !== undefined) {
      event.target = this;

      for (let i = 0, l = listenerArray.length; i < l; i++) {
        listenerArray[i].call(this, event);
      }
    }

    return this;
  }

}
/**
 * A Quaternion describes a rotation in 3D space. The Quaternion is mathematically defined as Q = x*i + y*j + z*k + w, where (i,j,k) are imaginary basis vectors. (x,y,z) can be seen as a vector related to the axis of rotation, while the real multiplier, w, is related to the amount of rotation.
 * @param x Multiplier of the imaginary basis vector i.
 * @param y Multiplier of the imaginary basis vector j.
 * @param z Multiplier of the imaginary basis vector k.
 * @param w Multiplier of the real part.
 * @see http://en.wikipedia.org/wiki/Quaternion
 */


class Quaternion {
  constructor(x, y, z, w) {
    if (x === void 0) {
      x = 0;
    }

    if (y === void 0) {
      y = 0;
    }

    if (z === void 0) {
      z = 0;
    }

    if (w === void 0) {
      w = 1;
    }

    this.x = void 0;
    this.y = void 0;
    this.z = void 0;
    this.w = void 0;
    this.x = x;
    this.y = y;
    this.z = z;
    this.w = w;
  }
  /**
   * Set the value of the quaternion.
   */


  set(x, y, z, w) {
    this.x = x;
    this.y = y;
    this.z = z;
    this.w = w;
    return this;
  }
  /**
   * Convert to a readable format
   * @return "x,y,z,w"
   */


  toString() {
    return this.x + "," + this.y + "," + this.z + "," + this.w;
  }
  /**
   * Convert to an Array
   * @return [x, y, z, w]
   */


  toArray() {
    return [this.x, this.y, this.z, this.w];
  }
  /**
   * Set the quaternion components given an axis and an angle in radians.
   */


  setFromAxisAngle(vector, angle) {
    const s = Math.sin(angle * 0.5);
    this.x = vector.x * s;
    this.y = vector.y * s;
    this.z = vector.z * s;
    this.w = Math.cos(angle * 0.5);
    return this;
  }
  /**
   * Converts the quaternion to [ axis, angle ] representation.
   * @param targetAxis A vector object to reuse for storing the axis.
   * @return An array, first element is the axis and the second is the angle in radians.
   */


  toAxisAngle(targetAxis) {
    if (targetAxis === void 0) {
      targetAxis = new Vec3();
    }

    this.normalize(); // if w>1 acos and sqrt will produce errors, this cant happen if quaternion is normalised

    const angle = 2 * Math.acos(this.w);
    const s = Math.sqrt(1 - this.w * this.w); // assuming quaternion normalised then w is less than 1, so term always positive.

    if (s < 0.001) {
      // test to avoid divide by zero, s is always positive due to sqrt
      // if s close to zero then direction of axis not important
      targetAxis.x = this.x; // if it is important that axis is normalised then replace with x=1; y=z=0;

      targetAxis.y = this.y;
      targetAxis.z = this.z;
    } else {
      targetAxis.x = this.x / s; // normalise axis

      targetAxis.y = this.y / s;
      targetAxis.z = this.z / s;
    }

    return [targetAxis, angle];
  }
  /**
   * Set the quaternion value given two vectors. The resulting rotation will be the needed rotation to rotate u to v.
   */


  setFromVectors(u, v) {
    if (u.isAntiparallelTo(v)) {
      const t1 = sfv_t1;
      const t2 = sfv_t2;
      u.tangents(t1, t2);
      this.setFromAxisAngle(t1, Math.PI);
    } else {
      const a = u.cross(v);
      this.x = a.x;
      this.y = a.y;
      this.z = a.z;
      this.w = Math.sqrt(u.length() ** 2 * v.length() ** 2) + u.dot(v);
      this.normalize();
    }

    return this;
  }
  /**
   * Multiply the quaternion with an other quaternion.
   */


  mult(quat, target) {
    if (target === void 0) {
      target = new Quaternion();
    }

    const ax = this.x;
    const ay = this.y;
    const az = this.z;
    const aw = this.w;
    const bx = quat.x;
    const by = quat.y;
    const bz = quat.z;
    const bw = quat.w;
    target.x = ax * bw + aw * bx + ay * bz - az * by;
    target.y = ay * bw + aw * by + az * bx - ax * bz;
    target.z = az * bw + aw * bz + ax * by - ay * bx;
    target.w = aw * bw - ax * bx - ay * by - az * bz;
    return target;
  }
  /**
   * Get the inverse quaternion rotation.
   */


  inverse(target) {
    if (target === void 0) {
      target = new Quaternion();
    }

    const x = this.x;
    const y = this.y;
    const z = this.z;
    const w = this.w;
    this.conjugate(target);
    const inorm2 = 1 / (x * x + y * y + z * z + w * w);
    target.x *= inorm2;
    target.y *= inorm2;
    target.z *= inorm2;
    target.w *= inorm2;
    return target;
  }
  /**
   * Get the quaternion conjugate
   */


  conjugate(target) {
    if (target === void 0) {
      target = new Quaternion();
    }

    target.x = -this.x;
    target.y = -this.y;
    target.z = -this.z;
    target.w = this.w;
    return target;
  }
  /**
   * Normalize the quaternion. Note that this changes the values of the quaternion.
   */


  normalize() {
    let l = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);

    if (l === 0) {
      this.x = 0;
      this.y = 0;
      this.z = 0;
      this.w = 0;
    } else {
      l = 1 / l;
      this.x *= l;
      this.y *= l;
      this.z *= l;
      this.w *= l;
    }

    return this;
  }
  /**
   * Approximation of quaternion normalization. Works best when quat is already almost-normalized.
   * @author unphased, https://github.com/unphased
   */


  normalizeFast() {
    const f = (3.0 - (this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)) / 2.0;

    if (f === 0) {
      this.x = 0;
      this.y = 0;
      this.z = 0;
      this.w = 0;
    } else {
      this.x *= f;
      this.y *= f;
      this.z *= f;
      this.w *= f;
    }

    return this;
  }
  /**
   * Multiply the quaternion by a vector
   */


  vmult(v, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    const x = v.x;
    const y = v.y;
    const z = v.z;
    const qx = this.x;
    const qy = this.y;
    const qz = this.z;
    const qw = this.w; // q*v

    const ix = qw * x + qy * z - qz * y;
    const iy = qw * y + qz * x - qx * z;
    const iz = qw * z + qx * y - qy * x;
    const iw = -qx * x - qy * y - qz * z;
    target.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;
    target.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;
    target.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;
    return target;
  }
  /**
   * Copies value of source to this quaternion.
   * @return this
   */


  copy(quat) {
    this.x = quat.x;
    this.y = quat.y;
    this.z = quat.z;
    this.w = quat.w;
    return this;
  }
  /**
   * Convert the quaternion to euler angle representation. Order: YZX, as this page describes: https://www.euclideanspace.com/maths/standards/index.htm
   * @param order Three-character string, defaults to "YZX"
   */


  toEuler(target, order) {
    if (order === void 0) {
      order = 'YZX';
    }

    let heading;
    let attitude;
    let bank;
    const x = this.x;
    const y = this.y;
    const z = this.z;
    const w = this.w;

    switch (order) {
      case 'YZX':
        const test = x * y + z * w;

        if (test > 0.499) {
          // singularity at north pole
          heading = 2 * Math.atan2(x, w);
          attitude = Math.PI / 2;
          bank = 0;
        }

        if (test < -0.499) {
          // singularity at south pole
          heading = -2 * Math.atan2(x, w);
          attitude = -Math.PI / 2;
          bank = 0;
        }

        if (heading === undefined) {
          const sqx = x * x;
          const sqy = y * y;
          const sqz = z * z;
          heading = Math.atan2(2 * y * w - 2 * x * z, 1 - 2 * sqy - 2 * sqz); // Heading

          attitude = Math.asin(2 * test); // attitude

          bank = Math.atan2(2 * x * w - 2 * y * z, 1 - 2 * sqx - 2 * sqz); // bank
        }

        break;

      default:
        throw new Error("Euler order " + order + " not supported yet.");
    }

    target.y = heading;
    target.z = attitude;
    target.x = bank;
  }
  /**
   * @param order The order to apply angles: 'XYZ' or 'YXZ' or any other combination.
   *
   * See {@link https://www.mathworks.com/matlabcentral/fileexchange/20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors MathWorks} reference
   */


  setFromEuler(x, y, z, order) {
    if (order === void 0) {
      order = 'XYZ';
    }

    const c1 = Math.cos(x / 2);
    const c2 = Math.cos(y / 2);
    const c3 = Math.cos(z / 2);
    const s1 = Math.sin(x / 2);
    const s2 = Math.sin(y / 2);
    const s3 = Math.sin(z / 2);

    if (order === 'XYZ') {
      this.x = s1 * c2 * c3 + c1 * s2 * s3;
      this.y = c1 * s2 * c3 - s1 * c2 * s3;
      this.z = c1 * c2 * s3 + s1 * s2 * c3;
      this.w = c1 * c2 * c3 - s1 * s2 * s3;
    } else if (order === 'YXZ') {
      this.x = s1 * c2 * c3 + c1 * s2 * s3;
      this.y = c1 * s2 * c3 - s1 * c2 * s3;
      this.z = c1 * c2 * s3 - s1 * s2 * c3;
      this.w = c1 * c2 * c3 + s1 * s2 * s3;
    } else if (order === 'ZXY') {
      this.x = s1 * c2 * c3 - c1 * s2 * s3;
      this.y = c1 * s2 * c3 + s1 * c2 * s3;
      this.z = c1 * c2 * s3 + s1 * s2 * c3;
      this.w = c1 * c2 * c3 - s1 * s2 * s3;
    } else if (order === 'ZYX') {
      this.x = s1 * c2 * c3 - c1 * s2 * s3;
      this.y = c1 * s2 * c3 + s1 * c2 * s3;
      this.z = c1 * c2 * s3 - s1 * s2 * c3;
      this.w = c1 * c2 * c3 + s1 * s2 * s3;
    } else if (order === 'YZX') {
      this.x = s1 * c2 * c3 + c1 * s2 * s3;
      this.y = c1 * s2 * c3 + s1 * c2 * s3;
      this.z = c1 * c2 * s3 - s1 * s2 * c3;
      this.w = c1 * c2 * c3 - s1 * s2 * s3;
    } else if (order === 'XZY') {
      this.x = s1 * c2 * c3 - c1 * s2 * s3;
      this.y = c1 * s2 * c3 - s1 * c2 * s3;
      this.z = c1 * c2 * s3 + s1 * s2 * c3;
      this.w = c1 * c2 * c3 + s1 * s2 * s3;
    }

    return this;
  }

  clone() {
    return new Quaternion(this.x, this.y, this.z, this.w);
  }
  /**
   * Performs a spherical linear interpolation between two quat
   *
   * @param toQuat second operand
   * @param t interpolation amount between the self quaternion and toQuat
   * @param target A quaternion to store the result in. If not provided, a new one will be created.
   * @returns {Quaternion} The "target" object
   */


  slerp(toQuat, t, target) {
    if (target === void 0) {
      target = new Quaternion();
    }

    const ax = this.x;
    const ay = this.y;
    const az = this.z;
    const aw = this.w;
    let bx = toQuat.x;
    let by = toQuat.y;
    let bz = toQuat.z;
    let bw = toQuat.w;
    let omega;
    let cosom;
    let sinom;
    let scale0;
    let scale1; // calc cosine

    cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)

    if (cosom < 0.0) {
      cosom = -cosom;
      bx = -bx;
      by = -by;
      bz = -bz;
      bw = -bw;
    } // calculate coefficients


    if (1.0 - cosom > 0.000001) {
      // standard case (slerp)
      omega = Math.acos(cosom);
      sinom = Math.sin(omega);
      scale0 = Math.sin((1.0 - t) * omega) / sinom;
      scale1 = Math.sin(t * omega) / sinom;
    } else {
      // "from" and "to" quaternions are very close
      //  ... so we can do a linear interpolation
      scale0 = 1.0 - t;
      scale1 = t;
    } // calculate final values


    target.x = scale0 * ax + scale1 * bx;
    target.y = scale0 * ay + scale1 * by;
    target.z = scale0 * az + scale1 * bz;
    target.w = scale0 * aw + scale1 * bw;
    return target;
  }
  /**
   * Rotate an absolute orientation quaternion given an angular velocity and a time step.
   */


  integrate(angularVelocity, dt, angularFactor, target) {
    if (target === void 0) {
      target = new Quaternion();
    }

    const ax = angularVelocity.x * angularFactor.x,
          ay = angularVelocity.y * angularFactor.y,
          az = angularVelocity.z * angularFactor.z,
          bx = this.x,
          by = this.y,
          bz = this.z,
          bw = this.w;
    const half_dt = dt * 0.5;
    target.x += half_dt * (ax * bw + ay * bz - az * by);
    target.y += half_dt * (ay * bw + az * bx - ax * bz);
    target.z += half_dt * (az * bw + ax * by - ay * bx);
    target.w += half_dt * (-ax * bx - ay * by - az * bz);
    return target;
  }

}

const sfv_t1 = new Vec3();
const sfv_t2 = new Vec3();
/**
 * The available shape types.
 */

const SHAPE_TYPES = {
  /** SPHERE */
  SPHERE: 1,

  /** PLANE */
  PLANE: 2,

  /** BOX */
  BOX: 4,

  /** COMPOUND */
  COMPOUND: 8,

  /** CONVEXPOLYHEDRON */
  CONVEXPOLYHEDRON: 16,

  /** HEIGHTFIELD */
  HEIGHTFIELD: 32,

  /** PARTICLE */
  PARTICLE: 64,

  /** CYLINDER */
  CYLINDER: 128,

  /** TRIMESH */
  TRIMESH: 256
};
/**
 * ShapeType
 */

/**
 * Base class for shapes
 */

class Shape {
  /**
   * Identifier of the Shape.
   */

  /**
   * The type of this shape. Must be set to an int > 0 by subclasses.
   */

  /**
   * The local bounding sphere radius of this shape.
   */

  /**
   * Whether to produce contact forces when in contact with other bodies. Note that contacts will be generated, but they will be disabled.
   * @default true
   */

  /**
   * @default 1
   */

  /**
   * @default -1
   */

  /**
   * Optional material of the shape that regulates contact properties.
   */

  /**
   * The body to which the shape is added to.
   */

  /**
   * All the Shape types.
   */
  constructor(options) {
    if (options === void 0) {
      options = {};
    }

    this.id = void 0;
    this.type = void 0;
    this.boundingSphereRadius = void 0;
    this.collisionResponse = void 0;
    this.collisionFilterGroup = void 0;
    this.collisionFilterMask = void 0;
    this.material = void 0;
    this.body = void 0;
    this.id = Shape.idCounter++;
    this.type = options.type || 0;
    this.boundingSphereRadius = 0;
    this.collisionResponse = options.collisionResponse ? options.collisionResponse : true;
    this.collisionFilterGroup = options.collisionFilterGroup !== undefined ? options.collisionFilterGroup : 1;
    this.collisionFilterMask = options.collisionFilterMask !== undefined ? options.collisionFilterMask : -1;
    this.material = options.material ? options.material : null;
    this.body = null;
  }
  /**
   * Computes the bounding sphere radius.
   * The result is stored in the property `.boundingSphereRadius`
   */


  updateBoundingSphereRadius() {
    throw "computeBoundingSphereRadius() not implemented for shape type " + this.type;
  }
  /**
   * Get the volume of this shape
   */


  volume() {
    throw "volume() not implemented for shape type " + this.type;
  }
  /**
   * Calculates the inertia in the local frame for this shape.
   * @see http://en.wikipedia.org/wiki/List_of_moments_of_inertia
   */


  calculateLocalInertia(mass, target) {
    throw "calculateLocalInertia() not implemented for shape type " + this.type;
  }
  /**
   * @todo use abstract for these kind of methods
   */


  calculateWorldAABB(pos, quat, min, max) {
    throw "calculateWorldAABB() not implemented for shape type " + this.type;
  }

}

Shape.idCounter = 0;
Shape.types = SHAPE_TYPES;
/**
 * Transformation utilities.
 */

class Transform {
  /**
   * position
   */

  /**
   * quaternion
   */
  constructor(options) {
    if (options === void 0) {
      options = {};
    }

    this.position = void 0;
    this.quaternion = void 0;
    this.position = new Vec3();
    this.quaternion = new Quaternion();

    if (options.position) {
      this.position.copy(options.position);
    }

    if (options.quaternion) {
      this.quaternion.copy(options.quaternion);
    }
  }
  /**
   * Get a global point in local transform coordinates.
   */


  pointToLocal(worldPoint, result) {
    return Transform.pointToLocalFrame(this.position, this.quaternion, worldPoint, result);
  }
  /**
   * Get a local point in global transform coordinates.
   */


  pointToWorld(localPoint, result) {
    return Transform.pointToWorldFrame(this.position, this.quaternion, localPoint, result);
  }
  /**
   * vectorToWorldFrame
   */


  vectorToWorldFrame(localVector, result) {
    if (result === void 0) {
      result = new Vec3();
    }

    this.quaternion.vmult(localVector, result);
    return result;
  }
  /**
   * pointToLocalFrame
   */


  static pointToLocalFrame(position, quaternion, worldPoint, result) {
    if (result === void 0) {
      result = new Vec3();
    }

    worldPoint.vsub(position, result);
    quaternion.conjugate(tmpQuat$1);
    tmpQuat$1.vmult(result, result);
    return result;
  }
  /**
   * pointToWorldFrame
   */


  static pointToWorldFrame(position, quaternion, localPoint, result) {
    if (result === void 0) {
      result = new Vec3();
    }

    quaternion.vmult(localPoint, result);
    result.vadd(position, result);
    return result;
  }
  /**
   * vectorToWorldFrame
   */


  static vectorToWorldFrame(quaternion, localVector, result) {
    if (result === void 0) {
      result = new Vec3();
    }

    quaternion.vmult(localVector, result);
    return result;
  }
  /**
   * vectorToLocalFrame
   */


  static vectorToLocalFrame(position, quaternion, worldVector, result) {
    if (result === void 0) {
      result = new Vec3();
    }

    quaternion.w *= -1;
    quaternion.vmult(worldVector, result);
    quaternion.w *= -1;
    return result;
  }

}

const tmpQuat$1 = new Quaternion();
/**
 * A set of polygons describing a convex shape.
 *
 * The shape MUST be convex for the code to work properly. No polygons may be coplanar (contained
 * in the same 3D plane), instead these should be merged into one polygon.
 *
 * @author qiao / https://github.com/qiao (original author, see https://github.com/qiao/three.js/commit/85026f0c769e4000148a67d45a9e9b9c5108836f)
 * @author schteppe / https://github.com/schteppe
 * @see https://www.altdevblogaday.com/2011/05/13/contact-generation-between-3d-convex-meshes/
 *
 * @todo Move the clipping functions to ContactGenerator?
 * @todo Automatically merge coplanar polygons in constructor.
 * @example
 *     const convexShape = new CANNON.ConvexPolyhedron({ vertices, faces })
 *     const convexBody = new CANNON.Body({ mass: 1, shape: convexShape })
 *     world.addBody(convexBody)
 */

class ConvexPolyhedron extends Shape {
  /** vertices */

  /**
   * Array of integer arrays, indicating which vertices each face consists of
   */

  /** faceNormals */

  /** worldVertices */

  /** worldVerticesNeedsUpdate */

  /** worldFaceNormals */

  /** worldFaceNormalsNeedsUpdate */

  /**
   * If given, these locally defined, normalized axes are the only ones being checked when doing separating axis check.
   */

  /** uniqueEdges */

  /**
   * @param vertices An array of Vec3's
   * @param faces Array of integer arrays, describing which vertices that is included in each face.
   */
  constructor(props) {
    if (props === void 0) {
      props = {};
    }

    const {
      vertices = [],
      faces = [],
      normals = [],
      axes,
      boundingSphereRadius
    } = props;
    super({
      type: Shape.types.CONVEXPOLYHEDRON
    });
    this.vertices = void 0;
    this.faces = void 0;
    this.faceNormals = void 0;
    this.worldVertices = void 0;
    this.worldVerticesNeedsUpdate = void 0;
    this.worldFaceNormals = void 0;
    this.worldFaceNormalsNeedsUpdate = void 0;
    this.uniqueAxes = void 0;
    this.uniqueEdges = void 0;
    this.vertices = vertices;
    this.faces = faces;
    this.faceNormals = normals;

    if (this.faceNormals.length === 0) {
      this.computeNormals();
    }

    if (!boundingSphereRadius) {
      this.updateBoundingSphereRadius();
    } else {
      this.boundingSphereRadius = boundingSphereRadius;
    }

    this.worldVertices = []; // World transformed version of .vertices

    this.worldVerticesNeedsUpdate = true;
    this.worldFaceNormals = []; // World transformed version of .faceNormals

    this.worldFaceNormalsNeedsUpdate = true;
    this.uniqueAxes = axes ? axes.slice() : null;
    this.uniqueEdges = [];
    this.computeEdges();
  }
  /**
   * Computes uniqueEdges
   */


  computeEdges() {
    const faces = this.faces;
    const vertices = this.vertices;
    const edges = this.uniqueEdges;
    edges.length = 0;
    const edge = new Vec3();

    for (let i = 0; i !== faces.length; i++) {
      const face = faces[i];
      const numVertices = face.length;

      for (let j = 0; j !== numVertices; j++) {
        const k = (j + 1) % numVertices;
        vertices[face[j]].vsub(vertices[face[k]], edge);
        edge.normalize();
        let found = false;

        for (let p = 0; p !== edges.length; p++) {
          if (edges[p].almostEquals(edge) || edges[p].almostEquals(edge)) {
            found = true;
            break;
          }
        }

        if (!found) {
          edges.push(edge.clone());
        }
      }
    }
  }
  /**
   * Compute the normals of the faces.
   * Will reuse existing Vec3 objects in the `faceNormals` array if they exist.
   */


  computeNormals() {
    this.faceNormals.length = this.faces.length; // Generate normals

    for (let i = 0; i < this.faces.length; i++) {
      // Check so all vertices exists for this face
      for (let j = 0; j < this.faces[i].length; j++) {
        if (!this.vertices[this.faces[i][j]]) {
          throw new Error("Vertex " + this.faces[i][j] + " not found!");
        }
      }

      const n = this.faceNormals[i] || new Vec3();
      this.getFaceNormal(i, n);
      n.negate(n);
      this.faceNormals[i] = n;
      const vertex = this.vertices[this.faces[i][0]];

      if (n.dot(vertex) < 0) {
        console.error(".faceNormals[" + i + "] = Vec3(" + n.toString() + ") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.");

        for (let j = 0; j < this.faces[i].length; j++) {
          console.warn(".vertices[" + this.faces[i][j] + "] = Vec3(" + this.vertices[this.faces[i][j]].toString() + ")");
        }
      }
    }
  }
  /**
   * Compute the normal of a face from its vertices
   */


  getFaceNormal(i, target) {
    const f = this.faces[i];
    const va = this.vertices[f[0]];
    const vb = this.vertices[f[1]];
    const vc = this.vertices[f[2]];
    ConvexPolyhedron.computeNormal(va, vb, vc, target);
  }
  /**
   * Get face normal given 3 vertices
   */


  static computeNormal(va, vb, vc, target) {
    const cb = new Vec3();
    const ab = new Vec3();
    vb.vsub(va, ab);
    vc.vsub(vb, cb);
    cb.cross(ab, target);

    if (!target.isZero()) {
      target.normalize();
    }
  }
  /**
   * @param minDist Clamp distance
   * @param result The an array of contact point objects, see clipFaceAgainstHull
   */


  clipAgainstHull(posA, quatA, hullB, posB, quatB, separatingNormal, minDist, maxDist, result) {
    const WorldNormal = new Vec3();
    let closestFaceB = -1;
    let dmax = -Number.MAX_VALUE;

    for (let face = 0; face < hullB.faces.length; face++) {
      WorldNormal.copy(hullB.faceNormals[face]);
      quatB.vmult(WorldNormal, WorldNormal);
      const d = WorldNormal.dot(separatingNormal);

      if (d > dmax) {
        dmax = d;
        closestFaceB = face;
      }
    }

    const worldVertsB1 = [];

    for (let i = 0; i < hullB.faces[closestFaceB].length; i++) {
      const b = hullB.vertices[hullB.faces[closestFaceB][i]];
      const worldb = new Vec3();
      worldb.copy(b);
      quatB.vmult(worldb, worldb);
      posB.vadd(worldb, worldb);
      worldVertsB1.push(worldb);
    }

    if (closestFaceB >= 0) {
      this.clipFaceAgainstHull(separatingNormal, posA, quatA, worldVertsB1, minDist, maxDist, result);
    }
  }
  /**
   * Find the separating axis between this hull and another
   * @param target The target vector to save the axis in
   * @return Returns false if a separation is found, else true
   */


  findSeparatingAxis(hullB, posA, quatA, posB, quatB, target, faceListA, faceListB) {
    const faceANormalWS3 = new Vec3();
    const Worldnormal1 = new Vec3();
    const deltaC = new Vec3();
    const worldEdge0 = new Vec3();
    const worldEdge1 = new Vec3();
    const Cross = new Vec3();
    let dmin = Number.MAX_VALUE;
    const hullA = this;

    if (!hullA.uniqueAxes) {
      const numFacesA = faceListA ? faceListA.length : hullA.faces.length; // Test face normals from hullA

      for (let i = 0; i < numFacesA; i++) {
        const fi = faceListA ? faceListA[i] : i; // Get world face normal

        faceANormalWS3.copy(hullA.faceNormals[fi]);
        quatA.vmult(faceANormalWS3, faceANormalWS3);
        const d = hullA.testSepAxis(faceANormalWS3, hullB, posA, quatA, posB, quatB);

        if (d === false) {
          return false;
        }

        if (d < dmin) {
          dmin = d;
          target.copy(faceANormalWS3);
        }
      }
    } else {
      // Test unique axes
      for (let i = 0; i !== hullA.uniqueAxes.length; i++) {
        // Get world axis
        quatA.vmult(hullA.uniqueAxes[i], faceANormalWS3);
        const d = hullA.testSepAxis(faceANormalWS3, hullB, posA, quatA, posB, quatB);

        if (d === false) {
          return false;
        }

        if (d < dmin) {
          dmin = d;
          target.copy(faceANormalWS3);
        }
      }
    }

    if (!hullB.uniqueAxes) {
      // Test face normals from hullB
      const numFacesB = faceListB ? faceListB.length : hullB.faces.length;

      for (let i = 0; i < numFacesB; i++) {
        const fi = faceListB ? faceListB[i] : i;
        Worldnormal1.copy(hullB.faceNormals[fi]);
        quatB.vmult(Worldnormal1, Worldnormal1);
        const d = hullA.testSepAxis(Worldnormal1, hullB, posA, quatA, posB, quatB);

        if (d === false) {
          return false;
        }

        if (d < dmin) {
          dmin = d;
          target.copy(Worldnormal1);
        }
      }
    } else {
      // Test unique axes in B
      for (let i = 0; i !== hullB.uniqueAxes.length; i++) {
        quatB.vmult(hullB.uniqueAxes[i], Worldnormal1);
        const d = hullA.testSepAxis(Worldnormal1, hullB, posA, quatA, posB, quatB);

        if (d === false) {
          return false;
        }

        if (d < dmin) {
          dmin = d;
          target.copy(Worldnormal1);
        }
      }
    } // Test edges


    for (let e0 = 0; e0 !== hullA.uniqueEdges.length; e0++) {
      // Get world edge
      quatA.vmult(hullA.uniqueEdges[e0], worldEdge0);

      for (let e1 = 0; e1 !== hullB.uniqueEdges.length; e1++) {
        // Get world edge 2
        quatB.vmult(hullB.uniqueEdges[e1], worldEdge1);
        worldEdge0.cross(worldEdge1, Cross);

        if (!Cross.almostZero()) {
          Cross.normalize();
          const dist = hullA.testSepAxis(Cross, hullB, posA, quatA, posB, quatB);

          if (dist === false) {
            return false;
          }

          if (dist < dmin) {
            dmin = dist;
            target.copy(Cross);
          }
        }
      }
    }

    posB.vsub(posA, deltaC);

    if (deltaC.dot(target) > 0.0) {
      target.negate(target);
    }

    return true;
  }
  /**
   * Test separating axis against two hulls. Both hulls are projected onto the axis and the overlap size is returned if there is one.
   * @return The overlap depth, or FALSE if no penetration.
   */


  testSepAxis(axis, hullB, posA, quatA, posB, quatB) {
    const hullA = this;
    ConvexPolyhedron.project(hullA, axis, posA, quatA, maxminA);
    ConvexPolyhedron.project(hullB, axis, posB, quatB, maxminB);
    const maxA = maxminA[0];
    const minA = maxminA[1];
    const maxB = maxminB[0];
    const minB = maxminB[1];

    if (maxA < minB || maxB < minA) {
      return false; // Separated
    }

    const d0 = maxA - minB;
    const d1 = maxB - minA;
    const depth = d0 < d1 ? d0 : d1;
    return depth;
  }
  /**
   * calculateLocalInertia
   */


  calculateLocalInertia(mass, target) {
    // Approximate with box inertia
    // Exact inertia calculation is overkill, but see http://geometrictools.com/Documentation/PolyhedralMassProperties.pdf for the correct way to do it
    const aabbmax = new Vec3();
    const aabbmin = new Vec3();
    this.computeLocalAABB(aabbmin, aabbmax);
    const x = aabbmax.x - aabbmin.x;
    const y = aabbmax.y - aabbmin.y;
    const z = aabbmax.z - aabbmin.z;
    target.x = 1.0 / 12.0 * mass * (2 * y * 2 * y + 2 * z * 2 * z);
    target.y = 1.0 / 12.0 * mass * (2 * x * 2 * x + 2 * z * 2 * z);
    target.z = 1.0 / 12.0 * mass * (2 * y * 2 * y + 2 * x * 2 * x);
  }
  /**
   * @param face_i Index of the face
   */


  getPlaneConstantOfFace(face_i) {
    const f = this.faces[face_i];
    const n = this.faceNormals[face_i];
    const v = this.vertices[f[0]];
    const c = -n.dot(v);
    return c;
  }
  /**
   * Clip a face against a hull.
   * @param worldVertsB1 An array of Vec3 with vertices in the world frame.
   * @param minDist Distance clamping
   * @param Array result Array to store resulting contact points in. Will be objects with properties: point, depth, normal. These are represented in world coordinates.
   */


  clipFaceAgainstHull(separatingNormal, posA, quatA, worldVertsB1, minDist, maxDist, result) {
    const faceANormalWS = new Vec3();
    const edge0 = new Vec3();
    const WorldEdge0 = new Vec3();
    const worldPlaneAnormal1 = new Vec3();
    const planeNormalWS1 = new Vec3();
    const worldA1 = new Vec3();
    const localPlaneNormal = new Vec3();
    const planeNormalWS = new Vec3();
    const hullA = this;
    const worldVertsB2 = [];
    const pVtxIn = worldVertsB1;
    const pVtxOut = worldVertsB2;
    let closestFaceA = -1;
    let dmin = Number.MAX_VALUE; // Find the face with normal closest to the separating axis

    for (let face = 0; face < hullA.faces.length; face++) {
      faceANormalWS.copy(hullA.faceNormals[face]);
      quatA.vmult(faceANormalWS, faceANormalWS);
      const d = faceANormalWS.dot(separatingNormal);

      if (d < dmin) {
        dmin = d;
        closestFaceA = face;
      }
    }

    if (closestFaceA < 0) {
      return;
    } // Get the face and construct connected faces


    const polyA = hullA.faces[closestFaceA];
    polyA.connectedFaces = [];

    for (let i = 0; i < hullA.faces.length; i++) {
      for (let j = 0; j < hullA.faces[i].length; j++) {
        if (
        /* Sharing a vertex*/
        polyA.indexOf(hullA.faces[i][j]) !== -1 &&
        /* Not the one we are looking for connections from */
        i !== closestFaceA &&
        /* Not already added */
        polyA.connectedFaces.indexOf(i) === -1) {
          polyA.connectedFaces.push(i);
        }
      }
    } // Clip the polygon to the back of the planes of all faces of hull A,
    // that are adjacent to the witness face


    const numVerticesA = polyA.length;

    for (let i = 0; i < numVerticesA; i++) {
      const a = hullA.vertices[polyA[i]];
      const b = hullA.vertices[polyA[(i + 1) % numVerticesA]];
      a.vsub(b, edge0);
      WorldEdge0.copy(edge0);
      quatA.vmult(WorldEdge0, WorldEdge0);
      posA.vadd(WorldEdge0, WorldEdge0);
      worldPlaneAnormal1.copy(this.faceNormals[closestFaceA]);
      quatA.vmult(worldPlaneAnormal1, worldPlaneAnormal1);
      posA.vadd(worldPlaneAnormal1, worldPlaneAnormal1);
      WorldEdge0.cross(worldPlaneAnormal1, planeNormalWS1);
      planeNormalWS1.negate(planeNormalWS1);
      worldA1.copy(a);
      quatA.vmult(worldA1, worldA1);
      posA.vadd(worldA1, worldA1);
      const otherFace = polyA.connectedFaces[i];
      localPlaneNormal.copy(this.faceNormals[otherFace]);
      const localPlaneEq = this.getPlaneConstantOfFace(otherFace);
      planeNormalWS.copy(localPlaneNormal);
      quatA.vmult(planeNormalWS, planeNormalWS);
      const planeEqWS = localPlaneEq - planeNormalWS.dot(posA); // Clip face against our constructed plane

      this.clipFaceAgainstPlane(pVtxIn, pVtxOut, planeNormalWS, planeEqWS); // Throw away all clipped points, but save the remaining until next clip

      while (pVtxIn.length) {
        pVtxIn.shift();
      }

      while (pVtxOut.length) {
        pVtxIn.push(pVtxOut.shift());
      }
    } // only keep contact points that are behind the witness face


    localPlaneNormal.copy(this.faceNormals[closestFaceA]);
    const localPlaneEq = this.getPlaneConstantOfFace(closestFaceA);
    planeNormalWS.copy(localPlaneNormal);
    quatA.vmult(planeNormalWS, planeNormalWS);
    const planeEqWS = localPlaneEq - planeNormalWS.dot(posA);

    for (let i = 0; i < pVtxIn.length; i++) {
      let depth = planeNormalWS.dot(pVtxIn[i]) + planeEqWS; // ???

      if (depth <= minDist) {
        console.log("clamped: depth=" + depth + " to minDist=" + minDist);
        depth = minDist;
      }

      if (depth <= maxDist) {
        const point = pVtxIn[i];

        if (depth <= 1e-6) {
          const p = {
            point,
            normal: planeNormalWS,
            depth
          };
          result.push(p);
        }
      }
    }
  }
  /**
   * Clip a face in a hull against the back of a plane.
   * @param planeConstant The constant in the mathematical plane equation
   */


  clipFaceAgainstPlane(inVertices, outVertices, planeNormal, planeConstant) {
    let n_dot_first;
    let n_dot_last;
    const numVerts = inVertices.length;

    if (numVerts < 2) {
      return outVertices;
    }

    let firstVertex = inVertices[inVertices.length - 1];
    let lastVertex = inVertices[0];
    n_dot_first = planeNormal.dot(firstVertex) + planeConstant;

    for (let vi = 0; vi < numVerts; vi++) {
      lastVertex = inVertices[vi];
      n_dot_last = planeNormal.dot(lastVertex) + planeConstant;

      if (n_dot_first < 0) {
        if (n_dot_last < 0) {
          // Start < 0, end < 0, so output lastVertex
          const newv = new Vec3();
          newv.copy(lastVertex);
          outVertices.push(newv);
        } else {
          // Start < 0, end >= 0, so output intersection
          const newv = new Vec3();
          firstVertex.lerp(lastVertex, n_dot_first / (n_dot_first - n_dot_last), newv);
          outVertices.push(newv);
        }
      } else {
        if (n_dot_last < 0) {
          // Start >= 0, end < 0 so output intersection and end
          const newv = new Vec3();
          firstVertex.lerp(lastVertex, n_dot_first / (n_dot_first - n_dot_last), newv);
          outVertices.push(newv);
          outVertices.push(lastVertex);
        }
      }

      firstVertex = lastVertex;
      n_dot_first = n_dot_last;
    }

    return outVertices;
  }
  /**
   * Updates `.worldVertices` and sets `.worldVerticesNeedsUpdate` to false.
   */


  computeWorldVertices(position, quat) {
    while (this.worldVertices.length < this.vertices.length) {
      this.worldVertices.push(new Vec3());
    }

    const verts = this.vertices;
    const worldVerts = this.worldVertices;

    for (let i = 0; i !== this.vertices.length; i++) {
      quat.vmult(verts[i], worldVerts[i]);
      position.vadd(worldVerts[i], worldVerts[i]);
    }

    this.worldVerticesNeedsUpdate = false;
  }

  computeLocalAABB(aabbmin, aabbmax) {
    const vertices = this.vertices;
    aabbmin.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
    aabbmax.set(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);

    for (let i = 0; i < this.vertices.length; i++) {
      const v = vertices[i];

      if (v.x < aabbmin.x) {
        aabbmin.x = v.x;
      } else if (v.x > aabbmax.x) {
        aabbmax.x = v.x;
      }

      if (v.y < aabbmin.y) {
        aabbmin.y = v.y;
      } else if (v.y > aabbmax.y) {
        aabbmax.y = v.y;
      }

      if (v.z < aabbmin.z) {
        aabbmin.z = v.z;
      } else if (v.z > aabbmax.z) {
        aabbmax.z = v.z;
      }
    }
  }
  /**
   * Updates `worldVertices` and sets `worldVerticesNeedsUpdate` to false.
   */


  computeWorldFaceNormals(quat) {
    const N = this.faceNormals.length;

    while (this.worldFaceNormals.length < N) {
      this.worldFaceNormals.push(new Vec3());
    }

    const normals = this.faceNormals;
    const worldNormals = this.worldFaceNormals;

    for (let i = 0; i !== N; i++) {
      quat.vmult(normals[i], worldNormals[i]);
    }

    this.worldFaceNormalsNeedsUpdate = false;
  }
  /**
   * updateBoundingSphereRadius
   */


  updateBoundingSphereRadius() {
    // Assume points are distributed with local (0,0,0) as center
    let max2 = 0;
    const verts = this.vertices;

    for (let i = 0; i !== verts.length; i++) {
      const norm2 = verts[i].lengthSquared();

      if (norm2 > max2) {
        max2 = norm2;
      }
    }

    this.boundingSphereRadius = Math.sqrt(max2);
  }
  /**
   * calculateWorldAABB
   */


  calculateWorldAABB(pos, quat, min, max) {
    const verts = this.vertices;
    let minx;
    let miny;
    let minz;
    let maxx;
    let maxy;
    let maxz;
    let tempWorldVertex = new Vec3();

    for (let i = 0; i < verts.length; i++) {
      tempWorldVertex.copy(verts[i]);
      quat.vmult(tempWorldVertex, tempWorldVertex);
      pos.vadd(tempWorldVertex, tempWorldVertex);
      const v = tempWorldVertex;

      if (minx === undefined || v.x < minx) {
        minx = v.x;
      }

      if (maxx === undefined || v.x > maxx) {
        maxx = v.x;
      }

      if (miny === undefined || v.y < miny) {
        miny = v.y;
      }

      if (maxy === undefined || v.y > maxy) {
        maxy = v.y;
      }

      if (minz === undefined || v.z < minz) {
        minz = v.z;
      }

      if (maxz === undefined || v.z > maxz) {
        maxz = v.z;
      }
    }

    min.set(minx, miny, minz);
    max.set(maxx, maxy, maxz);
  }
  /**
   * Get approximate convex volume
   */


  volume() {
    return 4.0 * Math.PI * this.boundingSphereRadius / 3.0;
  }
  /**
   * Get an average of all the vertices positions
   */


  getAveragePointLocal(target) {
    if (target === void 0) {
      target = new Vec3();
    }

    const verts = this.vertices;

    for (let i = 0; i < verts.length; i++) {
      target.vadd(verts[i], target);
    }

    target.scale(1 / verts.length, target);
    return target;
  }
  /**
   * Transform all local points. Will change the .vertices
   */


  transformAllPoints(offset, quat) {
    const n = this.vertices.length;
    const verts = this.vertices; // Apply rotation

    if (quat) {
      // Rotate vertices
      for (let i = 0; i < n; i++) {
        const v = verts[i];
        quat.vmult(v, v);
      } // Rotate face normals


      for (let i = 0; i < this.faceNormals.length; i++) {
        const v = this.faceNormals[i];
        quat.vmult(v, v);
      }
      /*
            // Rotate edges
            for(let i=0; i<this.uniqueEdges.length; i++){
                const v = this.uniqueEdges[i];
                quat.vmult(v,v);
            }*/

    } // Apply offset


    if (offset) {
      for (let i = 0; i < n; i++) {
        const v = verts[i];
        v.vadd(offset, v);
      }
    }
  }
  /**
   * Checks whether p is inside the polyhedra. Must be in local coords.
   * The point lies outside of the convex hull of the other points if and only if the direction
   * of all the vectors from it to those other points are on less than one half of a sphere around it.
   * @param p A point given in local coordinates
   */


  pointIsInside(p) {
    const verts = this.vertices;
    const faces = this.faces;
    const normals = this.faceNormals;
    const pointInside = new Vec3();
    this.getAveragePointLocal(pointInside);

    for (let i = 0; i < this.faces.length; i++) {
      let n = normals[i];
      const v = verts[faces[i][0]]; // We only need one point in the face
      // This dot product determines which side of the edge the point is

      const vToP = new Vec3();
      p.vsub(v, vToP);
      const r1 = n.dot(vToP);
      const vToPointInside = new Vec3();
      pointInside.vsub(v, vToPointInside);
      const r2 = n.dot(vToPointInside);

      if (r1 < 0 && r2 > 0 || r1 > 0 && r2 < 0) {
        return false; // Encountered some other sign. Exit.
      }
    } // If we got here, all dot products were of the same sign.


    return -1;
  }
  /**
   * Get max and min dot product of a convex hull at position (pos,quat) projected onto an axis.
   * Results are saved in the array maxmin.
   * @param result result[0] and result[1] will be set to maximum and minimum, respectively.
   */


  static project(shape, axis, pos, quat, result) {
    const n = shape.vertices.length;
    const localAxis = project_localAxis;
    let max = 0;
    let min = 0;
    const localOrigin = project_localOrigin;
    const vs = shape.vertices;
    localOrigin.setZero(); // Transform the axis to local

    Transform.vectorToLocalFrame(pos, quat, axis, localAxis);
    Transform.pointToLocalFrame(pos, quat, localOrigin, localOrigin);
    const add = localOrigin.dot(localAxis);
    min = max = vs[0].dot(localAxis);

    for (let i = 1; i < n; i++) {
      const val = vs[i].dot(localAxis);

      if (val > max) {
        max = val;
      }

      if (val < min) {
        min = val;
      }
    }

    min -= add;
    max -= add;

    if (min > max) {
      // Inconsistent - swap
      const temp = min;
      min = max;
      max = temp;
    } // Output


    result[0] = max;
    result[1] = min;
  }

}

const maxminA = [];
const maxminB = [];
const project_localAxis = new Vec3();
const project_localOrigin = new Vec3();
/**
 * A 3d box shape.
 * @example
 *     const size = 1
 *     const halfExtents = new CANNON.Vec3(size, size, size)
 *     const boxShape = new CANNON.Box(halfExtents)
 *     const boxBody = new CANNON.Body({ mass: 1, shape: boxShape })
 *     world.addBody(boxBody)
 */

class Box extends Shape {
  /**
   * The half extents of the box.
   */

  /**
   * Used by the contact generator to make contacts with other convex polyhedra for example.
   */
  constructor(halfExtents) {
    super({
      type: Shape.types.BOX
    });
    this.halfExtents = void 0;
    this.convexPolyhedronRepresentation = void 0;
    this.halfExtents = halfExtents;
    this.convexPolyhedronRepresentation = null;
    this.updateConvexPolyhedronRepresentation();
    this.updateBoundingSphereRadius();
  }
  /**
   * Updates the local convex polyhedron representation used for some collisions.
   */


  updateConvexPolyhedronRepresentation() {
    const sx = this.halfExtents.x;
    const sy = this.halfExtents.y;
    const sz = this.halfExtents.z;
    const V = Vec3;
    const vertices = [new V(-sx, -sy, -sz), new V(sx, -sy, -sz), new V(sx, sy, -sz), new V(-sx, sy, -sz), new V(-sx, -sy, sz), new V(sx, -sy, sz), new V(sx, sy, sz), new V(-sx, sy, sz)];
    const faces = [[3, 2, 1, 0], // -z
    [4, 5, 6, 7], // +z
    [5, 4, 0, 1], // -y
    [2, 3, 7, 6], // +y
    [0, 4, 7, 3], // -x
    [1, 2, 6, 5] // +x
    ];
    const axes = [new V(0, 0, 1), new V(0, 1, 0), new V(1, 0, 0)];
    const h = new ConvexPolyhedron({
      vertices,
      faces,
      axes
    });
    this.convexPolyhedronRepresentation = h;
    h.material = this.material;
  }
  /**
   * Calculate the inertia of the box.
   */


  calculateLocalInertia(mass, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    Box.calculateInertia(this.halfExtents, mass, target);
    return target;
  }

  static calculateInertia(halfExtents, mass, target) {
    const e = halfExtents;
    target.x = 1.0 / 12.0 * mass * (2 * e.y * 2 * e.y + 2 * e.z * 2 * e.z);
    target.y = 1.0 / 12.0 * mass * (2 * e.x * 2 * e.x + 2 * e.z * 2 * e.z);
    target.z = 1.0 / 12.0 * mass * (2 * e.y * 2 * e.y + 2 * e.x * 2 * e.x);
  }
  /**
   * Get the box 6 side normals
   * @param sixTargetVectors An array of 6 vectors, to store the resulting side normals in.
   * @param quat Orientation to apply to the normal vectors. If not provided, the vectors will be in respect to the local frame.
   */


  getSideNormals(sixTargetVectors, quat) {
    const sides = sixTargetVectors;
    const ex = this.halfExtents;
    sides[0].set(ex.x, 0, 0);
    sides[1].set(0, ex.y, 0);
    sides[2].set(0, 0, ex.z);
    sides[3].set(-ex.x, 0, 0);
    sides[4].set(0, -ex.y, 0);
    sides[5].set(0, 0, -ex.z);

    if (quat !== undefined) {
      for (let i = 0; i !== sides.length; i++) {
        quat.vmult(sides[i], sides[i]);
      }
    }

    return sides;
  }
  /**
   * Returns the volume of the box.
   */


  volume() {
    return 8.0 * this.halfExtents.x * this.halfExtents.y * this.halfExtents.z;
  }
  /**
   * updateBoundingSphereRadius
   */


  updateBoundingSphereRadius() {
    this.boundingSphereRadius = this.halfExtents.length();
  }
  /**
   * forEachWorldCorner
   */


  forEachWorldCorner(pos, quat, callback) {
    const e = this.halfExtents;
    const corners = [[e.x, e.y, e.z], [-e.x, e.y, e.z], [-e.x, -e.y, e.z], [-e.x, -e.y, -e.z], [e.x, -e.y, -e.z], [e.x, e.y, -e.z], [-e.x, e.y, -e.z], [e.x, -e.y, e.z]];

    for (let i = 0; i < corners.length; i++) {
      worldCornerTempPos.set(corners[i][0], corners[i][1], corners[i][2]);
      quat.vmult(worldCornerTempPos, worldCornerTempPos);
      pos.vadd(worldCornerTempPos, worldCornerTempPos);
      callback(worldCornerTempPos.x, worldCornerTempPos.y, worldCornerTempPos.z);
    }
  }
  /**
   * calculateWorldAABB
   */


  calculateWorldAABB(pos, quat, min, max) {
    const e = this.halfExtents;
    worldCornersTemp[0].set(e.x, e.y, e.z);
    worldCornersTemp[1].set(-e.x, e.y, e.z);
    worldCornersTemp[2].set(-e.x, -e.y, e.z);
    worldCornersTemp[3].set(-e.x, -e.y, -e.z);
    worldCornersTemp[4].set(e.x, -e.y, -e.z);
    worldCornersTemp[5].set(e.x, e.y, -e.z);
    worldCornersTemp[6].set(-e.x, e.y, -e.z);
    worldCornersTemp[7].set(e.x, -e.y, e.z);
    const wc = worldCornersTemp[0];
    quat.vmult(wc, wc);
    pos.vadd(wc, wc);
    max.copy(wc);
    min.copy(wc);

    for (let i = 1; i < 8; i++) {
      const wc = worldCornersTemp[i];
      quat.vmult(wc, wc);
      pos.vadd(wc, wc);
      const x = wc.x;
      const y = wc.y;
      const z = wc.z;

      if (x > max.x) {
        max.x = x;
      }

      if (y > max.y) {
        max.y = y;
      }

      if (z > max.z) {
        max.z = z;
      }

      if (x < min.x) {
        min.x = x;
      }

      if (y < min.y) {
        min.y = y;
      }

      if (z < min.z) {
        min.z = z;
      }
    } // Get each axis max
    // min.set(Infinity,Infinity,Infinity);
    // max.set(-Infinity,-Infinity,-Infinity);
    // this.forEachWorldCorner(pos,quat,function(x,y,z){
    //     if(x > max.x){
    //         max.x = x;
    //     }
    //     if(y > max.y){
    //         max.y = y;
    //     }
    //     if(z > max.z){
    //         max.z = z;
    //     }
    //     if(x < min.x){
    //         min.x = x;
    //     }
    //     if(y < min.y){
    //         min.y = y;
    //     }
    //     if(z < min.z){
    //         min.z = z;
    //     }
    // });

  }

}

const worldCornerTempPos = new Vec3();
const worldCornersTemp = [new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];
/**
 * BODY_TYPES
 */

const BODY_TYPES = {
  /** DYNAMIC */
  DYNAMIC: 1,

  /** STATIC */
  STATIC: 2,

  /** KINEMATIC */
  KINEMATIC: 4
};
/**
 * BodyType
 */

/**
 * BODY_SLEEP_STATES
 */

const BODY_SLEEP_STATES = {
  /** AWAKE */
  AWAKE: 0,

  /** SLEEPY */
  SLEEPY: 1,

  /** SLEEPING */
  SLEEPING: 2
};
/**
 * BodySleepState
 */

/**
 * Base class for all body types.
 * @example
 *     const shape = new CANNON.Sphere(1)
 *     const body = new CANNON.Body({
 *       mass: 1,
 *       shape,
 *     })
 *     world.addBody(body)
 */

class Body extends EventTarget {
  /**
   * Dispatched after two bodies collide. This event is dispatched on each
   * of the two bodies involved in the collision.
   * @event collide
   * @param body The body that was involved in the collision.
   * @param contact The details of the collision.
   */

  /**
   * A dynamic body is fully simulated. Can be moved manually by the user, but normally they move according to forces. A dynamic body can collide with all body types. A dynamic body always has finite, non-zero mass.
   */

  /**
   * A static body does not move during simulation and behaves as if it has infinite mass. Static bodies can be moved manually by setting the position of the body. The velocity of a static body is always zero. Static bodies do not collide with other static or kinematic bodies.
   */

  /**
   * A kinematic body moves under simulation according to its velocity. They do not respond to forces. They can be moved manually, but normally a kinematic body is moved by setting its velocity. A kinematic body behaves as if it has infinite mass. Kinematic bodies do not collide with other static or kinematic bodies.
   */

  /**
   * AWAKE
   */

  /**
   * SLEEPY
   */

  /**
   * SLEEPING
   */

  /**
   * Dispatched after a sleeping body has woken up.
   * @event wakeup
   */

  /**
   * Dispatched after a body has gone in to the sleepy state.
   * @event sleepy
   */

  /**
   * Dispatched after a body has fallen asleep.
   * @event sleep
   */

  /**
   * Identifier of the body.
   */

  /**
   * Position of body in World.bodies. Updated by World and used in ArrayCollisionMatrix.
   */

  /**
   * Reference to the world the body is living in.
   */

  /**
   * Callback function that is used BEFORE stepping the system. Use it to apply forces, for example. Inside the function, "this" will refer to this Body object. Deprecated - use World events instead.
   * @deprecated Use World events instead
   */

  /**
   * Callback function that is used AFTER stepping the system. Inside the function, "this" will refer to this Body object. Deprecated - use World events instead.
   * @deprecated Use World events instead
   */

  /**
   * The collision group the body belongs to.
   * @default 1
   */

  /**
   * The collision group the body can collide with.
   * @default -1
   */

  /**
   * Whether to produce contact forces when in contact with other bodies. Note that contacts will be generated, but they will be disabled - i.e. "collide" events will be raised, but forces will not be altered.
   */

  /**
   * World space position of the body.
   */

  /**
   * Interpolated position of the body.
   */

  /**
   * Initial position of the body.
   */

  /**
   * World space velocity of the body.
   */

  /**
   * Initial velocity of the body.
   */

  /**
   * Linear force on the body in world space.
   */

  /**
   * The mass of the body.
   * @default 0
   */

  /**
   * The physics material of the body. It defines the body interaction with other bodies.
   */

  /**
   * How much to damp the body velocity each step. It can go from 0 to 1.
   * @default 0.01
   */

  /**
   * One of: `Body.DYNAMIC`, `Body.STATIC` and `Body.KINEMATIC`.
   */

  /**
   * If true, the body will automatically fall to sleep.
   * @default true
   */

  /**
   * Current sleep state.
   */

  /**
   * If the speed (the norm of the velocity) is smaller than this value, the body is considered sleepy.
   * @default 0.1
   */

  /**
   * If the body has been sleepy for this sleepTimeLimit seconds, it is considered sleeping.
   * @default 1
   */

  /**
   * World space rotational force on the body, around center of mass.
   */

  /**
   * World space orientation of the body.
   */

  /**
   * Initial quaternion of the body.
   */

  /**
   * Interpolated orientation of the body.
   */

  /**
   * Angular velocity of the body, in world space. Think of the angular velocity as a vector, which the body rotates around. The length of this vector determines how fast (in radians per second) the body rotates.
   */

  /**
   * Initial angular velocity of the body.
   */

  /**
   * List of Shapes that have been added to the body.
   */

  /**
   * Position of each Shape in the body, given in local Body space.
   */

  /**
   * Orientation of each Shape, given in local Body space.
   */

  /**
   * The inertia of the body.
   */

  /**
   * Set to true if you don't want the body to rotate. Make sure to run .updateMassProperties() if you change this after the body creation.
   * @default false
   */

  /**
   * How much to damp the body angular velocity each step. It can go from 0 to 1.
   * @default 0.01
   */

  /**
   * Use this property to limit the motion along any world axis. (1,1,1) will allow motion along all axes while (0,0,0) allows none.
   */

  /**
   * Use this property to limit the rotational motion along any world axis. (1,1,1) will allow rotation along all axes while (0,0,0) allows none.
   */

  /**
   * World space bounding box of the body and its shapes.
   */

  /**
   * Indicates if the AABB needs to be updated before use.
   */

  /**
   * Total bounding radius of the Body including its shapes, relative to body.position.
   */

  /**
   * When true the body behaves like a trigger. It does not collide
   * with other bodies but collision events are still triggered.
   * @default false
   */
  constructor(options) {
    if (options === void 0) {
      options = {};
    }

    super();
    this.id = void 0;
    this.index = void 0;
    this.world = void 0;
    this.preStep = void 0;
    this.postStep = void 0;
    this.vlambda = void 0;
    this.collisionFilterGroup = void 0;
    this.collisionFilterMask = void 0;
    this.collisionResponse = void 0;
    this.position = void 0;
    this.previousPosition = void 0;
    this.interpolatedPosition = void 0;
    this.initPosition = void 0;
    this.velocity = void 0;
    this.initVelocity = void 0;
    this.force = void 0;
    this.mass = void 0;
    this.invMass = void 0;
    this.material = void 0;
    this.linearDamping = void 0;
    this.type = void 0;
    this.allowSleep = void 0;
    this.sleepState = void 0;
    this.sleepSpeedLimit = void 0;
    this.sleepTimeLimit = void 0;
    this.timeLastSleepy = void 0;
    this.wakeUpAfterNarrowphase = void 0;
    this.torque = void 0;
    this.quaternion = void 0;
    this.initQuaternion = void 0;
    this.previousQuaternion = void 0;
    this.interpolatedQuaternion = void 0;
    this.angularVelocity = void 0;
    this.initAngularVelocity = void 0;
    this.shapes = void 0;
    this.shapeOffsets = void 0;
    this.shapeOrientations = void 0;
    this.inertia = void 0;
    this.invInertia = void 0;
    this.invInertiaWorld = void 0;
    this.invMassSolve = void 0;
    this.invInertiaSolve = void 0;
    this.invInertiaWorldSolve = void 0;
    this.fixedRotation = void 0;
    this.angularDamping = void 0;
    this.linearFactor = void 0;
    this.angularFactor = void 0;
    this.aabb = void 0;
    this.aabbNeedsUpdate = void 0;
    this.boundingRadius = void 0;
    this.wlambda = void 0;
    this.isTrigger = void 0;
    this.id = Body.idCounter++;
    this.index = -1;
    this.world = null;
    this.preStep = null;
    this.postStep = null;
    this.vlambda = new Vec3();
    this.collisionFilterGroup = typeof options.collisionFilterGroup === 'number' ? options.collisionFilterGroup : 1;
    this.collisionFilterMask = typeof options.collisionFilterMask === 'number' ? options.collisionFilterMask : -1;
    this.collisionResponse = typeof options.collisionResponse === 'boolean' ? options.collisionResponse : true;
    this.position = new Vec3();
    this.previousPosition = new Vec3();
    this.interpolatedPosition = new Vec3();
    this.initPosition = new Vec3();

    if (options.position) {
      this.position.copy(options.position);
      this.previousPosition.copy(options.position);
      this.interpolatedPosition.copy(options.position);
      this.initPosition.copy(options.position);
    }

    this.velocity = new Vec3();

    if (options.velocity) {
      this.velocity.copy(options.velocity);
    }

    this.initVelocity = new Vec3();
    this.force = new Vec3();
    const mass = typeof options.mass === 'number' ? options.mass : 0;
    this.mass = mass;
    this.invMass = mass > 0 ? 1.0 / mass : 0;
    this.material = options.material || null;
    this.linearDamping = typeof options.linearDamping === 'number' ? options.linearDamping : 0.01;
    this.type = mass <= 0.0 ? Body.STATIC : Body.DYNAMIC;

    if (typeof options.type === typeof Body.STATIC) {
      this.type = options.type;
    }

    this.allowSleep = typeof options.allowSleep !== 'undefined' ? options.allowSleep : true;
    this.sleepState = Body.AWAKE;
    this.sleepSpeedLimit = typeof options.sleepSpeedLimit !== 'undefined' ? options.sleepSpeedLimit : 0.1;
    this.sleepTimeLimit = typeof options.sleepTimeLimit !== 'undefined' ? options.sleepTimeLimit : 1;
    this.timeLastSleepy = 0;
    this.wakeUpAfterNarrowphase = false;
    this.torque = new Vec3();
    this.quaternion = new Quaternion();
    this.initQuaternion = new Quaternion();
    this.previousQuaternion = new Quaternion();
    this.interpolatedQuaternion = new Quaternion();

    if (options.quaternion) {
      this.quaternion.copy(options.quaternion);
      this.initQuaternion.copy(options.quaternion);
      this.previousQuaternion.copy(options.quaternion);
      this.interpolatedQuaternion.copy(options.quaternion);
    }

    this.angularVelocity = new Vec3();

    if (options.angularVelocity) {
      this.angularVelocity.copy(options.angularVelocity);
    }

    this.initAngularVelocity = new Vec3();
    this.shapes = [];
    this.shapeOffsets = [];
    this.shapeOrientations = [];
    this.inertia = new Vec3();
    this.invInertia = new Vec3();
    this.invInertiaWorld = new Mat3();
    this.invMassSolve = 0;
    this.invInertiaSolve = new Vec3();
    this.invInertiaWorldSolve = new Mat3();
    this.fixedRotation = typeof options.fixedRotation !== 'undefined' ? options.fixedRotation : false;
    this.angularDamping = typeof options.angularDamping !== 'undefined' ? options.angularDamping : 0.01;
    this.linearFactor = new Vec3(1, 1, 1);

    if (options.linearFactor) {
      this.linearFactor.copy(options.linearFactor);
    }

    this.angularFactor = new Vec3(1, 1, 1);

    if (options.angularFactor) {
      this.angularFactor.copy(options.angularFactor);
    }

    this.aabb = new AABB();
    this.aabbNeedsUpdate = true;
    this.boundingRadius = 0;
    this.wlambda = new Vec3();
    this.isTrigger = Boolean(options.isTrigger);

    if (options.shape) {
      this.addShape(options.shape);
    }

    this.updateMassProperties();
  }
  /**
   * Wake the body up.
   */


  wakeUp() {
    const prevState = this.sleepState;
    this.sleepState = Body.AWAKE;
    this.wakeUpAfterNarrowphase = false;

    if (prevState === Body.SLEEPING) {
      this.dispatchEvent(Body.wakeupEvent);
    }
  }
  /**
   * Force body sleep
   */


  sleep() {
    this.sleepState = Body.SLEEPING;
    this.velocity.set(0, 0, 0);
    this.angularVelocity.set(0, 0, 0);
    this.wakeUpAfterNarrowphase = false;
  }
  /**
   * Called every timestep to update internal sleep timer and change sleep state if needed.
   * @param time The world time in seconds
   */


  sleepTick(time) {
    if (this.allowSleep) {
      const sleepState = this.sleepState;
      const speedSquared = this.velocity.lengthSquared() + this.angularVelocity.lengthSquared();
      const speedLimitSquared = this.sleepSpeedLimit ** 2;

      if (sleepState === Body.AWAKE && speedSquared < speedLimitSquared) {
        this.sleepState = Body.SLEEPY; // Sleepy

        this.timeLastSleepy = time;
        this.dispatchEvent(Body.sleepyEvent);
      } else if (sleepState === Body.SLEEPY && speedSquared > speedLimitSquared) {
        this.wakeUp(); // Wake up
      } else if (sleepState === Body.SLEEPY && time - this.timeLastSleepy > this.sleepTimeLimit) {
        this.sleep(); // Sleeping

        this.dispatchEvent(Body.sleepEvent);
      }
    }
  }
  /**
   * If the body is sleeping, it should be immovable / have infinite mass during solve. We solve it by having a separate "solve mass".
   */


  updateSolveMassProperties() {
    if (this.sleepState === Body.SLEEPING || this.type === Body.KINEMATIC) {
      this.invMassSolve = 0;
      this.invInertiaSolve.setZero();
      this.invInertiaWorldSolve.setZero();
    } else {
      this.invMassSolve = this.invMass;
      this.invInertiaSolve.copy(this.invInertia);
      this.invInertiaWorldSolve.copy(this.invInertiaWorld);
    }
  }
  /**
   * Convert a world point to local body frame.
   */


  pointToLocalFrame(worldPoint, result) {
    if (result === void 0) {
      result = new Vec3();
    }

    worldPoint.vsub(this.position, result);
    this.quaternion.conjugate().vmult(result, result);
    return result;
  }
  /**
   * Convert a world vector to local body frame.
   */


  vectorToLocalFrame(worldVector, result) {
    if (result === void 0) {
      result = new Vec3();
    }

    this.quaternion.conjugate().vmult(worldVector, result);
    return result;
  }
  /**
   * Convert a local body point to world frame.
   */


  pointToWorldFrame(localPoint, result) {
    if (result === void 0) {
      result = new Vec3();
    }

    this.quaternion.vmult(localPoint, result);
    result.vadd(this.position, result);
    return result;
  }
  /**
   * Convert a local body point to world frame.
   */


  vectorToWorldFrame(localVector, result) {
    if (result === void 0) {
      result = new Vec3();
    }

    this.quaternion.vmult(localVector, result);
    return result;
  }
  /**
   * Add a shape to the body with a local offset and orientation.
   * @return The body object, for chainability.
   */


  addShape(shape, _offset, _orientation) {
    const offset = new Vec3();
    const orientation = new Quaternion();

    if (_offset) {
      offset.copy(_offset);
    }

    if (_orientation) {
      orientation.copy(_orientation);
    }

    this.shapes.push(shape);
    this.shapeOffsets.push(offset);
    this.shapeOrientations.push(orientation);
    this.updateMassProperties();
    this.updateBoundingRadius();
    this.aabbNeedsUpdate = true;
    shape.body = this;
    return this;
  }
  /**
   * Remove a shape from the body.
   * @return The body object, for chainability.
   */


  removeShape(shape) {
    const index = this.shapes.indexOf(shape);

    if (index === -1) {
      console.warn('Shape does not belong to the body');
      return this;
    }

    this.shapes.splice(index, 1);
    this.shapeOffsets.splice(index, 1);
    this.shapeOrientations.splice(index, 1);
    this.updateMassProperties();
    this.updateBoundingRadius();
    this.aabbNeedsUpdate = true;
    shape.body = null;
    return this;
  }
  /**
   * Update the bounding radius of the body. Should be done if any of the shapes are changed.
   */


  updateBoundingRadius() {
    const shapes = this.shapes;
    const shapeOffsets = this.shapeOffsets;
    const N = shapes.length;
    let radius = 0;

    for (let i = 0; i !== N; i++) {
      const shape = shapes[i];
      shape.updateBoundingSphereRadius();
      const offset = shapeOffsets[i].length();
      const r = shape.boundingSphereRadius;

      if (offset + r > radius) {
        radius = offset + r;
      }
    }

    this.boundingRadius = radius;
  }
  /**
   * Updates the .aabb
   */


  updateAABB() {
    const shapes = this.shapes;
    const shapeOffsets = this.shapeOffsets;
    const shapeOrientations = this.shapeOrientations;
    const N = shapes.length;
    const offset = tmpVec;
    const orientation = tmpQuat;
    const bodyQuat = this.quaternion;
    const aabb = this.aabb;
    const shapeAABB = updateAABB_shapeAABB;

    for (let i = 0; i !== N; i++) {
      const shape = shapes[i]; // Get shape world position

      bodyQuat.vmult(shapeOffsets[i], offset);
      offset.vadd(this.position, offset); // Get shape world quaternion

      bodyQuat.mult(shapeOrientations[i], orientation); // Get shape AABB

      shape.calculateWorldAABB(offset, orientation, shapeAABB.lowerBound, shapeAABB.upperBound);

      if (i === 0) {
        aabb.copy(shapeAABB);
      } else {
        aabb.extend(shapeAABB);
      }
    }

    this.aabbNeedsUpdate = false;
  }
  /**
   * Update `.inertiaWorld` and `.invInertiaWorld`
   */


  updateInertiaWorld(force) {
    const I = this.invInertia;
    if (I.x === I.y && I.y === I.z && !force) ;else {
      const m1 = uiw_m1;
      const m2 = uiw_m2;
      m1.setRotationFromQuaternion(this.quaternion);
      m1.transpose(m2);
      m1.scale(I, m1);
      m1.mmult(m2, this.invInertiaWorld);
    }
  }
  /**
   * Apply force to a point of the body. This could for example be a point on the Body surface.
   * Applying force this way will add to Body.force and Body.torque.
   * @param force The amount of force to add.
   * @param relativePoint A point relative to the center of mass to apply the force on.
   */


  applyForce(force, relativePoint) {
    if (relativePoint === void 0) {
      relativePoint = new Vec3();
    }

    // Needed?
    if (this.type !== Body.DYNAMIC) {
      return;
    }

    if (this.sleepState === Body.SLEEPING) {
      this.wakeUp();
    } // Compute produced rotational force


    const rotForce = Body_applyForce_rotForce;
    relativePoint.cross(force, rotForce); // Add linear force

    this.force.vadd(force, this.force); // Add rotational force

    this.torque.vadd(rotForce, this.torque);
  }
  /**
   * Apply force to a local point in the body.
   * @param force The force vector to apply, defined locally in the body frame.
   * @param localPoint A local point in the body to apply the force on.
   */


  applyLocalForce(localForce, localPoint) {
    if (localPoint === void 0) {
      localPoint = new Vec3();
    }

    if (this.type !== Body.DYNAMIC) {
      return;
    }

    const worldForce = Body_applyLocalForce_worldForce;
    const relativePointWorld = Body_applyLocalForce_relativePointWorld; // Transform the force vector to world space

    this.vectorToWorldFrame(localForce, worldForce);
    this.vectorToWorldFrame(localPoint, relativePointWorld);
    this.applyForce(worldForce, relativePointWorld);
  }
  /**
   * Apply torque to the body.
   * @param torque The amount of torque to add.
   */


  applyTorque(torque) {
    if (this.type !== Body.DYNAMIC) {
      return;
    }

    if (this.sleepState === Body.SLEEPING) {
      this.wakeUp();
    } // Add rotational force


    this.torque.vadd(torque, this.torque);
  }
  /**
   * Apply impulse to a point of the body. This could for example be a point on the Body surface.
   * An impulse is a force added to a body during a short period of time (impulse = force * time).
   * Impulses will be added to Body.velocity and Body.angularVelocity.
   * @param impulse The amount of impulse to add.
   * @param relativePoint A point relative to the center of mass to apply the force on.
   */


  applyImpulse(impulse, relativePoint) {
    if (relativePoint === void 0) {
      relativePoint = new Vec3();
    }

    if (this.type !== Body.DYNAMIC) {
      return;
    }

    if (this.sleepState === Body.SLEEPING) {
      this.wakeUp();
    } // Compute point position relative to the body center


    const r = relativePoint; // Compute produced central impulse velocity

    const velo = Body_applyImpulse_velo;
    velo.copy(impulse);
    velo.scale(this.invMass, velo); // Add linear impulse

    this.velocity.vadd(velo, this.velocity); // Compute produced rotational impulse velocity

    const rotVelo = Body_applyImpulse_rotVelo;
    r.cross(impulse, rotVelo);
    /*
     rotVelo.x *= this.invInertia.x;
     rotVelo.y *= this.invInertia.y;
     rotVelo.z *= this.invInertia.z;
     */

    this.invInertiaWorld.vmult(rotVelo, rotVelo); // Add rotational Impulse

    this.angularVelocity.vadd(rotVelo, this.angularVelocity);
  }
  /**
   * Apply locally-defined impulse to a local point in the body.
   * @param force The force vector to apply, defined locally in the body frame.
   * @param localPoint A local point in the body to apply the force on.
   */


  applyLocalImpulse(localImpulse, localPoint) {
    if (localPoint === void 0) {
      localPoint = new Vec3();
    }

    if (this.type !== Body.DYNAMIC) {
      return;
    }

    const worldImpulse = Body_applyLocalImpulse_worldImpulse;
    const relativePointWorld = Body_applyLocalImpulse_relativePoint; // Transform the force vector to world space

    this.vectorToWorldFrame(localImpulse, worldImpulse);
    this.vectorToWorldFrame(localPoint, relativePointWorld);
    this.applyImpulse(worldImpulse, relativePointWorld);
  }
  /**
   * Should be called whenever you change the body shape or mass.
   */


  updateMassProperties() {
    const halfExtents = Body_updateMassProperties_halfExtents;
    this.invMass = this.mass > 0 ? 1.0 / this.mass : 0;
    const I = this.inertia;
    const fixed = this.fixedRotation; // Approximate with AABB box

    this.updateAABB();
    halfExtents.set((this.aabb.upperBound.x - this.aabb.lowerBound.x) / 2, (this.aabb.upperBound.y - this.aabb.lowerBound.y) / 2, (this.aabb.upperBound.z - this.aabb.lowerBound.z) / 2);
    Box.calculateInertia(halfExtents, this.mass, I);
    this.invInertia.set(I.x > 0 && !fixed ? 1.0 / I.x : 0, I.y > 0 && !fixed ? 1.0 / I.y : 0, I.z > 0 && !fixed ? 1.0 / I.z : 0);
    this.updateInertiaWorld(true);
  }
  /**
   * Get world velocity of a point in the body.
   * @param worldPoint
   * @param result
   * @return The result vector.
   */


  getVelocityAtWorldPoint(worldPoint, result) {
    const r = new Vec3();
    worldPoint.vsub(this.position, r);
    this.angularVelocity.cross(r, result);
    this.velocity.vadd(result, result);
    return result;
  }
  /**
   * Move the body forward in time.
   * @param dt Time step
   * @param quatNormalize Set to true to normalize the body quaternion
   * @param quatNormalizeFast If the quaternion should be normalized using "fast" quaternion normalization
   */


  integrate(dt, quatNormalize, quatNormalizeFast) {
    // Save previous position
    this.previousPosition.copy(this.position);
    this.previousQuaternion.copy(this.quaternion);

    if (!(this.type === Body.DYNAMIC || this.type === Body.KINEMATIC) || this.sleepState === Body.SLEEPING) {
      // Only for dynamic
      return;
    }

    const velo = this.velocity;
    const angularVelo = this.angularVelocity;
    const pos = this.position;
    const force = this.force;
    const torque = this.torque;
    const quat = this.quaternion;
    const invMass = this.invMass;
    const invInertia = this.invInertiaWorld;
    const linearFactor = this.linearFactor;
    const iMdt = invMass * dt;
    velo.x += force.x * iMdt * linearFactor.x;
    velo.y += force.y * iMdt * linearFactor.y;
    velo.z += force.z * iMdt * linearFactor.z;
    const e = invInertia.elements;
    const angularFactor = this.angularFactor;
    const tx = torque.x * angularFactor.x;
    const ty = torque.y * angularFactor.y;
    const tz = torque.z * angularFactor.z;
    angularVelo.x += dt * (e[0] * tx + e[1] * ty + e[2] * tz);
    angularVelo.y += dt * (e[3] * tx + e[4] * ty + e[5] * tz);
    angularVelo.z += dt * (e[6] * tx + e[7] * ty + e[8] * tz); // Use new velocity  - leap frog

    pos.x += velo.x * dt;
    pos.y += velo.y * dt;
    pos.z += velo.z * dt;
    quat.integrate(this.angularVelocity, dt, this.angularFactor, quat);

    if (quatNormalize) {
      if (quatNormalizeFast) {
        quat.normalizeFast();
      } else {
        quat.normalize();
      }
    }

    this.aabbNeedsUpdate = true; // Update world inertia

    this.updateInertiaWorld();
  }

}

Body.idCounter = 0;
Body.COLLIDE_EVENT_NAME = 'collide';
Body.DYNAMIC = BODY_TYPES.DYNAMIC;
Body.STATIC = BODY_TYPES.STATIC;
Body.KINEMATIC = BODY_TYPES.KINEMATIC;
Body.AWAKE = BODY_SLEEP_STATES.AWAKE;
Body.SLEEPY = BODY_SLEEP_STATES.SLEEPY;
Body.SLEEPING = BODY_SLEEP_STATES.SLEEPING;
Body.wakeupEvent = {
  type: 'wakeup'
};
Body.sleepyEvent = {
  type: 'sleepy'
};
Body.sleepEvent = {
  type: 'sleep'
};
const tmpVec = new Vec3();
const tmpQuat = new Quaternion();
const updateAABB_shapeAABB = new AABB();
const uiw_m1 = new Mat3();
const uiw_m2 = new Mat3();
const Body_applyForce_rotForce = new Vec3();
const Body_applyLocalForce_worldForce = new Vec3();
const Body_applyLocalForce_relativePointWorld = new Vec3();
const Body_applyImpulse_velo = new Vec3();
const Body_applyImpulse_rotVelo = new Vec3();
const Body_applyLocalImpulse_worldImpulse = new Vec3();
const Body_applyLocalImpulse_relativePoint = new Vec3();
const Body_updateMassProperties_halfExtents = new Vec3();


new Vec3();

new Vec3();
/**
 * Storage for Ray casting data
 */


class RaycastResult {
  /**
   * rayFromWorld
   */

  /**
   * rayToWorld
   */

  /**
   * hitNormalWorld
   */

  /**
   * hitPointWorld
   */

  /**
   * hasHit
   */

  /**
   * shape
   */

  /**
   * body
   */

  /**
   * The index of the hit triangle, if the hit shape was a trimesh
   */

  /**
   * Distance to the hit. Will be set to -1 if there was no hit
   */

  /**
   * If the ray should stop traversing the bodies
   */
  constructor() {
    this.rayFromWorld = void 0;
    this.rayToWorld = void 0;
    this.hitNormalWorld = void 0;
    this.hitPointWorld = void 0;
    this.hasHit = void 0;
    this.shape = void 0;
    this.body = void 0;
    this.hitFaceIndex = void 0;
    this.distance = void 0;
    this.shouldStop = void 0;
    this.rayFromWorld = new Vec3();
    this.rayToWorld = new Vec3();
    this.hitNormalWorld = new Vec3();
    this.hitPointWorld = new Vec3();
    this.hasHit = false;
    this.shape = null;
    this.body = null;
    this.hitFaceIndex = -1;
    this.distance = -1;
    this.shouldStop = false;
  }
  /**
   * Reset all result data.
   */


  reset() {
    this.rayFromWorld.setZero();
    this.rayToWorld.setZero();
    this.hitNormalWorld.setZero();
    this.hitPointWorld.setZero();
    this.hasHit = false;
    this.shape = null;
    this.body = null;
    this.hitFaceIndex = -1;
    this.distance = -1;
    this.shouldStop = false;
  }
  /**
   * abort
   */


  abort() {
    this.shouldStop = true;
  }
  /**
   * Set result data.
   */


  set(rayFromWorld, rayToWorld, hitNormalWorld, hitPointWorld, shape, body, distance) {
    this.rayFromWorld.copy(rayFromWorld);
    this.rayToWorld.copy(rayToWorld);
    this.hitNormalWorld.copy(hitNormalWorld);
    this.hitPointWorld.copy(hitPointWorld);
    this.shape = shape;
    this.body = body;
    this.distance = distance;
  }

}

let _Shape$types$SPHERE, _Shape$types$PLANE, _Shape$types$BOX, _Shape$types$CYLINDER, _Shape$types$CONVEXPO, _Shape$types$HEIGHTFI, _Shape$types$TRIMESH;
/**
 * RAY_MODES
 */


const RAY_MODES = {
  /** CLOSEST */
  CLOSEST: 1,

  /** ANY */
  ANY: 2,

  /** ALL */
  ALL: 4
};
/**
 * RayMode
 */

_Shape$types$SPHERE = Shape.types.SPHERE;
_Shape$types$PLANE = Shape.types.PLANE;
_Shape$types$BOX = Shape.types.BOX;
_Shape$types$CYLINDER = Shape.types.CYLINDER;
_Shape$types$CONVEXPO = Shape.types.CONVEXPOLYHEDRON;
_Shape$types$HEIGHTFI = Shape.types.HEIGHTFIELD;
_Shape$types$TRIMESH = Shape.types.TRIMESH;
/**
 * A line in 3D space that intersects bodies and return points.
 */

class Ray {
  /**
   * from
   */

  /**
   * to
   */

  /**
   * direction
   */

  /**
   * The precision of the ray. Used when checking parallelity etc.
   * @default 0.0001
   */

  /**
   * Set to `false` if you don't want the Ray to take `collisionResponse` flags into account on bodies and shapes.
   * @default true
   */

  /**
   * If set to `true`, the ray skips any hits with normal.dot(rayDirection) < 0.
   * @default false
   */

  /**
   * collisionFilterMask
   * @default -1
   */

  /**
   * collisionFilterGroup
   * @default -1
   */

  /**
   * The intersection mode. Should be Ray.ANY, Ray.ALL or Ray.CLOSEST.
   * @default RAY.ANY
   */

  /**
   * Current result object.
   */

  /**
   * Will be set to `true` during intersectWorld() if the ray hit anything.
   */

  /**
   * User-provided result callback. Will be used if mode is Ray.ALL.
   */

  /**
   * CLOSEST
   */

  /**
   * ANY
   */

  /**
   * ALL
   */
  get [_Shape$types$SPHERE]() {
    return this._intersectSphere;
  }

  get [_Shape$types$PLANE]() {
    return this._intersectPlane;
  }

  get [_Shape$types$BOX]() {
    return this._intersectBox;
  }

  get [_Shape$types$CYLINDER]() {
    return this._intersectConvex;
  }

  get [_Shape$types$CONVEXPO]() {
    return this._intersectConvex;
  }

  get [_Shape$types$HEIGHTFI]() {
    return this._intersectHeightfield;
  }

  get [_Shape$types$TRIMESH]() {
    return this._intersectTrimesh;
  }

  constructor(from, to) {
    if (from === void 0) {
      from = new Vec3();
    }

    if (to === void 0) {
      to = new Vec3();
    }

    this.from = void 0;
    this.to = void 0;
    this.direction = void 0;
    this.precision = void 0;
    this.checkCollisionResponse = void 0;
    this.skipBackfaces = void 0;
    this.collisionFilterMask = void 0;
    this.collisionFilterGroup = void 0;
    this.mode = void 0;
    this.result = void 0;
    this.hasHit = void 0;
    this.callback = void 0;
    this.from = from.clone();
    this.to = to.clone();
    this.direction = new Vec3();
    this.precision = 0.0001;
    this.checkCollisionResponse = true;
    this.skipBackfaces = false;
    this.collisionFilterMask = -1;
    this.collisionFilterGroup = -1;
    this.mode = Ray.ANY;
    this.result = new RaycastResult();
    this.hasHit = false;

    this.callback = result => {};
  }
  /**
   * Do itersection against all bodies in the given World.
   * @return True if the ray hit anything, otherwise false.
   */


  intersectWorld(world, options) {
    this.mode = options.mode || Ray.ANY;
    this.result = options.result || new RaycastResult();
    this.skipBackfaces = !!options.skipBackfaces;
    this.collisionFilterMask = typeof options.collisionFilterMask !== 'undefined' ? options.collisionFilterMask : -1;
    this.collisionFilterGroup = typeof options.collisionFilterGroup !== 'undefined' ? options.collisionFilterGroup : -1;
    this.checkCollisionResponse = typeof options.checkCollisionResponse !== 'undefined' ? options.checkCollisionResponse : true;

    if (options.from) {
      this.from.copy(options.from);
    }

    if (options.to) {
      this.to.copy(options.to);
    }

    this.callback = options.callback || (() => {});

    this.hasHit = false;
    this.result.reset();
    this.updateDirection();
    this.getAABB(tmpAABB$1);
    tmpArray.length = 0;
    world.broadphase.aabbQuery(world, tmpAABB$1, tmpArray);
    this.intersectBodies(tmpArray);
    return this.hasHit;
  }
  /**
   * Shoot a ray at a body, get back information about the hit.
   * @deprecated @param result set the result property of the Ray instead.
   */


  intersectBody(body, result) {
    if (result) {
      this.result = result;
      this.updateDirection();
    }

    const checkCollisionResponse = this.checkCollisionResponse;

    if (checkCollisionResponse && !body.collisionResponse) {
      return;
    }

    if ((this.collisionFilterGroup & body.collisionFilterMask) === 0 || (body.collisionFilterGroup & this.collisionFilterMask) === 0) {
      return;
    }

    const xi = intersectBody_xi;
    const qi = intersectBody_qi;

    for (let i = 0, N = body.shapes.length; i < N; i++) {
      const shape = body.shapes[i];

      if (checkCollisionResponse && !shape.collisionResponse) {
        continue; // Skip
      }

      body.quaternion.mult(body.shapeOrientations[i], qi);
      body.quaternion.vmult(body.shapeOffsets[i], xi);
      xi.vadd(body.position, xi);
      this.intersectShape(shape, qi, xi, body);

      if (this.result.shouldStop) {
        break;
      }
    }
  }
  /**
   * Shoot a ray at an array bodies, get back information about the hit.
   * @param bodies An array of Body objects.
   * @deprecated @param result set the result property of the Ray instead.
   *
   */


  intersectBodies(bodies, result) {
    if (result) {
      this.result = result;
      this.updateDirection();
    }

    for (let i = 0, l = bodies.length; !this.result.shouldStop && i < l; i++) {
      this.intersectBody(bodies[i]);
    }
  }
  /**
   * Updates the direction vector.
   */


  updateDirection() {
    this.to.vsub(this.from, this.direction);
    this.direction.normalize();
  }

  intersectShape(shape, quat, position, body) {
    const from = this.from; // Checking boundingSphere

    const distance = distanceFromIntersection(from, this.direction, position);

    if (distance > shape.boundingSphereRadius) {
      return;
    }

    const intersectMethod = this[shape.type];

    if (intersectMethod) {
      intersectMethod.call(this, shape, quat, position, body, shape);
    }
  }

  _intersectBox(box, quat, position, body, reportedShape) {
    return this._intersectConvex(box.convexPolyhedronRepresentation, quat, position, body, reportedShape);
  }

  _intersectPlane(shape, quat, position, body, reportedShape) {
    const from = this.from;
    const to = this.to;
    const direction = this.direction; // Get plane normal

    const worldNormal = new Vec3(0, 0, 1);
    quat.vmult(worldNormal, worldNormal);
    const len = new Vec3();
    from.vsub(position, len);
    const planeToFrom = len.dot(worldNormal);
    to.vsub(position, len);
    const planeToTo = len.dot(worldNormal);

    if (planeToFrom * planeToTo > 0) {
      // "from" and "to" are on the same side of the plane... bail out
      return;
    }

    if (from.distanceTo(to) < planeToFrom) {
      return;
    }

    const n_dot_dir = worldNormal.dot(direction);

    if (Math.abs(n_dot_dir) < this.precision) {
      // No intersection
      return;
    }

    const planePointToFrom = new Vec3();
    const dir_scaled_with_t = new Vec3();
    const hitPointWorld = new Vec3();
    from.vsub(position, planePointToFrom);
    const t = -worldNormal.dot(planePointToFrom) / n_dot_dir;
    direction.scale(t, dir_scaled_with_t);
    from.vadd(dir_scaled_with_t, hitPointWorld);
    this.reportIntersection(worldNormal, hitPointWorld, reportedShape, body, -1);
  }
  /**
   * Get the world AABB of the ray.
   */


  getAABB(aabb) {
    const {
      lowerBound,
      upperBound
    } = aabb;
    const to = this.to;
    const from = this.from;
    lowerBound.x = Math.min(to.x, from.x);
    lowerBound.y = Math.min(to.y, from.y);
    lowerBound.z = Math.min(to.z, from.z);
    upperBound.x = Math.max(to.x, from.x);
    upperBound.y = Math.max(to.y, from.y);
    upperBound.z = Math.max(to.z, from.z);
  }

  _intersectHeightfield(shape, quat, position, body, reportedShape) {
    shape.data;
    shape.elementSize; // Convert the ray to local heightfield coordinates

    const localRay = intersectHeightfield_localRay; //new Ray(this.from, this.to);

    localRay.from.copy(this.from);
    localRay.to.copy(this.to);
    Transform.pointToLocalFrame(position, quat, localRay.from, localRay.from);
    Transform.pointToLocalFrame(position, quat, localRay.to, localRay.to);
    localRay.updateDirection(); // Get the index of the data points to test against

    const index = intersectHeightfield_index;
    let iMinX;
    let iMinY;
    let iMaxX;
    let iMaxY; // Set to max

    iMinX = iMinY = 0;
    iMaxX = iMaxY = shape.data.length - 1;
    const aabb = new AABB();
    localRay.getAABB(aabb);
    shape.getIndexOfPosition(aabb.lowerBound.x, aabb.lowerBound.y, index, true);
    iMinX = Math.max(iMinX, index[0]);
    iMinY = Math.max(iMinY, index[1]);
    shape.getIndexOfPosition(aabb.upperBound.x, aabb.upperBound.y, index, true);
    iMaxX = Math.min(iMaxX, index[0] + 1);
    iMaxY = Math.min(iMaxY, index[1] + 1);

    for (let i = iMinX; i < iMaxX; i++) {
      for (let j = iMinY; j < iMaxY; j++) {
        if (this.result.shouldStop) {
          return;
        }

        shape.getAabbAtIndex(i, j, aabb);

        if (!aabb.overlapsRay(localRay)) {
          continue;
        } // Lower triangle


        shape.getConvexTrianglePillar(i, j, false);
        Transform.pointToWorldFrame(position, quat, shape.pillarOffset, worldPillarOffset);

        this._intersectConvex(shape.pillarConvex, quat, worldPillarOffset, body, reportedShape, intersectConvexOptions);

        if (this.result.shouldStop) {
          return;
        } // Upper triangle


        shape.getConvexTrianglePillar(i, j, true);
        Transform.pointToWorldFrame(position, quat, shape.pillarOffset, worldPillarOffset);

        this._intersectConvex(shape.pillarConvex, quat, worldPillarOffset, body, reportedShape, intersectConvexOptions);
      }
    }
  }

  _intersectSphere(sphere, quat, position, body, reportedShape) {
    const from = this.from;
    const to = this.to;
    const r = sphere.radius;
    const a = (to.x - from.x) ** 2 + (to.y - from.y) ** 2 + (to.z - from.z) ** 2;
    const b = 2 * ((to.x - from.x) * (from.x - position.x) + (to.y - from.y) * (from.y - position.y) + (to.z - from.z) * (from.z - position.z));
    const c = (from.x - position.x) ** 2 + (from.y - position.y) ** 2 + (from.z - position.z) ** 2 - r ** 2;
    const delta = b ** 2 - 4 * a * c;
    const intersectionPoint = Ray_intersectSphere_intersectionPoint;
    const normal = Ray_intersectSphere_normal;

    if (delta < 0) {
      // No intersection
      return;
    } else if (delta === 0) {
      // single intersection point
      from.lerp(to, delta, intersectionPoint);
      intersectionPoint.vsub(position, normal);
      normal.normalize();
      this.reportIntersection(normal, intersectionPoint, reportedShape, body, -1);
    } else {
      const d1 = (-b - Math.sqrt(delta)) / (2 * a);
      const d2 = (-b + Math.sqrt(delta)) / (2 * a);

      if (d1 >= 0 && d1 <= 1) {
        from.lerp(to, d1, intersectionPoint);
        intersectionPoint.vsub(position, normal);
        normal.normalize();
        this.reportIntersection(normal, intersectionPoint, reportedShape, body, -1);
      }

      if (this.result.shouldStop) {
        return;
      }

      if (d2 >= 0 && d2 <= 1) {
        from.lerp(to, d2, intersectionPoint);
        intersectionPoint.vsub(position, normal);
        normal.normalize();
        this.reportIntersection(normal, intersectionPoint, reportedShape, body, -1);
      }
    }
  }

  _intersectConvex(shape, quat, position, body, reportedShape, options) {
    const normal = intersectConvex_normal;
    const vector = intersectConvex_vector;
    const faceList = options && options.faceList || null; // Checking faces

    const faces = shape.faces;
    const vertices = shape.vertices;
    const normals = shape.faceNormals;
    const direction = this.direction;
    const from = this.from;
    const to = this.to;
    const fromToDistance = from.distanceTo(to);
    const Nfaces = faceList ? faceList.length : faces.length;
    const result = this.result;

    for (let j = 0; !result.shouldStop && j < Nfaces; j++) {
      const fi = faceList ? faceList[j] : j;
      const face = faces[fi];
      const faceNormal = normals[fi];
      const q = quat;
      const x = position; // determine if ray intersects the plane of the face
      // note: this works regardless of the direction of the face normal
      // Get plane point in world coordinates...

      vector.copy(vertices[face[0]]);
      q.vmult(vector, vector);
      vector.vadd(x, vector); // ...but make it relative to the ray from. We'll fix this later.

      vector.vsub(from, vector); // Get plane normal

      q.vmult(faceNormal, normal); // If this dot product is negative, we have something interesting

      const dot = direction.dot(normal); // Bail out if ray and plane are parallel

      if (Math.abs(dot) < this.precision) {
        continue;
      } // calc distance to plane


      const scalar = normal.dot(vector) / dot; // if negative distance, then plane is behind ray

      if (scalar < 0) {
        continue;
      } // if (dot < 0) {
      // Intersection point is from + direction * scalar


      direction.scale(scalar, intersectPoint);
      intersectPoint.vadd(from, intersectPoint); // a is the point we compare points b and c with.

      a.copy(vertices[face[0]]);
      q.vmult(a, a);
      x.vadd(a, a);

      for (let i = 1; !result.shouldStop && i < face.length - 1; i++) {
        // Transform 3 vertices to world coords
        b.copy(vertices[face[i]]);
        c.copy(vertices[face[i + 1]]);
        q.vmult(b, b);
        q.vmult(c, c);
        x.vadd(b, b);
        x.vadd(c, c);
        const distance = intersectPoint.distanceTo(from);

        if (!(Ray.pointInTriangle(intersectPoint, a, b, c) || Ray.pointInTriangle(intersectPoint, b, a, c)) || distance > fromToDistance) {
          continue;
        }

        this.reportIntersection(normal, intersectPoint, reportedShape, body, fi);
      } // }

    }
  }
  /**
   * @todo Optimize by transforming the world to local space first.
   * @todo Use Octree lookup
   */


  _intersectTrimesh(mesh, quat, position, body, reportedShape, options) {
    const normal = intersectTrimesh_normal;
    const triangles = intersectTrimesh_triangles;
    const treeTransform = intersectTrimesh_treeTransform;
    const vector = intersectConvex_vector;
    const localDirection = intersectTrimesh_localDirection;
    const localFrom = intersectTrimesh_localFrom;
    const localTo = intersectTrimesh_localTo;
    const worldIntersectPoint = intersectTrimesh_worldIntersectPoint;
    const worldNormal = intersectTrimesh_worldNormal; // Checking faces

    const indices = mesh.indices;
    mesh.vertices; // const normals = mesh.faceNormals

    const from = this.from;
    const to = this.to;
    const direction = this.direction;
    treeTransform.position.copy(position);
    treeTransform.quaternion.copy(quat); // Transform ray to local space!

    Transform.vectorToLocalFrame(position, quat, direction, localDirection);
    Transform.pointToLocalFrame(position, quat, from, localFrom);
    Transform.pointToLocalFrame(position, quat, to, localTo);
    localTo.x *= mesh.scale.x;
    localTo.y *= mesh.scale.y;
    localTo.z *= mesh.scale.z;
    localFrom.x *= mesh.scale.x;
    localFrom.y *= mesh.scale.y;
    localFrom.z *= mesh.scale.z;
    localTo.vsub(localFrom, localDirection);
    localDirection.normalize();
    const fromToDistanceSquared = localFrom.distanceSquared(localTo);
    mesh.tree.rayQuery(this, treeTransform, triangles);

    for (let i = 0, N = triangles.length; !this.result.shouldStop && i !== N; i++) {
      const trianglesIndex = triangles[i];
      mesh.getNormal(trianglesIndex, normal); // determine if ray intersects the plane of the face
      // note: this works regardless of the direction of the face normal
      // Get plane point in world coordinates...

      mesh.getVertex(indices[trianglesIndex * 3], a); // ...but make it relative to the ray from. We'll fix this later.

      a.vsub(localFrom, vector); // If this dot product is negative, we have something interesting

      const dot = localDirection.dot(normal); // Bail out if ray and plane are parallel
      // if (Math.abs( dot ) < this.precision){
      //     continue;
      // }
      // calc distance to plane

      const scalar = normal.dot(vector) / dot; // if negative distance, then plane is behind ray

      if (scalar < 0) {
        continue;
      } // Intersection point is from + direction * scalar


      localDirection.scale(scalar, intersectPoint);
      intersectPoint.vadd(localFrom, intersectPoint); // Get triangle vertices

      mesh.getVertex(indices[trianglesIndex * 3 + 1], b);
      mesh.getVertex(indices[trianglesIndex * 3 + 2], c);
      const squaredDistance = intersectPoint.distanceSquared(localFrom);

      if (!(Ray.pointInTriangle(intersectPoint, b, a, c) || Ray.pointInTriangle(intersectPoint, a, b, c)) || squaredDistance > fromToDistanceSquared) {
        continue;
      } // transform intersectpoint and normal to world


      Transform.vectorToWorldFrame(quat, normal, worldNormal);
      Transform.pointToWorldFrame(position, quat, intersectPoint, worldIntersectPoint);
      this.reportIntersection(worldNormal, worldIntersectPoint, reportedShape, body, trianglesIndex);
    }

    triangles.length = 0;
  }
  /**
   * @return True if the intersections should continue
   */


  reportIntersection(normal, hitPointWorld, shape, body, hitFaceIndex) {
    const from = this.from;
    const to = this.to;
    const distance = from.distanceTo(hitPointWorld);
    const result = this.result; // Skip back faces?

    if (this.skipBackfaces && normal.dot(this.direction) > 0) {
      return;
    }

    result.hitFaceIndex = typeof hitFaceIndex !== 'undefined' ? hitFaceIndex : -1;

    switch (this.mode) {
      case Ray.ALL:
        this.hasHit = true;
        result.set(from, to, normal, hitPointWorld, shape, body, distance);
        result.hasHit = true;
        this.callback(result);
        break;

      case Ray.CLOSEST:
        // Store if closer than current closest
        if (distance < result.distance || !result.hasHit) {
          this.hasHit = true;
          result.hasHit = true;
          result.set(from, to, normal, hitPointWorld, shape, body, distance);
        }

        break;

      case Ray.ANY:
        // Report and stop.
        this.hasHit = true;
        result.hasHit = true;
        result.set(from, to, normal, hitPointWorld, shape, body, distance);
        result.shouldStop = true;
        break;
    }
  }
  /**
   * As per "Barycentric Technique" as named
   * {@link https://www.blackpawn.com/texts/pointinpoly/default.html here} but without the division
   */


  static pointInTriangle(p, a, b, c) {
    c.vsub(a, v0);
    b.vsub(a, v1);
    p.vsub(a, v2);
    const dot00 = v0.dot(v0);
    const dot01 = v0.dot(v1);
    const dot02 = v0.dot(v2);
    const dot11 = v1.dot(v1);
    const dot12 = v1.dot(v2);
    let u;
    let v;
    return (u = dot11 * dot02 - dot01 * dot12) >= 0 && (v = dot00 * dot12 - dot01 * dot02) >= 0 && u + v < dot00 * dot11 - dot01 * dot01;
  }

}

Ray.CLOSEST = RAY_MODES.CLOSEST;
Ray.ANY = RAY_MODES.ANY;
Ray.ALL = RAY_MODES.ALL;
const tmpAABB$1 = new AABB();
const tmpArray = [];
const v1 = new Vec3();
const v2 = new Vec3();
const intersectBody_xi = new Vec3();
const intersectBody_qi = new Quaternion();
const intersectPoint = new Vec3();
const a = new Vec3();
const b = new Vec3();
const c = new Vec3();
const intersectConvexOptions = {
  faceList: [0]
};
const worldPillarOffset = new Vec3();
const intersectHeightfield_localRay = new Ray();
const intersectHeightfield_index = [];
const Ray_intersectSphere_intersectionPoint = new Vec3();
const Ray_intersectSphere_normal = new Vec3();
const intersectConvex_normal = new Vec3();
const intersectConvex_vector = new Vec3();
const intersectTrimesh_normal = new Vec3();
const intersectTrimesh_localDirection = new Vec3();
const intersectTrimesh_localFrom = new Vec3();
const intersectTrimesh_localTo = new Vec3();
const intersectTrimesh_worldNormal = new Vec3();
const intersectTrimesh_worldIntersectPoint = new Vec3();
new AABB();
const intersectTrimesh_triangles = [];
const intersectTrimesh_treeTransform = new Transform();
const v0 = new Vec3();
const intersect = new Vec3();

function distanceFromIntersection(from, direction, position) {
  // v0 is vector from from to position
  position.vsub(from, v0);
  const dot = v0.dot(direction); // intersect = direction*dot + from

  direction.scale(dot, intersect);
  intersect.vadd(from, intersect);
  const distance = position.distanceTo(intersect);
  return distance;
}

class Utils {
  /**
   * Extend an options object with default values.
   * @param options The options object. May be falsy: in this case, a new object is created and returned.
   * @param defaults An object containing default values.
   * @return The modified options object.
   */
  static defaults(options, defaults) {
    if (options === void 0) {
      options = {};
    }

    for (let key in defaults) {
      if (!(key in options)) {
        options[key] = defaults[key];
      }
    }

    return options;
  }

}
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();

new Vec3(); // Temp vectors

new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();

new Vec3();
new Vec3();

new Vec3();
new Vec3();

new Vec3();
new Vec3();

new Vec3();
new Vec3();
/**
 * Defines a physics material.
 */

class Material {
  /**
   * Material name.
   * If options is a string, name will be set to that string.
   * @todo Deprecate this
   */

  /** Material id. */

  /**
   * Friction for this material.
   * If non-negative, it will be used instead of the friction given by ContactMaterials. If there's no matching ContactMaterial, the value from `defaultContactMaterial` in the World will be used.
   */

  /**
   * Restitution for this material.
   * If non-negative, it will be used instead of the restitution given by ContactMaterials. If there's no matching ContactMaterial, the value from `defaultContactMaterial` in the World will be used.
   */
  constructor(options) {
    if (options === void 0) {
      options = {};
    }

    this.name = void 0;
    this.id = void 0;
    this.friction = void 0;
    this.restitution = void 0;
    let name = ''; // Backwards compatibility fix

    if (typeof options === 'string') {
      //console.warn(`Passing a string to MaterialOptions is deprecated, and has no effect`)
      name = options;
      options = {};
    }

    this.name = name;
    this.id = Material.idCounter++;
    this.friction = typeof options.friction !== 'undefined' ? options.friction : -1;
    this.restitution = typeof options.restitution !== 'undefined' ? options.restitution : -1;
  }

}

Material.idCounter = 0;

new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();

new Vec3();
new Vec3();

new Vec3();
new Vec3();
new Vec3();
new Ray();
new Vec3();
new Vec3();
[new Vec3(1, 0, 0), new Vec3(0, 1, 0), new Vec3(0, 0, 1)];
new Vec3();
new Vec3();
new Vec3();
new Vec3();

new Vec3();
new Vec3();
new Vec3();
new Vec3();

new Vec3();
new Vec3();
new Vec3(); // bilateral constraint between two dynamic objects
/**
 * Spherical shape
 * @example
 *     const radius = 1
 *     const sphereShape = new CANNON.Sphere(radius)
 *     const sphereBody = new CANNON.Body({ mass: 1, shape: sphereShape })
 *     world.addBody(sphereBody)
 */


class Sphere extends Shape {
  /**
   * The radius of the sphere.
   */

  /**
   *
   * @param radius The radius of the sphere, a non-negative number.
   */
  constructor(radius) {
    super({
      type: Shape.types.SPHERE
    });
    this.radius = void 0;
    this.radius = radius !== undefined ? radius : 1.0;

    if (this.radius < 0) {
      throw new Error('The sphere radius cannot be negative.');
    }

    this.updateBoundingSphereRadius();
  }
  /** calculateLocalInertia */


  calculateLocalInertia(mass, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    const I = 2.0 * mass * this.radius * this.radius / 5.0;
    target.x = I;
    target.y = I;
    target.z = I;
    return target;
  }
  /** volume */


  volume() {
    return 4.0 * Math.PI * Math.pow(this.radius, 3) / 3.0;
  }

  updateBoundingSphereRadius() {
    this.boundingSphereRadius = this.radius;
  }

  calculateWorldAABB(pos, quat, min, max) {
    const r = this.radius;
    const axes = ['x', 'y', 'z'];

    for (let i = 0; i < axes.length; i++) {
      const ax = axes[i];
      min[ax] = pos[ax] - r;
      max[ax] = pos[ax] + r;
    }
  }

}

new Vec3();
new Vec3();

new Vec3(); // Temp vectors for calculation

new Vec3(); // Relative velocity

new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
/**
 * Cylinder class.
 * @example
 *     const radiusTop = 0.5
 *     const radiusBottom = 0.5
 *     const height = 2
 *     const numSegments = 12
 *     const cylinderShape = new CANNON.Cylinder(radiusTop, radiusBottom, height, numSegments)
 *     const cylinderBody = new CANNON.Body({ mass: 1, shape: cylinderShape })
 *     world.addBody(cylinderBody)
 */

class Cylinder extends ConvexPolyhedron {
  /** The radius of the top of the Cylinder. */

  /** The radius of the bottom of the Cylinder. */

  /** The height of the Cylinder. */

  /** The number of segments to build the cylinder out of. */

  /**
   * @param radiusTop The radius of the top of the Cylinder.
   * @param radiusBottom The radius of the bottom of the Cylinder.
   * @param height The height of the Cylinder.
   * @param numSegments The number of segments to build the cylinder out of.
   */
  constructor(radiusTop, radiusBottom, height, numSegments) {
    if (radiusTop === void 0) {
      radiusTop = 1;
    }

    if (radiusBottom === void 0) {
      radiusBottom = 1;
    }

    if (height === void 0) {
      height = 1;
    }

    if (numSegments === void 0) {
      numSegments = 8;
    }

    if (radiusTop < 0) {
      throw new Error('The cylinder radiusTop cannot be negative.');
    }

    if (radiusBottom < 0) {
      throw new Error('The cylinder radiusBottom cannot be negative.');
    }

    const N = numSegments;
    const vertices = [];
    const axes = [];
    const faces = [];
    const bottomface = [];
    const topface = [];
    const cos = Math.cos;
    const sin = Math.sin; // First bottom point

    vertices.push(new Vec3(-radiusBottom * sin(0), -height * 0.5, radiusBottom * cos(0)));
    bottomface.push(0); // First top point

    vertices.push(new Vec3(-radiusTop * sin(0), height * 0.5, radiusTop * cos(0)));
    topface.push(1);

    for (let i = 0; i < N; i++) {
      const theta = 2 * Math.PI / N * (i + 1);
      const thetaN = 2 * Math.PI / N * (i + 0.5);

      if (i < N - 1) {
        // Bottom
        vertices.push(new Vec3(-radiusBottom * sin(theta), -height * 0.5, radiusBottom * cos(theta)));
        bottomface.push(2 * i + 2); // Top

        vertices.push(new Vec3(-radiusTop * sin(theta), height * 0.5, radiusTop * cos(theta)));
        topface.push(2 * i + 3); // Face

        faces.push([2 * i, 2 * i + 1, 2 * i + 3, 2 * i + 2]);
      } else {
        faces.push([2 * i, 2 * i + 1, 1, 0]); // Connect
      } // Axis: we can cut off half of them if we have even number of segments


      if (N % 2 === 1 || i < N / 2) {
        axes.push(new Vec3(-sin(thetaN), 0, cos(thetaN)));
      }
    }

    faces.push(bottomface);
    axes.push(new Vec3(0, 1, 0)); // Reorder top face

    const temp = [];

    for (let i = 0; i < topface.length; i++) {
      temp.push(topface[topface.length - i - 1]);
    }

    faces.push(temp);
    super({
      vertices,
      faces,
      axes
    });
    this.radiusTop = void 0;
    this.radiusBottom = void 0;
    this.height = void 0;
    this.numSegments = void 0;
    this.type = Shape.types.CYLINDER;
    this.radiusTop = radiusTop;
    this.radiusBottom = radiusBottom;
    this.height = height;
    this.numSegments = numSegments;
  }

}
/**
 * Particle shape.
 * @example
 *     const particleShape = new CANNON.Particle()
 *     const particleBody = new CANNON.Body({ mass: 1, shape: particleShape })
 *     world.addBody(particleBody)
 */


class Particle extends Shape {
  constructor() {
    super({
      type: Shape.types.PARTICLE
    });
  }
  /**
   * calculateLocalInertia
   */


  calculateLocalInertia(mass, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    target.set(0, 0, 0);
    return target;
  }

  volume() {
    return 0;
  }

  updateBoundingSphereRadius() {
    this.boundingSphereRadius = 0;
  }

  calculateWorldAABB(pos, quat, min, max) {
    // Get each axis max
    min.copy(pos);
    max.copy(pos);
  }

}
/**
 * A plane, facing in the Z direction. The plane has its surface at z=0 and everything below z=0 is assumed to be solid plane. To make the plane face in some other direction than z, you must put it inside a Body and rotate that body. See the demos.
 * @example
 *     const planeShape = new CANNON.Plane()
 *     const planeBody = new CANNON.Body({ mass: 0, shape:  planeShape })
 *     planeBody.quaternion.setFromEuler(-Math.PI / 2, 0, 0) // make it face up
 *     world.addBody(planeBody)
 */


class Plane extends Shape {
  /** worldNormal */

  /** worldNormalNeedsUpdate */
  constructor() {
    super({
      type: Shape.types.PLANE
    }); // World oriented normal

    this.worldNormal = void 0;
    this.worldNormalNeedsUpdate = void 0;
    this.boundingSphereRadius = void 0;
    this.worldNormal = new Vec3();
    this.worldNormalNeedsUpdate = true;
    this.boundingSphereRadius = Number.MAX_VALUE;
  }
  /** computeWorldNormal */


  computeWorldNormal(quat) {
    const n = this.worldNormal;
    n.set(0, 0, 1);
    quat.vmult(n, n);
    this.worldNormalNeedsUpdate = false;
  }

  calculateLocalInertia(mass, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    return target;
  }

  volume() {
    return (// The plane is infinite...
      Number.MAX_VALUE
    );
  }

  calculateWorldAABB(pos, quat, min, max) {
    // The plane AABB is infinite, except if the normal is pointing along any axis
    tempNormal.set(0, 0, 1); // Default plane normal is z

    quat.vmult(tempNormal, tempNormal);
    const maxVal = Number.MAX_VALUE;
    min.set(-maxVal, -maxVal, -maxVal);
    max.set(maxVal, maxVal, maxVal);

    if (tempNormal.x === 1) {
      max.x = pos.x;
    } else if (tempNormal.x === -1) {
      min.x = pos.x;
    }

    if (tempNormal.y === 1) {
      max.y = pos.y;
    } else if (tempNormal.y === -1) {
      min.y = pos.y;
    }

    if (tempNormal.z === 1) {
      max.z = pos.z;
    } else if (tempNormal.z === -1) {
      min.z = pos.z;
    }
  }

  updateBoundingSphereRadius() {
    this.boundingSphereRadius = Number.MAX_VALUE;
  }

}

const tempNormal = new Vec3();
/**
 * Heightfield shape class. Height data is given as an array. These data points are spread out evenly with a given distance.
 * @todo Should be possible to use along all axes, not just y
 * @todo should be possible to scale along all axes
 * @todo Refactor elementSize to elementSizeX and elementSizeY
 *
 * @example
 *     // Generate some height data (y-values).
 *     const data = []
 *     for (let i = 0; i < 1000; i++) {
 *         const y = 0.5 * Math.cos(0.2 * i)
 *         data.push(y)
 *     }
 *
 *     // Create the heightfield shape
 *     const heightfieldShape = new CANNON.Heightfield(data, {
 *         elementSize: 1 // Distance between the data points in X and Y directions
 *     })
 *     const heightfieldBody = new CANNON.Body({ shape: heightfieldShape })
 *     world.addBody(heightfieldBody)
 */

class Heightfield extends Shape {
  /**
   * An array of numbers, or height values, that are spread out along the x axis.
   */

  /**
   * Max value of the data points in the data array.
   */

  /**
   * Minimum value of the data points in the data array.
   */

  /**
   * World spacing between the data points in X and Y direction.
   * @todo elementSizeX and Y
   * @default 1
   */

  /**
   * @default true
   */

  /**
   * @param data An array of numbers, or height values, that are spread out along the x axis.
   */
  constructor(data, options) {
    if (options === void 0) {
      options = {};
    }

    options = Utils.defaults(options, {
      maxValue: null,
      minValue: null,
      elementSize: 1
    });
    super({
      type: Shape.types.HEIGHTFIELD
    });
    this.data = void 0;
    this.maxValue = void 0;
    this.minValue = void 0;
    this.elementSize = void 0;
    this.cacheEnabled = void 0;
    this.pillarConvex = void 0;
    this.pillarOffset = void 0;
    this._cachedPillars = void 0;
    this.data = data;
    this.maxValue = options.maxValue;
    this.minValue = options.minValue;
    this.elementSize = options.elementSize;

    if (options.minValue === null) {
      this.updateMinValue();
    }

    if (options.maxValue === null) {
      this.updateMaxValue();
    }

    this.cacheEnabled = true;
    this.pillarConvex = new ConvexPolyhedron();
    this.pillarOffset = new Vec3();
    this.updateBoundingSphereRadius(); // "i_j_isUpper" => { convex: ..., offset: ... }
    // for example:
    // _cachedPillars["0_2_1"]

    this._cachedPillars = {};
  }
  /**
   * Call whenever you change the data array.
   */


  update() {
    this._cachedPillars = {};
  }
  /**
   * Update the `minValue` property
   */


  updateMinValue() {
    const data = this.data;
    let minValue = data[0][0];

    for (let i = 0; i !== data.length; i++) {
      for (let j = 0; j !== data[i].length; j++) {
        const v = data[i][j];

        if (v < minValue) {
          minValue = v;
        }
      }
    }

    this.minValue = minValue;
  }
  /**
   * Update the `maxValue` property
   */


  updateMaxValue() {
    const data = this.data;
    let maxValue = data[0][0];

    for (let i = 0; i !== data.length; i++) {
      for (let j = 0; j !== data[i].length; j++) {
        const v = data[i][j];

        if (v > maxValue) {
          maxValue = v;
        }
      }
    }

    this.maxValue = maxValue;
  }
  /**
   * Set the height value at an index. Don't forget to update maxValue and minValue after you're done.
   */


  setHeightValueAtIndex(xi, yi, value) {
    const data = this.data;
    data[xi][yi] = value; // Invalidate cache

    this.clearCachedConvexTrianglePillar(xi, yi, false);

    if (xi > 0) {
      this.clearCachedConvexTrianglePillar(xi - 1, yi, true);
      this.clearCachedConvexTrianglePillar(xi - 1, yi, false);
    }

    if (yi > 0) {
      this.clearCachedConvexTrianglePillar(xi, yi - 1, true);
      this.clearCachedConvexTrianglePillar(xi, yi - 1, false);
    }

    if (yi > 0 && xi > 0) {
      this.clearCachedConvexTrianglePillar(xi - 1, yi - 1, true);
    }
  }
  /**
   * Get max/min in a rectangle in the matrix data
   * @param result An array to store the results in.
   * @return The result array, if it was passed in. Minimum will be at position 0 and max at 1.
   */


  getRectMinMax(iMinX, iMinY, iMaxX, iMaxY, result) {
    if (result === void 0) {
      result = [];
    }

    // Get max and min of the data
    const data = this.data; // Set first value

    let max = this.minValue;

    for (let i = iMinX; i <= iMaxX; i++) {
      for (let j = iMinY; j <= iMaxY; j++) {
        const height = data[i][j];

        if (height > max) {
          max = height;
        }
      }
    }

    result[0] = this.minValue;
    result[1] = max;
  }
  /**
   * Get the index of a local position on the heightfield. The indexes indicate the rectangles, so if your terrain is made of N x N height data points, you will have rectangle indexes ranging from 0 to N-1.
   * @param result Two-element array
   * @param clamp If the position should be clamped to the heightfield edge.
   */


  getIndexOfPosition(x, y, result, clamp) {
    // Get the index of the data points to test against
    const w = this.elementSize;
    const data = this.data;
    let xi = Math.floor(x / w);
    let yi = Math.floor(y / w);
    result[0] = xi;
    result[1] = yi;

    if (clamp) {
      // Clamp index to edges
      if (xi < 0) {
        xi = 0;
      }

      if (yi < 0) {
        yi = 0;
      }

      if (xi >= data.length - 1) {
        xi = data.length - 1;
      }

      if (yi >= data[0].length - 1) {
        yi = data[0].length - 1;
      }
    } // Bail out if we are out of the terrain


    if (xi < 0 || yi < 0 || xi >= data.length - 1 || yi >= data[0].length - 1) {
      return false;
    }

    return true;
  }

  getTriangleAt(x, y, edgeClamp, a, b, c) {
    const idx = getHeightAt_idx;
    this.getIndexOfPosition(x, y, idx, edgeClamp);
    let xi = idx[0];
    let yi = idx[1];
    const data = this.data;

    if (edgeClamp) {
      xi = Math.min(data.length - 2, Math.max(0, xi));
      yi = Math.min(data[0].length - 2, Math.max(0, yi));
    }

    const elementSize = this.elementSize;
    const lowerDist2 = (x / elementSize - xi) ** 2 + (y / elementSize - yi) ** 2;
    const upperDist2 = (x / elementSize - (xi + 1)) ** 2 + (y / elementSize - (yi + 1)) ** 2;
    const upper = lowerDist2 > upperDist2;
    this.getTriangle(xi, yi, upper, a, b, c);
    return upper;
  }

  getNormalAt(x, y, edgeClamp, result) {
    const a = getNormalAt_a;
    const b = getNormalAt_b;
    const c = getNormalAt_c;
    const e0 = getNormalAt_e0;
    const e1 = getNormalAt_e1;
    this.getTriangleAt(x, y, edgeClamp, a, b, c);
    b.vsub(a, e0);
    c.vsub(a, e1);
    e0.cross(e1, result);
    result.normalize();
  }
  /**
   * Get an AABB of a square in the heightfield
   * @param xi
   * @param yi
   * @param result
   */


  getAabbAtIndex(xi, yi, _ref) {
    let {
      lowerBound,
      upperBound
    } = _ref;
    const data = this.data;
    const elementSize = this.elementSize;
    lowerBound.set(xi * elementSize, yi * elementSize, data[xi][yi]);
    upperBound.set((xi + 1) * elementSize, (yi + 1) * elementSize, data[xi + 1][yi + 1]);
  }
  /**
   * Get the height in the heightfield at a given position
   */


  getHeightAt(x, y, edgeClamp) {
    const data = this.data;
    const a = getHeightAt_a;
    const b = getHeightAt_b;
    const c = getHeightAt_c;
    const idx = getHeightAt_idx;
    this.getIndexOfPosition(x, y, idx, edgeClamp);
    let xi = idx[0];
    let yi = idx[1];

    if (edgeClamp) {
      xi = Math.min(data.length - 2, Math.max(0, xi));
      yi = Math.min(data[0].length - 2, Math.max(0, yi));
    }

    const upper = this.getTriangleAt(x, y, edgeClamp, a, b, c);
    barycentricWeights(x, y, a.x, a.y, b.x, b.y, c.x, c.y, getHeightAt_weights);
    const w = getHeightAt_weights;

    if (upper) {
      // Top triangle verts
      return data[xi + 1][yi + 1] * w.x + data[xi][yi + 1] * w.y + data[xi + 1][yi] * w.z;
    } else {
      // Top triangle verts
      return data[xi][yi] * w.x + data[xi + 1][yi] * w.y + data[xi][yi + 1] * w.z;
    }
  }

  getCacheConvexTrianglePillarKey(xi, yi, getUpperTriangle) {
    return xi + "_" + yi + "_" + (getUpperTriangle ? 1 : 0);
  }

  getCachedConvexTrianglePillar(xi, yi, getUpperTriangle) {
    return this._cachedPillars[this.getCacheConvexTrianglePillarKey(xi, yi, getUpperTriangle)];
  }

  setCachedConvexTrianglePillar(xi, yi, getUpperTriangle, convex, offset) {
    this._cachedPillars[this.getCacheConvexTrianglePillarKey(xi, yi, getUpperTriangle)] = {
      convex,
      offset
    };
  }

  clearCachedConvexTrianglePillar(xi, yi, getUpperTriangle) {
    delete this._cachedPillars[this.getCacheConvexTrianglePillarKey(xi, yi, getUpperTriangle)];
  }
  /**
   * Get a triangle from the heightfield
   */


  getTriangle(xi, yi, upper, a, b, c) {
    const data = this.data;
    const elementSize = this.elementSize;

    if (upper) {
      // Top triangle verts
      a.set((xi + 1) * elementSize, (yi + 1) * elementSize, data[xi + 1][yi + 1]);
      b.set(xi * elementSize, (yi + 1) * elementSize, data[xi][yi + 1]);
      c.set((xi + 1) * elementSize, yi * elementSize, data[xi + 1][yi]);
    } else {
      // Top triangle verts
      a.set(xi * elementSize, yi * elementSize, data[xi][yi]);
      b.set((xi + 1) * elementSize, yi * elementSize, data[xi + 1][yi]);
      c.set(xi * elementSize, (yi + 1) * elementSize, data[xi][yi + 1]);
    }
  }
  /**
   * Get a triangle in the terrain in the form of a triangular convex shape.
   */


  getConvexTrianglePillar(xi, yi, getUpperTriangle) {
    let result = this.pillarConvex;
    let offsetResult = this.pillarOffset;

    if (this.cacheEnabled) {
      const data = this.getCachedConvexTrianglePillar(xi, yi, getUpperTriangle);

      if (data) {
        this.pillarConvex = data.convex;
        this.pillarOffset = data.offset;
        return;
      }

      result = new ConvexPolyhedron();
      offsetResult = new Vec3();
      this.pillarConvex = result;
      this.pillarOffset = offsetResult;
    }

    const data = this.data;
    const elementSize = this.elementSize;
    const faces = result.faces; // Reuse verts if possible

    result.vertices.length = 6;

    for (let i = 0; i < 6; i++) {
      if (!result.vertices[i]) {
        result.vertices[i] = new Vec3();
      }
    } // Reuse faces if possible


    faces.length = 5;

    for (let i = 0; i < 5; i++) {
      if (!faces[i]) {
        faces[i] = [];
      }
    }

    const verts = result.vertices;
    const h = (Math.min(data[xi][yi], data[xi + 1][yi], data[xi][yi + 1], data[xi + 1][yi + 1]) - this.minValue) / 2 + this.minValue;

    if (!getUpperTriangle) {
      // Center of the triangle pillar - all polygons are given relative to this one
      offsetResult.set((xi + 0.25) * elementSize, // sort of center of a triangle
      (yi + 0.25) * elementSize, h // vertical center
      ); // Top triangle verts

      verts[0].set(-0.25 * elementSize, -0.25 * elementSize, data[xi][yi] - h);
      verts[1].set(0.75 * elementSize, -0.25 * elementSize, data[xi + 1][yi] - h);
      verts[2].set(-0.25 * elementSize, 0.75 * elementSize, data[xi][yi + 1] - h); // bottom triangle verts

      verts[3].set(-0.25 * elementSize, -0.25 * elementSize, -Math.abs(h) - 1);
      verts[4].set(0.75 * elementSize, -0.25 * elementSize, -Math.abs(h) - 1);
      verts[5].set(-0.25 * elementSize, 0.75 * elementSize, -Math.abs(h) - 1); // top triangle

      faces[0][0] = 0;
      faces[0][1] = 1;
      faces[0][2] = 2; // bottom triangle

      faces[1][0] = 5;
      faces[1][1] = 4;
      faces[1][2] = 3; // -x facing quad

      faces[2][0] = 0;
      faces[2][1] = 2;
      faces[2][2] = 5;
      faces[2][3] = 3; // -y facing quad

      faces[3][0] = 1;
      faces[3][1] = 0;
      faces[3][2] = 3;
      faces[3][3] = 4; // +xy facing quad

      faces[4][0] = 4;
      faces[4][1] = 5;
      faces[4][2] = 2;
      faces[4][3] = 1;
    } else {
      // Center of the triangle pillar - all polygons are given relative to this one
      offsetResult.set((xi + 0.75) * elementSize, // sort of center of a triangle
      (yi + 0.75) * elementSize, h // vertical center
      ); // Top triangle verts

      verts[0].set(0.25 * elementSize, 0.25 * elementSize, data[xi + 1][yi + 1] - h);
      verts[1].set(-0.75 * elementSize, 0.25 * elementSize, data[xi][yi + 1] - h);
      verts[2].set(0.25 * elementSize, -0.75 * elementSize, data[xi + 1][yi] - h); // bottom triangle verts

      verts[3].set(0.25 * elementSize, 0.25 * elementSize, -Math.abs(h) - 1);
      verts[4].set(-0.75 * elementSize, 0.25 * elementSize, -Math.abs(h) - 1);
      verts[5].set(0.25 * elementSize, -0.75 * elementSize, -Math.abs(h) - 1); // Top triangle

      faces[0][0] = 0;
      faces[0][1] = 1;
      faces[0][2] = 2; // bottom triangle

      faces[1][0] = 5;
      faces[1][1] = 4;
      faces[1][2] = 3; // +x facing quad

      faces[2][0] = 2;
      faces[2][1] = 5;
      faces[2][2] = 3;
      faces[2][3] = 0; // +y facing quad

      faces[3][0] = 3;
      faces[3][1] = 4;
      faces[3][2] = 1;
      faces[3][3] = 0; // -xy facing quad

      faces[4][0] = 1;
      faces[4][1] = 4;
      faces[4][2] = 5;
      faces[4][3] = 2;
    }

    result.computeNormals();
    result.computeEdges();
    result.updateBoundingSphereRadius();
    this.setCachedConvexTrianglePillar(xi, yi, getUpperTriangle, result, offsetResult);
  }

  calculateLocalInertia(mass, target) {
    if (target === void 0) {
      target = new Vec3();
    }

    target.set(0, 0, 0);
    return target;
  }

  volume() {
    return (// The terrain is infinite
      Number.MAX_VALUE
    );
  }

  calculateWorldAABB(pos, quat, min, max) {
    /** @TODO do it properly */
    min.set(-Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE);
    max.set(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);
  }

  updateBoundingSphereRadius() {
    // Use the bounding box of the min/max values
    const data = this.data;
    const s = this.elementSize;
    this.boundingSphereRadius = new Vec3(data.length * s, data[0].length * s, Math.max(Math.abs(this.maxValue), Math.abs(this.minValue))).length();
  }
  /**
   * Sets the height values from an image. Currently only supported in browser.
   */


  setHeightsFromImage(image, scale) {
    const {
      x,
      z,
      y
    } = scale;
    const canvas = document.createElement('canvas');
    canvas.width = image.width;
    canvas.height = image.height;
    const context = canvas.getContext('2d');
    context.drawImage(image, 0, 0);
    const imageData = context.getImageData(0, 0, image.width, image.height);
    const matrix = this.data;
    matrix.length = 0;
    this.elementSize = Math.abs(x) / imageData.width;

    for (let i = 0; i < imageData.height; i++) {
      const row = [];

      for (let j = 0; j < imageData.width; j++) {
        const a = imageData.data[(i * imageData.height + j) * 4];
        const b = imageData.data[(i * imageData.height + j) * 4 + 1];
        const c = imageData.data[(i * imageData.height + j) * 4 + 2];
        const height = (a + b + c) / 4 / 255 * z;

        if (x < 0) {
          row.push(height);
        } else {
          row.unshift(height);
        }
      }

      if (y < 0) {
        matrix.unshift(row);
      } else {
        matrix.push(row);
      }
    }

    this.updateMaxValue();
    this.updateMinValue();
    this.update();
  }

}

const getHeightAt_idx = [];
const getHeightAt_weights = new Vec3();
const getHeightAt_a = new Vec3();
const getHeightAt_b = new Vec3();
const getHeightAt_c = new Vec3();
const getNormalAt_a = new Vec3();
const getNormalAt_b = new Vec3();
const getNormalAt_c = new Vec3();
const getNormalAt_e0 = new Vec3();
const getNormalAt_e1 = new Vec3(); // from https://en.wikipedia.org/wiki/Barycentric_coordinate_system

function barycentricWeights(x, y, ax, ay, bx, by, cx, cy, result) {
  result.x = ((by - cy) * (x - cx) + (cx - bx) * (y - cy)) / ((by - cy) * (ax - cx) + (cx - bx) * (ay - cy));
  result.y = ((cy - ay) * (x - cx) + (ax - cx) * (y - cy)) / ((by - cy) * (ax - cx) + (cx - bx) * (ay - cy));
  result.z = 1 - result.x - result.y;
}
/**
 * OctreeNode
 */


class OctreeNode {
  /** The root node */

  /** Boundary of this node */

  /** Contained data at the current node level */

  /** Children to this node */
  constructor(options) {
    if (options === void 0) {
      options = {};
    }

    this.root = void 0;
    this.aabb = void 0;
    this.data = void 0;
    this.children = void 0;
    this.root = options.root || null;
    this.aabb = options.aabb ? options.aabb.clone() : new AABB();
    this.data = [];
    this.children = [];
  }
  /**
   * reset
   */


  reset() {
    this.children.length = this.data.length = 0;
  }
  /**
   * Insert data into this node
   * @return True if successful, otherwise false
   */


  insert(aabb, elementData, level) {
    if (level === void 0) {
      level = 0;
    }

    const nodeData = this.data; // Ignore objects that do not belong in this node

    if (!this.aabb.contains(aabb)) {
      return false; // object cannot be added
    }

    const children = this.children;
    const maxDepth = this.maxDepth || this.root.maxDepth;

    if (level < maxDepth) {
      // Subdivide if there are no children yet
      let subdivided = false;

      if (!children.length) {
        this.subdivide();
        subdivided = true;
      } // add to whichever node will accept it


      for (let i = 0; i !== 8; i++) {
        if (children[i].insert(aabb, elementData, level + 1)) {
          return true;
        }
      }

      if (subdivided) {
        // No children accepted! Might as well just remove em since they contain none
        children.length = 0;
      }
    } // Too deep, or children didnt want it. add it in current node


    nodeData.push(elementData);
    return true;
  }
  /**
   * Create 8 equally sized children nodes and put them in the `children` array.
   */


  subdivide() {
    const aabb = this.aabb;
    const l = aabb.lowerBound;
    const u = aabb.upperBound;
    const children = this.children;
    children.push(new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(0, 0, 0)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(1, 0, 0)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(1, 1, 0)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(1, 1, 1)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(0, 1, 1)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(0, 0, 1)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(1, 0, 1)
      })
    }), new OctreeNode({
      aabb: new AABB({
        lowerBound: new Vec3(0, 1, 0)
      })
    }));
    u.vsub(l, halfDiagonal);
    halfDiagonal.scale(0.5, halfDiagonal);
    const root = this.root || this;

    for (let i = 0; i !== 8; i++) {
      const child = children[i]; // Set current node as root

      child.root = root; // Compute bounds

      const lowerBound = child.aabb.lowerBound;
      lowerBound.x *= halfDiagonal.x;
      lowerBound.y *= halfDiagonal.y;
      lowerBound.z *= halfDiagonal.z;
      lowerBound.vadd(l, lowerBound); // Upper bound is always lower bound + halfDiagonal

      lowerBound.vadd(halfDiagonal, child.aabb.upperBound);
    }
  }
  /**
   * Get all data, potentially within an AABB
   * @return The "result" object
   */


  aabbQuery(aabb, result) {
    this.data; // abort if the range does not intersect this node
    // if (!this.aabb.overlaps(aabb)){
    //     return result;
    // }
    // Add objects at this level
    // Array.prototype.push.apply(result, nodeData);
    // Add child data
    // @todo unwrap recursion into a queue / loop, that's faster in JS

    this.children; // for (let i = 0, N = this.children.length; i !== N; i++) {
    //     children[i].aabbQuery(aabb, result);
    // }

    const queue = [this];

    while (queue.length) {
      const node = queue.pop();

      if (node.aabb.overlaps(aabb)) {
        Array.prototype.push.apply(result, node.data);
      }

      Array.prototype.push.apply(queue, node.children);
    }

    return result;
  }
  /**
   * Get all data, potentially intersected by a ray.
   * @return The "result" object
   */


  rayQuery(ray, treeTransform, result) {
    // Use aabb query for now.

    /** @todo implement real ray query which needs less lookups */
    ray.getAABB(tmpAABB);
    tmpAABB.toLocalFrame(treeTransform, tmpAABB);
    this.aabbQuery(tmpAABB, result);
    return result;
  }
  /**
   * removeEmptyNodes
   */


  removeEmptyNodes() {
    for (let i = this.children.length - 1; i >= 0; i--) {
      this.children[i].removeEmptyNodes();

      if (!this.children[i].children.length && !this.children[i].data.length) {
        this.children.splice(i, 1);
      }
    }
  }

}
/**
 * Octree
 */


class Octree extends OctreeNode {
  /**
   * Maximum subdivision depth
   * @default 8
   */

  /**
   * @param aabb The total AABB of the tree
   */
  constructor(aabb, options) {
    if (options === void 0) {
      options = {};
    }

    super({
      root: null,
      aabb
    });
    this.maxDepth = void 0;
    this.maxDepth = typeof options.maxDepth !== 'undefined' ? options.maxDepth : 8;
  }

}

const halfDiagonal = new Vec3();
const tmpAABB = new AABB();
/**
 * Trimesh.
 * @example
 *     // How to make a mesh with a single triangle
 *     const vertices = [
 *         0, 0, 0, // vertex 0
 *         1, 0, 0, // vertex 1
 *         0, 1, 0  // vertex 2
 *     ]
 *     const indices = [
 *         0, 1, 2  // triangle 0
 *     ]
 *     const trimeshShape = new CANNON.Trimesh(vertices, indices)
 */

class Trimesh extends Shape {
  /**
   * vertices
   */

  /**
   * Array of integers, indicating which vertices each triangle consists of. The length of this array is thus 3 times the number of triangles.
   */

  /**
   * The normals data.
   */

  /**
   * The local AABB of the mesh.
   */

  /**
   * References to vertex pairs, making up all unique edges in the trimesh.
   */

  /**
   * Local scaling of the mesh. Use .setScale() to set it.
   */

  /**
   * The indexed triangles. Use .updateTree() to update it.
   */
  constructor(vertices, indices) {
    super({
      type: Shape.types.TRIMESH
    });
    this.vertices = void 0;
    this.indices = void 0;
    this.normals = void 0;
    this.aabb = void 0;
    this.edges = void 0;
    this.scale = void 0;
    this.tree = void 0;
    this.vertices = new Float32Array(vertices);
    this.indices = new Int16Array(indices);
    this.normals = new Float32Array(indices.length);
    this.aabb = new AABB();
    this.edges = null;
    this.scale = new Vec3(1, 1, 1);
    this.tree = new Octree();
    this.updateEdges();
    this.updateNormals();
    this.updateAABB();
    this.updateBoundingSphereRadius();
    this.updateTree();
  }
  /**
   * updateTree
   */


  updateTree() {
    const tree = this.tree;
    tree.reset();
    tree.aabb.copy(this.aabb);
    const scale = this.scale; // The local mesh AABB is scaled, but the octree AABB should be unscaled

    tree.aabb.lowerBound.x *= 1 / scale.x;
    tree.aabb.lowerBound.y *= 1 / scale.y;
    tree.aabb.lowerBound.z *= 1 / scale.z;
    tree.aabb.upperBound.x *= 1 / scale.x;
    tree.aabb.upperBound.y *= 1 / scale.y;
    tree.aabb.upperBound.z *= 1 / scale.z; // Insert all triangles

    const triangleAABB = new AABB();
    const a = new Vec3();
    const b = new Vec3();
    const c = new Vec3();
    const points = [a, b, c];

    for (let i = 0; i < this.indices.length / 3; i++) {
      //this.getTriangleVertices(i, a, b, c);
      // Get unscaled triangle verts
      const i3 = i * 3;

      this._getUnscaledVertex(this.indices[i3], a);

      this._getUnscaledVertex(this.indices[i3 + 1], b);

      this._getUnscaledVertex(this.indices[i3 + 2], c);

      triangleAABB.setFromPoints(points);
      tree.insert(triangleAABB, i);
    }

    tree.removeEmptyNodes();
  }
  /**
   * Get triangles in a local AABB from the trimesh.
   * @param result An array of integers, referencing the queried triangles.
   */


  getTrianglesInAABB(aabb, result) {
    unscaledAABB.copy(aabb); // Scale it to local

    const scale = this.scale;
    const isx = scale.x;
    const isy = scale.y;
    const isz = scale.z;
    const l = unscaledAABB.lowerBound;
    const u = unscaledAABB.upperBound;
    l.x /= isx;
    l.y /= isy;
    l.z /= isz;
    u.x /= isx;
    u.y /= isy;
    u.z /= isz;
    return this.tree.aabbQuery(unscaledAABB, result);
  }
  /**
   * setScale
   */


  setScale(scale) {
    const wasUniform = this.scale.x === this.scale.y && this.scale.y === this.scale.z;
    const isUniform = scale.x === scale.y && scale.y === scale.z;

    if (!(wasUniform && isUniform)) {
      // Non-uniform scaling. Need to update normals.
      this.updateNormals();
    }

    this.scale.copy(scale);
    this.updateAABB();
    this.updateBoundingSphereRadius();
  }
  /**
   * Compute the normals of the faces. Will save in the `.normals` array.
   */


  updateNormals() {
    const n = computeNormals_n; // Generate normals

    const normals = this.normals;

    for (let i = 0; i < this.indices.length / 3; i++) {
      const i3 = i * 3;
      const a = this.indices[i3];
      const b = this.indices[i3 + 1];
      const c = this.indices[i3 + 2];
      this.getVertex(a, va);
      this.getVertex(b, vb);
      this.getVertex(c, vc);
      Trimesh.computeNormal(vb, va, vc, n);
      normals[i3] = n.x;
      normals[i3 + 1] = n.y;
      normals[i3 + 2] = n.z;
    }
  }
  /**
   * Update the `.edges` property
   */


  updateEdges() {
    const edges = {};

    const add = (a, b) => {
      const key = a < b ? a + "_" + b : b + "_" + a;
      edges[key] = true;
    };

    for (let i = 0; i < this.indices.length / 3; i++) {
      const i3 = i * 3;
      const a = this.indices[i3];
      const b = this.indices[i3 + 1];
      const c = this.indices[i3 + 2];
      add(a, b);
      add(b, c);
      add(c, a);
    }

    const keys = Object.keys(edges);
    this.edges = new Int16Array(keys.length * 2);

    for (let i = 0; i < keys.length; i++) {
      const indices = keys[i].split('_');
      this.edges[2 * i] = parseInt(indices[0], 10);
      this.edges[2 * i + 1] = parseInt(indices[1], 10);
    }
  }
  /**
   * Get an edge vertex
   * @param firstOrSecond 0 or 1, depending on which one of the vertices you need.
   * @param vertexStore Where to store the result
   */


  getEdgeVertex(edgeIndex, firstOrSecond, vertexStore) {
    const vertexIndex = this.edges[edgeIndex * 2 + (firstOrSecond ? 1 : 0)];
    this.getVertex(vertexIndex, vertexStore);
  }
  /**
   * Get a vector along an edge.
   */


  getEdgeVector(edgeIndex, vectorStore) {
    const va = getEdgeVector_va;
    const vb = getEdgeVector_vb;
    this.getEdgeVertex(edgeIndex, 0, va);
    this.getEdgeVertex(edgeIndex, 1, vb);
    vb.vsub(va, vectorStore);
  }
  /**
   * Get face normal given 3 vertices
   */


  static computeNormal(va, vb, vc, target) {
    vb.vsub(va, ab);
    vc.vsub(vb, cb);
    cb.cross(ab, target);

    if (!target.isZero()) {
      target.normalize();
    }
  }
  /**
   * Get vertex i.
   * @return The "out" vector object
   */


  getVertex(i, out) {
    const scale = this.scale;

    this._getUnscaledVertex(i, out);

    out.x *= scale.x;
    out.y *= scale.y;
    out.z *= scale.z;
    return out;
  }
  /**
   * Get raw vertex i
   * @return The "out" vector object
   */


  _getUnscaledVertex(i, out) {
    const i3 = i * 3;
    const vertices = this.vertices;
    return out.set(vertices[i3], vertices[i3 + 1], vertices[i3 + 2]);
  }
  /**
   * Get a vertex from the trimesh,transformed by the given position and quaternion.
   * @return The "out" vector object
   */


  getWorldVertex(i, pos, quat, out) {
    this.getVertex(i, out);
    Transform.pointToWorldFrame(pos, quat, out, out);
    return out;
  }
  /**
   * Get the three vertices for triangle i.
   */


  getTriangleVertices(i, a, b, c) {
    const i3 = i * 3;
    this.getVertex(this.indices[i3], a);
    this.getVertex(this.indices[i3 + 1], b);
    this.getVertex(this.indices[i3 + 2], c);
  }
  /**
   * Compute the normal of triangle i.
   * @return The "target" vector object
   */


  getNormal(i, target) {
    const i3 = i * 3;
    return target.set(this.normals[i3], this.normals[i3 + 1], this.normals[i3 + 2]);
  }
  /**
   * @return The "target" vector object
   */


  calculateLocalInertia(mass, target) {
    // Approximate with box inertia
    // Exact inertia calculation is overkill, but see http://geometrictools.com/Documentation/PolyhedralMassProperties.pdf for the correct way to do it
    this.computeLocalAABB(cli_aabb);
    const x = cli_aabb.upperBound.x - cli_aabb.lowerBound.x;
    const y = cli_aabb.upperBound.y - cli_aabb.lowerBound.y;
    const z = cli_aabb.upperBound.z - cli_aabb.lowerBound.z;
    return target.set(1.0 / 12.0 * mass * (2 * y * 2 * y + 2 * z * 2 * z), 1.0 / 12.0 * mass * (2 * x * 2 * x + 2 * z * 2 * z), 1.0 / 12.0 * mass * (2 * y * 2 * y + 2 * x * 2 * x));
  }
  /**
   * Compute the local AABB for the trimesh
   */


  computeLocalAABB(aabb) {
    const l = aabb.lowerBound;
    const u = aabb.upperBound;
    const n = this.vertices.length;
    this.vertices;
    const v = computeLocalAABB_worldVert;
    this.getVertex(0, v);
    l.copy(v);
    u.copy(v);

    for (let i = 0; i !== n; i++) {
      this.getVertex(i, v);

      if (v.x < l.x) {
        l.x = v.x;
      } else if (v.x > u.x) {
        u.x = v.x;
      }

      if (v.y < l.y) {
        l.y = v.y;
      } else if (v.y > u.y) {
        u.y = v.y;
      }

      if (v.z < l.z) {
        l.z = v.z;
      } else if (v.z > u.z) {
        u.z = v.z;
      }
    }
  }
  /**
   * Update the `.aabb` property
   */


  updateAABB() {
    this.computeLocalAABB(this.aabb);
  }
  /**
   * Will update the `.boundingSphereRadius` property
   */


  updateBoundingSphereRadius() {
    // Assume points are distributed with local (0,0,0) as center
    let max2 = 0;
    const vertices = this.vertices;
    const v = new Vec3();

    for (let i = 0, N = vertices.length / 3; i !== N; i++) {
      this.getVertex(i, v);
      const norm2 = v.lengthSquared();

      if (norm2 > max2) {
        max2 = norm2;
      }
    }

    this.boundingSphereRadius = Math.sqrt(max2);
  }
  /**
   * calculateWorldAABB
   */


  calculateWorldAABB(pos, quat, min, max) {
    /*
        const n = this.vertices.length / 3,
            verts = this.vertices;
        const minx,miny,minz,maxx,maxy,maxz;
         const v = tempWorldVertex;
        for(let i=0; i<n; i++){
            this.getVertex(i, v);
            quat.vmult(v, v);
            pos.vadd(v, v);
            if (v.x < minx || minx===undefined){
                minx = v.x;
            } else if(v.x > maxx || maxx===undefined){
                maxx = v.x;
            }
             if (v.y < miny || miny===undefined){
                miny = v.y;
            } else if(v.y > maxy || maxy===undefined){
                maxy = v.y;
            }
             if (v.z < minz || minz===undefined){
                minz = v.z;
            } else if(v.z > maxz || maxz===undefined){
                maxz = v.z;
            }
        }
        min.set(minx,miny,minz);
        max.set(maxx,maxy,maxz);
        */
    // Faster approximation using local AABB
    const frame = calculateWorldAABB_frame;
    const result = calculateWorldAABB_aabb;
    frame.position = pos;
    frame.quaternion = quat;
    this.aabb.toWorldFrame(frame, result);
    min.copy(result.lowerBound);
    max.copy(result.upperBound);
  }
  /**
   * Get approximate volume
   */


  volume() {
    return 4.0 * Math.PI * this.boundingSphereRadius / 3.0;
  }
  /**
   * Create a Trimesh instance, shaped as a torus.
   */


  static createTorus(radius, tube, radialSegments, tubularSegments, arc) {
    if (radius === void 0) {
      radius = 1;
    }

    if (tube === void 0) {
      tube = 0.5;
    }

    if (radialSegments === void 0) {
      radialSegments = 8;
    }

    if (tubularSegments === void 0) {
      tubularSegments = 6;
    }

    if (arc === void 0) {
      arc = Math.PI * 2;
    }

    const vertices = [];
    const indices = [];

    for (let j = 0; j <= radialSegments; j++) {
      for (let i = 0; i <= tubularSegments; i++) {
        const u = i / tubularSegments * arc;
        const v = j / radialSegments * Math.PI * 2;
        const x = (radius + tube * Math.cos(v)) * Math.cos(u);
        const y = (radius + tube * Math.cos(v)) * Math.sin(u);
        const z = tube * Math.sin(v);
        vertices.push(x, y, z);
      }
    }

    for (let j = 1; j <= radialSegments; j++) {
      for (let i = 1; i <= tubularSegments; i++) {
        const a = (tubularSegments + 1) * j + i - 1;
        const b = (tubularSegments + 1) * (j - 1) + i - 1;
        const c = (tubularSegments + 1) * (j - 1) + i;
        const d = (tubularSegments + 1) * j + i;
        indices.push(a, b, d);
        indices.push(b, c, d);
      }
    }

    return new Trimesh(vertices, indices);
  }

}

const computeNormals_n = new Vec3();
const unscaledAABB = new AABB();
const getEdgeVector_va = new Vec3();
const getEdgeVector_vb = new Vec3();
const cb = new Vec3();
const ab = new Vec3();
const va = new Vec3();
const vb = new Vec3();
const vc = new Vec3();
const cli_aabb = new AABB();
const computeLocalAABB_worldVert = new Vec3();
const calculateWorldAABB_frame = new Transform();
const calculateWorldAABB_aabb = new AABB();
// the first part of the method is formed by the
// shape type that comes before, in the second part
// there is the shape type that comes after in the SHAPE_TYPES list


({
  sphereSphere: Shape.types.SPHERE,
  spherePlane: Shape.types.SPHERE | Shape.types.PLANE,
  boxBox: Shape.types.BOX | Shape.types.BOX,
  sphereBox: Shape.types.SPHERE | Shape.types.BOX,
  planeBox: Shape.types.PLANE | Shape.types.BOX,
  convexConvex: Shape.types.CONVEXPOLYHEDRON,
  sphereConvex: Shape.types.SPHERE | Shape.types.CONVEXPOLYHEDRON,
  planeConvex: Shape.types.PLANE | Shape.types.CONVEXPOLYHEDRON,
  boxConvex: Shape.types.BOX | Shape.types.CONVEXPOLYHEDRON,
  sphereHeightfield: Shape.types.SPHERE | Shape.types.HEIGHTFIELD,
  boxHeightfield: Shape.types.BOX | Shape.types.HEIGHTFIELD,
  convexHeightfield: Shape.types.CONVEXPOLYHEDRON | Shape.types.HEIGHTFIELD,
  sphereParticle: Shape.types.PARTICLE | Shape.types.SPHERE,
  planeParticle: Shape.types.PLANE | Shape.types.PARTICLE,
  boxParticle: Shape.types.BOX | Shape.types.PARTICLE,
  convexParticle: Shape.types.PARTICLE | Shape.types.CONVEXPOLYHEDRON,
  cylinderCylinder: Shape.types.CYLINDER,
  sphereCylinder: Shape.types.SPHERE | Shape.types.CYLINDER,
  planeCylinder: Shape.types.PLANE | Shape.types.CYLINDER,
  boxCylinder: Shape.types.BOX | Shape.types.CYLINDER,
  convexCylinder: Shape.types.CONVEXPOLYHEDRON | Shape.types.CYLINDER,
  heightfieldCylinder: Shape.types.HEIGHTFIELD | Shape.types.CYLINDER,
  particleCylinder: Shape.types.PARTICLE | Shape.types.CYLINDER,
  sphereTrimesh: Shape.types.SPHERE | Shape.types.TRIMESH,
  planeTrimesh: Shape.types.PLANE | Shape.types.TRIMESH
});

new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Quaternion();
new Quaternion();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new AABB();
new Vec3();
new Vec3(); // See http://bulletphysics.com/Bullet/BulletFull/SphereTriangleDetector_8cpp_source.html

new Vec3();
new Vec3();
new Vec3();

new Vec3();
new Vec3();
new Vec3();
new Vec3();
[new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3(), new Vec3()];
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3(); // WIP

new Quaternion();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();
new Vec3();


new AABB();
new Ray(); // performance.now() fallback on Date.now()

const performance = globalThis.performance || {};

if (!performance.now) {
  let nowOffset = Date.now();

  if (performance.timing && performance.timing.navigationStart) {
    nowOffset = performance.timing.navigationStart;
  }

  performance.now = () => Date.now() - nowOffset;
} // Reusable event objects to save memory.

function CannonDebugger(scene, world, _temp) {
  let {
    color = 0x00ff00,
    scale = 1,
    onInit,
    onUpdate
  } = _temp === void 0 ? {} : _temp;
  const _meshes = [];

  const _material = new MeshBasicMaterial({
    color: color != null ? color : 0x00ff00,
    wireframe: true
  });

  const _tempVec0 = new Vec3();

  const _tempVec1 = new Vec3();

  const _tempVec2 = new Vec3();

  const _tempQuat0 = new Quaternion();

  const _sphereGeometry = new SphereGeometry(1);

  const _boxGeometry = new BoxGeometry(1, 1, 1);

  const _planeGeometry = new PlaneGeometry(10, 10, 10, 10); // Move the planeGeometry forward a little bit to prevent z-fighting


  _planeGeometry.translate(0, 0, 0.0001);

  function createConvexPolyhedronGeometry(shape) {
    const geometry = new BufferGeometry(); // Add vertices

    const positions = [];

    for (let i = 0; i < shape.vertices.length; i++) {
      const vertex = shape.vertices[i];
      positions.push(vertex.x, vertex.y, vertex.z);
    }

    geometry.setAttribute('position', new Float32BufferAttribute(positions, 3)); // Add faces

    const indices = [];

    for (let i = 0; i < shape.faces.length; i++) {
      const face = shape.faces[i];
      const a = face[0];

      for (let j = 1; j < face.length - 1; j++) {
        const b = face[j];
        const c = face[j + 1];
        indices.push(a, b, c);
      }
    }

    geometry.setIndex(indices);
    geometry.computeBoundingSphere();
    geometry.computeVertexNormals();
    return geometry;
  }

  function createTrimeshGeometry(shape) {
    const geometry = new BufferGeometry();
    const positions = [];
    const v0 = _tempVec0;
    const v1 = _tempVec1;
    const v2 = _tempVec2;

    for (let i = 0; i < shape.indices.length / 3; i++) {
      shape.getTriangleVertices(i, v0, v1, v2);
      positions.push(v0.x, v0.y, v0.z);
      positions.push(v1.x, v1.y, v1.z);
      positions.push(v2.x, v2.y, v2.z);
    }

    geometry.setAttribute('position', new Float32BufferAttribute(positions, 3));
    geometry.computeBoundingSphere();
    geometry.computeVertexNormals();
    return geometry;
  }

  function createHeightfieldGeometry(shape) {
    const geometry = new BufferGeometry();
    const s = shape.elementSize || 1; // assumes square heightfield, else i*x, j*y

    const positions = shape.data.flatMap((row, i) => row.flatMap((z, j) => [i * s, j * s, z]));
    const indices = [];

    for (let xi = 0; xi < shape.data.length - 1; xi++) {
      for (let yi = 0; yi < shape.data[xi].length - 1; yi++) {
        const stride = shape.data[xi].length;
        const index = xi * stride + yi;
        indices.push(index + 1, index + stride, index + stride + 1);
        indices.push(index + stride, index + 1, index);
      }
    }

    geometry.setIndex(indices);
    geometry.setAttribute('position', new Float32BufferAttribute(positions, 3));
    geometry.computeBoundingSphere();
    geometry.computeVertexNormals();
    return geometry;
  }

  function createMesh(shape) {
    let mesh = new Mesh();
    const {
      SPHERE,
      BOX,
      PLANE,
      CYLINDER,
      CONVEXPOLYHEDRON,
      TRIMESH,
      HEIGHTFIELD
    } = Shape.types;

    switch (shape.type) {
      case SPHERE:
        {
          mesh = new Mesh(_sphereGeometry, _material);
          break;
        }

      case BOX:
        {
          mesh = new Mesh(_boxGeometry, _material);
          break;
        }

      case PLANE:
        {
          mesh = new Mesh(_planeGeometry, _material);
          break;
        }

      case CYLINDER:
        {
          const geometry = new CylinderGeometry(shape.radiusTop, shape.radiusBottom, shape.height, shape.numSegments);
          mesh = new Mesh(geometry, _material);
          shape.geometryId = geometry.id;
          break;
        }

      case CONVEXPOLYHEDRON:
        {
          const geometry = createConvexPolyhedronGeometry(shape);
          mesh = new Mesh(geometry, _material);
          shape.geometryId = geometry.id;
          break;
        }

      case TRIMESH:
        {
          const geometry = createTrimeshGeometry(shape);
          mesh = new Mesh(geometry, _material);
          shape.geometryId = geometry.id;
          break;
        }

      case HEIGHTFIELD:
        {
          const geometry = createHeightfieldGeometry(shape);
          mesh = new Mesh(geometry, _material);
          shape.geometryId = geometry.id;
          break;
        }
    }

    scene.add(mesh);
    return mesh;
  }

  function scaleMesh(mesh, shape) {
    const {
      SPHERE,
      BOX,
      PLANE,
      CYLINDER,
      CONVEXPOLYHEDRON,
      TRIMESH,
      HEIGHTFIELD
    } = Shape.types;

    switch (shape.type) {
      case SPHERE:
        {
          const {
            radius
          } = shape;
          mesh.scale.set(radius * scale, radius * scale, radius * scale);
          break;
        }

      case BOX:
        {
          mesh.scale.copy(shape.halfExtents);
          mesh.scale.multiplyScalar(2 * scale);
          break;
        }

      case PLANE:
        {
          break;
        }

      case CYLINDER:
        {
          mesh.scale.set(1 * scale, 1 * scale, 1 * scale);
          break;
        }

      case CONVEXPOLYHEDRON:
        {
          mesh.scale.set(1 * scale, 1 * scale, 1 * scale);
          break;
        }

      case TRIMESH:
        {
          mesh.scale.copy(shape.scale).multiplyScalar(scale);
          break;
        }

      case HEIGHTFIELD:
        {
          mesh.scale.set(1 * scale, 1 * scale, 1 * scale);
          break;
        }
    }
  }

  function typeMatch(mesh, shape) {
    if (!mesh) return false;
    const {
      geometry
    } = mesh;
    return geometry instanceof SphereGeometry && shape.type === Shape.types.SPHERE || geometry instanceof BoxGeometry && shape.type === Shape.types.BOX || geometry instanceof PlaneGeometry && shape.type === Shape.types.PLANE || geometry.id === shape.geometryId && shape.type === Shape.types.CYLINDER || geometry.id === shape.geometryId && shape.type === Shape.types.CONVEXPOLYHEDRON || geometry.id === shape.geometryId && shape.type === Shape.types.TRIMESH || geometry.id === shape.geometryId && shape.type === Shape.types.HEIGHTFIELD;
  }

  function updateMesh(index, shape) {
    let mesh = _meshes[index];
    let didCreateNewMesh = false;

    if (!typeMatch(mesh, shape)) {
      if (mesh) scene.remove(mesh);
      _meshes[index] = mesh = createMesh(shape);
      didCreateNewMesh = true;
    }

    scaleMesh(mesh, shape);
    return didCreateNewMesh;
  }

  function update() {
    const meshes = _meshes;
    const shapeWorldPosition = _tempVec0;
    const shapeWorldQuaternion = _tempQuat0;
    let meshIndex = 0;

    for (const body of world.bodies) {
      for (let i = 0; i !== body.shapes.length; i++) {
        const shape = body.shapes[i];
        const didCreateNewMesh = updateMesh(meshIndex, shape);
        const mesh = meshes[meshIndex];

        if (mesh) {
          // Get world position
          body.quaternion.vmult(body.shapeOffsets[i], shapeWorldPosition);
          body.position.vadd(shapeWorldPosition, shapeWorldPosition); // Get world quaternion

          body.quaternion.mult(body.shapeOrientations[i], shapeWorldQuaternion); // Copy to meshes

          mesh.position.copy(shapeWorldPosition);
          mesh.quaternion.copy(shapeWorldQuaternion);
          if (didCreateNewMesh && onInit instanceof Function) onInit(body, mesh, shape);
          if (!didCreateNewMesh && onUpdate instanceof Function) onUpdate(body, mesh, shape);
        }

        meshIndex++;
      }
    }

    for (let i = meshIndex; i < meshes.length; i++) {
      const mesh = meshes[i];
      if (mesh) scene.remove(mesh);
    }

    meshes.length = meshIndex;
  }

  return {
    update
  };
}

const makeVec3 = _ref => {
  let [x, y, z] = _ref;
  return new Vec3(x, y, z);
};

const prepareSphere = args => Array.isArray(args) ? args : [args];

const prepareConvexPolyhedron = _ref2 => {
  let [v, faces, n, a, boundingSphereRadius] = _ref2;
  return [{
    vertices: v ? v.map(makeVec3) : undefined,
    faces,
    normals: n ? n.map(makeVec3) : undefined,
    axes: a ? a.map(makeVec3) : undefined,
    boundingSphereRadius
  }];
};

function createShape(type, args) {
  switch (type) {
    case 'Box':
      return new Box(new Vec3(...args.map(v => v / 2)));
    // extents => halfExtents

    case 'ConvexPolyhedron':
      return new ConvexPolyhedron(...prepareConvexPolyhedron(args));

    case 'Cylinder':
      return new Cylinder(...args);
    // [ radiusTop, radiusBottom, height, numSegments ] = args

    case 'Heightfield':
      return new Heightfield(...args);
    // [ Array data, options: {minValue, maxValue, elementSize}  ] = args

    case 'Particle':
      return new Particle();
    // no args

    case 'Plane':
      return new Plane();
    // no args, infinite x and y

    case 'Sphere':
      return new Sphere(...prepareSphere(args));
    // radius = args

    case 'Trimesh':
      return new Trimesh(...args);
    // [vertices, indices] = args
  }
}
/**
 *
 * @param uuid {string}
 * @param props {BodyProps}
 * @param type {BodyShapeType}
 * @return {module:objects/Body.Body}
 */


const propsToBody = (uuid, props, type) => {
  const {
    args = [],
    position = [0, 0, 0],
    rotation = [0, 0, 0],
    velocity = [0, 0, 0],
    angularVelocity = [0, 0, 0],
    linearFactor = [1, 1, 1],
    angularFactor = [1, 1, 1],
    type: bodyType,
    mass,
    material,
    shapes,
    onCollide,
    collisionResponse,
    ...extra
  } = props;
  const body = new Body({ ...extra,
    mass: bodyType === 'Static' ? 0 : mass,
    type: bodyType ? Body[bodyType.toUpperCase()] : undefined,
    material: material ? new Material(material) : undefined
  });
  body.uuid = uuid;

  if (collisionResponse !== undefined) {
    body.collisionResponse = collisionResponse;
  }

  if (type === 'Compound') {
    shapes.forEach(_ref3 => {
      let {
        type,
        args,
        position,
        rotation,
        material,
        ...extra
      } = _ref3;
      const shapeBody = body.addShape(createShape(type, args), position ? new Vec3(...position) : undefined, rotation ? new Quaternion().setFromEuler(...rotation) : undefined);
      if (material) shapeBody.material = new Material(material);
      Object.assign(shapeBody, extra);
    });
  } else {
    body.addShape(createShape(type, args));
  }

  body.position.set(position[0], position[1], position[2]);
  body.quaternion.setFromEuler(rotation[0], rotation[1], rotation[2]);
  body.velocity.set(velocity[0], velocity[1], velocity[2]);
  body.angularVelocity.set(angularVelocity[0], angularVelocity[1], angularVelocity[2]);
  body.linearFactor.set(linearFactor[0], linearFactor[1], linearFactor[2]);
  body.angularFactor.set(angularFactor[0], angularFactor[1], angularFactor[2]);
  return body;
};

var propsToBody$1 = propsToBody;

const v = new Vector3();
const s = new Vector3(1, 1, 1);
const q$1 = new Quaternion$1();
function Debug(_ref) {
  let {
    children,
    color = 'black',
    impl = CannonDebugger,
    scale = 1
  } = _ref;
  const [{
    bodies,
    bodyMap
  }] = useState({
    bodyMap: {},
    bodies: []
  });
  const {
    refs
  } = useContext(context);
  const [scene] = useState(() => new Scene());
  const cannonDebuggerRef = useRef(impl(scene, {
    bodies
  }, {
    color,
    scale
  }));
  useFrame(() => {
    for (const uuid in bodyMap) {
      refs[uuid].matrix.decompose(v, q$1, s);
      bodyMap[uuid].position.copy(v);
      bodyMap[uuid].quaternion.copy(q$1);
    }

    cannonDebuggerRef.current.update();
  });
  const api = useMemo(() => ({
    add(uuid, props, type) {
      const body = propsToBody$1(uuid, props, type);
      bodies.push(body);
      bodyMap[uuid] = body;
    },

    remove(uuid) {
      const index = bodies.indexOf(bodyMap[uuid]);
      if (index !== -1) bodies.splice(index, 1);
      delete bodyMap[uuid];
    }

  }), []);
  return /*#__PURE__*/jsxs(debugContext.Provider, {
    value: api,
    children: [/*#__PURE__*/jsx("primitive", {
      object: scene
    }), children]
  });
}

const temp = new Object3D();

function useForwardedRef(ref) {
  const nullRef = useRef(null);
  return ref && typeof ref !== 'function' ? ref : nullRef;
}

function capitalize(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}

function getUUID(ref, index) {
  const suffix = index === undefined ? '' : `/${index}`;
  if (typeof ref === 'function') return null;
  return ref && ref.current && `${ref.current.uuid}${suffix}`;
}

const e = new Euler();
const q = new Quaternion$1();

const quaternionToRotation = callback => {
  return v => callback(e.setFromQuaternion(q.fromArray(v)).toArray());
};

let incrementingId = 0;

function subscribe(ref, worker, subscriptions, type, index, target) {
  if (target === void 0) {
    target = 'bodies';
  }

  return callback => {
    const id = incrementingId++;
    subscriptions[id] = {
      [type]: callback
    };
    const uuid = getUUID(ref, index);
    uuid && worker.postMessage({
      op: 'subscribe',
      uuid,
      props: {
        id,
        type,
        target
      }
    });
    return () => {
      delete subscriptions[id];
      worker.postMessage({
        op: 'unsubscribe',
        props: id
      });
    };
  };
}

function prepare(object, props) {
  object.userData = props.userData || {};
  object.position.set(...(props.position || [0, 0, 0]));
  object.rotation.set(...(props.rotation || [0, 0, 0]));
  object.updateMatrix();
}

function setupCollision(events, _ref, uuid) {
  let {
    onCollide,
    onCollideBegin,
    onCollideEnd
  } = _ref;
  events[uuid] = {
    collide: onCollide,
    collideBegin: onCollideBegin,
    collideEnd: onCollideEnd
  };
}

function useBody(type, fn, argsFn, fwdRef, deps) {
  if (deps === void 0) {
    deps = [];
  }

  const ref = useForwardedRef(fwdRef);
  const {
    worker,
    refs,
    events,
    subscriptions
  } = useContext(context);
  const debugApi = useContext(debugContext);
  useLayoutEffect(() => {
    if (!ref.current) {
      // When the reference isn't used we create a stub
      // The body doesn't have a visual representation but can still be constrained
      ref.current = new Object3D();
    }

    const object = ref.current;
    const currentWorker = worker;
    const objectCount = object instanceof InstancedMesh ? (object.instanceMatrix.setUsage(DynamicDrawUsage), object.count) : 1;
    const uuid = object instanceof InstancedMesh ? new Array(objectCount).fill(0).map((_, i) => `${object.uuid}/${i}`) : [object.uuid];
    const props = object instanceof InstancedMesh ? uuid.map((id, i) => {
      const props = fn(i);
      prepare(temp, props);
      object.setMatrixAt(i, temp.matrix);
      object.instanceMatrix.needsUpdate = true;
      refs[id] = object;
      if (debugApi) debugApi.add(id, props, type);
      setupCollision(events, props, id);
      return { ...props,
        args: argsFn(props.args)
      };
    }) : uuid.map((id, i) => {
      const props = fn(i);
      prepare(object, props);
      refs[id] = object;
      if (debugApi) debugApi.add(id, props, type);
      setupCollision(events, props, id);
      return { ...props,
        args: argsFn(props.args)
      };
    }); // Register on mount, unregister on unmount

    currentWorker.postMessage({
      op: 'addBodies',
      type,
      uuid,
      props: props.map(_ref2 => {
        let {
          onCollide,
          onCollideBegin,
          onCollideEnd,
          ...serializableProps
        } = _ref2;
        return {
          onCollide: Boolean(onCollide),
          ...serializableProps
        };
      })
    });
    return () => {
      uuid.forEach(id => {
        delete refs[id];
        if (debugApi) debugApi.remove(id);
        delete events[id];
      });
      currentWorker.postMessage({
        op: 'removeBodies',
        uuid
      });
    };
  }, deps);
  const api = useMemo(() => {
    const makeAtomic = (type, index) => {
      const op = `set${capitalize(type)}`;
      return {
        set: value => {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op,
            props: value,
            uuid
          });
        },
        subscribe: subscribe(ref, worker, subscriptions, type, index)
      };
    };

    const makeQuaternion = index => {
      const op = 'setQuaternion';
      const type = 'quaternion';
      return {
        set: (x, y, z, w) => {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op,
            props: [x, y, z, w],
            uuid
          });
        },
        copy: _ref3 => {
          let {
            w,
            x,
            y,
            z
          } = _ref3;
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op,
            props: [x, y, z, w],
            uuid
          });
        },
        subscribe: subscribe(ref, worker, subscriptions, type, index)
      };
    };

    const makeRotation = index => {
      const op = 'setRotation';
      return {
        set: (x, y, z) => {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op,
            props: [x, y, z],
            uuid
          });
        },
        copy: _ref4 => {
          let {
            x,
            y,
            z
          } = _ref4;
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op,
            props: [x, y, z],
            uuid
          });
        },
        subscribe: callback => {
          const id = incrementingId++;
          const target = 'bodies';
          const type = 'quaternion';
          const uuid = getUUID(ref, index);
          subscriptions[id] = {
            [type]: quaternionToRotation(callback)
          };
          uuid && worker.postMessage({
            op: 'subscribe',
            uuid,
            props: {
              id,
              type,
              target
            }
          });
          return () => {
            delete subscriptions[id];
            worker.postMessage({
              op: 'unsubscribe',
              props: id
            });
          };
        }
      };
    };

    const makeVec = (type, index) => {
      const op = `set${capitalize(type)}`;
      return {
        set: (x, y, z) => {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op,
            props: [x, y, z],
            uuid
          });
        },
        copy: _ref5 => {
          let {
            x,
            y,
            z
          } = _ref5;
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op,
            props: [x, y, z],
            uuid
          });
        },
        subscribe: subscribe(ref, worker, subscriptions, type, index)
      };
    };

    function makeApi(index) {
      return {
        angularFactor: makeVec('angularFactor', index),
        angularVelocity: makeVec('angularVelocity', index),
        linearFactor: makeVec('linearFactor', index),
        position: makeVec('position', index),
        quaternion: makeQuaternion(index),
        rotation: makeRotation(index),
        velocity: makeVec('velocity', index),
        allowSleep: makeAtomic('allowSleep', index),
        angularDamping: makeAtomic('angularDamping', index),
        collisionFilterGroup: makeAtomic('collisionFilterGroup', index),
        collisionFilterMask: makeAtomic('collisionFilterMask', index),
        collisionResponse: makeAtomic('collisionResponse', index),
        isTrigger: makeAtomic('isTrigger', index),
        fixedRotation: makeAtomic('fixedRotation', index),
        linearDamping: makeAtomic('linearDamping', index),
        mass: makeAtomic('mass', index),
        material: makeAtomic('material', index),
        sleepSpeedLimit: makeAtomic('sleepSpeedLimit', index),
        sleepTimeLimit: makeAtomic('sleepTimeLimit', index),
        userData: makeAtomic('userData', index),

        // Apply functions
        applyForce(force, worldPoint) {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'applyForce',
            props: [force, worldPoint],
            uuid
          });
        },

        applyImpulse(impulse, worldPoint) {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'applyImpulse',
            props: [impulse, worldPoint],
            uuid
          });
        },

        applyLocalForce(force, localPoint) {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'applyLocalForce',
            props: [force, localPoint],
            uuid
          });
        },

        applyLocalImpulse(impulse, localPoint) {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'applyLocalImpulse',
            props: [impulse, localPoint],
            uuid
          });
        },

        applyTorque(torque) {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'applyTorque',
            props: [torque],
            uuid
          });
        },

        // force particular sleep state
        sleep() {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'sleep',
            uuid
          });
        },

        wakeUp() {
          const uuid = getUUID(ref, index);
          uuid && worker.postMessage({
            op: 'wakeUp',
            uuid
          });
        }

      };
    }

    const cache = {};
    return { ...makeApi(undefined),
      at: index => cache[index] || (cache[index] = makeApi(index))
    };
  }, []);
  return [ref, api];
}

function makeTriplet(v) {
  return v instanceof Vector3 ? [v.x, v.y, v.z] : v;
}

function usePlane(fn, fwdRef, deps) {
  if (fwdRef === void 0) {
    fwdRef = null;
  }

  return useBody('Plane', fn, () => [], fwdRef, deps);
}
function useBox(fn, fwdRef, deps) {
  if (fwdRef === void 0) {
    fwdRef = null;
  }

  const defaultBoxArgs = [1, 1, 1];
  return useBody('Box', fn, function (args) {
    if (args === void 0) {
      args = defaultBoxArgs;
    }

    return args;
  }, fwdRef, deps);
}
function useCylinder(fn, fwdRef, deps) {
  if (fwdRef === void 0) {
    fwdRef = null;
  }

  return useBody('Cylinder', fn, function (args) {
    if (args === void 0) {
      args = [];
    }

    return args;
  }, fwdRef, deps);
}
function useHeightfield(fn, fwdRef, deps) {
  if (fwdRef === void 0) {
    fwdRef = null;
  }

  return useBody('Heightfield', fn, args => args, fwdRef, deps);
}
function useParticle(fn, fwdRef, deps) {
  if (fwdRef === void 0) {
    fwdRef = null;
  }

  return useBody('Particle', fn, () => [], fwdRef, deps);
}
function useSphere(fn, fwdRef, deps) {
  if (fwdRef === void 0) {
    fwdRef = null;
  }

  return useBody('Sphere', fn, function (args) {
    if (args === void 0) {
      args = [1];
    }

    if (!Array.isArray(args)) throw new Error('useSphere args must be an array');
    return [args[0]];
  }, fwdRef, deps);
}
function useTrimesh(fn, fwdRef, deps) {
  if (fwdRef === void 0) {
    fwdRef = null;
  }

  return useBody('Trimesh', fn, args => args, fwdRef, deps);
}
function useConvexPolyhedron(fn, fwdRef, deps) {
  if (fwdRef === void 0) {
    fwdRef = null;
  }

  return useBody('ConvexPolyhedron', fn, function (_temp) {
    let [vertices, faces, normals, axes, boundingSphereRadius] = _temp === void 0 ? [] : _temp;
    return [vertices && vertices.map(makeTriplet), faces, normals && normals.map(makeTriplet), axes && axes.map(makeTriplet), boundingSphereRadius];
  }, fwdRef, deps);
}
function useCompoundBody(fn, fwdRef, deps) {
  if (fwdRef === void 0) {
    fwdRef = null;
  }

  return useBody('Compound', fn, args => args, fwdRef, deps);
}

function useConstraint(type, bodyA, bodyB, optns, deps) {
  if (optns === void 0) {
    optns = {};
  }

  if (deps === void 0) {
    deps = [];
  }

  const {
    worker
  } = useContext(context);
  const uuid = MathUtils.generateUUID();
  const refA = useForwardedRef(bodyA);
  const refB = useForwardedRef(bodyB);
  useEffect(() => {
    if (refA.current && refB.current) {
      worker.postMessage({
        op: 'addConstraint',
        props: [refA.current.uuid, refB.current.uuid, optns],
        type,
        uuid
      });
      return () => worker.postMessage({
        op: 'removeConstraint',
        uuid
      });
    }
  }, deps);
  const api = useMemo(() => {
    const enableDisable = {
      enable: () => worker.postMessage({
        op: 'enableConstraint',
        uuid
      }),
      disable: () => worker.postMessage({
        op: 'disableConstraint',
        uuid
      })
    };

    if (type === 'Hinge') {
      return { ...enableDisable,
        enableMotor: () => worker.postMessage({
          op: 'enableConstraintMotor',
          uuid
        }),
        disableMotor: () => worker.postMessage({
          op: 'disableConstraintMotor',
          uuid
        }),
        setMotorSpeed: value => worker.postMessage({
          op: 'setConstraintMotorSpeed',
          uuid,
          props: value
        }),
        setMotorMaxForce: value => worker.postMessage({
          op: 'setConstraintMotorMaxForce',
          uuid,
          props: value
        })
      };
    }

    return enableDisable;
  }, deps);
  return [refA, refB, api];
}

function usePointToPointConstraint(bodyA, bodyB, optns, deps) {
  if (bodyA === void 0) {
    bodyA = null;
  }

  if (bodyB === void 0) {
    bodyB = null;
  }

  if (deps === void 0) {
    deps = [];
  }

  return useConstraint('PointToPoint', bodyA, bodyB, optns, deps);
}
function useConeTwistConstraint(bodyA, bodyB, optns, deps) {
  if (bodyA === void 0) {
    bodyA = null;
  }

  if (bodyB === void 0) {
    bodyB = null;
  }

  if (deps === void 0) {
    deps = [];
  }

  return useConstraint('ConeTwist', bodyA, bodyB, optns, deps);
}
function useDistanceConstraint(bodyA, bodyB, optns, deps) {
  if (bodyA === void 0) {
    bodyA = null;
  }

  if (bodyB === void 0) {
    bodyB = null;
  }

  if (deps === void 0) {
    deps = [];
  }

  return useConstraint('Distance', bodyA, bodyB, optns, deps);
}
function useHingeConstraint(bodyA, bodyB, optns, deps) {
  if (bodyA === void 0) {
    bodyA = null;
  }

  if (bodyB === void 0) {
    bodyB = null;
  }

  if (deps === void 0) {
    deps = [];
  }

  return useConstraint('Hinge', bodyA, bodyB, optns, deps);
}
function useLockConstraint(bodyA, bodyB, optns, deps) {
  if (bodyA === void 0) {
    bodyA = null;
  }

  if (bodyB === void 0) {
    bodyB = null;
  }

  if (deps === void 0) {
    deps = [];
  }

  return useConstraint('Lock', bodyA, bodyB, optns, deps);
}
function useSpring(bodyA, bodyB, optns, deps) {
  if (bodyA === void 0) {
    bodyA = null;
  }

  if (bodyB === void 0) {
    bodyB = null;
  }

  if (deps === void 0) {
    deps = [];
  }

  const {
    worker
  } = useContext(context);
  const [uuid] = useState(() => MathUtils.generateUUID());
  const refA = useForwardedRef(bodyA);
  const refB = useForwardedRef(bodyB);
  useEffect(() => {
    if (refA.current && refB.current) {
      worker.postMessage({
        op: 'addSpring',
        uuid,
        props: [refA.current.uuid, refB.current.uuid, optns]
      });
      return () => {
        worker.postMessage({
          op: 'removeSpring',
          uuid
        });
      };
    }
  }, deps);
  const api = useMemo(() => ({
    setStiffness: value => worker.postMessage({
      op: 'setSpringStiffness',
      props: value,
      uuid
    }),
    setRestLength: value => worker.postMessage({
      op: 'setSpringRestLength',
      props: value,
      uuid
    }),
    setDamping: value => worker.postMessage({
      op: 'setSpringDamping',
      props: value,
      uuid
    })
  }), deps);
  return [refA, refB, api];
}

function useRay(mode, options, callback, deps) {
  if (deps === void 0) {
    deps = [];
  }

  const {
    worker,
    events
  } = useContext(context);
  const [uuid] = useState(() => MathUtils.generateUUID());
  useEffect(() => {
    events[uuid] = {
      rayhit: callback
    };
    worker.postMessage({
      op: 'addRay',
      uuid,
      props: {
        mode,
        ...options
      }
    });
    return () => {
      worker.postMessage({
        op: 'removeRay',
        uuid
      });
      delete events[uuid];
    };
  }, deps);
}

function useRaycastClosest(options, callback, deps) {
  if (deps === void 0) {
    deps = [];
  }

  useRay('Closest', options, callback, deps);
}
function useRaycastAny(options, callback, deps) {
  if (deps === void 0) {
    deps = [];
  }

  useRay('Any', options, callback, deps);
}
function useRaycastAll(options, callback, deps) {
  if (deps === void 0) {
    deps = [];
  }

  useRay('All', options, callback, deps);
}

function isString(v) {
  return typeof v === 'string';
}

function useRaycastVehicle(fn, fwdRef, deps) {
  if (fwdRef === void 0) {
    fwdRef = null;
  }

  if (deps === void 0) {
    deps = [];
  }

  const ref = useForwardedRef(fwdRef);
  const {
    worker,
    subscriptions
  } = useContext(context);
  useLayoutEffect(() => {
    if (!ref.current) {
      // When the reference isn't used we create a stub
      // The body doesn't have a visual representation but can still be constrained
      ref.current = new Object3D();
    }

    const currentWorker = worker;
    const uuid = [ref.current.uuid];
    const {
      chassisBody,
      indexForwardAxis = 2,
      indexRightAxis = 0,
      indexUpAxis = 1,
      wheelInfos,
      wheels
    } = fn();
    const chassisBodyUUID = getUUID(chassisBody);
    const wheelUUIDs = wheels.map(ref => getUUID(ref));
    if (!chassisBodyUUID || !wheelUUIDs.every(isString)) return;
    currentWorker.postMessage({
      op: 'addRaycastVehicle',
      uuid,
      props: [chassisBodyUUID, wheelUUIDs, wheelInfos, indexForwardAxis, indexRightAxis, indexUpAxis]
    });
    return () => {
      currentWorker.postMessage({
        op: 'removeRaycastVehicle',
        uuid
      });
    };
  }, deps);
  const api = useMemo(() => {
    return {
      sliding: {
        subscribe: subscribe(ref, worker, subscriptions, 'sliding', undefined, 'vehicles')
      },

      setSteeringValue(value, wheelIndex) {
        const uuid = getUUID(ref);
        uuid && worker.postMessage({
          op: 'setRaycastVehicleSteeringValue',
          props: [value, wheelIndex],
          uuid
        });
      },

      applyEngineForce(value, wheelIndex) {
        const uuid = getUUID(ref);
        uuid && worker.postMessage({
          op: 'applyRaycastVehicleEngineForce',
          props: [value, wheelIndex],
          uuid
        });
      },

      setBrake(brake, wheelIndex) {
        const uuid = getUUID(ref);
        uuid && worker.postMessage({
          op: 'setRaycastVehicleBrake',
          props: [brake, wheelIndex],
          uuid
        });
      }

    };
  }, deps);
  return [ref, api];
}

function Physics(props) {
  return /*#__PURE__*/jsx(Suspense, {
    fallback: null,
    children: /*#__PURE__*/jsx(Provider, { ...props
    })
  });
}

export { Debug, Physics, atomicNames, context, debugContext, subscriptionNames, useBox, useCompoundBody, useConeTwistConstraint, useConvexPolyhedron, useCylinder, useDistanceConstraint, useHeightfield, useHingeConstraint, useLockConstraint, useParticle, usePlane, usePointToPointConstraint, useRaycastAll, useRaycastAny, useRaycastClosest, useRaycastVehicle, useSphere, useSpring, useTrimesh, vectorNames };
