'use strict';(function(e,l){"object"===typeof exports&&"undefined"!==typeof module?l(exports):"function"===typeof define&&define.amd?define(["exports"],l):(e="undefined"!==typeof globalThis?globalThis:e||self,l(e.troika_animation={}))})(this,function(e){function l(a,b){return c=>.5>c?.5*a(2*c):.5*b(2*c-1)+.5}function q(a){return b=>k(b,a)}function r(a){return b=>1-k(1-b,a)}function t(a){return b=>.5>b?.5*k(2*b,a):.5*(1-k(1-(2*b-1),a))+.5}function p(a,b,c){return a+(b-a)*c}function O(a,b){return a.totalElapsed-
b.totalElapsed}function P(){}function Q(a){return a.runner$running}function R(a){return!a.runner$stopped}function S(){let a=Date.now();m=null;u&&(n=n.filter(Q),u=!1);if(n.length){for(let b=n.length;0<b--;)n[b]._tick(a);x()}}function x(){m||(m=v.requestAnimationFrame(S))}let {pow:k,PI:y,sqrt:B}=Math,C=y/2,T=2*y,U=q(2),V=r(2),W=t(2),X=q(3),Y=r(3),Z=t(3),aa=q(4),ba=r(4),ca=t(4),da=q(5),ea=r(5),fa=t(5),D=a=>1-B(1-a*a),E=a=>B(1-k(a-1,2)),ha=l(D,E),F=a=>0===a||1===a?a:1-z(1-a),z=a=>0===a||1===a?a:Math.pow(2,
-10*a)*Math.sin((a-.075)*T/.3)+1,ia=l(F,z),G=a=>1-A(1-a),A=a=>a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,ja=l(G,A);var H=Object.freeze({__proto__:null,linear:a=>a,easeInQuad:U,easeOutQuad:V,easeInOutQuad:W,easeInCubic:X,easeOutCubic:Y,easeInOutCubic:Z,easeInQuart:aa,easeOutQuart:ba,easeInOutQuart:ca,easeInQuint:da,easeOutQuint:ea,easeInOutQuint:fa,easeInSine:a=>1-Math.cos(a*C),easeOutSine:a=>Math.sin(a*C),easeInOutSine:a=>
-.5*(Math.cos(y*a)-1),easeInExpo:a=>0===a?0:k(2,10*(a-1)),easeOutExpo:a=>1===a?1:1-k(2,-10*a),easeInOutExpo:a=>0===a||1===a?a:.5>a?.5*k(2,10*(2*a-1)):.5*(1-k(2,-10*(2*a-1)))+.5,easeInCirc:D,easeOutCirc:E,easeInOutCirc:ha,easeInElastic:F,easeOutElastic:z,easeInOutElastic:ia,easeInBack:a=>a*a*(2.70158*a-1.70158),easeOutBack:a=>--a*a*(2.70158*a+1.70158)+1,easeInOutBack:a=>1>(a*=2)?.5*a*a*(3.5949095*a-2.5949095):.5*((a-=2)*a*(3.5949095*a+2.5949095)+2),easeInBounce:G,easeOutBounce:A,easeInOutBounce:ja});
let I=function(){let a,b,c=Object.create(null),f=0;return function(d){if("number"===typeof d)return d;if("string"===typeof d){if(d in c)return c[d];a||(a=document.createElement("canvas"),b=a.getContext("2d"));a.width=a.height=1;b.fillStyle=d;b.fillRect(0,0,1,1);var g=b.getImageData(0,0,1,1).data;g=g[0]<<16^g[1]<<8^g[2];2048<f&&(c=Object.create(null),f=0);c[d]=g;f++;return g}return d&&d.isColor?d.getHex():0}}();var J=Object.freeze({__proto__:null,number:p,color:function(a,b,c){a=I(a);b=I(b);var f=
p(a>>16&255,b>>16&255,c),d=p(a>>8&255,b>>8&255,c);a=p(a&255,b&255,c);return f<<16^d<<8^a}});class K{gotoElapsedTime(a){}gotoEnd(){}isDoneAtElapsedTime(a){}}let L=a=>a;class M extends K{constructor(a,b,c,f=750,d=0,g=L,h=1,ka="forward",e="number"){super();this.callback=a;this.fromValue=b;this.toValue=c;this.duration=f;this.delay=d;this.easing="string"===typeof g?H[g]||L:g;this.iterations=h;this.direction=ka;this.interpolate="function"===typeof e?e:J[e]||p;this.totalElapsed=9007199254740991>this.iterations?
this.delay+this.duration*this.iterations:9007199254740991}gotoElapsedTime(a){let b=this.duration;var c=this.delay;if(a>=c){a=Math.min(a,this.totalElapsed)-c;c=a%b/b;0===c&&0!==a&&(c=1);c=this.easing(c);if("reverse"===this.direction||"alternate"===this.direction&&0===Math.ceil(a/b)%2)c=1-c;this.callback(this.interpolate(this.fromValue,this.toValue,c))}}gotoEnd(){this.gotoElapsedTime(this.totalElapsed)}isDoneAtElapsedTime(a){return a>this.totalElapsed}}class la extends M{constructor(a,b,c,f,d,g){"number"!==
typeof b&&(b=a.reduce((a,b)=>Math.max(a,b.totalElapsed),0));Infinity===b&&(b=Number.MAX_VALUE);super(null,0,b,b,c,f,d,g);1===a.length?this.callback=a[0].gotoElapsedTime.bind(a[0]):(a.sort(O),this.callback=this._syncTweens);this.tweens=a}_syncTweens(a){for(let b=0,c=this.tweens.length;b<c;b++)this.tweens[b].gotoElapsedTime(a)}}let n=[],m=null,u=!1,v=window;class ma{constructor(){this.tweens=[]}destructor(){this.tweens=null;this.runner$running=!1;u=!0;this.start=this.stop=this.pause=this._tick=P}start(a){a.runner$paused&&
a.runner$started?a.runner$started+=Date.now()-a.runner$paused:this.tweens.push(a);a.runner$paused=null;a.runner$stopped=!1;this.runner$running||(this.runner$running=!0,n.push(this),x())}stop(a){a.runner$stopped=!0;a.runner$paused=null}pause(a){a.runner$paused||(a.runner$paused=Date.now())}stopAll(){this.tweens&&this.tweens.forEach(this.stop,this)}_tick(a){let b=this.tweens,c=!1,f=!1;for(let d=0,g=b.length;d<g;d++){let h=b[d];if(!h.runner$stopped&&!h.runner$paused){let b=a-(h.runner$started||(h.runner$started=
a));h.gotoElapsedTime(b);f=!0;if(h.isDoneAtElapsedTime(b)&&(this.stop(h),h.onDone))h.onDone()}h.runner$stopped&&(c=!0)}if(f)this.onTick();if(c&&(this.tweens=b.filter(R),!this.tweens.length&&(this.runner$running=!1,u=!0,this.onDone)))this.onDone()}onTick(){}onDone(){}}var N={default:{mass:1,tension:170,friction:26},gentle:{mass:1,tension:120,friction:14},wobbly:{mass:1,tension:180,friction:12},stiff:{mass:1,tension:210,friction:20},slow:{mass:1,tension:280,friction:60},molasses:{mass:1,tension:280,
friction:120}};let w=N.default;class na extends K{constructor(a,b,c,f,d=0,g=0){super();this.isSpring=!0;this.callback=a;this.currentValue=b;this.toValue=c;this.velocity=d;this.delay=g;"string"===typeof f&&(f=N[f]);f||(f=w);let {mass:h,tension:e,friction:k}=f;this.mass="number"===typeof h?h:w.mass;this.tension=1E-6*("number"===typeof e?e:w.tension);this.friction=.001*("number"===typeof k?k:w.friction);this.minAcceleration=1E-10;this.$lastTime=g;this.$endTime=Infinity}gotoElapsedTime(a){if(a>=this.delay){let {toValue:b,
mass:c,tension:f,friction:d,minAcceleration:e}=this,h=this.velocity||0,k=this.currentValue;for(let g=this.$lastTime;g<a;g++){let a=(f*(b-k)-d*h)/c;if(Math.abs(a)<e){h=0;k=b;this.$endTime=g;break}else h+=a,k+=h}this.velocity=h;this.$lastTime=a;this.callback(this.currentValue=k)}}gotoEnd(){this.velocity=0;this.$lastTime=this.$endTime;this.callback(this.currentValue=this.toValue)}isDoneAtElapsedTime(a){return a>=this.$endTime}}e.Easings=H;e.Interpolators=J;e.MultiTween=la;e.Runner=ma;e.SpringTween=na;
e.Tween=M;e.setAnimationScheduler=function(a){a=a||window;a!==v&&(m&&(v.cancelAnimationFrame(m),m=null),v=a,x())};Object.defineProperty(e,"__esModule",{value:!0})})
